
<!doctype html>
<!-- The following comment is called a MOTW comment and is necessary for the TiddlyIE Internet Explorer extension -->
<!-- saved from url=(0021)https://tiddlywiki.com -->
<html lang="zh-Hans">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<!--~~ Raw markup for the top of the head section ~~-->

<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta name="application-name" content="TiddlyWiki" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.1.24-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no" />
<meta name="copyright" content="TiddlyWiki created by Jeremy Ruston, (jeremy [at] jermolene [dot] com)

Copyright (c) 2004-2007, Jeremy Ruston
Copyright (c) 2007-2021, UnaMesa Association
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* Neither the name of the copyright holder nor the names of its
  contributors may be used to endorse or promote products derived from
  this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE." />
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<title>我的日课

— 始于2021——与自己的成长竞赛
</title>
<!--~~ This is a Tiddlywiki file. The points of interest in the file are marked with this pattern ~~-->

<!--~~ Raw markup ~~-->



</head>
<body class="tc-body">
<!--~~ Raw markup for the top of the body section ~~-->

<!--~~ Static styles ~~-->
<div id="styleArea">
<style data-tiddler-title="$:/boot/boot.css" data-tiddler-type="text/css" type="text/css">/*
Basic styles used before we boot up the parsing engine
*/

/*
Error message and password prompt
*/

.tc-error-form {
	font-family: sans-serif;
	color: #fff;
	z-index: 20000;
	position: fixed;
	background-color: rgb(255, 75, 75);
	border: 8px solid rgb(255, 0, 0);
	border-radius: 8px;
	width: 50%;
	margin-left: 25%;
	margin-top: 4em;
	padding: 0 2em 1em 2em;
}

.tc-error-form h1 {
	text-align: center;
}

.tc-error-prompt {
	text-align: center;
	color: #000;
}

.tc-error-message {
	overflow: auto;
	max-height: 40em;
	padding-right: 1em;
	margin: 1em 0;
	white-space: pre-line;
}

.tc-password-wrapper {
    font-family: sans-serif;
	z-index: 20000;
	position: fixed;
	text-align: center;
	width: 200px;
	top: 4em;
	left: 50%;
	margin-left: -144px; /* - width/2 - paddingHorz/2 - border */
	padding: 16px 16px 16px 16px;
	border-radius: 8px;
}

.tc-password-wrapper {
	color: #000;
	text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
	background-color: rgb(197, 235, 183);
	border: 8px solid rgb(164, 197, 152);
}

.tc-password-wrapper form {
	text-align: left;
}

.tc-password-wrapper h1 {
	font-size: 16px;
	line-height: 20px;
	padding-bottom: 16px;
}

.tc-password-wrapper input {
	width: 100%;
}
</style>
</div>
<!--~~ Static content for Google and browsers without JavaScript ~~-->
<noscript>
<div id="splashArea">


<p>This <a class="tc-tiddlylink-external" href="https://tiddlywiki.com" rel="noopener noreferrer" target="_blank">TiddlyWiki</a> contains the following tiddlers:</p><p><ul>

<li>《罗马的瘟疫》</li>

<li>《噪声》</li>

<li>$:/config/AutoSave</li>

<li>$:/config/DownloadSaver/AutoSave</li>

<li>$:/config/NewJournal/Text</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/advanced-search</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/encryption</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/import</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-journal</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/refresh</li>

<li>$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/timestamp</li>

<li>$:/config/TimestampDisable</li>

<li>$:/config/Toolbar/Text</li>

<li>$:/core</li>

<li>$:/DefaultTiddlers</li>

<li>$:/Gitea/Branch</li>

<li>$:/Gitea/Filename</li>

<li>$:/Gitea/Path</li>

<li>$:/Gitea/Repo</li>

<li>$:/Gitea/Username</li>

<li>$:/GitHub/Filename</li>

<li>$:/GitHub/Path</li>

<li>$:/GitHub/Repo</li>

<li>$:/GitHub/Username</li>

<li>$:/Import</li>

<li>$:/isEncrypted</li>

<li>$:/language</li>

<li>$:/language/DefaultNewTiddlerTitle</li>

<li>$:/languages/zh-Hans</li>

<li>$:/palette</li>

<li>$:/plugins/telmiger/details</li>

<li>$:/plugins/telmiger/details/about</li>

<li>$:/plugins/telmiger/details/colours.css</li>

<li>$:/plugins/telmiger/details/details.css</li>

<li>$:/plugins/telmiger/details/details.js</li>

<li>$:/plugins/telmiger/details/icon</li>

<li>$:/plugins/telmiger/details/license</li>

<li>$:/plugins/telmiger/details/readme</li>

<li>$:/plugins/telmiger/DetailsWidget/support</li>

<li>$:/plugins/telmiger/support</li>

<li>$:/SiteSubtitle</li>

<li>$:/SiteTitle</li>

<li>$:/state/showeditpreview</li>

<li>$:/state/sidebar</li>

<li>$:/state/tab--1963855381</li>

<li>$:/state/tab--2112689675</li>

<li>$:/state/tab--86143343</li>

<li>$:/state/tab--959111941</li>

<li>$:/state/tab-1163638994</li>

<li>$:/state/tab-1677851421</li>

<li>$:/state/tab-1749438307</li>

<li>$:/state/tab-2065006209</li>

<li>$:/state/tab/moresidebar-1850697562</li>

<li>$:/state/tab/sidebar--595412856</li>

<li>$:/status/RequireReloadDueToPluginChange</li>

<li>$:/StoryList</li>

<li>$:/theme</li>

<li>$:/themes/tiddlywiki/snowwhite</li>

<li>$:/themes/tiddlywiki/vanilla</li>

<li>$:/view</li>

<li>2021年07月02日</li>

<li>2021年07月06日</li>

<li>20世纪的教训</li>

<li>鲍曼</li>

<li>伯克森悖论</li>

<li>答案</li>

<li>当代思想</li>

<li>德沃金</li>

<li>定义</li>

<li>发展中国家的政治分析</li>

<li>费曼</li>

<li>封建社会</li>

<li>弗洛伊德</li>

<li>福山</li>

<li>干货</li>

<li>哈贝马斯</li>

<li>哈耶克</li>

<li>汉娜·阿伦特</li>

<li>豪族社会</li>

<li>核能</li>

<li>后冷战时代</li>

<li>绘制人生地图</li>

<li>机械预测</li>

<li>加强政党合作 共谋人民幸福</li>

<li>建设高质量关系</li>

<li>近代转型</li>

<li>精力管理</li>

<li>卡尔·波普尔</li>

<li>科学减肥</li>

<li>克尔郭凯尔</li>

<li>客观无知</li>

<li>罗尔斯</li>

<li>马尔库塞</li>

<li>马克斯·韦伯</li>

<li>孟子</li>

<li>尼采</li>

<li>诺齐克</li>

<li>朋友圈</li>

<li>偏差</li>

<li>平民社会</li>

<li>七一讲话学习感想</li>

<li>启动思维的进化</li>

<li>启动行为的改变</li>

<li>权力如何管理社会？</li>

<li>萨特</li>

<li>桑德尔</li>

<li>社会如何控制权力？</li>

<li>士</li>

<li>首页</li>

<li>思维偏差</li>

<li>随机控制</li>

<li>泰勒</li>

<li>特高压</li>

<li>沃尔泽</li>

<li>五条政治法则</li>

<li>西方现代思想</li>

<li>习大大七一寄语青年</li>

<li>现代革命</li>

<li>现代人的思想困境</li>

<li>项羽</li>

<li>小布什</li>

<li>以赛亚·柏林</li>

<li>幽默</li>

<li>在Github Pages上搭建Tiddlywiki</li>

<li>噪声</li>

<li>哲学</li>

<li>政治学是认识世界的必修课</li>

<li>政治学思维方式</li>

<li>政治学通识</li>

<li>政治中的分歧和冲突</li>

<li>制度设计的政治智慧</li>

<li>中国崛起</li>

<li>中国史纲</li>

<li>专栏</li>

<li>庄子</li>

<li>自律</li>

<li>自我成长</li>

<li>自我发展心理学</li>

<li>自由主义的反复死亡</li>

<li>走出人生瓶颈</li>

</ul>
</p>



<style>
.tc-remove-when-wiki-loaded {display: none;}
</style>

</div>
</noscript>
<!--~~ Ordinary tiddlers ~~-->

<div id="storeArea" style="display:none;">
<div tags="" title="《罗马的瘟疫》">
<pre>[img[罗马的瘟疫.png]]

德劳内，瘟疫肆虐下的脆弱人间</pre>
</div>
<div bag="default" created="20210701112322719" modified="20210703140949054" revision="0" tags="思维" title="《噪声》" tmap.id="0a5dcd1a-e12d-4d7e-81aa-a0ff1251cd91" type="text/vnd.tiddlywiki">
<pre>系统判断错误=[[偏差]]+[[噪声]]。

偏差和噪声都是大脑判断中的错误，要尽力避免。

[[客观无知]]也会导致判断失误。

[[机械预测]]比人强，人的偏差是在太大。


</pre>
</div>
<div created="20210705064900044" modified="20210705064901331" title="$:/config/AutoSave">
<pre>yes</pre>
</div>
<div created="20210705064913826" modified="20210705064913826" title="$:/config/DownloadSaver/AutoSave">
<pre>yes</pre>
</div>
<div created="20210705065044185" modified="20210705065045420" title="$:/config/NewJournal/Text">
<pre></pre>
</div>
<div title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/advanced-search">
<pre>hide</pre>
</div>
<div created="20210705065706294" modified="20210705065952831" title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/encryption">
<pre>hide</pre>
</div>
<div title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/import">
<pre>show</pre>
</div>
<div title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-journal">
<pre>show</pre>
</div>
<div created="20210705064226386" modified="20210705064226386" title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/refresh">
<pre>show</pre>
</div>
<div created="20210705070019268" modified="20210705070019268" title="$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/timestamp">
<pre>hide</pre>
</div>
<div created="20210705070016818" modified="20210705070020726" title="$:/config/TimestampDisable">
<pre>no</pre>
</div>
<div title="$:/config/Toolbar/Text">
<pre>no</pre>
</div>
<div author="JeremyRuston" core-version="&gt;=5.0.0" dependents="" description="TiddlyWiki5 core" list="readme" name="Core" plugin-priority="0" plugin-type="plugin" title="$:/core" type="application/json" version="5.1.24-prerelease">
<pre>{"tiddlers":{"$:/Acknowledgements":{"title":"$:/Acknowledgements","text":"TiddlyWiki incorporates code from these fine OpenSource projects:\n\n* [[The Stanford Javascript Crypto Library|http://bitwiseshiftleft.github.io/sjcl/]]\n* [[The Jasmine JavaScript Test Framework|http://pivotal.github.io/jasmine/]]\n* [[Normalize.css by Nicolas Gallagher|http://necolas.github.io/normalize.css/]]\n\nAnd media from these projects:\n\n* World flag icons from [[Wikipedia|http://commons.wikimedia.org/wiki/Category:SVG_flags_by_country]]\n"},"$:/core/copyright.txt":{"title":"$:/core/copyright.txt","type":"text/plain","text":"TiddlyWiki created by Jeremy Ruston, (jeremy [at] jermolene [dot] com)\n\nCopyright (c) 2004-2007, Jeremy Ruston\nCopyright (c) 2007-2021, UnaMesa Association\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."},"$:/core/icon":{"title":"$:/core/icon","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M64 0l54.56 32v64L64 128 9.44 96V32L64 0zm21.127 95.408c-3.578-.103-5.15-.094-6.974-3.152l-1.42.042c-1.653-.075-.964-.04-2.067-.097-1.844-.07-1.548-1.86-1.873-2.8-.52-3.202.687-6.43.65-9.632-.014-1.14-1.593-5.17-2.157-6.61-1.768.34-3.546.406-5.34.497-4.134-.01-8.24-.527-12.317-1.183-.8 3.35-3.16 8.036-1.21 11.44 2.37 3.52 4.03 4.495 6.61 4.707 2.572.212 3.16 3.18 2.53 4.242-.55.73-1.52.864-2.346 1.04l-1.65.08c-1.296-.046-2.455-.404-3.61-.955-1.93-1.097-3.925-3.383-5.406-5.024.345.658.55 1.938.24 2.53-.878 1.27-4.665 1.26-6.4.47-1.97-.89-6.73-7.162-7.468-11.86 1.96-3.78 4.812-7.07 6.255-11.186-3.146-2.05-4.83-5.384-4.61-9.16l.08-.44c-3.097.59-1.49.37-4.82.628-10.608-.032-19.935-7.37-14.68-18.774.34-.673.664-1.287 1.243-.994.466.237.4 1.18.166 2.227-3.005 13.627 11.67 13.732 20.69 11.21.89-.25 2.67-1.936 3.905-2.495 2.016-.91 4.205-1.282 6.376-1.55 5.4-.63 11.893 2.276 15.19 2.37 3.3.096 7.99-.805 10.87-.615 2.09.098 4.143.483 6.16 1.03 1.306-6.49 1.4-11.27 4.492-12.38 1.814.293 3.213 2.818 4.25 4.167 2.112-.086 4.12.46 6.115 1.066 3.61-.522 6.642-2.593 9.833-4.203-3.234 2.69-3.673 7.075-3.303 11.127.138 2.103-.444 4.386-1.164 6.54-1.348 3.507-3.95 7.204-6.97 7.014-1.14-.036-1.805-.695-2.653-1.4-.164 1.427-.81 2.7-1.434 3.96-1.44 2.797-5.203 4.03-8.687 7.016-3.484 2.985 1.114 13.65 2.23 15.594 1.114 1.94 4.226 2.652 3.02 4.406-.37.58-.936.785-1.54 1.01l-.82.11zm-40.097-8.85l.553.14c.694-.27 2.09.15 2.83.353-1.363-1.31-3.417-3.24-4.897-4.46-.485-1.47-.278-2.96-.174-4.46l.02-.123c-.582 1.205-1.322 2.376-1.72 3.645-.465 1.71 2.07 3.557 3.052 4.615l.336.3z\" fill-rule=\"evenodd\"/&gt;&lt;/svg&gt;"},"$:/core/images/add-comment":{"title":"$:/core/images/add-comment","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-add-comment tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M56 56H36a8 8 0 100 16h20v20a8 8 0 1016 0V72h20a8 8 0 100-16H72V36a8 8 0 10-16 0v20zm-12.595 58.362c-6.683 7.659-20.297 12.903-36.006 12.903-2.196 0-4.35-.102-6.451-.3 9.652-3.836 17.356-12.24 21.01-22.874C8.516 94.28 0 79.734 0 63.5 0 33.953 28.206 10 63 10s63 23.953 63 53.5S97.794 117 63 117c-6.841 0-13.428-.926-19.595-2.638z\"/&gt;&lt;/svg&gt;"},"$:/core/images/advanced-search-button":{"title":"$:/core/images/advanced-search-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-advanced-search-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M74.565 87.985A47.776 47.776 0 0148 96C21.49 96 0 74.51 0 48S21.49 0 48 0s48 21.49 48 48c0 9.854-2.97 19.015-8.062 26.636l34.347 34.347a9.443 9.443 0 010 13.36 9.446 9.446 0 01-13.36 0l-34.36-34.358zM48 80c17.673 0 32-14.327 32-32 0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32 0 17.673 14.327 32 32 32z\"/&gt;&lt;circle cx=\"48\" cy=\"48\" r=\"8\"/&gt;&lt;circle cx=\"28\" cy=\"48\" r=\"8\"/&gt;&lt;circle cx=\"68\" cy=\"48\" r=\"8\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/auto-height":{"title":"$:/core/images/auto-height","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-auto-height tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M67.987 114.356l-.029-14.477a4 4 0 00-2.067-3.494l-15.966-8.813-1.933 7.502H79.9c4.222 0 5.564-5.693 1.786-7.58L49.797 71.572 48.01 79.15h31.982c4.217 0 5.564-5.682 1.795-7.575L49.805 55.517l-1.795 7.575h31.982c4.212 0 5.563-5.67 1.805-7.57l-16.034-8.105 2.195 3.57V35.614l9.214 9.213a4 4 0 105.656-5.656l-16-16a4 4 0 00-5.656 0l-16 16a4 4 0 105.656 5.656l9.13-9.13v15.288a4 4 0 002.195 3.57l16.035 8.106 1.804-7.57H48.01c-4.217 0-5.564 5.682-1.795 7.574l31.982 16.059 1.795-7.575H48.01c-4.222 0-5.564 5.693-1.787 7.579l31.89 15.923 1.787-7.578H47.992c-4.133 0-5.552 5.504-1.933 7.501l15.966 8.813-2.067-3.494.029 14.436-9.159-9.158a4 4 0 00-5.656 5.656l16 16a4 4 0 005.656 0l16-16a4 4 0 10-5.656-5.656l-9.185 9.184zM16 20h96a4 4 0 100-8H16a4 4 0 100 8z\"/&gt;&lt;/svg&gt;"},"$:/core/images/blank":{"title":"$:/core/images/blank","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-blank tc-image-button\" viewBox=\"0 0 128 128\"/&gt;"},"$:/core/images/bold":{"title":"$:/core/images/bold","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-bold tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M41.146 51.81V21.87h26.353c2.51 0 4.93.21 7.26.628 2.33.418 4.392 1.165 6.185 2.24 1.793 1.076 3.227 2.57 4.302 4.482 1.076 1.913 1.614 4.363 1.614 7.35 0 5.379-1.613 9.263-4.84 11.653-3.227 2.39-7.35 3.586-12.37 3.586H41.146zM13 0v128h62.028a65.45 65.45 0 0016.762-2.151c5.438-1.434 10.278-3.645 14.52-6.633 4.244-2.988 7.62-6.842 10.13-11.563 2.51-4.721 3.764-10.308 3.764-16.762 0-8.008-1.942-14.85-5.826-20.527-3.884-5.677-9.77-9.65-17.658-11.921 5.737-2.75 10.069-6.275 12.997-10.577 2.928-4.303 4.392-9.681 4.392-16.135 0-5.976-.986-10.995-2.958-15.059-1.972-4.063-4.75-7.32-8.336-9.77-3.585-2.45-7.888-4.213-12.907-5.289C84.888.538 79.33 0 73.235 0H13zm28.146 106.129V70.992H71.8c6.095 0 10.995 1.404 14.7 4.212 3.705 2.81 5.558 7.5 5.558 14.073 0 3.347-.568 6.096-1.703 8.247-1.136 2.151-2.66 3.854-4.572 5.11-1.912 1.254-4.123 2.15-6.633 2.688-2.51.538-5.139.807-7.888.807H41.146z\"/&gt;&lt;/svg&gt;"},"$:/core/images/cancel-button":{"title":"$:/core/images/cancel-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-cancel-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M64 76.314l-16.97 16.97a7.999 7.999 0 01-11.314 0c-3.118-3.118-3.124-8.19 0-11.313L52.686 65l-16.97-16.97a7.999 7.999 0 010-11.314c3.118-3.118 8.19-3.124 11.313 0L64 53.686l16.97-16.97a7.999 7.999 0 0111.314 0c3.118 3.118 3.124 8.19 0 11.313L75.314 65l16.97 16.97a7.999 7.999 0 010 11.314c-3.118 3.118-8.19 3.124-11.313 0L64 76.314zM64 129c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 1 0 29.654 0 65c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 17 64 17 16 38.49 16 65s21.49 48 48 48z\"/&gt;&lt;/svg&gt;"},"$:/core/images/chevron-down":{"title":"$:/core/images/chevron-down","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-chevron-down tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M64.053 85.456a7.889 7.889 0 01-5.6-2.316L2.473 27.16a7.92 7.92 0 010-11.196c3.086-3.085 8.105-3.092 11.196 0L64.05 66.344l50.382-50.382a7.92 7.92 0 0111.195 0c3.085 3.086 3.092 8.105 0 11.196l-55.98 55.98a7.892 7.892 0 01-5.595 2.317z\"/&gt;&lt;path d=\"M64.053 124.069a7.889 7.889 0 01-5.6-2.316l-55.98-55.98a7.92 7.92 0 010-11.196c3.086-3.085 8.105-3.092 11.196 0l50.382 50.382 50.382-50.382a7.92 7.92 0 0111.195 0c3.085 3.086 3.092 8.104 0 11.196l-55.98 55.98a7.892 7.892 0 01-5.595 2.316z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/chevron-left":{"title":"$:/core/images/chevron-left","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-chevron-left tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M47.544 64.053c0-2.027.77-4.054 2.316-5.6l55.98-55.98a7.92 7.92 0 0111.196 0c3.085 3.086 3.092 8.105 0 11.196L66.656 64.05l50.382 50.382a7.92 7.92 0 010 11.195c-3.086 3.085-8.105 3.092-11.196 0l-55.98-55.98a7.892 7.892 0 01-2.317-5.595z\"/&gt;&lt;path d=\"M8.931 64.053c0-2.027.77-4.054 2.316-5.6l55.98-55.98a7.92 7.92 0 0111.196 0c3.085 3.086 3.092 8.105 0 11.196L28.041 64.05l50.382 50.382a7.92 7.92 0 010 11.195c-3.086 3.085-8.104 3.092-11.196 0l-55.98-55.98a7.892 7.892 0 01-2.316-5.595z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/chevron-right":{"title":"$:/core/images/chevron-right","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-chevron-right tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M83.456 63.947c0 2.027-.77 4.054-2.316 5.6l-55.98 55.98a7.92 7.92 0 01-11.196 0c-3.085-3.086-3.092-8.105 0-11.196L64.344 63.95 13.963 13.567a7.92 7.92 0 010-11.195c3.086-3.085 8.105-3.092 11.196 0l55.98 55.98a7.892 7.892 0 012.317 5.595z\"/&gt;&lt;path d=\"M122.069 63.947c0 2.027-.77 4.054-2.316 5.6l-55.98 55.98a7.92 7.92 0 01-11.196 0c-3.085-3.086-3.092-8.105 0-11.196l50.382-50.382-50.382-50.382a7.92 7.92 0 010-11.195c3.086-3.085 8.104-3.092 11.196 0l55.98 55.98a7.892 7.892 0 012.316 5.595z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/chevron-up":{"title":"$:/core/images/chevron-up","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-chevron-up tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M63.947 44.544c2.027 0 4.054.77 5.6 2.316l55.98 55.98a7.92 7.92 0 010 11.196c-3.086 3.085-8.105 3.092-11.196 0L63.95 63.656l-50.382 50.382a7.92 7.92 0 01-11.195 0c-3.085-3.086-3.092-8.105 0-11.196l55.98-55.98a7.892 7.892 0 015.595-2.317z\"/&gt;&lt;path d=\"M63.947 5.931c2.027 0 4.054.77 5.6 2.316l55.98 55.98a7.92 7.92 0 010 11.196c-3.086 3.085-8.105 3.092-11.196 0L63.95 25.041 13.567 75.423a7.92 7.92 0 01-11.195 0c-3.085-3.086-3.092-8.104 0-11.196l55.98-55.98a7.892 7.892 0 015.595-2.316z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/clone-button":{"title":"$:/core/images/clone-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-clone-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M32.265 96v24.002A7.996 7.996 0 0040.263 128h79.74a7.996 7.996 0 007.997-7.998v-79.74a7.996 7.996 0 00-7.998-7.997H96V48h12.859a2.99 2.99 0 012.994 2.994v57.865a2.99 2.99 0 01-2.994 2.994H50.994A2.99 2.99 0 0148 108.859V96H32.265z\"/&gt;&lt;path d=\"M40 56h-7.993C27.588 56 24 52.418 24 48c0-4.41 3.585-8 8.007-8H40v-7.993C40 27.588 43.582 24 48 24c4.41 0 8 3.585 8 8.007V40h7.993C68.412 40 72 43.582 72 48c0 4.41-3.585 8-8.007 8H56v7.993C56 68.412 52.418 72 48 72c-4.41 0-8-3.585-8-8.007V56zM8 0C3.58 0 0 3.588 0 8v80c0 4.419 3.588 8 8 8h80c4.419 0 8-3.588 8-8V8c0-4.419-3.588-8-8-8H8zM19 16A2.997 2.997 0 0016 19.001v57.998A2.997 2.997 0 0019.001 80h57.998A2.997 2.997 0 0080 76.999V19.001A2.997 2.997 0 0076.999 16H19.001z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/close-all-button":{"title":"$:/core/images/close-all-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-close-all-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M28 111.314l-14.144 14.143a8 8 0 01-11.313-11.313L16.686 100 2.543 85.856a8 8 0 0111.313-11.313L28 88.686l14.144-14.143a8 8 0 0111.313 11.313L39.314 100l14.143 14.144a8 8 0 01-11.313 11.313L28 111.314zM28 39.314L13.856 53.457A8 8 0 012.543 42.144L16.686 28 2.543 13.856A8 8 0 0113.856 2.543L28 16.686 42.144 2.543a8 8 0 0111.313 11.313L39.314 28l14.143 14.144a8 8 0 01-11.313 11.313L28 39.314zM100 39.314L85.856 53.457a8 8 0 01-11.313-11.313L88.686 28 74.543 13.856A8 8 0 0185.856 2.543L100 16.686l14.144-14.143a8 8 0 0111.313 11.313L111.314 28l14.143 14.144a8 8 0 01-11.313 11.313L100 39.314zM100 111.314l-14.144 14.143a8 8 0 01-11.313-11.313L88.686 100 74.543 85.856a8 8 0 0111.313-11.313L100 88.686l14.144-14.143a8 8 0 0111.313 11.313L111.314 100l14.143 14.144a8 8 0 01-11.313 11.313L100 111.314z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/close-button":{"title":"$:/core/images/close-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-close-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M65.086 75.41l-50.113 50.113c-3.121 3.121-8.192 3.126-11.316.002-3.118-3.118-3.123-8.19.002-11.316l50.114-50.114L3.659 13.982C.538 10.86.533 5.79 3.657 2.666c3.118-3.118 8.19-3.123 11.316.002l50.113 50.114L115.2 2.668c3.121-3.121 8.192-3.126 11.316-.002 3.118 3.118 3.123 8.19-.002 11.316L76.4 64.095l50.114 50.114c3.121 3.121 3.126 8.192.002 11.316-3.118 3.118-8.19 3.123-11.316-.002L65.086 75.409z\"/&gt;&lt;/svg&gt;"},"$:/core/images/close-others-button":{"title":"$:/core/images/close-others-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-close-others-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M64 128c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 16 64 16 16 37.49 16 64s21.49 48 48 48zm0-16c17.673 0 32-14.327 32-32 0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32 0 17.673 14.327 32 32 32zm0-16c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16z\"/&gt;&lt;/svg&gt;"},"$:/core/images/copy-clipboard":{"title":"$:/core/images/copy-clipboard","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-copy-clipboard tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"33\" height=\"8\" x=\"40\" y=\"40\" rx=\"4\"/&gt;&lt;rect width=\"17\" height=\"8\" x=\"40\" y=\"82\" rx=\"4\"/&gt;&lt;rect width=\"17\" height=\"8\" x=\"40\" y=\"54\" rx=\"4\"/&gt;&lt;rect width=\"33\" height=\"8\" x=\"40\" y=\"96\" rx=\"4\"/&gt;&lt;rect width=\"12\" height=\"8\" x=\"40\" y=\"68\" rx=\"4\"/&gt;&lt;path d=\"M40 16H24c-4.419 0-8 3.59-8 8a8.031 8.031 0 000 .01v95.98a8.03 8.03 0 000 .01c0 4.41 3.581 8 8 8h80a7.975 7.975 0 005.652-2.34 7.958 7.958 0 002.348-5.652v-16.016c0-4.414-3.582-7.992-8-7.992-4.41 0-8 3.578-8 7.992V112H32V32h64v8.008C96 44.422 99.582 48 104 48c4.41 0 8-3.578 8-7.992V23.992a7.963 7.963 0 00-2.343-5.651A7.995 7.995 0 00104.001 16H88c0-4.41-3.585-8-8.007-8H48.007C43.588 8 40 11.582 40 16zm4-1.004A4.001 4.001 0 0148 11h32c2.21 0 4 1.797 4 3.996v4.008A4.001 4.001 0 0180 23H48c-2.21 0-4-1.797-4-3.996v-4.008z\"/&gt;&lt;rect width=\"66\" height=\"16\" x=\"62\" y=\"64\" rx=\"8\"/&gt;&lt;path d=\"M84.657 82.343l-16-16v11.314l16-16a8 8 0 10-11.314-11.314l-16 16a8 8 0 000 11.314l16 16a8 8 0 1011.314-11.314z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/delete-button":{"title":"$:/core/images/delete-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-delete-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\" transform=\"translate(12)\"&gt;&lt;rect width=\"105\" height=\"16\" y=\"11\" rx=\"8\"/&gt;&lt;rect width=\"48\" height=\"16\" x=\"28\" rx=\"8\"/&gt;&lt;rect width=\"16\" height=\"112\" x=\"8\" y=\"16\" rx=\"8\"/&gt;&lt;rect width=\"88\" height=\"16\" x=\"8\" y=\"112\" rx=\"8\"/&gt;&lt;rect width=\"16\" height=\"112\" x=\"80\" y=\"16\" rx=\"8\"/&gt;&lt;rect width=\"16\" height=\"112\" x=\"56\" y=\"16\" rx=\"8\"/&gt;&lt;rect width=\"16\" height=\"112\" x=\"32\" y=\"16\" rx=\"8\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/done-button":{"title":"$:/core/images/done-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-done-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M42.26 111.032c-2.051.001-4.103-.78-5.668-2.345L2.662 74.758a8 8 0 01-.005-11.32c3.118-3.117 8.192-3.12 11.32.007l28.278 28.278 72.124-72.124a8.002 8.002 0 0111.314-.001c3.118 3.118 3.124 8.19 0 11.315l-77.78 77.78a7.978 7.978 0 01-5.658 2.343z\"/&gt;&lt;/svg&gt;"},"$:/core/images/down-arrow":{"title":"$:/core/images/down-arrow","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-down-arrow tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M64.177 100.069a7.889 7.889 0 01-5.6-2.316l-55.98-55.98a7.92 7.92 0 010-11.196c3.086-3.085 8.105-3.092 11.196 0l50.382 50.382 50.382-50.382a7.92 7.92 0 0111.195 0c3.086 3.086 3.092 8.104 0 11.196l-55.98 55.98a7.892 7.892 0 01-5.595 2.316z\"/&gt;&lt;/svg&gt;"},"$:/core/images/download-button":{"title":"$:/core/images/download-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-download-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M64 128c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 16 64 16 16 37.49 16 64s21.49 48 48 48z\" class=\"tc-image-download-button-ring\"/&gt;&lt;path d=\"M34.35 66.43l26.892 27.205a4.57 4.57 0 006.516 0L94.65 66.43a4.7 4.7 0 000-6.593 4.581 4.581 0 00-3.258-1.365h-8.46c-2.545 0-4.608-2.087-4.608-4.661v-15.15c0-2.575-2.063-4.662-4.608-4.662H55.284c-2.545 0-4.608 2.087-4.608 4.662v15.15c0 2.574-2.063 4.661-4.608 4.661h-8.46c-2.545 0-4.608 2.087-4.608 4.662a4.69 4.69 0 001.35 3.296z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/edit-button":{"title":"$:/core/images/edit-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-edit-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M95.627 10.059l-5.656 5.657 11.313 11.313 5.657-5.656-11.314-11.314zm5.657-5.657l1.966-1.966c3.123-3.122 8.194-3.129 11.319-.005 3.117 3.118 3.122 8.192-.005 11.32l-1.966 1.965-11.314-11.314zm-16.97 16.97l-60.25 60.25a8.12 8.12 0 00-.322.342c-.1.087-.198.179-.295.275-5.735 5.735-10.702 22.016-10.702 22.016s16.405-5.09 22.016-10.702c.095-.096.186-.193.272-.292a8.12 8.12 0 00.345-.325l60.25-60.25-11.314-11.313zM35.171 124.19c6.788-.577 13.898-2.272 23.689-5.348 1.825-.573 3.57-1.136 6.336-2.04 16-5.226 21.877-6.807 28.745-7.146 8.358-.413 13.854 2.13 17.58 8.699a4 4 0 006.959-3.946c-5.334-9.406-13.745-13.296-24.933-12.744-7.875.39-14.057 2.052-30.835 7.533-2.739.894-4.46 1.45-6.25 2.012-19.46 6.112-30.77 7.072-39.597 1.747a4 4 0 10-4.132 6.85c6.333 3.82 13.754 5.12 22.438 4.383z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/erase":{"title":"$:/core/images/erase","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-erase tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M60.087 127.996l63.015-63.015c6.535-6.535 6.528-17.115-.003-23.646L99.466 17.702c-6.539-6.538-17.117-6.532-23.646-.003L4.898 88.62c-6.535 6.534-6.528 17.115.003 23.646l15.73 15.73h39.456zm-34.95-7.313l-14.324-14.325c-3.267-3.268-3.268-8.564-.008-11.824L46.269 59.07l35.462 35.462-26.15 26.15H25.137z\"/&gt;&lt;/svg&gt;"},"$:/core/images/excise":{"title":"$:/core/images/excise","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-excise tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M56 107.314l-2.343 2.343a8 8 0 11-11.314-11.314l16-16a8 8 0 0111.314 0l16 16a8 8 0 11-11.314 11.314L72 107.314v14.284c0 3.536-3.582 6.402-8 6.402s-8-2.866-8-6.402v-14.284zM0 40.007C0 35.585 3.59 32 8 32c4.418 0 8 3.588 8 8.007v31.986C16 76.415 12.41 80 8 80c-4.418 0-8-3.588-8-8.007V40.007zm32 0C32 35.585 35.59 32 40 32c4.418 0 8 3.588 8 8.007v31.986C48 76.415 44.41 80 40 80c-4.418 0-8-3.588-8-8.007V40.007zm48 0C80 35.585 83.59 32 88 32c4.418 0 8 3.588 8 8.007v31.986C96 76.415 92.41 80 88 80c-4.418 0-8-3.588-8-8.007V40.007zm-24-32C56 3.585 59.59 0 64 0c4.418 0 8 3.588 8 8.007v31.986C72 44.415 68.41 48 64 48c-4.418 0-8-3.588-8-8.007V8.007zm56 32c0-4.422 3.59-8.007 8-8.007 4.418 0 8 3.588 8 8.007v31.986c0 4.422-3.59 8.007-8 8.007-4.418 0-8-3.588-8-8.007V40.007z\"/&gt;&lt;/svg&gt;"},"$:/core/images/export-button":{"title":"$:/core/images/export-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-export-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M8.003 128H119.993a7.984 7.984 0 005.664-2.349v.007A7.975 7.975 0 00128 120V56c0-4.418-3.59-8-8-8-4.418 0-8 3.58-8 8v56H16V56c0-4.418-3.59-8-8-8-4.418 0-8 3.58-8 8v64c0 4.418 3.59 8 8 8h.003zm48.62-100.689l-8.965 8.966c-3.125 3.125-8.195 3.13-11.319.005-3.118-3.118-3.122-8.192.005-11.319L58.962 2.346A7.986 7.986 0 0164.625 0l-.006.002c2.05-.001 4.102.78 5.666 2.344l22.618 22.617c3.124 3.125 3.129 8.195.005 11.319-3.118 3.118-8.192 3.122-11.319-.005l-8.965-8.966v61.256c0 4.411-3.582 8-8 8-4.41 0-8-3.582-8-8V27.311z\"/&gt;&lt;/svg&gt;"},"$:/core/images/file":{"title":"$:/core/images/file","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-file tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M111.968 30.5H112V120a8 8 0 01-8 8H24a8 8 0 01-8-8V8a8 8 0 018-8h57v.02a7.978 7.978 0 015.998 2.337l22.627 22.627a7.975 7.975 0 012.343 5.516zM81 8H24v112h80V30.5H89c-4.418 0-8-3.578-8-8V8z\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"36\" rx=\"4\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"52\" rx=\"4\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"68\" rx=\"4\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"84\" rx=\"4\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"100\" rx=\"4\"/&gt;&lt;rect width=\"40\" height=\"8\" x=\"32\" y=\"20\" rx=\"4\"/&gt;&lt;/svg&gt;"},"$:/core/images/fixed-height":{"title":"$:/core/images/fixed-height","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-fixed-height tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M60 35.657l-9.172 9.171a4 4 0 11-5.656-5.656l16-16a4 4 0 015.656 0l16 16a4 4 0 01-5.656 5.656L68 35.657v57.686l9.172-9.171a4 4 0 115.656 5.656l-16 16a4 4 0 01-5.656 0l-16-16a4 4 0 115.656-5.656L60 93.343V35.657zM16 116h96a4 4 0 100-8H16a4 4 0 100 8zm0-96h96a4 4 0 100-8H16a4 4 0 100 8z\"/&gt;&lt;/svg&gt;"},"$:/core/images/fold-all-button":{"title":"$:/core/images/fold-all-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-fold-all tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"128\" height=\"16\" rx=\"8\"/&gt;&lt;rect width=\"128\" height=\"16\" y=\"64\" rx=\"8\"/&gt;&lt;path d=\"M64.03 20.004c-2.05 0-4.102.78-5.667 2.344L35.746 44.966c-3.125 3.124-3.13 8.194-.005 11.318 3.118 3.118 8.192 3.122 11.319-.005l16.965-16.965 16.966 16.965c3.124 3.125 8.194 3.13 11.318.005 3.118-3.118 3.122-8.191-.005-11.318L69.687 22.348a7.986 7.986 0 00-5.663-2.346zM64.03 85.002c-2.05-.001-4.102.78-5.667 2.344l-22.617 22.617c-3.125 3.125-3.13 8.195-.005 11.319 3.118 3.118 8.192 3.122 11.319-.005l16.965-16.966 16.966 16.966c3.124 3.125 8.194 3.13 11.318.005 3.118-3.118 3.122-8.192-.005-11.319L69.687 87.346A7.986 7.986 0 0064.024 85z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/fold-button":{"title":"$:/core/images/fold-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-fold tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"128\" height=\"16\" rx=\"8\"/&gt;&lt;path d=\"M64.03 25.004c-2.05 0-4.102.78-5.667 2.344L35.746 49.966c-3.125 3.124-3.13 8.194-.005 11.318 3.118 3.118 8.192 3.122 11.319-.005l16.965-16.965 16.966 16.965c3.124 3.125 8.194 3.13 11.318.005 3.118-3.118 3.122-8.191-.005-11.318L69.687 27.348a7.986 7.986 0 00-5.663-2.346zM64.005 67.379c-2.05 0-4.102.78-5.666 2.344L35.722 92.34c-3.125 3.125-3.13 8.195-.006 11.32 3.118 3.117 8.192 3.121 11.32-.006L64 86.69l16.965 16.965c3.125 3.125 8.195 3.13 11.319.005 3.118-3.118 3.122-8.192-.005-11.319L69.663 69.723A7.986 7.986 0 0064 67.377z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/fold-others-button":{"title":"$:/core/images/fold-others-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-fold-others tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"128\" height=\"16\" y=\"56.031\" rx=\"8\"/&gt;&lt;path d=\"M86.632 79.976c-2.05 0-4.102.78-5.666 2.345L64 99.286 47.034 82.321a7.986 7.986 0 00-5.662-2.346l.005.001c-2.05 0-4.102.78-5.666 2.345l-22.618 22.617c-3.124 3.125-3.129 8.195-.005 11.319 3.118 3.118 8.192 3.122 11.319-.005l16.966-16.966 16.965 16.966a7.986 7.986 0 005.663 2.346l-.005-.002c2.05 0 4.102-.78 5.666-2.344l16.965-16.966 16.966 16.966c3.125 3.124 8.194 3.129 11.319.005 3.118-3.118 3.122-8.192-.005-11.319L92.289 82.321a7.986 7.986 0 00-5.663-2.346zM86.7 48.024c-2.05 0-4.102-.78-5.666-2.345L64.07 28.714 47.103 45.679a7.986 7.986 0 01-5.663 2.346l.005-.001c-2.05 0-4.101-.78-5.666-2.345L13.162 23.062c-3.125-3.125-3.13-8.195-.005-11.319 3.118-3.118 8.192-3.122 11.319.005L41.44 28.714l16.966-16.966a7.986 7.986 0 015.662-2.346l-.005.002c2.05 0 4.102.78 5.666 2.344l16.966 16.966 16.966-16.966c3.124-3.124 8.194-3.129 11.318-.005 3.118 3.118 3.122 8.192-.005 11.319L92.358 45.679a7.986 7.986 0 01-5.663 2.346z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/folder":{"title":"$:/core/images/folder","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-folder tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M55.694 128H8C3.58 128 0 124.414 0 119.996V48.004C0 43.584 3.584 40 7.999 40H16v-8c0-4.418 3.578-8 8-8h32a8 8 0 018 8v8h40.001c4.418 0 7.999 3.586 7.999 8.004V59.83l-8-.082v-7.749A4 4 0 0099.997 48H56V36c0-2.21-1.793-4-4.004-4H28.004A4 4 0 0024 36v12H12.003A4 4 0 008 52v64a4 4 0 004.003 4h46.76l-3.069 8z\"/&gt;&lt;path d=\"M23.873 55.5h96.003c4.417 0 7.004 4.053 5.774 9.063l-13.344 54.374c-1.228 5.005-5.808 9.063-10.223 9.063H6.08c-4.417 0-7.003-4.053-5.774-9.063L13.65 64.563c1.228-5.005 5.808-9.063 10.223-9.063zm1.78 8.5h87.994c2.211 0 3.504 2.093 2.891 4.666l-11.12 46.668c-.614 2.577-2.902 4.666-5.115 4.666H12.31c-2.211 0-3.504-2.093-2.891-4.666l11.12-46.668C21.152 66.09 23.44 64 25.653 64z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/full-screen-button":{"title":"$:/core/images/full-screen-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-full-screen-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M0 8a8 8 0 018-8h32a8 8 0 110 16H16v24a8 8 0 11-16 0V8zM128 120a8 8 0 01-8 8H88a8 8 0 110-16h24V88a8 8 0 1116 0v32zM8 128a8 8 0 01-8-8V88a8 8 0 1116 0v24h24a8 8 0 110 16H8zM120 0a8 8 0 018 8v32a8 8 0 11-16 0V16H88a8 8 0 110-16h32z\"/&gt;&lt;/svg&gt;"},"$:/core/images/github":{"title":"$:/core/images/github","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-github tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M63.938 1.607c-35.336 0-63.994 28.69-63.994 64.084 0 28.312 18.336 52.329 43.768 60.802 3.202.59 4.37-1.388 4.37-3.088 0-1.518-.056-5.55-.087-10.897-17.802 3.871-21.558-8.591-21.558-8.591-2.911-7.404-7.108-9.375-7.108-9.375-5.81-3.973.44-3.895.44-3.895 6.424.453 9.803 6.606 9.803 6.606 5.709 9.791 14.981 6.963 18.627 5.322.582-4.138 2.236-6.963 4.063-8.564-14.211-1.617-29.153-7.117-29.153-31.672 0-6.995 2.495-12.718 6.589-17.195-.66-1.621-2.856-8.14.629-16.96 0 0 5.37-1.722 17.597 6.57 5.104-1.424 10.58-2.132 16.022-2.16 5.438.028 10.91.736 16.022 2.16 12.22-8.292 17.582-6.57 17.582-6.57 3.493 8.82 1.297 15.339.64 16.96 4.102 4.477 6.578 10.2 6.578 17.195 0 24.618-14.966 30.035-29.22 31.62 2.295 1.98 4.342 5.89 4.342 11.87 0 8.564-.079 15.476-.079 17.576 0 1.715 1.155 3.71 4.4 3.084 25.413-8.493 43.733-32.494 43.733-60.798 0-35.394-28.657-64.084-64.006-64.084\"/&gt;&lt;/svg&gt;"},"$:/core/images/gitter":{"title":"$:/core/images/gitter","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-gitter tc-image-button\" viewBox=\"0 0 18 25\"&gt;&lt;path d=\"M15 5h2v10h-2zM10 5h2v20h-2zM5 5h2v20H5zM0 0h2v15H0z\"/&gt;&lt;/svg&gt;"},"$:/core/images/globe":{"title":"$:/core/images/globe","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-globe tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M72.811 37.128v2.554c0 2.196.978 6.881 0 8.832-1.466 2.928-4.65 3.54-6.394 5.867-1.182 1.577-4.618 10.601-3.69 12.92 3.969 9.922 11.534 3.187 17.962 9.293.864.821 2.887 2.273 3.296 3.296 3.29 8.223-7.576 15.009 3.757 26.3 1.245 1.24 3.813-3.817 4.079-4.614.852-2.563 6.725-5.45 9.088-7.053 2.02-1.37 4.873-2.667 6.328-4.745 2.27-3.244 1.48-7.514 3.098-10.745 2.139-4.274 3.828-9.635 5.998-13.966 3.898-7.781 4.721 2.093 5.067 2.439.358.357 1.011 0 1.517 0 .094 0 1.447.099 1.516 0 .65-.935-1.043-17.92-1.318-19.297-1.404-7.01-6.944-15.781-11.865-20.5-6.274-6.015-7.09-16.197-18.259-14.954-.204.022-5.084 10.148-7.777 13.512-3.728 4.657-2.47-4.153-6.526-4.153-.081 0-1.183-.103-1.253 0-.586.88-1.44 3.896-2.306 4.417-.265.16-1.722-.239-1.846 0-2.243 4.3 8.256 2.212 5.792 7.952-2.352 5.481-6.328-1.997-6.328 8.56M44.467 7.01c9.685 6.13.682 12.198 2.694 16.215 1.655 3.303 4.241 5.395 1.714 9.814-2.063 3.608-6.87 3.966-9.623 6.723-3.04 3.044-5.464 8.94-6.79 12.911-1.617 4.843 14.547 6.866 12.063 11.008-1.386 2.311-6.746 1.466-8.437.198-1.165-.873-3.593-.546-4.417-1.78-2.613-3.915-2.26-8.023-3.625-12.128-.938-2.822-6.313-2.12-7.844-.593-.523.522-.33 1.792-.33 2.505 0 5.285 7.12 3.316 7.12 6.46 0 14.636 3.927 6.534 11.14 11.336 10.036 6.683 7.844 7.303 14.946 14.404 3.673 3.673 7.741 3.686 9.425 9.294 1.602 5.331-9.327 5.339-11.716 7.448-1.123.991-2.813 4.146-4.219 4.615-1.792.598-3.234.496-4.944 1.78-2.427 1.82-3.9 4.932-4.02 4.81-2.148-2.147-3.52-15.479-3.89-18.257-.588-4.42-5.59-5.54-6.986-9.03-1.57-3.927 1.524-9.52-1.129-13.761-6.52-10.424-11.821-14.5-15.35-26.292-.942-3.148 3.342-6.529 4.877-8.833 1.877-2.816 2.662-5.854 4.746-8.635C22.147 24.19 40.855 9.461 43.857 8.635l.61-1.625z\"/&gt;&lt;path d=\"M64 126c34.242 0 62-27.758 62-62 0-34.242-27.758-62-62-62C29.758 2 2 29.758 2 64c0 34.242 27.758 62 62 62zm0-6c30.928 0 56-25.072 56-56S94.928 8 64 8 8 33.072 8 64s25.072 56 56 56z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/heading-1":{"title":"$:/core/images/heading-1","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-1 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M14 30h13.25v30.104H61.7V30h13.25v75.684H61.7V71.552H27.25v34.132H14V30zm70.335 13.78c2.544 0 5.017-.212 7.42-.636 2.403-.424 4.576-1.13 6.52-2.12 1.942-.99 3.603-2.261 4.981-3.816 1.378-1.555 2.28-3.463 2.703-5.724h9.858v74.2h-13.25V53.32H84.335v-9.54z\"/&gt;&lt;/svg&gt;"},"$:/core/images/heading-2":{"title":"$:/core/images/heading-2","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-2 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M6 30h13.25v30.104H53.7V30h13.25v75.684H53.7V71.552H19.25v34.132H6V30zm119.52 75.684H74.85c.07-6.148 1.555-11.519 4.452-16.112 2.897-4.593 6.855-8.586 11.872-11.978a133.725 133.725 0 017.526-5.141 59.6 59.6 0 007.208-5.353c2.19-1.908 3.993-3.975 5.406-6.201 1.413-2.226 2.155-4.788 2.226-7.685 0-1.343-.159-2.774-.477-4.293a11.357 11.357 0 00-1.855-4.24c-.919-1.307-2.19-2.403-3.816-3.286-1.625-.883-3.745-1.325-6.36-1.325-2.403 0-4.399.477-5.989 1.431-1.59.954-2.862 2.261-3.816 3.922-.954 1.66-1.66 3.622-2.12 5.883-.46 2.261-.724 4.7-.795 7.314H76.23c0-4.099.548-7.897 1.643-11.395 1.095-3.498 2.738-6.519 4.93-9.063 2.19-2.544 4.857-4.54 8.002-5.989C93.95 30.724 97.606 30 101.775 30c4.523 0 8.303.742 11.342 2.226 3.039 1.484 5.494 3.357 7.367 5.618 1.873 2.261 3.198 4.717 3.975 7.367.777 2.65 1.166 5.176 1.166 7.579 0 2.968-.46 5.653-1.378 8.056a25.942 25.942 0 01-3.71 6.625 37.5 37.5 0 01-5.3 5.565 79.468 79.468 0 01-6.148 4.77 165.627 165.627 0 01-6.36 4.24 94.28 94.28 0 00-5.883 4.028c-1.802 1.343-3.374 2.738-4.717 4.187-1.343 1.449-2.261 2.986-2.756 4.611h36.146v10.812z\"/&gt;&lt;/svg&gt;"},"$:/core/images/heading-3":{"title":"$:/core/images/heading-3","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-3 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M6 30h13.25v30.104H53.7V30h13.25v75.684H53.7V71.552H19.25v34.132H6V30zm88.885 32.224c1.979.07 3.957-.07 5.936-.424 1.979-.353 3.745-.972 5.3-1.855a10.365 10.365 0 003.763-3.657c.954-1.555 1.431-3.463 1.431-5.724 0-3.18-1.078-5.724-3.233-7.632-2.155-1.908-4.929-2.862-8.32-2.862-2.12 0-3.958.424-5.513 1.272a11.318 11.318 0 00-3.869 3.445c-1.025 1.449-1.784 3.074-2.279 4.876a18.335 18.335 0 00-.636 5.565H75.381c.141-3.604.813-6.943 2.014-10.017 1.201-3.074 2.844-5.742 4.93-8.003 2.084-2.261 4.61-4.028 7.578-5.3C92.871 30.636 96.228 30 99.973 30a29.2 29.2 0 018.533 1.272c2.791.848 5.3 2.085 7.526 3.71s4.01 3.692 5.353 6.201c1.343 2.509 2.014 5.388 2.014 8.639 0 3.745-.848 7.014-2.544 9.805-1.696 2.791-4.346 4.823-7.95 6.095v.212c4.24.848 7.544 2.95 9.911 6.307s3.551 7.438 3.551 12.243c0 3.533-.707 6.696-2.12 9.487a21.538 21.538 0 01-5.724 7.102c-2.403 1.943-5.194 3.445-8.374 4.505-3.18 1.06-6.537 1.59-10.07 1.59-4.31 0-8.074-.618-11.289-1.855s-5.9-2.986-8.056-5.247c-2.155-2.261-3.798-4.982-4.929-8.162-1.13-3.18-1.731-6.713-1.802-10.6h12.084c-.141 4.523.972 8.286 3.34 11.289 2.366 3.003 5.917 4.505 10.652 4.505 4.028 0 7.402-1.148 10.123-3.445 2.72-2.297 4.081-5.565 4.081-9.805 0-2.897-.565-5.194-1.696-6.89a10.97 10.97 0 00-4.452-3.869c-1.837-.883-3.904-1.431-6.2-1.643a58.067 58.067 0 00-7.05-.212v-9.01z\"/&gt;&lt;/svg&gt;"},"$:/core/images/heading-4":{"title":"$:/core/images/heading-4","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-4 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M8 30h13.25v30.104H55.7V30h13.25v75.684H55.7V71.552H21.25v34.132H8V30zm76.59 48.548h22.471V45.9h-.212L84.59 78.548zm43.46 9.54h-9.54v17.596H107.06V88.088h-31.8V76.11l31.8-44.626h11.448v47.064h9.54v9.54z\"/&gt;&lt;/svg&gt;"},"$:/core/images/heading-5":{"title":"$:/core/images/heading-5","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-5 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M6 30h13.25v30.104H53.7V30h13.25v75.684H53.7V71.552H19.25v34.132H6V30zm77.755 1.484h38.372v10.812H92.765L88.95 61.164l.212.212c1.625-1.837 3.692-3.233 6.201-4.187 2.509-.954 5-1.431 7.473-1.431 3.675 0 6.96.618 9.858 1.855 2.897 1.237 5.335 2.968 7.314 5.194s3.48 4.858 4.505 7.897c1.025 3.039 1.537 6.325 1.537 9.858 0 2.968-.477 6.024-1.43 9.169a25.161 25.161 0 01-4.559 8.586c-2.085 2.58-4.752 4.7-8.003 6.36-3.25 1.66-7.137 2.491-11.66 2.491-3.604 0-6.943-.477-10.017-1.431-3.074-.954-5.777-2.385-8.109-4.293-2.332-1.908-4.187-4.258-5.565-7.049-1.378-2.791-2.138-6.06-2.279-9.805h12.084c.353 4.028 1.731 7.12 4.134 9.275 2.403 2.155 5.583 3.233 9.54 3.233 2.544 0 4.7-.424 6.466-1.272 1.767-.848 3.198-2.014 4.293-3.498 1.095-1.484 1.873-3.215 2.332-5.194.46-1.979.69-4.099.69-6.36 0-2.05-.284-4.01-.849-5.883-.565-1.873-1.413-3.516-2.544-4.929-1.13-1.413-2.597-2.544-4.399-3.392-1.802-.848-3.904-1.272-6.307-1.272-2.544 0-4.929.477-7.155 1.431-2.226.954-3.834 2.738-4.823 5.353H75.805l7.95-40.598z\"/&gt;&lt;/svg&gt;"},"$:/core/images/heading-6":{"title":"$:/core/images/heading-6","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-heading-6 tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M6 30h13.25v30.104H53.7V30h13.25v75.684H53.7V71.552H19.25v34.132H6V30zm106.587 20.246c-.283-3.039-1.36-5.494-3.233-7.367-1.873-1.873-4.399-2.809-7.579-2.809-2.19 0-4.08.406-5.67 1.219a12.435 12.435 0 00-4.029 3.233c-1.095 1.343-1.979 2.88-2.65 4.611a37.696 37.696 0 00-1.643 5.459 46.08 46.08 0 00-.9 5.671 722.213 722.213 0 00-.478 5.247l.212.212c1.625-2.968 3.87-5.176 6.731-6.625 2.862-1.449 5.954-2.173 9.275-2.173 3.675 0 6.96.636 9.858 1.908 2.897 1.272 5.353 3.021 7.367 5.247 2.014 2.226 3.551 4.858 4.611 7.897 1.06 3.039 1.59 6.325 1.59 9.858 0 3.604-.583 6.943-1.749 10.017-1.166 3.074-2.844 5.76-5.035 8.056-2.19 2.297-4.805 4.081-7.844 5.353-3.039 1.272-6.395 1.908-10.07 1.908-5.441 0-9.91-1.007-13.409-3.021-3.498-2.014-6.254-4.77-8.268-8.268-2.014-3.498-3.41-7.597-4.187-12.296-.777-4.7-1.166-9.77-1.166-15.211 0-4.452.477-8.94 1.431-13.462.954-4.523 2.526-8.639 4.717-12.349 2.19-3.71 5.07-6.731 8.64-9.063C92.676 31.166 97.075 30 102.304 30c2.968 0 5.76.495 8.374 1.484 2.615.99 4.93 2.367 6.943 4.134 2.014 1.767 3.657 3.887 4.93 6.36 1.271 2.473 1.978 5.23 2.12 8.268h-12.085zm-11.66 46.852c2.19 0 4.099-.442 5.724-1.325a12.869 12.869 0 004.081-3.445c1.095-1.413 1.908-3.056 2.438-4.929.53-1.873.795-3.798.795-5.777s-.265-3.887-.795-5.724c-.53-1.837-1.343-3.445-2.438-4.823-1.095-1.378-2.456-2.491-4.08-3.339-1.626-.848-3.534-1.272-5.725-1.272-2.19 0-4.116.406-5.777 1.219-1.66.813-3.056 1.908-4.187 3.286-1.13 1.378-1.979 2.986-2.544 4.823-.565 1.837-.848 3.78-.848 5.83 0 2.05.283 3.993.848 5.83.565 1.837 1.413 3.48 2.544 4.929a12.39 12.39 0 004.187 3.445c1.66.848 3.586 1.272 5.777 1.272z\"/&gt;&lt;/svg&gt;"},"$:/core/images/help":{"title":"$:/core/images/help","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-help tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M36.055 111.441c-5.24 4.396-15.168 7.362-26.555 7.362-1.635 0-3.24-.06-4.806-.179 7.919-2.64 14.062-8.6 16.367-16.014C8.747 92.845 1.05 78.936 1.05 63.5c0-29.547 28.206-53.5 63-53.5s63 23.953 63 53.5-28.206 53.5-63 53.5c-10.055 0-19.56-2-27.994-5.559zm35.35-33.843a536.471 536.471 0 00.018-4.682 199.02 199.02 0 00-.023-3.042c.008-1.357.595-2.087 3.727-4.235.112-.077 1.085-.74 1.386-.948 3.093-2.133 5.022-3.786 6.762-6.187 2.34-3.228 3.558-7.077 3.558-11.649 0-13.292-9.86-21.952-21.455-21.952-11.103 0-22.499 9.609-24.066 22.295a6.023 6.023 0 1011.956 1.477c.806-6.527 6.972-11.726 12.11-11.726 5.265 0 9.408 3.64 9.408 9.906 0 3.634-1.1 5.153-5.111 7.919l-1.362.93c-2.682 1.84-4.227 3.1-5.7 4.931-2.109 2.62-3.242 5.717-3.258 9.314.013.892.02 1.86.022 2.981a470.766 470.766 0 01-.022 4.943 6.023 6.023 0 1012.046.12l.003-.395zm-6.027 24.499a7.529 7.529 0 100-15.058 7.529 7.529 0 000 15.058z\"/&gt;&lt;/svg&gt;"},"$:/core/images/home-button":{"title":"$:/core/images/home-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-home-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M112.985 119.502c.01-.165.015-.331.015-.499V67.568c3.137 2.948 8.076 2.884 11.134-.174a7.999 7.999 0 00-.002-11.316L70.396 2.343A7.978 7.978 0 0064.734 0a7.957 7.957 0 00-5.656 2.343L33 28.42V8.007C33 3.585 29.41 0 25 0c-4.418 0-8 3.59-8 8.007V44.42L5.342 56.078c-3.125 3.125-3.12 8.198-.002 11.316a7.999 7.999 0 0011.316-.003l.344-.343v52.945a8.11 8.11 0 000 .007c0 4.418 3.588 8 8 8h80c4.419 0 8-3.59 8-8a8.11 8.11 0 00-.015-.498zM97 112V51.574L64.737 19.31 33 51.048V112h64z\"/&gt;&lt;/svg&gt;"},"$:/core/images/import-button":{"title":"$:/core/images/import-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-import-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M114.832 60.436s3.235-3.27 6.921.417c3.686 3.686.231 7.14.231 7.14l-42.153 42.92s-30.765 32.367-58.798 4.333C-7 87.213 24.59 55.623 24.59 55.623L67.363 12.85s22.725-24.6 43.587-3.738c20.862 20.862-3.96 43.09-3.96 43.09l-35.04 35.04S49.903 112.546 36.426 99.07c-13.476-13.477 11.83-35.523 11.83-35.523l35.04-35.04s3.902-3.902 7.78-.023c3.879 3.878.118 7.921.118 7.921l-35.04 35.04s-13.212 13.212-8.872 17.551c4.34 4.34 16.77-9.653 16.77-9.653l35.04-35.04s16.668-14.598 3.966-27.3c-13.893-13.892-27.565 3.702-27.565 3.702l-42.91 42.91s-23.698 23.698-3.658 43.738 43.012-4.385 43.012-4.385l42.895-42.533z\"/&gt;&lt;/svg&gt;"},"$:/core/images/info-button":{"title":"$:/core/images/info-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-info-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\" transform=\"translate(.05)\"&gt;&lt;path d=\"M64 128c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 16 64 16 16 37.49 16 64s21.49 48 48 48z\"/&gt;&lt;circle cx=\"64\" cy=\"32\" r=\"8\"/&gt;&lt;rect width=\"16\" height=\"56\" x=\"56\" y=\"48\" rx=\"8\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/italic":{"title":"$:/core/images/italic","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-italic tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M66.711 0h22.41L62.408 128H40z\"/&gt;&lt;/svg&gt;"},"$:/core/images/left-arrow":{"title":"$:/core/images/left-arrow","created":"20150315234410875","modified":"20150315235324760","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-left-arrow tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M0 64.177c0-2.026.771-4.054 2.317-5.6l55.98-55.98a7.92 7.92 0 0111.195.001c3.086 3.085 3.092 8.104.001 11.195L19.111 64.175l50.382 50.382a7.92 7.92 0 010 11.195c-3.086 3.086-8.105 3.092-11.196.001l-55.98-55.98A7.892 7.892 0 010 64.177z\"/&gt;&lt;/svg&gt;"},"$:/core/images/line-width":{"title":"$:/core/images/line-width","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-line-width tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M16 18h96a2 2 0 000-4H16a2 2 0 100 4zm0 17h96a4 4 0 100-8H16a4 4 0 100 8zm0 21h96a6 6 0 000-12H16a6 6 0 100 12zm0 29h96c5.523 0 10-4.477 10-10s-4.477-10-10-10H16c-5.523 0-10 4.477-10 10s4.477 10 10 10zm0 43h96c8.837 0 16-7.163 16-16s-7.163-16-16-16H16c-8.837 0-16 7.163-16 16s7.163 16 16 16z\"/&gt;&lt;/svg&gt;"},"$:/core/images/link":{"title":"$:/core/images/link","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-link tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M42.263 69.38a31.919 31.919 0 006.841 10.13c12.5 12.5 32.758 12.496 45.255 0l22.627-22.628c12.502-12.501 12.497-32.758 0-45.255-12.5-12.5-32.758-12.496-45.254 0L49.104 34.255a32.333 32.333 0 00-2.666 3.019 36.156 36.156 0 0121.94.334l14.663-14.663c6.25-6.25 16.382-6.254 22.632-.004 6.248 6.249 6.254 16.373-.004 22.631l-22.62 22.62c-6.25 6.25-16.381 6.254-22.631.004a15.93 15.93 0 01-4.428-8.433 11.948 11.948 0 00-7.59 3.48l-6.137 6.137z\"/&gt;&lt;path d=\"M86.35 59.234a31.919 31.919 0 00-6.84-10.13c-12.5-12.5-32.758-12.497-45.255 0L11.627 71.732c-12.501 12.5-12.496 32.758 0 45.254 12.5 12.5 32.758 12.497 45.255 0L79.51 94.36a32.333 32.333 0 002.665-3.02 36.156 36.156 0 01-21.94-.333l-14.663 14.663c-6.25 6.25-16.381 6.253-22.63.004-6.25-6.249-6.255-16.374.003-22.632l22.62-22.62c6.25-6.25 16.381-6.253 22.631-.003a15.93 15.93 0 014.428 8.432 11.948 11.948 0 007.59-3.48l6.137-6.136z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/linkify":{"title":"$:/core/images/linkify","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-linkify-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M17.031 31.919H9.048V96.85h7.983v6.92H0V25h17.031v6.919zm24.66 0h-7.983V96.85h7.983v6.92H24.66V25h17.03v6.919zM67.77 56.422l11.975-3.903 2.306 7.096-12.063 3.903 7.628 10.379-6.12 4.435-7.63-10.467-7.45 10.2-5.943-4.523L58.1 63.518 45.95 59.35l2.306-7.096 12.064 4.17V43.825h7.45v12.596zM86.31 96.85h7.982V31.92H86.31V25h17.031v78.77H86.31v-6.92zm24.659 0h7.983V31.92h-7.983V25H128v78.77h-17.031v-6.92z\"/&gt;&lt;/svg&gt;"},"$:/core/images/list-bullet":{"title":"$:/core/images/list-bullet","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-list-bullet tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M11.636 40.273c6.427 0 11.637-5.21 11.637-11.637C23.273 22.21 18.063 17 11.636 17 5.21 17 0 22.21 0 28.636c0 6.427 5.21 11.637 11.636 11.637zm0 34.909c6.427 0 11.637-5.21 11.637-11.637 0-6.426-5.21-11.636-11.637-11.636C5.21 51.91 0 57.12 0 63.545c0 6.427 5.21 11.637 11.636 11.637zm0 34.909c6.427 0 11.637-5.21 11.637-11.636 0-6.427-5.21-11.637-11.637-11.637C5.21 86.818 0 92.028 0 98.455c0 6.426 5.21 11.636 11.636 11.636zM34.91 22.818H128v11.637H34.91V22.818zm0 34.91H128v11.636H34.91V57.727zm0 34.908H128v11.637H34.91V92.636z\"/&gt;&lt;/svg&gt;"},"$:/core/images/list-number":{"title":"$:/core/images/list-number","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-list-number tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M33.84 22.356H128v11.77H33.84v-11.77zm0 35.31H128v11.77H33.84v-11.77zm0 35.311H128v11.77H33.84v-11.77zM.38 42.631v-2.223h.998c.826 0 1.445-.14 1.858-.42.413-.28.619-.948.619-2.002V22.769c0-1.442-.193-2.336-.58-2.683-.385-.347-1.477-.52-3.275-.52v-2.143c3.502-.147 6.252-.955 8.25-2.423h2.117v22.865c0 .921.15 1.575.449 1.963.3.387.949.58 1.948.58h.998v2.223H.38zm-.3 35.356v-1.902c7.19-6.554 10.786-12.58 10.786-18.08 0-1.562-.326-2.81-.979-3.744-.652-.934-1.524-1.402-2.616-1.402-.893 0-1.655.317-2.287.952-.633.634-.95 1.364-.95 2.192 0 .974.247 1.829.74 2.563.106.16.16.28.16.36 0 .147-.16.28-.48.4-.213.08-.752.308-1.618.681-.839.374-1.358.561-1.558.561-.24 0-.512-.37-.819-1.111A6.2 6.2 0 010 57.064c0-1.949.849-3.544 2.547-4.785 1.698-1.242 3.798-1.862 6.302-1.862 2.463 0 4.53.67 6.202 2.012 1.67 1.341 2.506 3.093 2.506 5.256a8.644 8.644 0 01-.849 3.724c-.566 1.201-1.92 3.053-4.064 5.556a165.471 165.471 0 01-6.272 6.938h11.445l-1.019 5.726h-2.117c.08-.28.12-.534.12-.76 0-.388-.1-.631-.3-.731-.2-.1-.599-.15-1.198-.15H.08zm12.124 19.207c1.745.04 3.236.637 4.474 1.792 1.239 1.154 1.858 2.773 1.858 4.855 0 2.99-1.132 5.393-3.396 7.208-2.263 1.815-5 2.723-8.209 2.723-2.01 0-3.669-.384-4.974-1.151C.652 111.853 0 110.849 0 109.607c0-.774.27-1.398.809-1.872.54-.474 1.128-.71 1.768-.71.639 0 1.162.2 1.568.6.406.4.782 1.055 1.128 1.962.466 1.268 1.239 1.902 2.317 1.902 1.265 0 2.287-.477 3.066-1.431.78-.955 1.169-2.686 1.169-5.196 0-1.709-.12-3.023-.36-3.944-.24-.921-.792-1.382-1.658-1.382-.586 0-1.185.307-1.797.921-.493.494-.932.741-1.319.741-.333 0-.602-.147-.809-.44-.206-.294-.31-.574-.31-.841 0-.32.104-.594.31-.821.207-.227.69-.594 1.449-1.102 2.876-1.922 4.314-4.017 4.314-6.287 0-1.188-.306-2.092-.919-2.713a3.001 3.001 0 00-2.217-.93c-.799 0-1.525.263-2.177.79-.653.528-.979 1.158-.979 1.892 0 .641.253 1.235.76 1.782.172.2.259.367.259.5 0 .121-.57.428-1.708.922-1.139.494-1.854.74-2.147.74-.413 0-.75-.333-1.009-1-.26-.668-.39-1.282-.39-1.842 0-1.749.93-3.224 2.787-4.425 1.858-1.202 3.965-1.802 6.322-1.802 2.064 0 3.851.447 5.363 1.341 1.511.895 2.267 2.116 2.267 3.664 0 1.362-.57 2.623-1.708 3.784a13.387 13.387 0 01-3.945 2.784z\"/&gt;&lt;/svg&gt;"},"$:/core/images/list":{"title":"$:/core/images/list","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-list tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M87.748 128H23.999c-4.418 0-7.999-3.59-7.999-8.007V8.007C16 3.585 19.588 0 24 0h80c4.419 0 8 3.59 8 8.007V104H91.25c-.965 0-1.84.392-2.473 1.025a3.476 3.476 0 00-1.029 2.476V128zm8-.12l15.88-15.88h-15.88v15.88zM40 15.508A3.502 3.502 0 0143.5 12h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 20h-55a3.498 3.498 0 01-3.5-3.509v-.982zM32 22a6 6 0 100-12 6 6 0 000 12zm8 9.509A3.502 3.502 0 0143.5 28h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 36h-55a3.498 3.498 0 01-3.5-3.509v-.982zm0 16A3.502 3.502 0 0143.5 44h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 52h-55a3.498 3.498 0 01-3.5-3.509v-.982zm0 16A3.502 3.502 0 0143.5 60h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 68h-55a3.498 3.498 0 01-3.5-3.509v-.982zm0 16A3.502 3.502 0 0143.5 76h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 84h-55a3.498 3.498 0 01-3.5-3.509v-.982zm0 16A3.502 3.502 0 0143.5 92h55c1.933 0 3.5 1.561 3.5 3.509v.982A3.502 3.502 0 0198.5 100h-55a3.498 3.498 0 01-3.5-3.509v-.982zm0 16A3.505 3.505 0 0143.497 108h33.006A3.497 3.497 0 0180 111.509v.982A3.505 3.505 0 0176.503 116H43.497A3.497 3.497 0 0140 112.491v-.982zM32 38a6 6 0 100-12 6 6 0 000 12zm0 16a6 6 0 100-12 6 6 0 000 12zm0 16a6 6 0 100-12 6 6 0 000 12zm0 16a6 6 0 100-12 6 6 0 000 12zm0 16a6 6 0 100-12 6 6 0 000 12zm0 16a6 6 0 100-12 6 6 0 000 12z\"/&gt;&lt;/svg&gt;"},"$:/core/images/locked-padlock":{"title":"$:/core/images/locked-padlock","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-locked-padlock tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M96.472 64H105v32.01C105 113.674 90.674 128 73.001 128H56C38.318 128 24 113.677 24 96.01V64h8c.003-15.723.303-47.731 32.16-47.731 31.794 0 32.305 32.057 32.312 47.731zm-15.897 0H48.44c.002-16.287.142-32 15.719-32 15.684 0 16.977 16.136 16.415 32zM67.732 92.364A8.503 8.503 0 0064.5 76a8.5 8.5 0 00-3.498 16.25l-5.095 22.77H72.8l-5.07-22.656z\"/&gt;&lt;/svg&gt;"},"$:/core/images/mail":{"title":"$:/core/images/mail","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-mail tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M122.827 104.894a7.986 7.986 0 01-2.834.516H8.007c-.812 0-1.597-.12-2.335-.345l34.163-34.163 20.842 20.842a3.998 3.998 0 003.418 1.134 4.003 4.003 0 003.395-1.134L88.594 70.64c.075.09.155.176.24.26l33.993 33.994zm5.076-6.237c.064-.406.097-.823.097-1.247v-64c0-.669-.082-1.318-.237-1.94L94.23 65.006c.09.075.177.154.261.239l33.413 33.413zm-127.698.56A8.023 8.023 0 010 97.41v-64c0-.716.094-1.41.271-2.071l33.907 33.906L.205 99.218zM5.93 25.684a8.012 8.012 0 012.078-.273h111.986c.766 0 1.507.108 2.209.308L64.083 83.837 5.93 25.683z\"/&gt;&lt;/svg&gt;"},"$:/core/images/menu-button":{"title":"$:/core/images/menu-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-menu-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;rect width=\"128\" height=\"16\" y=\"16\" rx=\"8\"/&gt;&lt;rect width=\"128\" height=\"16\" y=\"56\" rx=\"8\"/&gt;&lt;rect width=\"128\" height=\"16\" y=\"96\" rx=\"8\"/&gt;&lt;/svg&gt;"},"$:/core/images/minus-button":{"title":"$:/core/images/minus-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-minus-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M64 0c35.346 0 64 28.654 64 64 0 35.346-28.654 64-64 64-35.346 0-64-28.654-64-64C0 28.654 28.654 0 64 0zm.332 16c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z\"/&gt;&lt;rect width=\"80\" height=\"16\" x=\"24\" y=\"56\" rx=\"8\"/&gt;&lt;/svg&gt;"},"$:/core/images/mono-block":{"title":"$:/core/images/mono-block","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-mono-block tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M23.965 32.967h.357c.755 0 1.328.192 1.72.577.39.384.586.947.586 1.688 0 .824-.206 1.418-.618 1.782-.413.363-1.094.545-2.045.545h-6.31c-.965 0-1.65-.178-2.056-.535-.405-.356-.608-.954-.608-1.792 0-.811.203-1.391.608-1.74.406-.35 1.09-.525 2.055-.525h.734l-.86-2.453H8.471l-.902 2.453h.734c.95 0 1.632.178 2.044.535.413.356.619.933.619 1.73 0 .824-.206 1.418-.619 1.782-.412.363-1.094.545-2.044.545h-5.41c-.964 0-1.649-.182-2.054-.545-.406-.364-.608-.958-.608-1.782 0-.741.195-1.304.587-1.688.391-.385.964-.577 1.719-.577h.356l5.62-15.641H6.835c-.95 0-1.632-.182-2.044-.546-.412-.363-.619-.95-.619-1.76 0-.825.207-1.42.619-1.783.412-.363 1.094-.545 2.044-.545h7.863c1.244 0 2.118.67 2.62 2.013v.063l6.647 18.2zM12.98 17.326l-3.04 8.848h6.08l-3.04-8.848zm22.402 9.372v6.395h3.145c2.223 0 3.788-.245 4.697-.734.908-.49 1.362-1.307 1.362-2.453 0-1.16-.433-1.985-1.3-2.474-.866-.49-2.383-.734-4.55-.734h-3.354zm10.693-2.327c1.524.559 2.642 1.324 3.355 2.295.713.972 1.07 2.212 1.07 3.722 0 1.272-.308 2.432-.923 3.48-.615 1.049-1.496 1.909-2.642 2.58a7.499 7.499 0 01-2.254.849c-.832.174-2.01.262-3.533.262H30.202c-.922 0-1.583-.182-1.981-.545-.399-.364-.598-.958-.598-1.782 0-.741.189-1.304.566-1.688.378-.385.93-.577 1.657-.577h.356V17.326h-.356c-.727 0-1.28-.196-1.657-.587-.377-.392-.566-.965-.566-1.72 0-.81.203-1.401.608-1.771.406-.37 1.062-.556 1.971-.556h9.645c2.95 0 5.19.573 6.72 1.72 1.53 1.145 2.296 2.823 2.296 5.031 0 1.09-.234 2.052-.703 2.883-.468.832-1.163 1.513-2.086 2.045zM35.381 17.2v5.284h2.83c1.72 0 2.932-.203 3.638-.609.706-.405 1.06-1.09 1.06-2.054 0-.909-.319-1.573-.955-1.992-.636-.42-1.667-.63-3.093-.63h-3.48zm35.863-3.816c.28-.503.566-.86.86-1.07.293-.21.664-.314 1.111-.314.685 0 1.17.182 1.457.545.287.364.43.986.43 1.866l.042 5.452c0 .964-.157 1.614-.472 1.95-.314.335-.884.503-1.709.503-.587 0-1.037-.14-1.352-.42-.314-.28-.584-.796-.807-1.551-.364-1.328-.944-2.282-1.74-2.862-.797-.58-1.901-.87-3.313-.87-2.153 0-3.802.727-4.948 2.18-1.147 1.454-1.72 3.558-1.72 6.311 0 2.74.58 4.844 1.74 6.311 1.16 1.468 2.817 2.202 4.97 2.202 1.467 0 3.085-.49 4.854-1.468 1.768-.978 2.883-1.467 3.344-1.467.545 0 1.003.23 1.373.692.37.46.556 1.034.556 1.719 0 1.23-1.084 2.39-3.25 3.48-2.167 1.09-4.606 1.636-7.318 1.636-3.662 0-6.625-1.21-8.89-3.627-2.264-2.419-3.396-5.578-3.396-9.478 0-3.76 1.146-6.884 3.438-9.372 2.293-2.488 5.2-3.732 8.723-3.732.992 0 1.97.112 2.935.335.964.224 1.992.574 3.082 1.049zm10.22 19.583V17.326h-.356c-.755 0-1.328-.196-1.72-.587-.39-.392-.586-.965-.586-1.72 0-.81.21-1.401.629-1.771.42-.37 1.097-.556 2.034-.556h5.178c2.922 0 5.06.126 6.416.377 1.356.252 2.51.671 3.46 1.258 1.691 1.007 2.988 2.443 3.89 4.31.9 1.865 1.352 4.021 1.352 6.467 0 2.586-.514 4.847-1.541 6.783-1.028 1.936-2.485 3.4-4.372 4.393-.853.447-1.852.772-2.998.975-1.147.203-2.852.304-5.116.304h-6.269c-.965 0-1.65-.178-2.055-.535-.406-.356-.608-.954-.608-1.792 0-.741.195-1.304.587-1.688.391-.385.964-.577 1.72-.577h.356zm5.41-15.725v15.725h1.195c2.642 0 4.592-.646 5.85-1.94 1.258-1.292 1.887-3.28 1.887-5.965 0-2.641-.64-4.612-1.918-5.912-1.28-1.3-3.205-1.95-5.777-1.95-.335 0-.59.003-.765.01a7.992 7.992 0 00-.472.032zm35.067-.126h-9.75v5.368h3.69v-.252c0-.797.175-1.39.524-1.782.35-.392.88-.587 1.594-.587.629 0 1.142.178 1.54.534.4.357.598.808.598 1.353 0 .028.007.118.021.272.014.154.021.308.021.462v4.34c0 .936-.167 1.607-.503 2.013-.335.405-.88.608-1.635.608-.713 0-1.251-.19-1.615-.567-.363-.377-.545-.936-.545-1.677v-.377h-3.69v6.269h9.75v-2.495c0-.937.178-1.608.534-2.013.357-.405.94-.608 1.75-.608.798 0 1.367.2 1.71.597.342.399.513 1.073.513 2.024v5.074c0 .755-.146 1.258-.44 1.51-.293.251-.873.377-1.74.377h-17.172c-.923 0-1.583-.182-1.982-.545-.398-.364-.597-.958-.597-1.782 0-.741.189-1.304.566-1.688.377-.385.93-.577 1.656-.577h.357V17.326h-.357c-.712 0-1.261-.2-1.646-.598-.384-.398-.576-.968-.576-1.709 0-.81.203-1.401.608-1.771.405-.37 1.062-.556 1.97-.556h17.173c.853 0 1.43.13 1.73.388.3.258.45.772.45 1.54v4.698c0 .95-.174 1.631-.524 2.044-.35.412-.915.618-1.698.618-.81 0-1.394-.21-1.75-.629-.357-.419-.535-1.097-.535-2.033v-2.202zM19.77 47.641c.267-.504.55-.86.85-1.07.3-.21.675-.314 1.122-.314.685 0 1.17.181 1.457.545.287.363.43.985.43 1.866l.042 5.451c0 .965-.157 1.615-.472 1.95-.314.336-.891.504-1.73.504-.587 0-1.045-.144-1.373-.43-.329-.287-.598-.8-.807-1.541-.378-1.342-.958-2.3-1.74-2.873-.783-.573-1.88-.86-3.292-.86-2.153 0-3.799.727-4.938 2.181-1.14 1.454-1.709 3.557-1.709 6.311s.598 4.882 1.793 6.385C10.599 67.248 12.294 68 14.488 68c.503 0 1.077-.06 1.72-.179a23.809 23.809 0 002.264-.555v-3.313h-2.37c-.95 0-1.624-.175-2.023-.524-.398-.35-.597-.93-.597-1.74 0-.84.199-1.437.597-1.793.399-.357 1.073-.535 2.024-.535h7.569c.978 0 1.667.175 2.065.524.398.35.598.937.598 1.762 0 .74-.2 1.31-.598 1.708-.398.399-.975.598-1.73.598h-.335v5.242c0 .447-.05.758-.147.933-.098.174-.293.353-.587.534-.797.476-2.062.895-3.795 1.258a25.576 25.576 0 01-5.263.546c-3.662 0-6.625-1.21-8.89-3.628-2.264-2.418-3.397-5.577-3.397-9.477 0-3.76 1.147-6.884 3.44-9.372 2.292-2.488 5.199-3.732 8.721-3.732.979 0 1.954.112 2.925.335.972.224 2.003.573 3.093 1.049zm15.84 3.941v4.823h6.857v-4.823h-.336c-.754 0-1.331-.195-1.73-.587-.398-.391-.597-.964-.597-1.719 0-.825.206-1.419.619-1.782.412-.364 1.093-.545 2.044-.545h5.41c.95 0 1.624.181 2.023.545.398.363.597.957.597 1.782 0 .755-.192 1.328-.576 1.72-.385.39-.947.586-1.688.586h-.357v15.642h.357c.755 0 1.328.192 1.719.576.391.385.587.947.587 1.688 0 .825-.203 1.419-.608 1.782-.405.364-1.09.546-2.055.546h-5.41c-.964 0-1.649-.179-2.054-.535-.405-.357-.608-.954-.608-1.793 0-.74.2-1.303.598-1.688.398-.384.975-.576 1.73-.576h.335v-6.186h-6.856v6.186h.335c.755 0 1.331.192 1.73.576.398.385.597.947.597 1.688 0 .825-.206 1.419-.618 1.782-.412.364-1.094.546-2.044.546h-5.41c-.964 0-1.65-.179-2.055-.535-.405-.357-.608-.954-.608-1.793 0-.74.196-1.303.587-1.688.392-.384.965-.576 1.72-.576h.356V51.582h-.356c-.741 0-1.304-.195-1.688-.587-.385-.391-.577-.964-.577-1.719 0-.825.2-1.419.598-1.782.398-.364 1.073-.545 2.023-.545h5.41c.936 0 1.614.181 2.033.545.42.363.63.957.63 1.782 0 .755-.2 1.328-.598 1.72-.399.39-.975.586-1.73.586h-.335zm31.754 0v15.642h3.523c.95 0 1.632.178 2.044.534.412.357.618.933.618 1.73 0 .811-.21 1.402-.629 1.772-.419.37-1.097.556-2.033.556H58.433c-.95 0-1.632-.182-2.044-.546-.412-.363-.619-.957-.619-1.782 0-.81.203-1.39.608-1.74.406-.35 1.09-.524 2.055-.524h3.523V51.582h-3.523c-.95 0-1.632-.181-2.044-.545-.412-.363-.619-.95-.619-1.761 0-.825.203-1.412.608-1.761.406-.35 1.09-.524 2.055-.524h12.455c.992 0 1.684.174 2.075.524.392.35.587.936.587 1.761 0 .81-.202 1.398-.608 1.761-.405.364-1.09.545-2.054.545h-3.523zm30.496 0v11.994c0 1.873-.122 3.228-.367 4.067a5.876 5.876 0 01-1.227 2.244c-.74.852-1.768 1.495-3.082 1.929-1.314.433-2.893.65-4.738.65-1.3 0-2.555-.126-3.764-.378a16.843 16.843 0 01-3.491-1.132c-.615-.28-1.017-.643-1.206-1.09-.188-.448-.283-1.175-.283-2.18v-4.32c0-1.202.175-2.04.525-2.516.349-.475.957-.713 1.824-.713 1.244 0 1.929.915 2.054 2.747.014.321.035.566.063.733.168 1.622.545 2.73 1.133 3.324.587.594 1.523.89 2.81.89 1.593 0 2.714-.422 3.364-1.268.65-.845.975-2.386.975-4.623V51.582H88.93c-.95 0-1.632-.181-2.044-.545-.413-.363-.619-.95-.619-1.761 0-.825.2-1.412.598-1.761.398-.35 1.086-.524 2.065-.524h10.693c.979 0 1.667.174 2.065.524.399.35.598.936.598 1.761 0 .81-.206 1.398-.619 1.761-.412.364-1.093.545-2.044.545h-1.761zm14.644 0v6.353l6.48-6.478c-.728-.084-1.238-.29-1.531-.619-.294-.328-.44-.85-.44-1.562 0-.825.198-1.419.597-1.782.398-.364 1.073-.545 2.023-.545h5.137c.95 0 1.625.181 2.023.545.399.363.598.957.598 1.782 0 .769-.2 1.345-.598 1.73-.398.384-.982.576-1.75.576h-.483l-6.101 6.06c1.132.839 2.167 1.94 3.103 3.302.937 1.363 2.034 3.456 3.292 6.28h.692c.825 0 1.44.188 1.845.566.405.377.608.943.608 1.698 0 .825-.206 1.419-.619 1.782-.412.364-1.093.546-2.044.546h-2.579c-1.132 0-2.048-.762-2.746-2.286-.126-.28-.224-.503-.294-.67-.923-1.958-1.768-3.467-2.537-4.53a16.616 16.616 0 00-2.705-2.914l-1.97 1.887v3.92h.335c.755 0 1.331.193 1.73.577.398.385.597.947.597 1.688 0 .825-.206 1.419-.618 1.782-.413.364-1.094.546-2.045.546h-5.41c-.964 0-1.649-.179-2.054-.535-.405-.357-.608-.954-.608-1.793 0-.74.196-1.303.587-1.688.391-.384.965-.576 1.72-.576h.356V51.582h-.357c-.74 0-1.303-.195-1.687-.587-.385-.391-.577-.964-.577-1.719 0-.825.2-1.419.598-1.782.398-.364 1.072-.545 2.023-.545h5.41c.936 0 1.614.181 2.033.545.42.363.63.957.63 1.782 0 .755-.2 1.328-.598 1.72-.399.39-.975.586-1.73.586h-.336zM13.44 96.326l4.005-11.889c.251-.782.6-1.352 1.048-1.709.447-.356 1.041-.534 1.782-.534h3.271c.95 0 1.632.182 2.044.545.413.363.619.957.619 1.782 0 .755-.2 1.328-.598 1.72-.398.39-.975.587-1.73.587h-.335l.587 15.641h.357c.754 0 1.32.192 1.698.577.377.384.566.947.566 1.687 0 .825-.2 1.42-.598 1.783-.398.363-1.072.545-2.023.545h-4.718c-.95 0-1.624-.178-2.023-.535-.398-.356-.597-.954-.597-1.793 0-.74.192-1.303.576-1.687.385-.385.954-.577 1.709-.577h.335l-.293-12.79-3.061 9.52c-.224.712-.542 1.226-.954 1.54-.413.315-.982.472-1.709.472-.727 0-1.303-.157-1.73-.472-.426-.314-.751-.828-.975-1.54l-3.04-9.52-.294 12.79h.336c.755 0 1.324.192 1.709.577.384.384.576.947.576 1.687 0 .825-.202 1.42-.608 1.783-.405.363-1.076.545-2.013.545H2.621c-.937 0-1.608-.182-2.013-.545-.405-.364-.608-.958-.608-1.783 0-.74.192-1.303.577-1.687.384-.385.954-.577 1.708-.577h.336l.608-15.641h-.336c-.754 0-1.331-.196-1.73-.588-.398-.39-.597-.964-.597-1.719 0-.825.206-1.419.619-1.782.412-.363 1.093-.545 2.044-.545h3.27c.728 0 1.311.175 1.752.524.44.35.8.923 1.08 1.72l4.109 11.888zm30.454 2.054V86.828H42.74c-.922 0-1.583-.182-1.981-.546-.398-.363-.598-.95-.598-1.76 0-.812.2-1.402.598-1.773.398-.37 1.059-.555 1.981-.555h5.955c.909 0 1.566.185 1.97.555.406.37.609.961.609 1.772 0 .741-.192 1.31-.577 1.709-.384.398-.933.598-1.646.598h-.356v19.038c0 .657-.07 1.069-.21 1.237-.14.167-.454.251-.943.251h-2.097c-.67 0-1.143-.07-1.415-.21-.273-.14-.507-.384-.703-.733l-8.722-15.327v11.385h1.216c.909 0 1.559.175 1.95.524.392.35.587.93.587 1.74 0 .825-.199 1.42-.597 1.783-.399.363-1.045.545-1.94.545h-6.017c-.909 0-1.566-.182-1.971-.545-.406-.364-.608-.958-.608-1.783 0-.74.188-1.303.566-1.687.377-.385.936-.577 1.677-.577h.336V86.828h-.336c-.713 0-1.265-.2-1.656-.598-.392-.398-.587-.968-.587-1.709 0-.81.206-1.401.618-1.772.413-.37 1.066-.555 1.96-.555h3.44c.824 0 1.383.108 1.677.325.293.216.622.653.985 1.31l7.989 14.551zM64.66 86.366c-1.803 0-3.218.727-4.245 2.18-1.028 1.455-1.541 3.474-1.541 6.06 0 2.586.517 4.613 1.551 6.08 1.034 1.468 2.446 2.202 4.235 2.202 1.804 0 3.222-.73 4.257-2.19 1.034-1.461 1.551-3.492 1.551-6.092 0-2.586-.513-4.605-1.54-6.06-1.028-1.453-2.45-2.18-4.268-2.18zm0-4.864c3.44 0 6.27 1.23 8.492 3.69 2.223 2.46 3.334 5.598 3.334 9.414 0 3.844-1.104 6.99-3.313 9.436-2.208 2.446-5.046 3.669-8.513 3.669-3.424 0-6.255-1.234-8.491-3.701-2.237-2.467-3.355-5.602-3.355-9.404 0-3.83 1.108-6.971 3.323-9.424 2.216-2.454 5.057-3.68 8.523-3.68zM87.461 98.17v4.298h2.16c.908 0 1.555.175 1.94.524.384.35.576.93.576 1.74 0 .825-.196 1.42-.587 1.783-.392.363-1.035.545-1.93.545h-7.254c-.922 0-1.583-.182-1.981-.545-.399-.364-.598-.958-.598-1.783 0-.74.189-1.303.566-1.687.378-.385.93-.577 1.657-.577h.356V86.828h-.356c-.713 0-1.262-.2-1.646-.598-.385-.398-.577-.968-.577-1.709 0-.81.203-1.401.608-1.772.406-.37 1.063-.555 1.971-.555h8.66c3.424 0 6.014.657 7.768 1.97 1.754 1.315 2.631 3.25 2.631 5.809 0 2.697-.873 4.738-2.62 6.122-1.748 1.384-4.34 2.076-7.78 2.076h-3.564zm0-11.343v6.625h2.977c1.65 0 2.89-.28 3.722-.839.832-.559 1.248-1.397 1.248-2.516 0-1.048-.43-1.855-1.29-2.421-.86-.566-2.086-.85-3.68-.85h-2.977zm27.267 20.568l-1.636 1.636a12.37 12.37 0 011.772-.44c.58-.098 1.15-.147 1.709-.147 1.104 0 2.268.164 3.491.492 1.223.329 1.967.493 2.233.493.447 0 1.03-.15 1.75-.45.72-.301 1.206-.452 1.458-.452.517 0 .947.2 1.29.598.342.398.513.898.513 1.5 0 .796-.472 1.474-1.415 2.033-.944.56-2.1.839-3.47.839-.937 0-2.139-.22-3.607-.66-1.467-.441-2.53-.661-3.187-.661-.992 0-2.11.272-3.354.817-1.244.546-2.013.818-2.307.818a2.14 2.14 0 01-1.53-.597c-.42-.399-.63-.878-.63-1.437 0-.391.134-.807.4-1.247.265-.44.733-1.01 1.404-1.709l2.118-2.139c-2.335-.852-4.194-2.386-5.578-4.602-1.384-2.215-2.075-4.763-2.075-7.642 0-3.802 1.104-6.909 3.312-9.32 2.209-2.411 5.053-3.617 8.534-3.617 3.467 0 6.304 1.209 8.513 3.627 2.208 2.418 3.312 5.522 3.312 9.31 0 3.774-1.097 6.884-3.291 9.33-2.195 2.446-4.977 3.67-8.345 3.67a22.5 22.5 0 01-1.384-.043zm1.195-21.03c-1.803 0-3.218.727-4.246 2.18-1.027 1.455-1.54 3.474-1.54 6.06 0 2.586.516 4.613 1.55 6.08 1.035 1.468 2.447 2.202 4.236 2.202 1.803 0 3.222-.73 4.256-2.19 1.035-1.461 1.552-3.492 1.552-6.092 0-2.586-.514-4.605-1.541-6.06-1.028-1.453-2.45-2.18-4.267-2.18z\"/&gt;&lt;/svg&gt;"},"$:/core/images/mono-line":{"title":"$:/core/images/mono-line","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-mono-line tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M60.437 84.523h.908c1.922 0 3.381.489 4.378 1.468.997.979 1.495 2.411 1.495 4.298 0 2.1-.525 3.612-1.575 4.538-1.05.925-2.785 1.388-5.206 1.388h-16.07c-2.456 0-4.2-.454-5.232-1.361-1.032-.908-1.548-2.43-1.548-4.565 0-2.065.516-3.542 1.548-4.432 1.032-.89 2.776-1.334 5.232-1.334h1.869l-2.19-6.247H20.983l-2.296 6.247h1.87c2.42 0 4.155.453 5.205 1.361 1.05.908 1.575 2.376 1.575 4.405 0 2.1-.525 3.612-1.575 4.538-1.05.925-2.785 1.388-5.206 1.388H6.781c-2.456 0-4.2-.463-5.233-1.388C.516 93.9 0 92.389 0 90.289c0-1.887.498-3.32 1.495-4.298.997-.979 2.456-1.468 4.378-1.468h.908l14.308-39.83h-4.271c-2.42 0-4.156-.462-5.206-1.387-1.05-.926-1.575-2.42-1.575-4.485 0-2.1.525-3.613 1.575-4.538 1.05-.926 2.785-1.388 5.206-1.388h20.021c3.168 0 5.392 1.708 6.674 5.125v.16l16.924 46.343zm-27.976-39.83L24.72 67.225h15.483l-7.742-22.53zM89.506 68.56v16.284h8.008c5.66 0 9.646-.623 11.96-1.869 2.313-1.245 3.47-3.328 3.47-6.246 0-2.955-1.103-5.055-3.31-6.3-2.207-1.246-6.069-1.869-11.586-1.869h-8.542zm27.229-5.926c3.88 1.423 6.727 3.372 8.542 5.846 1.815 2.474 2.723 5.633 2.723 9.477 0 3.239-.783 6.193-2.35 8.862-1.565 2.67-3.808 4.859-6.726 6.567-1.709.997-3.622 1.718-5.74 2.163-2.118.445-5.116.667-8.996.667h-27.87c-2.349 0-4.03-.463-5.045-1.388-1.014-.926-1.521-2.438-1.521-4.538 0-1.887.48-3.32 1.441-4.298.961-.979 2.367-1.468 4.218-1.468h.907v-39.83h-.907c-1.851 0-3.257-.498-4.218-1.494-.961-.997-1.441-2.456-1.441-4.378 0-2.065.516-3.568 1.548-4.512 1.032-.943 2.705-1.414 5.018-1.414h24.56c7.51 0 13.214 1.459 17.111 4.377 3.898 2.92 5.847 7.19 5.847 12.814 0 2.776-.597 5.223-1.789 7.341-1.192 2.118-2.963 3.853-5.312 5.206zm-27.23-18.26v13.455h7.208c4.378 0 7.466-.516 9.264-1.549 1.797-1.032 2.696-2.776 2.696-5.232 0-2.313-.81-4.004-2.43-5.072-1.619-1.068-4.244-1.602-7.874-1.602h-8.863z\"/&gt;&lt;/svg&gt;"},"$:/core/images/new-button":{"title":"$:/core/images/new-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-new-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M56 72H8.007C3.591 72 0 68.418 0 64c0-4.41 3.585-8 8.007-8H56V8.007C56 3.591 59.582 0 64 0c4.41 0 8 3.585 8 8.007V56h47.993c4.416 0 8.007 3.582 8.007 8 0 4.41-3.585 8-8.007 8H72v47.993c0 4.416-3.582 8.007-8 8.007-4.41 0-8-3.585-8-8.007V72z\"/&gt;&lt;/svg&gt;"},"$:/core/images/new-here-button":{"title":"$:/core/images/new-here-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-new-here-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M55.838 20.935l-3.572.938c-3.688.968-8.23 4.43-10.136 7.731L3.37 96.738c-1.905 3.3-.771 7.524 2.534 9.432l33.717 19.466c3.297 1.904 7.53.78 9.435-2.521l38.76-67.134c1.905-3.3 2.632-8.963 1.623-12.646L83.285 20.88c-1.009-3.68-4.821-5.884-8.513-4.915l-7.603 1.995.043.287c.524 3.394 2.053 7.498 4.18 11.55.418.163.829.36 1.23.59a8.864 8.864 0 014.438 8.169c.104.132.21.264.316.395l-.386.318a8.663 8.663 0 01-1.082 3.137c-2.42 4.192-7.816 5.608-12.051 3.163-4.12-2.379-5.624-7.534-3.476-11.671-2.177-4.394-3.788-8.874-4.543-12.964z\"/&gt;&lt;path d=\"M69.554 44.76c-5.944-7.476-10.74-17.196-11.955-25.059-1.68-10.875 3.503-18.216 15.082-18.04 10.407.158 19.975 5.851 24.728 13.785 5.208 8.695 2.95 17.868-6.855 20.496l-2.037-7.601c4.232-1.134 4.999-4.248 2.24-8.853-3.37-5.626-10.465-9.848-18.146-9.965-6.392-.097-8.31 2.62-7.323 9.01.999 6.465 5.318 15.138 10.582 21.65l-.072.06c.559 1.553-4.17 6.44-5.938 4.888l-.005.004-.028-.034a1.323 1.323 0 01-.124-.135 2.618 2.618 0 01-.149-.205z\"/&gt;&lt;rect width=\"16\" height=\"48\" x=\"96\" y=\"80\" rx=\"8\"/&gt;&lt;rect width=\"48\" height=\"16\" x=\"80\" y=\"96\" rx=\"8\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/new-image-button":{"title":"$:/core/images/new-image-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-new-image-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M81.362 73.627l15.826-27.41a2.626 2.626 0 00-.962-3.59l-50.01-28.872a2.626 2.626 0 00-3.588.961L30.058 36.49l10.04-5.261c3.042-1.595 6.771.114 7.55 3.46l3.607 17.702 9.88.85a5.25 5.25 0 014.571 3.77c.034.115.1.344.199.671.165.553.353 1.172.562 1.843.595 1.914 1.23 3.85 1.872 5.678.207.588.412 1.156.614 1.701.625 1.685 1.209 3.114 1.725 4.207.255.54.485.977.726 1.427.214.212.547.425 1.011.622 1.141.482 2.784.74 4.657.758.864.008 1.71-.034 2.492-.11.448-.043.753-.085.871-.104.315-.053.625-.077.927-.076zM37.47 2.649A5.257 5.257 0 0144.649.725l63.645 36.746a5.257 5.257 0 011.923 7.178L73.47 108.294a5.257 5.257 0 01-7.177 1.923L2.649 73.47a5.257 5.257 0 01-1.924-7.177L37.471 2.649zm42.837 50.49a5.25 5.25 0 105.25-9.092 5.25 5.25 0 00-5.25 9.093zM96 112h-7.993c-4.419 0-8.007-3.582-8.007-8 0-4.41 3.585-8 8.007-8H96v-7.993C96 83.588 99.582 80 104 80c4.41 0 8 3.585 8 8.007V96h7.993c4.419 0 8.007 3.582 8.007 8 0 4.41-3.585 8-8.007 8H112v7.993c0 4.419-3.582 8.007-8 8.007-4.41 0-8-3.585-8-8.007V112zM33.347 51.791c7.428 7.948 9.01 10.69 7.449 13.394-1.56 2.703-13.838-2.328-16.094 1.58-2.256 3.908-.907 3.258-2.437 5.908l19.73 11.39s-5.605-8.255-4.235-10.628c2.515-4.356 8.77-1.256 10.365-4.019 2.414-4.181-5.103-9.639-14.778-17.625z\"/&gt;&lt;/svg&gt;"},"$:/core/images/new-journal-button":{"title":"$:/core/images/new-journal-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-new-journal-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M102.545 112.818v11.818c0 1.306 1.086 2.364 2.425 2.364h6.06c1.34 0 2.425-1.058 2.425-2.364v-11.818h12.12c1.34 0 2.425-1.058 2.425-2.363v-5.91c0-1.305-1.085-2.363-2.424-2.363h-12.121V90.364c0-1.306-1.086-2.364-2.425-2.364h-6.06c-1.34 0-2.425 1.058-2.425 2.364v11.818h-12.12c-1.34 0-2.425 1.058-2.425 2.363v5.91c0 1.305 1.085 2.363 2.424 2.363h12.121zM60.016 4.965c-4.781-2.76-10.897-1.118-13.656 3.66L5.553 79.305A9.993 9.993 0 009.21 92.963l51.04 29.468c4.78 2.76 10.897 1.118 13.655-3.66l40.808-70.681a9.993 9.993 0 00-3.658-13.656L60.016 4.965zm-3.567 27.963a6 6 0 106-10.393 6 6 0 00-6 10.393zm31.697 17.928a6 6 0 106-10.392 6 6 0 00-6 10.392z\"/&gt;&lt;text class=\"tc-fill-background\" font-family=\"Helvetica\" font-size=\"47.172\" font-weight=\"bold\" transform=\"rotate(30 25.742 95.82)\"&gt;&lt;tspan x=\"42\" y=\"77.485\" text-anchor=\"middle\"&gt;&lt;&lt;now \"DD\"&gt;&gt;&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/opacity":{"title":"$:/core/images/opacity","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-opacity tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M102.362 65a51.595 51.595 0 01-1.942 6H82.584a35.867 35.867 0 002.997-6h16.78zm.472-2c.423-1.961.734-3.963.929-6H87.656a35.78 35.78 0 01-1.368 6h16.546zm-3.249 10a51.847 51.847 0 01-3.135 6H75.812a36.205 36.205 0 005.432-6h18.341zm-4.416 8c-1.424 2.116-3 4.12-4.71 6H60.46a35.843 35.843 0 0012.874-6h21.834zm-7.513-34h16.107C101.247 20.627 79.033 0 52 0 23.281 0 0 23.281 0 52c0 25.228 17.965 46.26 41.8 51h20.4a51.66 51.66 0 0015.875-6H39v-2h42.25a52.257 52.257 0 007.288-6H39v-2h4.539C27.739 83.194 16 68.968 16 52c0-19.882 16.118-36 36-36 18.186 0 33.222 13.484 35.656 31zm.22 2h16.039a52.823 52.823 0 010 6H87.877a36.483 36.483 0 000-6z\"/&gt;&lt;path d=\"M76 128c28.719 0 52-23.281 52-52s-23.281-52-52-52-52 23.281-52 52 23.281 52 52 52zm0-16c19.882 0 36-16.118 36-36S95.882 40 76 40 40 56.118 40 76s16.118 36 36 36z\"/&gt;&lt;path d=\"M37 58h53v4H37v-4zm3-8h53v4H40v-4zm0-8h53v4H40v-4zm-8 24h53v4H32v-4zm-2 8h53v4H30v-4zm-3 8h53v4H27v-4z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/open-window":{"title":"$:/core/images/open-window","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-open-window tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M16 112h88.994c3.87 0 7.006 3.59 7.006 8 0 4.418-3.142 8-7.006 8H7.006C3.136 128 0 124.41 0 120a9.321 9.321 0 010-.01V24.01C0 19.586 3.59 16 8 16c4.418 0 8 3.584 8 8.01V112z\"/&gt;&lt;path d=\"M96 43.196V56a8 8 0 1016 0V24c0-4.41-3.585-8-8.007-8H72.007C67.588 16 64 19.582 64 24c0 4.41 3.585 8 8.007 8H84.57l-36.3 36.299a8 8 0 00-.001 11.316c3.117 3.117 8.19 3.123 11.316-.003L96 43.196zM32 7.999C32 3.581 35.588 0 40 0h80c4.419 0 8 3.588 8 8v80c0 4.419-3.588 8-8 8H40c-4.419 0-8-3.588-8-8V8z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/options-button":{"title":"$:/core/images/options-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-options-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M110.488 76a47.712 47.712 0 01-5.134 12.384l6.724 6.724c3.123 3.123 3.132 8.192.011 11.313l-5.668 5.668c-3.12 3.12-8.186 3.117-11.313-.01l-6.724-6.725c-3.82 2.258-7.98 4-12.384 5.134v9.505c0 4.417-3.578 8.007-7.992 8.007h-8.016C55.58 128 52 124.415 52 119.993v-9.505a47.712 47.712 0 01-12.384-5.134l-6.724 6.725c-3.123 3.122-8.192 3.131-11.313.01l-5.668-5.668c-3.12-3.12-3.116-8.186.01-11.313l6.725-6.724c-2.257-3.82-4-7.98-5.134-12.384H8.007C3.591 76 0 72.422 0 68.01v-8.017C0 55.58 3.585 52 8.007 52h9.505a47.712 47.712 0 015.134-12.383l-6.724-6.725c-3.123-3.122-3.132-8.191-.011-11.312l5.668-5.669c3.12-3.12 8.186-3.116 11.313.01l6.724 6.725c3.82-2.257 7.98-4 12.384-5.134V8.007C52 3.591 55.578 0 59.992 0h8.016C72.42 0 76 3.585 76 8.007v9.505a47.712 47.712 0 0112.384 5.134l6.724-6.724c3.123-3.123 8.192-3.132 11.313-.01l5.668 5.668c3.12 3.12 3.116 8.186-.01 11.312l-6.725 6.725c2.257 3.82 4 7.979 5.134 12.383h9.505c4.416 0 8.007 3.578 8.007 7.992v8.017c0 4.411-3.585 7.991-8.007 7.991h-9.505zM64 96c17.673 0 32-14.327 32-32 0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32 0 17.673 14.327 32 32 32z\"/&gt;&lt;/svg&gt;"},"$:/core/images/paint":{"title":"$:/core/images/paint","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-paint tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M83.527 76.19C90.43 69.287 91.892 59 87.91 50.665l37.903-37.902c2.919-2.92 2.913-7.659 0-10.572a7.474 7.474 0 00-10.572 0L77.338 40.093c-8.335-3.982-18.622-2.521-25.526 4.383l31.715 31.715zm-2.643 2.644L49.169 47.119S8.506 81.243 0 80.282c0 0 3.782 5.592 6.827 8.039 14.024-5.69 37.326-24.6 37.326-24.6l.661.66S19.45 90.222 9.18 92.047c1.222 1.44 4.354 4.053 6.247 5.776 5.417-1.488 34.733-28.57 34.733-28.57l.661.66-32.407 31.022 5.285 5.286L56.106 75.2l.662.66s-27.864 30.536-28.684 32.432c0 0 6.032 6.853 7.569 7.824.702-2.836 27.884-33.485 27.884-33.485l.661.66s-20.597 23.755-24.964 36.732c3.21 3.549 7.5 5.137 10.926 6.298-2.19-11.817 30.724-47.487 30.724-47.487z\"/&gt;&lt;/svg&gt;"},"$:/core/images/palette":{"title":"$:/core/images/palette","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-palette tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M80.247 39.182a93.52 93.52 0 00-16.228-1.4C28.662 37.781 0 57.131 0 81.002c0 9.642 4.676 18.546 12.58 25.735C23.504 91.19 26.34 72.395 36.89 63.562c15.183-12.713 26.538-7.828 26.538-7.828l16.82-16.552zm26.535 9.655c13.049 7.913 21.257 19.392 21.257 32.166 0 9.35.519 17.411-11.874 25.08-10.797 6.681-3.824-6.536-11.844-10.898s-19.946 1.308-18.213 7.906c3.2 12.181 19.422 11.455 6.314 16.658-13.107 5.202-18.202 4.476-28.403 4.476-7.821 0-15.315-.947-22.243-2.68 9.844-4.197 27.88-12.539 33.354-19.456C82.788 92.409 87.37 80 83.324 72.484c-.194-.359 11.215-11.668 23.458-23.647zM1.134 123.867l-.66.002c33.479-14.94 22.161-64.226 58.818-64.226.317 1.418.644 2.944 1.062 4.494-25.907-4.166-23.567 48.031-59.22 59.73zm.713-.007c38.872-.506 78.152-22.347 78.152-44.813-9.27 0-14.073-3.48-16.816-7.942-16.597-7.003-30.365 45.715-61.336 52.755zm65.351-64.008c-4.45 4.115 4.886 16.433 11.318 11.318l45.27-45.27c11.317-11.318 0-22.635-11.318-11.318-11.317 11.318-33.518 34.405-45.27 45.27z\"/&gt;&lt;/svg&gt;"},"$:/core/images/permalink-button":{"title":"$:/core/images/permalink-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-permalink-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M80.483 48l-7.387 32h-25.58l7.388-32h25.58zm3.694-16l5.624-24.358c.993-4.303 5.29-6.996 9.596-6.002 4.296.992 6.988 5.293 5.994 9.602L100.598 32h3.403c4.41 0 7.999 3.582 7.999 8 0 4.41-3.581 8-8 8h-7.096l-7.387 32H104c4.41 0 7.999 3.582 7.999 8 0 4.41-3.581 8-8 8H85.824l-5.624 24.358c-.993 4.303-5.29 6.996-9.596 6.002-4.296-.992-6.988-5.293-5.994-9.602L69.402 96h-25.58L38.2 120.358c-.993 4.303-5.29 6.996-9.596 6.002-4.296-.992-6.988-5.293-5.994-9.602L27.402 96h-3.403C19.59 96 16 92.418 16 88c0-4.41 3.581-8 8-8h7.096l7.387-32H24C19.59 48 16 44.418 16 40c0-4.41 3.581-8 8-8h18.177l5.624-24.358c.993-4.303 5.29-6.996 9.596-6.002 4.296.992 6.988 5.293 5.994 9.602L58.598 32h25.58z\"/&gt;&lt;/svg&gt;"},"$:/core/images/permaview-button":{"title":"$:/core/images/permaview-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-permaview-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M81.483 48l-1.846 8h-5.58l1.847-8h5.58zm3.694-16l5.624-24.358c.993-4.303 5.29-6.996 9.596-6.002 4.296.992 6.988 5.293 5.994 9.602L101.598 32h2.403c4.41 0 7.999 3.582 7.999 8 0 4.41-3.581 8-8 8h-6.096l-1.847 8h7.944c4.41 0 7.999 3.582 7.999 8 0 4.41-3.581 8-8 8H92.364l-1.846 8H104c4.41 0 7.999 3.582 7.999 8 0 4.41-3.581 8-8 8H86.824l-5.624 24.358c-.993 4.303-5.29 6.996-9.596 6.002-4.296-.992-6.988-5.293-5.994-9.602L70.402 96h-5.58L59.2 120.358c-.993 4.303-5.29 6.996-9.596 6.002-4.296-.992-6.988-5.293-5.994-9.602L48.402 96h-5.58L37.2 120.358c-.993 4.303-5.29 6.996-9.596 6.002-4.296-.992-6.988-5.293-5.994-9.602L26.402 96h-2.403C19.59 96 16 92.418 16 88c0-4.41 3.581-8 8-8h6.096l1.847-8h-7.944C19.59 72 16 68.418 16 64c0-4.41 3.581-8 8-8h11.637l1.846-8H24C19.59 48 16 44.418 16 40c0-4.41 3.581-8 8-8h17.177l5.624-24.358c.993-4.303 5.29-6.996 9.596-6.002 4.296.992 6.988 5.293 5.994 9.602L57.598 32h5.58L68.8 7.642c.993-4.303 5.29-6.996 9.596-6.002 4.296.992 6.988 5.293 5.994 9.602L79.598 32h5.58zM53.904 48l-1.847 8h5.58l1.846-8h-5.579zm22.039 24l-1.847 8h-5.58l1.847-8h5.58zm-27.58 0l-1.846 8h5.579l1.847-8h-5.58z\"/&gt;&lt;/svg&gt;"},"$:/core/images/picture":{"title":"$:/core/images/picture","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-picture tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M112 68.233v-48.23A4.001 4.001 0 00107.997 16H20.003A4.001 4.001 0 0016 20.003v38.31l9.241-14.593c2.8-4.422 9.023-5.008 12.6-1.186l18.247 20.613 13.687-6.407a8 8 0 018.903 1.492 264.97 264.97 0 002.92 2.739 249.44 249.44 0 006.798 6.066 166.5 166.5 0 002.106 1.778c2.108 1.747 3.967 3.188 5.482 4.237.748.518 1.383.92 2.044 1.33.444.117 1.046.144 1.809.05 1.873-.233 4.238-1.144 6.723-2.547a36.016 36.016 0 003.205-2.044c.558-.4.93-.686 1.07-.802.376-.31.765-.577 1.165-.806zM0 8.007A8.01 8.01 0 018.007 0h111.986A8.01 8.01 0 01128 8.007v111.986a8.01 8.01 0 01-8.007 8.007H8.007A8.01 8.01 0 010 119.993V8.007zM95 42a8 8 0 100-16 8 8 0 000 16zM32 76c15.859 4.83 20.035 7.244 20.035 12S32 95.471 32 102.347c0 6.876 1.285 4.99 1.285 9.653H68s-13.685-6.625-13.685-10.8c0-7.665 10.615-8.34 10.615-13.2 0-7.357-14.078-8.833-32.93-12z\"/&gt;&lt;/svg&gt;"},"$:/core/images/plugin-generic-language":{"title":"$:/core/images/plugin-generic-language","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" viewBox=\"0 0 128 128\" class=\"tc-image-plugin-generic-language tc-image-button\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M61.207 68.137c-4.324 2.795-6.999 6.656-6.999 10.921 0 7.906 9.19 14.424 21.042 15.336 2.162 3.902 8.598 6.785 16.318 7.01-5.126-1.125-9.117-3.742-10.62-7.01C92.805 93.487 102 86.967 102 79.059c0-8.53-10.699-15.445-23.896-15.445-6.599 0-12.572 1.729-16.897 4.524zm12.794-14.158c-4.324 2.795-10.298 4.524-16.897 4.524-2.619 0-5.14-.272-7.497-.775-3.312 2.25-8.383 3.69-14.067 3.69l-.255-.002c4.119-.892 7.511-2.747 9.478-5.13-6.925-2.704-11.555-7.617-11.555-13.228 0-8.53 10.699-15.445 23.896-15.445C70.301 27.613 81 34.528 81 43.058c0 4.265-2.675 8.126-6.999 10.921zM64 0l54.56 32v64L64 128 9.44 96V32L64 0z\"/&gt;&lt;/svg&gt;"},"$:/core/images/plugin-generic-plugin":{"title":"$:/core/images/plugin-generic-plugin","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" viewBox=\"0 0 128 128\" class=\"tc-image-plugin-generic-plugin tc-image-button\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M40.397 76.446V95.34h14.12l-.001-.005a6.912 6.912 0 005.364-11.593l.046-.023a6.912 6.912 0 119.979.526l.086.055a6.914 6.914 0 004.408 10.948l-.023.092h21.32V75.568l-.15.038a6.912 6.912 0 00-11.593-5.364l-.022-.046a6.912 6.912 0 11.526-9.979l.055-.086a6.914 6.914 0 0010.948-4.408c.079.018.158.038.236.059v-15.74h-21.32l.023-.094a6.914 6.914 0 01-4.408-10.947 10.23 10.23 0 00-.086-.055 6.912 6.912 0 10-9.979-.526l-.046.023a6.912 6.912 0 01-5.364 11.593l.001.005h-14.12v12.847A6.912 6.912 0 0129.5 59.843l-.054.086a6.912 6.912 0 10-.526 9.979l.023.046a6.912 6.912 0 0111.455 6.492zM64 0l54.56 32v64L64 128 9.44 96V32L64 0z\"/&gt;&lt;/svg&gt;"},"$:/core/images/plugin-generic-theme":{"title":"$:/core/images/plugin-generic-theme","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" viewBox=\"0 0 128 128\" class=\"tc-image-plugin-generic-theme tc-image-button\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M29.408 91.472L51.469 69.41l-.004-.005a2.22 2.22 0 01.004-3.146c.87-.87 2.281-.872 3.147-.005l9.465 9.464a2.22 2.22 0 01-.005 3.147c-.87.87-2.28.871-3.147.005l-.005-.005-22.061 22.062a6.686 6.686 0 11-9.455-9.455zM60.802 66.38c-2.436-2.704-4.465-5.091-5.817-6.869-6.855-9.014-10.313-4.268-14.226 0-3.913 4.268 1.03 7.726-2.683 10.741-3.713 3.015-3.484 4.06-9.752-1.455-6.267-5.516-6.7-7.034-3.823-10.181 2.877-3.147 5.281 1.808 11.159-3.785 5.877-5.593.94-10.55.94-10.55s12.237-25.014 28.588-23.167c16.351 1.848-6.186-2.392-11.792 17.226-2.4 8.4.447 6.42 4.998 9.968 1.394 1.086 6.03 4.401 11.794 8.685l20.677-20.676 1.615-4.766 7.84-4.689 3.151 3.152-4.688 7.84-4.766 1.615-20.224 20.223c12.663 9.547 28.312 22.146 28.312 26.709 0 7.217-3.071 11.526-9.535 9.164-4.693-1.715-18.768-15.192-28.753-25.897l-2.893 2.893-3.151-3.152 3.029-3.029zM63.953 0l54.56 32v64l-54.56 32-54.56-32V32l54.56-32z\"/&gt;&lt;/svg&gt;"},"$:/core/images/plus-button":{"title":"$:/core/images/plus-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-plus-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M64-.333c35.346 0 64 28.654 64 64 0 35.346-28.654 64-64 64-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64zM64 16c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z\"/&gt;&lt;rect width=\"80\" height=\"16\" x=\"24\" y=\"56\" rx=\"8\"/&gt;&lt;rect width=\"16\" height=\"80\" x=\"56\" y=\"24\" rx=\"8\"/&gt;&lt;/svg&gt;"},"$:/core/images/preview-closed":{"title":"$:/core/images/preview-closed","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-preview-closed tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M.088 64a7.144 7.144 0 001.378 5.458C16.246 88.818 39.17 100.414 64 100.414c24.83 0 47.753-11.596 62.534-30.956A7.144 7.144 0 00127.912 64C110.582 78.416 88.304 87.086 64 87.086 39.696 87.086 17.418 78.416.088 64z\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"62\" y=\"96\" rx=\"4\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"78\" y=\"93\" rx=\"4\" transform=\"rotate(-5 80 101)\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"46\" y=\"93\" rx=\"4\" transform=\"rotate(5 48 101)\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"30\" y=\"88\" rx=\"4\" transform=\"rotate(10 32 96)\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"94\" y=\"88\" rx=\"4\" transform=\"rotate(-10 96 96)\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"110\" y=\"80\" rx=\"4\" transform=\"rotate(-20 112 88)\"/&gt;&lt;rect width=\"4\" height=\"16\" x=\"14\" y=\"80\" rx=\"4\" transform=\"rotate(20 16 88)\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/preview-open":{"title":"$:/core/images/preview-open","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-preview-open tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M64.11 99.588c-24.83 0-47.754-11.596-62.534-30.957a7.148 7.148 0 010-8.675C16.356 40.596 39.28 29 64.11 29c24.83 0 47.753 11.596 62.534 30.956a7.148 7.148 0 010 8.675c-14.78 19.36-37.703 30.957-62.534 30.957zm46.104-32.007c1.44-1.524 1.44-3.638 0-5.162C99.326 50.9 82.439 44 64.147 44S28.968 50.9 18.08 62.42c-1.44 1.523-1.44 3.637 0 5.16C28.968 79.1 45.855 86 64.147 86s35.179-6.9 46.067-18.42z\"/&gt;&lt;path d=\"M63.5 88C76.479 88 87 77.479 87 64.5S76.479 41 63.5 41 40 51.521 40 64.5 50.521 88 63.5 88z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/print-button":{"title":"$:/core/images/print-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-print-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M112 71V30.5h-.032c-.035-2-.816-3.99-2.343-5.516L86.998 2.357A7.978 7.978 0 0081 .02V0H24a8 8 0 00-8 8v63h8V8h57v14.5c0 4.422 3.582 8 8 8h15V71h8z\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"36\" rx=\"4\"/&gt;&lt;rect width=\"64\" height=\"8\" x=\"32\" y=\"52\" rx=\"4\"/&gt;&lt;rect width=\"40\" height=\"8\" x=\"32\" y=\"20\" rx=\"4\"/&gt;&lt;path d=\"M0 80.005C0 71.165 7.156 64 16 64h96c8.836 0 16 7.155 16 16.005v31.99c0 8.84-7.156 16.005-16 16.005H16c-8.836 0-16-7.155-16-16.005v-31.99zM104 96a8 8 0 100-16 8 8 0 000 16z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/quote":{"title":"$:/core/images/quote","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-quote tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M51.219 117.713V62.199H27.427c0-8.891 1.683-16.401 5.047-22.53 3.365-6.127 9.613-10.754 18.745-13.878V2c-7.45.961-14.36 3.184-20.728 6.669-6.368 3.484-11.835 7.87-16.401 13.157C9.524 27.113 5.98 33.241 3.456 40.21.933 47.18-.21 54.63.03 62.56v55.153H51.22zm76.781 0V62.199h-23.791c0-8.891 1.682-16.401 5.046-22.53 3.365-6.127 9.613-10.754 18.745-13.878V2c-7.45.961-14.359 3.184-20.727 6.669-6.369 3.484-11.836 7.87-16.402 13.157-4.566 5.287-8.11 11.415-10.634 18.384-2.523 6.97-3.665 14.42-3.424 22.35v55.153H128z\"/&gt;&lt;/svg&gt;"},"$:/core/images/refresh-button":{"title":"$:/core/images/refresh-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-refresh-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M106.369 39.433c10.16 20.879 6.57 46.764-10.771 64.106-21.87 21.87-57.327 21.87-79.196 0-21.87-21.87-21.87-57.326 0-79.196a8 8 0 1111.314 11.314c-15.621 15.62-15.621 40.947 0 56.568 15.62 15.621 40.947 15.621 56.568 0C97.72 78.79 99.6 58.175 89.924 42.73l-6.44 12.264a8 8 0 11-14.166-7.437L84.435 18.76a8 8 0 0110.838-3.345l28.873 15.345a8 8 0 11-7.51 14.129l-10.267-5.457zm-8.222-12.368c-.167-.19-.336-.38-.506-.57l.96-.296-.454.866z\"/&gt;&lt;/svg&gt;"},"$:/core/images/right-arrow":{"title":"$:/core/images/right-arrow","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-right-arrow tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M99.069 64.173c0 2.027-.77 4.054-2.316 5.6l-55.98 55.98a7.92 7.92 0 01-11.196 0c-3.085-3.086-3.092-8.105 0-11.196l50.382-50.382-50.382-50.382a7.92 7.92 0 010-11.195c3.086-3.085 8.104-3.092 11.196 0l55.98 55.98a7.892 7.892 0 012.316 5.595z\"/&gt;&lt;/svg&gt;"},"$:/core/images/rotate-left":{"title":"$:/core/images/rotate-left","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-rotate-left tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"32\" height=\"80\" rx=\"8\"/&gt;&lt;rect width=\"80\" height=\"32\" x=\"48\" y=\"96\" rx=\"8\"/&gt;&lt;path d=\"M61.32 36.65c19.743 2.45 35.023 19.287 35.023 39.693a4 4 0 01-8 0c0-15.663-11.254-28.698-26.117-31.46l3.916 3.916a4 4 0 11-5.657 5.657L49.172 43.142a4 4 0 010-5.657l11.313-11.313a4 4 0 115.657 5.656l-4.821 4.822z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/save-button":{"title":"$:/core/images/save-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-save-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M120.783 34.33c4.641 8.862 7.266 18.948 7.266 29.646 0 35.347-28.653 64-64 64-35.346 0-64-28.653-64-64 0-35.346 28.654-64 64-64 18.808 0 35.72 8.113 47.43 21.03l2.68-2.68c3.13-3.13 8.197-3.132 11.321-.008 3.118 3.118 3.121 8.193-.007 11.32l-4.69 4.691zm-12.058 12.058a47.876 47.876 0 013.324 17.588c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48c14.39 0 27.3 6.332 36.098 16.362L58.941 73.544 41.976 56.578c-3.127-3.127-8.201-3.123-11.32-.005-3.123 3.124-3.119 8.194.006 11.319l22.617 22.617a7.992 7.992 0 005.659 2.347c2.05 0 4.101-.783 5.667-2.349l44.12-44.12z\"/&gt;&lt;/svg&gt;"},"$:/core/images/size":{"title":"$:/core/images/size","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-size tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M92.343 26l-9.171 9.172a4 4 0 105.656 5.656l16-16a4 4 0 000-5.656l-16-16a4 4 0 10-5.656 5.656L92.343 18H22a4 4 0 00-4 4v70.343l-9.172-9.171a4 4 0 10-5.656 5.656l16 16a4 4 0 005.656 0l16-16a4 4 0 10-5.656-5.656L26 92.343V22l-4 4h70.343zM112 52v64l4-4H52a4 4 0 100 8h64a4 4 0 004-4V52a4 4 0 10-8 0z\"/&gt;&lt;/svg&gt;"},"$:/core/images/spiral":{"title":"$:/core/images/spiral","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-spiral tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M64.534 68.348c3.39 0 6.097-2.62 6.476-5.968l-4.755-.538 4.75.583c.377-3.07-1.194-6.054-3.89-7.78-2.757-1.773-6.34-2.01-9.566-.7-3.46 1.403-6.14 4.392-7.35 8.148l-.01.026c-1.3 4.08-.72 8.64 1.58 12.52 2.5 4.2 6.77 7.2 11.76 8.27 5.37 1.15 11.11-.05 15.83-3.31 5.04-3.51 8.46-9.02 9.45-15.3 1.05-6.7-.72-13.63-4.92-19.19l.02.02c-4.42-5.93-11.2-9.82-18.78-10.78-7.96-1.01-16.13 1.31-22.59 6.43-6.81 5.39-11.18 13.41-12.11 22.26-.98 9.27 1.87 18.65 7.93 26.02 6.32 7.69 15.6 12.56 25.74 13.48 10.54.96 21.15-2.42 29.45-9.4l.01-.01c8.58-7.25 13.94-17.78 14.86-29.21.94-11.84-2.96-23.69-10.86-32.9-8.19-9.5-19.95-15.36-32.69-16.27-13.16-.94-26.24 3.49-36.34 12.34l.01-.01c-10.41 9.08-16.78 22.1-17.68 36.15-.93 14.44 4.03 28.77 13.79 39.78 10.03 11.32 24.28 18.2 39.6 19.09 15.73.92 31.31-4.56 43.24-15.234 12.23-10.954 19.61-26.44 20.5-43.074a4.785 4.785 0 00-4.52-5.03 4.778 4.778 0 00-5.03 4.52c-.75 14.1-7 27.2-17.33 36.45-10.03 8.98-23.11 13.58-36.3 12.81-12.79-.75-24.67-6.48-33-15.89-8.07-9.11-12.17-20.94-11.41-32.827.74-11.52 5.942-22.15 14.43-29.54l.01-.01c8.18-7.17 18.74-10.75 29.35-9.998 10.21.726 19.6 5.41 26.11 12.96 6.24 7.273 9.32 16.61 8.573 25.894-.718 8.9-4.88 17.064-11.504 22.66l.01-.007c-6.36 5.342-14.44 7.92-22.425 7.19-7.604-.68-14.52-4.314-19.21-10.027-4.44-5.4-6.517-12.23-5.806-18.94.67-6.3 3.76-11.977 8.54-15.766 4.46-3.54 10.05-5.128 15.44-4.44 5.03.63 9.46 3.18 12.32 7.01l.02.024c2.65 3.5 3.75 7.814 3.1 11.92-.59 3.71-2.58 6.925-5.45 8.924-2.56 1.767-5.61 2.403-8.38 1.81-2.42-.516-4.42-1.92-5.53-3.79-.93-1.56-1.15-3.3-.69-4.75l-4.56-1.446L59.325 65c.36-1.12 1.068-1.905 1.84-2.22.25-.103.48-.14.668-.13.06.006.11.015.14.025.01 0 .01 0-.01-.01a1.047 1.047 0 01-.264-.332c-.15-.29-.23-.678-.18-1.11l-.005.04c.15-1.332 1.38-2.523 3.035-2.523-2.65 0-4.79 2.144-4.79 4.787s2.14 4.785 4.78 4.785z\"/&gt;&lt;/svg&gt;"},"$:/core/images/stamp":{"title":"$:/core/images/stamp","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-stamp tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M49.733 64H16.01C11.584 64 8 67.583 8 72.003V97h112V72.003A8 8 0 00111.99 64H78.267A22.813 22.813 0 0175.5 53.077c0-6.475 2.687-12.324 7.009-16.497A22.818 22.818 0 0087 22.952C87 10.276 76.703 0 64 0S41 10.276 41 22.952c0 5.103 1.669 9.817 4.491 13.628 4.322 4.173 7.009 10.022 7.009 16.497 0 3.954-1.002 7.675-2.767 10.923zM8 104h112v8H8v-8z\"/&gt;&lt;/svg&gt;"},"$:/core/images/star-filled":{"title":"$:/core/images/star-filled","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-star-filled tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M61.836 96.823l37.327 27.287c2.72 1.99 6.379-.69 5.343-3.912L90.29 75.988l-1.26 3.91 37.285-27.345c2.718-1.993 1.32-6.327-2.041-6.33l-46.113-.036 3.3 2.416L67.176 4.416c-1.04-3.221-5.563-3.221-6.604 0L46.29 48.603l3.3-2.416-46.113.036c-3.362.003-4.759 4.337-2.04 6.33L38.72 79.898l-1.26-3.91-14.216 44.21c-1.036 3.223 2.622 5.901 5.343 3.912l37.326-27.287h-4.078z\"/&gt;&lt;/svg&gt;"},"$:/core/images/storyview-classic":{"title":"$:/core/images/storyview-classic","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-storyview-classic tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M8.007 0A8.01 8.01 0 000 8.007v111.986A8.01 8.01 0 008.007 128h111.986a8.01 8.01 0 008.007-8.007V8.007A8.01 8.01 0 00119.993 0H8.007zm15.992 16C19.581 16 16 19.578 16 23.992v16.016C16 44.422 19.588 48 24 48h80c4.419 0 8-3.578 8-7.992V23.992c0-4.414-3.588-7.992-8-7.992H24zm0 48C19.581 64 16 67.59 16 72c0 4.418 3.588 8 8 8h80c4.419 0 8-3.59 8-8 0-4.418-3.588-8-8-8H24zm0 32C19.581 96 16 99.59 16 104c0 4.418 3.588 8 8 8h80c4.419 0 8-3.59 8-8 0-4.418-3.588-8-8-8H24z\"/&gt;&lt;/svg&gt;"},"$:/core/images/storyview-pop":{"title":"$:/core/images/storyview-pop","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-storyview-pop tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M8.007 0A8.01 8.01 0 000 8.007v111.986A8.01 8.01 0 008.007 128h111.986a8.01 8.01 0 008.007-8.007V8.007A8.01 8.01 0 00119.993 0H8.007zm15.992 16C19.581 16 16 19.578 16 23.992v16.016C16 44.422 19.588 48 24 48h80c4.419 0 8-3.578 8-7.992V23.992c0-4.414-3.588-7.992-8-7.992H24zm-7.99 40C11.587 56 8 59.578 8 63.992v16.016C8 84.422 11.584 88 16.01 88h95.98c4.424 0 8.01-3.578 8.01-7.992V63.992c0-4.414-3.584-7.992-8.01-7.992H16.01zM24 96C19.581 96 16 99.59 16 104c0 4.418 3.588 8 8 8h80c4.419 0 8-3.59 8-8 0-4.418-3.588-8-8-8H24zm0-32C19.581 64 16 67.59 16 72c0 4.418 3.588 8 8 8h80c4.419 0 8-3.59 8-8 0-4.418-3.588-8-8-8H24z\"/&gt;&lt;/svg&gt;"},"$:/core/images/storyview-zoomin":{"title":"$:/core/images/storyview-zoomin","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-storyview-zoomin tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M8.007 0A8.01 8.01 0 000 8.007v111.986A8.01 8.01 0 008.007 128h111.986a8.01 8.01 0 008.007-8.007V8.007A8.01 8.01 0 00119.993 0H8.007zm15.992 16A8 8 0 0016 24.009V71.99C16 76.414 19.588 80 24 80h80a8 8 0 008-8.009V24.01c0-4.423-3.588-8.009-8-8.009H24z\"/&gt;&lt;/svg&gt;"},"$:/core/images/strikethrough":{"title":"$:/core/images/strikethrough","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-strikethrough tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M92.794 38.726h15.422c-.229-6.74-1.514-12.538-3.856-17.393-2.342-4.855-5.54-8.881-9.596-12.08-4.055-3.199-8.767-5.54-14.136-7.025C75.258.743 69.433 0 63.15 0a62.76 62.76 0 00-16.364 2.142C41.474 3.57 36.733 5.74 32.564 8.653c-4.17 2.913-7.511 6.626-10.025 11.138-2.513 4.512-3.77 9.853-3.77 16.022 0 5.597 1.115 10.252 3.342 13.965 2.228 3.712 5.198 6.74 8.91 9.081 3.713 2.342 7.911 4.227 12.595 5.655a194.641 194.641 0 0014.308 3.77c4.855 1.085 9.624 2.142 14.308 3.17 4.683 1.028 8.881 2.37 12.594 4.027 3.713 1.656 6.683 3.798 8.91 6.425 2.228 2.628 3.342 6.055 3.342 10.281 0 4.456-.914 8.111-2.742 10.967a19.953 19.953 0 01-7.197 6.768c-2.97 1.657-6.311 2.828-10.024 3.513a60.771 60.771 0 01-11.052 1.028c-4.57 0-9.025-.571-13.366-1.713-4.34-1.143-8.139-2.913-11.394-5.312-3.256-2.4-5.884-5.455-7.883-9.168-1.999-3.712-2.998-8.139-2.998-13.28H15c0 7.426 1.342 13.852 4.027 19.278 2.684 5.426 6.34 9.881 10.966 13.365 4.627 3.484 9.996 6.083 16.107 7.797 6.112 1.713 12.595 2.57 19.449 2.57 5.597 0 11.223-.657 16.878-1.97 5.655-1.314 10.767-3.428 15.336-6.34 4.57-2.914 8.31-6.683 11.224-11.31 2.913-4.626 4.37-10.195 4.37-16.707 0-6.054-1.115-11.08-3.342-15.079-2.228-3.998-5.198-7.31-8.91-9.938-3.713-2.627-7.911-4.712-12.595-6.254a170.83 170.83 0 00-14.308-4.027 549.669 549.669 0 00-14.308-3.17c-4.683-.971-8.881-2.2-12.594-3.684-3.713-1.485-6.683-3.399-8.91-5.74-2.228-2.342-3.342-5.398-3.342-9.168 0-3.998.771-7.34 2.313-10.024 1.543-2.685 3.599-4.826 6.17-6.426 2.57-1.599 5.51-2.741 8.824-3.427a49.767 49.767 0 0110.11-1.028c8.453 0 15.393 1.97 20.819 5.912 5.426 3.94 8.596 10.31 9.51 19.106z\"/&gt;&lt;path d=\"M5 54h118v16H5z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/subscript":{"title":"$:/core/images/subscript","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-subscript tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M2.272 16h19.91l21.649 33.675L66.414 16h18.708L53.585 61.969l33.809 49.443H67.082L43.296 74.93l-24.187 36.48H0L33.808 61.97 2.272 16zM127.91 128.412H85.328c.059-5.168 1.306-9.681 3.741-13.542 2.435-3.86 5.761-7.216 9.978-10.066a112.388 112.388 0 016.325-4.321 50.09 50.09 0 006.058-4.499c1.841-1.603 3.356-3.34 4.543-5.211 1.188-1.871 1.812-4.024 1.871-6.46 0-1.128-.133-2.33-.4-3.607a9.545 9.545 0 00-1.56-3.564c-.772-1.098-1.84-2.019-3.207-2.761-1.366-.743-3.148-1.114-5.345-1.114-2.02 0-3.697.4-5.033 1.203-1.337.801-2.406 1.9-3.208 3.296-.801 1.396-1.395 3.044-1.781 4.944-.386 1.9-.609 3.95-.668 6.147H86.486c0-3.445.46-6.637 1.38-9.577.921-2.94 2.302-5.478 4.143-7.617 1.841-2.138 4.083-3.815 6.726-5.033 2.643-1.217 5.716-1.826 9.22-1.826 3.802 0 6.979.623 9.533 1.87 2.554 1.248 4.617 2.822 6.191 4.722 1.574 1.9 2.688 3.965 3.341 6.192.653 2.227.98 4.35.98 6.37 0 2.494-.386 4.75-1.158 6.77a21.803 21.803 0 01-3.118 5.568 31.516 31.516 0 01-4.454 4.677 66.788 66.788 0 01-5.167 4.009 139.198 139.198 0 01-5.346 3.563 79.237 79.237 0 00-4.944 3.386c-1.514 1.128-2.836 2.3-3.964 3.518-1.129 1.218-1.9 2.51-2.317 3.876h30.379v9.087z\"/&gt;&lt;/svg&gt;"},"$:/core/images/superscript":{"title":"$:/core/images/superscript","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-superscript tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M2.272 16h19.91l21.649 33.675L66.414 16h18.708L53.585 61.969l33.809 49.443H67.082L43.296 74.93l-24.187 36.48H0L33.808 61.97 2.272 16zM127.91 63.412H85.328c.059-5.168 1.306-9.681 3.741-13.542 2.435-3.86 5.761-7.216 9.978-10.066a112.388 112.388 0 016.325-4.321 50.09 50.09 0 006.058-4.499c1.841-1.603 3.356-3.34 4.543-5.211 1.188-1.871 1.812-4.024 1.871-6.46 0-1.128-.133-2.33-.4-3.607a9.545 9.545 0 00-1.56-3.564c-.772-1.098-1.84-2.019-3.207-2.761-1.366-.743-3.148-1.114-5.345-1.114-2.02 0-3.697.4-5.033 1.203-1.337.801-2.406 1.9-3.208 3.296-.801 1.396-1.395 3.044-1.781 4.944-.386 1.9-.609 3.95-.668 6.147H86.486c0-3.445.46-6.637 1.38-9.577.921-2.94 2.302-5.478 4.143-7.617 1.841-2.138 4.083-3.815 6.726-5.033 2.643-1.217 5.716-1.826 9.22-1.826 3.802 0 6.979.623 9.533 1.87 2.554 1.248 4.617 2.822 6.191 4.722 1.574 1.9 2.688 3.965 3.341 6.192.653 2.227.98 4.35.98 6.37 0 2.494-.386 4.75-1.158 6.77a21.803 21.803 0 01-3.118 5.568 31.516 31.516 0 01-4.454 4.677 66.788 66.788 0 01-5.167 4.009 139.198 139.198 0 01-5.346 3.563 79.237 79.237 0 00-4.944 3.386c-1.514 1.128-2.836 2.3-3.964 3.518-1.129 1.218-1.9 2.51-2.317 3.876h30.379v9.087z\"/&gt;&lt;/svg&gt;"},"$:/core/images/tag-button":{"title":"$:/core/images/tag-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-tag-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M18.164 47.66l.004 4.105c.003 3.823 2.19 9.097 4.885 11.792l61.85 61.85c2.697 2.697 7.068 2.69 9.769-.01L125.767 94.3a6.903 6.903 0 00.01-9.77L63.928 22.683c-2.697-2.697-7.976-4.88-11.796-4.881l-27.076-.007a6.902 6.902 0 00-6.91 6.91l.008 9.96.287.033c3.73.411 8.489-.044 13.365-1.153a9.702 9.702 0 0111.14-3.662l.291-.13.128.285a9.7 9.7 0 013.3 2.17c3.796 3.796 3.801 9.945.012 13.734-3.618 3.618-9.386 3.777-13.204.482-5.365 1.122-10.674 1.596-15.309 1.237z\"/&gt;&lt;path d=\"M47.633 39.532l.023.051c-9.689 4.356-21.584 6.799-30.396 5.828C5.273 44.089-1.028 36.43 2.443 24.078 5.562 12.976 14.3 4.361 24.047 1.548c10.68-3.083 19.749 1.968 19.749 13.225h-8.623c0-4.859-3.078-6.573-8.735-4.94-6.91 1.995-13.392 8.383-15.694 16.577-1.915 6.818.417 9.653 7.46 10.43 7.126.785 17.531-1.352 25.917-5.121l.027.06.036-.017c1.76-.758 6.266 6.549 3.524 7.74a2.8 2.8 0 01-.075.03z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/theme-button":{"title":"$:/core/images/theme-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-theme-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M55.854 66.945a122.626 122.626 0 01-3.9-4.819c-11.064-14.548-16.645-6.888-22.96 0-6.315 6.888 1.664 12.47-4.33 17.335-5.993 4.866-5.623 6.552-15.737-2.35-10.115-8.9-10.815-11.351-6.172-16.43 4.644-5.08 8.524 2.918 18.01-6.108 9.485-9.026 1.517-17.026 1.517-17.026S42.03-2.824 68.42.157c26.39 2.982-9.984-3.86-19.031 27.801-3.874 13.556.72 10.362 8.066 16.087 1.707 1.33 6.428 4.732 12.671 9.318-6.129 5.879-11.157 10.669-14.273 13.582zm11.641 12.947c16.013 17.036 37.742 37.726 45.117 40.42 10.432 3.813 15.388-3.141 15.388-14.79 0-7.151-23.83-26.542-43.924-41.769-7.408 7.156-13.376 12.953-16.58 16.139z\"/&gt;&lt;path d=\"M11.069 109.828L46.31 74.587a3.56 3.56 0 115.037-5.032l15.098 15.098a3.56 3.56 0 11-5.032 5.037l-35.24 35.241c-4.171 4.17-10.933 4.17-15.104 0-4.17-4.17-4.17-10.933 0-15.103zM124.344 6.622l5.034 5.034-7.49 12.524-7.613 2.58L61.413 79.62l-5.034-5.034 52.861-52.862 2.58-7.614 12.524-7.49z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/timestamp-off":{"title":"$:/core/images/timestamp-off","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-timestamp-off tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M58.25 11C26.08 11 0 37.082 0 69.25s26.08 58.25 58.25 58.25c32.175 0 58.25-26.082 58.25-58.25S90.425 11 58.25 11zm0 100.5C34.914 111.5 16 92.586 16 69.25 16 45.92 34.914 27 58.25 27s42.25 18.92 42.25 42.25c0 23.336-18.914 42.25-42.25 42.25zM49.704 10a5 5 0 010-10H66.69a5 5 0 015 5c.006 2.757-2.238 5-5 5H49.705z\"/&gt;&lt;path d=\"M58.25 35.88c-18.777 0-33.998 15.224-33.998 33.998 0 18.773 15.22 34.002 33.998 34.002 18.784 0 34.002-15.23 34.002-34.002 0-18.774-15.218-33.998-34.002-33.998zm-3.03 50.123H44.196v-34H55.22v34zm16.976 0H61.17v-34h11.025v34z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/timestamp-on":{"title":"$:/core/images/timestamp-on","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-timestamp-on tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;path d=\"M58.25 11C26.08 11 0 37.082 0 69.25s26.08 58.25 58.25 58.25c32.175 0 58.25-26.082 58.25-58.25S90.425 11 58.25 11zm0 100.5C34.914 111.5 16 92.586 16 69.25 16 45.92 34.914 27 58.25 27s42.25 18.92 42.25 42.25c0 23.336-18.914 42.25-42.25 42.25zM49.704 10a5 5 0 010-10H66.69a5 5 0 015 5c.006 2.757-2.238 5-5 5H49.705z\"/&gt;&lt;path d=\"M13.41 27.178a5.005 5.005 0 01-7.045-.613 5.008 5.008 0 01.616-7.047l9.95-8.348a5 5 0 016.429 7.661l-9.95 8.348zm89.573 0a5.005 5.005 0 007.045-.613 5.008 5.008 0 00-.616-7.047l-9.95-8.348a5 5 0 00-6.428 7.661l9.95 8.348zM65.097 71.072c0 3.826-3.09 6.928-6.897 6.928-3.804.006-6.9-3.102-6.903-6.928 0 0 4.76-39.072 6.903-39.072s6.897 39.072 6.897 39.072z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/tip":{"title":"$:/core/images/tip","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-tip tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M64 128.242c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64-35.346 0-64 28.654-64 64 0 35.346 28.654 64 64 64zm11.936-36.789c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349C54.33 94.05 58.824 95.82 64 95.82c5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.456c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zM64.3 24.242c11.618 0 23.699 7.82 23.699 24.2S75.92 71.754 75.92 83.576c0 5.873-5.868 9.26-11.92 9.26s-12.027-3.006-12.027-9.26C51.973 71.147 40 65.47 40 48.442s12.683-24.2 24.301-24.2z\"/&gt;&lt;/svg&gt;"},"$:/core/images/transcludify":{"title":"$:/core/images/transcludify","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-transcludify-button tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M0 59.482c.591 0 1.36-.089 2.306-.266a10.417 10.417 0 002.75-.932 6.762 6.762 0 002.306-1.907c.651-.828.976-1.863.976-3.104V35.709c0-2.01.414-3.74 1.242-5.19.828-1.448 1.833-2.66 3.016-3.636s2.425-1.7 3.726-2.173c1.3-.473 2.424-.71 3.37-.71h8.073v7.451h-4.88c-1.241 0-2.232.207-2.97.621-.74.414-1.302.932-1.686 1.552a4.909 4.909 0 00-.71 1.996c-.089.71-.133 1.39-.133 2.04v16.677c0 1.715-.325 3.134-.976 4.258-.65 1.123-1.434 2.025-2.35 2.705-.917.68-1.863 1.168-2.839 1.464-.976.296-1.818.473-2.528.532v.178c.71.059 1.552.207 2.528.443.976.237 1.922.68 2.839 1.33.916.651 1.7 1.583 2.35 2.795.65 1.212.976 2.853.976 4.923v16.144c0 .65.044 1.33.133 2.04.089.71.325 1.375.71 1.996.384.621.946 1.139 1.685 1.553.74.414 1.73.62 2.972.62h4.879v7.452h-8.073c-.946 0-2.07-.237-3.37-.71-1.301-.473-2.543-1.197-3.726-2.173-1.183-.976-2.188-2.188-3.016-3.637-.828-1.449-1.242-3.179-1.242-5.19V74.119c0-1.42-.325-2.572-.976-3.46-.65-.886-1.419-1.581-2.306-2.084a8.868 8.868 0 00-2.75-1.02C1.36 67.377.591 67.288 0 67.288v-7.806zm24.66 0c.591 0 1.36-.089 2.306-.266a10.417 10.417 0 002.75-.932 6.762 6.762 0 002.306-1.907c.65-.828.976-1.863.976-3.104V35.709c0-2.01.414-3.74 1.242-5.19.828-1.448 1.833-2.66 3.016-3.636s2.425-1.7 3.726-2.173c1.3-.473 2.424-.71 3.37-.71h8.073v7.451h-4.88c-1.241 0-2.232.207-2.97.621-.74.414-1.302.932-1.686 1.552a4.909 4.909 0 00-.71 1.996c-.089.71-.133 1.39-.133 2.04v16.677c0 1.715-.325 3.134-.976 4.258-.65 1.123-1.434 2.025-2.35 2.705-.917.68-1.863 1.168-2.839 1.464-.976.296-1.818.473-2.528.532v.178c.71.059 1.552.207 2.528.443.976.237 1.922.68 2.839 1.33.916.651 1.7 1.583 2.35 2.795.65 1.212.976 2.853.976 4.923v16.144c0 .65.044 1.33.133 2.04.089.71.325 1.375.71 1.996.384.621.946 1.139 1.685 1.553.74.414 1.73.62 2.972.62h4.879v7.452h-8.073c-.946 0-2.07-.237-3.37-.71-1.301-.473-2.543-1.197-3.726-2.173-1.183-.976-2.188-2.188-3.016-3.637-.828-1.449-1.242-3.179-1.242-5.19V74.119c0-1.42-.325-2.572-.976-3.46-.65-.886-1.419-1.581-2.306-2.084a8.868 8.868 0 00-2.75-1.02c-.946-.177-1.715-.266-2.306-.266v-7.806zm43.965-3.538L80.6 52.041l2.306 7.097-12.063 3.903 7.628 10.378-6.12 4.435-7.63-10.467-7.45 10.201-5.943-4.524 7.628-10.023-12.152-4.17 2.306-7.096 12.064 4.17V43.347h7.451v12.596zm34.425 11.344c-.65 0-1.449.089-2.395.266-.946.177-1.863.488-2.75.931a6.356 6.356 0 00-2.262 1.908c-.62.828-.931 1.862-.931 3.104v17.564c0 2.01-.414 3.74-1.242 5.189-.828 1.449-1.833 2.661-3.016 3.637s-2.425 1.7-3.726 2.173c-1.3.473-2.424.71-3.37.71h-8.073v-7.451h4.88c1.241 0 2.232-.207 2.97-.621.74-.414 1.302-.932 1.686-1.553a4.9 4.9 0 00.71-1.995c.089-.71.133-1.39.133-2.04V72.432c0-1.715.325-3.134.976-4.258.65-1.124 1.434-2.01 2.35-2.661.917-.65 1.863-1.124 2.839-1.42.976-.295 1.818-.502 2.528-.62v-.178c-.71-.059-1.552-.207-2.528-.443-.976-.237-1.922-.68-2.839-1.33-.916-.651-1.7-1.583-2.35-2.795-.65-1.212-.976-2.853-.976-4.923V37.66c0-.651-.044-1.331-.133-2.04a4.909 4.909 0 00-.71-1.997c-.384-.62-.946-1.138-1.685-1.552-.74-.414-1.73-.62-2.972-.62h-4.879V24h8.073c.946 0 2.07.237 3.37.71 1.301.473 2.543 1.197 3.726 2.173 1.183.976 2.188 2.188 3.016 3.637.828 1.449 1.242 3.178 1.242 5.189v16.943c0 1.419.31 2.572.931 3.46a6.897 6.897 0 002.262 2.084 8.868 8.868 0 002.75 1.02c.946.177 1.745.266 2.395.266v7.806zm24.66 0c-.65 0-1.449.089-2.395.266-.946.177-1.863.488-2.75.931a6.356 6.356 0 00-2.262 1.908c-.62.828-.931 1.862-.931 3.104v17.564c0 2.01-.414 3.74-1.242 5.189-.828 1.449-1.833 2.661-3.016 3.637s-2.425 1.7-3.726 2.173c-1.3.473-2.424.71-3.37.71h-8.073v-7.451h4.88c1.241 0 2.232-.207 2.97-.621.74-.414 1.302-.932 1.686-1.553a4.9 4.9 0 00.71-1.995c.089-.71.133-1.39.133-2.04V72.432c0-1.715.325-3.134.976-4.258.65-1.124 1.434-2.01 2.35-2.661.917-.65 1.863-1.124 2.839-1.42.976-.295 1.818-.502 2.528-.62v-.178c-.71-.059-1.552-.207-2.528-.443-.976-.237-1.922-.68-2.839-1.33-.916-.651-1.7-1.583-2.35-2.795-.65-1.212-.976-2.853-.976-4.923V37.66c0-.651-.044-1.331-.133-2.04a4.909 4.909 0 00-.71-1.997c-.384-.62-.946-1.138-1.685-1.552-.74-.414-1.73-.62-2.972-.62h-4.879V24h8.073c.946 0 2.07.237 3.37.71 1.301.473 2.543 1.197 3.726 2.173 1.183.976 2.188 2.188 3.016 3.637.828 1.449 1.242 3.178 1.242 5.189v16.943c0 1.419.31 2.572.931 3.46a6.897 6.897 0 002.262 2.084 8.868 8.868 0 002.75 1.02c.946.177 1.745.266 2.395.266v7.806z\"/&gt;&lt;/svg&gt;"},"$:/core/images/twitter":{"title":"$:/core/images/twitter","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-twitter tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M41.626 115.803A73.376 73.376 0 012 104.235c2.022.238 4.08.36 6.166.36 12.111 0 23.258-4.117 32.105-11.023-11.312-.208-20.859-7.653-24.148-17.883a25.98 25.98 0 0011.674-.441C15.971 72.881 7.061 62.474 7.061 49.997c0-.108 0-.216.002-.323a25.824 25.824 0 0011.709 3.22c-6.936-4.617-11.5-12.5-11.5-21.433 0-4.719 1.274-9.142 3.5-12.945 12.75 15.579 31.797 25.83 53.281 26.904-.44-1.884-.67-3.85-.67-5.868 0-14.22 11.575-25.75 25.852-25.75a25.865 25.865 0 0118.869 8.132 51.892 51.892 0 0016.415-6.248c-1.93 6.012-6.029 11.059-11.366 14.246A51.844 51.844 0 00128 25.878a52.428 52.428 0 01-12.9 13.33c.05 1.104.075 2.214.075 3.33 0 34.028-26 73.265-73.549 73.265\"/&gt;&lt;/svg&gt;"},"$:/core/images/underline":{"title":"$:/core/images/underline","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-underline tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M7 117.421h114.248V128H7v-10.579zm97.871-18.525V0h-16.26v55.856c0 4.463-.605 8.576-1.816 12.338-1.212 3.762-3.03 7.046-5.452 9.851-2.423 2.806-5.452 4.974-9.086 6.504-3.635 1.53-7.939 2.296-12.912 2.296-6.25 0-11.159-1.786-14.73-5.356-3.57-3.571-5.356-8.417-5.356-14.538V0H23v65.038c0 5.356.542 10.234 1.626 14.633 1.084 4.4 2.965 8.194 5.643 11.382 2.678 3.188 6.185 5.643 10.52 7.365 4.337 1.721 9.756 2.582 16.26 2.582 7.27 0 13.582-1.435 18.938-4.304 5.356-2.87 9.755-7.365 13.199-13.486h.382v15.686h15.303z\"/&gt;&lt;/svg&gt;"},"$:/core/images/unfold-all-button":{"title":"$:/core/images/unfold-all-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-unfold-all tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"128\" height=\"16\" rx=\"8\"/&gt;&lt;rect width=\"128\" height=\"16\" y=\"64\" rx=\"8\"/&gt;&lt;path d=\"M63.945 60.624c-2.05 0-4.101-.78-5.666-2.345L35.662 35.662c-3.125-3.125-3.13-8.195-.005-11.319 3.118-3.118 8.192-3.122 11.319.005L63.94 41.314l16.966-16.966c3.124-3.124 8.194-3.129 11.318-.005 3.118 3.118 3.122 8.192-.005 11.319L69.603 58.279a7.986 7.986 0 01-5.663 2.346zM64.004 124.565c-2.05 0-4.102-.78-5.666-2.345L35.721 99.603c-3.125-3.125-3.13-8.195-.005-11.319 3.118-3.118 8.191-3.122 11.318.005L64 105.255l16.966-16.966c3.124-3.124 8.194-3.129 11.318-.005 3.118 3.118 3.122 8.192-.005 11.319L69.662 122.22a7.986 7.986 0 01-5.663 2.346z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/unfold-button":{"title":"$:/core/images/unfold-button","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-unfold tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;g fill-rule=\"evenodd\"&gt;&lt;rect width=\"128\" height=\"16\" rx=\"8\"/&gt;&lt;path d=\"M63.945 63.624c-2.05 0-4.101-.78-5.666-2.345L35.662 38.662c-3.125-3.125-3.13-8.195-.005-11.319 3.118-3.118 8.192-3.122 11.319.005L63.94 44.314l16.966-16.966c3.124-3.124 8.194-3.129 11.318-.005 3.118 3.118 3.122 8.192-.005 11.319L69.603 61.279a7.986 7.986 0 01-5.663 2.346zM64.004 105.682c-2.05.001-4.102-.78-5.666-2.344L35.721 80.721c-3.125-3.125-3.13-8.195-.005-11.319 3.118-3.118 8.191-3.122 11.318.005L64 86.373l16.966-16.966c3.124-3.125 8.194-3.13 11.318-.005 3.118 3.118 3.122 8.192-.005 11.319l-22.617 22.617a7.986 7.986 0 01-5.663 2.346z\"/&gt;&lt;/g&gt;&lt;/svg&gt;"},"$:/core/images/unlocked-padlock":{"title":"$:/core/images/unlocked-padlock","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-unlocked-padlock tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M48.627 64H105v32.01C105 113.674 90.674 128 73.001 128H56C38.318 128 24 113.677 24 96.01V64h6.136c-10.455-12.651-27.364-35.788-4.3-55.142 24.636-20.672 45.835 4.353 55.777 16.201 9.943 11.85-2.676 22.437-12.457 9.892-9.78-12.545-21.167-24.146-33.207-14.043-12.041 10.104-1.757 22.36 8.813 34.958 2.467 2.94 3.641 5.732 3.865 8.134zm19.105 28.364A8.503 8.503 0 0064.5 76a8.5 8.5 0 00-3.498 16.25l-5.095 22.77H72.8l-5.07-22.656z\"/&gt;&lt;/svg&gt;"},"$:/core/images/up-arrow":{"title":"$:/core/images/up-arrow","created":"20150316000544368","modified":"20150316000831867","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-up-arrow tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path d=\"M63.892.281c2.027 0 4.054.77 5.6 2.316l55.98 55.98a7.92 7.92 0 010 11.196c-3.086 3.085-8.104 3.092-11.196 0L63.894 19.393 13.513 69.774a7.92 7.92 0 01-11.196 0c-3.085-3.086-3.092-8.105 0-11.196l55.98-55.98A7.892 7.892 0 0163.893.28z\"/&gt;&lt;/svg&gt;"},"$:/core/images/video":{"title":"$:/core/images/video","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-video tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M64 12c-34.91 0-55.273 2.917-58.182 5.833C2.91 20.75 0 41.167 0 64.5c0 23.333 2.91 43.75 5.818 46.667C8.728 114.083 29.091 117 64 117c34.91 0 55.273-2.917 58.182-5.833C125.09 108.25 128 87.833 128 64.5c0-23.333-2.91-43.75-5.818-46.667C119.272 14.917 98.909 12 64 12zm-9.084 32.618c-3.813-2.542-6.905-.879-6.905 3.698v31.368c0 4.585 3.099 6.235 6.905 3.698l22.168-14.779c3.813-2.542 3.806-6.669 0-9.206L54.916 44.618z\"/&gt;&lt;/svg&gt;"},"$:/core/images/warning":{"title":"$:/core/images/warning","tags":"$:/tags/Image","text":"&lt;svg width=\"22pt\" height=\"22pt\" class=\"tc-image-warning tc-image-button\" viewBox=\"0 0 128 128\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z\"/&gt;&lt;/svg&gt;"},"$:/language/Buttons/AdvancedSearch/Caption":{"title":"$:/language/Buttons/AdvancedSearch/Caption","text":"advanced search"},"$:/language/Buttons/AdvancedSearch/Hint":{"title":"$:/language/Buttons/AdvancedSearch/Hint","text":"Advanced search"},"$:/language/Buttons/Cancel/Caption":{"title":"$:/language/Buttons/Cancel/Caption","text":"cancel"},"$:/language/Buttons/Cancel/Hint":{"title":"$:/language/Buttons/Cancel/Hint","text":"Discard changes to this tiddler"},"$:/language/Buttons/Clone/Caption":{"title":"$:/language/Buttons/Clone/Caption","text":"clone"},"$:/language/Buttons/Clone/Hint":{"title":"$:/language/Buttons/Clone/Hint","text":"Clone this tiddler"},"$:/language/Buttons/Close/Caption":{"title":"$:/language/Buttons/Close/Caption","text":"close"},"$:/language/Buttons/Close/Hint":{"title":"$:/language/Buttons/Close/Hint","text":"Close this tiddler"},"$:/language/Buttons/CloseAll/Caption":{"title":"$:/language/Buttons/CloseAll/Caption","text":"close all"},"$:/language/Buttons/CloseAll/Hint":{"title":"$:/language/Buttons/CloseAll/Hint","text":"Close all tiddlers"},"$:/language/Buttons/CloseOthers/Caption":{"title":"$:/language/Buttons/CloseOthers/Caption","text":"close others"},"$:/language/Buttons/CloseOthers/Hint":{"title":"$:/language/Buttons/CloseOthers/Hint","text":"Close other tiddlers"},"$:/language/Buttons/ControlPanel/Caption":{"title":"$:/language/Buttons/ControlPanel/Caption","text":"control panel"},"$:/language/Buttons/ControlPanel/Hint":{"title":"$:/language/Buttons/ControlPanel/Hint","text":"Open control panel"},"$:/language/Buttons/CopyToClipboard/Caption":{"title":"$:/language/Buttons/CopyToClipboard/Caption","text":"copy to clipboard"},"$:/language/Buttons/CopyToClipboard/Hint":{"title":"$:/language/Buttons/CopyToClipboard/Hint","text":"Copy this text to the clipboard"},"$:/language/Buttons/Delete/Caption":{"title":"$:/language/Buttons/Delete/Caption","text":"delete"},"$:/language/Buttons/Delete/Hint":{"title":"$:/language/Buttons/Delete/Hint","text":"Delete this tiddler"},"$:/language/Buttons/Edit/Caption":{"title":"$:/language/Buttons/Edit/Caption","text":"edit"},"$:/language/Buttons/Edit/Hint":{"title":"$:/language/Buttons/Edit/Hint","text":"Edit this tiddler"},"$:/language/Buttons/Encryption/Caption":{"title":"$:/language/Buttons/Encryption/Caption","text":"encryption"},"$:/language/Buttons/Encryption/Hint":{"title":"$:/language/Buttons/Encryption/Hint","text":"Set or clear a password for saving this wiki"},"$:/language/Buttons/Encryption/ClearPassword/Caption":{"title":"$:/language/Buttons/Encryption/ClearPassword/Caption","text":"clear password"},"$:/language/Buttons/Encryption/ClearPassword/Hint":{"title":"$:/language/Buttons/Encryption/ClearPassword/Hint","text":"Clear the password and save this wiki without encryption"},"$:/language/Buttons/Encryption/SetPassword/Caption":{"title":"$:/language/Buttons/Encryption/SetPassword/Caption","text":"set password"},"$:/language/Buttons/Encryption/SetPassword/Hint":{"title":"$:/language/Buttons/Encryption/SetPassword/Hint","text":"Set a password for saving this wiki with encryption"},"$:/language/Buttons/ExportPage/Caption":{"title":"$:/language/Buttons/ExportPage/Caption","text":"export all"},"$:/language/Buttons/ExportPage/Hint":{"title":"$:/language/Buttons/ExportPage/Hint","text":"Export all tiddlers"},"$:/language/Buttons/ExportTiddler/Caption":{"title":"$:/language/Buttons/ExportTiddler/Caption","text":"export tiddler"},"$:/language/Buttons/ExportTiddler/Hint":{"title":"$:/language/Buttons/ExportTiddler/Hint","text":"Export tiddler"},"$:/language/Buttons/ExportTiddlers/Caption":{"title":"$:/language/Buttons/ExportTiddlers/Caption","text":"export tiddlers"},"$:/language/Buttons/ExportTiddlers/Hint":{"title":"$:/language/Buttons/ExportTiddlers/Hint","text":"Export tiddlers"},"$:/language/Buttons/SidebarSearch/Hint":{"title":"$:/language/Buttons/SidebarSearch/Hint","text":"Select the sidebar search field"},"$:/language/Buttons/Fold/Caption":{"title":"$:/language/Buttons/Fold/Caption","text":"fold tiddler"},"$:/language/Buttons/Fold/Hint":{"title":"$:/language/Buttons/Fold/Hint","text":"Fold the body of this tiddler"},"$:/language/Buttons/Fold/FoldBar/Caption":{"title":"$:/language/Buttons/Fold/FoldBar/Caption","text":"fold-bar"},"$:/language/Buttons/Fold/FoldBar/Hint":{"title":"$:/language/Buttons/Fold/FoldBar/Hint","text":"Optional bars to fold and unfold tiddlers"},"$:/language/Buttons/Unfold/Caption":{"title":"$:/language/Buttons/Unfold/Caption","text":"unfold tiddler"},"$:/language/Buttons/Unfold/Hint":{"title":"$:/language/Buttons/Unfold/Hint","text":"Unfold the body of this tiddler"},"$:/language/Buttons/FoldOthers/Caption":{"title":"$:/language/Buttons/FoldOthers/Caption","text":"fold other tiddlers"},"$:/language/Buttons/FoldOthers/Hint":{"title":"$:/language/Buttons/FoldOthers/Hint","text":"Fold the bodies of other opened tiddlers"},"$:/language/Buttons/FoldAll/Caption":{"title":"$:/language/Buttons/FoldAll/Caption","text":"fold all tiddlers"},"$:/language/Buttons/FoldAll/Hint":{"title":"$:/language/Buttons/FoldAll/Hint","text":"Fold the bodies of all opened tiddlers"},"$:/language/Buttons/UnfoldAll/Caption":{"title":"$:/language/Buttons/UnfoldAll/Caption","text":"unfold all tiddlers"},"$:/language/Buttons/UnfoldAll/Hint":{"title":"$:/language/Buttons/UnfoldAll/Hint","text":"Unfold the bodies of all opened tiddlers"},"$:/language/Buttons/FullScreen/Caption":{"title":"$:/language/Buttons/FullScreen/Caption","text":"full-screen"},"$:/language/Buttons/FullScreen/Hint":{"title":"$:/language/Buttons/FullScreen/Hint","text":"Enter or leave full-screen mode"},"$:/language/Buttons/Help/Caption":{"title":"$:/language/Buttons/Help/Caption","text":"help"},"$:/language/Buttons/Help/Hint":{"title":"$:/language/Buttons/Help/Hint","text":"Show help panel"},"$:/language/Buttons/Import/Caption":{"title":"$:/language/Buttons/Import/Caption","text":"import"},"$:/language/Buttons/Import/Hint":{"title":"$:/language/Buttons/Import/Hint","text":"Import many types of file including text, image, TiddlyWiki or JSON"},"$:/language/Buttons/Info/Caption":{"title":"$:/language/Buttons/Info/Caption","text":"info"},"$:/language/Buttons/Info/Hint":{"title":"$:/language/Buttons/Info/Hint","text":"Show information for this tiddler"},"$:/language/Buttons/Home/Caption":{"title":"$:/language/Buttons/Home/Caption","text":"home"},"$:/language/Buttons/Home/Hint":{"title":"$:/language/Buttons/Home/Hint","text":"Open the default tiddlers"},"$:/language/Buttons/Language/Caption":{"title":"$:/language/Buttons/Language/Caption","text":"language"},"$:/language/Buttons/Language/Hint":{"title":"$:/language/Buttons/Language/Hint","text":"Choose the user interface language"},"$:/language/Buttons/Manager/Caption":{"title":"$:/language/Buttons/Manager/Caption","text":"tiddler manager"},"$:/language/Buttons/Manager/Hint":{"title":"$:/language/Buttons/Manager/Hint","text":"Open tiddler manager"},"$:/language/Buttons/More/Caption":{"title":"$:/language/Buttons/More/Caption","text":"more"},"$:/language/Buttons/More/Hint":{"title":"$:/language/Buttons/More/Hint","text":"More actions"},"$:/language/Buttons/NewHere/Caption":{"title":"$:/language/Buttons/NewHere/Caption","text":"new here"},"$:/language/Buttons/NewHere/Hint":{"title":"$:/language/Buttons/NewHere/Hint","text":"Create a new tiddler tagged with this one"},"$:/language/Buttons/NewJournal/Caption":{"title":"$:/language/Buttons/NewJournal/Caption","text":"new journal"},"$:/language/Buttons/NewJournal/Hint":{"title":"$:/language/Buttons/NewJournal/Hint","text":"Create a new journal tiddler"},"$:/language/Buttons/NewJournalHere/Caption":{"title":"$:/language/Buttons/NewJournalHere/Caption","text":"new journal here"},"$:/language/Buttons/NewJournalHere/Hint":{"title":"$:/language/Buttons/NewJournalHere/Hint","text":"Create a new journal tiddler tagged with this one"},"$:/language/Buttons/NewImage/Caption":{"title":"$:/language/Buttons/NewImage/Caption","text":"new image"},"$:/language/Buttons/NewImage/Hint":{"title":"$:/language/Buttons/NewImage/Hint","text":"Create a new image tiddler"},"$:/language/Buttons/NewMarkdown/Caption":{"title":"$:/language/Buttons/NewMarkdown/Caption","text":"new Markdown tiddler"},"$:/language/Buttons/NewMarkdown/Hint":{"title":"$:/language/Buttons/NewMarkdown/Hint","text":"Create a new Markdown tiddler"},"$:/language/Buttons/NewTiddler/Caption":{"title":"$:/language/Buttons/NewTiddler/Caption","text":"new tiddler"},"$:/language/Buttons/NewTiddler/Hint":{"title":"$:/language/Buttons/NewTiddler/Hint","text":"Create a new tiddler"},"$:/language/Buttons/OpenWindow/Caption":{"title":"$:/language/Buttons/OpenWindow/Caption","text":"open in new window"},"$:/language/Buttons/OpenWindow/Hint":{"title":"$:/language/Buttons/OpenWindow/Hint","text":"Open tiddler in new window"},"$:/language/Buttons/Palette/Caption":{"title":"$:/language/Buttons/Palette/Caption","text":"palette"},"$:/language/Buttons/Palette/Hint":{"title":"$:/language/Buttons/Palette/Hint","text":"Choose the colour palette"},"$:/language/Buttons/Permalink/Caption":{"title":"$:/language/Buttons/Permalink/Caption","text":"permalink"},"$:/language/Buttons/Permalink/Hint":{"title":"$:/language/Buttons/Permalink/Hint","text":"Set browser address bar to a direct link to this tiddler"},"$:/language/Buttons/Permaview/Caption":{"title":"$:/language/Buttons/Permaview/Caption","text":"permaview"},"$:/language/Buttons/Permaview/Hint":{"title":"$:/language/Buttons/Permaview/Hint","text":"Set browser address bar to a direct link to all the tiddlers in this story"},"$:/language/Buttons/Print/Caption":{"title":"$:/language/Buttons/Print/Caption","text":"print page"},"$:/language/Buttons/Print/Hint":{"title":"$:/language/Buttons/Print/Hint","text":"Print the current page"},"$:/language/Buttons/Refresh/Caption":{"title":"$:/language/Buttons/Refresh/Caption","text":"refresh"},"$:/language/Buttons/Refresh/Hint":{"title":"$:/language/Buttons/Refresh/Hint","text":"Perform a full refresh of the wiki"},"$:/language/Buttons/Save/Caption":{"title":"$:/language/Buttons/Save/Caption","text":"ok"},"$:/language/Buttons/Save/Hint":{"title":"$:/language/Buttons/Save/Hint","text":"Confirm changes to this tiddler"},"$:/language/Buttons/SaveWiki/Caption":{"title":"$:/language/Buttons/SaveWiki/Caption","text":"save changes"},"$:/language/Buttons/SaveWiki/Hint":{"title":"$:/language/Buttons/SaveWiki/Hint","text":"Save changes"},"$:/language/Buttons/StoryView/Caption":{"title":"$:/language/Buttons/StoryView/Caption","text":"storyview"},"$:/language/Buttons/StoryView/Hint":{"title":"$:/language/Buttons/StoryView/Hint","text":"Choose the story visualisation"},"$:/language/Buttons/HideSideBar/Caption":{"title":"$:/language/Buttons/HideSideBar/Caption","text":"hide sidebar"},"$:/language/Buttons/HideSideBar/Hint":{"title":"$:/language/Buttons/HideSideBar/Hint","text":"Hide sidebar"},"$:/language/Buttons/ShowSideBar/Caption":{"title":"$:/language/Buttons/ShowSideBar/Caption","text":"show sidebar"},"$:/language/Buttons/ShowSideBar/Hint":{"title":"$:/language/Buttons/ShowSideBar/Hint","text":"Show sidebar"},"$:/language/Buttons/TagManager/Caption":{"title":"$:/language/Buttons/TagManager/Caption","text":"tag manager"},"$:/language/Buttons/TagManager/Hint":{"title":"$:/language/Buttons/TagManager/Hint","text":"Open tag manager"},"$:/language/Buttons/Timestamp/Caption":{"title":"$:/language/Buttons/Timestamp/Caption","text":"timestamps"},"$:/language/Buttons/Timestamp/Hint":{"title":"$:/language/Buttons/Timestamp/Hint","text":"Choose whether modifications update timestamps"},"$:/language/Buttons/Timestamp/On/Caption":{"title":"$:/language/Buttons/Timestamp/On/Caption","text":"timestamps are on"},"$:/language/Buttons/Timestamp/On/Hint":{"title":"$:/language/Buttons/Timestamp/On/Hint","text":"Update timestamps when tiddlers are modified"},"$:/language/Buttons/Timestamp/Off/Caption":{"title":"$:/language/Buttons/Timestamp/Off/Caption","text":"timestamps are off"},"$:/language/Buttons/Timestamp/Off/Hint":{"title":"$:/language/Buttons/Timestamp/Off/Hint","text":"Don't update timestamps when tiddlers are modified"},"$:/language/Buttons/Theme/Caption":{"title":"$:/language/Buttons/Theme/Caption","text":"theme"},"$:/language/Buttons/Theme/Hint":{"title":"$:/language/Buttons/Theme/Hint","text":"Choose the display theme"},"$:/language/Buttons/Bold/Caption":{"title":"$:/language/Buttons/Bold/Caption","text":"bold"},"$:/language/Buttons/Bold/Hint":{"title":"$:/language/Buttons/Bold/Hint","text":"Apply bold formatting to selection"},"$:/language/Buttons/Clear/Caption":{"title":"$:/language/Buttons/Clear/Caption","text":"clear"},"$:/language/Buttons/Clear/Hint":{"title":"$:/language/Buttons/Clear/Hint","text":"Clear image to solid colour"},"$:/language/Buttons/EditorHeight/Caption":{"title":"$:/language/Buttons/EditorHeight/Caption","text":"editor height"},"$:/language/Buttons/EditorHeight/Caption/Auto":{"title":"$:/language/Buttons/EditorHeight/Caption/Auto","text":"Automatically adjust height to fit content"},"$:/language/Buttons/EditorHeight/Caption/Fixed":{"title":"$:/language/Buttons/EditorHeight/Caption/Fixed","text":"Fixed height:"},"$:/language/Buttons/EditorHeight/Hint":{"title":"$:/language/Buttons/EditorHeight/Hint","text":"Choose the height of the text editor"},"$:/language/Buttons/Excise/Caption":{"title":"$:/language/Buttons/Excise/Caption","text":"excise"},"$:/language/Buttons/Excise/Caption/Excise":{"title":"$:/language/Buttons/Excise/Caption/Excise","text":"Perform excision"},"$:/language/Buttons/Excise/Caption/MacroName":{"title":"$:/language/Buttons/Excise/Caption/MacroName","text":"Macro name:"},"$:/language/Buttons/Excise/Caption/NewTitle":{"title":"$:/language/Buttons/Excise/Caption/NewTitle","text":"Title of new tiddler:"},"$:/language/Buttons/Excise/Caption/Replace":{"title":"$:/language/Buttons/Excise/Caption/Replace","text":"Replace excised text with:"},"$:/language/Buttons/Excise/Caption/Replace/Macro":{"title":"$:/language/Buttons/Excise/Caption/Replace/Macro","text":"macro"},"$:/language/Buttons/Excise/Caption/Replace/Link":{"title":"$:/language/Buttons/Excise/Caption/Replace/Link","text":"link"},"$:/language/Buttons/Excise/Caption/Replace/Transclusion":{"title":"$:/language/Buttons/Excise/Caption/Replace/Transclusion","text":"transclusion"},"$:/language/Buttons/Excise/Caption/Tag":{"title":"$:/language/Buttons/Excise/Caption/Tag","text":"Tag new tiddler with the title of this tiddler"},"$:/language/Buttons/Excise/Caption/TiddlerExists":{"title":"$:/language/Buttons/Excise/Caption/TiddlerExists","text":"Warning: tiddler already exists"},"$:/language/Buttons/Excise/Hint":{"title":"$:/language/Buttons/Excise/Hint","text":"Excise the selected text into a new tiddler"},"$:/language/Buttons/Heading1/Caption":{"title":"$:/language/Buttons/Heading1/Caption","text":"heading 1"},"$:/language/Buttons/Heading1/Hint":{"title":"$:/language/Buttons/Heading1/Hint","text":"Apply heading level 1 formatting to lines containing selection"},"$:/language/Buttons/Heading2/Caption":{"title":"$:/language/Buttons/Heading2/Caption","text":"heading 2"},"$:/language/Buttons/Heading2/Hint":{"title":"$:/language/Buttons/Heading2/Hint","text":"Apply heading level 2 formatting to lines containing selection"},"$:/language/Buttons/Heading3/Caption":{"title":"$:/language/Buttons/Heading3/Caption","text":"heading 3"},"$:/language/Buttons/Heading3/Hint":{"title":"$:/language/Buttons/Heading3/Hint","text":"Apply heading level 3 formatting to lines containing selection"},"$:/language/Buttons/Heading4/Caption":{"title":"$:/language/Buttons/Heading4/Caption","text":"heading 4"},"$:/language/Buttons/Heading4/Hint":{"title":"$:/language/Buttons/Heading4/Hint","text":"Apply heading level 4 formatting to lines containing selection"},"$:/language/Buttons/Heading5/Caption":{"title":"$:/language/Buttons/Heading5/Caption","text":"heading 5"},"$:/language/Buttons/Heading5/Hint":{"title":"$:/language/Buttons/Heading5/Hint","text":"Apply heading level 5 formatting to lines containing selection"},"$:/language/Buttons/Heading6/Caption":{"title":"$:/language/Buttons/Heading6/Caption","text":"heading 6"},"$:/language/Buttons/Heading6/Hint":{"title":"$:/language/Buttons/Heading6/Hint","text":"Apply heading level 6 formatting to lines containing selection"},"$:/language/Buttons/Italic/Caption":{"title":"$:/language/Buttons/Italic/Caption","text":"italic"},"$:/language/Buttons/Italic/Hint":{"title":"$:/language/Buttons/Italic/Hint","text":"Apply italic formatting to selection"},"$:/language/Buttons/LineWidth/Caption":{"title":"$:/language/Buttons/LineWidth/Caption","text":"line width"},"$:/language/Buttons/LineWidth/Hint":{"title":"$:/language/Buttons/LineWidth/Hint","text":"Set line width for painting"},"$:/language/Buttons/Link/Caption":{"title":"$:/language/Buttons/Link/Caption","text":"link"},"$:/language/Buttons/Link/Hint":{"title":"$:/language/Buttons/Link/Hint","text":"Create wikitext link"},"$:/language/Buttons/Linkify/Caption":{"title":"$:/language/Buttons/Linkify/Caption","text":"wikilink"},"$:/language/Buttons/Linkify/Hint":{"title":"$:/language/Buttons/Linkify/Hint","text":"Wrap selection in square brackets"},"$:/language/Buttons/ListBullet/Caption":{"title":"$:/language/Buttons/ListBullet/Caption","text":"bulleted list"},"$:/language/Buttons/ListBullet/Hint":{"title":"$:/language/Buttons/ListBullet/Hint","text":"Apply bulleted list formatting to lines containing selection"},"$:/language/Buttons/ListNumber/Caption":{"title":"$:/language/Buttons/ListNumber/Caption","text":"numbered list"},"$:/language/Buttons/ListNumber/Hint":{"title":"$:/language/Buttons/ListNumber/Hint","text":"Apply numbered list formatting to lines containing selection"},"$:/language/Buttons/MonoBlock/Caption":{"title":"$:/language/Buttons/MonoBlock/Caption","text":"monospaced block"},"$:/language/Buttons/MonoBlock/Hint":{"title":"$:/language/Buttons/MonoBlock/Hint","text":"Apply monospaced block formatting to lines containing selection"},"$:/language/Buttons/MonoLine/Caption":{"title":"$:/language/Buttons/MonoLine/Caption","text":"monospaced"},"$:/language/Buttons/MonoLine/Hint":{"title":"$:/language/Buttons/MonoLine/Hint","text":"Apply monospaced character formatting to selection"},"$:/language/Buttons/Opacity/Caption":{"title":"$:/language/Buttons/Opacity/Caption","text":"opacity"},"$:/language/Buttons/Opacity/Hint":{"title":"$:/language/Buttons/Opacity/Hint","text":"Set painting opacity"},"$:/language/Buttons/Paint/Caption":{"title":"$:/language/Buttons/Paint/Caption","text":"paint colour"},"$:/language/Buttons/Paint/Hint":{"title":"$:/language/Buttons/Paint/Hint","text":"Set painting colour"},"$:/language/Buttons/Picture/Caption":{"title":"$:/language/Buttons/Picture/Caption","text":"picture"},"$:/language/Buttons/Picture/Hint":{"title":"$:/language/Buttons/Picture/Hint","text":"Insert picture"},"$:/language/Buttons/Preview/Caption":{"title":"$:/language/Buttons/Preview/Caption","text":"preview"},"$:/language/Buttons/Preview/Hint":{"title":"$:/language/Buttons/Preview/Hint","text":"Show preview pane"},"$:/language/Buttons/PreviewType/Caption":{"title":"$:/language/Buttons/PreviewType/Caption","text":"preview type"},"$:/language/Buttons/PreviewType/Hint":{"title":"$:/language/Buttons/PreviewType/Hint","text":"Choose preview type"},"$:/language/Buttons/Quote/Caption":{"title":"$:/language/Buttons/Quote/Caption","text":"quote"},"$:/language/Buttons/Quote/Hint":{"title":"$:/language/Buttons/Quote/Hint","text":"Apply quoted text formatting to lines containing selection"},"$:/language/Buttons/RotateLeft/Caption":{"title":"$:/language/Buttons/RotateLeft/Caption","text":"rotate left"},"$:/language/Buttons/RotateLeft/Hint":{"title":"$:/language/Buttons/RotateLeft/Hint","text":"Rotate image left by 90 degrees"},"$:/language/Buttons/Size/Caption":{"title":"$:/language/Buttons/Size/Caption","text":"image size"},"$:/language/Buttons/Size/Caption/Height":{"title":"$:/language/Buttons/Size/Caption/Height","text":"Height:"},"$:/language/Buttons/Size/Caption/Resize":{"title":"$:/language/Buttons/Size/Caption/Resize","text":"Resize image"},"$:/language/Buttons/Size/Caption/Width":{"title":"$:/language/Buttons/Size/Caption/Width","text":"Width:"},"$:/language/Buttons/Size/Hint":{"title":"$:/language/Buttons/Size/Hint","text":"Set image size"},"$:/language/Buttons/Stamp/Caption":{"title":"$:/language/Buttons/Stamp/Caption","text":"stamp"},"$:/language/Buttons/Stamp/Caption/New":{"title":"$:/language/Buttons/Stamp/Caption/New","text":"Add your own"},"$:/language/Buttons/Stamp/Hint":{"title":"$:/language/Buttons/Stamp/Hint","text":"Insert a preconfigured snippet of text"},"$:/language/Buttons/Stamp/New/Title":{"title":"$:/language/Buttons/Stamp/New/Title","text":"Name as shown in menu"},"$:/language/Buttons/Stamp/New/Text":{"title":"$:/language/Buttons/Stamp/New/Text","text":"Text of snippet. (Remember to add a descriptive title in the caption field)."},"$:/language/Buttons/Strikethrough/Caption":{"title":"$:/language/Buttons/Strikethrough/Caption","text":"strikethrough"},"$:/language/Buttons/Strikethrough/Hint":{"title":"$:/language/Buttons/Strikethrough/Hint","text":"Apply strikethrough formatting to selection"},"$:/language/Buttons/Subscript/Caption":{"title":"$:/language/Buttons/Subscript/Caption","text":"subscript"},"$:/language/Buttons/Subscript/Hint":{"title":"$:/language/Buttons/Subscript/Hint","text":"Apply subscript formatting to selection"},"$:/language/Buttons/Superscript/Caption":{"title":"$:/language/Buttons/Superscript/Caption","text":"superscript"},"$:/language/Buttons/Superscript/Hint":{"title":"$:/language/Buttons/Superscript/Hint","text":"Apply superscript formatting to selection"},"$:/language/Buttons/ToggleSidebar/Hint":{"title":"$:/language/Buttons/ToggleSidebar/Hint","text":"Toggle the sidebar visibility"},"$:/language/Buttons/Transcludify/Caption":{"title":"$:/language/Buttons/Transcludify/Caption","text":"transclusion"},"$:/language/Buttons/Transcludify/Hint":{"title":"$:/language/Buttons/Transcludify/Hint","text":"Wrap selection in curly brackets"},"$:/language/Buttons/Underline/Caption":{"title":"$:/language/Buttons/Underline/Caption","text":"underline"},"$:/language/Buttons/Underline/Hint":{"title":"$:/language/Buttons/Underline/Hint","text":"Apply underline formatting to selection"},"$:/language/ControlPanel/Advanced/Caption":{"title":"$:/language/ControlPanel/Advanced/Caption","text":"Advanced"},"$:/language/ControlPanel/Advanced/Hint":{"title":"$:/language/ControlPanel/Advanced/Hint","text":"Internal information about this TiddlyWiki"},"$:/language/ControlPanel/Appearance/Caption":{"title":"$:/language/ControlPanel/Appearance/Caption","text":"Appearance"},"$:/language/ControlPanel/Appearance/Hint":{"title":"$:/language/ControlPanel/Appearance/Hint","text":"Ways to customise the appearance of your TiddlyWiki."},"$:/language/ControlPanel/Basics/AnimDuration/Prompt":{"title":"$:/language/ControlPanel/Basics/AnimDuration/Prompt","text":"Animation duration"},"$:/language/ControlPanel/Basics/AutoFocus/Prompt":{"title":"$:/language/ControlPanel/Basics/AutoFocus/Prompt","text":"Default focus field for new tiddlers"},"$:/language/ControlPanel/Basics/Caption":{"title":"$:/language/ControlPanel/Basics/Caption","text":"Basics"},"$:/language/ControlPanel/Basics/DefaultTiddlers/BottomHint":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/BottomHint","text":"Use &amp;#91;&amp;#91;double square brackets&amp;#93;&amp;#93; for titles with spaces. Or you can choose to &lt;$button set=\"$:/DefaultTiddlers\" setTo=\"[list[$:/StoryList]]\"&gt;retain story ordering&lt;/$button&gt;"},"$:/language/ControlPanel/Basics/DefaultTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/Prompt","text":"Default tiddlers"},"$:/language/ControlPanel/Basics/DefaultTiddlers/TopHint":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/TopHint","text":"Choose which tiddlers are displayed at startup"},"$:/language/ControlPanel/Basics/Language/Prompt":{"title":"$:/language/ControlPanel/Basics/Language/Prompt","text":"Hello! Current language:"},"$:/language/ControlPanel/Basics/NewJournal/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Title/Prompt","text":"Title of new journal tiddlers"},"$:/language/ControlPanel/Basics/NewJournal/Text/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Text/Prompt","text":"Text for new journal tiddlers"},"$:/language/ControlPanel/Basics/NewJournal/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Tags/Prompt","text":"Tags for new journal tiddlers"},"$:/language/ControlPanel/Basics/NewTiddler/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/NewTiddler/Title/Prompt","text":"Title of new tiddlers"},"$:/language/ControlPanel/Basics/NewTiddler/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/NewTiddler/Tags/Prompt","text":"Tags for new tiddlers"},"$:/language/ControlPanel/Basics/OverriddenShadowTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/OverriddenShadowTiddlers/Prompt","text":"Number of overridden shadow tiddlers"},"$:/language/ControlPanel/Basics/RemoveTags":{"title":"$:/language/ControlPanel/Basics/RemoveTags","text":"Update to current format"},"$:/language/ControlPanel/Basics/RemoveTags/Hint":{"title":"$:/language/ControlPanel/Basics/RemoveTags/Hint","text":"Update the tags configuration to the latest format"},"$:/language/ControlPanel/Basics/ShadowTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/ShadowTiddlers/Prompt","text":"Number of shadow tiddlers"},"$:/language/ControlPanel/Basics/Subtitle/Prompt":{"title":"$:/language/ControlPanel/Basics/Subtitle/Prompt","text":"Subtitle"},"$:/language/ControlPanel/Basics/SystemTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/SystemTiddlers/Prompt","text":"Number of system tiddlers"},"$:/language/ControlPanel/Basics/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/Tags/Prompt","text":"Number of tags"},"$:/language/ControlPanel/Basics/Tiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/Tiddlers/Prompt","text":"Number of tiddlers"},"$:/language/ControlPanel/Basics/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/Title/Prompt","text":"Title of this ~TiddlyWiki"},"$:/language/ControlPanel/Basics/Username/Prompt":{"title":"$:/language/ControlPanel/Basics/Username/Prompt","text":"Username for signing edits"},"$:/language/ControlPanel/Basics/Version/Prompt":{"title":"$:/language/ControlPanel/Basics/Version/Prompt","text":"~TiddlyWiki version"},"$:/language/ControlPanel/EditorTypes/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Caption","text":"Editor Types"},"$:/language/ControlPanel/EditorTypes/Editor/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Editor/Caption","text":"Editor"},"$:/language/ControlPanel/EditorTypes/Hint":{"title":"$:/language/ControlPanel/EditorTypes/Hint","text":"These tiddlers determine which editor is used to edit specific tiddler types."},"$:/language/ControlPanel/EditorTypes/Type/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Type/Caption","text":"Type"},"$:/language/ControlPanel/Info/Caption":{"title":"$:/language/ControlPanel/Info/Caption","text":"Info"},"$:/language/ControlPanel/Info/Hint":{"title":"$:/language/ControlPanel/Info/Hint","text":"Information about this TiddlyWiki"},"$:/language/ControlPanel/KeyboardShortcuts/Add/Prompt":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Add/Prompt","text":"Type shortcut here"},"$:/language/ControlPanel/KeyboardShortcuts/Add/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Add/Caption","text":"add shortcut"},"$:/language/ControlPanel/KeyboardShortcuts/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Caption","text":"Keyboard Shortcuts"},"$:/language/ControlPanel/KeyboardShortcuts/Hint":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Hint","text":"Manage keyboard shortcut assignments"},"$:/language/ControlPanel/KeyboardShortcuts/NoShortcuts/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/NoShortcuts/Caption","text":"No keyboard shortcuts assigned"},"$:/language/ControlPanel/KeyboardShortcuts/Remove/Hint":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Remove/Hint","text":"remove keyboard shortcut"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/All":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/All","text":"All platforms"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Mac":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Mac","text":"Macintosh platform only"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonMac":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonMac","text":"Non-Macintosh platforms only"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Linux":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Linux","text":"Linux platform only"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonLinux":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonLinux","text":"Non-Linux platforms only"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Windows":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Windows","text":"Windows platform only"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonWindows":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonWindows","text":"Non-Windows platforms only"},"$:/language/ControlPanel/LayoutSwitcher/Caption":{"title":"$:/language/ControlPanel/LayoutSwitcher/Caption","text":"Layout"},"$:/language/ControlPanel/LoadedModules/Caption":{"title":"$:/language/ControlPanel/LoadedModules/Caption","text":"Loaded Modules"},"$:/language/ControlPanel/LoadedModules/Hint":{"title":"$:/language/ControlPanel/LoadedModules/Hint","text":"These are the currently loaded tiddler modules linked to their source tiddlers. Any italicised modules lack a source tiddler, typically because they were setup during the boot process."},"$:/language/ControlPanel/Palette/Caption":{"title":"$:/language/ControlPanel/Palette/Caption","text":"Palette"},"$:/language/ControlPanel/Palette/Editor/Clone/Caption":{"title":"$:/language/ControlPanel/Palette/Editor/Clone/Caption","text":"clone"},"$:/language/ControlPanel/Palette/Editor/Clone/Prompt":{"title":"$:/language/ControlPanel/Palette/Editor/Clone/Prompt","text":"It is recommended that you clone this shadow palette before editing it"},"$:/language/ControlPanel/Palette/Editor/Delete/Hint":{"title":"$:/language/ControlPanel/Palette/Editor/Delete/Hint","text":"delete this entry from the current palette"},"$:/language/ControlPanel/Palette/Editor/Names/External/Show":{"title":"$:/language/ControlPanel/Palette/Editor/Names/External/Show","text":"Show color names that are not part of the current palette"},"$:/language/ControlPanel/Palette/Editor/Prompt/Modified":{"title":"$:/language/ControlPanel/Palette/Editor/Prompt/Modified","text":"This shadow palette has been modified"},"$:/language/ControlPanel/Palette/Editor/Prompt":{"title":"$:/language/ControlPanel/Palette/Editor/Prompt","text":"Editing"},"$:/language/ControlPanel/Palette/Editor/Reset/Caption":{"title":"$:/language/ControlPanel/Palette/Editor/Reset/Caption","text":"reset"},"$:/language/ControlPanel/Palette/HideEditor/Caption":{"title":"$:/language/ControlPanel/Palette/HideEditor/Caption","text":"hide editor"},"$:/language/ControlPanel/Palette/Prompt":{"title":"$:/language/ControlPanel/Palette/Prompt","text":"Current palette:"},"$:/language/ControlPanel/Palette/ShowEditor/Caption":{"title":"$:/language/ControlPanel/Palette/ShowEditor/Caption","text":"show editor"},"$:/language/ControlPanel/Parsing/Caption":{"title":"$:/language/ControlPanel/Parsing/Caption","text":"Parsing"},"$:/language/ControlPanel/Parsing/Hint":{"title":"$:/language/ControlPanel/Parsing/Hint","text":"Here you can globally disable/enable wiki parser rules. For changes to take effect, save and reload your wiki. Disabling certain parser rules can prevent &lt;$text text=\"TiddlyWiki\"/&gt; from functioning correctly. Use [[safe mode|https://tiddlywiki.com/#SafeMode]] to restore normal operation."},"$:/language/ControlPanel/Parsing/Block/Caption":{"title":"$:/language/ControlPanel/Parsing/Block/Caption","text":"Block Parse Rules"},"$:/language/ControlPanel/Parsing/Inline/Caption":{"title":"$:/language/ControlPanel/Parsing/Inline/Caption","text":"Inline Parse Rules"},"$:/language/ControlPanel/Parsing/Pragma/Caption":{"title":"$:/language/ControlPanel/Parsing/Pragma/Caption","text":"Pragma Parse Rules"},"$:/language/ControlPanel/Plugins/Add/Caption":{"title":"$:/language/ControlPanel/Plugins/Add/Caption","text":"Get more plugins"},"$:/language/ControlPanel/Plugins/Add/Hint":{"title":"$:/language/ControlPanel/Plugins/Add/Hint","text":"Install plugins from the official library"},"$:/language/ControlPanel/Plugins/AlreadyInstalled/Hint":{"title":"$:/language/ControlPanel/Plugins/AlreadyInstalled/Hint","text":"This plugin is already installed at version &lt;$text text=&lt;&lt;installedVersion&gt;&gt;/&gt;"},"$:/language/ControlPanel/Plugins/AlsoRequires":{"title":"$:/language/ControlPanel/Plugins/AlsoRequires","text":"Also requires:"},"$:/language/ControlPanel/Plugins/Caption":{"title":"$:/language/ControlPanel/Plugins/Caption","text":"Plugins"},"$:/language/ControlPanel/Plugins/Disable/Caption":{"title":"$:/language/ControlPanel/Plugins/Disable/Caption","text":"disable"},"$:/language/ControlPanel/Plugins/Disable/Hint":{"title":"$:/language/ControlPanel/Plugins/Disable/Hint","text":"Disable this plugin when reloading page"},"$:/language/ControlPanel/Plugins/Disabled/Status":{"title":"$:/language/ControlPanel/Plugins/Disabled/Status","text":"(disabled)"},"$:/language/ControlPanel/Plugins/Downgrade/Caption":{"title":"$:/language/ControlPanel/Plugins/Downgrade/Caption","text":"downgrade"},"$:/language/ControlPanel/Plugins/Empty/Hint":{"title":"$:/language/ControlPanel/Plugins/Empty/Hint","text":"None"},"$:/language/ControlPanel/Plugins/Enable/Caption":{"title":"$:/language/ControlPanel/Plugins/Enable/Caption","text":"enable"},"$:/language/ControlPanel/Plugins/Enable/Hint":{"title":"$:/language/ControlPanel/Plugins/Enable/Hint","text":"Enable this plugin when reloading page"},"$:/language/ControlPanel/Plugins/Install/Caption":{"title":"$:/language/ControlPanel/Plugins/Install/Caption","text":"install"},"$:/language/ControlPanel/Plugins/Installed/Hint":{"title":"$:/language/ControlPanel/Plugins/Installed/Hint","text":"Currently installed plugins:"},"$:/language/ControlPanel/Plugins/Languages/Caption":{"title":"$:/language/ControlPanel/Plugins/Languages/Caption","text":"Languages"},"$:/language/ControlPanel/Plugins/Languages/Hint":{"title":"$:/language/ControlPanel/Plugins/Languages/Hint","text":"Language pack plugins"},"$:/language/ControlPanel/Plugins/NoInfoFound/Hint":{"title":"$:/language/ControlPanel/Plugins/NoInfoFound/Hint","text":"No ''\"&lt;$text text=&lt;&lt;currentTab&gt;&gt;/&gt;\"'' found"},"$:/language/ControlPanel/Plugins/NotInstalled/Hint":{"title":"$:/language/ControlPanel/Plugins/NotInstalled/Hint","text":"This plugin is not currently installed"},"$:/language/ControlPanel/Plugins/OpenPluginLibrary":{"title":"$:/language/ControlPanel/Plugins/OpenPluginLibrary","text":"open plugin library"},"$:/language/ControlPanel/Plugins/ClosePluginLibrary":{"title":"$:/language/ControlPanel/Plugins/ClosePluginLibrary","text":"close plugin library"},"$:/language/ControlPanel/Plugins/PluginWillRequireReload":{"title":"$:/language/ControlPanel/Plugins/PluginWillRequireReload","text":"(requires reload)"},"$:/language/ControlPanel/Plugins/Plugins/Caption":{"title":"$:/language/ControlPanel/Plugins/Plugins/Caption","text":"Plugins"},"$:/language/ControlPanel/Plugins/Plugins/Hint":{"title":"$:/language/ControlPanel/Plugins/Plugins/Hint","text":"Plugins"},"$:/language/ControlPanel/Plugins/Reinstall/Caption":{"title":"$:/language/ControlPanel/Plugins/Reinstall/Caption","text":"reinstall"},"$:/language/ControlPanel/Plugins/Themes/Caption":{"title":"$:/language/ControlPanel/Plugins/Themes/Caption","text":"Themes"},"$:/language/ControlPanel/Plugins/Themes/Hint":{"title":"$:/language/ControlPanel/Plugins/Themes/Hint","text":"Theme plugins"},"$:/language/ControlPanel/Plugins/Update/Caption":{"title":"$:/language/ControlPanel/Plugins/Update/Caption","text":"update"},"$:/language/ControlPanel/Plugins/Updates/Caption":{"title":"$:/language/ControlPanel/Plugins/Updates/Caption","text":"Updates"},"$:/language/ControlPanel/Plugins/Updates/Hint":{"title":"$:/language/ControlPanel/Plugins/Updates/Hint","text":"Available updates to installed plugins"},"$:/language/ControlPanel/Plugins/Updates/UpdateAll/Caption":{"title":"$:/language/ControlPanel/Plugins/Updates/UpdateAll/Caption","text":"Update &lt;&lt;update-count&gt;&gt; plugins"},"$:/language/ControlPanel/Plugins/SubPluginPrompt":{"title":"$:/language/ControlPanel/Plugins/SubPluginPrompt","text":"With &lt;&lt;count&gt;&gt; sub-plugins available"},"$:/language/ControlPanel/Saving/Caption":{"title":"$:/language/ControlPanel/Saving/Caption","text":"Saving"},"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Description":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Description","text":"Permit automatic saving for the download saver"},"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Hint":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Hint","text":"Enable Autosave for Download Saver"},"$:/language/ControlPanel/Saving/DownloadSaver/Caption":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/Caption","text":"Download Saver"},"$:/language/ControlPanel/Saving/DownloadSaver/Hint":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/Hint","text":"These settings apply to the HTML5-compatible download saver"},"$:/language/ControlPanel/Saving/General/Caption":{"title":"$:/language/ControlPanel/Saving/General/Caption","text":"General"},"$:/language/ControlPanel/Saving/General/Hint":{"title":"$:/language/ControlPanel/Saving/General/Hint","text":"These settings apply to all the loaded savers"},"$:/language/ControlPanel/Saving/Hint":{"title":"$:/language/ControlPanel/Saving/Hint","text":"Settings used for saving the entire TiddlyWiki as a single file via a saver module"},"$:/language/ControlPanel/Saving/GitService/Branch":{"title":"$:/language/ControlPanel/Saving/GitService/Branch","text":"Target branch for saving"},"$:/language/ControlPanel/Saving/GitService/CommitMessage":{"title":"$:/language/ControlPanel/Saving/GitService/CommitMessage","text":"Saved by TiddlyWiki"},"$:/language/ControlPanel/Saving/GitService/Description":{"title":"$:/language/ControlPanel/Saving/GitService/Description","text":"These settings are only used when saving to &lt;&lt;service-name&gt;&gt;"},"$:/language/ControlPanel/Saving/GitService/Filename":{"title":"$:/language/ControlPanel/Saving/GitService/Filename","text":"Filename of target file (e.g. `index.html`)"},"$:/language/ControlPanel/Saving/GitService/Path":{"title":"$:/language/ControlPanel/Saving/GitService/Path","text":"Path to target file (e.g. `/wiki/`)"},"$:/language/ControlPanel/Saving/GitService/Repo":{"title":"$:/language/ControlPanel/Saving/GitService/Repo","text":"Target repository (e.g. `Jermolene/TiddlyWiki5`)"},"$:/language/ControlPanel/Saving/GitService/ServerURL":{"title":"$:/language/ControlPanel/Saving/GitService/ServerURL","text":"Server API URL"},"$:/language/ControlPanel/Saving/GitService/UserName":{"title":"$:/language/ControlPanel/Saving/GitService/UserName","text":"Username"},"$:/language/ControlPanel/Saving/GitService/GitHub/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/GitHub/Caption","text":"~GitHub Saver"},"$:/language/ControlPanel/Saving/GitService/GitHub/Password":{"title":"$:/language/ControlPanel/Saving/GitService/GitHub/Password","text":"Password, OAUTH token, or personal access token (see [[GitHub help page|https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line]] for details)"},"$:/language/ControlPanel/Saving/GitService/GitLab/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/GitLab/Caption","text":"~GitLab Saver"},"$:/language/ControlPanel/Saving/GitService/GitLab/Password":{"title":"$:/language/ControlPanel/Saving/GitService/GitLab/Password","text":"Personal access token for API (see [[GitLab help page|https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html]] for details)"},"$:/language/ControlPanel/Saving/GitService/Gitea/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/Gitea/Caption","text":"Gitea Saver"},"$:/language/ControlPanel/Saving/GitService/Gitea/Password":{"title":"$:/language/ControlPanel/Saving/GitService/Gitea/Password","text":"Personal access token for API (via Gitea’s web interface: `Settings | Applications | Generate New Token`)"},"$:/language/ControlPanel/Saving/TiddlySpot/Advanced/Heading":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Advanced/Heading","text":"Advanced Settings"},"$:/language/ControlPanel/Saving/TiddlySpot/BackupDir":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/BackupDir","text":"Backup Directory"},"$:/language/ControlPanel/Saving/TiddlySpot/ControlPanel":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ControlPanel","text":"~TiddlySpot Control Panel"},"$:/language/ControlPanel/Saving/TiddlySpot/Backups":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Backups","text":"Backups"},"$:/language/ControlPanel/Saving/TiddlySpot/Caption":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Caption","text":"~TiddlySpot Saver"},"$:/language/ControlPanel/Saving/TiddlySpot/Description":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Description","text":"These settings are only used when saving to [[TiddlySpot|http://tiddlyspot.com]], [[TiddlyHost|https://tiddlyhost.com]], or a compatible remote server. See [[here|https://github.com/simonbaird/tiddlyhost/wiki/TiddlySpot-Saver-configuration-for-Tiddlyhost-and-Tiddlyspot]] for information on ~TiddlySpot and ~TiddlyHost saving configuration."},"$:/language/ControlPanel/Saving/TiddlySpot/Filename":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Filename","text":"Upload Filename"},"$:/language/ControlPanel/Saving/TiddlySpot/Heading":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Heading","text":"~TiddlySpot"},"$:/language/ControlPanel/Saving/TiddlySpot/Hint":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Hint","text":"//The server URL defaults to `http://&lt;wikiname&gt;.tiddlyspot.com/store.cgi` and can be changed to use a custom server address, e.g. `http://example.com/store.php`.//"},"$:/language/ControlPanel/Saving/TiddlySpot/Password":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Password","text":"Password"},"$:/language/ControlPanel/Saving/TiddlySpot/ReadOnly":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ReadOnly","text":"Note that [[TiddlySpot|http://tiddlyspot.com]] no longer allows the creation of new sites. For new sites, you can use [[TiddlyHost|https://tiddlyhost.com]], a new hosting service that replaces ~TiddlySpot."},"$:/language/ControlPanel/Saving/TiddlySpot/ServerURL":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ServerURL","text":"Server URL"},"$:/language/ControlPanel/Saving/TiddlySpot/UploadDir":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/UploadDir","text":"Upload Directory"},"$:/language/ControlPanel/Saving/TiddlySpot/UserName":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/UserName","text":"Wiki Name"},"$:/language/ControlPanel/Settings/AutoSave/Caption":{"title":"$:/language/ControlPanel/Settings/AutoSave/Caption","text":"Autosave"},"$:/language/ControlPanel/Settings/AutoSave/Disabled/Description":{"title":"$:/language/ControlPanel/Settings/AutoSave/Disabled/Description","text":"Do not save changes automatically"},"$:/language/ControlPanel/Settings/AutoSave/Enabled/Description":{"title":"$:/language/ControlPanel/Settings/AutoSave/Enabled/Description","text":"Save changes automatically"},"$:/language/ControlPanel/Settings/AutoSave/Hint":{"title":"$:/language/ControlPanel/Settings/AutoSave/Hint","text":"Attempt to automatically save changes during editing when using a supporting saver"},"$:/language/ControlPanel/Settings/CamelCase/Caption":{"title":"$:/language/ControlPanel/Settings/CamelCase/Caption","text":"Camel Case Wiki Links"},"$:/language/ControlPanel/Settings/CamelCase/Hint":{"title":"$:/language/ControlPanel/Settings/CamelCase/Hint","text":"You can globally disable automatic linking of ~CamelCase phrases. Requires reload to take effect"},"$:/language/ControlPanel/Settings/CamelCase/Description":{"title":"$:/language/ControlPanel/Settings/CamelCase/Description","text":"Enable automatic ~CamelCase linking"},"$:/language/ControlPanel/Settings/Caption":{"title":"$:/language/ControlPanel/Settings/Caption","text":"Settings"},"$:/language/ControlPanel/Settings/EditorToolbar/Caption":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Caption","text":"Editor Toolbar"},"$:/language/ControlPanel/Settings/EditorToolbar/Hint":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Hint","text":"Enable or disable the editor toolbar:"},"$:/language/ControlPanel/Settings/EditorToolbar/Description":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Description","text":"Show editor toolbar"},"$:/language/ControlPanel/Settings/InfoPanelMode/Caption":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Caption","text":"Tiddler Info Panel Mode"},"$:/language/ControlPanel/Settings/InfoPanelMode/Hint":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Hint","text":"Control when the tiddler info panel closes:"},"$:/language/ControlPanel/Settings/InfoPanelMode/Popup/Description":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Popup/Description","text":"Tiddler info panel closes automatically"},"$:/language/ControlPanel/Settings/InfoPanelMode/Sticky/Description":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Sticky/Description","text":"Tiddler info panel stays open until explicitly closed"},"$:/language/ControlPanel/Settings/Hint":{"title":"$:/language/ControlPanel/Settings/Hint","text":"These settings let you customise the behaviour of TiddlyWiki."},"$:/language/ControlPanel/Settings/NavigationAddressBar/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Caption","text":"Navigation Address Bar"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Hint","text":"Behaviour of the browser address bar when navigating to a tiddler:"},"$:/language/ControlPanel/Settings/NavigationAddressBar/No/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/No/Description","text":"Do not update the address bar"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Permalink/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Permalink/Description","text":"Include the target tiddler"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Permaview/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Permaview/Description","text":"Include the target tiddler and the current story sequence"},"$:/language/ControlPanel/Settings/NavigationHistory/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Caption","text":"Navigation History"},"$:/language/ControlPanel/Settings/NavigationHistory/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Hint","text":"Update browser history when navigating to a tiddler:"},"$:/language/ControlPanel/Settings/NavigationHistory/No/Description":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/No/Description","text":"Do not update history"},"$:/language/ControlPanel/Settings/NavigationHistory/Yes/Description":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Yes/Description","text":"Update history"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Caption","text":"Permalink/permaview Mode"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Hint","text":"Choose how permalink/permaview is handled:"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/CopyToClipboard/Description":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/CopyToClipboard/Description","text":"Copy permalink/permaview URL to clipboard"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/UpdateAddressBar/Description":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/UpdateAddressBar/Description","text":"Update address bar with permalink/permaview URL"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Caption":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Caption","text":"Performance Instrumentation"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Hint":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Hint","text":"Displays performance statistics in the browser developer console. Requires reload to take effect"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Description":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Description","text":"Enable performance instrumentation"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Caption":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Caption","text":"Toolbar Button Style"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Hint":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Hint","text":"Choose the style for toolbar buttons:"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Borderless":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Borderless","text":"Borderless"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Boxed":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Boxed","text":"Boxed"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Rounded":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Rounded","text":"Rounded"},"$:/language/ControlPanel/Settings/ToolbarButtons/Caption":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Caption","text":"Toolbar Buttons"},"$:/language/ControlPanel/Settings/ToolbarButtons/Hint":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Hint","text":"Default toolbar button appearance:"},"$:/language/ControlPanel/Settings/ToolbarButtons/Icons/Description":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Icons/Description","text":"Include icon"},"$:/language/ControlPanel/Settings/ToolbarButtons/Text/Description":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Text/Description","text":"Include text"},"$:/language/ControlPanel/Settings/DefaultSidebarTab/Caption":{"title":"$:/language/ControlPanel/Settings/DefaultSidebarTab/Caption","text":"Default Sidebar Tab"},"$:/language/ControlPanel/Settings/DefaultSidebarTab/Hint":{"title":"$:/language/ControlPanel/Settings/DefaultSidebarTab/Hint","text":"Specify which sidebar tab is displayed by default"},"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Caption":{"title":"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Caption","text":"Default More Sidebar Tab"},"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Hint":{"title":"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Hint","text":"Specify which More sidebar tab is displayed by default"},"$:/language/ControlPanel/Settings/LinkToBehaviour/Caption":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/Caption","text":"Tiddler Opening Behaviour"},"$:/language/ControlPanel/Settings/LinkToBehaviour/InsideRiver/Hint":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/InsideRiver/Hint","text":"Navigation from //within// the story river"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OutsideRiver/Hint":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OutsideRiver/Hint","text":"Navigation from //outside// the story river"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAbove":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAbove","text":"Open above the current tiddler"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenBelow":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenBelow","text":"Open below the current tiddler"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtTop":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtTop","text":"Open at the top of the story river"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtBottom":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtBottom","text":"Open at the bottom of the story river"},"$:/language/ControlPanel/Settings/TitleLinks/Caption":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Caption","text":"Tiddler Titles"},"$:/language/ControlPanel/Settings/TitleLinks/Hint":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Hint","text":"Optionally display tiddler titles as links"},"$:/language/ControlPanel/Settings/TitleLinks/No/Description":{"title":"$:/language/ControlPanel/Settings/TitleLinks/No/Description","text":"Do not display tiddler titles as links"},"$:/language/ControlPanel/Settings/TitleLinks/Yes/Description":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Yes/Description","text":"Display tiddler titles as links"},"$:/language/ControlPanel/Settings/MissingLinks/Caption":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Caption","text":"Wiki Links"},"$:/language/ControlPanel/Settings/MissingLinks/Hint":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Hint","text":"Choose whether to link to tiddlers that do not exist yet"},"$:/language/ControlPanel/Settings/MissingLinks/Description":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Description","text":"Enable links to missing tiddlers"},"$:/language/ControlPanel/StoryView/Caption":{"title":"$:/language/ControlPanel/StoryView/Caption","text":"Story View"},"$:/language/ControlPanel/StoryView/Prompt":{"title":"$:/language/ControlPanel/StoryView/Prompt","text":"Current view:"},"$:/language/ControlPanel/Stylesheets/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Caption","text":"Stylesheets"},"$:/language/ControlPanel/Stylesheets/Expand/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Expand/Caption","text":"Expand All"},"$:/language/ControlPanel/Stylesheets/Hint":{"title":"$:/language/ControlPanel/Stylesheets/Hint","text":"This is the rendered CSS of the current stylesheet tiddlers tagged with &lt;&lt;tag \"$:/tags/Stylesheet\"&gt;&gt;"},"$:/language/ControlPanel/Stylesheets/Restore/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Restore/Caption","text":"Restore"},"$:/language/ControlPanel/Theme/Caption":{"title":"$:/language/ControlPanel/Theme/Caption","text":"Theme"},"$:/language/ControlPanel/Theme/Prompt":{"title":"$:/language/ControlPanel/Theme/Prompt","text":"Current theme:"},"$:/language/ControlPanel/TiddlerFields/Caption":{"title":"$:/language/ControlPanel/TiddlerFields/Caption","text":"Tiddler Fields"},"$:/language/ControlPanel/TiddlerFields/Hint":{"title":"$:/language/ControlPanel/TiddlerFields/Hint","text":"This is the full set of TiddlerFields in use in this wiki (including system tiddlers but excluding shadow tiddlers)."},"$:/language/ControlPanel/Toolbars/Caption":{"title":"$:/language/ControlPanel/Toolbars/Caption","text":"Toolbars"},"$:/language/ControlPanel/Toolbars/EditToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/EditToolbar/Caption","text":"Edit Toolbar"},"$:/language/ControlPanel/Toolbars/EditToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/EditToolbar/Hint","text":"Choose which buttons are displayed for tiddlers in edit mode. Drag and drop to change the ordering"},"$:/language/ControlPanel/Toolbars/Hint":{"title":"$:/language/ControlPanel/Toolbars/Hint","text":"Select which toolbar buttons are displayed"},"$:/language/ControlPanel/Toolbars/PageControls/Caption":{"title":"$:/language/ControlPanel/Toolbars/PageControls/Caption","text":"Page Toolbar"},"$:/language/ControlPanel/Toolbars/PageControls/Hint":{"title":"$:/language/ControlPanel/Toolbars/PageControls/Hint","text":"Choose which buttons are displayed on the main page toolbar. Drag and drop to change the ordering"},"$:/language/ControlPanel/Toolbars/EditorToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/EditorToolbar/Caption","text":"Editor Toolbar"},"$:/language/ControlPanel/Toolbars/EditorToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/EditorToolbar/Hint","text":"Choose which buttons are displayed in the editor toolbar. Note that some buttons will only appear when editing tiddlers of a certain type. Drag and drop to change the ordering"},"$:/language/ControlPanel/Toolbars/ViewToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/ViewToolbar/Caption","text":"View Toolbar"},"$:/language/ControlPanel/Toolbars/ViewToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/ViewToolbar/Hint","text":"Choose which buttons are displayed for tiddlers in view mode. Drag and drop to change the ordering"},"$:/language/ControlPanel/Tools/Download/Full/Caption":{"title":"$:/language/ControlPanel/Tools/Download/Full/Caption","text":"Download full wiki"},"$:/language/Date/DaySuffix/1":{"title":"$:/language/Date/DaySuffix/1","text":"st"},"$:/language/Date/DaySuffix/2":{"title":"$:/language/Date/DaySuffix/2","text":"nd"},"$:/language/Date/DaySuffix/3":{"title":"$:/language/Date/DaySuffix/3","text":"rd"},"$:/language/Date/DaySuffix/4":{"title":"$:/language/Date/DaySuffix/4","text":"th"},"$:/language/Date/DaySuffix/5":{"title":"$:/language/Date/DaySuffix/5","text":"th"},"$:/language/Date/DaySuffix/6":{"title":"$:/language/Date/DaySuffix/6","text":"th"},"$:/language/Date/DaySuffix/7":{"title":"$:/language/Date/DaySuffix/7","text":"th"},"$:/language/Date/DaySuffix/8":{"title":"$:/language/Date/DaySuffix/8","text":"th"},"$:/language/Date/DaySuffix/9":{"title":"$:/language/Date/DaySuffix/9","text":"th"},"$:/language/Date/DaySuffix/10":{"title":"$:/language/Date/DaySuffix/10","text":"th"},"$:/language/Date/DaySuffix/11":{"title":"$:/language/Date/DaySuffix/11","text":"th"},"$:/language/Date/DaySuffix/12":{"title":"$:/language/Date/DaySuffix/12","text":"th"},"$:/language/Date/DaySuffix/13":{"title":"$:/language/Date/DaySuffix/13","text":"th"},"$:/language/Date/DaySuffix/14":{"title":"$:/language/Date/DaySuffix/14","text":"th"},"$:/language/Date/DaySuffix/15":{"title":"$:/language/Date/DaySuffix/15","text":"th"},"$:/language/Date/DaySuffix/16":{"title":"$:/language/Date/DaySuffix/16","text":"th"},"$:/language/Date/DaySuffix/17":{"title":"$:/language/Date/DaySuffix/17","text":"th"},"$:/language/Date/DaySuffix/18":{"title":"$:/language/Date/DaySuffix/18","text":"th"},"$:/language/Date/DaySuffix/19":{"title":"$:/language/Date/DaySuffix/19","text":"th"},"$:/language/Date/DaySuffix/20":{"title":"$:/language/Date/DaySuffix/20","text":"th"},"$:/language/Date/DaySuffix/21":{"title":"$:/language/Date/DaySuffix/21","text":"st"},"$:/language/Date/DaySuffix/22":{"title":"$:/language/Date/DaySuffix/22","text":"nd"},"$:/language/Date/DaySuffix/23":{"title":"$:/language/Date/DaySuffix/23","text":"rd"},"$:/language/Date/DaySuffix/24":{"title":"$:/language/Date/DaySuffix/24","text":"th"},"$:/language/Date/DaySuffix/25":{"title":"$:/language/Date/DaySuffix/25","text":"th"},"$:/language/Date/DaySuffix/26":{"title":"$:/language/Date/DaySuffix/26","text":"th"},"$:/language/Date/DaySuffix/27":{"title":"$:/language/Date/DaySuffix/27","text":"th"},"$:/language/Date/DaySuffix/28":{"title":"$:/language/Date/DaySuffix/28","text":"th"},"$:/language/Date/DaySuffix/29":{"title":"$:/language/Date/DaySuffix/29","text":"th"},"$:/language/Date/DaySuffix/30":{"title":"$:/language/Date/DaySuffix/30","text":"th"},"$:/language/Date/DaySuffix/31":{"title":"$:/language/Date/DaySuffix/31","text":"st"},"$:/language/Date/Long/Day/0":{"title":"$:/language/Date/Long/Day/0","text":"Sunday"},"$:/language/Date/Long/Day/1":{"title":"$:/language/Date/Long/Day/1","text":"Monday"},"$:/language/Date/Long/Day/2":{"title":"$:/language/Date/Long/Day/2","text":"Tuesday"},"$:/language/Date/Long/Day/3":{"title":"$:/language/Date/Long/Day/3","text":"Wednesday"},"$:/language/Date/Long/Day/4":{"title":"$:/language/Date/Long/Day/4","text":"Thursday"},"$:/language/Date/Long/Day/5":{"title":"$:/language/Date/Long/Day/5","text":"Friday"},"$:/language/Date/Long/Day/6":{"title":"$:/language/Date/Long/Day/6","text":"Saturday"},"$:/language/Date/Long/Month/1":{"title":"$:/language/Date/Long/Month/1","text":"January"},"$:/language/Date/Long/Month/2":{"title":"$:/language/Date/Long/Month/2","text":"February"},"$:/language/Date/Long/Month/3":{"title":"$:/language/Date/Long/Month/3","text":"March"},"$:/language/Date/Long/Month/4":{"title":"$:/language/Date/Long/Month/4","text":"April"},"$:/language/Date/Long/Month/5":{"title":"$:/language/Date/Long/Month/5","text":"May"},"$:/language/Date/Long/Month/6":{"title":"$:/language/Date/Long/Month/6","text":"June"},"$:/language/Date/Long/Month/7":{"title":"$:/language/Date/Long/Month/7","text":"July"},"$:/language/Date/Long/Month/8":{"title":"$:/language/Date/Long/Month/8","text":"August"},"$:/language/Date/Long/Month/9":{"title":"$:/language/Date/Long/Month/9","text":"September"},"$:/language/Date/Long/Month/10":{"title":"$:/language/Date/Long/Month/10","text":"October"},"$:/language/Date/Long/Month/11":{"title":"$:/language/Date/Long/Month/11","text":"November"},"$:/language/Date/Long/Month/12":{"title":"$:/language/Date/Long/Month/12","text":"December"},"$:/language/Date/Period/am":{"title":"$:/language/Date/Period/am","text":"am"},"$:/language/Date/Period/pm":{"title":"$:/language/Date/Period/pm","text":"pm"},"$:/language/Date/Short/Day/0":{"title":"$:/language/Date/Short/Day/0","text":"Sun"},"$:/language/Date/Short/Day/1":{"title":"$:/language/Date/Short/Day/1","text":"Mon"},"$:/language/Date/Short/Day/2":{"title":"$:/language/Date/Short/Day/2","text":"Tue"},"$:/language/Date/Short/Day/3":{"title":"$:/language/Date/Short/Day/3","text":"Wed"},"$:/language/Date/Short/Day/4":{"title":"$:/language/Date/Short/Day/4","text":"Thu"},"$:/language/Date/Short/Day/5":{"title":"$:/language/Date/Short/Day/5","text":"Fri"},"$:/language/Date/Short/Day/6":{"title":"$:/language/Date/Short/Day/6","text":"Sat"},"$:/language/Date/Short/Month/1":{"title":"$:/language/Date/Short/Month/1","text":"Jan"},"$:/language/Date/Short/Month/2":{"title":"$:/language/Date/Short/Month/2","text":"Feb"},"$:/language/Date/Short/Month/3":{"title":"$:/language/Date/Short/Month/3","text":"Mar"},"$:/language/Date/Short/Month/4":{"title":"$:/language/Date/Short/Month/4","text":"Apr"},"$:/language/Date/Short/Month/5":{"title":"$:/language/Date/Short/Month/5","text":"May"},"$:/language/Date/Short/Month/6":{"title":"$:/language/Date/Short/Month/6","text":"Jun"},"$:/language/Date/Short/Month/7":{"title":"$:/language/Date/Short/Month/7","text":"Jul"},"$:/language/Date/Short/Month/8":{"title":"$:/language/Date/Short/Month/8","text":"Aug"},"$:/language/Date/Short/Month/9":{"title":"$:/language/Date/Short/Month/9","text":"Sep"},"$:/language/Date/Short/Month/10":{"title":"$:/language/Date/Short/Month/10","text":"Oct"},"$:/language/Date/Short/Month/11":{"title":"$:/language/Date/Short/Month/11","text":"Nov"},"$:/language/Date/Short/Month/12":{"title":"$:/language/Date/Short/Month/12","text":"Dec"},"$:/language/RelativeDate/Future/Days":{"title":"$:/language/RelativeDate/Future/Days","text":"&lt;&lt;period&gt;&gt; days from now"},"$:/language/RelativeDate/Future/Hours":{"title":"$:/language/RelativeDate/Future/Hours","text":"&lt;&lt;period&gt;&gt; hours from now"},"$:/language/RelativeDate/Future/Minutes":{"title":"$:/language/RelativeDate/Future/Minutes","text":"&lt;&lt;period&gt;&gt; minutes from now"},"$:/language/RelativeDate/Future/Months":{"title":"$:/language/RelativeDate/Future/Months","text":"&lt;&lt;period&gt;&gt; months from now"},"$:/language/RelativeDate/Future/Second":{"title":"$:/language/RelativeDate/Future/Second","text":"1 second from now"},"$:/language/RelativeDate/Future/Seconds":{"title":"$:/language/RelativeDate/Future/Seconds","text":"&lt;&lt;period&gt;&gt; seconds from now"},"$:/language/RelativeDate/Future/Years":{"title":"$:/language/RelativeDate/Future/Years","text":"&lt;&lt;period&gt;&gt; years from now"},"$:/language/RelativeDate/Past/Days":{"title":"$:/language/RelativeDate/Past/Days","text":"&lt;&lt;period&gt;&gt; days ago"},"$:/language/RelativeDate/Past/Hours":{"title":"$:/language/RelativeDate/Past/Hours","text":"&lt;&lt;period&gt;&gt; hours ago"},"$:/language/RelativeDate/Past/Minutes":{"title":"$:/language/RelativeDate/Past/Minutes","text":"&lt;&lt;period&gt;&gt; minutes ago"},"$:/language/RelativeDate/Past/Months":{"title":"$:/language/RelativeDate/Past/Months","text":"&lt;&lt;period&gt;&gt; months ago"},"$:/language/RelativeDate/Past/Second":{"title":"$:/language/RelativeDate/Past/Second","text":"1 second ago"},"$:/language/RelativeDate/Past/Seconds":{"title":"$:/language/RelativeDate/Past/Seconds","text":"&lt;&lt;period&gt;&gt; seconds ago"},"$:/language/RelativeDate/Past/Years":{"title":"$:/language/RelativeDate/Past/Years","text":"&lt;&lt;period&gt;&gt; years ago"},"$:/language/Docs/ModuleTypes/allfilteroperator":{"title":"$:/language/Docs/ModuleTypes/allfilteroperator","text":"A sub-operator for the ''all'' filter operator."},"$:/language/Docs/ModuleTypes/animation":{"title":"$:/language/Docs/ModuleTypes/animation","text":"Animations that may be used with the RevealWidget."},"$:/language/Docs/ModuleTypes/authenticator":{"title":"$:/language/Docs/ModuleTypes/authenticator","text":"Defines how requests are authenticated by the built-in HTTP server."},"$:/language/Docs/ModuleTypes/bitmapeditoroperation":{"title":"$:/language/Docs/ModuleTypes/bitmapeditoroperation","text":"A bitmap editor toolbar operation."},"$:/language/Docs/ModuleTypes/command":{"title":"$:/language/Docs/ModuleTypes/command","text":"Commands that can be executed under Node.js."},"$:/language/Docs/ModuleTypes/config":{"title":"$:/language/Docs/ModuleTypes/config","text":"Data to be inserted into `$tw.config`."},"$:/language/Docs/ModuleTypes/filteroperator":{"title":"$:/language/Docs/ModuleTypes/filteroperator","text":"Individual filter operator methods."},"$:/language/Docs/ModuleTypes/global":{"title":"$:/language/Docs/ModuleTypes/global","text":"Global data to be inserted into `$tw`."},"$:/language/Docs/ModuleTypes/info":{"title":"$:/language/Docs/ModuleTypes/info","text":"Publishes system information via the [[$:/temp/info-plugin]] pseudo-plugin."},"$:/language/Docs/ModuleTypes/isfilteroperator":{"title":"$:/language/Docs/ModuleTypes/isfilteroperator","text":"Operands for the ''is'' filter operator."},"$:/language/Docs/ModuleTypes/library":{"title":"$:/language/Docs/ModuleTypes/library","text":"Generic module type for general purpose JavaScript modules."},"$:/language/Docs/ModuleTypes/macro":{"title":"$:/language/Docs/ModuleTypes/macro","text":"JavaScript macro definitions."},"$:/language/Docs/ModuleTypes/parser":{"title":"$:/language/Docs/ModuleTypes/parser","text":"Parsers for different content types."},"$:/language/Docs/ModuleTypes/route":{"title":"$:/language/Docs/ModuleTypes/route","text":"Defines how individual URL patterns are handled by the built-in HTTP server."},"$:/language/Docs/ModuleTypes/saver":{"title":"$:/language/Docs/ModuleTypes/saver","text":"Savers handle different methods for saving files from the browser."},"$:/language/Docs/ModuleTypes/startup":{"title":"$:/language/Docs/ModuleTypes/startup","text":"Startup functions."},"$:/language/Docs/ModuleTypes/storyview":{"title":"$:/language/Docs/ModuleTypes/storyview","text":"Story views customise the animation and behaviour of list widgets."},"$:/language/Docs/ModuleTypes/texteditoroperation":{"title":"$:/language/Docs/ModuleTypes/texteditoroperation","text":"A text editor toolbar operation."},"$:/language/Docs/ModuleTypes/tiddlerdeserializer":{"title":"$:/language/Docs/ModuleTypes/tiddlerdeserializer","text":"Converts different content types into tiddlers."},"$:/language/Docs/ModuleTypes/tiddlerfield":{"title":"$:/language/Docs/ModuleTypes/tiddlerfield","text":"Defines the behaviour of an individual tiddler field."},"$:/language/Docs/ModuleTypes/tiddlermethod":{"title":"$:/language/Docs/ModuleTypes/tiddlermethod","text":"Adds methods to the `$tw.Tiddler` prototype."},"$:/language/Docs/ModuleTypes/upgrader":{"title":"$:/language/Docs/ModuleTypes/upgrader","text":"Applies upgrade processing to tiddlers during an upgrade/import."},"$:/language/Docs/ModuleTypes/utils":{"title":"$:/language/Docs/ModuleTypes/utils","text":"Adds methods to `$tw.utils`."},"$:/language/Docs/ModuleTypes/utils-browser":{"title":"$:/language/Docs/ModuleTypes/utils-browser","text":"Adds browser-specific methods to `$tw.utils`."},"$:/language/Docs/ModuleTypes/utils-node":{"title":"$:/language/Docs/ModuleTypes/utils-node","text":"Adds Node.js-specific methods to `$tw.utils`."},"$:/language/Docs/ModuleTypes/widget":{"title":"$:/language/Docs/ModuleTypes/widget","text":"Widgets encapsulate DOM rendering and refreshing."},"$:/language/Docs/ModuleTypes/wikimethod":{"title":"$:/language/Docs/ModuleTypes/wikimethod","text":"Adds methods to `$tw.Wiki`."},"$:/language/Docs/ModuleTypes/wikirule":{"title":"$:/language/Docs/ModuleTypes/wikirule","text":"Individual parser rules for the main WikiText parser."},"$:/language/Docs/PaletteColours/alert-background":{"title":"$:/language/Docs/PaletteColours/alert-background","text":"Alert background"},"$:/language/Docs/PaletteColours/alert-border":{"title":"$:/language/Docs/PaletteColours/alert-border","text":"Alert border"},"$:/language/Docs/PaletteColours/alert-highlight":{"title":"$:/language/Docs/PaletteColours/alert-highlight","text":"Alert highlight"},"$:/language/Docs/PaletteColours/alert-muted-foreground":{"title":"$:/language/Docs/PaletteColours/alert-muted-foreground","text":"Alert muted foreground"},"$:/language/Docs/PaletteColours/background":{"title":"$:/language/Docs/PaletteColours/background","text":"General background"},"$:/language/Docs/PaletteColours/blockquote-bar":{"title":"$:/language/Docs/PaletteColours/blockquote-bar","text":"Blockquote bar"},"$:/language/Docs/PaletteColours/button-background":{"title":"$:/language/Docs/PaletteColours/button-background","text":"Default button background"},"$:/language/Docs/PaletteColours/button-border":{"title":"$:/language/Docs/PaletteColours/button-border","text":"Default button border"},"$:/language/Docs/PaletteColours/button-foreground":{"title":"$:/language/Docs/PaletteColours/button-foreground","text":"Default button foreground"},"$:/language/Docs/PaletteColours/dirty-indicator":{"title":"$:/language/Docs/PaletteColours/dirty-indicator","text":"Unsaved changes indicator"},"$:/language/Docs/PaletteColours/code-background":{"title":"$:/language/Docs/PaletteColours/code-background","text":"Code background"},"$:/language/Docs/PaletteColours/code-border":{"title":"$:/language/Docs/PaletteColours/code-border","text":"Code border"},"$:/language/Docs/PaletteColours/code-foreground":{"title":"$:/language/Docs/PaletteColours/code-foreground","text":"Code foreground"},"$:/language/Docs/PaletteColours/download-background":{"title":"$:/language/Docs/PaletteColours/download-background","text":"Download button background"},"$:/language/Docs/PaletteColours/download-foreground":{"title":"$:/language/Docs/PaletteColours/download-foreground","text":"Download button foreground"},"$:/language/Docs/PaletteColours/dragger-background":{"title":"$:/language/Docs/PaletteColours/dragger-background","text":"Dragger background"},"$:/language/Docs/PaletteColours/dragger-foreground":{"title":"$:/language/Docs/PaletteColours/dragger-foreground","text":"Dragger foreground"},"$:/language/Docs/PaletteColours/dropdown-background":{"title":"$:/language/Docs/PaletteColours/dropdown-background","text":"Dropdown background"},"$:/language/Docs/PaletteColours/dropdown-border":{"title":"$:/language/Docs/PaletteColours/dropdown-border","text":"Dropdown border"},"$:/language/Docs/PaletteColours/dropdown-tab-background-selected":{"title":"$:/language/Docs/PaletteColours/dropdown-tab-background-selected","text":"Dropdown tab background for selected tabs"},"$:/language/Docs/PaletteColours/dropdown-tab-background":{"title":"$:/language/Docs/PaletteColours/dropdown-tab-background","text":"Dropdown tab background"},"$:/language/Docs/PaletteColours/dropzone-background":{"title":"$:/language/Docs/PaletteColours/dropzone-background","text":"Dropzone background"},"$:/language/Docs/PaletteColours/external-link-background-hover":{"title":"$:/language/Docs/PaletteColours/external-link-background-hover","text":"External link background hover"},"$:/language/Docs/PaletteColours/external-link-background-visited":{"title":"$:/language/Docs/PaletteColours/external-link-background-visited","text":"External link background visited"},"$:/language/Docs/PaletteColours/external-link-background":{"title":"$:/language/Docs/PaletteColours/external-link-background","text":"External link background"},"$:/language/Docs/PaletteColours/external-link-foreground-hover":{"title":"$:/language/Docs/PaletteColours/external-link-foreground-hover","text":"External link foreground hover"},"$:/language/Docs/PaletteColours/external-link-foreground-visited":{"title":"$:/language/Docs/PaletteColours/external-link-foreground-visited","text":"External link foreground visited"},"$:/language/Docs/PaletteColours/external-link-foreground":{"title":"$:/language/Docs/PaletteColours/external-link-foreground","text":"External link foreground"},"$:/language/Docs/PaletteColours/foreground":{"title":"$:/language/Docs/PaletteColours/foreground","text":"General foreground"},"$:/language/Docs/PaletteColours/menubar-background":{"title":"$:/language/Docs/PaletteColours/menubar-background","text":"Menu bar background"},"$:/language/Docs/PaletteColours/menubar-foreground":{"title":"$:/language/Docs/PaletteColours/menubar-foreground","text":"Menu bar foreground"},"$:/language/Docs/PaletteColours/message-background":{"title":"$:/language/Docs/PaletteColours/message-background","text":"Message box background"},"$:/language/Docs/PaletteColours/message-border":{"title":"$:/language/Docs/PaletteColours/message-border","text":"Message box border"},"$:/language/Docs/PaletteColours/message-foreground":{"title":"$:/language/Docs/PaletteColours/message-foreground","text":"Message box foreground"},"$:/language/Docs/PaletteColours/modal-backdrop":{"title":"$:/language/Docs/PaletteColours/modal-backdrop","text":"Modal backdrop"},"$:/language/Docs/PaletteColours/modal-background":{"title":"$:/language/Docs/PaletteColours/modal-background","text":"Modal background"},"$:/language/Docs/PaletteColours/modal-border":{"title":"$:/language/Docs/PaletteColours/modal-border","text":"Modal border"},"$:/language/Docs/PaletteColours/modal-footer-background":{"title":"$:/language/Docs/PaletteColours/modal-footer-background","text":"Modal footer background"},"$:/language/Docs/PaletteColours/modal-footer-border":{"title":"$:/language/Docs/PaletteColours/modal-footer-border","text":"Modal footer border"},"$:/language/Docs/PaletteColours/modal-header-border":{"title":"$:/language/Docs/PaletteColours/modal-header-border","text":"Modal header border"},"$:/language/Docs/PaletteColours/muted-foreground":{"title":"$:/language/Docs/PaletteColours/muted-foreground","text":"General muted foreground"},"$:/language/Docs/PaletteColours/notification-background":{"title":"$:/language/Docs/PaletteColours/notification-background","text":"Notification background"},"$:/language/Docs/PaletteColours/notification-border":{"title":"$:/language/Docs/PaletteColours/notification-border","text":"Notification border"},"$:/language/Docs/PaletteColours/page-background":{"title":"$:/language/Docs/PaletteColours/page-background","text":"Page background"},"$:/language/Docs/PaletteColours/pre-background":{"title":"$:/language/Docs/PaletteColours/pre-background","text":"Preformatted code background"},"$:/language/Docs/PaletteColours/pre-border":{"title":"$:/language/Docs/PaletteColours/pre-border","text":"Preformatted code border"},"$:/language/Docs/PaletteColours/primary":{"title":"$:/language/Docs/PaletteColours/primary","text":"General primary"},"$:/language/Docs/PaletteColours/select-tag-background":{"title":"$:/language/Docs/PaletteColours/select-tag-background","text":"`&lt;select&gt;` element background"},"$:/language/Docs/PaletteColours/select-tag-foreground":{"title":"$:/language/Docs/PaletteColours/select-tag-foreground","text":"`&lt;select&gt;` element text"},"$:/language/Docs/PaletteColours/sidebar-button-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-button-foreground","text":"Sidebar button foreground"},"$:/language/Docs/PaletteColours/sidebar-controls-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-controls-foreground-hover","text":"Sidebar controls foreground hover"},"$:/language/Docs/PaletteColours/sidebar-controls-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-controls-foreground","text":"Sidebar controls foreground"},"$:/language/Docs/PaletteColours/sidebar-foreground-shadow":{"title":"$:/language/Docs/PaletteColours/sidebar-foreground-shadow","text":"Sidebar foreground shadow"},"$:/language/Docs/PaletteColours/sidebar-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-foreground","text":"Sidebar foreground"},"$:/language/Docs/PaletteColours/sidebar-muted-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-muted-foreground-hover","text":"Sidebar muted foreground hover"},"$:/language/Docs/PaletteColours/sidebar-muted-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-muted-foreground","text":"Sidebar muted foreground"},"$:/language/Docs/PaletteColours/sidebar-tab-background-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-background-selected","text":"Sidebar tab background for selected tabs"},"$:/language/Docs/PaletteColours/sidebar-tab-background":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-background","text":"Sidebar tab background"},"$:/language/Docs/PaletteColours/sidebar-tab-border-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-border-selected","text":"Sidebar tab border for selected tabs"},"$:/language/Docs/PaletteColours/sidebar-tab-border":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-border","text":"Sidebar tab border"},"$:/language/Docs/PaletteColours/sidebar-tab-divider":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-divider","text":"Sidebar tab divider"},"$:/language/Docs/PaletteColours/sidebar-tab-foreground-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-foreground-selected","text":"Sidebar tab foreground for selected tabs"},"$:/language/Docs/PaletteColours/sidebar-tab-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-foreground","text":"Sidebar tab foreground"},"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground-hover","text":"Sidebar tiddler link foreground hover"},"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground","text":"Sidebar tiddler link foreground"},"$:/language/Docs/PaletteColours/site-title-foreground":{"title":"$:/language/Docs/PaletteColours/site-title-foreground","text":"Site title foreground"},"$:/language/Docs/PaletteColours/static-alert-foreground":{"title":"$:/language/Docs/PaletteColours/static-alert-foreground","text":"Static alert foreground"},"$:/language/Docs/PaletteColours/tab-background-selected":{"title":"$:/language/Docs/PaletteColours/tab-background-selected","text":"Tab background for selected tabs"},"$:/language/Docs/PaletteColours/tab-background":{"title":"$:/language/Docs/PaletteColours/tab-background","text":"Tab background"},"$:/language/Docs/PaletteColours/tab-border-selected":{"title":"$:/language/Docs/PaletteColours/tab-border-selected","text":"Tab border for selected tabs"},"$:/language/Docs/PaletteColours/tab-border":{"title":"$:/language/Docs/PaletteColours/tab-border","text":"Tab border"},"$:/language/Docs/PaletteColours/tab-divider":{"title":"$:/language/Docs/PaletteColours/tab-divider","text":"Tab divider"},"$:/language/Docs/PaletteColours/tab-foreground-selected":{"title":"$:/language/Docs/PaletteColours/tab-foreground-selected","text":"Tab foreground for selected tabs"},"$:/language/Docs/PaletteColours/tab-foreground":{"title":"$:/language/Docs/PaletteColours/tab-foreground","text":"Tab foreground"},"$:/language/Docs/PaletteColours/table-border":{"title":"$:/language/Docs/PaletteColours/table-border","text":"Table border"},"$:/language/Docs/PaletteColours/table-footer-background":{"title":"$:/language/Docs/PaletteColours/table-footer-background","text":"Table footer background"},"$:/language/Docs/PaletteColours/table-header-background":{"title":"$:/language/Docs/PaletteColours/table-header-background","text":"Table header background"},"$:/language/Docs/PaletteColours/tag-background":{"title":"$:/language/Docs/PaletteColours/tag-background","text":"Tag background"},"$:/language/Docs/PaletteColours/tag-foreground":{"title":"$:/language/Docs/PaletteColours/tag-foreground","text":"Tag foreground"},"$:/language/Docs/PaletteColours/tiddler-background":{"title":"$:/language/Docs/PaletteColours/tiddler-background","text":"Tiddler background"},"$:/language/Docs/PaletteColours/tiddler-border":{"title":"$:/language/Docs/PaletteColours/tiddler-border","text":"Tiddler border"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground-hover":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground-hover","text":"Tiddler controls foreground hover"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground-selected":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground-selected","text":"Tiddler controls foreground for selected controls"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground","text":"Tiddler controls foreground"},"$:/language/Docs/PaletteColours/tiddler-editor-background":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-background","text":"Tiddler editor background"},"$:/language/Docs/PaletteColours/tiddler-editor-border-image":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-border-image","text":"Tiddler editor border image"},"$:/language/Docs/PaletteColours/tiddler-editor-border":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-border","text":"Tiddler editor border"},"$:/language/Docs/PaletteColours/tiddler-editor-fields-even":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-fields-even","text":"Tiddler editor background for even fields"},"$:/language/Docs/PaletteColours/tiddler-editor-fields-odd":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-fields-odd","text":"Tiddler editor background for odd fields"},"$:/language/Docs/PaletteColours/tiddler-info-background":{"title":"$:/language/Docs/PaletteColours/tiddler-info-background","text":"Tiddler info panel background"},"$:/language/Docs/PaletteColours/tiddler-info-border":{"title":"$:/language/Docs/PaletteColours/tiddler-info-border","text":"Tiddler info panel border"},"$:/language/Docs/PaletteColours/tiddler-info-tab-background":{"title":"$:/language/Docs/PaletteColours/tiddler-info-tab-background","text":"Tiddler info panel tab background"},"$:/language/Docs/PaletteColours/tiddler-link-background":{"title":"$:/language/Docs/PaletteColours/tiddler-link-background","text":"Tiddler link background"},"$:/language/Docs/PaletteColours/tiddler-link-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-link-foreground","text":"Tiddler link foreground"},"$:/language/Docs/PaletteColours/tiddler-subtitle-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-subtitle-foreground","text":"Tiddler subtitle foreground"},"$:/language/Docs/PaletteColours/tiddler-title-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-title-foreground","text":"Tiddler title foreground"},"$:/language/Docs/PaletteColours/toolbar-new-button":{"title":"$:/language/Docs/PaletteColours/toolbar-new-button","text":"Toolbar 'new tiddler' button foreground"},"$:/language/Docs/PaletteColours/toolbar-options-button":{"title":"$:/language/Docs/PaletteColours/toolbar-options-button","text":"Toolbar 'options' button foreground"},"$:/language/Docs/PaletteColours/toolbar-save-button":{"title":"$:/language/Docs/PaletteColours/toolbar-save-button","text":"Toolbar 'save' button foreground"},"$:/language/Docs/PaletteColours/toolbar-info-button":{"title":"$:/language/Docs/PaletteColours/toolbar-info-button","text":"Toolbar 'info' button foreground"},"$:/language/Docs/PaletteColours/toolbar-edit-button":{"title":"$:/language/Docs/PaletteColours/toolbar-edit-button","text":"Toolbar 'edit' button foreground"},"$:/language/Docs/PaletteColours/toolbar-close-button":{"title":"$:/language/Docs/PaletteColours/toolbar-close-button","text":"Toolbar 'close' button foreground"},"$:/language/Docs/PaletteColours/toolbar-delete-button":{"title":"$:/language/Docs/PaletteColours/toolbar-delete-button","text":"Toolbar 'delete' button foreground"},"$:/language/Docs/PaletteColours/toolbar-cancel-button":{"title":"$:/language/Docs/PaletteColours/toolbar-cancel-button","text":"Toolbar 'cancel' button foreground"},"$:/language/Docs/PaletteColours/toolbar-done-button":{"title":"$:/language/Docs/PaletteColours/toolbar-done-button","text":"Toolbar 'done' button foreground"},"$:/language/Docs/PaletteColours/untagged-background":{"title":"$:/language/Docs/PaletteColours/untagged-background","text":"Untagged pill background"},"$:/language/Docs/PaletteColours/very-muted-foreground":{"title":"$:/language/Docs/PaletteColours/very-muted-foreground","text":"Very muted foreground"},"$:/language/EditTemplate/Body/External/Hint":{"title":"$:/language/EditTemplate/Body/External/Hint","text":"This tiddler shows content stored outside of the main TiddlyWiki file. You can edit the tags and fields but cannot directly edit the content itself"},"$:/language/EditTemplate/Body/Placeholder":{"title":"$:/language/EditTemplate/Body/Placeholder","text":"Type the text for this tiddler"},"$:/language/EditTemplate/Body/Preview/Type/Output":{"title":"$:/language/EditTemplate/Body/Preview/Type/Output","text":"output"},"$:/language/EditTemplate/Body/Preview/Type/DiffShadow":{"title":"$:/language/EditTemplate/Body/Preview/Type/DiffShadow","text":"differences from shadow (if any)"},"$:/language/EditTemplate/Body/Preview/Type/DiffCurrent":{"title":"$:/language/EditTemplate/Body/Preview/Type/DiffCurrent","text":"differences from current"},"$:/language/EditTemplate/Field/Remove/Caption":{"title":"$:/language/EditTemplate/Field/Remove/Caption","text":"remove field"},"$:/language/EditTemplate/Field/Remove/Hint":{"title":"$:/language/EditTemplate/Field/Remove/Hint","text":"Remove field"},"$:/language/EditTemplate/Field/Dropdown/Caption":{"title":"$:/language/EditTemplate/Field/Dropdown/Caption","text":"field list"},"$:/language/EditTemplate/Field/Dropdown/Hint":{"title":"$:/language/EditTemplate/Field/Dropdown/Hint","text":"Show field list"},"$:/language/EditTemplate/Fields/Add/Button":{"title":"$:/language/EditTemplate/Fields/Add/Button","text":"add"},"$:/language/EditTemplate/Fields/Add/Button/Hint":{"title":"$:/language/EditTemplate/Fields/Add/Button/Hint","text":"Add the new field to the tiddler"},"$:/language/EditTemplate/Fields/Add/Name/Placeholder":{"title":"$:/language/EditTemplate/Fields/Add/Name/Placeholder","text":"field name"},"$:/language/EditTemplate/Fields/Add/Prompt":{"title":"$:/language/EditTemplate/Fields/Add/Prompt","text":"Add a new field:"},"$:/language/EditTemplate/Fields/Add/Value/Placeholder":{"title":"$:/language/EditTemplate/Fields/Add/Value/Placeholder","text":"field value"},"$:/language/EditTemplate/Fields/Add/Dropdown/System":{"title":"$:/language/EditTemplate/Fields/Add/Dropdown/System","text":"System fields"},"$:/language/EditTemplate/Fields/Add/Dropdown/User":{"title":"$:/language/EditTemplate/Fields/Add/Dropdown/User","text":"User fields"},"$:/language/EditTemplate/Shadow/Warning":{"title":"$:/language/EditTemplate/Shadow/Warning","text":"This is a shadow tiddler. Any changes you make will override the default version from the plugin &lt;&lt;pluginLink&gt;&gt;"},"$:/language/EditTemplate/Shadow/OverriddenWarning":{"title":"$:/language/EditTemplate/Shadow/OverriddenWarning","text":"This is a modified shadow tiddler. You can revert to the default version in the plugin &lt;&lt;pluginLink&gt;&gt; by deleting this tiddler"},"$:/language/EditTemplate/Tags/Add/Button":{"title":"$:/language/EditTemplate/Tags/Add/Button","text":"add"},"$:/language/EditTemplate/Tags/Add/Button/Hint":{"title":"$:/language/EditTemplate/Tags/Add/Button/Hint","text":"add tag"},"$:/language/EditTemplate/Tags/Add/Placeholder":{"title":"$:/language/EditTemplate/Tags/Add/Placeholder","text":"tag name"},"$:/language/EditTemplate/Tags/ClearInput/Caption":{"title":"$:/language/EditTemplate/Tags/ClearInput/Caption","text":"clear input"},"$:/language/EditTemplate/Tags/ClearInput/Hint":{"title":"$:/language/EditTemplate/Tags/ClearInput/Hint","text":"Clear tag input"},"$:/language/EditTemplate/Tags/Dropdown/Caption":{"title":"$:/language/EditTemplate/Tags/Dropdown/Caption","text":"tag list"},"$:/language/EditTemplate/Tags/Dropdown/Hint":{"title":"$:/language/EditTemplate/Tags/Dropdown/Hint","text":"Show tag list"},"$:/language/EditTemplate/Title/BadCharacterWarning":{"title":"$:/language/EditTemplate/Title/BadCharacterWarning","text":"Warning: avoid using any of the characters &lt;&lt;bad-chars&gt;&gt; in tiddler titles"},"$:/language/EditTemplate/Title/Exists/Prompt":{"title":"$:/language/EditTemplate/Title/Exists/Prompt","text":"Target tiddler already exists"},"$:/language/EditTemplate/Title/Relink/Prompt":{"title":"$:/language/EditTemplate/Title/Relink/Prompt","text":"Update ''&lt;$text text=&lt;&lt;fromTitle&gt;&gt;/&gt;'' to ''&lt;$text text=&lt;&lt;toTitle&gt;&gt;/&gt;'' in the //tags// and //list// fields of other tiddlers"},"$:/language/EditTemplate/Title/References/Prompt":{"title":"$:/language/EditTemplate/Title/References/Prompt","text":"The following references to this tiddler will not be automatically updated:"},"$:/language/EditTemplate/Type/Dropdown/Caption":{"title":"$:/language/EditTemplate/Type/Dropdown/Caption","text":"content type list"},"$:/language/EditTemplate/Type/Dropdown/Hint":{"title":"$:/language/EditTemplate/Type/Dropdown/Hint","text":"Show content type list"},"$:/language/EditTemplate/Type/Delete/Caption":{"title":"$:/language/EditTemplate/Type/Delete/Caption","text":"delete content type"},"$:/language/EditTemplate/Type/Delete/Hint":{"title":"$:/language/EditTemplate/Type/Delete/Hint","text":"Delete content type"},"$:/language/EditTemplate/Type/Placeholder":{"title":"$:/language/EditTemplate/Type/Placeholder","text":"content type"},"$:/language/EditTemplate/Type/Prompt":{"title":"$:/language/EditTemplate/Type/Prompt","text":"Type:"},"$:/language/Exporters/StaticRiver":{"title":"$:/language/Exporters/StaticRiver","text":"Static HTML"},"$:/language/Exporters/JsonFile":{"title":"$:/language/Exporters/JsonFile","text":"JSON file"},"$:/language/Exporters/CsvFile":{"title":"$:/language/Exporters/CsvFile","text":"CSV file"},"$:/language/Exporters/TidFile":{"title":"$:/language/Exporters/TidFile","text":"\".tid\" file"},"$:/language/Docs/Fields/_canonical_uri":{"title":"$:/language/Docs/Fields/_canonical_uri","text":"The full URI of an external image tiddler"},"$:/language/Docs/Fields/bag":{"title":"$:/language/Docs/Fields/bag","text":"The name of the bag from which a tiddler came"},"$:/language/Docs/Fields/caption":{"title":"$:/language/Docs/Fields/caption","text":"The text to be displayed on a tab or button"},"$:/language/Docs/Fields/color":{"title":"$:/language/Docs/Fields/color","text":"The CSS color value associated with a tiddler"},"$:/language/Docs/Fields/component":{"title":"$:/language/Docs/Fields/component","text":"The name of the component responsible for an [[alert tiddler|AlertMechanism]]"},"$:/language/Docs/Fields/current-tiddler":{"title":"$:/language/Docs/Fields/current-tiddler","text":"Used to cache the top tiddler in a [[history list|HistoryMechanism]]"},"$:/language/Docs/Fields/created":{"title":"$:/language/Docs/Fields/created","text":"The date a tiddler was created"},"$:/language/Docs/Fields/creator":{"title":"$:/language/Docs/Fields/creator","text":"The name of the person who created a tiddler"},"$:/language/Docs/Fields/dependents":{"title":"$:/language/Docs/Fields/dependents","text":"For a plugin, lists the dependent plugin titles"},"$:/language/Docs/Fields/description":{"title":"$:/language/Docs/Fields/description","text":"The descriptive text for a plugin, or a modal dialogue"},"$:/language/Docs/Fields/draft.of":{"title":"$:/language/Docs/Fields/draft.of","text":"For draft tiddlers, contains the title of the tiddler of which this is a draft"},"$:/language/Docs/Fields/draft.title":{"title":"$:/language/Docs/Fields/draft.title","text":"For draft tiddlers, contains the proposed new title of the tiddler"},"$:/language/Docs/Fields/footer":{"title":"$:/language/Docs/Fields/footer","text":"The footer text for a wizard"},"$:/language/Docs/Fields/hide-body":{"title":"$:/language/Docs/Fields/hide-body","text":"The view template will hide bodies of tiddlers if set to: ''yes''"},"$:/language/Docs/Fields/icon":{"title":"$:/language/Docs/Fields/icon","text":"The title of the tiddler containing the icon associated with a tiddler"},"$:/language/Docs/Fields/library":{"title":"$:/language/Docs/Fields/library","text":"Indicates that a tiddler should be saved as a JavaScript library if set to: ''yes''"},"$:/language/Docs/Fields/list":{"title":"$:/language/Docs/Fields/list","text":"An ordered list of tiddler titles associated with a tiddler"},"$:/language/Docs/Fields/list-before":{"title":"$:/language/Docs/Fields/list-before","text":"If set, the title of a tiddler before which this tiddler should be added to the ordered list of tiddler titles, or at the start of the list if this field is present but empty"},"$:/language/Docs/Fields/list-after":{"title":"$:/language/Docs/Fields/list-after","text":"If set, the title of the tiddler after which this tiddler should be added to the ordered list of tiddler titles, or at the end of the list if this field is present but empty"},"$:/language/Docs/Fields/modified":{"title":"$:/language/Docs/Fields/modified","text":"The date and time at which a tiddler was last modified"},"$:/language/Docs/Fields/modifier":{"title":"$:/language/Docs/Fields/modifier","text":"The tiddler title associated with the person who last modified a tiddler"},"$:/language/Docs/Fields/name":{"title":"$:/language/Docs/Fields/name","text":"The human readable name associated with a plugin tiddler"},"$:/language/Docs/Fields/plugin-priority":{"title":"$:/language/Docs/Fields/plugin-priority","text":"A numerical value indicating the priority of a plugin tiddler"},"$:/language/Docs/Fields/plugin-type":{"title":"$:/language/Docs/Fields/plugin-type","text":"The type of plugin in a plugin tiddler"},"$:/language/Docs/Fields/revision":{"title":"$:/language/Docs/Fields/revision","text":"The revision of the tiddler held at the server"},"$:/language/Docs/Fields/released":{"title":"$:/language/Docs/Fields/released","text":"Date of a TiddlyWiki release"},"$:/language/Docs/Fields/source":{"title":"$:/language/Docs/Fields/source","text":"The source URL associated with a tiddler"},"$:/language/Docs/Fields/subtitle":{"title":"$:/language/Docs/Fields/subtitle","text":"The subtitle text for a wizard"},"$:/language/Docs/Fields/tags":{"title":"$:/language/Docs/Fields/tags","text":"A list of tags associated with a tiddler"},"$:/language/Docs/Fields/text":{"title":"$:/language/Docs/Fields/text","text":"The body text of a tiddler"},"$:/language/Docs/Fields/throttle.refresh":{"title":"$:/language/Docs/Fields/throttle.refresh","text":"If present, throttles refreshes of this tiddler"},"$:/language/Docs/Fields/title":{"title":"$:/language/Docs/Fields/title","text":"The unique name of a tiddler"},"$:/language/Docs/Fields/toc-link":{"title":"$:/language/Docs/Fields/toc-link","text":"Suppresses the tiddler's link in a Table of Contents tree if set to: ''no''"},"$:/language/Docs/Fields/type":{"title":"$:/language/Docs/Fields/type","text":"The content type of a tiddler"},"$:/language/Docs/Fields/version":{"title":"$:/language/Docs/Fields/version","text":"Version information for a plugin"},"$:/language/Docs/Fields/_is_skinny":{"title":"$:/language/Docs/Fields/_is_skinny","text":"If present, indicates that the tiddler text field must be loaded from the server"},"$:/language/Filters/AllTiddlers":{"title":"$:/language/Filters/AllTiddlers","text":"All tiddlers except system tiddlers"},"$:/language/Filters/RecentSystemTiddlers":{"title":"$:/language/Filters/RecentSystemTiddlers","text":"Recently modified tiddlers, including system tiddlers"},"$:/language/Filters/RecentTiddlers":{"title":"$:/language/Filters/RecentTiddlers","text":"Recently modified tiddlers"},"$:/language/Filters/AllTags":{"title":"$:/language/Filters/AllTags","text":"All tags except system tags"},"$:/language/Filters/Missing":{"title":"$:/language/Filters/Missing","text":"Missing tiddlers"},"$:/language/Filters/Drafts":{"title":"$:/language/Filters/Drafts","text":"Draft tiddlers"},"$:/language/Filters/Orphans":{"title":"$:/language/Filters/Orphans","text":"Orphan tiddlers"},"$:/language/Filters/SystemTiddlers":{"title":"$:/language/Filters/SystemTiddlers","text":"System tiddlers"},"$:/language/Filters/ShadowTiddlers":{"title":"$:/language/Filters/ShadowTiddlers","text":"Shadow tiddlers"},"$:/language/Filters/OverriddenShadowTiddlers":{"title":"$:/language/Filters/OverriddenShadowTiddlers","text":"Overridden shadow tiddlers"},"$:/language/Filters/SessionTiddlers":{"title":"$:/language/Filters/SessionTiddlers","text":"Tiddlers modified since the wiki was loaded"},"$:/language/Filters/SystemTags":{"title":"$:/language/Filters/SystemTags","text":"System tags"},"$:/language/Filters/StoryList":{"title":"$:/language/Filters/StoryList","text":"Tiddlers in the story river, excluding &lt;$text text=\"$:/AdvancedSearch\"/&gt;"},"$:/language/Filters/TypedTiddlers":{"title":"$:/language/Filters/TypedTiddlers","text":"Non wiki-text tiddlers"},"GettingStarted":{"title":"GettingStarted","text":"\\define lingo-base() $:/language/ControlPanel/Basics/\nWelcome to ~TiddlyWiki and the ~TiddlyWiki community\n\nBefore you start storing important information in ~TiddlyWiki it is vital to make sure that you can reliably save changes. See https://tiddlywiki.com/#GettingStarted for details\n\n!! Set up this ~TiddlyWiki\n\n&lt;div class=\"tc-control-panel\"&gt;\n\n|&lt;$link to=\"$:/SiteTitle\"&gt;&lt;&lt;lingo Title/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteTitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/SiteSubtitle\"&gt;&lt;&lt;lingo Subtitle/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteSubtitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/DefaultTiddlers\"&gt;&lt;&lt;lingo DefaultTiddlers/Prompt&gt;&gt;&lt;/$link&gt; |&lt;&lt;lingo DefaultTiddlers/TopHint&gt;&gt;&lt;br&gt; &lt;$edit tag=\"textarea\" tiddler=\"$:/DefaultTiddlers\"/&gt;&lt;br&gt;//&lt;&lt;lingo DefaultTiddlers/BottomHint&gt;&gt;// |\n&lt;/div&gt;\n\nSee the [[control panel|$:/ControlPanel]] for more options.\n"},"$:/language/Help/build":{"title":"$:/language/Help/build","description":"Automatically run configured commands","text":"Build the specified build targets for the current wiki. If no build targets are specified then all available targets will be built.\n\n```\n--build &lt;target&gt; [&lt;target&gt; ...]\n```\n\nBuild targets are defined in the `tiddlywiki.info` file of a wiki folder.\n\n"},"$:/language/Help/clearpassword":{"title":"$:/language/Help/clearpassword","description":"Clear a password for subsequent crypto operations","text":"Clear the password for subsequent crypto operations\n\n```\n--clearpassword\n```\n"},"$:/language/Help/default":{"title":"$:/language/Help/default","text":"\\define commandTitle()\n$:/language/Help/$(command)$\n\\end\n```\nusage: tiddlywiki [&lt;wikifolder&gt;] [--&lt;command&gt; [&lt;args&gt;...]...]\n```\n\nAvailable commands:\n\n&lt;ul&gt;\n&lt;$list filter=\"[commands[]sort[title]]\" variable=\"command\"&gt;\n&lt;li&gt;&lt;$link to=&lt;&lt;commandTitle&gt;&gt;&gt;&lt;$macrocall $name=\"command\" $type=\"text/plain\" $output=\"text/plain\"/&gt;&lt;/$link&gt;: &lt;$transclude tiddler=&lt;&lt;commandTitle&gt;&gt; field=\"description\"/&gt;&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n\nTo get detailed help on a command:\n\n```\ntiddlywiki --help &lt;command&gt;\n```\n"},"$:/language/Help/deletetiddlers":{"title":"$:/language/Help/deletetiddlers","description":"Deletes a group of tiddlers","text":"&lt;&lt;.from-version \"5.1.20\"&gt;&gt; Deletes a group of tiddlers identified by a filter.\n\n```\n--deletetiddlers &lt;filter&gt;\n```\n"},"$:/language/Help/editions":{"title":"$:/language/Help/editions","description":"Lists the available editions of TiddlyWiki","text":"Lists the names and descriptions of the available editions. You can create a new wiki of a specified edition with the `--init` command.\n\n```\n--editions\n```\n"},"$:/language/Help/fetch":{"title":"$:/language/Help/fetch","description":"Fetch tiddlers from wiki by URL","text":"Fetch one or more files over HTTP/HTTPS, and import the tiddlers matching a filter, optionally transforming the incoming titles.\n\n```\n--fetch file &lt;url&gt; &lt;import-filter&gt; &lt;transform-filter&gt;\n--fetch files &lt;url-filter&gt; &lt;import-filter&gt; &lt;transform-filter&gt;\n--fetch raw-file &lt;url&gt; &lt;transform-filter&gt;\n--fetch raw-files &lt;url-filter&gt; &lt;transform-filter&gt;\n```\n\nThe \"file\" and \"files\" variants fetch the specified files and attempt to import the tiddlers within them (the same processing as if the files were dragged into the browser window). The \"raw-file\" and \"raw-files\" variants fetch the specified files and then store the raw file data in tiddlers, without applying the import logic.\n\nWith the \"file\" and \"raw-file\" variants only a single file is fetched and the first parameter is the URL of the file to read.\n\nWith the \"files\" and \"raw-files\" variants, multiple files are fetched and the first parameter is a filter yielding a list of URLs of the files to read. For example, given a set of tiddlers tagged \"remote-server\" that have a field \"url\" the filter `[tag[remote-server]get[url]]` will retrieve all the available URLs.\n\nFor the \"file\" and \"files\" variants, the `&lt;import-filter&gt;` parameter specifies a filter determining which tiddlers are imported. It defaults to `[all[tiddlers]]` if not provided.\n\nFor all variants, the `&lt;transform-filter&gt;` parameter specifies an optional filter that transforms the titles of the imported tiddlers. For example, `[addprefix[$:/myimports/]]` would add the prefix `$:/myimports/` to each title.\n\nPreceding the `--fetch` command with `--verbose` will output progress information during the import.\n\nNote that TiddlyWiki will not fetch an older version of an already loaded plugin.\n\nThe following example retrieves all the non-system tiddlers from https://tiddlywiki.com and saves them to a JSON file:\n\n```\ntiddlywiki --verbose --fetch file \"https://tiddlywiki.com/\" \"[!is[system]]\" \"\" --rendertiddler \"$:/core/templates/exporters/JsonFile\" output.json text/plain \"\" exportFilter \"[!is[system]]\"\n```\n\nThe following example retrieves the \"favicon\" file from tiddlywiki.com and saves it in a file called \"output.ico\". Note that the intermediate tiddler \"Icon Tiddler\" is quoted in the \"--fetch\" command because it is being used as a transformation filter to replace the default title, while there are no quotes for the \"--savetiddler\" command because it is being used directly as a title.\n\n```\ntiddlywiki --verbose --fetch raw-file \"https://tiddlywiki.com/favicon.ico\" \"[[Icon Tiddler]]\" --savetiddler \"Icon Tiddler\" output.ico\n```\n\n"},"$:/language/Help/help":{"title":"$:/language/Help/help","description":"Display help for TiddlyWiki commands","text":"Displays help text for a command:\n\n```\n--help [&lt;command&gt;]\n```\n\nIf the command name is omitted then a list of available commands is displayed.\n"},"$:/language/Help/import":{"title":"$:/language/Help/import","description":"Import tiddlers from a file","text":"Import tiddlers from TiddlyWiki (`.html`), `.tiddler`, `.tid`, `.json` or other local files. The deserializer must be explicitly specified, unlike the `load` command which infers the deserializer from the file extension.\n\n```\n--import &lt;filepath&gt; &lt;deserializer&gt; [&lt;title&gt;] [&lt;encoding&gt;]\n```\n\nThe deserializers in the core include:\n\n* application/javascript\n* application/json\n* application/x-tiddler\n* application/x-tiddler-html-div\n* application/x-tiddlers\n* text/html\n* text/plain\n\nThe title of the imported tiddler defaults to the filename.\n\nThe encoding defaults to \"utf8\", but can be \"base64\" for importing binary files.\n\nNote that TiddlyWiki will not import an older version of an already loaded plugin.\n"},"$:/language/Help/init":{"title":"$:/language/Help/init","description":"Initialise a new wiki folder","text":"Initialise an empty [[WikiFolder|WikiFolders]] with a copy of the specified edition.\n\n```\n--init &lt;edition&gt; [&lt;edition&gt; ...]\n```\n\nFor example:\n\n```\ntiddlywiki ./MyWikiFolder --init empty\n```\n\nNote:\n\n* The wiki folder directory will be created if necessary\n* The \"edition\" defaults to ''empty''\n* The init command will fail if the wiki folder is not empty\n* The init command removes any `includeWikis` definitions in the edition's `tiddlywiki.info` file\n* When multiple editions are specified, editions initialised later will overwrite any files shared with earlier editions (so, the final `tiddlywiki.info` file will be copied from the last edition)\n* `--editions` returns a list of available editions\n"},"$:/language/Help/listen":{"title":"$:/language/Help/listen","description":"Provides an HTTP server interface to TiddlyWiki","text":"Serves a wiki over HTTP.\n\nThe listen command uses NamedCommandParameters:\n\n```\n--listen [&lt;name&gt;=&lt;value&gt;]...\n```\n\nAll parameters are optional with safe defaults, and can be specified in any order. The recognised parameters are:\n\n* ''host'' - optional hostname to serve from (defaults to \"127.0.0.1\" aka \"localhost\")\n* ''path-prefix'' - optional prefix for paths\n* ''port'' - port number on which to listen; non-numeric values are interpreted as a system environment variable from which the port number is extracted (defaults to \"8080\")\n* ''credentials'' - pathname of credentials CSV file (relative to wiki folder)\n* ''anon-username'' - the username for signing edits for anonymous users\n* ''username'' - optional username for basic authentication\n* ''password'' - optional password for basic authentication\n* ''authenticated-user-header'' - optional name of header to be used for trusted authentication\n* ''readers'' - comma-separated list of principals allowed to read from this wiki\n* ''writers'' - comma-separated list of principals allowed to write to this wiki\n* ''csrf-disable'' - set to \"yes\" to disable CSRF checks (defaults to \"no\")\n* ''sse-enabled'' - set to \"yes\" to enable Server-sent events (defaults to \"no\")\n* ''root-tiddler'' - the tiddler to serve at the root (defaults to \"$:/core/save/all\")\n* ''root-render-type'' - the content type to which the root tiddler should be rendered (defaults to \"text/plain\")\n* ''root-serve-type'' - the content type with which the root tiddler should be served (defaults to \"text/html\")\n* ''tls-cert'' - pathname of TLS certificate file (relative to wiki folder)\n* ''tls-key'' - pathname of TLS key file (relative to wiki folder)\n* ''debug-level'' - optional debug level; set to \"debug\" to view request details (defaults to \"none\")\n* ''gzip'' - set to \"yes\" to enable gzip compression for some http endpoints (defaults to \"no\")\n* ''use-browser-cache'' - set to \"yes\" to allow the browser to cache responses to save bandwidth (defaults to \"no\")\n\nFor information on opening up your instance to the entire local network, and possible security concerns, see the WebServer tiddler at TiddlyWiki.com.\n\n"},"$:/language/Help/load":{"title":"$:/language/Help/load","description":"Load tiddlers from a file","text":"Load tiddlers from TiddlyWiki (`.html`), `.tiddler`, `.tid`, `.json` or other local files. The processing applied to incoming files is determined by the file extension. Use the alternative `import` command if you need to specify the deserializer and encoding explicitly.\n\n```\n--load &lt;filepath&gt; [noerror]\n--load &lt;dirpath&gt; [noerror]\n```\n\nBy default, the load command raises an error if no tiddlers are found. The error can be suppressed by providing the optional \"noerror\" parameter.\n\nTo load tiddlers from an encrypted TiddlyWiki file you should first specify the password with the PasswordCommand. For example:\n\n```\ntiddlywiki ./MyWiki --password pa55w0rd --load my_encrypted_wiki.html\n```\n\nNote that TiddlyWiki will not load an older version of an already loaded plugin.\n"},"$:/language/Help/makelibrary":{"title":"$:/language/Help/makelibrary","description":"Construct library plugin required by upgrade process","text":"Constructs the `$:/UpgradeLibrary` tiddler for the upgrade process.\n\nThe upgrade library is formatted as an ordinary plugin tiddler with the plugin type `library`. It contains a copy of each of the plugins, themes and language packs available within the TiddlyWiki5 repository.\n\nThis command is intended for internal use; it is only relevant to users constructing a custom upgrade procedure.\n\n```\n--makelibrary &lt;title&gt;\n```\n\nThe title argument defaults to `$:/UpgradeLibrary`.\n"},"$:/language/Help/notfound":{"title":"$:/language/Help/notfound","text":"No such help item"},"$:/language/Help/output":{"title":"$:/language/Help/output","description":"Set the base output directory for subsequent commands","text":"Sets the base output directory for subsequent commands. The default output directory is the `output` subdirectory of the edition directory.\n\n```\n--output &lt;pathname&gt;\n```\n\nIf the specified pathname is relative then it is resolved relative to the current working directory. For example `--output .` sets the output directory to the current working directory.\n\n"},"$:/language/Help/password":{"title":"$:/language/Help/password","description":"Set a password for subsequent crypto operations","text":"Set a password for subsequent crypto operations\n\n```\n--password &lt;password&gt;\n```\n\n''Note'': This should not be used for serving TiddlyWiki with password protection. Instead, see the password option under the [[ServerCommand]].\n"},"$:/language/Help/render":{"title":"$:/language/Help/render","description":"Renders individual tiddlers to files","text":"Render individual tiddlers identified by a filter and save the results to the specified files.\n\nOptionally, the title of a template tiddler can be specified. In this case, instead of directly rendering each tiddler, the template tiddler is rendered with the \"currentTiddler\" variable set to the title of the tiddler that is being rendered.\n\nA name and value for an additional variable may optionally also be specified.\n\n```\n--render &lt;tiddler-filter&gt; [&lt;filename-filter&gt;] [&lt;render-type&gt;] [&lt;template&gt;] [ [&lt;name&gt;] [&lt;value&gt;] ]*\n```\n\n* ''tiddler-filter'': A filter identifying the tiddler(s) to be rendered\n* ''filename-filter'': Optional filter transforming tiddler titles into pathnames. If omitted, defaults to `[is[tiddler]addsuffix[.html]]`, which uses the unchanged tiddler title as the filename\n* ''render-type'': Optional render type: `text/html` (the default) returns the full HTML text and `text/plain` just returns the text content (ie it ignores HTML tags and other unprintable material)\n* ''template'': Optional template through which each tiddler is rendered\n* ''name'': Name of optional variables\n* ''value'': Value of optional variables\n\nBy default, the filename is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nNotes:\n\n* The output directory is not cleared of any existing files\n* Any missing directories in the path to the filename are automatically created.\n* When referring to a tiddler with spaces in its title, take care to use both the quotes required by your shell and also TiddlyWiki's double square brackets: `--render \"[[Motovun Jack.jpg]]\"`\n* The filename filter is evaluated with the selected items being set to the title of the tiddler currently being rendered, allowing the title to be used as the basis for computing the filename. For example `[encodeuricomponent[]addprefix[static/]]` applies URI encoding to each title, and then adds the prefix `static/`\n* Multiple ''name''/''value'' pairs can be used to pass more than one variable\n* The `--render` command is a more flexible replacement for both the `--rendertiddler` and `--rendertiddlers` commands, which are deprecated\n\nExamples:\n\n* `--render \"[!is[system]]\" \"[encodeuricomponent[]addprefix[tiddlers/]addsuffix[.html]]\"` -- renders all non-system tiddlers as files in the subdirectory \"tiddlers\" with URL-encoded titles and the extension HTML\n\n"},"$:/language/Help/rendertiddler":{"title":"$:/language/Help/rendertiddler","description":"Render an individual tiddler as a specified ContentType","text":"(Note: The `--rendertiddler` command is deprecated in favour of the new, more flexible `--render` command)\n\nRender an individual tiddler as a specified ContentType, defaulting to `text/html` and save it to the specified filename.\n\nOptionally the title of a template tiddler can be specified, in which case the template tiddler is rendered with the \"currentTiddler\" variable set to the tiddler that is being rendered (the first parameter value).\n\nA name and value for an additional variable may optionally also be specified.\n\n```\n--rendertiddler &lt;title&gt; &lt;filename&gt; [&lt;type&gt;] [&lt;template&gt;] [&lt;name&gt;] [&lt;value&gt;]\n```\n\nBy default, the filename is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nAny missing directories in the path to the filename are automatically created.\n\nFor example, the following command saves all tiddlers matching the filter `[tag[done]]` to a JSON file titled `output.json` by employing the core template `$:/core/templates/exporters/JsonFile`.\n\n```\n--rendertiddler \"$:/core/templates/exporters/JsonFile\" output.json text/plain \"\" exportFilter \"[tag[done]]\"\n```\n"},"$:/language/Help/rendertiddlers":{"title":"$:/language/Help/rendertiddlers","description":"Render tiddlers matching a filter to a specified ContentType","text":"(Note: The `--rendertiddlers` command is deprecated in favour of the new, more flexible `--render` command)\n\nRender a set of tiddlers matching a filter to separate files of a specified ContentType (defaults to `text/html`) and extension (defaults to `.html`).\n\n```\n--rendertiddlers '&lt;filter&gt;' &lt;template&gt; &lt;pathname&gt; [&lt;type&gt;] [&lt;extension&gt;] [\"noclean\"]\n```\n\nFor example:\n\n```\n--rendertiddlers '[!is[system]]' $:/core/templates/static.tiddler.html ./static text/plain\n```\n\nBy default, the pathname is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nAny files in the target directory are deleted unless the ''noclean'' flag is specified. The target directory is recursively created if it is missing.\n"},"$:/language/Help/save":{"title":"$:/language/Help/save","description":"Saves individual raw tiddlers to files","text":"Saves individual tiddlers identified by a filter in their raw text or binary format to the specified files.\n\n```\n--save &lt;tiddler-filter&gt; &lt;filename-filter&gt;\n```\n\n* ''tiddler-filter'': A filter identifying the tiddler(s) to be saved\n* ''filename-filter'': Optional filter transforming tiddler titles into pathnames. If omitted, defaults to `[is[tiddler]]`, which uses the unchanged tiddler title as the filename\n\nBy default, the filename is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nNotes:\n\n* The output directory is not cleared of any existing files\n* Any missing directories in the path to the filename are automatically created.\n* When saving a tiddler with spaces in its title, take care to use both the quotes required by your shell and also TiddlyWiki's double square brackets: `--save \"[[Motovun Jack.jpg]]\"`\n* The filename filter is evaluated with the selected items being set to the title of the tiddler currently being saved, allowing the title to be used as the basis for computing the filename. For example `[encodeuricomponent[]addprefix[static/]]` applies URI encoding to each title, and then adds the prefix `static/`\n* The `--save` command is a more flexible replacement for both the `--savetiddler` and `--savetiddlers` commands, which are deprecated\n\nExamples:\n\n* `--save \"[!is[system]is[image]]\" \"[encodeuricomponent[]addprefix[tiddlers/]]\"` -- saves all non-system image tiddlers as files in the subdirectory \"tiddlers\" with URL-encoded titles\n"},"$:/language/Help/savetiddler":{"title":"$:/language/Help/savetiddler","description":"Saves a raw tiddler to a file","text":"(Note: The `--savetiddler` command is deprecated in favour of the new, more flexible `--save` command)\n\nSaves an individual tiddler in its raw text or binary format to the specified filename.\n\n```\n--savetiddler &lt;title&gt; &lt;filename&gt;\n```\n\nBy default, the filename is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nAny missing directories in the path to the filename are automatically created.\n"},"$:/language/Help/savetiddlers":{"title":"$:/language/Help/savetiddlers","description":"Saves a group of raw tiddlers to a directory","text":"(Note: The `--savetiddlers` command is deprecated in favour of the new, more flexible `--save` command)\n\nSaves a group of tiddlers in their raw text or binary format to the specified directory.\n\n```\n--savetiddlers &lt;filter&gt; &lt;pathname&gt; [\"noclean\"]\n```\n\nBy default, the pathname is resolved relative to the `output` subdirectory of the edition directory. The `--output` command can be used to direct output to a different directory.\n\nThe output directory is cleared of existing files before saving the specified files. The deletion can be disabled by specifying the ''noclean'' flag.\n\nAny missing directories in the pathname are automatically created.\n"},"$:/language/Help/savewikifolder":{"title":"$:/language/Help/savewikifolder","description":"Saves a wiki to a new wiki folder","text":"&lt;&lt;.from-version \"5.1.20\"&gt;&gt; Saves the current wiki as a wiki folder, including tiddlers, plugins and configuration:\n\n```\n--savewikifolder &lt;wikifolderpath&gt; [&lt;filter&gt;]\n```\n\n* The target wiki folder must be empty or non-existent\n* The filter specifies which tiddlers should be included. It is optional, defaulting to `[all[tiddlers]]`\n* Plugins from the official plugin library are replaced with references to those plugins in the `tiddlywiki.info` file\n* Custom plugins are unpacked into their own folder\n\nA common usage is to convert a TiddlyWiki HTML file into a wiki folder:\n\n```\ntiddlywiki --load ./mywiki.html --savewikifolder ./mywikifolder\n```\n"},"$:/language/Help/server":{"title":"$:/language/Help/server","description":"Provides an HTTP server interface to TiddlyWiki (deprecated in favour of the new listen command)","text":"Legacy command to serve a wiki over HTTP.\n\n```\n--server &lt;port&gt; &lt;root-tiddler&gt; &lt;root-render-type&gt; &lt;root-serve-type&gt; &lt;username&gt; &lt;password&gt; &lt;host&gt; &lt;path-prefix&gt; &lt;debug-level&gt;\n```\n\nThe parameters are:\n\n* ''port'' - port number on which to listen; non-numeric values are interpreted as a system environment variable from which the port number is extracted (defaults to \"8080\")\n* ''root-tiddler'' - the tiddler to serve at the root (defaults to \"$:/core/save/all\")\n* ''root-render-type'' - the content type to which the root tiddler should be rendered (defaults to \"text/plain\")\n* ''root-serve-type'' - the content type with which the root tiddler should be served (defaults to \"text/html\")\n* ''username'' - the default username for signing edits\n* ''password'' - optional password for basic authentication\n* ''host'' - optional hostname to serve from (defaults to \"127.0.0.1\" aka \"localhost\")\n* ''path-prefix'' - optional prefix for paths\n* ''debug-level'' - optional debug level; set to \"debug\" to view request details (defaults to \"none\")\n\nIf the password parameter is specified then the browser will prompt the user for the username and password. Note that the password is transmitted in plain text so this implementation should only be used on a trusted network or over HTTPS.\n\nFor example:\n\n```\n--server 8080 $:/core/save/all text/plain text/html MyUserName passw0rd\n```\n\nThe username and password can be specified as empty strings if you need to set the hostname or pathprefix and don't want to require a password.\n\n\n```\n--server 8080 $:/core/save/all text/plain text/html \"\" \"\" 192.168.0.245\n```\n\nUsing an address like this exposes your system to the local network. For information on opening up your instance to the entire local network, and possible security concerns, see the WebServer tiddler at TiddlyWiki.com.\n\nTo run multiple TiddlyWiki servers at the same time you'll need to put each one on a different port. It can be useful to use an environment variable to pass the port number to the Node.js process. This example references an environment variable called \"MY_PORT_NUMBER\":\n\n```\n--server MY_PORT_NUMBER $:/core/save/all text/plain text/html MyUserName passw0rd\n```\n"},"$:/language/Help/setfield":{"title":"$:/language/Help/setfield","description":"Prepares external tiddlers for use","text":"//Note that this command is experimental and may change or be replaced before being finalised//\n\nSets the specified field of a group of tiddlers to the result of wikifying a template tiddler with the `currentTiddler` variable set to the tiddler.\n\n```\n--setfield &lt;filter&gt; &lt;fieldname&gt; &lt;templatetitle&gt; &lt;rendertype&gt;\n```\n\nThe parameters are:\n\n* ''filter'' - filter identifying the tiddlers to be affected\n* ''fieldname'' - the field to modify (defaults to \"text\")\n* ''templatetitle'' - the tiddler to wikify into the specified field. If blank or missing then the specified field is deleted\n* ''rendertype'' - the text type to render (defaults to \"text/plain\"; \"text/html\" can be used to include HTML tags)\n"},"$:/language/Help/unpackplugin":{"title":"$:/language/Help/unpackplugin","description":"Unpack the payload tiddlers from a plugin","text":"Extract the payload tiddlers from a plugin, creating them as ordinary tiddlers:\n\n```\n--unpackplugin &lt;title&gt;\n```\n"},"$:/language/Help/verbose":{"title":"$:/language/Help/verbose","description":"Triggers verbose output mode","text":"Triggers verbose output, useful for debugging\n\n```\n--verbose\n```\n"},"$:/language/Help/version":{"title":"$:/language/Help/version","description":"Displays the version number of TiddlyWiki","text":"Displays the version number of TiddlyWiki.\n\n```\n--version\n```\n"},"$:/languages/en-GB/icon":{"title":"$:/languages/en-GB/icon","type":"image/svg+xml","text":"&lt;svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\" width=\"1200\" height=\"600\"&gt;\n&lt;clipPath id=\"t\"&gt;\n\t&lt;path d=\"M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z\"/&gt;\n&lt;/clipPath&gt;\n&lt;path d=\"M0,0 v30 h60 v-30 z\" fill=\"#00247d\"/&gt;\n&lt;path d=\"M0,0 L60,30 M60,0 L0,30\" stroke=\"#fff\" stroke-width=\"6\"/&gt;\n&lt;path d=\"M0,0 L60,30 M60,0 L0,30\" clip-path=\"url(#t)\" stroke=\"#cf142b\" stroke-width=\"4\"/&gt;\n&lt;path d=\"M30,0 v30 M0,15 h60\" stroke=\"#fff\" stroke-width=\"10\"/&gt;\n&lt;path d=\"M30,0 v30 M0,15 h60\" stroke=\"#cf142b\" stroke-width=\"6\"/&gt;\n&lt;/svg&gt;\n"},"$:/language/Import/Editor/Import/Heading":{"title":"$:/language/Import/Editor/Import/Heading","text":"Import images and insert them into the editor."},"$:/language/Import/Imported/Hint":{"title":"$:/language/Import/Imported/Hint","text":"The following tiddlers were imported:"},"$:/language/Import/Listing/Cancel/Caption":{"title":"$:/language/Import/Listing/Cancel/Caption","text":"Cancel"},"$:/language/Import/Listing/Cancel/Warning":{"title":"$:/language/Import/Listing/Cancel/Warning","text":"Do you wish to cancel the import?"},"$:/language/Import/Listing/Hint":{"title":"$:/language/Import/Listing/Hint","text":"These tiddlers are ready to import:"},"$:/language/Import/Listing/Import/Caption":{"title":"$:/language/Import/Listing/Import/Caption","text":"Import"},"$:/language/Import/Listing/Select/Caption":{"title":"$:/language/Import/Listing/Select/Caption","text":"Select"},"$:/language/Import/Listing/Status/Caption":{"title":"$:/language/Import/Listing/Status/Caption","text":"Status"},"$:/language/Import/Listing/Title/Caption":{"title":"$:/language/Import/Listing/Title/Caption","text":"Title"},"$:/language/Import/Listing/Preview":{"title":"$:/language/Import/Listing/Preview","text":"Preview:"},"$:/language/Import/Listing/Preview/Text":{"title":"$:/language/Import/Listing/Preview/Text","text":"Text"},"$:/language/Import/Listing/Preview/TextRaw":{"title":"$:/language/Import/Listing/Preview/TextRaw","text":"Text (Raw)"},"$:/language/Import/Listing/Preview/Fields":{"title":"$:/language/Import/Listing/Preview/Fields","text":"Fields"},"$:/language/Import/Listing/Preview/Diff":{"title":"$:/language/Import/Listing/Preview/Diff","text":"Diff"},"$:/language/Import/Listing/Preview/DiffFields":{"title":"$:/language/Import/Listing/Preview/DiffFields","text":"Diff (Fields)"},"$:/language/Import/Listing/Rename/Tooltip":{"title":"$:/language/Import/Listing/Rename/Tooltip","text":"Rename tiddler before importing"},"$:/language/Import/Listing/Rename/Prompt":{"title":"$:/language/Import/Listing/Rename/Prompt","text":"Rename to:"},"$:/language/Import/Listing/Rename/ConfirmRename":{"title":"$:/language/Import/Listing/Rename/ConfirmRename","text":"Rename tiddler"},"$:/language/Import/Listing/Rename/CancelRename":{"title":"$:/language/Import/Listing/Rename/CancelRename","text":"Cancel"},"$:/language/Import/Listing/Rename/OverwriteWarning":{"title":"$:/language/Import/Listing/Rename/OverwriteWarning","text":"A tiddler with this title already exists."},"$:/language/Import/Upgrader/Plugins/Suppressed/Incompatible":{"title":"$:/language/Import/Upgrader/Plugins/Suppressed/Incompatible","text":"Blocked incompatible or obsolete plugin."},"$:/language/Import/Upgrader/Plugins/Suppressed/Version":{"title":"$:/language/Import/Upgrader/Plugins/Suppressed/Version","text":"Blocked plugin (due to incoming &lt;&lt;incoming&gt;&gt; not being newer than existing &lt;&lt;existing&gt;&gt;)."},"$:/language/Import/Upgrader/Plugins/Upgraded":{"title":"$:/language/Import/Upgrader/Plugins/Upgraded","text":"Upgraded plugin from &lt;&lt;incoming&gt;&gt; to &lt;&lt;upgraded&gt;&gt;."},"$:/language/Import/Upgrader/State/Suppressed":{"title":"$:/language/Import/Upgrader/State/Suppressed","text":"Blocked temporary state tiddler."},"$:/language/Import/Upgrader/System/Disabled":{"title":"$:/language/Import/Upgrader/System/Disabled","text":"Disabled system tiddler."},"$:/language/Import/Upgrader/System/Suppressed":{"title":"$:/language/Import/Upgrader/System/Suppressed","text":"Blocked system tiddler."},"$:/language/Import/Upgrader/System/Warning":{"title":"$:/language/Import/Upgrader/System/Warning","text":"Core module tiddler."},"$:/language/Import/Upgrader/System/Alert":{"title":"$:/language/Import/Upgrader/System/Alert","text":"You are about to import a tiddler that will overwrite a core module tiddler. This is not recommended as it may make the system unstable."},"$:/language/Import/Upgrader/ThemeTweaks/Created":{"title":"$:/language/Import/Upgrader/ThemeTweaks/Created","text":"Migrated theme tweak from &lt;$text text=&lt;&lt;from&gt;&gt;/&gt;."},"$:/language/Import/Upgrader/Tiddler/Disabled":{"title":"$:/language/Import/Upgrader/Tiddler/Disabled","text":"Disabled tiddler."},"$:/language/Import/Upgrader/Tiddler/Selected":{"title":"$:/language/Import/Upgrader/Tiddler/Selected","text":"User selected."},"$:/language/Import/Upgrader/Tiddler/Unselected":{"title":"$:/language/Import/Upgrader/Tiddler/Unselected","text":"Unselected tiddler."},"$:/language/AboveStory/ClassicPlugin/Warning":{"title":"$:/language/AboveStory/ClassicPlugin/Warning","text":"It looks like you are trying to load a plugin designed for ~TiddlyWiki Classic. Please note that [[these plugins do not work with TiddlyWiki version 5.x.x|https://tiddlywiki.com/#TiddlyWikiClassic]]. ~TiddlyWiki Classic plugins detected:"},"$:/language/BinaryWarning/Prompt":{"title":"$:/language/BinaryWarning/Prompt","text":"This tiddler contains binary data"},"$:/language/ClassicWarning/Hint":{"title":"$:/language/ClassicWarning/Hint","text":"This tiddler is written in TiddlyWiki Classic wiki text format, which is not fully compatible with TiddlyWiki version 5. See https://tiddlywiki.com/static/Upgrading.html for more details."},"$:/language/ClassicWarning/Upgrade/Caption":{"title":"$:/language/ClassicWarning/Upgrade/Caption","text":"upgrade"},"$:/language/CloseAll/Button":{"title":"$:/language/CloseAll/Button","text":"close all"},"$:/language/ColourPicker/Recent":{"title":"$:/language/ColourPicker/Recent","text":"Recent:"},"$:/language/ConfirmCancelTiddler":{"title":"$:/language/ConfirmCancelTiddler","text":"Do you wish to discard changes to the tiddler \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"?"},"$:/language/ConfirmDeleteTiddler":{"title":"$:/language/ConfirmDeleteTiddler","text":"Do you wish to delete the tiddler \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"?"},"$:/language/ConfirmOverwriteTiddler":{"title":"$:/language/ConfirmOverwriteTiddler","text":"Do you wish to overwrite the tiddler \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"?"},"$:/language/ConfirmEditShadowTiddler":{"title":"$:/language/ConfirmEditShadowTiddler","text":"You are about to edit a ShadowTiddler. Any changes will override the default system making future upgrades non-trivial. Are you sure you want to edit \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"?"},"$:/language/ConfirmAction":{"title":"$:/language/ConfirmAction","text":"Do you wish to proceed?"},"$:/language/Count":{"title":"$:/language/Count","text":"count"},"$:/language/DefaultNewTiddlerTitle":{"title":"$:/language/DefaultNewTiddlerTitle","text":"New Tiddler"},"$:/language/Diffs/CountMessage":{"title":"$:/language/Diffs/CountMessage","text":"&lt;&lt;diff-count&gt;&gt; differences"},"$:/language/DropMessage":{"title":"$:/language/DropMessage","text":"Drop here (or use the 'Escape' key to cancel)"},"$:/language/Encryption/Cancel":{"title":"$:/language/Encryption/Cancel","text":"Cancel"},"$:/language/Encryption/ConfirmClearPassword":{"title":"$:/language/Encryption/ConfirmClearPassword","text":"Do you wish to clear the password? This will remove the encryption applied when saving this wiki"},"$:/language/Encryption/PromptSetPassword":{"title":"$:/language/Encryption/PromptSetPassword","text":"Set a new password for this TiddlyWiki"},"$:/language/Encryption/Username":{"title":"$:/language/Encryption/Username","text":"Username"},"$:/language/Encryption/Password":{"title":"$:/language/Encryption/Password","text":"Password"},"$:/language/Encryption/RepeatPassword":{"title":"$:/language/Encryption/RepeatPassword","text":"Repeat password"},"$:/language/Encryption/PasswordNoMatch":{"title":"$:/language/Encryption/PasswordNoMatch","text":"Passwords do not match"},"$:/language/Encryption/SetPassword":{"title":"$:/language/Encryption/SetPassword","text":"Set password"},"$:/language/Error/Caption":{"title":"$:/language/Error/Caption","text":"Error"},"$:/language/Error/Filter":{"title":"$:/language/Error/Filter","text":"Filter error"},"$:/language/Error/FilterSyntax":{"title":"$:/language/Error/FilterSyntax","text":"Syntax error in filter expression"},"$:/language/Error/FilterRunPrefix":{"title":"$:/language/Error/FilterRunPrefix","text":"Filter Error: Unknown prefix for filter run"},"$:/language/Error/IsFilterOperator":{"title":"$:/language/Error/IsFilterOperator","text":"Filter Error: Unknown operand for the 'is' filter operator"},"$:/language/Error/FormatFilterOperator":{"title":"$:/language/Error/FormatFilterOperator","text":"Filter Error: Unknown suffix for the 'format' filter operator"},"$:/language/Error/LoadingPluginLibrary":{"title":"$:/language/Error/LoadingPluginLibrary","text":"Error loading plugin library"},"$:/language/Error/NetworkErrorAlert":{"title":"$:/language/Error/NetworkErrorAlert","text":"`&lt;h2&gt;''Network Error''&lt;/h2&gt;It looks like the connection to the server has been lost. This may indicate a problem with your network connection. Please attempt to restore network connectivity before continuing.&lt;br&gt;&lt;br&gt;''Any unsaved changes will be automatically synchronised when connectivity is restored''.`"},"$:/language/Error/PutEditConflict":{"title":"$:/language/Error/PutEditConflict","text":"File changed on server"},"$:/language/Error/PutForbidden":{"title":"$:/language/Error/PutForbidden","text":"Permission denied"},"$:/language/Error/PutUnauthorized":{"title":"$:/language/Error/PutUnauthorized","text":"Authentication required"},"$:/language/Error/RecursiveTransclusion":{"title":"$:/language/Error/RecursiveTransclusion","text":"Recursive transclusion error in transclude widget"},"$:/language/Error/RetrievingSkinny":{"title":"$:/language/Error/RetrievingSkinny","text":"Error retrieving skinny tiddler list"},"$:/language/Error/SavingToTWEdit":{"title":"$:/language/Error/SavingToTWEdit","text":"Error saving to TWEdit"},"$:/language/Error/WhileSaving":{"title":"$:/language/Error/WhileSaving","text":"Error while saving"},"$:/language/Error/XMLHttpRequest":{"title":"$:/language/Error/XMLHttpRequest","text":"XMLHttpRequest error code"},"$:/language/InternalJavaScriptError/Title":{"title":"$:/language/InternalJavaScriptError/Title","text":"Internal JavaScript Error"},"$:/language/InternalJavaScriptError/Hint":{"title":"$:/language/InternalJavaScriptError/Hint","text":"Well, this is embarrassing. It is recommended that you restart TiddlyWiki by refreshing your browser"},"$:/language/InvalidFieldName":{"title":"$:/language/InvalidFieldName","text":"Illegal characters in field name \"&lt;$text text=&lt;&lt;fieldName&gt;&gt;/&gt;\". Fields can only contain lowercase letters, digits and the characters underscore (`_`), hyphen (`-`) and period (`.`)"},"$:/language/LayoutSwitcher/Description":{"title":"$:/language/LayoutSwitcher/Description","text":"Open the layout switcher"},"$:/language/LazyLoadingWarning":{"title":"$:/language/LazyLoadingWarning","text":"&lt;p&gt;Trying to load external content from ''&lt;$text text={{!!_canonical_uri}}/&gt;''&lt;/p&gt;&lt;p&gt;If this message doesn't disappear, either the tiddler content type doesn't match the type of the external content, or you may be using a browser that doesn't support external content for wikis loaded as standalone files. See https://tiddlywiki.com/#ExternalText&lt;/p&gt;"},"$:/language/LoginToTiddlySpace":{"title":"$:/language/LoginToTiddlySpace","text":"Login to TiddlySpace"},"$:/language/Manager/Controls/FilterByTag/None":{"title":"$:/language/Manager/Controls/FilterByTag/None","text":"(none)"},"$:/language/Manager/Controls/FilterByTag/Prompt":{"title":"$:/language/Manager/Controls/FilterByTag/Prompt","text":"Filter by tag:"},"$:/language/Manager/Controls/Order/Prompt":{"title":"$:/language/Manager/Controls/Order/Prompt","text":"Reverse order"},"$:/language/Manager/Controls/Search/Placeholder":{"title":"$:/language/Manager/Controls/Search/Placeholder","text":"Search"},"$:/language/Manager/Controls/Search/Prompt":{"title":"$:/language/Manager/Controls/Search/Prompt","text":"Search:"},"$:/language/Manager/Controls/Show/Option/Tags":{"title":"$:/language/Manager/Controls/Show/Option/Tags","text":"tags"},"$:/language/Manager/Controls/Show/Option/Tiddlers":{"title":"$:/language/Manager/Controls/Show/Option/Tiddlers","text":"tiddlers"},"$:/language/Manager/Controls/Show/Prompt":{"title":"$:/language/Manager/Controls/Show/Prompt","text":"Show:"},"$:/language/Manager/Controls/Sort/Prompt":{"title":"$:/language/Manager/Controls/Sort/Prompt","text":"Sort by:"},"$:/language/Manager/Item/Colour":{"title":"$:/language/Manager/Item/Colour","text":"Colour"},"$:/language/Manager/Item/Fields":{"title":"$:/language/Manager/Item/Fields","text":"Fields"},"$:/language/Manager/Item/Icon/None":{"title":"$:/language/Manager/Item/Icon/None","text":"(none)"},"$:/language/Manager/Item/Icon":{"title":"$:/language/Manager/Item/Icon","text":"Icon"},"$:/language/Manager/Item/RawText":{"title":"$:/language/Manager/Item/RawText","text":"Raw text"},"$:/language/Manager/Item/Tags":{"title":"$:/language/Manager/Item/Tags","text":"Tags"},"$:/language/Manager/Item/Tools":{"title":"$:/language/Manager/Item/Tools","text":"Tools"},"$:/language/Manager/Item/WikifiedText":{"title":"$:/language/Manager/Item/WikifiedText","text":"Wikified text"},"$:/language/MissingTiddler/Hint":{"title":"$:/language/MissingTiddler/Hint","text":"Missing tiddler \"&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;\" -- click {{||$:/core/ui/Buttons/edit}} to create"},"$:/language/No":{"title":"$:/language/No","text":"No"},"$:/language/OfficialPluginLibrary":{"title":"$:/language/OfficialPluginLibrary","text":"Official ~TiddlyWiki Plugin Library"},"$:/language/OfficialPluginLibrary/Hint":{"title":"$:/language/OfficialPluginLibrary/Hint","text":"The official ~TiddlyWiki plugin library at tiddlywiki.com. Plugins, themes and language packs are maintained by the core team."},"$:/language/PageTemplate/Description":{"title":"$:/language/PageTemplate/Description","text":"the default ~TiddlyWiki layout"},"$:/language/PageTemplate/Name":{"title":"$:/language/PageTemplate/Name","text":"Default ~PageTemplate"},"$:/language/PluginReloadWarning":{"title":"$:/language/PluginReloadWarning","text":"Please save {{$:/core/ui/Buttons/save-wiki}} and reload {{$:/core/ui/Buttons/refresh}} to allow changes to ~JavaScript plugins to take effect"},"$:/language/RecentChanges/DateFormat":{"title":"$:/language/RecentChanges/DateFormat","text":"DDth MMM YYYY"},"$:/language/Shortcuts/Input/AdvancedSearch/Hint":{"title":"$:/language/Shortcuts/Input/AdvancedSearch/Hint","text":"Open the ~AdvancedSearch panel from within the sidebar search field"},"$:/language/Shortcuts/Input/Accept/Hint":{"title":"$:/language/Shortcuts/Input/Accept/Hint","text":"Accept the selected item"},"$:/language/Shortcuts/Input/AcceptVariant/Hint":{"title":"$:/language/Shortcuts/Input/AcceptVariant/Hint","text":"Accept the selected item (variant)"},"$:/language/Shortcuts/Input/Cancel/Hint":{"title":"$:/language/Shortcuts/Input/Cancel/Hint","text":"Clear the input field"},"$:/language/Shortcuts/Input/Down/Hint":{"title":"$:/language/Shortcuts/Input/Down/Hint","text":"Select the next item"},"$:/language/Shortcuts/Input/Tab-Left/Hint":{"title":"$:/language/Shortcuts/Input/Tab-Left/Hint","text":"Select the previous Tab"},"$:/language/Shortcuts/Input/Tab-Right/Hint":{"title":"$:/language/Shortcuts/Input/Tab-Right/Hint","text":"Select the next Tab"},"$:/language/Shortcuts/Input/Up/Hint":{"title":"$:/language/Shortcuts/Input/Up/Hint","text":"Select the previous item"},"$:/language/Shortcuts/SidebarLayout/Hint":{"title":"$:/language/Shortcuts/SidebarLayout/Hint","text":"Change the sidebar layout"},"$:/language/Switcher/Subtitle/theme":{"title":"$:/language/Switcher/Subtitle/theme","text":"Switch Theme"},"$:/language/Switcher/Subtitle/layout":{"title":"$:/language/Switcher/Subtitle/layout","text":"Switch Layout"},"$:/language/Switcher/Subtitle/language":{"title":"$:/language/Switcher/Subtitle/language","text":"Switch Language"},"$:/language/Switcher/Subtitle/palette":{"title":"$:/language/Switcher/Subtitle/palette","text":"Switch Palette"},"$:/language/SystemTiddler/Tooltip":{"title":"$:/language/SystemTiddler/Tooltip","text":"This is a system tiddler"},"$:/language/SystemTiddlers/Include/Prompt":{"title":"$:/language/SystemTiddlers/Include/Prompt","text":"Include system tiddlers"},"$:/language/TagManager/Colour/Heading":{"title":"$:/language/TagManager/Colour/Heading","text":"Colour"},"$:/language/TagManager/Count/Heading":{"title":"$:/language/TagManager/Count/Heading","text":"Count"},"$:/language/TagManager/Icon/Heading":{"title":"$:/language/TagManager/Icon/Heading","text":"Icon"},"$:/language/TagManager/Icons/None":{"title":"$:/language/TagManager/Icons/None","text":"None"},"$:/language/TagManager/Info/Heading":{"title":"$:/language/TagManager/Info/Heading","text":"Info"},"$:/language/TagManager/Tag/Heading":{"title":"$:/language/TagManager/Tag/Heading","text":"Tag"},"$:/language/Tiddler/DateFormat":{"title":"$:/language/Tiddler/DateFormat","text":"DDth MMM YYYY at hh12:0mmam"},"$:/language/UnsavedChangesWarning":{"title":"$:/language/UnsavedChangesWarning","text":"You have unsaved changes in TiddlyWiki"},"$:/language/Yes":{"title":"$:/language/Yes","text":"Yes"},"$:/language/Modals/Download":{"title":"$:/language/Modals/Download","subtitle":"Download changes","footer":"&lt;$button message=\"tm-close-tiddler\"&gt;Close&lt;/$button&gt;","help":"https://tiddlywiki.com/static/DownloadingChanges.html","text":"Your browser only supports manual saving.\n\nTo save your modified wiki, right click on the download link below and select \"Download file\" or \"Save file\", and then choose the folder and filename.\n\n//You can marginally speed things up by clicking the link with the control key (Windows) or the options/alt key (Mac OS X). You will not be prompted for the folder or filename, but your browser is likely to give it an unrecognisable name -- you may need to rename the file to include an `.html` extension before you can do anything useful with it.//\n\nOn smartphones that do not allow files to be downloaded you can instead bookmark the link, and then sync your bookmarks to a desktop computer from where the wiki can be saved normally.\n"},"$:/language/Modals/SaveInstructions":{"title":"$:/language/Modals/SaveInstructions","subtitle":"Save your work","footer":"&lt;$button message=\"tm-close-tiddler\"&gt;Close&lt;/$button&gt;","help":"https://tiddlywiki.com/static/SavingChanges.html","text":"Your changes to this wiki need to be saved as a ~TiddlyWiki HTML file.\n\n!!! Desktop browsers\n\n# Select ''Save As'' from the ''File'' menu\n# Choose a filename and location\n#* Some browsers also require you to explicitly specify the file saving format as ''Webpage, HTML only'' or similar\n# Close this tab\n\n!!! Smartphone browsers\n\n# Create a bookmark to this page\n#* If you've got iCloud or Google Sync set up then the bookmark will automatically sync to your desktop where you can open it and save it as above\n# Close this tab\n\n//If you open the bookmark again in Mobile Safari you will see this message again. If you want to go ahead and use the file, just click the ''close'' button below//\n"},"$:/config/NewJournal/Title":{"title":"$:/config/NewJournal/Title","text":"DDth MMM YYYY"},"$:/config/NewJournal/Text":{"title":"$:/config/NewJournal/Text","text":""},"$:/config/NewJournal/Tags":{"title":"$:/config/NewJournal/Tags","text":"Journal\n"},"$:/language/Notifications/Save/Done":{"title":"$:/language/Notifications/Save/Done","text":"Saved wiki"},"$:/language/Notifications/Save/Starting":{"title":"$:/language/Notifications/Save/Starting","text":"Starting to save wiki"},"$:/language/Notifications/CopiedToClipboard/Succeeded":{"title":"$:/language/Notifications/CopiedToClipboard/Succeeded","text":"Copied to clipboard!"},"$:/language/Notifications/CopiedToClipboard/Failed":{"title":"$:/language/Notifications/CopiedToClipboard/Failed","text":"Failed to copy to clipboard!"},"$:/language/Search/DefaultResults/Caption":{"title":"$:/language/Search/DefaultResults/Caption","text":"List"},"$:/language/Search/Filter/Caption":{"title":"$:/language/Search/Filter/Caption","text":"Filter"},"$:/language/Search/Filter/Hint":{"title":"$:/language/Search/Filter/Hint","text":"Search via a [[filter expression|https://tiddlywiki.com/static/Filters.html]]"},"$:/language/Search/Filter/Matches":{"title":"$:/language/Search/Filter/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; matches&lt;/small&gt;//"},"$:/language/Search/Matches":{"title":"$:/language/Search/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; matches&lt;/small&gt;//"},"$:/language/Search/Matches/All":{"title":"$:/language/Search/Matches/All","text":"All matches:"},"$:/language/Search/Matches/Title":{"title":"$:/language/Search/Matches/Title","text":"Title matches:"},"$:/language/Search/Search":{"title":"$:/language/Search/Search","text":"Search"},"$:/language/Search/Search/TooShort":{"title":"$:/language/Search/Search/TooShort","text":"Search text too short"},"$:/language/Search/Shadows/Caption":{"title":"$:/language/Search/Shadows/Caption","text":"Shadows"},"$:/language/Search/Shadows/Hint":{"title":"$:/language/Search/Shadows/Hint","text":"Search for shadow tiddlers"},"$:/language/Search/Shadows/Matches":{"title":"$:/language/Search/Shadows/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; matches&lt;/small&gt;//"},"$:/language/Search/Standard/Caption":{"title":"$:/language/Search/Standard/Caption","text":"Standard"},"$:/language/Search/Standard/Hint":{"title":"$:/language/Search/Standard/Hint","text":"Search for standard tiddlers"},"$:/language/Search/Standard/Matches":{"title":"$:/language/Search/Standard/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; matches&lt;/small&gt;//"},"$:/language/Search/System/Caption":{"title":"$:/language/Search/System/Caption","text":"System"},"$:/language/Search/System/Hint":{"title":"$:/language/Search/System/Hint","text":"Search for system tiddlers"},"$:/language/Search/System/Matches":{"title":"$:/language/Search/System/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; matches&lt;/small&gt;//"},"$:/language/SideBar/All/Caption":{"title":"$:/language/SideBar/All/Caption","text":"All"},"$:/language/SideBar/Contents/Caption":{"title":"$:/language/SideBar/Contents/Caption","text":"Contents"},"$:/language/SideBar/Drafts/Caption":{"title":"$:/language/SideBar/Drafts/Caption","text":"Drafts"},"$:/language/SideBar/Explorer/Caption":{"title":"$:/language/SideBar/Explorer/Caption","text":"Explorer"},"$:/language/SideBar/Missing/Caption":{"title":"$:/language/SideBar/Missing/Caption","text":"Missing"},"$:/language/SideBar/More/Caption":{"title":"$:/language/SideBar/More/Caption","text":"More"},"$:/language/SideBar/Open/Caption":{"title":"$:/language/SideBar/Open/Caption","text":"Open"},"$:/language/SideBar/Orphans/Caption":{"title":"$:/language/SideBar/Orphans/Caption","text":"Orphans"},"$:/language/SideBar/Recent/Caption":{"title":"$:/language/SideBar/Recent/Caption","text":"Recent"},"$:/language/SideBar/Shadows/Caption":{"title":"$:/language/SideBar/Shadows/Caption","text":"Shadows"},"$:/language/SideBar/System/Caption":{"title":"$:/language/SideBar/System/Caption","text":"System"},"$:/language/SideBar/Tags/Caption":{"title":"$:/language/SideBar/Tags/Caption","text":"Tags"},"$:/language/SideBar/Tags/Untagged/Caption":{"title":"$:/language/SideBar/Tags/Untagged/Caption","text":"untagged"},"$:/language/SideBar/Tools/Caption":{"title":"$:/language/SideBar/Tools/Caption","text":"Tools"},"$:/language/SideBar/Types/Caption":{"title":"$:/language/SideBar/Types/Caption","text":"Types"},"$:/SiteSubtitle":{"title":"$:/SiteSubtitle","text":"a non-linear personal web notebook"},"$:/SiteTitle":{"title":"$:/SiteTitle","text":"My ~TiddlyWiki"},"$:/language/Snippets/ListByTag":{"title":"$:/language/Snippets/ListByTag","tags":"$:/tags/TextEditor/Snippet","caption":"List of tiddlers by tag","text":"&lt;&lt;list-links \"[tag[task]sort[title]]\"&gt;&gt;\n"},"$:/language/Snippets/MacroDefinition":{"title":"$:/language/Snippets/MacroDefinition","tags":"$:/tags/TextEditor/Snippet","caption":"Macro definition","text":"\\define macroName(param1:\"default value\",param2)\nText of the macro\n\\end\n"},"$:/language/Snippets/Table4x3":{"title":"$:/language/Snippets/Table4x3","tags":"$:/tags/TextEditor/Snippet","caption":"Table with 4 columns by 3 rows","text":"|! |!Alpha |!Beta |!Gamma |!Delta |\n|!One | | | | |\n|!Two | | | | |\n|!Three | | | | |\n"},"$:/language/Snippets/TableOfContents":{"title":"$:/language/Snippets/TableOfContents","tags":"$:/tags/TextEditor/Snippet","caption":"Table of Contents","text":"&lt;div class=\"tc-table-of-contents\"&gt;\n\n&lt;&lt;toc-selective-expandable 'TableOfContents'&gt;&gt;\n\n&lt;/div&gt;"},"$:/language/ThemeTweaks/ThemeTweaks":{"title":"$:/language/ThemeTweaks/ThemeTweaks","text":"Theme Tweaks"},"$:/language/ThemeTweaks/ThemeTweaks/Hint":{"title":"$:/language/ThemeTweaks/ThemeTweaks/Hint","text":"You can tweak certain aspects of the ''Vanilla'' theme."},"$:/language/ThemeTweaks/Options":{"title":"$:/language/ThemeTweaks/Options","text":"Options"},"$:/language/ThemeTweaks/Options/SidebarLayout":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout","text":"Sidebar layout"},"$:/language/ThemeTweaks/Options/SidebarLayout/Fixed-Fluid":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout/Fixed-Fluid","text":"Fixed story, fluid sidebar"},"$:/language/ThemeTweaks/Options/SidebarLayout/Fluid-Fixed":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout/Fluid-Fixed","text":"Fluid story, fixed sidebar"},"$:/language/ThemeTweaks/Options/StickyTitles":{"title":"$:/language/ThemeTweaks/Options/StickyTitles","text":"Sticky titles"},"$:/language/ThemeTweaks/Options/StickyTitles/Hint":{"title":"$:/language/ThemeTweaks/Options/StickyTitles/Hint","text":"Causes tiddler titles to \"stick\" to the top of the browser window"},"$:/language/ThemeTweaks/Options/CodeWrapping":{"title":"$:/language/ThemeTweaks/Options/CodeWrapping","text":"Wrap long lines in code blocks"},"$:/language/ThemeTweaks/Settings":{"title":"$:/language/ThemeTweaks/Settings","text":"Settings"},"$:/language/ThemeTweaks/Settings/FontFamily":{"title":"$:/language/ThemeTweaks/Settings/FontFamily","text":"Font family"},"$:/language/ThemeTweaks/Settings/CodeFontFamily":{"title":"$:/language/ThemeTweaks/Settings/CodeFontFamily","text":"Code font family"},"$:/language/ThemeTweaks/Settings/EditorFontFamily":{"title":"$:/language/ThemeTweaks/Settings/EditorFontFamily","text":"Editor font family"},"$:/language/ThemeTweaks/Settings/BackgroundImage":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImage","text":"Page background image"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment","text":"Page background image attachment"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Scroll":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Scroll","text":"Scroll with tiddlers"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Fixed":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Fixed","text":"Fixed to window"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize","text":"Page background image size"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Auto":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Auto","text":"Auto"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Cover":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Cover","text":"Cover"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Contain":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Contain","text":"Contain"},"$:/language/ThemeTweaks/Metrics":{"title":"$:/language/ThemeTweaks/Metrics","text":"Sizes"},"$:/language/ThemeTweaks/Metrics/FontSize":{"title":"$:/language/ThemeTweaks/Metrics/FontSize","text":"Font size"},"$:/language/ThemeTweaks/Metrics/LineHeight":{"title":"$:/language/ThemeTweaks/Metrics/LineHeight","text":"Line height"},"$:/language/ThemeTweaks/Metrics/BodyFontSize":{"title":"$:/language/ThemeTweaks/Metrics/BodyFontSize","text":"Font size for tiddler body"},"$:/language/ThemeTweaks/Metrics/BodyLineHeight":{"title":"$:/language/ThemeTweaks/Metrics/BodyLineHeight","text":"Line height for tiddler body"},"$:/language/ThemeTweaks/Metrics/StoryLeft":{"title":"$:/language/ThemeTweaks/Metrics/StoryLeft","text":"Story left position"},"$:/language/ThemeTweaks/Metrics/StoryLeft/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryLeft/Hint","text":"how far the left margin of the story river&lt;br&gt;(tiddler area) is from the left of the page"},"$:/language/ThemeTweaks/Metrics/StoryTop":{"title":"$:/language/ThemeTweaks/Metrics/StoryTop","text":"Story top position"},"$:/language/ThemeTweaks/Metrics/StoryTop/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryTop/Hint","text":"how far the top margin of the story river&lt;br&gt;is from the top of the page"},"$:/language/ThemeTweaks/Metrics/StoryRight":{"title":"$:/language/ThemeTweaks/Metrics/StoryRight","text":"Story right"},"$:/language/ThemeTweaks/Metrics/StoryRight/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryRight/Hint","text":"how far the left margin of the sidebar &lt;br&gt;is from the left of the page"},"$:/language/ThemeTweaks/Metrics/StoryWidth":{"title":"$:/language/ThemeTweaks/Metrics/StoryWidth","text":"Story width"},"$:/language/ThemeTweaks/Metrics/StoryWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryWidth/Hint","text":"the overall width of the story river"},"$:/language/ThemeTweaks/Metrics/TiddlerWidth":{"title":"$:/language/ThemeTweaks/Metrics/TiddlerWidth","text":"Tiddler width"},"$:/language/ThemeTweaks/Metrics/TiddlerWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/TiddlerWidth/Hint","text":"within the story river"},"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint","text":"Sidebar breakpoint"},"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint/Hint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint/Hint","text":"the minimum page width at which the story&lt;br&gt;river and sidebar will appear side by side"},"$:/language/ThemeTweaks/Metrics/SidebarWidth":{"title":"$:/language/ThemeTweaks/Metrics/SidebarWidth","text":"Sidebar width"},"$:/language/ThemeTweaks/Metrics/SidebarWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarWidth/Hint","text":"the width of the sidebar in fluid-fixed layout"},"$:/language/TiddlerInfo/Advanced/Caption":{"title":"$:/language/TiddlerInfo/Advanced/Caption","text":"Advanced"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Empty/Hint":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Empty/Hint","text":"none"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Heading":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Heading","text":"Plugin Details"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Hint":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Hint","text":"This plugin contains the following shadow tiddlers:"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Heading":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Heading","text":"Shadow Status"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/NotShadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/NotShadow/Hint","text":"The tiddler &lt;$link to=&lt;&lt;infoTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;infoTiddler&gt;&gt;/&gt;&lt;/$link&gt; is not a shadow tiddler"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Hint","text":"The tiddler &lt;$link to=&lt;&lt;infoTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;infoTiddler&gt;&gt;/&gt;&lt;/$link&gt; is a shadow tiddler"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Source":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Source","text":"It is defined in the plugin &lt;$link to=&lt;&lt;pluginTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;pluginTiddler&gt;&gt;/&gt;&lt;/$link&gt;"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/OverriddenShadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/OverriddenShadow/Hint","text":"It is overridden by an ordinary tiddler"},"$:/language/TiddlerInfo/Fields/Caption":{"title":"$:/language/TiddlerInfo/Fields/Caption","text":"Fields"},"$:/language/TiddlerInfo/List/Caption":{"title":"$:/language/TiddlerInfo/List/Caption","text":"List"},"$:/language/TiddlerInfo/List/Empty":{"title":"$:/language/TiddlerInfo/List/Empty","text":"This tiddler does not have a list"},"$:/language/TiddlerInfo/Listed/Caption":{"title":"$:/language/TiddlerInfo/Listed/Caption","text":"Listed"},"$:/language/TiddlerInfo/Listed/Empty":{"title":"$:/language/TiddlerInfo/Listed/Empty","text":"This tiddler is not listed by any others"},"$:/language/TiddlerInfo/References/Caption":{"title":"$:/language/TiddlerInfo/References/Caption","text":"Backlinks"},"$:/language/TiddlerInfo/References/Empty":{"title":"$:/language/TiddlerInfo/References/Empty","text":"No tiddlers link to this one"},"$:/language/TiddlerInfo/Tagging/Caption":{"title":"$:/language/TiddlerInfo/Tagging/Caption","text":"Tagging"},"$:/language/TiddlerInfo/Tagging/Empty":{"title":"$:/language/TiddlerInfo/Tagging/Empty","text":"No tiddlers are tagged with this one"},"$:/language/TiddlerInfo/Tools/Caption":{"title":"$:/language/TiddlerInfo/Tools/Caption","text":"Tools"},"$:/language/Docs/Types/application/javascript":{"title":"$:/language/Docs/Types/application/javascript","description":"JavaScript code","name":"application/javascript","group":"Developer","group-sort":"2"},"$:/language/Docs/Types/application/json":{"title":"$:/language/Docs/Types/application/json","description":"JSON data","name":"application/json","group":"Developer","group-sort":"2"},"$:/language/Docs/Types/application/x-tiddler-dictionary":{"title":"$:/language/Docs/Types/application/x-tiddler-dictionary","description":"Data dictionary","name":"application/x-tiddler-dictionary","group":"Developer","group-sort":"2"},"$:/language/Docs/Types/image/gif":{"title":"$:/language/Docs/Types/image/gif","description":"GIF image","name":"image/gif","group":"Image","group-sort":"1"},"$:/language/Docs/Types/image/jpeg":{"title":"$:/language/Docs/Types/image/jpeg","description":"JPEG image","name":"image/jpeg","group":"Image","group-sort":"1"},"$:/language/Docs/Types/image/png":{"title":"$:/language/Docs/Types/image/png","description":"PNG image","name":"image/png","group":"Image","group-sort":"1"},"$:/language/Docs/Types/image/svg+xml":{"title":"$:/language/Docs/Types/image/svg+xml","description":"Structured Vector Graphics image","name":"image/svg+xml","group":"Image","group-sort":"1"},"$:/language/Docs/Types/image/x-icon":{"title":"$:/language/Docs/Types/image/x-icon","description":"ICO format icon file","name":"image/x-icon","group":"Image","group-sort":"1"},"$:/language/Docs/Types/text/css":{"title":"$:/language/Docs/Types/text/css","description":"Static stylesheet","name":"text/css","group":"Developer","group-sort":"2"},"$:/language/Docs/Types/text/html":{"title":"$:/language/Docs/Types/text/html","description":"HTML markup","name":"text/html","group":"Text","group-sort":"0"},"$:/language/Docs/Types/text/plain":{"title":"$:/language/Docs/Types/text/plain","description":"Plain text","name":"text/plain","group":"Text","group-sort":"0"},"$:/language/Docs/Types/text/vnd.tiddlywiki":{"title":"$:/language/Docs/Types/text/vnd.tiddlywiki","description":"TiddlyWiki 5","name":"text/vnd.tiddlywiki","group":"Text","group-sort":"0"},"$:/language/Docs/Types/text/x-tiddlywiki":{"title":"$:/language/Docs/Types/text/x-tiddlywiki","description":"TiddlyWiki Classic","name":"text/x-tiddlywiki","group":"Text","group-sort":"0"},"$:/languages/en-GB":{"title":"$:/languages/en-GB","name":"en-GB","description":"English (British)","author":"JeremyRuston","core-version":"&gt;=5.0.0\"","text":"Stub pseudo-plugin for the default language"},"$:/core/modules/commander.js":{"title":"$:/core/modules/commander.js","text":"/*\\\ntitle: $:/core/modules/commander.js\ntype: application/javascript\nmodule-type: global\n\nThe $tw.Commander class is a command interpreter\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nParse a sequence of commands\n\tcommandTokens: an array of command string tokens\n\twiki: reference to the wiki store object\n\tstreams: {output:, error:}, each of which has a write(string) method\n\tcallback: a callback invoked as callback(err) where err is null if there was no error\n*/\nvar Commander = function(commandTokens,callback,wiki,streams) {\n\tvar path = require(\"path\");\n\tthis.commandTokens = commandTokens;\n\tthis.nextToken = 0;\n\tthis.callback = callback;\n\tthis.wiki = wiki;\n\tthis.streams = streams;\n\tthis.outputPath = path.resolve($tw.boot.wikiPath,$tw.config.wikiOutputSubDir);\n};\n\n/*\nLog a string if verbose flag is set\n*/\nCommander.prototype.log = function(str) {\n\tif(this.verbose) {\n\t\tthis.streams.output.write(str + \"\\n\");\n\t}\n};\n\n/*\nWrite a string if verbose flag is set\n*/\nCommander.prototype.write = function(str) {\n\tif(this.verbose) {\n\t\tthis.streams.output.write(str);\n\t}\n};\n\n/*\nAdd a string of tokens to the command queue\n*/\nCommander.prototype.addCommandTokens = function(commandTokens) {\n\tvar params = commandTokens.slice(0);\n\tparams.unshift(0);\n\tparams.unshift(this.nextToken);\n\tArray.prototype.splice.apply(this.commandTokens,params);\n};\n\n/*\nExecute the sequence of commands and invoke a callback on completion\n*/\nCommander.prototype.execute = function() {\n\tthis.executeNextCommand();\n};\n\n/*\nExecute the next command in the sequence\n*/\nCommander.prototype.executeNextCommand = function() {\n\tvar self = this;\n\t// Invoke the callback if there are no more commands\n\tif(this.nextToken &gt;= this.commandTokens.length) {\n\t\tthis.callback(null);\n\t} else {\n\t\t// Get and check the command token\n\t\tvar commandName = this.commandTokens[this.nextToken++];\n\t\tif(commandName.substr(0,2) !== \"--\") {\n\t\t\tthis.callback(\"Missing command: \" + commandName);\n\t\t} else {\n\t\t\tcommandName = commandName.substr(2); // Trim off the --\n\t\t\t// Accumulate the parameters to the command\n\t\t\tvar params = [];\n\t\t\twhile(this.nextToken &lt; this.commandTokens.length &amp;&amp; \n\t\t\t\tthis.commandTokens[this.nextToken].substr(0,2) !== \"--\") {\n\t\t\t\tparams.push(this.commandTokens[this.nextToken++]);\n\t\t\t}\n\t\t\t// Get the command info\n\t\t\tvar command = $tw.commands[commandName],\n\t\t\t\tc,err;\n\t\t\tif(!command) {\n\t\t\t\tthis.callback(\"Unknown command: \" + commandName);\n\t\t\t} else {\n\t\t\t\tif(this.verbose) {\n\t\t\t\t\tthis.streams.output.write(\"Executing command: \" + commandName + \" \" + params.join(\" \") + \"\\n\");\n\t\t\t\t}\n\t\t\t\t// Parse named parameters if required\n\t\t\t\tif(command.info.namedParameterMode) {\n\t\t\t\t\tparams = this.extractNamedParameters(params,command.info.mandatoryParameters);\n\t\t\t\t\tif(typeof params === \"string\") {\n\t\t\t\t\t\treturn this.callback(params);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(command.info.synchronous) {\n\t\t\t\t\t// Synchronous command\n\t\t\t\t\tc = new command.Command(params,this);\n\t\t\t\t\terr = c.execute();\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\tthis.callback(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.executeNextCommand();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Asynchronous command\n\t\t\t\t\tc = new command.Command(params,this,function(err) {\n\t\t\t\t\t\tif(err) {\n\t\t\t\t\t\t\tself.callback(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.executeNextCommand();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\terr = c.execute();\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\tthis.callback(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/*\nGiven an array of parameter strings `params` in name:value format, and an array of mandatory parameter names in `mandatoryParameters`, returns a hashmap of values or a string if error\n*/\nCommander.prototype.extractNamedParameters = function(params,mandatoryParameters) {\n\tmandatoryParameters = mandatoryParameters || [];\n\tvar errors = [],\n\t\tparamsByName = Object.create(null);\n\t// Extract the parameters\n\t$tw.utils.each(params,function(param) {\n\t\tvar index = param.indexOf(\"=\");\n\t\tif(index &lt; 1) {\n\t\t\terrors.push(\"malformed named parameter: '\" + param + \"'\");\n\t\t}\n\t\tparamsByName[param.slice(0,index)] = $tw.utils.trim(param.slice(index+1));\n\t});\n\t// Check the mandatory parameters are present\n\t$tw.utils.each(mandatoryParameters,function(mandatoryParameter) {\n\t\tif(!$tw.utils.hop(paramsByName,mandatoryParameter)) {\n\t\t\terrors.push(\"missing mandatory parameter: '\" + mandatoryParameter + \"'\");\n\t\t}\n\t});\n\t// Return any errors\n\tif(errors.length &gt; 0) {\n\t\treturn errors.join(\" and\\n\");\n\t} else {\n\t\treturn paramsByName;\n\t}\n};\n\nCommander.initCommands = function(moduleType) {\n\tmoduleType = moduleType || \"command\";\n\t$tw.commands = {};\n\t$tw.modules.forEachModuleOfType(moduleType,function(title,module) {\n\t\tvar c = $tw.commands[module.info.name] = {};\n\t\t// Add the methods defined by the module\n\t\tfor(var f in module) {\n\t\t\tif($tw.utils.hop(module,f)) {\n\t\t\t\tc[f] = module[f];\n\t\t\t}\n\t\t}\n\t});\n};\n\nexports.Commander = Commander;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/commands/build.js":{"title":"$:/core/modules/commands/build.js","text":"/*\\\ntitle: $:/core/modules/commands/build.js\ntype: application/javascript\nmodule-type: command\n\nCommand to build a build target\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"build\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\t// Get the build targets defined in the wiki\n\tvar buildTargets = $tw.boot.wikiInfo.build;\n\tif(!buildTargets) {\n\t\treturn \"No build targets defined\";\n\t}\n\t// Loop through each of the specified targets\n\tvar targets;\n\tif(this.params.length &gt; 0) {\n\t\ttargets = this.params;\n\t} else {\n\t\ttargets = Object.keys(buildTargets);\n\t}\n\tfor(var targetIndex=0; targetIndex&lt;targets.length; targetIndex++) {\n\t\tvar target = targets[targetIndex],\n\t\t\tcommands = buildTargets[target];\n\t\tif(!commands) {\n\t\t\treturn \"Build target '\" + target + \"' not found\";\n\t\t}\n\t\t// Add the commands to the queue\n\t\tthis.commander.addCommandTokens(commands);\n\t}\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/clearpassword.js":{"title":"$:/core/modules/commands/clearpassword.js","text":"/*\\\ntitle: $:/core/modules/commands/clearpassword.js\ntype: application/javascript\nmodule-type: command\n\nClear password for crypto operations\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"clearpassword\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\t$tw.crypto.setPassword(null);\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/deletetiddlers.js":{"title":"$:/core/modules/commands/deletetiddlers.js","text":"/*\\\ntitle: $:/core/modules/commands/deletetiddlers.js\ntype: application/javascript\nmodule-type: command\n\nCommand to delete tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"deletetiddlers\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing filter\";\n\t}\n\tvar self = this,\n\t\twiki = this.commander.wiki,\n\t\tfilter = this.params[0],\n\t\ttiddlers = wiki.filterTiddlers(filter);\n\t$tw.utils.each(tiddlers,function(title) {\n\t\twiki.deleteTiddler(title);\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/editions.js":{"title":"$:/core/modules/commands/editions.js","text":"/*\\\ntitle: $:/core/modules/commands/editions.js\ntype: application/javascript\nmodule-type: command\n\nCommand to list the available editions\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"editions\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\tvar self = this;\n\t// Output the list\n\tthis.commander.streams.output.write(\"Available editions:\\n\\n\");\n\tvar editionInfo = $tw.utils.getEditionInfo();\n\t$tw.utils.each(editionInfo,function(info,name) {\n\t\tself.commander.streams.output.write(\"    \" + name + \": \" + info.description + \"\\n\");\n\t});\n\tthis.commander.streams.output.write(\"\\n\");\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/fetch.js":{"title":"$:/core/modules/commands/fetch.js","text":"/*\\\ntitle: $:/core/modules/commands/fetch.js\ntype: application/javascript\nmodule-type: command\n\nCommands to fetch external tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"fetch\",\n\tsynchronous: false\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing subcommand and url\";\n\t}\n\tswitch(this.params[0]) {\n\t\tcase \"raw-file\":\n\t\t\treturn this.fetchFiles({\n\t\t\t\traw: true,\n\t\t\t\turl: this.params[1],\n\t\t\t\ttransformFilter: this.params[2] || \"\",\n\t\t\t\tcallback: this.callback\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"file\":\n\t\t\treturn this.fetchFiles({\n\t\t\t\turl: this.params[1],\n\t\t\t\timportFilter: this.params[2],\n\t\t\t\ttransformFilter: this.params[3] || \"\",\n\t\t\t\tcallback: this.callback\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"raw-files\":\n\t\t\treturn this.fetchFiles({\n\t\t\t\traw: true,\n\t\t\t\turlFilter: this.params[1],\n\t\t\t\ttransformFilter: this.params[2] || \"\",\n\t\t\t\tcallback: this.callback\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"files\":\n\t\t\treturn this.fetchFiles({\n\t\t\t\turlFilter: this.params[1],\n\t\t\t\timportFilter: this.params[2],\n\t\t\t\ttransformFilter: this.params[3] || \"\",\n\t\t\t\tcallback: this.callback\n\t\t\t});\n\t\t\tbreak;\n\t}\n\treturn null;\n};\n\nCommand.prototype.fetchFiles = function(options) {\n\tvar self = this;\n\t// Get the list of URLs\n\tvar urls;\n\tif(options.url) {\n\t\turls = [options.url]\n\t} else if(options.urlFilter) {\n\t\turls = this.commander.wiki.filterTiddlers(options.urlFilter);\n\t} else {\n\t\treturn \"Missing URL\";\n\t}\n\t// Process each URL in turn\n\tvar next = 0;\n\tvar getNextFile = function(err) {\n\t\tif(err) {\n\t\t\treturn options.callback(err);\n\t\t}\n\t\tif(next &lt; urls.length) {\n\t\t\tself.fetchFile(urls[next++],options,getNextFile);\n\t\t} else {\n\t\t\toptions.callback(null);\n\t\t}\n\t};\n\tgetNextFile(null);\n\t// Success\n\treturn null;\n};\n\nCommand.prototype.fetchFile = function(url,options,callback,redirectCount) {\n\tif(redirectCount &gt; 10) {\n\t\treturn callback(\"Error too many redirects retrieving \" + url);\n\t}\n\tvar self = this,\n\t\tlib = url.substr(0,8) === \"https://\" ? require(\"https\") : require(\"http\");\n\tlib.get(url).on(\"response\",function(response) {\n\t    var type = (response.headers[\"content-type\"] || \"\").split(\";\")[0],\n\t    \tdata = [];\n\t    self.commander.write(\"Reading \" + url + \": \");\n\t    response.on(\"data\",function(chunk) {\n\t        data.push(chunk);\n\t        self.commander.write(\".\");\n\t    });\n\t    response.on(\"end\",function() {\n\t        self.commander.write(\"\\n\");\n\t        if(response.statusCode === 200) {\n\t\t        self.processBody(Buffer.concat(data),type,options,url);\n\t\t        callback(null);\n\t        } else {\n\t        \tif(response.statusCode === 302 || response.statusCode === 303 || response.statusCode === 307) {\n\t        \t\treturn self.fetchFile(response.headers.location,options,callback,redirectCount + 1);\n\t        \t} else {\n\t\t        \treturn callback(\"Error \" + response.statusCode + \" retrieving \" + url)\n\t        \t}\n\t        }\n\t   \t});\n\t   \tresponse.on(\"error\",function(e) {\n\t\t\tconsole.log(\"Error on GET request: \" + e);\n\t\t\tcallback(e);\n\t   \t});\n\t});\n\treturn null;\n};\n\nCommand.prototype.processBody = function(body,type,options,url) {\n\tvar self = this;\n\t// Collect the tiddlers in a wiki\n\tvar incomingWiki = new $tw.Wiki();\n\tif(options.raw) {\n\t\tvar typeInfo = type ? $tw.config.contentTypeInfo[type] : null,\n\t\t\tencoding = typeInfo ? typeInfo.encoding : \"utf8\";\n\t\tincomingWiki.addTiddler(new $tw.Tiddler({\n\t\t\ttitle: url,\n\t\t\ttype: type,\n\t\t\ttext: body.toString(encoding)\n\t\t}));\n\t} else {\n\t\t// Deserialise the file to extract the tiddlers\n\t\tvar tiddlers = this.commander.wiki.deserializeTiddlers(type || \"text/html\",body.toString(\"utf8\"),{});\n\t\t$tw.utils.each(tiddlers,function(tiddler) {\n\t\t\tincomingWiki.addTiddler(new $tw.Tiddler(tiddler));\n\t\t});\n\t}\n\t// Filter the tiddlers to select the ones we want\n\tvar filteredTitles = incomingWiki.filterTiddlers(options.importFilter || \"[all[tiddlers]]\");\n\t// Import the selected tiddlers\n\tvar count = 0;\n\tincomingWiki.each(function(tiddler,title) {\n\t\tif(filteredTitles.indexOf(title) !== -1) {\n\t\t\tvar newTiddler;\n\t\t\tif(options.transformFilter) {\n\t\t\t\tvar transformedTitle = (incomingWiki.filterTiddlers(options.transformFilter,null,self.commander.wiki.makeTiddlerIterator([title])) || [\"\"])[0];\n\t\t\t\tif(transformedTitle) {\n\t\t\t\t\tself.commander.log(\"Importing \" + title + \" as \" + transformedTitle)\n\t\t\t\t\tnewTiddler = new $tw.Tiddler(tiddler,{title: transformedTitle});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.commander.log(\"Importing \" + title)\n\t\t\t\tnewTiddler = tiddler;\n\t\t\t}\n\t\t\tself.commander.wiki.importTiddler(newTiddler);\n\t\t\tcount++;\n\t\t}\n\t});\n\tself.commander.log(\"Imported \" + count + \" tiddlers\")\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/help.js":{"title":"$:/core/modules/commands/help.js","text":"/*\\\ntitle: $:/core/modules/commands/help.js\ntype: application/javascript\nmodule-type: command\n\nHelp command\n\n\\*/\n(function(){\n\n/*jshint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"help\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\tvar subhelp = this.params[0] || \"default\",\n\t\thelpBase = \"$:/language/Help/\",\n\t\ttext;\n\tif(!this.commander.wiki.getTiddler(helpBase + subhelp)) {\n\t\tsubhelp = \"notfound\";\n\t}\n\t// Wikify the help as formatted text (ie block elements generate newlines)\n\ttext = this.commander.wiki.renderTiddler(\"text/plain-formatted\",helpBase + subhelp);\n\t// Remove any leading linebreaks\n\ttext = text.replace(/^(\\r?\\n)*/g,\"\");\n\tthis.commander.streams.output.write(text);\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/import.js":{"title":"$:/core/modules/commands/import.js","text":"/*\\\ntitle: $:/core/modules/commands/import.js\ntype: application/javascript\nmodule-type: command\n\nCommand to import tiddlers from a file\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"import\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\");\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing parameters\";\n\t}\n\tvar filename = self.params[0],\n\t\tdeserializer = self.params[1],\n\t\ttitle = self.params[2] || filename,\n\t\tencoding = self.params[3] || \"utf8\",\n\t\ttext = fs.readFileSync(filename,encoding),\n\t\ttiddlers = this.commander.wiki.deserializeTiddlers(null,text,{title: title},{deserializer: deserializer});\n\t$tw.utils.each(tiddlers,function(tiddler) {\n\t\tself.commander.wiki.importTiddler(new $tw.Tiddler(tiddler));\n\t});\n\tthis.commander.log(tiddlers.length + \" tiddler(s) imported\");\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/init.js":{"title":"$:/core/modules/commands/init.js","text":"/*\\\ntitle: $:/core/modules/commands/init.js\ntype: application/javascript\nmodule-type: command\n\nCommand to initialise an empty wiki folder\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"init\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\tvar fs = require(\"fs\"),\n\t\tpath = require(\"path\");\n\t// Check that we don't already have a valid wiki folder\n\tif($tw.boot.wikiTiddlersPath || ($tw.utils.isDirectory($tw.boot.wikiPath) &amp;&amp; !$tw.utils.isDirectoryEmpty($tw.boot.wikiPath))) {\n\t\treturn \"Wiki folder is not empty\";\n\t}\n\t// Loop through each of the specified editions\n\tvar editions = this.params.length &gt; 0 ? this.params : [\"empty\"];\n\tfor(var editionIndex=0; editionIndex&lt;editions.length; editionIndex++) {\n\t\tvar editionName = editions[editionIndex];\n\t\t// Check the edition exists\n\t\tvar editionPath = $tw.findLibraryItem(editionName,$tw.getLibraryItemSearchPaths($tw.config.editionsPath,$tw.config.editionsEnvVar));\n\t\tif(!$tw.utils.isDirectory(editionPath)) {\n\t\t\treturn \"Edition '\" + editionName + \"' not found\";\n\t\t}\n\t\t// Copy the edition content\n\t\tvar err = $tw.utils.copyDirectory(editionPath,$tw.boot.wikiPath);\n\t\tif(!err) {\n\t\t\tthis.commander.streams.output.write(\"Copied edition '\" + editionName + \"' to \" + $tw.boot.wikiPath + \"\\n\");\n\t\t} else {\n\t\t\treturn err;\n\t\t}\n\t}\n\t// Tweak the tiddlywiki.info to remove any included wikis\n\tvar packagePath = $tw.boot.wikiPath + \"/tiddlywiki.info\",\n\t\tpackageJson = JSON.parse(fs.readFileSync(packagePath));\n\tdelete packageJson.includeWikis;\n\tfs.writeFileSync(packagePath,JSON.stringify(packageJson,null,$tw.config.preferences.jsonSpaces));\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/listen.js":{"title":"$:/core/modules/commands/listen.js","text":"/*\\\ntitle: $:/core/modules/commands/listen.js\ntype: application/javascript\nmodule-type: command\n\nListen for HTTP requests and serve tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Server = require(\"$:/core/modules/server/server.js\").Server;\n\nexports.info = {\n\tname: \"listen\",\n\tsynchronous: true,\n\tnamedParameterMode: true,\n\tmandatoryParameters: [],\n};\n\nvar Command = function(params,commander,callback) {\n\tvar self = this;\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tvar self = this;\n\tif(!$tw.boot.wikiTiddlersPath) {\n\t\t$tw.utils.warning(\"Warning: Wiki folder '\" + $tw.boot.wikiPath + \"' does not exist or is missing a tiddlywiki.info file\");\n\t}\n\t// Set up server\n\tthis.server = new Server({\n\t\twiki: this.commander.wiki,\n\t\tvariables: self.params\n\t});\n\tvar nodeServer = this.server.listen();\n\t$tw.hooks.invokeHook(\"th-server-command-post-start\",this.server,nodeServer,\"tiddlywiki\");\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/load.js":{"title":"$:/core/modules/commands/load.js","text":"/*\\\ntitle: $:/core/modules/commands/load.js\ntype: application/javascript\nmodule-type: command\n\nCommand to load tiddlers from a file or directory\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"load\",\n\tsynchronous: false\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\");\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar tiddlers = $tw.loadTiddlersFromPath(self.params[0]),\n\t\tcount = 0;\n\t$tw.utils.each(tiddlers,function(tiddlerInfo) {\n\t\t$tw.utils.each(tiddlerInfo.tiddlers,function(tiddler) {\n\t\t\tself.commander.wiki.importTiddler(new $tw.Tiddler(tiddler));\n\t\t\tcount++;\n\t\t});\n\t});\n\tif(!count &amp;&amp; self.params[1] !== \"noerror\") {\n\t\tself.callback(\"No tiddlers found in file \\\"\" + self.params[0] + \"\\\"\");\n\t} else {\n\t\tself.callback(null);\n\t}\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/makelibrary.js":{"title":"$:/core/modules/commands/makelibrary.js","text":"/*\\\ntitle: $:/core/modules/commands/makelibrary.js\ntype: application/javascript\nmodule-type: command\n\nCommand to pack all of the plugins in the library into a plugin tiddler of type \"library\"\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"makelibrary\",\n\tsynchronous: true\n};\n\nvar UPGRADE_LIBRARY_TITLE = \"$:/UpgradeLibrary\";\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tvar wiki = this.commander.wiki,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\tupgradeLibraryTitle = this.params[0] || UPGRADE_LIBRARY_TITLE,\n\t\ttiddlers = {};\n\t// Collect up the library plugins\n\tvar collectPlugins = function(folder) {\n\t\t\tvar pluginFolders = $tw.utils.getSubdirectories(folder) || [];\n\t\t\tfor(var p=0; p&lt;pluginFolders.length; p++) {\n\t\t\t\tif(!$tw.boot.excludeRegExp.test(pluginFolders[p])) {\n\t\t\t\t\tpluginFields = $tw.loadPluginFolder(path.resolve(folder,\"./\" + pluginFolders[p]));\n\t\t\t\t\tif(pluginFields &amp;&amp; pluginFields.title) {\n\t\t\t\t\t\ttiddlers[pluginFields.title] = pluginFields;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcollectPublisherPlugins = function(folder) {\n\t\t\tvar publisherFolders = $tw.utils.getSubdirectories(folder) || [];\n\t\t\tfor(var t=0; t&lt;publisherFolders.length; t++) {\n\t\t\t\tif(!$tw.boot.excludeRegExp.test(publisherFolders[t])) {\n\t\t\t\t\tcollectPlugins(path.resolve(folder,\"./\" + publisherFolders[t]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t$tw.utils.each($tw.getLibraryItemSearchPaths($tw.config.pluginsPath,$tw.config.pluginsEnvVar),collectPublisherPlugins);\n\t$tw.utils.each($tw.getLibraryItemSearchPaths($tw.config.themesPath,$tw.config.themesEnvVar),collectPublisherPlugins);\n\t$tw.utils.each($tw.getLibraryItemSearchPaths($tw.config.languagesPath,$tw.config.languagesEnvVar),collectPlugins);\n\t// Save the upgrade library tiddler\n\tvar pluginFields = {\n\t\ttitle: upgradeLibraryTitle,\n\t\ttype: \"application/json\",\n\t\t\"plugin-type\": \"library\",\n\t\t\"text\": JSON.stringify({tiddlers: tiddlers})\n\t};\n\twiki.addTiddler(new $tw.Tiddler(pluginFields));\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/output.js":{"title":"$:/core/modules/commands/output.js","text":"/*\\\ntitle: $:/core/modules/commands/output.js\ntype: application/javascript\nmodule-type: command\n\nCommand to set the default output location (defaults to current working directory)\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"output\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tvar fs = require(\"fs\"),\n\t\tpath = require(\"path\");\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing output path\";\n\t}\n\tthis.commander.outputPath = path.resolve(process.cwd(),this.params[0]);\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/password.js":{"title":"$:/core/modules/commands/password.js","text":"/*\\\ntitle: $:/core/modules/commands/password.js\ntype: application/javascript\nmodule-type: command\n\nSave password for crypto operations\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"password\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing password\";\n\t}\n\t$tw.crypto.setPassword(this.params[0]);\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/render.js":{"title":"$:/core/modules/commands/render.js","text":"/*\\\ntitle: $:/core/modules/commands/render.js\ntype: application/javascript\nmodule-type: command\n\nRender individual tiddlers and save the results to the specified files\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.info = {\n\tname: \"render\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing tiddler filter\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\twiki = this.commander.wiki,\n\t\ttiddlerFilter = this.params[0],\n\t\tfilenameFilter = this.params[1] || \"[is[tiddler]addsuffix[.html]]\",\n\t\ttype = this.params[2] || \"text/html\",\n\t\ttemplate = this.params[3],\n\t\tvariableList = this.params.slice(4),\n\t\ttiddlers = wiki.filterTiddlers(tiddlerFilter),\n\t\tvariables =  Object.create(null);\n\t\twhile(variableList.length &gt;= 2) {\n\t\t\tvariables[variableList[0]] = variableList[1];\n\t\t\tvariableList = variableList.slice(2);\n\t\t}\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar parser = wiki.parseTiddler(template || title);\n\t\tvar widgetNode = wiki.makeWidget(parser,{variables: $tw.utils.extend({},variables,{currentTiddler: title})}),\n\t\t\tcontainer = $tw.fakeDocument.createElement(\"div\");\n\t\twidgetNode.render(container,null);\n\t\tvar text = type === \"text/html\" ? container.innerHTML : container.textContent,\n\t\t\tfilepath = path.resolve(self.commander.outputPath,wiki.filterTiddlers(filenameFilter,$tw.rootWidget,wiki.makeTiddlerIterator([title]))[0]);\n\t\tif(self.commander.verbose) {\n\t\t\tconsole.log(\"Rendering \\\"\" + title + \"\\\" to \\\"\" + filepath + \"\\\"\");\n\t\t}\n\t\t$tw.utils.createFileDirectories(filepath);\n\t\tfs.writeFileSync(filepath,text,\"utf8\");\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/rendertiddler.js":{"title":"$:/core/modules/commands/rendertiddler.js","text":"/*\\\ntitle: $:/core/modules/commands/rendertiddler.js\ntype: application/javascript\nmodule-type: command\n\nCommand to render a tiddler and save it to a file\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"rendertiddler\",\n\tsynchronous: false\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\ttitle = this.params[0],\n\t\tfilename = path.resolve(this.commander.outputPath,this.params[1]),\n\t\ttype = this.params[2] || \"text/html\",\n\t\ttemplate = this.params[3],\n\t\tname = this.params[4],\n\t\tvalue = this.params[5],\n\t\tvariables = {};\n\t$tw.utils.createFileDirectories(filename);\n\tif(template) {\n\t\tvariables.currentTiddler = title;\n\t\ttitle = template;\n\t}\n\tif(name &amp;&amp; value) {\n\t\tvariables[name] = value;\n\t}\n\tfs.writeFile(filename,this.commander.wiki.renderTiddler(type,title,{variables: variables}),\"utf8\",function(err) {\n\t\tself.callback(err);\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/rendertiddlers.js":{"title":"$:/core/modules/commands/rendertiddlers.js","text":"/*\\\ntitle: $:/core/modules/commands/rendertiddlers.js\ntype: application/javascript\nmodule-type: command\n\nCommand to render several tiddlers to a folder of files\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.info = {\n\tname: \"rendertiddlers\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\twiki = this.commander.wiki,\n\t\tfilter = this.params[0],\n\t\ttemplate = this.params[1],\n\t\toutputPath = this.commander.outputPath,\n\t\tpathname = path.resolve(outputPath,this.params[2]),\n\t\ttype = this.params[3] || \"text/html\",\n\t\textension = this.params[4] || \".html\",\n\t\tdeleteDirectory = (this.params[5] || \"\").toLowerCase() !== \"noclean\",\n\t\ttiddlers = wiki.filterTiddlers(filter);\n\tif(deleteDirectory) {\n\t\t$tw.utils.deleteDirectory(pathname);\n\t}\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar parser = wiki.parseTiddler(template),\n\t\t\twidgetNode = wiki.makeWidget(parser,{variables: {currentTiddler: title}}),\n\t\t\tcontainer = $tw.fakeDocument.createElement(\"div\");\n\t\twidgetNode.render(container,null);\n\t\tvar text = type === \"text/html\" ? container.innerHTML : container.textContent,\n\t\t\texportPath = null;\n\t\tif($tw.utils.hop($tw.macros,\"tv-get-export-path\")) {\n\t\t\tvar macroPath = $tw.macros[\"tv-get-export-path\"].run.apply(self,[title]);\n\t\t\tif(macroPath) {\n\t\t\t\texportPath = path.resolve(outputPath,macroPath + extension);\n\t\t\t}\n\t\t}\n\t\tvar finalPath = exportPath || path.resolve(pathname,encodeURIComponent(title) + extension);\n\t\t$tw.utils.createFileDirectories(finalPath);\n\t\tfs.writeFileSync(finalPath,text,\"utf8\");\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/save.js":{"title":"$:/core/modules/commands/save.js","text":"/*\\\ntitle: $:/core/modules/commands/save.js\ntype: application/javascript\nmodule-type: command\n\nSaves individual tiddlers in their raw text or binary format to the specified files\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"save\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing filename filter\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\twiki = this.commander.wiki,\n\t\ttiddlerFilter = this.params[0],\n\t\tfilenameFilter = this.params[1] || \"[is[tiddler]]\",\n\t\ttiddlers = wiki.filterTiddlers(tiddlerFilter);\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar tiddler = self.commander.wiki.getTiddler(title),\n\t\t\ttype = tiddler.fields.type || \"text/vnd.tiddlywiki\",\n\t\t\tcontentTypeInfo = $tw.config.contentTypeInfo[type] || {encoding: \"utf8\"},\n\t\t\tfilepath = path.resolve(self.commander.outputPath,wiki.filterTiddlers(filenameFilter,$tw.rootWidget,wiki.makeTiddlerIterator([title]))[0]);\n\t\tif(self.commander.verbose) {\n\t\t\tconsole.log(\"Saving \\\"\" + title + \"\\\" to \\\"\" + filepath + \"\\\"\");\n\t\t}\n\t\t$tw.utils.createFileDirectories(filepath);\n\t\tfs.writeFileSync(filepath,tiddler.fields.text,contentTypeInfo.encoding);\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/savelibrarytiddlers.js":{"title":"$:/core/modules/commands/savelibrarytiddlers.js","text":"/*\\\ntitle: $:/core/modules/commands/savelibrarytiddlers.js\ntype: application/javascript\nmodule-type: command\n\nCommand to save the subtiddlers of a bundle tiddler as a series of JSON files\n\n--savelibrarytiddlers &lt;tiddler&gt; &lt;tiddler-filter&gt; &lt;pathname&gt; &lt;skinnylisting&gt;\n\nThe tiddler identifies the bundle tiddler that contains the subtiddlers.\n\nThe tiddler filter specifies the plugins to be included.\n\nThe pathname specifies the pathname to the folder in which the JSON files should be saved. The filename is the URL encoded title of the subtiddler.\n\nThe skinnylisting specifies the title of the tiddler to which a JSON catalogue of the subtiddlers will be saved. The JSON file contains the same data as the bundle tiddler but with the `text` field removed.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"savelibrarytiddlers\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\tcontainerTitle = this.params[0],\n\t\tfilter = this.params[1],\n\t\tbasepath = this.params[2],\n\t\tskinnyListTitle = this.params[3];\n\t// Get the container tiddler as data\n\tvar containerData = self.commander.wiki.getTiddlerDataCached(containerTitle,undefined);\n\tif(!containerData) {\n\t\treturn \"'\" + containerTitle + \"' is not a tiddler bundle\";\n\t}\n\t// Filter the list of plugins\n\tvar pluginList = [];\n\t$tw.utils.each(containerData.tiddlers,function(tiddler,title) {\n\t\tpluginList.push(title);\n\t});\n\tvar filteredPluginList;\n\tif(filter) {\n\t\tfilteredPluginList = self.commander.wiki.filterTiddlers(filter,null,self.commander.wiki.makeTiddlerIterator(pluginList));\n\t} else {\n\t\tfilteredPluginList = pluginList;\n\t}\n\t// Iterate through the plugins\n\tvar skinnyList = [];\n\t$tw.utils.each(filteredPluginList,function(title) {\n\t\tvar tiddler = containerData.tiddlers[title];\n\t\t// Save each JSON file and collect the skinny data\n\t\tvar pathname = path.resolve(self.commander.outputPath,basepath + encodeURIComponent(title) + \".json\");\n\t\t$tw.utils.createFileDirectories(pathname);\n\t\tfs.writeFileSync(pathname,JSON.stringify(tiddler),\"utf8\");\n\t\t// Collect the skinny list data\n\t\tvar pluginTiddlers = JSON.parse(tiddler.text),\n\t\t\treadmeContent = (pluginTiddlers.tiddlers[title + \"/readme\"] || {}).text,\n\t\t\tdoesRequireReload = !!self.commander.wiki.doesPluginInfoRequireReload(pluginTiddlers),\n\t\t\ticonTiddler = pluginTiddlers.tiddlers[title + \"/icon\"] || {},\n\t\t\ticonType = iconTiddler.type,\n\t\t\ticonText = iconTiddler.text,\n\t\t\ticonContent;\n\t\tif(iconType &amp;&amp; iconText) {\n\t\t\ticonContent = $tw.utils.makeDataUri(iconText,iconType);\n\t\t}\n\t\tskinnyList.push($tw.utils.extend({},tiddler,{\n\t\t\ttext: undefined,\n\t\t\treadme: readmeContent,\n\t\t\t\"requires-reload\": doesRequireReload ? \"yes\" : \"no\",\n\t\t\ticon: iconContent\n\t\t}));\n\t});\n\t// Save the catalogue tiddler\n\tif(skinnyListTitle) {\n\t\tself.commander.wiki.setTiddlerData(skinnyListTitle,skinnyList);\n\t}\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/savetiddler.js":{"title":"$:/core/modules/commands/savetiddler.js","text":"/*\\\ntitle: $:/core/modules/commands/savetiddler.js\ntype: application/javascript\nmodule-type: command\n\nCommand to save the content of a tiddler to a file\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"savetiddler\",\n\tsynchronous: false\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 2) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\ttitle = this.params[0],\n\t\tfilename = path.resolve(this.commander.outputPath,this.params[1]),\n\t\ttiddler = this.commander.wiki.getTiddler(title);\n\tif(tiddler) {\n\t\tvar type = tiddler.fields.type || \"text/vnd.tiddlywiki\",\n\t\t\tcontentTypeInfo = $tw.config.contentTypeInfo[type] || {encoding: \"utf8\"};\n\t\t$tw.utils.createFileDirectories(filename);\n\t\tfs.writeFile(filename,tiddler.fields.text,contentTypeInfo.encoding,function(err) {\n\t\t\tself.callback(err);\n\t\t});\n\t} else {\n\t\treturn \"Missing tiddler: \" + title;\n\t}\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/savetiddlers.js":{"title":"$:/core/modules/commands/savetiddlers.js","text":"/*\\\ntitle: $:/core/modules/commands/savetiddlers.js\ntype: application/javascript\nmodule-type: command\n\nCommand to save several tiddlers to a folder of files\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.info = {\n\tname: \"savetiddlers\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing filename\";\n\t}\n\tvar self = this,\n\t\tfs = require(\"fs\"),\n\t\tpath = require(\"path\"),\n\t\twiki = this.commander.wiki,\n\t\tfilter = this.params[0],\n\t\tpathname = path.resolve(this.commander.outputPath,this.params[1]),\n\t\tdeleteDirectory = (this.params[2] || \"\").toLowerCase() !== \"noclean\",\n\t\ttiddlers = wiki.filterTiddlers(filter);\n\tif(deleteDirectory) {\n\t\t$tw.utils.deleteDirectory(pathname);\n\t}\n\t$tw.utils.createDirectory(pathname);\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar tiddler = self.commander.wiki.getTiddler(title),\n\t\t\ttype = tiddler.fields.type || \"text/vnd.tiddlywiki\",\n\t\t\tcontentTypeInfo = $tw.config.contentTypeInfo[type] || {encoding: \"utf8\"},\n\t\t\tfilename = path.resolve(pathname,encodeURIComponent(title));\n\t\tfs.writeFileSync(filename,tiddler.fields.text,contentTypeInfo.encoding);\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/savewikifolder.js":{"title":"$:/core/modules/commands/savewikifolder.js","text":"/*\\\ntitle: $:/core/modules/commands/savewikifolder.js\ntype: application/javascript\nmodule-type: command\n\nCommand to save the current wiki as a wiki folder\n\n--savewikifolder &lt;wikifolderpath&gt; [&lt;filter&gt;]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"savewikifolder\",\n\tsynchronous: true\n};\n\nvar fs,path;\nif($tw.node) {\n\tfs = require(\"fs\");\n\tpath = require(\"path\");\n}\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing wiki folder path\";\n\t}\n\tvar wikifoldermaker = new WikiFolderMaker(this.params[0],this.params[1],this.commander);\n\treturn wikifoldermaker.save();\n};\n\nfunction WikiFolderMaker(wikiFolderPath,wikiFilter,commander) {\n\tthis.wikiFolderPath = wikiFolderPath;\n\tthis.wikiFilter = wikiFilter || \"[all[tiddlers]]\";\n\tthis.commander = commander;\n\tthis.wiki = commander.wiki;\n\tthis.savedPaths = []; // So that we can detect filename clashes\n}\n\nWikiFolderMaker.prototype.log = function(str) {\n\tif(this.commander.verbose) {\n\t\tconsole.log(str);\n\t}\n};\n\nWikiFolderMaker.prototype.tiddlersToIgnore = [\n\t\"$:/boot/boot.css\",\n\t\"$:/boot/boot.js\",\n\t\"$:/boot/bootprefix.js\",\n\t\"$:/core\",\n\t\"$:/library/sjcl.js\",\n\t\"$:/temp/info-plugin\"\n];\n\n/*\nReturns null if successful, or an error string if there was an error\n*/\nWikiFolderMaker.prototype.save = function() {\n\tvar self = this;\n\t// Check that the output directory doesn't exist\n\tif(fs.existsSync(this.wikiFolderPath) &amp;&amp; !$tw.utils.isDirectoryEmpty(this.wikiFolderPath)) {\n\t\treturn \"The unpackwiki command requires that the output wiki folder be empty\";\n\t}\n\t// Get the tiddlers from the source wiki\n\tvar tiddlerTitles = this.wiki.filterTiddlers(this.wikiFilter);\n\t// Initialise a new tiddlwiki.info file\n\tvar newWikiInfo = {};\n\t// Process each incoming tiddler in turn\n\t$tw.utils.each(tiddlerTitles,function(title) {\n\t\tvar tiddler = self.wiki.getTiddler(title);\n\t\tif(tiddler) {\n\t\t\tif(self.tiddlersToIgnore.indexOf(title) !== -1) {\n\t\t\t\t// Ignore the core plugin and the ephemeral info plugin\n\t\t\t\tself.log(\"Ignoring tiddler: \" + title);\n\t\t\t} else {\n\t\t\t\tvar type = tiddler.fields.type,\n\t\t\t\t\tpluginType = tiddler.fields[\"plugin-type\"];\n\t\t\t\tif(type === \"application/json\" &amp;&amp; pluginType) {\n\t\t\t\t\t// Plugin tiddler\n\t\t\t\t\tvar libraryDetails = self.findPluginInLibrary(title);\n\t\t\t\t\tif(libraryDetails) {\n\t\t\t\t\t\t// A plugin from the core library\n\t\t\t\t\t\tself.log(\"Adding built-in plugin: \" + libraryDetails.name);\n\t\t\t\t\t\tnewWikiInfo[libraryDetails.type] = newWikiInfo[libraryDetails.type]  || [];\n\t\t\t\t\t\t$tw.utils.pushTop(newWikiInfo[libraryDetails.type],libraryDetails.name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// A custom plugin\n\t\t\t\t\t\tself.log(\"Processing custom plugin: \" + title);\n\t\t\t\t\t\tself.saveCustomPlugin(tiddler);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Ordinary tiddler\n\t\t\t\t\tself.saveTiddler(\"tiddlers\",tiddler);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// Save the tiddlywiki.info file\n\tthis.saveJSONFile(\"tiddlywiki.info\",newWikiInfo);\n\tself.log(\"Writing tiddlywiki.info: \" + JSON.stringify(newWikiInfo,null,$tw.config.preferences.jsonSpaces));\n\treturn null;\n};\n\n/*\nTest whether the specified tiddler is a plugin in the plugin library\n*/\nWikiFolderMaker.prototype.findPluginInLibrary = function(title) {\n\tvar parts = title.split(\"/\"),\n\t\tpluginPath, type, name;\n\tif(parts[0] === \"$:\") {\n\t\tif(parts[1] === \"languages\" &amp;&amp; parts.length === 3) {\n\t\t\tpluginPath = \"languages\" + path.sep + parts[2];\n\t\t\ttype = parts[1];\n\t\t\tname = parts[2];\n\t\t} else if(parts[1] === \"plugins\" || parts[1] === \"themes\" &amp;&amp; parts.length === 4) {\n\t\t\tpluginPath = parts[1] + path.sep + parts[2] + path.sep + parts[3];\n\t\t\ttype = parts[1];\n\t\t\tname = parts[2] + \"/\" + parts[3];\n\t\t}\n\t}\n\tif(pluginPath &amp;&amp; type &amp;&amp; name) {\n\t\tpluginPath = path.resolve($tw.boot.bootPath,\"..\",pluginPath);\n\t\tif(fs.existsSync(pluginPath)) {\n\t\t\treturn {\n\t\t\t\tpluginPath: pluginPath,\n\t\t\t\ttype: type,\n\t\t\t\tname: name\n\t\t\t};\n\t\t}\n\t}\n\treturn false;\n};\n\nWikiFolderMaker.prototype.saveCustomPlugin = function(pluginTiddler) {\n\tvar self = this,\n\t\tpluginTitle = pluginTiddler.fields.title,\n\t\ttitleParts = pluginTitle.split(\"/\"),\n\t\tdirectory = $tw.utils.generateTiddlerFilepath(titleParts[titleParts.length - 1],{\n\t\t\tdirectory: path.resolve(this.wikiFolderPath,pluginTiddler.fields[\"plugin-type\"] + \"s\")\n\t\t}),\n\t\tpluginInfo = pluginTiddler.getFieldStrings({exclude: [\"text\",\"type\"]});\n\tthis.saveJSONFile(directory + path.sep + \"plugin.info\",pluginInfo);\n\tself.log(\"Writing \" + directory + path.sep + \"plugin.info: \" + JSON.stringify(pluginInfo,null,$tw.config.preferences.jsonSpaces));\n\tvar pluginTiddlers = JSON.parse(pluginTiddler.fields.text).tiddlers; // A hashmap of tiddlers in the plugin\n\t$tw.utils.each(pluginTiddlers,function(tiddler) {\n\t\tself.saveTiddler(directory,new $tw.Tiddler(tiddler));\n\t});\n};\n\nWikiFolderMaker.prototype.saveTiddler = function(directory,tiddler) {\n\tvar title = tiddler.fields.title, fileInfo, pathFilters, extFilters;\n\tif(this.wiki.tiddlerExists(\"$:/config/FileSystemPaths\")) {\n\t\tpathFilters = this.wiki.getTiddlerText(\"$:/config/FileSystemPaths\",\"\").split(\"\\n\");\n\t}\n\tif(this.wiki.tiddlerExists(\"$:/config/FileSystemExtensions\")) {\n\t\textFilters = this.wiki.getTiddlerText(\"$:/config/FileSystemExtensions\",\"\").split(\"\\n\");\n\t}\n\tvar fileInfo = $tw.utils.generateTiddlerFileInfo(tiddler,{\n\t\tdirectory: path.resolve(this.wikiFolderPath,directory),\n\t\tpathFilters: pathFilters,\n\t\textFilters: extFilters,\n\t\twiki: this.wiki,\n\t\tfileInfo: {}\n\t});\n\ttry {\n\t\t$tw.utils.saveTiddlerToFileSync(tiddler,fileInfo);\n\t} catch (err) {\n\t\tconsole.log(\"SaveWikiFolder: Error saving file '\" + fileInfo.filepath + \"', tiddler: '\" + tiddler.fields.title);\n\t}\n};\n\nWikiFolderMaker.prototype.saveJSONFile = function(filename,json) {\n\tthis.saveTextFile(filename,JSON.stringify(json,null,$tw.config.preferences.jsonSpaces));\n};\n\nWikiFolderMaker.prototype.saveTextFile = function(filename,data) {\n\tthis.saveFile(filename,\"utf8\",data);\n};\n\nWikiFolderMaker.prototype.saveFile = function(filename,encoding,data) {\n\tvar filepath = path.resolve(this.wikiFolderPath,filename);\n\t$tw.utils.createFileDirectories(filepath);\n\tfs.writeFileSync(filepath,data,encoding);\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/server.js":{"title":"$:/core/modules/commands/server.js","text":"/*\\\ntitle: $:/core/modules/commands/server.js\ntype: application/javascript\nmodule-type: command\n\nDeprecated legacy command for serving tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Server = require(\"$:/core/modules/server/server.js\").Server;\n\nexports.info = {\n\tname: \"server\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tvar self = this;\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(!$tw.boot.wikiTiddlersPath) {\n\t\t$tw.utils.warning(\"Warning: Wiki folder '\" + $tw.boot.wikiPath + \"' does not exist or is missing a tiddlywiki.info file\");\n\t}\n\t// Set up server\n\tthis.server = new Server({\n\t\twiki: this.commander.wiki,\n\t\tvariables: {\n\t\t\tport: this.params[0],\n\t\t\thost: this.params[6],\n\t\t\t\"root-tiddler\": this.params[1],\n\t\t\t\"root-render-type\": this.params[2],\n\t\t\t\"root-serve-type\": this.params[3],\n\t\t\tusername: this.params[4],\n\t\t\tpassword: this.params[5],\n\t\t\t\"path-prefix\": this.params[7],\n\t\t\t\"debug-level\": this.params[8]\n\t\t}\n\t});\n\tvar nodeServer = this.server.listen();\n\t$tw.hooks.invokeHook(\"th-server-command-post-start\",this.server,nodeServer,\"tiddlywiki\");\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/setfield.js":{"title":"$:/core/modules/commands/setfield.js","text":"/*\\\ntitle: $:/core/modules/commands/setfield.js\ntype: application/javascript\nmodule-type: command\n\nCommand to modify selected tiddlers to set a field to the text of a template tiddler that has been wikified with the selected tiddler as the current tiddler.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.info = {\n\tname: \"setfield\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 4) {\n\t\treturn \"Missing parameters\";\n\t}\n\tvar self = this,\n\t\twiki = this.commander.wiki,\n\t\tfilter = this.params[0],\n\t\tfieldname = this.params[1] || \"text\",\n\t\ttemplatetitle = this.params[2],\n\t\trendertype = this.params[3] || \"text/plain\",\n\t\ttiddlers = wiki.filterTiddlers(filter);\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar parser = wiki.parseTiddler(templatetitle),\n\t\t\tnewFields = {},\n\t\t\ttiddler = wiki.getTiddler(title);\n\t\tif(parser) {\n\t\t\tvar widgetNode = wiki.makeWidget(parser,{variables: {currentTiddler: title}});\n\t\t\tvar container = $tw.fakeDocument.createElement(\"div\");\n\t\t\twidgetNode.render(container,null);\n\t\t\tnewFields[fieldname] = rendertype === \"text/html\" ? container.innerHTML : container.textContent;\n\t\t} else {\n\t\t\tnewFields[fieldname] = undefined;\n\t\t}\n\t\twiki.addTiddler(new $tw.Tiddler(tiddler,newFields));\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/unpackplugin.js":{"title":"$:/core/modules/commands/unpackplugin.js","text":"/*\\\ntitle: $:/core/modules/commands/unpackplugin.js\ntype: application/javascript\nmodule-type: command\n\nCommand to extract the shadow tiddlers from within a plugin\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"unpackplugin\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander,callback) {\n\tthis.params = params;\n\tthis.commander = commander;\n\tthis.callback = callback;\n};\n\nCommand.prototype.execute = function() {\n\tif(this.params.length &lt; 1) {\n\t\treturn \"Missing plugin name\";\n\t}\n\tvar self = this,\n\t\ttitle = this.params[0],\n\t\tpluginData = this.commander.wiki.getTiddlerDataCached(title);\n\tif(!pluginData) {\n\t\treturn \"Plugin '\" + title + \"' not found\";\n\t}\n\t$tw.utils.each(pluginData.tiddlers,function(tiddler) {\n\t\tself.commander.wiki.addTiddler(new $tw.Tiddler(tiddler));\n\t});\n\treturn null;\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/verbose.js":{"title":"$:/core/modules/commands/verbose.js","text":"/*\\\ntitle: $:/core/modules/commands/verbose.js\ntype: application/javascript\nmodule-type: command\n\nVerbose command\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"verbose\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\tthis.commander.verbose = true;\n\t// Output the boot message log\n\tthis.commander.streams.output.write(\"Boot log:\\n  \" + $tw.boot.logMessages.join(\"\\n  \") + \"\\n\");\n\treturn null; // No error\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/commands/version.js":{"title":"$:/core/modules/commands/version.js","text":"/*\\\ntitle: $:/core/modules/commands/version.js\ntype: application/javascript\nmodule-type: command\n\nVersion command\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.info = {\n\tname: \"version\",\n\tsynchronous: true\n};\n\nvar Command = function(params,commander) {\n\tthis.params = params;\n\tthis.commander = commander;\n};\n\nCommand.prototype.execute = function() {\n\tthis.commander.streams.output.write($tw.version + \"\\n\");\n\treturn null; // No error\n};\n\nexports.Command = Command;\n\n})();\n","type":"application/javascript","module-type":"command"},"$:/core/modules/config.js":{"title":"$:/core/modules/config.js","text":"/*\\\ntitle: $:/core/modules/config.js\ntype: application/javascript\nmodule-type: config\n\nCore configuration constants\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.preferences = {};\n\nexports.preferences.notificationDuration = 3 * 1000;\nexports.preferences.jsonSpaces = 4;\n\nexports.textPrimitives = {\n\tupperLetter: \"[A-Z\\u00c0-\\u00d6\\u00d8-\\u00de\\u0150\\u0170]\",\n\tlowerLetter: \"[a-z\\u00df-\\u00f6\\u00f8-\\u00ff\\u0151\\u0171]\",\n\tanyLetter:   \"[A-Za-z0-9\\u00c0-\\u00d6\\u00d8-\\u00de\\u00df-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]\",\n\tblockPrefixLetters:\t\"[A-Za-z0-9-_\\u00c0-\\u00d6\\u00d8-\\u00de\\u00df-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]\"\n};\n\nexports.textPrimitives.unWikiLink = \"~\";\nexports.textPrimitives.wikiLink = exports.textPrimitives.upperLetter + \"+\" +\n\texports.textPrimitives.lowerLetter + \"+\" +\n\texports.textPrimitives.upperLetter +\n\texports.textPrimitives.anyLetter + \"*\";\n\nexports.htmlEntities = {quot:34, amp:38, apos:39, lt:60, gt:62, nbsp:160, iexcl:161, cent:162, pound:163, curren:164, yen:165, brvbar:166, sect:167, uml:168, copy:169, ordf:170, laquo:171, not:172, shy:173, reg:174, macr:175, deg:176, plusmn:177, sup2:178, sup3:179, acute:180, micro:181, para:182, middot:183, cedil:184, sup1:185, ordm:186, raquo:187, frac14:188, frac12:189, frac34:190, iquest:191, Agrave:192, Aacute:193, Acirc:194, Atilde:195, Auml:196, Aring:197, AElig:198, Ccedil:199, Egrave:200, Eacute:201, Ecirc:202, Euml:203, Igrave:204, Iacute:205, Icirc:206, Iuml:207, ETH:208, Ntilde:209, Ograve:210, Oacute:211, Ocirc:212, Otilde:213, Ouml:214, times:215, Oslash:216, Ugrave:217, Uacute:218, Ucirc:219, Uuml:220, Yacute:221, THORN:222, szlig:223, agrave:224, aacute:225, acirc:226, atilde:227, auml:228, aring:229, aelig:230, ccedil:231, egrave:232, eacute:233, ecirc:234, euml:235, igrave:236, iacute:237, icirc:238, iuml:239, eth:240, ntilde:241, ograve:242, oacute:243, ocirc:244, otilde:245, ouml:246, divide:247, oslash:248, ugrave:249, uacute:250, ucirc:251, uuml:252, yacute:253, thorn:254, yuml:255, OElig:338, oelig:339, Scaron:352, scaron:353, Yuml:376, fnof:402, circ:710, tilde:732, Alpha:913, Beta:914, Gamma:915, Delta:916, Epsilon:917, Zeta:918, Eta:919, Theta:920, Iota:921, Kappa:922, Lambda:923, Mu:924, Nu:925, Xi:926, Omicron:927, Pi:928, Rho:929, Sigma:931, Tau:932, Upsilon:933, Phi:934, Chi:935, Psi:936, Omega:937, alpha:945, beta:946, gamma:947, delta:948, epsilon:949, zeta:950, eta:951, theta:952, iota:953, kappa:954, lambda:955, mu:956, nu:957, xi:958, omicron:959, pi:960, rho:961, sigmaf:962, sigma:963, tau:964, upsilon:965, phi:966, chi:967, psi:968, omega:969, thetasym:977, upsih:978, piv:982, ensp:8194, emsp:8195, thinsp:8201, zwnj:8204, zwj:8205, lrm:8206, rlm:8207, ndash:8211, mdash:8212, lsquo:8216, rsquo:8217, sbquo:8218, ldquo:8220, rdquo:8221, bdquo:8222, dagger:8224, Dagger:8225, bull:8226, hellip:8230, permil:8240, prime:8242, Prime:8243, lsaquo:8249, rsaquo:8250, oline:8254, frasl:8260, euro:8364, image:8465, weierp:8472, real:8476, trade:8482, alefsym:8501, larr:8592, uarr:8593, rarr:8594, darr:8595, harr:8596, crarr:8629, lArr:8656, uArr:8657, rArr:8658, dArr:8659, hArr:8660, forall:8704, part:8706, exist:8707, empty:8709, nabla:8711, isin:8712, notin:8713, ni:8715, prod:8719, sum:8721, minus:8722, lowast:8727, radic:8730, prop:8733, infin:8734, ang:8736, and:8743, or:8744, cap:8745, cup:8746, int:8747, there4:8756, sim:8764, cong:8773, asymp:8776, ne:8800, equiv:8801, le:8804, ge:8805, sub:8834, sup:8835, nsub:8836, sube:8838, supe:8839, oplus:8853, otimes:8855, perp:8869, sdot:8901, lceil:8968, rceil:8969, lfloor:8970, rfloor:8971, lang:9001, rang:9002, loz:9674, spades:9824, clubs:9827, hearts:9829, diams:9830 };\n\nexports.htmlVoidElements = \"area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr\".split(\",\");\n\nexports.htmlBlockElements = \"address,article,aside,audio,blockquote,canvas,dd,details,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,li,nav,ol,p,pre,section,summary,table,tfoot,ul,video\".split(\",\");\n\nexports.htmlUnsafeElements = \"script\".split(\",\");\n\n})();\n","type":"application/javascript","module-type":"config"},"$:/core/modules/deserializers.js":{"title":"$:/core/modules/deserializers.js","text":"/*\\\ntitle: $:/core/modules/deserializers.js\ntype: application/javascript\nmodule-type: tiddlerdeserializer\n\nFunctions to deserialise tiddlers from a block of text\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nUtility function to parse an old-style tiddler DIV in a *.tid file. It looks like this:\n\n&lt;div title=\"Title\" creator=\"JoeBloggs\" modifier=\"JoeBloggs\" created=\"201102111106\" modified=\"201102111310\" tags=\"myTag [[my long tag]]\"&gt;\n&lt;pre&gt;The text of the tiddler (without the expected HTML encoding).\n&lt;/pre&gt;\n&lt;/div&gt;\n\nNote that the field attributes are HTML encoded, but that the body of the &lt;PRE&gt; tag is not encoded.\n\nWhen these tiddler DIVs are encountered within a TiddlyWiki HTML file then the body is encoded in the usual way.\n*/\nvar parseTiddlerDiv = function(text /* [,fields] */) {\n\t// Slot together the default results\n\tvar result = {};\n\tif(arguments.length &gt; 1) {\n\t\tfor(var f=1; f&lt;arguments.length; f++) {\n\t\t\tvar fields = arguments[f];\n\t\t\tfor(var t in fields) {\n\t\t\t\tresult[t] = fields[t];\n\t\t\t}\n\t\t}\n\t}\n\t// Parse the DIV body\n\tvar startRegExp = /^\\s*&lt;div\\s+([^&gt;]*)&gt;(\\s*&lt;pre&gt;)?/gi,\n\t\tendRegExp,\n\t\tmatch = startRegExp.exec(text);\n\tif(match) {\n\t\t// Old-style DIVs don't have the &lt;pre&gt; tag\n\t\tif(match[2]) {\n\t\t\tendRegExp = /&lt;\\/pre&gt;\\s*&lt;\\/div&gt;\\s*$/gi;\n\t\t} else {\n\t\t\tendRegExp = /&lt;\\/div&gt;\\s*$/gi;\n\t\t}\n\t\tvar endMatch = endRegExp.exec(text);\n\t\tif(endMatch) {\n\t\t\t// Extract the text\n\t\t\tresult.text = text.substring(match.index + match[0].length,endMatch.index);\n\t\t\t// Process the attributes\n\t\t\tvar attrRegExp = /\\s*([^=\\s]+)\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)')/gi,\n\t\t\t\tattrMatch;\n\t\t\tdo {\n\t\t\t\tattrMatch = attrRegExp.exec(match[1]);\n\t\t\t\tif(attrMatch) {\n\t\t\t\t\tvar name = attrMatch[1];\n\t\t\t\t\tvar value = attrMatch[2] !== undefined ? attrMatch[2] : attrMatch[3];\n\t\t\t\t\tresult[name] = value;\n\t\t\t\t}\n\t\t\t} while(attrMatch);\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn undefined;\n};\n\nexports[\"application/x-tiddler-html-div\"] = function(text,fields) {\n\treturn [parseTiddlerDiv(text,fields)];\n};\n\nexports[\"application/json\"] = function(text,fields) {\n\tvar incoming,\n\t\tresults = [];\n\ttry {\n\t\tincoming = JSON.parse(text);\n\t} catch(e) {\n\t\tincoming = [{\n\t\t\ttitle: \"JSON error: \" + e,\n\t\t\ttext: \"\"\n\t\t}]\n\t}\n\tif(!$tw.utils.isArray(incoming)) {\n\t\tincoming = [incoming];\n\t}\n\tfor(var t=0; t&lt;incoming.length; t++) {\n\t\tvar incomingFields = incoming[t],\n\t\t\tfields = {};\n\t\tfor(var f in incomingFields) {\n\t\t\tif(typeof incomingFields[f] === \"string\") {\n\t\t\t\tfields[f] = incomingFields[f];\n\t\t\t}\n\t\t}\n\t\tresults.push(fields);\n\t}\n\treturn results;\n};\n\n/*\nParse an HTML file into tiddlers. There are three possibilities:\n# A TiddlyWiki classic HTML file containing `text/x-tiddlywiki` tiddlers\n# A TiddlyWiki5 HTML file containing `text/vnd.tiddlywiki` tiddlers\n# An ordinary HTML file\n*/\nexports[\"text/html\"] = function(text,fields) {\n\t// Check if we've got a store area\n\tvar storeAreaMarkerRegExp = /&lt;div id=[\"']?storeArea['\"]?( style=[\"']?display:none;[\"']?)?&gt;/gi,\n\t\tmatch = storeAreaMarkerRegExp.exec(text);\n\tif(match) {\n\t\t// If so, it's either a classic TiddlyWiki file or an unencrypted TW5 file\n\t\t// First read the normal tiddlers\n\t\tvar results = deserializeTiddlyWikiFile(text,storeAreaMarkerRegExp.lastIndex,!!match[1],fields);\n\t\t// Then any system tiddlers\n\t\tvar systemAreaMarkerRegExp = /&lt;div id=[\"']?systemArea['\"]?( style=[\"']?display:none;[\"']?)?&gt;/gi,\n\t\t\tsysMatch = systemAreaMarkerRegExp.exec(text);\n\t\tif(sysMatch) {\n\t\t\tresults.push.apply(results,deserializeTiddlyWikiFile(text,systemAreaMarkerRegExp.lastIndex,!!sysMatch[1],fields));\n\t\t}\n\t\treturn results;\n\t} else {\n\t\t// Check whether we've got an encrypted file\n\t\tvar encryptedStoreArea = $tw.utils.extractEncryptedStoreArea(text);\n\t\tif(encryptedStoreArea) {\n\t\t\t// If so, attempt to decrypt it using the current password\n\t\t\treturn $tw.utils.decryptStoreArea(encryptedStoreArea);\n\t\t} else {\n\t\t\t// It's not a TiddlyWiki so we'll return the entire HTML file as a tiddler\n\t\t\treturn deserializeHtmlFile(text,fields);\n\t\t}\n\t}\n};\n\nfunction deserializeHtmlFile(text,fields) {\n\tvar result = {};\n\t$tw.utils.each(fields,function(value,name) {\n\t\tresult[name] = value;\n\t});\n\tresult.text = text;\n\tresult.type = \"text/html\";\n\treturn [result];\n}\n\nfunction deserializeTiddlyWikiFile(text,storeAreaEnd,isTiddlyWiki5,fields) {\n\tvar results = [],\n\t\tendOfDivRegExp = /(&lt;\\/div&gt;\\s*)/gi,\n\t\tstartPos = storeAreaEnd,\n\t\tdefaultType = isTiddlyWiki5 ? undefined : \"text/x-tiddlywiki\";\n\tendOfDivRegExp.lastIndex = startPos;\n\tvar match = endOfDivRegExp.exec(text);\n\twhile(match) {\n\t\tvar endPos = endOfDivRegExp.lastIndex,\n\t\t\ttiddlerFields = parseTiddlerDiv(text.substring(startPos,endPos),fields,{type: defaultType});\n\t\tif(!tiddlerFields) {\n\t\t\tbreak;\n\t\t}\n\t\t$tw.utils.each(tiddlerFields,function(value,name) {\n\t\t\tif(typeof value === \"string\") {\n\t\t\t\ttiddlerFields[name] = $tw.utils.htmlDecode(value);\n\t\t\t}\n\t\t});\n\t\tif(tiddlerFields.text !== null) {\n\t\t\tresults.push(tiddlerFields);\n\t\t}\n\t\tstartPos = endPos;\n\t\tmatch = endOfDivRegExp.exec(text);\n\t}\n\treturn results;\n}\n\n})();\n","type":"application/javascript","module-type":"tiddlerdeserializer"},"$:/core/modules/editor/engines/framed.js":{"title":"$:/core/modules/editor/engines/framed.js","text":"/*\\\ntitle: $:/core/modules/editor/engines/framed.js\ntype: application/javascript\nmodule-type: library\n\nText editor engine based on a simple input or textarea within an iframe. This is done so that the selection is preserved even when clicking away from the textarea\n\n\\*/\n(function(){\n\n/*jslint node: true,browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar HEIGHT_VALUE_TITLE = \"$:/config/TextEditor/EditorHeight/Height\";\n\nfunction FramedEngine(options) {\n\t// Save our options\n\toptions = options || {};\n\tthis.widget = options.widget;\n\tthis.value = options.value;\n\tthis.parentNode = options.parentNode;\n\tthis.nextSibling = options.nextSibling;\n\t// Create our hidden dummy text area for reading styles\n\tthis.dummyTextArea = this.widget.document.createElement(\"textarea\");\n\tif(this.widget.editClass) {\n\t\tthis.dummyTextArea.className = this.widget.editClass;\n\t}\n\tthis.dummyTextArea.setAttribute(\"hidden\",\"true\");\n\tthis.parentNode.insertBefore(this.dummyTextArea,this.nextSibling);\n\tthis.widget.domNodes.push(this.dummyTextArea);\n\t// Create the iframe\n\tthis.iframeNode = this.widget.document.createElement(\"iframe\");\n\tthis.parentNode.insertBefore(this.iframeNode,this.nextSibling);\n\tthis.iframeDoc = this.iframeNode.contentWindow.document;\n\t// (Firefox requires us to put some empty content in the iframe)\n\tthis.iframeDoc.open();\n\tthis.iframeDoc.write(\"\");\n\tthis.iframeDoc.close();\n\t// Style the iframe\n\tthis.iframeNode.className = this.dummyTextArea.className;\n\tthis.iframeNode.style.border = \"none\";\n\tthis.iframeNode.style.padding = \"0\";\n\tthis.iframeNode.style.resize = \"none\";\n\tthis.iframeDoc.body.style.margin = \"0\";\n\tthis.iframeDoc.body.style.padding = \"0\";\n\tthis.widget.domNodes.push(this.iframeNode);\n\t// Construct the textarea or input node\n\tvar tag = this.widget.editTag;\n\tif($tw.config.htmlUnsafeElements.indexOf(tag) !== -1) {\n\t\ttag = \"input\";\n\t}\n\tthis.domNode = this.iframeDoc.createElement(tag);\n\t// Set the text\n\tif(this.widget.editTag === \"textarea\") {\n\t\tthis.domNode.appendChild(this.iframeDoc.createTextNode(this.value));\n\t} else {\n\t\tthis.domNode.value = this.value;\n\t}\n\t// Set the attributes\n\tif(this.widget.editType) {\n\t\tthis.domNode.setAttribute(\"type\",this.widget.editType);\n\t}\n\tif(this.widget.editPlaceholder) {\n\t\tthis.domNode.setAttribute(\"placeholder\",this.widget.editPlaceholder);\n\t}\n\tif(this.widget.editSize) {\n\t\tthis.domNode.setAttribute(\"size\",this.widget.editSize);\n\t}\n\tif(this.widget.editRows) {\n\t\tthis.domNode.setAttribute(\"rows\",this.widget.editRows);\n\t}\n\tif(this.widget.editTabIndex) {\n\t\tthis.iframeNode.setAttribute(\"tabindex\",this.widget.editTabIndex);\n\t}\n\tif(this.widget.editAutoComplete) {\n\t\tthis.domNode.setAttribute(\"autocomplete\",this.widget.editAutoComplete);\n\t}\n\tif(this.widget.isDisabled === \"yes\") {\n\t\tthis.domNode.setAttribute(\"disabled\",true);\n\t}\n\t// Copy the styles from the dummy textarea\n\tthis.copyStyles();\n\t// Add event listeners\n\t$tw.utils.addEventListeners(this.domNode,[\n\t\t{name: \"click\",handlerObject: this,handlerMethod: \"handleClickEvent\"},\n\t\t{name: \"input\",handlerObject: this,handlerMethod: \"handleInputEvent\"},\n\t\t{name: \"keydown\",handlerObject: this.widget,handlerMethod: \"handleKeydownEvent\"},\n\t\t{name: \"focus\",handlerObject: this,handlerMethod: \"handleFocusEvent\"}\n\t]);\n\t// Add drag and drop event listeners if fileDrop is enabled\n\tif(this.widget.isFileDropEnabled) {\n\t\t$tw.utils.addEventListeners(this.domNode,[\n\t\t\t{name: \"dragenter\",handlerObject: this.widget,handlerMethod: \"handleDragEnterEvent\"},\n\t\t\t{name: \"dragover\",handlerObject: this.widget,handlerMethod: \"handleDragOverEvent\"},\n\t\t\t{name: \"dragleave\",handlerObject: this.widget,handlerMethod: \"handleDragLeaveEvent\"},\n\t\t\t{name: \"dragend\",handlerObject: this.widget,handlerMethod: \"handleDragEndEvent\"},\n\t\t\t{name: \"drop\", handlerObject: this.widget,handlerMethod: \"handleDropEvent\"},\n\t\t\t{name: \"paste\", handlerObject: this.widget,handlerMethod: \"handlePasteEvent\"},\n\t\t\t{name: \"click\",handlerObject: this.widget,handlerMethod: \"handleClickEvent\"}\n\t\t]);\n\t}\n\t// Insert the element into the DOM\n\tthis.iframeDoc.body.appendChild(this.domNode);\n}\n\n/*\nCopy styles from the dummy text area to the textarea in the iframe\n*/\nFramedEngine.prototype.copyStyles = function() {\n\t// Copy all styles\n\t$tw.utils.copyStyles(this.dummyTextArea,this.domNode);\n\t// Override the ones that should not be set the same as the dummy textarea\n\tthis.domNode.style.display = \"block\";\n\tthis.domNode.style.width = \"100%\";\n\tthis.domNode.style.margin = \"0\";\n\t// In Chrome setting -webkit-text-fill-color overrides the placeholder text colour\n\tthis.domNode.style[\"-webkit-text-fill-color\"] = \"currentcolor\";\n};\n\n/*\nSet the text of the engine if it doesn't currently have focus\n*/\nFramedEngine.prototype.setText = function(text,type) {\n\tif(!this.domNode.isTiddlyWikiFakeDom) {\n\t\tif(this.domNode.ownerDocument.activeElement !== this.domNode) {\n\t\t\tthis.updateDomNodeText(text);\n\t\t}\n\t\t// Fix the height if needed\n\t\tthis.fixHeight();\n\t}\n};\n\n/*\nUpdate the DomNode with the new text\n*/\nFramedEngine.prototype.updateDomNodeText = function(text) {\n\tthis.domNode.value = text;\n};\n\n/*\nGet the text of the engine\n*/\nFramedEngine.prototype.getText = function() {\n\treturn this.domNode.value;\n};\n\n/*\nFix the height of textarea to fit content\n*/\nFramedEngine.prototype.fixHeight = function() {\n\t// Make sure styles are updated\n\tthis.copyStyles();\n\t// Adjust height\n\tif(this.widget.editTag === \"textarea\") {\n\t\tif(this.widget.editAutoHeight) {\n\t\t\tif(this.domNode &amp;&amp; !this.domNode.isTiddlyWikiFakeDom) {\n\t\t\t\tvar newHeight = $tw.utils.resizeTextAreaToFit(this.domNode,this.widget.editMinHeight);\n\t\t\t\tthis.iframeNode.style.height = (newHeight + 14) + \"px\"; // +14 for the border on the textarea\n\t\t\t}\n\t\t} else {\n\t\t\tvar fixedHeight = parseInt(this.widget.wiki.getTiddlerText(HEIGHT_VALUE_TITLE,\"400px\"),10);\n\t\t\tfixedHeight = Math.max(fixedHeight,20);\n\t\t\tthis.domNode.style.height = fixedHeight + \"px\";\n\t\t\tthis.iframeNode.style.height = (fixedHeight + 14) + \"px\";\n\t\t}\n\t}\n};\n\n/*\nFocus the engine node\n*/\nFramedEngine.prototype.focus  = function() {\n\tif(this.domNode.focus &amp;&amp; this.domNode.select) {\n\t\tthis.domNode.focus();\n\t\tthis.domNode.select();\n\t}\n};\n\n/*\nHandle a focus event\n*/\nFramedEngine.prototype.handleFocusEvent = function(event) {\n\tif(this.widget.editCancelPopups) {\n\t\t$tw.popup.cancel(0);\n\t}\n};\n\n/*\nHandle a click\n*/\nFramedEngine.prototype.handleClickEvent = function(event) {\n\tthis.fixHeight();\n\treturn true;\n};\n\n/*\nHandle a dom \"input\" event which occurs when the text has changed\n*/\nFramedEngine.prototype.handleInputEvent = function(event) {\n\tthis.widget.saveChanges(this.getText());\n\tthis.fixHeight();\n\tif(this.widget.editInputActions) {\n\t\tthis.widget.invokeActionString(this.widget.editInputActions);\n\t}\n\treturn true;\n};\n\n/*\nCreate a blank structure representing a text operation\n*/\nFramedEngine.prototype.createTextOperation = function() {\n\tvar operation = {\n\t\ttext: this.domNode.value,\n\t\tselStart: this.domNode.selectionStart,\n\t\tselEnd: this.domNode.selectionEnd,\n\t\tcutStart: null,\n\t\tcutEnd: null,\n\t\treplacement: null,\n\t\tnewSelStart: null,\n\t\tnewSelEnd: null\n\t};\n\toperation.selection = operation.text.substring(operation.selStart,operation.selEnd);\n\treturn operation;\n};\n\n/*\nExecute a text operation\n*/\nFramedEngine.prototype.executeTextOperation = function(operation) {\n\t// Perform the required changes to the text area and the underlying tiddler\n\tvar newText = operation.text;\n\tif(operation.replacement !== null) {\n\t\tnewText = operation.text.substring(0,operation.cutStart) + operation.replacement + operation.text.substring(operation.cutEnd);\n\t\t// Attempt to use a execCommand to modify the value of the control\n\t\tif(this.iframeDoc.queryCommandSupported(\"insertText\") &amp;&amp; this.iframeDoc.queryCommandSupported(\"delete\") &amp;&amp; !$tw.browser.isFirefox) {\n\t\t\tthis.domNode.focus();\n\t\t\tthis.domNode.setSelectionRange(operation.cutStart,operation.cutEnd);\n\t\t\tif(operation.replacement === \"\") {\n\t\t\t\tthis.iframeDoc.execCommand(\"delete\",false,\"\");\n\t\t\t} else {\n\t\t\t\tthis.iframeDoc.execCommand(\"insertText\",false,operation.replacement);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.domNode.value = newText;\n\t\t}\n\t\tthis.domNode.focus();\n\t\tthis.domNode.setSelectionRange(operation.newSelStart,operation.newSelEnd);\n\t}\n\tthis.domNode.focus();\n\treturn newText;\n};\n\nexports.FramedEngine = FramedEngine;\n\n})();\n","type":"application/javascript","module-type":"library"},"$:/core/modules/editor/engines/simple.js":{"title":"$:/core/modules/editor/engines/simple.js","text":"/*\\\ntitle: $:/core/modules/editor/engines/simple.js\ntype: application/javascript\nmodule-type: library\n\nText editor engine based on a simple input or textarea tag\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar HEIGHT_VALUE_TITLE = \"$:/config/TextEditor/EditorHeight/Height\";\n\nfunction SimpleEngine(options) {\n\t// Save our options\n\toptions = options || {};\n\tthis.widget = options.widget;\n\tthis.value = options.value;\n\tthis.parentNode = options.parentNode;\n\tthis.nextSibling = options.nextSibling;\n\t// Construct the textarea or input node\n\tvar tag = this.widget.editTag;\n\tif($tw.config.htmlUnsafeElements.indexOf(tag) !== -1) {\n\t\ttag = \"input\";\n\t}\n\tthis.domNode = this.widget.document.createElement(tag);\n\t// Set the text\n\tif(this.widget.editTag === \"textarea\") {\n\t\tthis.domNode.appendChild(this.widget.document.createTextNode(this.value));\n\t} else {\n\t\tthis.domNode.value = this.value;\n\t}\n\t// Set the attributes\n\tif(this.widget.editType) {\n\t\tthis.domNode.setAttribute(\"type\",this.widget.editType);\n\t}\n\tif(this.widget.editPlaceholder) {\n\t\tthis.domNode.setAttribute(\"placeholder\",this.widget.editPlaceholder);\n\t}\n\tif(this.widget.editSize) {\n\t\tthis.domNode.setAttribute(\"size\",this.widget.editSize);\n\t}\n\tif(this.widget.editRows) {\n\t\tthis.domNode.setAttribute(\"rows\",this.widget.editRows);\n\t}\n\tif(this.widget.editClass) {\n\t\tthis.domNode.className = this.widget.editClass;\n\t}\n\tif(this.widget.editTabIndex) {\n\t\tthis.domNode.setAttribute(\"tabindex\",this.widget.editTabIndex);\n\t}\n\tif(this.widget.editAutoComplete) {\n\t\tthis.domNode.setAttribute(\"autocomplete\",this.widget.editAutoComplete);\n\t}\n\tif(this.widget.isDisabled === \"yes\") {\n\t\tthis.domNode.setAttribute(\"disabled\",true);\n\t}\n\t// Add an input event handler\n\t$tw.utils.addEventListeners(this.domNode,[\n\t\t{name: \"focus\", handlerObject: this, handlerMethod: \"handleFocusEvent\"},\n\t\t{name: \"input\", handlerObject: this, handlerMethod: \"handleInputEvent\"}\n\t]);\n\t// Insert the element into the DOM\n\tthis.parentNode.insertBefore(this.domNode,this.nextSibling);\n\tthis.widget.domNodes.push(this.domNode);\n}\n\n/*\nSet the text of the engine if it doesn't currently have focus\n*/\nSimpleEngine.prototype.setText = function(text,type) {\n\tif(!this.domNode.isTiddlyWikiFakeDom) {\n\t\tif(this.domNode.ownerDocument.activeElement !== this.domNode || text === \"\") {\n\t\t\tthis.updateDomNodeText(text);\n\t\t}\n\t\t// Fix the height if needed\n\t\tthis.fixHeight();\n\t}\n};\n\n/*\nUpdate the DomNode with the new text\n*/\nSimpleEngine.prototype.updateDomNodeText = function(text) {\n\tthis.domNode.value = text;\n};\n\n/*\nGet the text of the engine\n*/\nSimpleEngine.prototype.getText = function() {\n\treturn this.domNode.value;\n};\n\n/*\nFix the height of textarea to fit content\n*/\nSimpleEngine.prototype.fixHeight = function() {\n\tif(this.widget.editTag === \"textarea\") {\n\t\tif(this.widget.editAutoHeight) {\n\t\t\tif(this.domNode &amp;&amp; !this.domNode.isTiddlyWikiFakeDom) {\n\t\t\t\t$tw.utils.resizeTextAreaToFit(this.domNode,this.widget.editMinHeight);\n\t\t\t}\n\t\t} else {\n\t\t\tvar fixedHeight = parseInt(this.widget.wiki.getTiddlerText(HEIGHT_VALUE_TITLE,\"400px\"),10);\n\t\t\tfixedHeight = Math.max(fixedHeight,20);\n\t\t\tthis.domNode.style.height = fixedHeight + \"px\";\n\t\t}\n\t}\n};\n\n/*\nFocus the engine node\n*/\nSimpleEngine.prototype.focus  = function() {\n\tif(this.domNode.focus &amp;&amp; this.domNode.select) {\n\t\tthis.domNode.focus();\n\t\tthis.domNode.select();\n\t}\n};\n\n/*\nHandle a dom \"input\" event which occurs when the text has changed\n*/\nSimpleEngine.prototype.handleInputEvent = function(event) {\n\tthis.widget.saveChanges(this.getText());\n\tthis.fixHeight();\n\tif(this.widget.editInputActions) {\n\t\tthis.widget.invokeActionString(this.widget.editInputActions);\n\t}\n\treturn true;\n};\n\n/*\nHandle a dom \"focus\" event\n*/\nSimpleEngine.prototype.handleFocusEvent = function(event) {\n\tif(this.widget.editCancelPopups) {\n\t\t$tw.popup.cancel(0);\n\t}\n\tif(this.widget.editFocusPopup) {\n\t\t$tw.popup.triggerPopup({\n\t\t\tdomNode: this.domNode,\n\t\t\ttitle: this.widget.editFocusPopup,\n\t\t\twiki: this.widget.wiki,\n\t\t\tforce: true\n\t\t});\n\t}\n\treturn true;\n};\n\n/*\nCreate a blank structure representing a text operation\n*/\nSimpleEngine.prototype.createTextOperation = function() {\n\treturn null;\n};\n\n/*\nExecute a text operation\n*/\nSimpleEngine.prototype.executeTextOperation = function(operation) {\n};\n\nexports.SimpleEngine = SimpleEngine;\n\n})();\n","type":"application/javascript","module-type":"library"},"$:/core/modules/editor/factory.js":{"title":"$:/core/modules/editor/factory.js","text":"/*\\\ntitle: $:/core/modules/editor/factory.js\ntype: application/javascript\nmodule-type: library\n\nFactory for constructing text editor widgets with specified engines for the toolbar and non-toolbar cases\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar DEFAULT_MIN_TEXT_AREA_HEIGHT = \"100px\"; // Minimum height of textareas in pixels\n\n// Configuration tiddlers\nvar HEIGHT_MODE_TITLE = \"$:/config/TextEditor/EditorHeight/Mode\";\nvar ENABLE_TOOLBAR_TITLE = \"$:/config/TextEditor/EnableToolbar\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nfunction editTextWidgetFactory(toolbarEngine,nonToolbarEngine) {\n\n\tvar EditTextWidget = function(parseTreeNode,options) {\n\t\t// Initialise the editor operations if they've not been done already\n\t\tif(!this.editorOperations) {\n\t\t\tEditTextWidget.prototype.editorOperations = {};\n\t\t\t$tw.modules.applyMethods(\"texteditoroperation\",this.editorOperations);\n\t\t}\n\t\tthis.initialise(parseTreeNode,options);\n\t};\n\n\t/*\n\tInherit from the base widget class\n\t*/\n\tEditTextWidget.prototype = new Widget();\n\n\t/*\n\tRender this widget into the DOM\n\t*/\n\tEditTextWidget.prototype.render = function(parent,nextSibling) {\n\t\t// Save the parent dom node\n\t\tthis.parentDomNode = parent;\n\t\t// Compute our attributes\n\t\tthis.computeAttributes();\n\t\t// Execute our logic\n\t\tthis.execute();\n\t\t// Create the wrapper for the toolbar and render its content\n\t\tif(this.editShowToolbar) {\n\t\t\tthis.toolbarNode = this.document.createElement(\"div\");\n\t\t\tthis.toolbarNode.className = \"tc-editor-toolbar\";\n\t\t\tparent.insertBefore(this.toolbarNode,nextSibling);\n\t\t\tthis.renderChildren(this.toolbarNode,null);\n\t\t\tthis.domNodes.push(this.toolbarNode);\n\t\t}\n\t\t// Create our element\n\t\tvar editInfo = this.getEditInfo(),\n\t\t\tEngine = this.editShowToolbar ? toolbarEngine : nonToolbarEngine;\n\t\tthis.engine = new Engine({\n\t\t\t\twidget: this,\n\t\t\t\tvalue: editInfo.value,\n\t\t\t\ttype: editInfo.type,\n\t\t\t\tparentNode: parent,\n\t\t\t\tnextSibling: nextSibling\n\t\t\t});\n\t\t// Call the postRender hook\n\t\tif(this.postRender) {\n\t\t\tthis.postRender();\n\t\t}\n\t\t// Fix height\n\t\tthis.engine.fixHeight();\n\t\t// Focus if required\n\t\tif(this.editFocus === \"true\" || this.editFocus === \"yes\") {\n\t\t\tthis.engine.focus();\n\t\t}\n\t\t// Add widget message listeners\n\t\tthis.addEventListeners([\n\t\t\t{type: \"tm-edit-text-operation\", handler: \"handleEditTextOperationMessage\"}\n\t\t]);\n\t};\n\n\t/*\n\tGet the tiddler being edited and current value\n\t*/\n\tEditTextWidget.prototype.getEditInfo = function() {\n\t\t// Get the edit value\n\t\tvar self = this,\n\t\t\tvalue,\n\t\t\ttype = \"text/plain\",\n\t\t\tupdate;\n\t\tif(this.editIndex) {\n\t\t\tvalue = this.wiki.extractTiddlerDataItem(this.editTitle,this.editIndex,this.editDefault);\n\t\t\tupdate = function(value) {\n\t\t\t\tvar data = self.wiki.getTiddlerData(self.editTitle,{});\n\t\t\t\tif(data[self.editIndex] !== value) {\n\t\t\t\t\tdata[self.editIndex] = value;\n\t\t\t\t\tself.wiki.setTiddlerData(self.editTitle,data);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\t// Get the current tiddler and the field name\n\t\t\tvar tiddler = this.wiki.getTiddler(this.editTitle);\n\t\t\tif(tiddler) {\n\t\t\t\t// If we've got a tiddler, the value to display is the field string value\n\t\t\t\tif(tiddler.hasField(this.editField)) {\n\t\t\t\t\tvalue = tiddler.getFieldString(this.editField);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = this.editDefault || \"\";\n\t\t\t\t}\n\t\t\t\tif(this.editField === \"text\") {\n\t\t\t\t\ttype = tiddler.fields.type || \"text/vnd.tiddlywiki\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Otherwise, we need to construct a default value for the editor\n\t\t\t\tswitch(this.editField) {\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\tvalue = \"Type the text for the tiddler '\" + this.editTitle + \"'\";\n\t\t\t\t\t\ttype = \"text/vnd.tiddlywiki\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"title\":\n\t\t\t\t\t\tvalue = this.editTitle;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(this.editDefault !== undefined) {\n\t\t\t\t\tvalue = this.editDefault;\n\t\t\t\t}\n\t\t\t}\n\t\t\tupdate = function(value) {\n\t\t\t\tvar tiddler = self.wiki.getTiddler(self.editTitle),\n\t\t\t\t\tupdateFields = {\n\t\t\t\t\t\ttitle: self.editTitle\n\t\t\t\t\t};\n\t\t\t\tupdateFields[self.editField] = value;\n\t\t\t\tself.wiki.addTiddler(new $tw.Tiddler(self.wiki.getCreationFields(),tiddler,updateFields,self.wiki.getModificationFields()));\n\t\t\t};\n\t\t}\n\t\tif(this.editType) {\n\t\t\ttype = this.editType;\n\t\t}\n\t\treturn {value: value || \"\", type: type, update: update};\n\t};\n\n\t/*\n\tHandle an edit text operation message from the toolbar\n\t*/\n\tEditTextWidget.prototype.handleEditTextOperationMessage = function(event) {\n\t\t// Prepare information about the operation\n\t\tvar operation = this.engine.createTextOperation();\n\t\t// Invoke the handler for the selected operation\n\t\tvar handler = this.editorOperations[event.param];\n\t\tif(handler) {\n\t\t\thandler.call(this,event,operation);\n\t\t}\n\t\t// Execute the operation via the engine\n\t\tvar newText = this.engine.executeTextOperation(operation);\n\t\t// Fix the tiddler height and save changes\n\t\tthis.engine.fixHeight();\n\t\tthis.saveChanges(newText);\n\t};\n\n\t/*\n\tCompute the internal state of the widget\n\t*/\n\tEditTextWidget.prototype.execute = function() {\n\t\t// Get our parameters\n\t\tthis.editTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\t\tthis.editField = this.getAttribute(\"field\",\"text\");\n\t\tthis.editIndex = this.getAttribute(\"index\");\n\t\tthis.editDefault = this.getAttribute(\"default\");\n\t\tthis.editClass = this.getAttribute(\"class\");\n\t\tthis.editPlaceholder = this.getAttribute(\"placeholder\");\n\t\tthis.editSize = this.getAttribute(\"size\");\n\t\tthis.editRows = this.getAttribute(\"rows\");\n\t\tthis.editAutoHeight = this.wiki.getTiddlerText(HEIGHT_MODE_TITLE,\"auto\");\n\t\tthis.editAutoHeight = this.getAttribute(\"autoHeight\",this.editAutoHeight === \"auto\" ? \"yes\" : \"no\") === \"yes\";\n\t\tthis.editMinHeight = this.getAttribute(\"minHeight\",DEFAULT_MIN_TEXT_AREA_HEIGHT);\n\t\tthis.editFocusPopup = this.getAttribute(\"focusPopup\");\n\t\tthis.editFocus = this.getAttribute(\"focus\");\n\t\tthis.editTabIndex = this.getAttribute(\"tabindex\");\n\t\tthis.editCancelPopups = this.getAttribute(\"cancelPopups\",\"\") === \"yes\";\n\t\tthis.editInputActions = this.getAttribute(\"inputActions\");\n\t\tthis.editRefreshTitle = this.getAttribute(\"refreshTitle\");\n\t\tthis.editAutoComplete = this.getAttribute(\"autocomplete\");\n\t\tthis.isDisabled = this.getAttribute(\"disabled\",\"no\");\n\t\tthis.isFileDropEnabled = this.getAttribute(\"fileDrop\",\"no\") === \"yes\";\n\t\t// Get the default editor element tag and type\n\t\tvar tag,type;\n\t\tif(this.editField === \"text\") {\n\t\t\ttag = \"textarea\";\n\t\t} else {\n\t\t\ttag = \"input\";\n\t\t\tvar fieldModule = $tw.Tiddler.fieldModules[this.editField];\n\t\t\tif(fieldModule &amp;&amp; fieldModule.editTag) {\n\t\t\t\ttag = fieldModule.editTag;\n\t\t\t}\n\t\t\tif(fieldModule &amp;&amp; fieldModule.editType) {\n\t\t\t\ttype = fieldModule.editType;\n\t\t\t}\n\t\t\ttype = type || \"text\";\n\t\t}\n\t\t// Get the rest of our parameters\n\t\tthis.editTag = this.getAttribute(\"tag\",tag) || \"input\";\n\t\tthis.editType = this.getAttribute(\"type\",type);\n\t\t// Make the child widgets\n\t\tthis.makeChildWidgets();\n\t\t// Determine whether to show the toolbar\n\t\tthis.editShowToolbar = this.wiki.getTiddlerText(ENABLE_TOOLBAR_TITLE,\"yes\");\n\t\tthis.editShowToolbar = (this.editShowToolbar === \"yes\") &amp;&amp; !!(this.children &amp;&amp; this.children.length &gt; 0) &amp;&amp; (!this.document.isTiddlyWikiFakeDom);\n\t};\n\n\t/*\n\tSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n\t*/\n\tEditTextWidget.prototype.refresh = function(changedTiddlers) {\n\t\tvar changedAttributes = this.computeAttributes();\n\t\t// Completely rerender if any of our attributes have changed\n\t\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index || changedAttributes[\"default\"] || changedAttributes[\"class\"] || changedAttributes.placeholder || changedAttributes.size || changedAttributes.autoHeight || changedAttributes.minHeight || changedAttributes.focusPopup ||  changedAttributes.rows || changedAttributes.tabindex || changedAttributes.cancelPopups || changedAttributes.inputActions || changedAttributes.refreshTitle || changedAttributes.autocomplete || changedTiddlers[HEIGHT_MODE_TITLE] || changedTiddlers[ENABLE_TOOLBAR_TITLE] || changedAttributes.disabled || changedAttributes.fileDrop) {\n\t\t\tthis.refreshSelf();\n\t\t\treturn true;\n\t\t} else if (changedTiddlers[this.editRefreshTitle]) {\n\t\t\tthis.engine.updateDomNodeText(this.getEditInfo().value);\n\t\t} else if(changedTiddlers[this.editTitle]) {\n\t\t\tvar editInfo = this.getEditInfo();\n\t\t\tthis.updateEditor(editInfo.value,editInfo.type);\n\t\t}\n\t\tthis.engine.fixHeight();\n\t\tif(this.editShowToolbar) {\n\t\t\treturn this.refreshChildren(changedTiddlers);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/*\n\tUpdate the editor with new text. This method is separate from updateEditorDomNode()\n\tso that subclasses can override updateEditor() and still use updateEditorDomNode()\n\t*/\n\tEditTextWidget.prototype.updateEditor = function(text,type) {\n\t\tthis.updateEditorDomNode(text,type);\n\t};\n\n\t/*\n\tUpdate the editor dom node with new text\n\t*/\n\tEditTextWidget.prototype.updateEditorDomNode = function(text,type) {\n\t\tthis.engine.setText(text,type);\n\t};\n\n\t/*\n\tSave changes back to the tiddler store\n\t*/\n\tEditTextWidget.prototype.saveChanges = function(text) {\n\t\tvar editInfo = this.getEditInfo();\n\t\tif(text !== editInfo.value) {\n\t\t\teditInfo.update(text);\n\t\t}\n\t};\n\n\t/*\n\tHandle a dom \"keydown\" event, which we'll bubble up to our container for the keyboard widgets benefit\n\t*/\n\tEditTextWidget.prototype.handleKeydownEvent = function(event) {\n\t\t// Check for a keyboard shortcut\n\t\tif(this.toolbarNode) {\n\t\t\tvar shortcutElements = this.toolbarNode.querySelectorAll(\"[data-tw-keyboard-shortcut]\");\n\t\t\tfor(var index=0; index&lt;shortcutElements.length; index++) {\n\t\t\t\tvar el = shortcutElements[index],\n\t\t\t\t\tshortcutData = el.getAttribute(\"data-tw-keyboard-shortcut\"),\n\t\t\t\t\tkeyInfoArray = $tw.keyboardManager.parseKeyDescriptors(shortcutData,{\n\t\t\t\t\t\twiki: this.wiki\n\t\t\t\t\t});\n\t\t\t\tif($tw.keyboardManager.checkKeyDescriptors(event,keyInfoArray)) {\n\t\t\t\t\tvar clickEvent = this.document.createEvent(\"Events\");\n\t\t\t\t    clickEvent.initEvent(\"click\",true,false);\n\t\t\t\t    el.dispatchEvent(clickEvent);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Propogate the event to the container\n\t\tif(this.propogateKeydownEvent(event)) {\n\t\t\t// Ignore the keydown if it was already handled\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn true;\n\t\t}\n\t\t// Otherwise, process the keydown normally\n\t\treturn false;\n\t};\n\n\t/*\n\tPropogate keydown events to our container for the keyboard widgets benefit\n\t*/\n\tEditTextWidget.prototype.propogateKeydownEvent = function(event) {\n\t\tvar newEvent = this.cloneEvent(event,[\"keyCode\",\"which\",\"metaKey\",\"ctrlKey\",\"altKey\",\"shiftKey\"]);\n\t\treturn !this.parentDomNode.dispatchEvent(newEvent);\n\t};\n\n\tEditTextWidget.prototype.cloneEvent = function(event,propertiesToCopy) {\n\t\tvar propertiesToCopy = propertiesToCopy || [],\n\t\t\tnewEvent = this.document.createEventObject ? this.document.createEventObject() : this.document.createEvent(\"Events\");\n\t\tif(newEvent.initEvent) {\n\t\t\tnewEvent.initEvent(event.type, true, true);\n\t\t}\n\t\t$tw.utils.each(propertiesToCopy,function(prop){\n\t\t\tnewEvent[prop] = event[prop];\n\t\t});\n\t\treturn newEvent;\n\t};\n\n\tEditTextWidget.prototype.dispatchDOMEvent = function(newEvent) {\n\t\tvar dispatchNode = this.engine.iframeNode || this.engine.parentNode;\n\t\treturn dispatchNode.dispatchEvent(newEvent);\n\t};\n\n\t/*\n\tPropogate drag and drop events with File data to our container for the dropzone widgets benefit.\n\tIf there are no Files, let the browser handle it.\n\t*/\n\tEditTextWidget.prototype.handleDropEvent = function(event) {\n\t\tif(event.dataTransfer.files.length) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.dispatchDOMEvent(this.cloneEvent(event,[\"dataTransfer\"]));\n\t\t} \n\t};\n\n\tEditTextWidget.prototype.handlePasteEvent = function(event) {\n\t\tif(event.clipboardData.files.length) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.dispatchDOMEvent(this.cloneEvent(event,[\"clipboardData\"]));\n\t\t}\n\t};\n\n\tEditTextWidget.prototype.handleDragEnterEvent = function(event) {\n\t\tif($tw.utils.dragEventContainsFiles(event)) {\n\t\t\t// Ignore excessive events fired by FF when entering and leaving text nodes in a text area.\n\t\t\tif( event.relatedTarget &amp;&amp; (event.relatedTarget.nodeType === 3 || event.target === event.relatedTarget)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\treturn this.dispatchDOMEvent(this.cloneEvent(event,[\"dataTransfer\"]));\n\t\t}\n\t\treturn true;\n\t};\n\n\tEditTextWidget.prototype.handleDragOverEvent = function(event) {\n\t\tif($tw.utils.dragEventContainsFiles(event)) {\n\t\t\t// Call preventDefault() in browsers that default to not allowing drop events on textarea\n\t\t\tif($tw.browser.isFirefox || $tw.browser.isIE) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tevent.dataTransfer.dropEffect = \"copy\";\n\t\t\treturn this.dispatchDOMEvent(this.cloneEvent(event,[\"dataTransfer\"]));\n\t\t}\n\t\treturn true;\n\t};\n\n\tEditTextWidget.prototype.handleDragLeaveEvent = function(event) {\n\t\t// Ignore excessive events fired by FF when entering and leaving text nodes in a text area.\n\t\tif(event.relatedTarget &amp;&amp; ((event.relatedTarget.nodeType === 3) || (event.target === event.relatedTarget))) {\n\t\t\treturn true;\n\t\t}\n\t\tevent.preventDefault();\n\t\tthis.dispatchDOMEvent(this.cloneEvent(event,[\"dataTransfer\"]));\n\t};\n\n\tEditTextWidget.prototype.handleDragEndEvent = function(event) {\n\t\tthis.dispatchDOMEvent(this.cloneEvent(event));\n\t};\n\n\tEditTextWidget.prototype.handleClickEvent = function(event) {\n\t\treturn !this.dispatchDOMEvent(this.cloneEvent(event));\n\t};\n\n\treturn EditTextWidget;\n}\n\nexports.editTextWidgetFactory = editTextWidgetFactory;\n\n})();\n","type":"application/javascript","module-type":"library"},"$:/core/modules/editor/operations/bitmap/clear.js":{"title":"$:/core/modules/editor/operations/bitmap/clear.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/bitmap/clear.js\ntype: application/javascript\nmodule-type: bitmapeditoroperation\n\nBitmap editor operation to clear the image\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"clear\"] = function(event) {\n\tvar ctx = this.canvasDomNode.getContext(\"2d\");\n\tctx.globalAlpha = 1;\n\tctx.fillStyle = event.paramObject.colour || \"white\";\n\tctx.fillRect(0,0,this.canvasDomNode.width,this.canvasDomNode.height);\n\t// Save changes\n\tthis.strokeEnd();\n};\n\n})();\n","type":"application/javascript","module-type":"bitmapeditoroperation"},"$:/core/modules/editor/operations/bitmap/resize.js":{"title":"$:/core/modules/editor/operations/bitmap/resize.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/bitmap/resize.js\ntype: application/javascript\nmodule-type: bitmapeditoroperation\n\nBitmap editor operation to resize the image\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"resize\"] = function(event) {\n\t// Get the new width\n\tvar newWidth = parseInt(event.paramObject.width || this.canvasDomNode.width,10),\n\t\tnewHeight = parseInt(event.paramObject.height || this.canvasDomNode.height,10);\n\t// Update if necessary\n\tif(newWidth &gt; 0 &amp;&amp; newHeight &gt; 0 &amp;&amp; !(newWidth === this.currCanvas.width &amp;&amp; newHeight === this.currCanvas.height)) {\n\t\tthis.changeCanvasSize(newWidth,newHeight);\n\t}\n\t// Update the input controls\n\tthis.refreshToolbar();\n\t// Save the image into the tiddler\n\tthis.saveChanges();\n};\n\n})();\n","type":"application/javascript","module-type":"bitmapeditoroperation"},"$:/core/modules/editor/operations/bitmap/rotate-left.js":{"title":"$:/core/modules/editor/operations/bitmap/rotate-left.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/bitmap/rotate-left.js\ntype: application/javascript\nmodule-type: bitmapeditoroperation\n\nBitmap editor operation to rotate the image left by 90 degrees\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"rotate-left\"] = function(event) {\n\t// Rotate the canvas left by 90 degrees\n\tthis.rotateCanvasLeft();\n\t// Update the input controls\n\tthis.refreshToolbar();\n\t// Save the image into the tiddler\n\tthis.saveChanges();\n};\n\n})();\n","type":"application/javascript","module-type":"bitmapeditoroperation"},"$:/core/modules/editor/operations/text/excise.js":{"title":"$:/core/modules/editor/operations/text/excise.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/excise.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to excise the selection to a new tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"excise\"] = function(event,operation) {\n\tvar editTiddler = this.wiki.getTiddler(this.editTitle),\n\t\teditTiddlerTitle = this.editTitle;\n\tif(editTiddler &amp;&amp; editTiddler.fields[\"draft.of\"]) {\n\t\teditTiddlerTitle = editTiddler.fields[\"draft.of\"];\n\t}\n\tvar excisionTitle = event.paramObject.title || this.wiki.generateNewTitle(\"New Excision\");\n\tthis.wiki.addTiddler(new $tw.Tiddler(\n\t\tthis.wiki.getCreationFields(),\n\t\tthis.wiki.getModificationFields(),\n\t\t{\n\t\t\ttitle: excisionTitle,\n\t\t\ttext: operation.selection,\n\t\t\ttags: event.paramObject.tagnew === \"yes\" ?  [editTiddlerTitle] : []\n\t\t}\n\t));\n\toperation.replacement = excisionTitle;\n\tswitch(event.paramObject.type || \"transclude\") {\n\t\tcase \"transclude\":\n\t\t\toperation.replacement = \"{{\" + operation.replacement+ \"}}\";\n\t\t\tbreak;\n\t\tcase \"link\":\n\t\t\toperation.replacement = \"[[\" + operation.replacement+ \"]]\";\n\t\t\tbreak;\n\t\tcase \"macro\":\n\t\t\toperation.replacement = \"&lt;&lt;\" + (event.paramObject.macro || \"translink\") + \" \\\"\\\"\\\"\" + operation.replacement + \"\\\"\\\"\\\"&gt;&gt;\";\n\t\t\tbreak;\n\t}\n\toperation.cutStart = operation.selStart;\n\toperation.cutEnd = operation.selEnd;\n\toperation.newSelStart = operation.selStart;\n\toperation.newSelEnd = operation.selStart + operation.replacement.length;\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/insert-text.js":{"title":"$:/core/modules/editor/operations/text/insert-text.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/insert-text.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation insert text at the caret position. If there is a selection it is replaced.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"insert-text\"] = function(event,operation) {\n\toperation.replacement = event.paramObject.text;\n\toperation.cutStart = operation.selStart;\n\toperation.cutEnd = operation.selEnd;\n\toperation.newSelStart = operation.selStart + operation.replacement.length;\n\toperation.newSelEnd = operation.newSelStart;\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/make-link.js":{"title":"$:/core/modules/editor/operations/text/make-link.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/make-link.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to make a link\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"make-link\"] = function(event,operation) {\n\tif(operation.selection) {\n\t\toperation.replacement = \"[[\" + operation.selection + \"|\" + event.paramObject.text + \"]]\";\n\t\toperation.cutStart = operation.selStart;\n\t\toperation.cutEnd = operation.selEnd;\n\t} else {\n\t\toperation.replacement = \"[[\" + event.paramObject.text + \"]]\";\n\t\toperation.cutStart = operation.selStart;\n\t\toperation.cutEnd = operation.selEnd;\n\t}\n\toperation.newSelStart = operation.selStart + operation.replacement.length;\n\toperation.newSelEnd = operation.newSelStart;\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/prefix-lines.js":{"title":"$:/core/modules/editor/operations/text/prefix-lines.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/prefix-lines.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to add a prefix to the selected lines\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"prefix-lines\"] = function(event,operation) {\n\tvar targetCount = parseInt(event.paramObject.count + \"\",10);\n\t// Cut just past the preceding line break, or the start of the text\n\toperation.cutStart = $tw.utils.findPrecedingLineBreak(operation.text,operation.selStart);\n\t// Cut to just past the following line break, or to the end of the text\n\toperation.cutEnd = $tw.utils.findFollowingLineBreak(operation.text,operation.selEnd);\n\t// Compose the required prefix\n\tvar prefix = $tw.utils.repeat(event.paramObject.character,targetCount);\n\t// Process each line\n\tvar lines = operation.text.substring(operation.cutStart,operation.cutEnd).split(/\\r?\\n/mg);\n\t$tw.utils.each(lines,function(line,index) {\n\t\t// Remove and count any existing prefix characters\n\t\tvar count = 0;\n\t\twhile(line.charAt(0) === event.paramObject.character) {\n\t\t\tline = line.substring(1);\n\t\t\tcount++;\n\t\t}\n\t\t// Remove any whitespace\n\t\twhile(line.charAt(0) === \" \") {\n\t\t\tline = line.substring(1);\n\t\t}\n\t\t// We're done if we removed the exact required prefix, otherwise add it\n\t\tif(count !== targetCount) {\n\t\t\t// Apply the prefix\n\t\t\tline =  prefix + \" \" + line;\n\t\t}\n\t\t// Save the modified line\n\t\tlines[index] = line;\n\t});\n\t// Stitch the replacement text together and set the selection\n\toperation.replacement = lines.join(\"\\n\");\n\tif(lines.length === 1) {\n\t\toperation.newSelStart = operation.cutStart + operation.replacement.length;\n\t\toperation.newSelEnd = operation.newSelStart;\n\t} else {\n\t\toperation.newSelStart = operation.cutStart;\n\t\toperation.newSelEnd = operation.newSelStart + operation.replacement.length;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/replace-all.js":{"title":"$:/core/modules/editor/operations/text/replace-all.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/replace-all.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to replace the entire text\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"replace-all\"] = function(event,operation) {\n\toperation.cutStart = 0;\n\toperation.cutEnd = operation.text.length;\n\toperation.replacement = event.paramObject.text;\n\toperation.newSelStart = 0;\n\toperation.newSelEnd = operation.replacement.length;\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/replace-selection.js":{"title":"$:/core/modules/editor/operations/text/replace-selection.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/replace-selection.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to replace the selection\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"replace-selection\"] = function(event,operation) {\n\toperation.replacement = event.paramObject.text;\n\toperation.cutStart = operation.selStart;\n\toperation.cutEnd = operation.selEnd;\n\toperation.newSelStart = operation.selStart;\n\toperation.newSelEnd = operation.selStart + operation.replacement.length;\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/save-selection.js":{"title":"$:/core/modules/editor/operations/text/save-selection.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/save-selection.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to save the current selection in a specified tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"save-selection\"] = function(event,operation) {\n\tvar tiddler = event.paramObject.tiddler,\n\t\tfield = event.paramObject.field || \"text\";\n\tif(tiddler &amp;&amp; field) {\n\t\tthis.wiki.setText(tiddler,field,null,operation.text.substring(operation.selStart,operation.selEnd));\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/wrap-lines.js":{"title":"$:/core/modules/editor/operations/text/wrap-lines.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/wrap-lines.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to wrap the selected lines with a prefix and suffix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"wrap-lines\"] = function(event,operation) {\n\t// Cut just past the preceding line break, or the start of the text\n\toperation.cutStart = $tw.utils.findPrecedingLineBreak(operation.text,operation.selStart);\n\t// Cut to just past the following line break, or to the end of the text\n\toperation.cutEnd = $tw.utils.findFollowingLineBreak(operation.text,operation.selEnd);\n\t// Add the prefix and suffix\n\toperation.replacement = event.paramObject.prefix + \"\\n\" +\n\t\t\t\toperation.text.substring(operation.cutStart,operation.cutEnd) + \"\\n\" +\n\t\t\t\tevent.paramObject.suffix + \"\\n\";\n\toperation.newSelStart = operation.cutStart + event.paramObject.prefix.length + 1;\n\toperation.newSelEnd = operation.newSelStart + (operation.cutEnd - operation.cutStart);\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/editor/operations/text/wrap-selection.js":{"title":"$:/core/modules/editor/operations/text/wrap-selection.js","text":"/*\\\ntitle: $:/core/modules/editor/operations/text/wrap-selection.js\ntype: application/javascript\nmodule-type: texteditoroperation\n\nText editor operation to wrap the selection with the specified prefix and suffix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports[\"wrap-selection\"] = function(event,operation) {\n\tif(operation.selStart === operation.selEnd) {\n\t\t// No selection; check if we're within the prefix/suffix\n\t\tif(operation.text.substring(operation.selStart - event.paramObject.prefix.length,operation.selStart + event.paramObject.suffix.length) === event.paramObject.prefix + event.paramObject.suffix) {\n\t\t\t// Remove the prefix and suffix\n\t\t\toperation.cutStart = operation.selStart - event.paramObject.prefix.length;\n\t\t\toperation.cutEnd = operation.selEnd + event.paramObject.suffix.length;\n\t\t\toperation.replacement = \"\";\n\t\t\toperation.newSelStart = operation.cutStart;\n\t\t\toperation.newSelEnd = operation.newSelStart;\n\t\t} else {\n\t\t\t// Wrap the cursor instead\n\t\t\toperation.cutStart = operation.selStart;\n\t\t\toperation.cutEnd = operation.selEnd;\n\t\t\toperation.replacement = event.paramObject.prefix + event.paramObject.suffix;\n\t\t\toperation.newSelStart = operation.selStart + event.paramObject.prefix.length;\n\t\t\toperation.newSelEnd = operation.newSelStart;\n\t\t}\n\t} else if(operation.text.substring(operation.selStart,operation.selStart + event.paramObject.prefix.length) === event.paramObject.prefix &amp;&amp; operation.text.substring(operation.selEnd - event.paramObject.suffix.length,operation.selEnd) === event.paramObject.suffix) {\n\t\t// Prefix and suffix are already present, so remove them\n\t\toperation.cutStart = operation.selStart;\n\t\toperation.cutEnd = operation.selEnd;\n\t\toperation.replacement = operation.selection.substring(event.paramObject.prefix.length,operation.selection.length - event.paramObject.suffix.length);\n\t\toperation.newSelStart = operation.selStart;\n\t\toperation.newSelEnd = operation.selStart + operation.replacement.length;\n\t} else {\n\t\t// Add the prefix and suffix\n\t\toperation.cutStart = operation.selStart;\n\t\toperation.cutEnd = operation.selEnd;\n\t\toperation.replacement = event.paramObject.prefix + operation.selection + event.paramObject.suffix;\n\t\toperation.newSelStart = operation.selStart;\n\t\toperation.newSelEnd = operation.selStart + operation.replacement.length;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"texteditoroperation"},"$:/core/modules/filterrunprefixes/all.js":{"title":"$:/core/modules/filterrunprefixes/all.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/all.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\nUnion of sets without de-duplication.\nEquivalent to = filter run prefix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.all = function(operationSubFunction) {\n\treturn function(results,source,widget) {\n\t\tresults.push.apply(results, operationSubFunction(source,widget));\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/and.js":{"title":"$:/core/modules/filterrunprefixes/and.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/and.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\nIntersection of sets.\nEquivalent to + filter run prefix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.and = function(operationSubFunction,options) {\n\treturn function(results,source,widget) {\n\t\t// This replaces all the elements of the array, but keeps the actual array so that references to it are preserved\n\t\tsource = options.wiki.makeTiddlerIterator(results.toArray());\n\t\tresults.clear();\n\t\tresults.pushTop(operationSubFunction(source,widget));\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/else.js":{"title":"$:/core/modules/filterrunprefixes/else.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/else.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\nEquivalent to ~ filter run prefix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.else = function(operationSubFunction) {\n\treturn function(results,source,widget) {\n\t\tif(results.length === 0) {\n\t\t\t// Main result so far is empty\n\t\t\tresults.pushTop(operationSubFunction(source,widget));\n\t\t}\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/except.js":{"title":"$:/core/modules/filterrunprefixes/except.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/except.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\nDifference of sets.\nEquivalent to - filter run prefix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.except = function(operationSubFunction) {\n\treturn function(results,source,widget) {\n\t\tresults.remove(operationSubFunction(source,widget));\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/filter.js":{"title":"$:/core/modules/filterrunprefixes/filter.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/filter.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.filter = function(operationSubFunction,options) {\n\treturn function(results,source,widget) {\n\t\tif(results.length &gt; 0) {\n\t\t\tvar resultsToRemove = [];\n\t\t\tresults.each(function(title) {\n\t\t\t\tvar filtered = operationSubFunction(options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\t\treturn widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn widget.getVariable(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(filtered.length === 0) {\n\t\t\t\t\tresultsToRemove.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresults.remove(resultsToRemove);\n\t\t}\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/intersection.js":{"title":"$:/core/modules/filterrunprefixes/intersection.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/intersection.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.intersection = function(operationSubFunction) {\n\treturn function(results,source,widget) {\n\t\tif(results.length !== 0) {\n\t\t\tvar secondRunResults = operationSubFunction(source,widget);\n\t\t\tvar firstRunResults = results.toArray();\n\t\t\tresults.clear();\n\t\t\t$tw.utils.each(firstRunResults,function(title) {\n\t\t\t\tif(secondRunResults.indexOf(title) !== -1) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/map.js":{"title":"$:/core/modules/filterrunprefixes/map.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/map.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.map = function(operationSubFunction,options) {\n\treturn function(results,source,widget) {\n\t\tif(results.length &gt; 0) {\n\t\t\tvar inputTitles = results.toArray();\n\t\t\tresults.clear();\n\t\t\t$tw.utils.each(inputTitles,function(title) {\n\t\t\t\tvar filtered = operationSubFunction(options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\t\treturn widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn widget.getVariable(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresults.push(filtered[0] || \"\");\n\t\t\t});\n\t\t}\n\t}\n};\n\n})();","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/or.js":{"title":"$:/core/modules/filterrunprefixes/or.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/or.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\nEquivalent to a filter run with no prefix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.or = function(operationSubFunction) {\n\treturn function(results,source,widget) {\n\t\tresults.pushTop(operationSubFunction(source,widget));\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/reduce.js":{"title":"$:/core/modules/filterrunprefixes/reduce.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/reduce.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.reduce = function(operationSubFunction,options) {\n\treturn function(results,source,widget) {\n\t\tif(results.length &gt; 0) {\n\t\t\tvar accumulator = \"\";\n\t\t\tvar index = 0;\n\t\t\tresults.each(function(title) {\n\t\t\t\tvar list = operationSubFunction(options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\t\treturn widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\t\tcase \"accumulator\":\n\t\t\t\t\t\t\t\treturn \"\" + accumulator;\n\t\t\t\t\t\t\tcase \"index\":\n\t\t\t\t\t\t\t\treturn \"\" + index;\n\t\t\t\t\t\t\tcase \"revIndex\":\n\t\t\t\t\t\t\t\treturn \"\" +  (results.length - 1 - index);\n\t\t\t\t\t\t\tcase \"length\":\n\t\t\t\t\t\t\t\treturn \"\" + results.length;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn widget.getVariable(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(list.length &gt; 0) {\n\t\t\t\t\taccumulator = \"\" + list[0];\n\t\t\t\t}\n\t\t\t\t++index;\n\t\t\t});\n\t\t\tresults.clear();\n\t\t\tresults.push(accumulator);\n\t\t}\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filterrunprefixes/sort.js":{"title":"$:/core/modules/filterrunprefixes/sort.js","text":"/*\\\ntitle: $:/core/modules/filterrunprefixes/sort.js\ntype: application/javascript\nmodule-type: filterrunprefix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter prefix function\n*/\nexports.sort = function(operationSubFunction,options) {\n\treturn function(results,source,widget) {\n\t\tif(results.length &gt; 0) {\n\t\t\tvar suffixes = options.suffixes,\n\t\t\t\tsortType = (suffixes[0] &amp;&amp; suffixes[0][0]) ? suffixes[0][0] : \"string\",\n\t\t\t\tinvert = suffixes[1] ? (suffixes[1].indexOf(\"reverse\") !== -1) : false,\n\t\t\t\tisCaseSensitive = suffixes[1] ? (suffixes[1].indexOf(\"casesensitive\") !== -1) : false,\n\t\t\t\tinputTitles = results.toArray(),\n\t\t\t\tsortKeys = [],\n\t\t\t\tindexes = new Array(inputTitles.length),\n\t\t\t\tcompareFn;\n\t\t\tresults.each(function(title) {\n\t\t\t\tvar key = operationSubFunction(options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\t\treturn widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn widget.getVariable(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsortKeys.push(key[0] || \"\");\n\t\t\t});\n\t\t\tresults.clear();\n\t\t\t// Prepare an array of indexes to sort\n\t\t\tfor(var t=0; t&lt;inputTitles.length; t++) {\n\t\t\t\tindexes[t] = t;\n\t\t\t}\n\t\t\t// Sort the indexes\n\t\t\tcompareFn = $tw.utils.makeCompareFunction(sortType,{defaultType: \"string\", invert:invert, isCaseSensitive:isCaseSensitive});\n\t\t\tindexes = indexes.sort(function(a,b) {\n\t\t\t\t\treturn compareFn(sortKeys[a],sortKeys[b]);\n\t\t\t});\n\t\t\t// Add to results in correct order\n\t\t\t$tw.utils.each(indexes,function(index) {\n\t\t\t\tresults.push(inputTitles[index]);\n\t\t\t});\n\t\t}\n\t}\n};\n\n})();","type":"application/javascript","module-type":"filterrunprefix"},"$:/core/modules/filters/addprefix.js":{"title":"$:/core/modules/filters/addprefix.js","text":"/*\\\ntitle: $:/core/modules/filters/addprefix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for adding a prefix to each title in the list. This is\nespecially useful in contexts where only a filter expression is allowed\nand macro substitution isn't available.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.addprefix = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(operator.operand + title);\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/addsuffix.js":{"title":"$:/core/modules/filters/addsuffix.js","text":"/*\\\ntitle: $:/core/modules/filters/addsuffix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for adding a suffix to each title in the list. This is\nespecially useful in contexts where only a filter expression is allowed\nand macro substitution isn't available.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.addsuffix = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title + operator.operand);\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/after.js":{"title":"$:/core/modules/filters/after.js","text":"/*\\\ntitle: $:/core/modules/filters/after.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the tiddler from the current list that is after the tiddler named in the operand.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.after = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\tvar index = results.indexOf(operator.operand);\n\tif(index === -1 || index &gt; (results.length - 2)) {\n\t\treturn [];\n\t} else {\n\t\treturn [results[index + 1]];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/all/current.js":{"title":"$:/core/modules/filters/all/current.js","text":"/*\\\ntitle: $:/core/modules/filters/all/current.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[current]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.current = function(source,prefix,options) {\n\tvar currTiddlerTitle = options.widget &amp;&amp; options.widget.getVariable(\"currentTiddler\");\n\tif(currTiddlerTitle) {\n\t\treturn [currTiddlerTitle];\n\t} else {\n\t\treturn [];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all/missing.js":{"title":"$:/core/modules/filters/all/missing.js","text":"/*\\\ntitle: $:/core/modules/filters/all/missing.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[missing]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.missing = function(source,prefix,options) {\n\treturn options.wiki.getMissingTitles();\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all/orphans.js":{"title":"$:/core/modules/filters/all/orphans.js","text":"/*\\\ntitle: $:/core/modules/filters/all/orphans.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[orphans]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.orphans = function(source,prefix,options) {\n\treturn options.wiki.getOrphanTitles();\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all/shadows.js":{"title":"$:/core/modules/filters/all/shadows.js","text":"/*\\\ntitle: $:/core/modules/filters/all/shadows.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[shadows]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.shadows = function(source,prefix,options) {\n\treturn options.wiki.allShadowTitles();\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all/tags.js":{"title":"$:/core/modules/filters/all/tags.js","text":"/*\\\ntitle: $:/core/modules/filters/all/tags.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[tags]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tags = function(source,prefix,options) {\n\treturn Object.keys(options.wiki.getTagMap());\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all/tiddlers.js":{"title":"$:/core/modules/filters/all/tiddlers.js","text":"/*\\\ntitle: $:/core/modules/filters/all/tiddlers.js\ntype: application/javascript\nmodule-type: allfilteroperator\n\nFilter function for [all[tiddlers]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tiddlers = function(source,prefix,options) {\n\treturn options.wiki.allTitles();\n};\n\n})();\n","type":"application/javascript","module-type":"allfilteroperator"},"$:/core/modules/filters/all.js":{"title":"$:/core/modules/filters/all.js","text":"/*\\\ntitle: $:/core/modules/filters/all.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for selecting tiddlers\n\n[all[shadows+tiddlers]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar allFilterOperators;\n\nfunction getAllFilterOperators() {\n\tif(!allFilterOperators) {\n\t\tallFilterOperators = {};\n\t\t$tw.modules.applyMethods(\"allfilteroperator\",allFilterOperators);\n\t}\n\treturn allFilterOperators;\n}\n\n/*\nExport our filter function\n*/\nexports.all = function(source,operator,options) {\n\t// Get our suboperators\n\tvar allFilterOperators = getAllFilterOperators();\n\t// Cycle through the suboperators accumulating their results\n\tvar results = new $tw.utils.LinkedList(),\n\t\tsubops = operator.operand.split(\"+\");\n\t// Check for common optimisations\n\tif(subops.length === 1 &amp;&amp; subops[0] === \"\") {\n\t\treturn source;\n\t} else if(subops.length === 1 &amp;&amp; subops[0] === \"tiddlers\") {\n\t\treturn options.wiki.each;\n\t} else if(subops.length === 1 &amp;&amp; subops[0] === \"shadows\") {\n\t\treturn options.wiki.eachShadow;\n\t} else if(subops.length === 2 &amp;&amp; subops[0] === \"tiddlers\" &amp;&amp; subops[1] === \"shadows\") {\n\t\treturn options.wiki.eachTiddlerPlusShadows;\n\t} else if(subops.length === 2 &amp;&amp; subops[0] === \"shadows\" &amp;&amp; subops[1] === \"tiddlers\") {\n\t\treturn options.wiki.eachShadowPlusTiddlers;\n\t}\n\t// Do it the hard way\n\tfor(var t=0; t&lt;subops.length; t++) {\n\t\tvar subop = allFilterOperators[subops[t]];\n\t\tif(subop) {\n\t\t\tresults.pushTop(subop(source,operator.prefix,options));\n\t\t}\n\t}\n\treturn results.toArray();\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/backlinks.js":{"title":"$:/core/modules/filters/backlinks.js","text":"/*\\\ntitle: $:/core/modules/filters/backlinks.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning all the backlinks from a tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.backlinks = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\t$tw.utils.pushTop(results,options.wiki.getTiddlerBacklinks(title));\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/before.js":{"title":"$:/core/modules/filters/before.js","text":"/*\\\ntitle: $:/core/modules/filters/before.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the tiddler from the current list that is before the tiddler named in the operand.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.before = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\tvar index = results.indexOf(operator.operand);\n\tif(index &lt;= 0) {\n\t\treturn [];\n\t} else {\n\t\treturn [results[index - 1]];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/commands.js":{"title":"$:/core/modules/filters/commands.js","text":"/*\\\ntitle: $:/core/modules/filters/commands.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the commands available in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.commands = function(source,operator,options) {\n\tvar results = [];\n\t$tw.utils.each($tw.commands,function(commandInfo,name) {\n\t\tresults.push(name);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/compare.js":{"title":"$:/core/modules/filters/compare.js","text":"/*\\\ntitle: $:/core/modules/filters/compare.js\ntype: application/javascript\nmodule-type: filteroperator\n\nGeneral purpose comparison operator\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.compare = function(source,operator,options) {\n\tvar suffixes = operator.suffixes || [],\n\t\ttype = (suffixes[0] || [])[0],\n\t\tmode = (suffixes[1] || [])[0],\n\t\ttypeFn = $tw.utils.makeCompareFunction(type,{defaultType: \"number\"}),\n\t\tmodeFn = modes[mode] || modes.eq,\n\t\tinvert = operator.prefix === \"!\",\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tif(modeFn(typeFn(title,operator.operand)) !== invert) {\n\t\t\tresults.push(title);\n\t\t}\n\t});\n\treturn results;\n};\n\nvar modes = {\n\t\"eq\": function(value) {return value === 0;},\n\t\"ne\": function(value) {return value !== 0;},\n\t\"gteq\": function(value) {return value &gt;= 0;},\n\t\"gt\": function(value) {return value &gt; 0;},\n\t\"lteq\": function(value) {return value &lt;= 0;},\n\t\"lt\": function(value) {return value &lt; 0;}\n}\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/contains.js":{"title":"$:/core/modules/filters/contains.js","text":"/*\\\ntitle: $:/core/modules/filters/contains.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for finding values in array fields\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.contains = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldname = (operator.suffix || \"list\").toLowerCase();\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler) {\n\t\t\t\tvar list = tiddler.getFieldList(fieldname);\n\t\t\t\tif(list.indexOf(operator.operand) === -1) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler) {\n\t\t\t\tvar list = tiddler.getFieldList(fieldname);\n\t\t\t\tif(list.indexOf(operator.operand) !== -1) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/count.js":{"title":"$:/core/modules/filters/count.js","text":"/*\\\ntitle: $:/core/modules/filters/count.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the number of entries in the current list.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.count = function(source,operator,options) {\n\tvar count = 0;\n\tsource(function(tiddler,title) {\n\t\tcount++;\n\t});\n\treturn [count + \"\"];\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/days.js":{"title":"$:/core/modules/filters/days.js","text":"/*\\\ntitle: $:/core/modules/filters/days.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that selects tiddlers with a specified date field within a specified date interval.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.days = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldName = operator.suffix || \"modified\",\n\t\tdayInterval = (parseInt(operator.operand,10)||0),\n\t\tdayIntervalSign = $tw.utils.sign(dayInterval),\n\t\ttargetTimeStamp = (new Date()).setHours(0,0,0,0) + 1000*60*60*24*dayInterval,\n\t\tisWithinDays = function(dateField) {\n\t\t\tvar sign = $tw.utils.sign(targetTimeStamp - (new Date(dateField)).setHours(0,0,0,0));\n\t\t\treturn sign === 0 || sign === dayIntervalSign;\n\t\t};\n\n\tif(operator.prefix === \"!\") {\n\t\ttargetTimeStamp = targetTimeStamp - 1000*60*60*24*dayIntervalSign;\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler &amp;&amp; tiddler.fields[fieldName]) {\n\t\t\t\tif(!isWithinDays($tw.utils.parseDate(tiddler.fields[fieldName]))) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler &amp;&amp; tiddler.fields[fieldName]) {\n\t\t\t\tif(isWithinDays($tw.utils.parseDate(tiddler.fields[fieldName]))) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/deserializers.js":{"title":"$:/core/modules/filters/deserializers.js","text":"/*\\\ntitle: $:/core/modules/filters/deserializers.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the deserializers in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.deserializers = function(source,operator,options) {\n\tvar results = [];\n\t$tw.utils.each($tw.Wiki.tiddlerDeserializerModules,function(deserializer,type) {\n\t\tresults.push(type);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/duplicateslugs.js":{"title":"$:/core/modules/filters/duplicateslugs.js","text":"/*\\\ntitle: $:/core/modules/filters/duplicateslugs.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter function for [duplicateslugs[]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.duplicateslugs = function(source,operator,options) {\n\tvar slugs = Object.create(null), // Hashmap by slug of title, replaced with \"true\" if the duplicate title has already been output\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tvar slug = options.wiki.slugify(title);\n\t\tif(slug in slugs) {\n\t\t\tif(slugs[slug] !== true) {\n\t\t\t\tresults.push(slugs[slug]);\n\t\t\t\tslugs[slug] = true;\n\t\t\t}\n\t\t\tresults.push(title);\n\t\t} else {\n\t\t\tslugs[slug] = title;\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/each.js":{"title":"$:/core/modules/filters/each.js","text":"/*\\\ntitle: $:/core/modules/filters/each.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that selects one tiddler for each unique value of the specified field.\nWith suffix \"list\", selects all tiddlers that are values in a specified list field.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.each = function(source,operator,options) {\n\tvar results =[] ,\n\tvalue,values = {},\n\tfield = operator.operand || \"title\";\n\tif(operator.suffix === \"value\" &amp;&amp; field === \"title\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!$tw.utils.hop(values,title)) {\n\t\t\t\tvalues[title] = true;\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else if(operator.suffix !== \"list-item\") {\n\t\tif(field === \"title\") {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler &amp;&amp; !$tw.utils.hop(values,title)) {\n\t\t\t\t\tvalues[title] = true;\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler) {\n\t\t\t\t\tvalue = tiddler.getFieldString(field);\n\t\t\t\t\tif(!$tw.utils.hop(values,value)) {\n\t\t\t\t\t\tvalues[value] = true;\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler) {\n\t\t\t\t$tw.utils.each(\n\t\t\t\t\toptions.wiki.getTiddlerList(title,field),\n\t\t\t\t\tfunction(value) {\n\t\t\t\t\t\tif(!$tw.utils.hop(values,value)) {\n\t\t\t\t\t\t\tvalues[value] = true;\n\t\t\t\t\t\t\tresults.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/eachday.js":{"title":"$:/core/modules/filters/eachday.js","text":"/*\\\ntitle: $:/core/modules/filters/eachday.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that selects one tiddler for each unique day covered by the specified date field\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.eachday = function(source,operator,options) {\n\tvar results = [],\n\t\tvalues = [],\n\t\tfieldName = operator.operand || \"modified\";\n\t// Function to convert a date/time to a date integer\n\tvar toDate = function(value) {\n\t\tvalue = (new Date(value)).setHours(0,0,0,0);\n\t\treturn value+0;\n\t};\n\tsource(function(tiddler,title) {\n\t\tif(tiddler &amp;&amp; tiddler.fields[fieldName]) {\n\t\t\tvar value = toDate($tw.utils.parseDate(tiddler.fields[fieldName]));\n\t\t\tif(values.indexOf(value) === -1) {\n\t\t\t\tvalues.push(value);\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/editiondescription.js":{"title":"$:/core/modules/filters/editiondescription.js","text":"/*\\\ntitle: $:/core/modules/filters/editiondescription.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the descriptions of the specified edition names\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.editiondescription = function(source,operator,options) {\n\tvar results = [];\n\tif($tw.node) {\n\t\tvar editionInfo = $tw.utils.getEditionInfo();\n\t\tif(editionInfo) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif($tw.utils.hop(editionInfo,title)) {\n\t\t\t\t\tresults.push(editionInfo[title].description || \"\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/editions.js":{"title":"$:/core/modules/filters/editions.js","text":"/*\\\ntitle: $:/core/modules/filters/editions.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the available editions in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.editions = function(source,operator,options) {\n\tvar results = [];\n\tif($tw.node) {\n\t\tvar editionInfo = $tw.utils.getEditionInfo();\n\t\tif(editionInfo) {\n\t\t\t$tw.utils.each(editionInfo,function(info,name) {\n\t\t\t\tresults.push(name);\n\t\t\t});\n\t\t}\n\t\tresults.sort();\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/else.js":{"title":"$:/core/modules/filters/else.js","text":"/*\\\ntitle: $:/core/modules/filters/else.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for replacing an empty input list with a constant, passing a non-empty input list straight through\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.else = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\tif(results.length === 0) {\n\t\treturn [operator.operand];\n\t} else {\n\t\treturn results;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/decodeuricomponent.js":{"title":"$:/core/modules/filters/decodeuricomponent.js","text":"/*\\\ntitle: $:/core/modules/filters/decodeuricomponent.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for applying decodeURIComponent() to each item.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter functions\n*/\n\nexports.decodeuricomponent = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar value = title;\n\t\ttry {\n\t\t\tvalue = decodeURIComponent(title);\n\t\t} catch(e) {\n\t\t}\n\t\tresults.push(value);\n\t});\n\treturn results;\n};\n\nexports.encodeuricomponent = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(encodeURIComponent(title));\n\t});\n\treturn results;\n};\n\nexports.decodeuri = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar value = title;\n\t\ttry {\n\t\t\tvalue = decodeURI(title);\n\t\t} catch(e) {\n\t\t}\n\t\tresults.push(value);\n\t});\n\treturn results;\n};\n\nexports.encodeuri = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(encodeURI(title));\n\t});\n\treturn results;\n};\n\nexports.decodehtml = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push($tw.utils.htmlDecode(title));\n\t});\n\treturn results;\n};\n\nexports.encodehtml = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push($tw.utils.htmlEncode(title));\n\t});\n\treturn results;\n};\n\nexports.stringify = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push($tw.utils.stringify(title,(operator.suffix === \"rawunicode\")));\n\t});\n\treturn results;\n};\n\nexports.jsonstringify = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push($tw.utils.jsonStringify(title,(operator.suffix === \"rawunicode\")));\n\t});\n\treturn results;\n};\n\nexports.escaperegexp = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push($tw.utils.escapeRegExp(title));\n\t});\n\treturn results;\n};\n\nexports.escapecss = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\t// escape any character with a special meaning in CSS using CSS.escape()\n\t\tresults.push($tw.utils.escapeCSS(title));\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/enlist.js":{"title":"$:/core/modules/filters/enlist.js","text":"/*\\\ntitle: $:/core/modules/filters/enlist.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning its operand parsed as a list\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.enlist = function(source,operator,options) {\n\tvar allowDuplicates = false;\n\tswitch(operator.suffix) {\n\t\tcase \"raw\":\n\t\t\tallowDuplicates = true;\n\t\t\tbreak;\n\t\tcase \"dedupe\":\n\t\t\tallowDuplicates = false;\n\t\t\tbreak;\n\t}\n\tvar list = $tw.utils.parseStringArray(operator.operand,allowDuplicates);\n\tif(operator.prefix === \"!\") {\n\t\tvar results = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tif(list.indexOf(title) === -1) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t} else {\n\t\treturn list;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/field.js":{"title":"$:/core/modules/filters/field.js","text":"/*\\\ntitle: $:/core/modules/filters/field.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for comparing fields for equality\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.field = function(source,operator,options) {\n\tvar results = [],indexedResults,\n\t\tfieldname = (operator.suffix || operator.operator || \"title\").toLowerCase();\n\tif(operator.prefix === \"!\") {\n\t\tif(operator.regexp) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler) {\n\t\t\t\t\tvar text = tiddler.getFieldString(fieldname);\n\t\t\t\t\tif(text !== null &amp;&amp; !operator.regexp.exec(text)) {\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler) {\n\t\t\t\t\tvar text = tiddler.getFieldString(fieldname);\n\t\t\t\t\tif(text !== null &amp;&amp; text !== operator.operand) {\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif(operator.regexp) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler) {\n\t\t\t\t\tvar text = tiddler.getFieldString(fieldname);\n\t\t\t\t\tif(text !== null &amp;&amp; !!operator.regexp.exec(text)) {\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif(source.byField &amp;&amp; operator.operand) {\n\t\t\t\tindexedResults = source.byField(fieldname,operator.operand);\n\t\t\t\tif(indexedResults) {\n\t\t\t\t\treturn indexedResults\n\t\t\t\t}\n\t\t\t}\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler) {\n\t\t\t\t\tvar text = tiddler.getFieldString(fieldname);\n\t\t\t\t\tif(text !== null &amp;&amp; text === operator.operand) {\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/fields.js":{"title":"$:/core/modules/filters/fields.js","text":"/*\\\ntitle: $:/core/modules/filters/fields.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the fields on the selected tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.fields = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldName,\n\t\tsuffixes = (operator.suffixes || [])[0] || [],\n\t\toperand = $tw.utils.parseStringArray(operator.operand);\n\n\tsource(function(tiddler,title) {\n\t\tif(tiddler) {\n\t\t\tif(suffixes.indexOf(\"include\") !== -1) {\n\t\t\t\tfor(fieldName in tiddler.fields) {\n\t\t\t\t\t(operand.indexOf(fieldName) !== -1) ? $tw.utils.pushTop(results,fieldName) : \"\";\n\t\t\t\t}\n\t\t\t} else if (suffixes.indexOf(\"exclude\") !== -1) {\n\t\t\t\tfor(fieldName in tiddler.fields) {\n\t\t\t\t\t(operand.indexOf(fieldName) !== -1) ? \"\" : $tw.utils.pushTop(results,fieldName);\n\t\t\t\t}\n\t\t\t} // else if\n\t\t\telse {\n\t\t\t\tfor(fieldName in tiddler.fields) {\n\t\t\t\t\t$tw.utils.pushTop(results,fieldName);\n\t\t\t\t}\n\t\t\t} // else\n\t\t} // if (tiddler)\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/filter.js":{"title":"$:/core/modules/filters/filter.js","text":"/*\\\ntitle: $:/core/modules/filters/filter.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning those input titles that pass a subfilter\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.filter = function(source,operator,options) {\n\tvar filterFn = options.wiki.compileFilter(operator.operand),\n\t\tresults = [],\n\t\ttarget = operator.prefix !== \"!\";\n\tsource(function(tiddler,title) {\n\t\tvar list = filterFn.call(options.wiki,options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\treturn options.widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn options.widget.getVariable(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\tif((list.length &gt; 0) === target) {\n\t\t\tresults.push(title);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/format/date.js":{"title":"$:/core/modules/filters/format/date.js","text":"/*\\\ntitle: $:/core/modules/filters/format/date.js\ntype: application/javascript\nmodule-type: formatfilteroperator\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.date = function(source,operand,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar value = $tw.utils.parseDate(title);\n\t\tif(value &amp;&amp; $tw.utils.isDate(value) &amp;&amp; value.toString() !== \"Invalid Date\") {\n\t\t\tresults.push($tw.utils.formatDateString(value,operand || \"YYYY MM DD 0hh:0mm\"));\n\t\t}\n\t});\n\treturn results;\n};\n\n})();","type":"application/javascript","module-type":"formatfilteroperator"},"$:/core/modules/filters/format/relativedate.js":{"title":"$:/core/modules/filters/format/relativedate.js","text":"/*\\\ntitle: $:/core/modules/filters/format/relativedate.js\ntype: application/javascript\nmodule-type: formatfilteroperator\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.relativedate = function(source,operand,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar value = $tw.utils.parseDate(title);\n\t\tif(value &amp;&amp; $tw.utils.isDate(value) &amp;&amp; value.toString() !== \"Invalid Date\") {\n\t\t\tresults.push($tw.utils.getRelativeDate((new Date()) - (new Date(value))).description);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();","type":"application/javascript","module-type":"formatfilteroperator"},"$:/core/modules/filters/format/titlelist.js":{"title":"$:/core/modules/filters/format/titlelist.js","text":"/*\\\ntitle: $:/core/modules/filters/format/titlelist.js\ntype: application/javascript\nmodule-type: formatfilteroperator\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.titlelist = function(source,operand,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tif(title &amp;&amp; title.length) {\n\t\t\tresults.push($tw.utils.stringifyList([title]));\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"formatfilteroperator"},"$:/core/modules/filters/format.js":{"title":"$:/core/modules/filters/format.js","text":"/*\\\ntitle: $:/core/modules/filters/format.js\ntype: application/javascript\nmodule-type: filteroperator\nFilter operator for formatting strings\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar formatFilterOperators;\n\nfunction getFormatFilterOperators() {\n\tif(!formatFilterOperators) {\n\t\tformatFilterOperators = {};\n\t\t$tw.modules.applyMethods(\"formatfilteroperator\",formatFilterOperators);\n\t}\n\treturn formatFilterOperators;\n}\n\n/*\nExport our filter function\n*/\nexports.format = function(source,operator,options) {\n\t// Dispatch to the correct formatfilteroperator\n\tvar formatFilterOperators = getFormatFilterOperators();\n\tif(operator.suffix) {\n\t\tvar formatFilterOperator = formatFilterOperators[operator.suffix];\n\t\tif(formatFilterOperator) {\n\t\t\treturn formatFilterOperator(source,operator.operand,options);\n\t\t} else {\n\t\t\treturn [$tw.language.getString(\"Error/FormatFilterOperator\")];\n\t\t}\n\t} else {\n\t\t// Return all unchanged if the suffix is missing\n\t\tvar results = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.push(title);\n\t\t});\n\t\treturn results;\n\t}\n};\n\n})();","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/get.js":{"title":"$:/core/modules/filters/get.js","text":"/*\\\ntitle: $:/core/modules/filters/get.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for replacing tiddler titles by the value of the field specified in the operand.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.get = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tif(tiddler) {\n\t\t\tvar value = tiddler.getFieldString(operator.operand);\n\t\t\tif(value) {\n\t\t\t\tresults.push(value);\n\t\t\t}\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/getindex.js":{"title":"$:/core/modules/filters/getindex.js","text":"/*\\\ntitle: $:/core/modules/filters/getindex.js\ntype: application/javascript\nmodule-type: filteroperator\n\nreturns the value at a given index of datatiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.getindex = function(source,operator,options) {\n\tvar data,title,results = [];\n\tif(operator.operand){\n\t\tsource(function(tiddler,title) {\n\t\t\ttitle = tiddler ? tiddler.fields.title : title;\n\t\t\tdata = options.wiki.extractTiddlerDataItem(tiddler,operator.operand);\n\t\t\tif(data) {\n\t\t\t\tresults.push(data);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/getvariable.js":{"title":"$:/core/modules/filters/getvariable.js","text":"/*\\\ntitle: $:/core/modules/filters/getvariable.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for replacing input values by the value of the variable with the same name, or blank if the variable is missing\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.getvariable = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(options.widget.getVariable(title) || \"\");\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/has.js":{"title":"$:/core/modules/filters/has.js","text":"/*\\\ntitle: $:/core/modules/filters/has.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking if a tiddler has the specified field or index\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.has = function(source,operator,options) {\n\tvar results = [],\n\t\tinvert = operator.prefix === \"!\";\n\n\tif(operator.suffix === \"field\") {\n\t\tif(invert) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(!tiddler || (tiddler &amp;&amp; (!$tw.utils.hop(tiddler.fields,operator.operand)))) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,operator.operand)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\telse if(operator.suffix === \"index\") {\n\t\tif(invert) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(!tiddler || (tiddler &amp;&amp; (!$tw.utils.hop(options.wiki.getTiddlerDataCached(tiddler,Object.create(null)),operator.operand)))) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler &amp;&amp; $tw.utils.hop(options.wiki.getTiddlerDataCached(tiddler,Object.create(null)),operator.operand)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\telse {\n\t\tif(invert) {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(!tiddler || !$tw.utils.hop(tiddler.fields,operator.operand) || (tiddler.fields[operator.operand].length === 0)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,operator.operand) &amp;&amp; (tiddler.fields[operator.operand].length !== 0)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/haschanged.js":{"title":"$:/core/modules/filters/haschanged.js","text":"/*\\\ntitle: $:/core/modules/filters/haschanged.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returns tiddlers from the list that have a non-zero changecount.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.haschanged = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.getChangeCount(title) === 0) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.getChangeCount(title) &gt; 0) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/indexes.js":{"title":"$:/core/modules/filters/indexes.js","text":"/*\\\ntitle: $:/core/modules/filters/indexes.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the indexes of a data tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.indexes = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar data = options.wiki.getTiddlerDataCached(title);\n\t\tif(data) {\n\t\t\t$tw.utils.pushTop(results,Object.keys(data));\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/insertbefore.js":{"title":"$:/core/modules/filters/insertbefore.js","text":"/*\\\ntitle: $:/core/modules/filters/insertbefore.js\ntype: application/javascript\nmodule-type: filteroperator\n\nInsert an item before another item in a list\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nOrder a list\n*/\nexports.insertbefore = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\tvar target = options.widget &amp;&amp; options.widget.getVariable(operator.suffix || \"currentTiddler\");\n\tif(target !== operator.operand) {\n\t\t// Remove the entry from the list if it is present\n\t\tvar pos = results.indexOf(operator.operand);\n\t\tif(pos !== -1) {\n\t\t\tresults.splice(pos,1);\n\t\t}\n\t\t// Insert the entry before the target marker\n\t\tpos = results.indexOf(target);\n\t\tif(pos !== -1) {\n\t\t\tresults.splice(pos,0,operator.operand);\n\t\t} else {\n\t\t\tresults.push(operator.operand);\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/is/binary.js":{"title":"$:/core/modules/filters/is/binary.js","text":"/*\\\ntitle: $:/core/modules/filters/is/binary.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[binary]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.binary = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.isBinaryTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.isBinaryTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/blank.js":{"title":"$:/core/modules/filters/is/blank.js","text":"/*\\\ntitle: $:/core/modules/filters/is/blank.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[blank]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.blank = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!title) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/current.js":{"title":"$:/core/modules/filters/is/current.js","text":"/*\\\ntitle: $:/core/modules/filters/is/current.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[current]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.current = function(source,prefix,options) {\n\tvar results = [],\n\t\tcurrTiddlerTitle = options.widget &amp;&amp; options.widget.getVariable(\"currentTiddler\");\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title !== currTiddlerTitle) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title === currTiddlerTitle) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/draft.js":{"title":"$:/core/modules/filters/is/draft.js","text":"/*\\\ntitle: $:/core/modules/filters/is/draft.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[draft]] analagous to [has[draft.of]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.draft = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!tiddler || !$tw.utils.hop(tiddler.fields,\"draft.of\")) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,\"draft.of\") &amp;&amp; (tiddler.fields[\"draft.of\"].length !== 0)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/image.js":{"title":"$:/core/modules/filters/is/image.js","text":"/*\\\ntitle: $:/core/modules/filters/is/image.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[image]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.image = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.isImageTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.isImageTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/missing.js":{"title":"$:/core/modules/filters/is/missing.js","text":"/*\\\ntitle: $:/core/modules/filters/is/missing.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[missing]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.missing = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.tiddlerExists(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.tiddlerExists(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/orphan.js":{"title":"$:/core/modules/filters/is/orphan.js","text":"/*\\\ntitle: $:/core/modules/filters/is/orphan.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[orphan]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.orphan = function(source,prefix,options) {\n\tvar results = [],\n\t\torphanTitles = options.wiki.getOrphanTitles();\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(orphanTitles.indexOf(title) === -1) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(orphanTitles.indexOf(title) !== -1) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/shadow.js":{"title":"$:/core/modules/filters/is/shadow.js","text":"/*\\\ntitle: $:/core/modules/filters/is/shadow.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[shadow]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.shadow = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.isShadowTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.isShadowTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/system.js":{"title":"$:/core/modules/filters/is/system.js","text":"/*\\\ntitle: $:/core/modules/filters/is/system.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[system]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.system = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.isSystemTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.isSystemTiddler(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/tag.js":{"title":"$:/core/modules/filters/is/tag.js","text":"/*\\\ntitle: $:/core/modules/filters/is/tag.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[tag]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tag = function(source,prefix,options) {\n\tvar results = [],\n\t\ttagMap = options.wiki.getTagMap();\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!$tw.utils.hop(tagMap,title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif($tw.utils.hop(tagMap,title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/tiddler.js":{"title":"$:/core/modules/filters/is/tiddler.js","text":"/*\\\ntitle: $:/core/modules/filters/is/tiddler.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[tiddler]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tiddler = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!options.wiki.tiddlerExists(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(options.wiki.tiddlerExists(title)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is/variable.js":{"title":"$:/core/modules/filters/is/variable.js","text":"/*\\\ntitle: $:/core/modules/filters/is/variable.js\ntype: application/javascript\nmodule-type: isfilteroperator\n\nFilter function for [is[variable]]\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.variable = function(source,prefix,options) {\n\tvar results = [];\n\tif(prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!(title in options.widget.variables)) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title in options.widget.variables) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"isfilteroperator"},"$:/core/modules/filters/is.js":{"title":"$:/core/modules/filters/is.js","text":"/*\\\ntitle: $:/core/modules/filters/is.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking tiddler properties\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar isFilterOperators;\n\nfunction getIsFilterOperators() {\n\tif(!isFilterOperators) {\n\t\tisFilterOperators = {};\n\t\t$tw.modules.applyMethods(\"isfilteroperator\",isFilterOperators);\n\t}\n\treturn isFilterOperators;\n}\n\n/*\nExport our filter function\n*/\nexports.is = function(source,operator,options) {\n\t// Dispatch to the correct isfilteroperator\n\tvar isFilterOperators = getIsFilterOperators();\n\tif(operator.operand) {\n\t\tvar isFilterOperator = isFilterOperators[operator.operand];\n\t\tif(isFilterOperator) {\n\t\t\treturn isFilterOperator(source,operator.prefix,options);\n\t\t} else {\n\t\t\treturn [$tw.language.getString(\"Error/IsFilterOperator\")];\n\t\t}\n\t} else {\n\t\t// Return all tiddlers if the operand is missing\n\t\tvar results = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.push(title);\n\t\t});\n\t\treturn results;\n\t}\n};\n\n})();","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/limit.js":{"title":"$:/core/modules/filters/limit.js","text":"/*\\\ntitle: $:/core/modules/filters/limit.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for chopping the results to a specified maximum number of entries\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.limit = function(source,operator,options) {\n\tvar results = [];\n\t// Convert to an array\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\t// Slice the array if necessary\n\tvar limit = Math.min(results.length,parseInt(operator.operand,10));\n\tif(operator.prefix === \"!\") {\n\t\tresults = results.slice(-limit);\n\t} else {\n\t\tresults = results.slice(0,limit);\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/links.js":{"title":"$:/core/modules/filters/links.js","text":"/*\\\ntitle: $:/core/modules/filters/links.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning all the links from a tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.links = function(source,operator,options) {\n\tvar results = new $tw.utils.LinkedList();\n\tsource(function(tiddler,title) {\n\t\tresults.pushTop(options.wiki.getTiddlerLinks(title));\n\t});\n\treturn results.toArray();\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/list.js":{"title":"$:/core/modules/filters/list.js","text":"/*\\\ntitle: $:/core/modules/filters/list.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the tiddlers whose title is listed in the operand tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.list = function(source,operator,options) {\n\tvar results = [],\n\t\ttr = $tw.utils.parseTextReference(operator.operand),\n\t\tcurrTiddlerTitle = options.widget &amp;&amp; options.widget.getVariable(\"currentTiddler\"),\n\t\tlist = options.wiki.getTiddlerList(tr.title || currTiddlerTitle,tr.field,tr.index);\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(list.indexOf(title) === -1) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tresults = list;\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/listed.js":{"title":"$:/core/modules/filters/listed.js","text":"/*\\\ntitle: $:/core/modules/filters/listed.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning all tiddlers that have the selected tiddlers in a list\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.listed = function(source,operator,options) {\n\tvar field = operator.operand || \"list\",\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\t$tw.utils.pushTop(results,options.wiki.findListingsOfTiddler(title,field));\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/listops.js":{"title":"$:/core/modules/filters/listops.js","text":"/*\\\ntitle: $:/core/modules/filters/listops.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operators for manipulating the current selection list\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nOrder a list\n*/\nexports.order = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.operand.toLowerCase() === \"reverse\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.unshift(title);\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.push(title);\n\t\t});\n\t}\n\treturn results;\n};\n\n/*\nReverse list\n*/\nexports.reverse = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.unshift(title);\n\t});\n\treturn results;\n};\n\n/*\nFirst entry/entries in list\n*/\nexports.first = function(source,operator,options) {\n\tvar count = $tw.utils.getInt(operator.operand,1),\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results.slice(0,count);\n};\n\n/*\nLast entry/entries in list\n*/\nexports.last = function(source,operator,options) {\n\tvar count = $tw.utils.getInt(operator.operand,1),\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results.slice(-count);\n};\n\n/*\nAll but the first entry/entries of the list\n*/\nexports.rest = function(source,operator,options) {\n\tvar count = $tw.utils.getInt(operator.operand,1),\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results.slice(count);\n};\nexports.butfirst = exports.rest;\nexports.bf = exports.rest;\n\n/*\nAll but the last entry/entries of the list\n*/\nexports.butlast = function(source,operator,options) {\n\tvar count = $tw.utils.getInt(operator.operand,1),\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results.slice(0,-count);\n};\nexports.bl = exports.butlast;\n\n/*\nThe nth member of the list\n*/\nexports.nth = function(source,operator,options) {\n\tvar count = $tw.utils.getInt(operator.operand,1),\n\t\tresults = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results.slice(count - 1,count);\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/lookup.js":{"title":"$:/core/modules/filters/lookup.js","text":"/*\\\ntitle: $:/core/modules/filters/lookup.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that looks up values via a title prefix\n\n[lookup:&lt;field&gt;[&lt;prefix&gt;]]\n\nPrepends the prefix to the selected items and returns the specified field value\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.lookup = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(options.wiki.getTiddlerText(operator.operand + title) || operator.suffix || '');\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/match.js":{"title":"$:/core/modules/filters/match.js","text":"/*\\\ntitle: $:/core/modules/filters/match.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking if a title matches a string\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.match = function(source,operator,options) {\n\tvar results = [],\n\t\tsuffixes = (operator.suffixes || [])[0] || [];\n\tif(suffixes.indexOf(\"caseinsensitive\") !== -1) {\n\t\tif(operator.prefix === \"!\") {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(title.toLowerCase() !== (operator.operand || \"\").toLowerCase()) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(title.toLowerCase() === (operator.operand || \"\").toLowerCase()) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif(operator.prefix === \"!\") {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(title !== operator.operand) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(title === operator.operand) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/math.js":{"title":"$:/core/modules/filters/math.js","text":"/*\\\ntitle: $:/core/modules/filters/math.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operators for math. Unary/binary operators work on each item in turn, and return a new item list.\n\nSum/product/maxall/minall operate on the entire list, returning a single item.\n\nNote that strings are converted to numbers automatically. Trailing non-digits are ignored.\n\n* \"\" converts to 0\n* \"12kk\" converts to 12\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.negate = makeNumericBinaryOperator(\n\tfunction(a) {return -a}\n);\n\nexports.abs = makeNumericBinaryOperator(\n\tfunction(a) {return Math.abs(a)}\n);\n\nexports.ceil = makeNumericBinaryOperator(\n\tfunction(a) {return Math.ceil(a)}\n);\n\nexports.floor = makeNumericBinaryOperator(\n\tfunction(a) {return Math.floor(a)}\n);\n\nexports.round = makeNumericBinaryOperator(\n\tfunction(a) {return Math.round(a)}\n);\n\nexports.trunc = makeNumericBinaryOperator(\n\tfunction(a) {return Math.trunc(a)}\n);\n\nexports.untrunc = makeNumericBinaryOperator(\n\tfunction(a) {return Math.ceil(Math.abs(a)) * Math.sign(a)}\n);\n\nexports.sign = makeNumericBinaryOperator(\n\tfunction(a) {return Math.sign(a)}\n);\n\nexports.add = makeNumericBinaryOperator(\n\tfunction(a,b) {return a + b;}\n);\n\nexports.subtract = makeNumericBinaryOperator(\n\tfunction(a,b) {return a - b;}\n);\n\nexports.multiply = makeNumericBinaryOperator(\n\tfunction(a,b) {return a * b;}\n);\n\nexports.divide = makeNumericBinaryOperator(\n\tfunction(a,b) {return a / b;}\n);\n\nexports.remainder = makeNumericBinaryOperator(\n\tfunction(a,b) {return a % b;}\n);\n\nexports.max = makeNumericBinaryOperator(\n\tfunction(a,b) {return Math.max(a,b);}\n);\n\nexports.min = makeNumericBinaryOperator(\n\tfunction(a,b) {return Math.min(a,b);}\n);\n\nexports.fixed = makeNumericBinaryOperator(\n\tfunction(a,b) {return Number.prototype.toFixed.call(a,Math.min(Math.max(b,0),100));}\n);\n\nexports.precision = makeNumericBinaryOperator(\n\tfunction(a,b) {return Number.prototype.toPrecision.call(a,Math.min(Math.max(b,1),100));}\n);\n\nexports.exponential = makeNumericBinaryOperator(\n\tfunction(a,b) {return Number.prototype.toExponential.call(a,Math.min(Math.max(b,0),100));}\n);\n\nexports.power = makeNumericBinaryOperator(\n\tfunction(a,b) {return Math.pow(a,b);}\n);\n\nexports.log = makeNumericBinaryOperator(\n\tfunction(a,b) {\n\t\tif(b) {\n\t\t\treturn Math.log(a)/Math.log(b);\n\t\t} else {\n\t\t\treturn Math.log(a);\n\t\t}\n\t}\n);\n\nexports.sum = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return accumulator + value},\n\t0 // Initial value\n);\n\nexports.product = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return accumulator * value},\n\t1 // Initial value\n);\n\nexports.maxall = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return Math.max(accumulator,value)},\n\t-Infinity // Initial value\n);\n\nexports.minall = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return Math.min(accumulator,value)},\n\tInfinity // Initial value\n);\n\nexports.median = makeNumericArrayOperator(\n\tfunction(values) {\n\t\tvar len = values.length, median;\n\t\tvalues.sort();\n\t\tif(len % 2) { \n\t\t\t// Odd, return the middle number\n\t\t\tmedian = values[(len - 1) / 2];\n\t\t} else {\n\t\t\t// Even, return average of two middle numbers\n\t\t\tmedian = (values[len / 2 - 1] + values[len / 2]) / 2;\n\t\t}\n\t\treturn [median];\n\t}\n);\n\nexports.average = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return accumulator + value},\n\t0, // Initial value\n\tfunction(finalValue,numberOfValues) {\n\t\treturn finalValue/numberOfValues;\n\t}\n);\n\nexports.variance = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return accumulator + value},\n\t0,\n\tfunction(finalValue,numberOfValues,originalValues) {\n\t\treturn getVarianceFromArray(originalValues,finalValue/numberOfValues);\n\t}\n);\n\nexports[\"standard-deviation\"] = makeNumericReducingOperator(\n\tfunction(accumulator,value) {return accumulator + value},\n\t0,\n\tfunction(finalValue,numberOfValues,originalValues) {\n\t\tvar variance = getVarianceFromArray(originalValues,finalValue/numberOfValues);\n\t\treturn Math.sqrt(variance);\n\t}\n);\n\n//Calculate the variance of a population of numbers in an array given its mean\nfunction getVarianceFromArray(values,mean) {\n\tvar deviationTotal = values.reduce(function(accumulator,value) {\n\t\treturn accumulator + Math.pow(value - mean, 2);\n\t},0);\n\treturn deviationTotal/values.length;\n};\n\nfunction makeNumericBinaryOperator(fnCalc) {\n\treturn function(source,operator,options) {\n\t\tvar result = [],\n\t\t\tnumOperand = $tw.utils.parseNumber(operator.operand);\n\t\tsource(function(tiddler,title) {\n\t\t\tresult.push($tw.utils.stringifyNumber(fnCalc($tw.utils.parseNumber(title),numOperand)));\n\t\t});\n\t\treturn result;\n\t};\n};\n\nfunction makeNumericReducingOperator(fnCalc,initialValue,fnFinal) {\n\tinitialValue = initialValue || 0;\n\treturn function(source,operator,options) {\n\t\tvar result = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tresult.push($tw.utils.parseNumber(title));\n\t\t});\n\t\tvar value = result.reduce(function(accumulator,currentValue) {\n\t\t\t\treturn fnCalc(accumulator,currentValue);\n\t\t\t},initialValue);\n\t\tif(fnFinal) {\n\t\t\tvalue = fnFinal(value,result.length,result);\n\t\t}\n\t\treturn [$tw.utils.stringifyNumber(value)];\n\t};\n};\n\nfunction makeNumericArrayOperator(fnCalc) {\n\treturn function(source,operator,options) {\n\t\tvar results = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.push($tw.utils.parseNumber(title));\n\t\t});\n\t\tresults = fnCalc(results);\n\t\t$tw.utils.each(results,function(value,index) {\n\t\t\tresults[index] = $tw.utils.stringifyNumber(value);\n\t\t});\n\t\treturn results;\n\t};\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/minlength.js":{"title":"$:/core/modules/filters/minlength.js","text":"/*\\\ntitle: $:/core/modules/filters/minlength.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for filtering out titles that don't meet the minimum length in the operand\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.minlength = function(source,operator,options) {\n\tvar results = [],\n\t\tminLength = parseInt(operator.operand || \"\",10) || 0;\n\tsource(function(tiddler,title) {\n\t\tif(title.length &gt;= minLength) {\n\t\t\tresults.push(title);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/modules.js":{"title":"$:/core/modules/filters/modules.js","text":"/*\\\ntitle: $:/core/modules/filters/modules.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the titles of the modules of a given type in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.modules = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\t$tw.utils.each($tw.modules.types[title],function(moduleInfo,moduleName) {\n\t\t\tresults.push(moduleName);\n\t\t});\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/moduletypes.js":{"title":"$:/core/modules/filters/moduletypes.js","text":"/*\\\ntitle: $:/core/modules/filters/moduletypes.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the module types in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.moduletypes = function(source,operator,options) {\n\tvar results = [];\n\t$tw.utils.each($tw.modules.types,function(moduleInfo,type) {\n\t\tresults.push(type);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/next.js":{"title":"$:/core/modules/filters/next.js","text":"/*\\\ntitle: $:/core/modules/filters/next.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the tiddler whose title occurs next in the list supplied in the operand tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.next = function(source,operator,options) {\n\tvar results = [],\n\t\tlist = options.wiki.getTiddlerList(operator.operand);\n\tsource(function(tiddler,title) {\n\t\tvar match = list.indexOf(title);\n\t\t// increment match and then test if result is in range\n\t\tmatch++;\n\t\tif(match &gt; 0 &amp;&amp; match &lt; list.length) {\n\t\t\tresults.push(list[match]);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/plugintiddlers.js":{"title":"$:/core/modules/filters/plugintiddlers.js","text":"/*\\\ntitle: $:/core/modules/filters/plugintiddlers.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the titles of the shadow tiddlers within a plugin\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.plugintiddlers = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar pluginInfo = options.wiki.getPluginInfo(title) || options.wiki.getTiddlerDataCached(title,{tiddlers:[]});\n\t\tif(pluginInfo &amp;&amp; pluginInfo.tiddlers) {\n\t\t\t$tw.utils.each(pluginInfo.tiddlers,function(fields,title) {\n\t\t\t\tresults.push(title);\n\t\t\t});\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/prefix.js":{"title":"$:/core/modules/filters/prefix.js","text":"/*\\\ntitle: $:/core/modules/filters/prefix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking if a title starts with a prefix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.prefix = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title.substr(0,operator.operand.length) !== operator.operand) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title.substr(0,operator.operand.length) === operator.operand) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/previous.js":{"title":"$:/core/modules/filters/previous.js","text":"/*\\\ntitle: $:/core/modules/filters/previous.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning the tiddler whose title occurs immediately prior in the list supplied in the operand tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.previous = function(source,operator,options) {\n\tvar results = [],\n\t\tlist = options.wiki.getTiddlerList(operator.operand);\n\tsource(function(tiddler,title) {\n\t\tvar match = list.indexOf(title);\n\t\t// increment match and then test if result is in range\n\t\tmatch--;\n\t\tif(match &gt;= 0) {\n\t\t\tresults.push(list[match]);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/range.js":{"title":"$:/core/modules/filters/range.js","text":"/*\\\ntitle: $:/core/modules/filters/range.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for generating a numeric range.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.range = function(source,operator,options) {\n\tvar results = [];\n\t// Split the operand into numbers delimited by these symbols\n\tvar parts = operator.operand.split(/[,:;]/g),\n\t\tbeg, end, inc, i, fixed = 0;\n\tfor (i=0; i&lt;parts.length; i++) {\n\t\t// Validate real number\n\t\tif(!/^\\s*[+-]?((\\d+(\\.\\d*)?)|(\\.\\d+))\\s*$/.test(parts[i])) {\n\t\t\treturn [\"range: bad number \\\"\" + parts[i] + \"\\\"\"];\n\t\t}\n\t\t// Count digits; the most precise number determines decimal places in output.\n\t\tvar frac = /\\.\\d+/.exec(parts[i]);\n\t\tif(frac) {\n\t\t\tfixed = Math.max(fixed,frac[0].length-1);\n\t\t}\n\t\tparts[i] = parseFloat(parts[i]);\n\t}\n\tswitch(parts.length) {\n\t\tcase 1:\n\t\t\tend = parts[0];\n\t\t\tif (end &gt;= 1) {\n\t\t\t\tbeg = 1;\n\t\t\t}\n\t\t\telse if (end &lt;= -1) {\n\t\t\t\tbeg = -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tinc = 1;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tbeg = parts[0];\n\t\t\tend = parts[1];\n\t\t\tinc = 1;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tbeg = parts[0];\n\t\t\tend = parts[1];\n\t\t\tinc = Math.abs(parts[2]);\n\t\t\tbreak;\n\t}\n\tif(inc === 0) {\n\t\treturn [\"range: increment 0 causes infinite loop\"];\n\t}\n\t// May need to count backwards\n\tvar direction = ((end &lt; beg) ? -1 : 1);\n\tinc *= direction;\n\t// Estimate number of resulting elements\n\tif((end - beg) / inc &gt; 10000) {\n\t\treturn [\"range: too many steps (over 10K)\"];\n\t}\n\t// Avoid rounding error on last step\n\tend += direction * 0.5 * Math.pow(0.1,fixed);\n\tvar safety = 10010;\n\t// Enumerate the range\n\tif (end&lt;beg) {\n\t\tfor(i=beg; i&gt;end; i+=inc) {\n\t\t\tresults.push(i.toFixed(fixed));\n\t\t\tif(--safety&lt;0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor(i=beg; i&lt;end; i+=inc) {\n\t\t\tresults.push(i.toFixed(fixed));\n\t\t\tif(--safety&lt;0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif(safety&lt;0) {\n\t\treturn [\"range: unexpectedly large output\"];\n\t}\n\t// Reverse?\n\tif(operator.prefix === \"!\") {\n\t\tresults.reverse();\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/reduce.js":{"title":"$:/core/modules/filters/reduce.js","text":"/*\\\ntitle: $:/core/modules/filters/reduce.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator evaluates a subfilter for each item, making the running total available in the variable `accumulator`, and the current index available in the variable `index`\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.reduce = function(source,operator,options) {\n\t// Accumulate the list\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\t// Run the filter over each item\n\tvar filterFn = options.wiki.compileFilter(operator.operand),\n\t\taccumulator = operator.operands[1] || \"\";\n\tfor(var index=0; index&lt;results.length; index++) {\n\t\tvar title = results[index],\n\t\t\tlist = filterFn.call(options.wiki,options.wiki.makeTiddlerIterator([title]),{\n\t\t\t\tgetVariable: function(name) {\n\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\t\treturn options.widget.getVariable(\"currentTiddler\");\n\t\t\t\t\t\tcase \"accumulator\":\n\t\t\t\t\t\t\treturn \"\" + accumulator;\n\t\t\t\t\t\tcase \"index\":\n\t\t\t\t\t\t\treturn \"\" + index;\n\t\t\t\t\t\tcase \"revIndex\":\n\t\t\t\t\t\t\treturn \"\" + (results.length - 1 - index);\n\t\t\t\t\t\tcase \"length\":\n\t\t\t\t\t\t\treturn \"\" + results.length;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn options.widget.getVariable(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\tif(list.length &gt; 0) {\n\t\t\taccumulator = \"\" +  list[0];\n\t\t}\n\t}\n\tif(results.length &gt; 0) {\n\t\treturn [accumulator];\n\t} else {\n\t\treturn [];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/regexp.js":{"title":"$:/core/modules/filters/regexp.js","text":"/*\\\ntitle: $:/core/modules/filters/regexp.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for regexp matching\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.regexp = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldname = (operator.suffix || \"title\").toLowerCase(),\n\t\tregexpString, regexp, flags = \"\", match,\n\t\tgetFieldString = function(tiddler,title) {\n\t\t\tif(tiddler) {\n\t\t\t\treturn tiddler.getFieldString(fieldname);\n\t\t\t} else if(fieldname === \"title\") {\n\t\t\t\treturn title;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t// Process flags and construct regexp\n\tregexpString = operator.operand;\n\tmatch = /^\\(\\?([gim]+)\\)/.exec(regexpString);\n\tif(match) {\n\t\tflags = match[1];\n\t\tregexpString = regexpString.substr(match[0].length);\n\t} else {\n\t\tmatch = /\\(\\?([gim]+)\\)$/.exec(regexpString);\n\t\tif(match) {\n\t\t\tflags = match[1];\n\t\t\tregexpString = regexpString.substr(0,regexpString.length - match[0].length);\n\t\t}\n\t}\n\ttry {\n\t\tregexp = new RegExp(regexpString,flags);\n\t} catch(e) {\n\t\treturn [\"\" + e];\n\t}\n\t// Process the incoming tiddlers\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tvar text = getFieldString(tiddler,title);\n\t\t\tif(text !== null) {\n\t\t\t\tif(!regexp.exec(text)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tvar text = getFieldString(tiddler,title);\n\t\t\tif(text !== null) {\n\t\t\t\tif(!!regexp.exec(text)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/removeprefix.js":{"title":"$:/core/modules/filters/removeprefix.js","text":"/*\\\ntitle: $:/core/modules/filters/removeprefix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for removing a prefix from each title in the list. Titles that do not start with the prefix are removed.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.removeprefix = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tif(title.substr(0,operator.operand.length) === operator.operand) {\n\t\t\tresults.push(title.substr(operator.operand.length));\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/removesuffix.js":{"title":"$:/core/modules/filters/removesuffix.js","text":"/*\\\ntitle: $:/core/modules/filters/removesuffix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for removing a suffix from each title in the list. Titles that do not end with the suffix are removed.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.removesuffix = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tif(title &amp;&amp; title.substr(-operator.operand.length) === operator.operand) {\n\t\t\tresults.push(title.substr(0,title.length - operator.operand.length));\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/sameday.js":{"title":"$:/core/modules/filters/sameday.js","text":"/*\\\ntitle: $:/core/modules/filters/sameday.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that selects tiddlers with a modified date field on the same day as the provided value.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.sameday = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldName = operator.suffix || \"modified\",\n\t\ttargetDate = (new Date($tw.utils.parseDate(operator.operand))).setHours(0,0,0,0);\n\t// Function to convert a date/time to a date integer\n\tsource(function(tiddler,title) {\n\t\tif(tiddler) {\n\t\t\tif(tiddler.getFieldDay(fieldName) === targetDate) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/search.js":{"title":"$:/core/modules/filters/search.js","text":"/*\\\ntitle: $:/core/modules/filters/search.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for searching for the text in the operand tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.search = function(source,operator,options) {\n\tvar invert = operator.prefix === \"!\";\n\tif(operator.suffixes) {\n\t\tvar hasFlag = function(flag) {\n\t\t\t\treturn (operator.suffixes[1] || []).indexOf(flag) !== -1;\n\t\t\t},\n\t\t\texcludeFields = false,\n\t\t\tfieldList = operator.suffixes[0] || [],\n\t\t\tfirstField = fieldList[0] || \"\", \n\t\t\tfirstChar = firstField.charAt(0),\n\t\t\tfields;\n\t\tif(firstChar === \"-\") {\n\t\t\tfields = [firstField.slice(1)].concat(fieldList.slice(1));\n\t\t\texcludeFields = true;\n\t\t} else if(fieldList[0] === \"*\"){\n\t\t\tfields = [];\n\t\t\texcludeFields = true;\n\t\t} else {\n\t\t\tfields = fieldList.slice(0);\n\t\t}\n\t\treturn options.wiki.search(operator.operand,{\n\t\t\tsource: source,\n\t\t\tinvert: invert,\n\t\t\tfield: fields,\n\t\t\texcludeField: excludeFields,\n\t\t\tcaseSensitive: hasFlag(\"casesensitive\"),\n\t\t\tliteral: hasFlag(\"literal\"),\n\t\t\twhitespace: hasFlag(\"whitespace\"),\n\t\t\tanchored: hasFlag(\"anchored\"),\n\t\t\tregexp: hasFlag(\"regexp\"),\n\t\t\twords: hasFlag(\"words\")\n\t\t});\n\t} else {\n\t\treturn options.wiki.search(operator.operand,{\n\t\t\tsource: source,\n\t\t\tinvert: invert\n\t\t});\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/shadowsource.js":{"title":"$:/core/modules/filters/shadowsource.js","text":"/*\\\ntitle: $:/core/modules/filters/shadowsource.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the source plugins for shadow tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.shadowsource = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar source = options.wiki.getShadowSource(title);\n\t\tif(source) {\n\t\t\t$tw.utils.pushTop(results,source);\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/slugify.js":{"title":"$:/core/modules/filters/slugify.js","text":"/*\\\ntitle: $:/core/modules/filters/slugify.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for slugifying a tiddler title\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.slugify = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(options.wiki.slugify(title));\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/sort.js":{"title":"$:/core/modules/filters/sort.js","text":"/*\\\ntitle: $:/core/modules/filters/sort.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for sorting\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.sort = function(source,operator,options) {\n\tvar results = prepare_results(source);\n\toptions.wiki.sortTiddlers(results,operator.operand || \"title\",operator.prefix === \"!\",false,false);\n\treturn results;\n};\n\nexports.nsort = function(source,operator,options) {\n\tvar results = prepare_results(source);\n\toptions.wiki.sortTiddlers(results,operator.operand || \"title\",operator.prefix === \"!\",false,true);\n\treturn results;\n};\n\nexports.sortan = function(source, operator, options) {\n\tvar results = prepare_results(source);\n\toptions.wiki.sortTiddlers(results, operator.operand || \"title\", operator.prefix === \"!\",false,false,true);\n\treturn results;\n};\n\nexports.sortcs = function(source,operator,options) {\n\tvar results = prepare_results(source);\n\toptions.wiki.sortTiddlers(results,operator.operand || \"title\",operator.prefix === \"!\",true,false);\n\treturn results;\n};\n\nexports.nsortcs = function(source,operator,options) {\n\tvar results = prepare_results(source);\n\toptions.wiki.sortTiddlers(results,operator.operand || \"title\",operator.prefix === \"!\",true,true);\n\treturn results;\n};\n\nvar prepare_results = function (source) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(title);\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/sortsub.js":{"title":"$:/core/modules/filters/sortsub.js","text":"/*\\\ntitle: $:/core/modules/filters/sortsub.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for sorting by a subfilter\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.sortsub = function(source,operator,options) {\n\t// Compile the subfilter\n\tvar filterFn = options.wiki.compileFilter(operator.operand);\n\t// Collect the input titles and the corresponding sort keys\n\tvar inputTitles = [],\n\t\tsortKeys = [];\n\tsource(function(tiddler,title) {\n\t\tinputTitles.push(title);\n\t\tvar r = filterFn.call(options.wiki,function(iterator) {\n\t\t\titerator(options.wiki.getTiddler(title),title);\n\t\t},{\n\t\t\tgetVariable: function(name) {\n\t\t\t\tswitch(name) {\n\t\t\t\t\tcase \"currentTiddler\":\n\t\t\t\t\t\treturn \"\" + title;\n\t\t\t\t\tcase \"..currentTiddler\":\n\t\t\t\t\t\treturn options.widget.getVariable(\"currentTiddler\");\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn options.widget.getVariable(name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tsortKeys.push(r[0] || \"\");\n\t});\n\t// Rather than sorting the titles array, we'll sort the indexes so that we can consult both arrays\n\tvar indexes = new Array(inputTitles.length);\n\tfor(var t=0; t&lt;inputTitles.length; t++) {\n\t\tindexes[t] = t;\n\t}\n\t// Sort the indexes\n\tvar compareFn = $tw.utils.makeCompareFunction(operator.suffix,{defaultType: \"string\",invert: operator.prefix === \"!\"});\n\tindexes = indexes.sort(function(a,b) {\n\t\treturn compareFn(sortKeys[a],sortKeys[b]);\n\t});\n\t// Make the results array in order\n\tvar results = [];\n\t$tw.utils.each(indexes,function(index) {\n\t\tresults.push(inputTitles[index]);\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/splitbefore.js":{"title":"$:/core/modules/filters/splitbefore.js","text":"/*\\\ntitle: $:/core/modules/filters/splitbefore.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator that splits each result on the first occurance of the specified separator and returns the unique values.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.splitbefore = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar parts = title.split(operator.operand);\n\t\tif(parts.length === 1) {\n\t\t\t$tw.utils.pushTop(results,parts[0]);\n\t\t} else {\n\t\t\t$tw.utils.pushTop(results,parts[0] + operator.operand);\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/storyviews.js":{"title":"$:/core/modules/filters/storyviews.js","text":"/*\\\ntitle: $:/core/modules/filters/storyviews.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the story views in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.storyviews = function(source,operator,options) {\n\tvar results = [],\n\t\tstoryviews = {};\n\t$tw.modules.applyMethods(\"storyview\",storyviews);\n\t$tw.utils.each(storyviews,function(info,name) {\n\t\tresults.push(name);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/strings.js":{"title":"$:/core/modules/filters/strings.js","text":"/*\\\ntitle: $:/core/modules/filters/strings.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operators for strings. Unary/binary operators work on each item in turn, and return a new item list.\n\nSum/product/maxall/minall operate on the entire list, returning a single item.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.length = makeStringBinaryOperator(\n\tfunction(a) {return [\"\" + (\"\" + a).length];}\n);\n\nexports.uppercase = makeStringBinaryOperator(\n\tfunction(a) {return [(\"\" + a).toUpperCase()];}\n);\n\nexports.lowercase = makeStringBinaryOperator(\n\tfunction(a) {return [(\"\" + a).toLowerCase()];}\n);\n\nexports.sentencecase = makeStringBinaryOperator(\n\tfunction(a) {return [$tw.utils.toSentenceCase(a)];}\n);\n\nexports.titlecase = makeStringBinaryOperator(\n\tfunction(a) {return [$tw.utils.toTitleCase(a)];}\n);\n\nexports.trim = function(source,operator,options) {\n\tvar result = [],\n\t\tsuffix = operator.suffix || \"\",\n\t\toperand = (operator.operand || \"\"),\n\t\tfnCalc;\n\tif(suffix === \"prefix\") {\n\t\tfnCalc = function(a,b) {return [$tw.utils.trimPrefix(a,b)];}\n\t} else if(suffix === \"suffix\") {\n\t\tfnCalc = function(a,b) {return [$tw.utils.trimSuffix(a,b)];}\n\t} else {\n\t\tif(operand === \"\") {\n\t\t\tfnCalc = function(a) {return [$tw.utils.trim(a)];}\n\t\t} else {\n\t\t\tfnCalc = function(a,b) {return [$tw.utils.trimSuffix($tw.utils.trimPrefix(a,b),b)];}\n\t\t}\n\t}\n\tsource(function(tiddler,title) {\n\t\tArray.prototype.push.apply(result,fnCalc(title,operand));\n\t});\n\treturn result;\n};\n\nexports.split = makeStringBinaryOperator(\n\tfunction(a,b) {return (\"\" + a).split(b);}\n);\n\nexports[\"enlist-input\"] = makeStringBinaryOperator(\n\tfunction(a,o,s) {return $tw.utils.parseStringArray(\"\" + a,(s === \"raw\"));}\n);\n\nexports.join = makeStringReducingOperator(\n\tfunction(accumulator,value,operand) {\n\t\tif(accumulator === null) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\treturn accumulator + operand + value;\n\t\t}\n\t},null\n);\n\nfunction makeStringBinaryOperator(fnCalc) {\n\treturn function(source,operator,options) {\n\t\tvar result = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tArray.prototype.push.apply(result,fnCalc(title,operator.operand || \"\",operator.suffix || \"\"));\n\t\t});\n\t\treturn result;\n\t};\n}\n\nfunction makeStringReducingOperator(fnCalc,initialValue) {\n\treturn function(source,operator,options) {\n\t\tvar result = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tresult.push(title);\n\t\t});\n\t\tif(result.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\treturn [result.reduce(function(accumulator,currentValue) {\n\t\t\treturn fnCalc(accumulator,currentValue,operator.operand || \"\");\n\t\t},initialValue) || \"\"];\n\t};\n}\n\nexports.splitregexp = function(source,operator,options) {\n\tvar result = [],\n\t\tsuffix = operator.suffix || \"\",\n\t\tflags = (suffix.indexOf(\"m\") !== -1 ? \"m\" : \"\") + (suffix.indexOf(\"i\") !== -1 ? \"i\" : \"\"),\n\t\tregExp;\n\ttry {\n\t\tregExp = new RegExp(operator.operand || \"\",flags);\n\t} catch(ex) {\n\t\treturn [\"RegExp error: \" + ex];\n\t}\n\tsource(function(tiddler,title) {\n\t\tArray.prototype.push.apply(result,title.split(regExp));\n\t});\n\treturn result;\n};\n\nexports[\"search-replace\"] = function(source,operator,options) {\n\tvar results = [],\n\t\tsuffixes = operator.suffixes || [],\n\t\tflagSuffix = (suffixes[0] ? (suffixes[0][0] || \"\") : \"\"),\n\t\tflags = (flagSuffix.indexOf(\"g\") !== -1 ? \"g\" : \"\") + (flagSuffix.indexOf(\"i\") !== -1 ? \"i\" : \"\"),\n\t\tisRegExp = (suffixes[1] &amp;&amp; suffixes[1][0] === \"regexp\") ? true : false,\n\t\tsearchTerm,\n\t\tregExp;\n\n\tsource(function(tiddler,title) {\n\t\tif(title &amp;&amp; (operator.operands.length &gt; 1)) {\n\t\t\t//Escape regexp characters if the operand is not a regular expression\n\t\t\tsearchTerm = isRegExp ? operator.operand : $tw.utils.escapeRegExp(operator.operand);\n\t\t\ttry {\n\t\t\t\tregExp = new RegExp(searchTerm,flags);\n\t\t\t} catch(ex) {\n\t\t\t\treturn [\"RegExp error: \" + ex];\n\t\t\t}\n\t\t\tresults.push(\n\t\t\t\ttitle.replace(regExp,operator.operands[1])\n\t\t\t);\n\t\t} else {\n\t\t\tresults.push(title);\n\t\t}\n\t});\n\treturn results;\n};\n\nexports.pad = function(source,operator,options) {\n\tvar results = [],\n\t\ttargetLength = operator.operand ? parseInt(operator.operand) : 0,\n\t\tfill = operator.operands[1] || \"0\";\n\n\tsource(function(tiddler,title) {\n\t\tif(title &amp;&amp; title.length) {\n\t\t\tif(title.length &gt;= targetLength) {\n\t\t\t\tresults.push(title);\n\t\t\t} else {\n\t\t\t\tvar padString = \"\",\n\t\t\t\t\tpadStringLength = targetLength - title.length;\n\t\t\t\twhile (padStringLength &gt; padString.length) {\n\t\t\t\t\tpadString += fill;\n\t\t\t\t}\n\t\t\t\t//make sure we do not exceed the specified length\n\t\t\t\tpadString = padString.slice(0,padStringLength);\n\t\t\t\tif(operator.suffix &amp;&amp; (operator.suffix === \"suffix\")) {\n\t\t\t\t\ttitle = title + padString;\n\t\t\t\t} else {\n\t\t\t\t\ttitle = padString + title;\n\t\t\t\t}\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t}\n\t});\n\treturn results;\n}\n\nexports.charcode = function(source,operator,options) {\n\tvar chars = [];\n\t$tw.utils.each(operator.operands,function(operand) {\n\t\tif(operand !== \"\") {\n\t\t\tchars.push(String.fromCharCode($tw.utils.parseInt(operand)));\n\t\t}\n\t});\n\treturn [chars.join(\"\")];\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/subfilter.js":{"title":"$:/core/modules/filters/subfilter.js","text":"/*\\\ntitle: $:/core/modules/filters/subfilter.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning its operand evaluated as a filter\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.subfilter = function(source,operator,options) {\n\tvar list = options.wiki.filterTiddlers(operator.operand,options.widget,source);\n\tif(operator.prefix === \"!\") {\n\t\tvar results = [];\n\t\tsource(function(tiddler,title) {\n\t\t\tif(list.indexOf(title) === -1) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t} else {\n\t\treturn list;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/subtiddlerfields.js":{"title":"$:/core/modules/filters/subtiddlerfields.js","text":"/*\\\ntitle: $:/core/modules/filters/subtiddlerfields.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the fields on the selected subtiddlers of the plugin named in the operand\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.subtiddlerfields = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tvar subtiddler = options.wiki.getSubTiddler(operator.operand,title);\n\t\tif(subtiddler) {\n\t\t\tfor(var fieldName in subtiddler.fields) {\n\t\t\t\t$tw.utils.pushTop(results,fieldName);\n\t\t\t}\n\t\t}\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/suffix.js":{"title":"$:/core/modules/filters/suffix.js","text":"/*\\\ntitle: $:/core/modules/filters/suffix.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking if a title ends with a suffix\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.suffix = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title.substr(-operator.operand.length) !== operator.operand) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(title.substr(-operator.operand.length) === operator.operand) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/tag.js":{"title":"$:/core/modules/filters/tag.js","text":"/*\\\ntitle: $:/core/modules/filters/tag.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for checking for the presence of a tag\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tag = function(source,operator,options) {\n\tvar results = [],indexedResults;\n\tif((operator.suffix || \"\").toLowerCase() === \"strict\" &amp;&amp; !operator.operand) {\n\t\t// New semantics:\n\t\t// Always return copy of input if operator.operand is missing\n\t\tsource(function(tiddler,title) {\n\t\t\tresults.push(title);\n\t\t});\n\t} else {\n\t\t// Old semantics:\n\t\tvar tiddlers;\n\t\tif(operator.prefix === \"!\") {\n\t\t\t// Returns a copy of the input if operator.operand is missing\n\t\t\ttiddlers = options.wiki.getTiddlersWithTag(operator.operand);\n\t\t\tsource(function(tiddler,title) {\n\t\t\t\tif(tiddlers.indexOf(title) === -1) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// Returns empty results if operator.operand is missing\n\t\t\tif(source.byTag) {\n\t\t\t\tindexedResults = source.byTag(operator.operand);\n\t\t\t\tif(indexedResults) {\n\t\t\t\t\treturn indexedResults;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttiddlers = options.wiki.getTiddlersWithTag(operator.operand);\n\t\t\t\tsource(function(tiddler,title) {\n\t\t\t\t\tif(tiddlers.indexOf(title) !== -1) {\n\t\t\t\t\t\tresults.push(title);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresults = options.wiki.sortByList(results,operator.operand);\n\t\t\t}\n\t\t}\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/tagging.js":{"title":"$:/core/modules/filters/tagging.js","text":"/*\\\ntitle: $:/core/modules/filters/tagging.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning all tiddlers that are tagged with the selected tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tagging = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\t$tw.utils.pushTop(results,options.wiki.getTiddlersWithTag(title));\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/tags.js":{"title":"$:/core/modules/filters/tags.js","text":"/*\\\ntitle: $:/core/modules/filters/tags.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning all the tags of the selected tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.tags = function(source,operator,options) {\n\tvar tags = {};\n\tsource(function(tiddler,title) {\n\t\tvar t, length;\n\t\tif(tiddler &amp;&amp; tiddler.fields.tags) {\n\t\t\tfor(t=0, length=tiddler.fields.tags.length; t&lt;length; t++) {\n\t\t\t\ttags[tiddler.fields.tags[t]] = true;\n\t\t\t}\n\t\t}\n\t});\n\treturn Object.keys(tags);\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/then.js":{"title":"$:/core/modules/filters/then.js","text":"/*\\\ntitle: $:/core/modules/filters/then.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for replacing any titles with a constant\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.then = function(source,operator,options) {\n\tvar results = [];\n\tsource(function(tiddler,title) {\n\t\tresults.push(operator.operand);\n\t});\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/title.js":{"title":"$:/core/modules/filters/title.js","text":"/*\\\ntitle: $:/core/modules/filters/title.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for comparing title fields for equality\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.title = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler &amp;&amp; tiddler.fields.title !== operator.operand) {\n\t\t\t\tresults.push(title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tresults.push(operator.operand);\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/untagged.js":{"title":"$:/core/modules/filters/untagged.js","text":"/*\\\ntitle: $:/core/modules/filters/untagged.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator returning all the selected tiddlers that are untagged\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.untagged = function(source,operator,options) {\n\tvar results = [];\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(tiddler &amp;&amp; $tw.utils.isArray(tiddler.fields.tags) &amp;&amp; tiddler.fields.tags.length &gt; 0) {\n\t\t\t\t$tw.utils.pushTop(results,title);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tif(!tiddler || !tiddler.hasField(\"tags\") || ($tw.utils.isArray(tiddler.fields.tags) &amp;&amp; tiddler.fields.tags.length === 0)) {\n\t\t\t\t$tw.utils.pushTop(results,title);\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/variables.js":{"title":"$:/core/modules/filters/variables.js","text":"/*\\\ntitle: $:/core/modules/filters/variables.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the active variables\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.variables = function(source,operator,options) {\n\tvar names = [];\n\tfor(var variable in options.widget.variables) {\n\t\tnames.push(variable);\n\t}\n\treturn names.sort();\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/wikiparserrules.js":{"title":"$:/core/modules/filters/wikiparserrules.js","text":"/*\\\ntitle: $:/core/modules/filters/wikiparserrules.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for returning the names of the wiki parser rules in this wiki\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.wikiparserrules = function(source,operator,options) {\n\tvar results = [],\n\t\toperand = operator.operand;\n\t$tw.utils.each($tw.modules.types.wikirule,function(mod) {\n\t\tvar exp = mod.exports;\n\t\tif(!operand || exp.types[operand]) {\n\t\t\tresults.push(exp.name);\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters/x-listops.js":{"title":"$:/core/modules/filters/x-listops.js","text":"/*\\\ntitle: $:/core/modules/filters/x-listops.js\ntype: application/javascript\nmodule-type: filteroperator\n\nExtended filter operators to manipulate the current list.\n\n\\*/\n(function () {\n\n\t/*jslint node: true, browser: true */\n\t/*global $tw: false */\n\t\"use strict\";\n\n\t/*\n\tFetch titles from the current list\n\t*/\n\tvar prepare_results = function (source) {\n\tvar results = [];\n\t\tsource(function (tiddler, title) {\n\t\t\tresults.push(title);\n\t\t});\n\t\treturn results;\n\t};\n\n\t/*\n\tMoves a number of items from the tail of the current list before the item named in the operand\n\t*/\n\texports.putbefore = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1);\n\t\treturn (index === -1) ?\n\t\t\tresults.slice(0, -1) :\n\t\t\tresults.slice(0, index).concat(results.slice(-count)).concat(results.slice(index, -count));\n\t};\n\n\t/*\n\tMoves a number of items from the tail of the current list after the item named in the operand\n\t*/\n\texports.putafter = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1);\n\t\treturn (index === -1) ?\n\t\t\tresults.slice(0, -1) :\n\t\t\tresults.slice(0, index + 1).concat(results.slice(-count)).concat(results.slice(index + 1, -count));\n\t};\n\n\t/*\n\tReplaces the item named in the operand with a number of items from the tail of the current list\n\t*/\n\texports.replace = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1);\n\t\treturn (index === -1) ?\n\t\t\tresults.slice(0, -count) :\n\t\t\tresults.slice(0, index).concat(results.slice(-count)).concat(results.slice(index + 1, -count));\n\t};\n\n\t/*\n\tMoves a number of items from the tail of the current list to the head of the list\n\t*/\n\texports.putfirst = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1);\n\t\treturn results.slice(-count).concat(results.slice(0, -count));\n\t};\n\n\t/*\n\tMoves a number of items from the head of the current list to the tail of the list\n\t*/\n\texports.putlast = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1);\n\t\treturn results.slice(count).concat(results.slice(0, count));\n\t};\n\n\t/*\n\tMoves the item named in the operand a number of places forward or backward in the list\n\t*/\n\texports.move = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,1),\n\t\t\tmarker = results.splice(index, 1),\n\t\t\toffset =  (index + count) &gt; 0 ? index + count : 0;\n\t\treturn results.slice(0, offset).concat(marker).concat(results.slice(offset));\n\t};\n\n\t/*\n\tReturns the items from the current list that are after the item named in the operand\n\t*/\n\texports.allafter = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand);\n\t\treturn (index === -1) ? [] :\n\t\t\t(operator.suffix) ? results.slice(index) :\n\t\t\tresults.slice(index + 1);\n\t};\n\n\t/*\n\tReturns the items from the current list that are before the item named in the operand\n\t*/\n\texports.allbefore = function (source, operator) {\n\t\tvar results = prepare_results(source),\n\t\t\tindex = results.indexOf(operator.operand);\n\t\treturn (index === -1) ? [] :\n\t\t\t(operator.suffix) ? results.slice(0, index + 1) :\n\t\t\tresults.slice(0, index);\n\t};\n\n\t/*\n\tAppends the items listed in the operand array to the tail of the current list\n\t*/\n\texports.append = function (source, operator) {\n\t\tvar append = $tw.utils.parseStringArray(operator.operand, \"true\"),\n\t\t\tresults = prepare_results(source),\n\t\t\tcount = parseInt(operator.suffix) || append.length;\n\t\treturn (append.length === 0) ? results :\n\t\t\t(operator.prefix) ? results.concat(append.slice(-count)) :\n\t\t\tresults.concat(append.slice(0, count));\n\t};\n\n\t/*\n\tPrepends the items listed in the operand array to the head of the current list\n\t*/\n\texports.prepend = function (source, operator) {\n\t\tvar prepend = $tw.utils.parseStringArray(operator.operand, \"true\"),\n\t\t\tresults = prepare_results(source),\n\t\t\tcount = $tw.utils.getInt(operator.suffix,prepend.length);\n\t\treturn (prepend.length === 0) ? results :\n\t\t\t(operator.prefix) ? prepend.slice(-count).concat(results) :\n\t\t\tprepend.slice(0, count).concat(results);\n\t};\n\n\t/*\n\tReturns all items from the current list except the items listed in the operand array\n\t*/\n\texports.remove = function (source, operator) {\n\t\tvar array = $tw.utils.parseStringArray(operator.operand, \"true\"),\n\t\t\tresults = prepare_results(source),\n\t\t\tcount = parseInt(operator.suffix) || array.length,\n\t\t\tp,\n\t\t\tlen,\n\t\t\tindex;\n\t\tlen = array.length - 1;\n\t\tfor (p = 0; p &lt; count; ++p) {\n\t\t\tif (operator.prefix) {\n\t\t\t\tindex = results.indexOf(array[len - p]);\n\t\t\t} else {\n\t\t\t\tindex = results.indexOf(array[p]);\n\t\t\t}\n\t\t\tif (index !== -1) {\n\t\t\t\tresults.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t};\n\n\t/*\n\tReturns all items from the current list sorted in the order of the items in the operand array\n\t*/\n\texports.sortby = function (source, operator) {\n\t\tvar results = prepare_results(source);\n\t\tif (!results || results.length &lt; 2) {\n\t\t\treturn results;\n\t\t}\n\t\tvar lookup = $tw.utils.parseStringArray(operator.operand, \"true\");\n\t\tresults.sort(function (a, b) {\n\t\t\treturn lookup.indexOf(a) - lookup.indexOf(b);\n\t\t});\n\t\treturn results;\n\t};\n\n\t/*\n\tRemoves all duplicate items from the current list\n\t*/\n\texports.unique = function (source, operator) {\n\t\tvar results = prepare_results(source);\n\t\tvar set = results.reduce(function (a, b) {\n\t\t\tif (a.indexOf(b) &lt; 0) {\n\t\t\t\ta.push(b);\n\t\t\t}\n\t\t\treturn a;\n\t\t}, []);\n\t\treturn set;\n\t};\n\n\tvar cycleValueInArray = function(results,operands,stepSize) {\n\t\tvar resultsIndex,\n\t\t\tstep = stepSize || 1,\n\t\t\ti = 0,\n\t\t\topLength = operands.length,\n\t\t\tnextOperandIndex;\n\t\tfor(i; i &lt; opLength; i++) {\n\t\t\tresultsIndex = results.indexOf(operands[i]);\n\t\t\tif(resultsIndex !== -1) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(resultsIndex !== -1) {\n\t\t\ti = i + step;\n\t\t\tnextOperandIndex = (i &lt; opLength ? i : i - opLength);\n\t\t\tif(operands.length &gt; 1) {\n\t\t\t\tresults.splice(resultsIndex,1,operands[nextOperandIndex]);\n\t\t\t} else {\n\t\t\t\tresults.splice(resultsIndex,1);\n\t\t\t}\n\t\t} else {\n\t\t\tresults.push(operands[0]);\n\t\t}\n\t\treturn results;\n\t}\n\n\t/*\n\tToggles an item in the current list.\n\t*/\n\texports.toggle = function(source,operator) {\n\t\treturn cycleValueInArray(prepare_results(source),operator.operands);\n\t}\n\n\texports.cycle = function(source,operator) {\n\t\tvar results = prepare_results(source),\n\t\t\toperands = (operator.operand.length ? $tw.utils.parseStringArray(operator.operand, \"true\") : [\"\"]),\n\t\t\tstep = $tw.utils.getInt(operator.operands[1]||\"\",1);\n\t\tif(step &lt; 0) {\n\t\t\toperands.reverse();\n\t\t\tstep = Math.abs(step);\n\t\t}\n\t\treturn cycleValueInArray(results,operands,step);\n\t}\n\n})();\n","type":"application/javascript","module-type":"filteroperator"},"$:/core/modules/filters.js":{"title":"$:/core/modules/filters.js","text":"/*\\\ntitle: $:/core/modules/filters.js\ntype: application/javascript\nmodule-type: wikimethod\n\nAdds tiddler filtering methods to the $tw.Wiki object.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nParses an operation (i.e. a run) within a filter string\n\toperators: Array of array of operator nodes into which results should be inserted\n\tfilterString: filter string\n\tp: start position within the string\nReturns the new start position, after the parsed operation\n*/\nfunction parseFilterOperation(operators,filterString,p) {\n\tvar nextBracketPos, operator;\n\t// Skip the starting square bracket\n\tif(filterString.charAt(p++) !== \"[\") {\n\t\tthrow \"Missing [ in filter expression\";\n\t}\n\t// Process each operator in turn\n\tdo {\n\t\toperator = {};\n\t\t// Check for an operator prefix\n\t\tif(filterString.charAt(p) === \"!\") {\n\t\t\toperator.prefix = filterString.charAt(p++);\n\t\t}\n\t\t// Get the operator name\n\t\tnextBracketPos = filterString.substring(p).search(/[\\[\\{&lt;\\/]/);\n\t\tif(nextBracketPos === -1) {\n\t\t\tthrow \"Missing [ in filter expression\";\n\t\t}\n\t\tnextBracketPos += p;\n\t\tvar bracket = filterString.charAt(nextBracketPos);\n\t\toperator.operator = filterString.substring(p,nextBracketPos);\n\t\t// Any suffix?\n\t\tvar colon = operator.operator.indexOf(':');\n\t\tif(colon &gt; -1) {\n\t\t\t// The raw suffix for older filters\n\t\t\toperator.suffix = operator.operator.substring(colon + 1);\n\t\t\toperator.operator = operator.operator.substring(0,colon) || \"field\";\n\t\t\t// The processed suffix for newer filters\n\t\t\toperator.suffixes = [];\n\t\t\t$tw.utils.each(operator.suffix.split(\":\"),function(subsuffix) {\n\t\t\t\toperator.suffixes.push([]);\n\t\t\t\t$tw.utils.each(subsuffix.split(\",\"),function(entry) {\n\t\t\t\t\tentry = $tw.utils.trim(entry);\n\t\t\t\t\tif(entry) {\n\t\t\t\t\t\toperator.suffixes[operator.suffixes.length - 1].push(entry); \n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// Empty operator means: title\n\t\telse if(operator.operator === \"\") {\n\t\t\toperator.operator = \"title\";\n\t\t}\n\t\toperator.operands = [];\n\t\tvar parseOperand = function(bracketType) {\n\t\t\tvar operand = {};\n\t\t\tswitch (bracketType) {\n\t\t\t\tcase \"{\": // Curly brackets\n\t\t\t\t\toperand.indirect = true;\n\t\t\t\t\tnextBracketPos = filterString.indexOf(\"}\",p);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"[\": // Square brackets\n\t\t\t\t\tnextBracketPos = filterString.indexOf(\"]\",p);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"&lt;\": // Angle brackets\n\t\t\t\t\toperand.variable = true;\n\t\t\t\t\tnextBracketPos = filterString.indexOf(\"&gt;\",p);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"/\": // regexp brackets\n\t\t\t\t\tvar rex = /^((?:[^\\\\\\/]|\\\\.)*)\\/(?:\\(([mygi]+)\\))?/g,\n\t\t\t\t\t\trexMatch = rex.exec(filterString.substring(p));\n\t\t\t\t\tif(rexMatch) {\n\t\t\t\t\t\toperator.regexp = new RegExp(rexMatch[1], rexMatch[2]);\n\t// DEPRECATION WARNING\n\tconsole.log(\"WARNING: Filter\",operator.operator,\"has a deprecated regexp operand\",operator.regexp);\n\t\t\t\t\t\tnextBracketPos = p + rex.lastIndex - 1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow \"Unterminated regular expression in filter expression\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(nextBracketPos === -1) {\n\t\t\t\tthrow \"Missing closing bracket in filter expression\";\n\t\t\t}\n\t\t\tif(!operator.regexp) {\n\t\t\t\toperand.text = filterString.substring(p,nextBracketPos);\n\t\t\t\toperator.operands.push(operand);\n\t\t\t}\n\t\t\tp = nextBracketPos + 1;\n\t\t}\n\n\t\tp = nextBracketPos + 1;\n\t\tparseOperand(bracket);\n\n\t\t// Check for multiple operands\n\t\twhile(filterString.charAt(p) === \",\") {\n\t\t\tp++;\n\t\t\tif(/^[\\[\\{&lt;\\/]/.test(filterString.substring(p))) {\n\t\t\t\tnextBracketPos = p;\n\t\t\t\tp++;\n\t\t\t\tparseOperand(filterString.charAt(nextBracketPos));\n\t\t\t} else {\n\t\t\t\tthrow \"Missing [ in filter expression\";\n\t\t\t}\n\t\t}\n\n\t\t// Push this operator\n\t\toperators.push(operator);\n\t} while(filterString.charAt(p) !== \"]\");\n\t// Skip the ending square bracket\n\tif(filterString.charAt(p++) !== \"]\") {\n\t\tthrow \"Missing ] in filter expression\";\n\t}\n\t// Return the parsing position\n\treturn p;\n}\n\n/*\nParse a filter string\n*/\nexports.parseFilter = function(filterString) {\n\tfilterString = filterString || \"\";\n\tvar results = [], // Array of arrays of operator nodes {operator:,operand:}\n\t\tp = 0, // Current position in the filter string\n\t\tmatch;\n\tvar whitespaceRegExp = /(\\s+)/mg,\n\t\toperandRegExp = /((?:\\+|\\-|~|=|\\:(\\w+)(?:\\:([\\w\\:, ]*))?)?)(?:(\\[)|(?:\"([^\"]*)\")|(?:'([^']*)')|([^\\s\\[\\]]+))/mg;\n\twhile(p &lt; filterString.length) {\n\t\t// Skip any whitespace\n\t\twhitespaceRegExp.lastIndex = p;\n\t\tmatch = whitespaceRegExp.exec(filterString);\n\t\tif(match &amp;&amp; match.index === p) {\n\t\t\tp = p + match[0].length;\n\t\t}\n\t\t// Match the start of the operation\n\t\tif(p &lt; filterString.length) {\n\t\t\toperandRegExp.lastIndex = p;\n\t\t\tmatch = operandRegExp.exec(filterString);\n\t\t\tif(!match || match.index !== p) {\n\t\t\t\tthrow $tw.language.getString(\"Error/FilterSyntax\");\n\t\t\t}\n\t\t\tvar operation = {\n\t\t\t\tprefix: \"\",\n\t\t\t\toperators: []\n\t\t\t};\n\t\t\tif(match[1]) {\n\t\t\t\toperation.prefix = match[1];\n\t\t\t\tp = p + operation.prefix.length;\n\t\t\t\tif(match[2]) {\n\t\t\t\t\toperation.namedPrefix = match[2];\n\t\t\t\t}\n\t\t\t\tif(match[3]) {\n\t\t\t\t\toperation.suffixes = [];\n\t\t\t\t\t $tw.utils.each(match[3].split(\":\"),function(subsuffix) {\n\t\t\t\t\t\toperation.suffixes.push([]);\n\t\t\t\t\t\t$tw.utils.each(subsuffix.split(\",\"),function(entry) {\n\t\t\t\t\t\t\tentry = $tw.utils.trim(entry);\n\t\t\t\t\t\t\tif(entry) {\n\t\t\t\t\t\t\t\toperation.suffixes[operation.suffixes.length -1].push(entry);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t });\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(match[4]) { // Opening square bracket\n\t\t\t\tp = parseFilterOperation(operation.operators,filterString,p);\n\t\t\t} else {\n\t\t\t\tp = match.index + match[0].length;\n\t\t\t}\n\t\t\tif(match[5] || match[6] || match[7]) { // Double quoted string, single quoted string or unquoted title\n\t\t\t\toperation.operators.push(\n\t\t\t\t\t{operator: \"title\", operands: [{text: match[5] || match[6] || match[7]}]}\n\t\t\t\t);\n\t\t\t}\n\t\t\tresults.push(operation);\n\t\t}\n\t}\n\treturn results;\n};\n\nexports.getFilterOperators = function() {\n\tif(!this.filterOperators) {\n\t\t$tw.Wiki.prototype.filterOperators = {};\n\t\t$tw.modules.applyMethods(\"filteroperator\",this.filterOperators);\n\t}\n\treturn this.filterOperators;\n};\n\nexports.getFilterRunPrefixes = function() {\n\tif(!this.filterRunPrefixes) {\n\t\t$tw.Wiki.prototype.filterRunPrefixes = {};\n\t\t$tw.modules.applyMethods(\"filterrunprefix\",this.filterRunPrefixes);\n\t}\n\treturn this.filterRunPrefixes;\n}\n\nexports.filterTiddlers = function(filterString,widget,source) {\n\tvar fn = this.compileFilter(filterString);\n\treturn fn.call(this,source,widget);\n};\n\n/*\nCompile a filter into a function with the signature fn(source,widget) where:\nsource: an iterator function for the source tiddlers, called source(iterator), where iterator is called as iterator(tiddler,title)\nwidget: an optional widget node for retrieving the current tiddler etc.\n*/\nexports.compileFilter = function(filterString) {\n\tvar filterParseTree;\n\ttry {\n\t\tfilterParseTree = this.parseFilter(filterString);\n\t} catch(e) {\n\t\treturn function(source,widget) {\n\t\t\treturn [$tw.language.getString(\"Error/Filter\") + \": \" + e];\n\t\t};\n\t}\n\t// Get the hashmap of filter operator functions\n\tvar filterOperators = this.getFilterOperators();\n\t// Assemble array of functions, one for each operation\n\tvar operationFunctions = [];\n\t// Step through the operations\n\tvar self = this;\n\t$tw.utils.each(filterParseTree,function(operation) {\n\t\t// Create a function for the chain of operators in the operation\n\t\tvar operationSubFunction = function(source,widget) {\n\t\t\tvar accumulator = source,\n\t\t\t\tresults = [],\n\t\t\t\tcurrTiddlerTitle = widget &amp;&amp; widget.getVariable(\"currentTiddler\");\n\t\t\t$tw.utils.each(operation.operators,function(operator) {\n\t\t\t\tvar operands = [],\n\t\t\t\t\toperatorFunction;\n\t\t\t\tif(!operator.operator) {\n\t\t\t\t\toperatorFunction = filterOperators.title;\n\t\t\t\t} else if(!filterOperators[operator.operator]) {\n\t\t\t\t\toperatorFunction = filterOperators.field;\n\t\t\t\t} else {\n\t\t\t\t\toperatorFunction = filterOperators[operator.operator];\n\t\t\t\t}\n\n\t\t\t\t$tw.utils.each(operator.operands,function(operand) {\n\t\t\t\t\tif(operand.indirect) {\n\t\t\t\t\t\toperand.value = self.getTextReference(operand.text,\"\",currTiddlerTitle);\n\t\t\t\t\t} else if(operand.variable) {\n\t\t\t\t\t\tvar varTree = $tw.utils.parseFilterVariable(operand.text);\n\t\t\t\t\t\toperand.value = widget.getVariable(varTree.name,{params:varTree.params,defaultValue: \"\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\toperand.value = operand.text;\n\t\t\t\t\t}\n\t\t\t\t\toperands.push(operand.value);\n\t\t\t\t});\n\n\t\t\t\t// Invoke the appropriate filteroperator module\n\t\t\t\tresults = operatorFunction(accumulator,{\n\t\t\t\t\t\t\toperator: operator.operator,\n\t\t\t\t\t\t\toperand: operands.length &gt; 0 ? operands[0] : undefined,\n\t\t\t\t\t\t\toperands: operands,\n\t\t\t\t\t\t\tprefix: operator.prefix,\n\t\t\t\t\t\t\tsuffix: operator.suffix,\n\t\t\t\t\t\t\tsuffixes: operator.suffixes,\n\t\t\t\t\t\t\tregexp: operator.regexp\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\twiki: self,\n\t\t\t\t\t\t\twidget: widget\n\t\t\t\t\t\t});\n\t\t\t\tif($tw.utils.isArray(results)) {\n\t\t\t\t\taccumulator = self.makeTiddlerIterator(results);\n\t\t\t\t} else {\n\t\t\t\t\taccumulator = results;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif($tw.utils.isArray(results)) {\n\t\t\t\treturn results;\n\t\t\t} else {\n\t\t\t\tvar resultArray = [];\n\t\t\t\tresults(function(tiddler,title) {\n\t\t\t\t\tresultArray.push(title);\n\t\t\t\t});\n\t\t\t\treturn resultArray;\n\t\t\t}\n\t\t};\n\t\tvar filterRunPrefixes = self.getFilterRunPrefixes();\n\t\t// Wrap the operator functions in a wrapper function that depends on the prefix\n\t\toperationFunctions.push((function() {\n\t\t\tvar options = {wiki: self, suffixes: operation.suffixes || []};\n\t\t\tswitch(operation.prefix || \"\") {\n\t\t\t\tcase \"\": // No prefix means that the operation is unioned into the result\n\t\t\t\t\treturn filterRunPrefixes[\"or\"](operationSubFunction, options);\n\t\t\t\tcase \"=\": // The results of the operation are pushed into the result without deduplication\n\t\t\t\t\treturn filterRunPrefixes[\"all\"](operationSubFunction, options);\n\t\t\t\tcase \"-\": // The results of this operation are removed from the main result\n\t\t\t\t\treturn filterRunPrefixes[\"except\"](operationSubFunction, options);\n\t\t\t\tcase \"+\": // This operation is applied to the main results so far\n\t\t\t\t\treturn filterRunPrefixes[\"and\"](operationSubFunction, options);\n\t\t\t\tcase \"~\": // This operation is unioned into the result only if the main result so far is empty\n\t\t\t\t\treturn filterRunPrefixes[\"else\"](operationSubFunction, options);\n\t\t\t\tdefault: \n\t\t\t\t\tif(operation.namedPrefix &amp;&amp; filterRunPrefixes[operation.namedPrefix]) {\n\t\t\t\t\t\treturn filterRunPrefixes[operation.namedPrefix](operationSubFunction, options);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn function(results,source,widget) {\n\t\t\t\t\t\t\tresults.clear();\n\t\t\t\t\t\t\tresults.push($tw.language.getString(\"Error/FilterRunPrefix\"));\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t}\n\t\t})());\n\t});\n\t// Return a function that applies the operations to a source iterator of tiddler titles\n\treturn $tw.perf.measure(\"filter: \" + filterString,function filterFunction(source,widget) {\n\t\tif(!source) {\n\t\t\tsource = self.each;\n\t\t} else if(typeof source === \"object\") { // Array or hashmap\n\t\t\tsource = self.makeTiddlerIterator(source);\n\t\t}\n\t\tif(!widget) {\n\t\t\twidget = $tw.rootWidget;\n\t\t}\n\t\tvar results = new $tw.utils.LinkedList();\n\t\t$tw.utils.each(operationFunctions,function(operationFunction) {\n\t\t\toperationFunction(results,source,widget);\n\t\t});\n\t\treturn results.toArray();\n\t});\n};\n\n})();\n","type":"application/javascript","module-type":"wikimethod"},"$:/core/modules/indexers/backlinks-indexer.js":{"title":"$:/core/modules/indexers/backlinks-indexer.js","text":"/*\\\ntitle: $:/core/modules/indexers/backlinks-indexer.js\ntype: application/javascript\nmodule-type: indexer\n\nIndexes the tiddlers' backlinks\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global modules: false */\n\"use strict\";\n\n\nfunction BacklinksIndexer(wiki) {\n\tthis.wiki = wiki;\n}\n\nBacklinksIndexer.prototype.init = function() {\n\tthis.index = null;\n}\n\nBacklinksIndexer.prototype.rebuild = function() {\n\tthis.index = null;\n}\n\nBacklinksIndexer.prototype._getLinks = function(tiddler) {\n\tvar parser =  this.wiki.parseText(tiddler.fields.type, tiddler.fields.text, {});\n\tif(parser) {\n\t\treturn this.wiki.extractLinks(parser.tree);\n\t}\n\treturn [];\n}\n\nBacklinksIndexer.prototype.update = function(updateDescriptor) {\n\tif(!this.index) {\n\t\treturn;\n\t}\n\tvar newLinks = [],\n\t    oldLinks = [],\n\t    self = this;\n\tif(updateDescriptor.old.exists) {\n\t\toldLinks = this._getLinks(updateDescriptor.old.tiddler);\n\t}\n\tif(updateDescriptor.new.exists) {\n\t\tnewLinks = this._getLinks(updateDescriptor.new.tiddler);\n\t}\n\n\t$tw.utils.each(oldLinks,function(link) {\n\t\tif(self.index[link]) {\n\t\t\tdelete self.index[link][updateDescriptor.old.tiddler.fields.title];\n\t\t}\n\t});\n\t$tw.utils.each(newLinks,function(link) {\n\t\tif(!self.index[link]) {\n\t\t\tself.index[link] = Object.create(null);\n\t\t}\n\t\tself.index[link][updateDescriptor.new.tiddler.fields.title] = true;\n\t});\n}\n\nBacklinksIndexer.prototype.lookup = function(title) {\n\tif(!this.index) {\n\t\tthis.index = Object.create(null);\n\t\tvar self = this;\n\t\tthis.wiki.forEachTiddler(function(title,tiddler) {\n\t\t\tvar links = self._getLinks(tiddler);\n\t\t\t$tw.utils.each(links, function(link) {\n\t\t\t\tif(!self.index[link]) {\n\t\t\t\t\tself.index[link] = Object.create(null);\n\t\t\t\t}\n\t\t\t\tself.index[link][title] = true;\n\t\t\t});\n\t\t});\n\t}\n\tif(this.index[title]) {\n\t\treturn Object.keys(this.index[title]);\n\t} else {\n\t\treturn [];\n\t}\n}\n\nexports.BacklinksIndexer = BacklinksIndexer;\n\n})();\n","type":"application/javascript","module-type":"indexer"},"$:/core/modules/indexers/field-indexer.js":{"title":"$:/core/modules/indexers/field-indexer.js","text":"/*\\\ntitle: $:/core/modules/indexers/field-indexer.js\ntype: application/javascript\nmodule-type: indexer\n\nIndexes the tiddlers with each field value\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global modules: false */\n\"use strict\";\n\nvar DEFAULT_MAXIMUM_INDEXED_VALUE_LENGTH = 128;\n\nfunction FieldIndexer(wiki) {\n\tthis.wiki = wiki;\n}\n\nFieldIndexer.prototype.init = function() {\n\tthis.index = null;\n\tthis.maxIndexedValueLength = DEFAULT_MAXIMUM_INDEXED_VALUE_LENGTH;\n\tthis.addIndexMethods();\n}\n\n// Provided for testing\nFieldIndexer.prototype.setMaxIndexedValueLength = function(length) {\n\tthis.index = null;\n\tthis.maxIndexedValueLength = length;\n};\n\nFieldIndexer.prototype.addIndexMethods = function() {\n\tvar self = this;\n\tthis.wiki.each.byField = function(name,value) {\n\t\tvar titles = self.wiki.allTitles(),\n\t\t\tlookup = self.lookup(name,value);\n\t\treturn lookup &amp;&amp; lookup.filter(function(title) {\n\t\t\treturn titles.indexOf(title) !== -1;\n\t\t});\n\t};\n\tthis.wiki.eachShadow.byField = function(name,value) {\n\t\tvar titles = self.wiki.allShadowTitles(),\n\t\t\tlookup = self.lookup(name,value);\n\t\treturn lookup &amp;&amp; lookup.filter(function(title) {\n\t\t\treturn titles.indexOf(title) !== -1;\n\t\t});\n\t};\n\tthis.wiki.eachTiddlerPlusShadows.byField = function(name,value) {\n\t\tvar lookup = self.lookup(name,value);\n\t\treturn lookup ? lookup.slice(0) : null;\n\t};\n\tthis.wiki.eachShadowPlusTiddlers.byField = function(name,value) {\n\t\tvar lookup = self.lookup(name,value);\n\t\treturn lookup ? lookup.slice(0) : null;\n\t};\n};\n\n/*\nTear down and then rebuild the index as if all tiddlers have changed\n*/\nFieldIndexer.prototype.rebuild = function() {\n\t// Invalidate the index so that it will be rebuilt when it is next used\n\tthis.index = null;\n};\n\n/*\nBuild the index for a particular field\n*/\nFieldIndexer.prototype.buildIndexForField = function(name) {\n\tvar self = this;\n\t// Hashmap by field name of hashmap by field value of array of tiddler titles\n\tthis.index = this.index || Object.create(null);\n\tthis.index[name] = Object.create(null);\n\tvar baseIndex = this.index[name];\n\t// Update the index for each tiddler\n\tthis.wiki.eachTiddlerPlusShadows(function(tiddler,title) {\n\t\tif(name in tiddler.fields) {\n\t\t\tvar value = tiddler.getFieldString(name);\n\t\t\t// Skip any values above the maximum length\n\t\t\tif(value.length &lt; self.maxIndexedValueLength) {\n\t\t\t\tbaseIndex[value] = baseIndex[value] || [];\n\t\t\t\tbaseIndex[value].push(title);\n\t\t\t}\n\t\t}\n\t});\n};\n\n/*\nUpdate the index in the light of a tiddler value changing; note that the title must be identical. (Renames are handled as a separate delete and create)\nupdateDescriptor: {old: {tiddler: &lt;tiddler&gt;, shadow: &lt;boolean&gt;, exists: &lt;boolean&gt;},new: {tiddler: &lt;tiddler&gt;, shadow: &lt;boolean&gt;, exists: &lt;boolean&gt;}}\n*/\nFieldIndexer.prototype.update = function(updateDescriptor) {\n\tvar self = this;\n\t// Don't do anything if the index hasn't been built yet\n\tif(this.index === null) {\n\t\treturn;\n\t}\n\t// Remove the old tiddler from the index\n\tif(updateDescriptor.old.tiddler) {\n\t\t$tw.utils.each(this.index,function(indexEntry,name) {\n\t\t\tif(name in updateDescriptor.old.tiddler.fields) {\n\t\t\t\tvar value = updateDescriptor.old.tiddler.getFieldString(name),\n\t\t\t\t\ttiddlerList = indexEntry[value];\n\t\t\t\tif(tiddlerList) {\n\t\t\t\t\tvar index = tiddlerList.indexOf(updateDescriptor.old.tiddler.fields.title);\n\t\t\t\t\tif(index !== -1) {\n\t\t\t\t\t\ttiddlerList.splice(index,1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t// Add the new tiddler to the index\n\tif(updateDescriptor[\"new\"].tiddler) {\n\t\t$tw.utils.each(this.index,function(indexEntry,name) {\n\t\t\tif(name in updateDescriptor[\"new\"].tiddler.fields) {\n\t\t\t\tvar value = updateDescriptor[\"new\"].tiddler.getFieldString(name);\n\t\t\t\tif(value.length &lt; self.maxIndexedValueLength) {\n\t\t\t\t\tindexEntry[value] = indexEntry[value] || [];\n\t\t\t\t\tindexEntry[value].push(updateDescriptor[\"new\"].tiddler.fields.title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n// Lookup the given field returning a list of tiddler titles\nFieldIndexer.prototype.lookup = function(name,value) {\n\t// Fail the lookup if the value is too long\n\tif(value.length &gt;= this.maxIndexedValueLength) {\n\t\treturn null;\n\t}\n\t// Update the index if it has yet to be built\n\tif(this.index === null || !this.index[name]) {\n\t\tthis.buildIndexForField(name);\n\t}\n\treturn this.index[name][value] || [];\n};\n\nexports.FieldIndexer = FieldIndexer;\n\n})();\n","type":"application/javascript","module-type":"indexer"},"$:/core/modules/indexers/tag-indexer.js":{"title":"$:/core/modules/indexers/tag-indexer.js","text":"/*\\\ntitle: $:/core/modules/indexers/tag-indexer.js\ntype: application/javascript\nmodule-type: indexer\n\nIndexes the tiddlers with each tag\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global modules: false */\n\"use strict\";\n\nfunction TagIndexer(wiki) {\n\tthis.wiki = wiki;\n}\n\nTagIndexer.prototype.init = function() {\n\tthis.subIndexers = [\n\t\tnew TagSubIndexer(this,\"each\"),\n\t\tnew TagSubIndexer(this,\"eachShadow\"),\n\t\tnew TagSubIndexer(this,\"eachTiddlerPlusShadows\"),\n\t\tnew TagSubIndexer(this,\"eachShadowPlusTiddlers\")\n\t];\n\t$tw.utils.each(this.subIndexers,function(subIndexer) {\n\t\tsubIndexer.addIndexMethod();\n\t});\n};\n\nTagIndexer.prototype.rebuild = function() {\n\t$tw.utils.each(this.subIndexers,function(subIndexer) {\n\t\tsubIndexer.rebuild();\n\t});\n};\n\nTagIndexer.prototype.update = function(updateDescriptor) {\n\t$tw.utils.each(this.subIndexers,function(subIndexer) {\n\t\tsubIndexer.update(updateDescriptor);\n\t});\n};\n\nfunction TagSubIndexer(indexer,iteratorMethod) {\n\tthis.indexer = indexer;\n\tthis.iteratorMethod = iteratorMethod;\n\tthis.index = null; // Hashmap of tag title to {isSorted: bool, titles: [array]} or null if not yet initialised\n}\n\nTagSubIndexer.prototype.addIndexMethod = function() {\n\tvar self = this;\n\tthis.indexer.wiki[this.iteratorMethod].byTag = function(tag) {\n\t\treturn self.lookup(tag).slice(0);\n\t};\n};\n\nTagSubIndexer.prototype.rebuild = function() {\n\tvar self = this;\n\t// Hashmap by tag of array of {isSorted:, titles:[]}\n\tthis.index = Object.create(null);\n\t// Add all the tags\n\tthis.indexer.wiki[this.iteratorMethod](function(tiddler,title) {\n\t\t$tw.utils.each(tiddler.fields.tags,function(tag) {\n\t\t\tif(!self.index[tag]) {\n\t\t\t\tself.index[tag] = {isSorted: false, titles: [title]};\n\t\t\t} else {\n\t\t\t\tself.index[tag].titles.push(title);\n\t\t\t}\n\t\t});\n\t});\n};\n\nTagSubIndexer.prototype.update = function(updateDescriptor) {\n\tthis.index = null;\n};\n\nTagSubIndexer.prototype.lookup = function(tag) {\n\t// Update the index if it has yet to be built\n\tif(this.index === null) {\n\t\tthis.rebuild();\n\t}\n\tvar indexRecord = this.index[tag];\n\tif(indexRecord) {\n\t\tif(!indexRecord.isSorted) {\n\t\t\tif(this.indexer.wiki.sortByList) {\n\t\t\t\tindexRecord.titles = this.indexer.wiki.sortByList(indexRecord.titles,tag);\n\t\t\t}\n\t\t\tindexRecord.isSorted = true;\n\t\t}\n\t\treturn indexRecord.titles;\n\t} else {\n\t\treturn [];\n\t}\n};\n\n\nexports.TagIndexer = TagIndexer;\n\n})();\n","type":"application/javascript","module-type":"indexer"},"$:/core/modules/info/platform.js":{"title":"$:/core/modules/info/platform.js","text":"/*\\\ntitle: $:/core/modules/info/platform.js\ntype: application/javascript\nmodule-type: info\n\nInitialise basic platform $:/info/ tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.getInfoTiddlerFields = function(updateInfoTiddlersCallback) {\n\tvar mapBoolean = function(value) {return value ? \"yes\" : \"no\";},\n\t\tinfoTiddlerFields = [];\n\t// Basics\n\tinfoTiddlerFields.push({title: \"$:/info/browser\", text: mapBoolean(!!$tw.browser)});\n\tinfoTiddlerFields.push({title: \"$:/info/node\", text: mapBoolean(!!$tw.node)});\n\tinfoTiddlerFields.push({title: \"$:/info/startup-timestamp\", text: $tw.utils.stringifyDate(new Date())});\n\tif($tw.browser) {\n\t\t// Document location\n\t\tvar setLocationProperty = function(name,value) {\n\t\t\t\tinfoTiddlerFields.push({title: \"$:/info/url/\" + name, text: value});\n\t\t\t},\n\t\t\tlocation = document.location;\n\t\tsetLocationProperty(\"full\", (location.toString()).split(\"#\")[0]);\n\t\tsetLocationProperty(\"host\", location.host);\n\t\tsetLocationProperty(\"hostname\", location.hostname);\n\t\tsetLocationProperty(\"protocol\", location.protocol);\n\t\tsetLocationProperty(\"port\", location.port);\n\t\tsetLocationProperty(\"pathname\", location.pathname);\n\t\tsetLocationProperty(\"search\", location.search);\n\t\tsetLocationProperty(\"origin\", location.origin);\n\t\t// Screen size\n\t\tinfoTiddlerFields.push({title: \"$:/info/browser/screen/width\", text: window.screen.width.toString()});\n\t\tinfoTiddlerFields.push({title: \"$:/info/browser/screen/height\", text: window.screen.height.toString()});\n \t\t// Dark mode through event listener on MediaQueryList\n \t\tvar mqList = window.matchMedia(\"(prefers-color-scheme: dark)\"),\n \t\t\tgetDarkModeTiddler = function() {return {title: \"$:/info/darkmode\", text: mqList.matches ? \"yes\" : \"no\"};};\n \t\tinfoTiddlerFields.push(getDarkModeTiddler());\n \t\tmqList.addListener(function(event) {\n \t\t\tupdateInfoTiddlersCallback([getDarkModeTiddler()]);\n \t\t});\n\t\t// Language\n\t\tinfoTiddlerFields.push({title: \"$:/info/browser/language\", text: navigator.language || \"\"});\n\t}\n\treturn infoTiddlerFields;\n};\n\n})();\n","type":"application/javascript","module-type":"info"},"$:/core/modules/keyboard.js":{"title":"$:/core/modules/keyboard.js","text":"/*\\\ntitle: $:/core/modules/keyboard.js\ntype: application/javascript\nmodule-type: global\n\nKeyboard handling utilities\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar namedKeys = {\n\t\"cancel\": 3,\n\t\"help\": 6,\n\t\"backspace\": 8,\n\t\"tab\": 9,\n\t\"clear\": 12,\n\t\"return\": 13,\n\t\"enter\": 13,\n\t\"pause\": 19,\n\t\"escape\": 27,\n\t\"space\": 32,\n\t\"page_up\": 33,\n\t\"page_down\": 34,\n\t\"end\": 35,\n\t\"home\": 36,\n\t\"left\": 37,\n\t\"up\": 38,\n\t\"right\": 39,\n\t\"down\": 40,\n\t\"printscreen\": 44,\n\t\"insert\": 45,\n\t\"delete\": 46,\n\t\"0\": 48,\n\t\"1\": 49,\n\t\"2\": 50,\n\t\"3\": 51,\n\t\"4\": 52,\n\t\"5\": 53,\n\t\"6\": 54,\n\t\"7\": 55,\n\t\"8\": 56,\n\t\"9\": 57,\n\t\"firefoxsemicolon\": 59,\n\t\"firefoxequals\": 61,\n\t\"a\": 65,\n\t\"b\": 66,\n\t\"c\": 67,\n\t\"d\": 68,\n\t\"e\": 69,\n\t\"f\": 70,\n\t\"g\": 71,\n\t\"h\": 72,\n\t\"i\": 73,\n\t\"j\": 74,\n\t\"k\": 75,\n\t\"l\": 76,\n\t\"m\": 77,\n\t\"n\": 78,\n\t\"o\": 79,\n\t\"p\": 80,\n\t\"q\": 81,\n\t\"r\": 82,\n\t\"s\": 83,\n\t\"t\": 84,\n\t\"u\": 85,\n\t\"v\": 86,\n\t\"w\": 87,\n\t\"x\": 88,\n\t\"y\": 89,\n\t\"z\": 90,\n\t\"numpad0\": 96,\n\t\"numpad1\": 97,\n\t\"numpad2\": 98,\n\t\"numpad3\": 99,\n\t\"numpad4\": 100,\n\t\"numpad5\": 101,\n\t\"numpad6\": 102,\n\t\"numpad7\": 103,\n\t\"numpad8\": 104,\n\t\"numpad9\": 105,\n\t\"multiply\": 106,\n\t\"add\": 107,\n\t\"separator\": 108,\n\t\"subtract\": 109,\n\t\"decimal\": 110,\n\t\"divide\": 111,\n\t\"f1\": 112,\n\t\"f2\": 113,\n\t\"f3\": 114,\n\t\"f4\": 115,\n\t\"f5\": 116,\n\t\"f6\": 117,\n\t\"f7\": 118,\n\t\"f8\": 119,\n\t\"f9\": 120,\n\t\"f10\": 121,\n\t\"f11\": 122,\n\t\"f12\": 123,\n\t\"f13\": 124,\n\t\"f14\": 125,\n\t\"f15\": 126,\n\t\"f16\": 127,\n\t\"f17\": 128,\n\t\"f18\": 129,\n\t\"f19\": 130,\n\t\"f20\": 131,\n\t\"f21\": 132,\n\t\"f22\": 133,\n\t\"f23\": 134,\n\t\"f24\": 135,\n\t\"firefoxminus\": 173,\n\t\"semicolon\": 186,\n\t\"equals\": 187,\n\t\"comma\": 188,\n\t\"dash\": 189,\n\t\"period\": 190,\n\t\"slash\": 191,\n\t\"backquote\": 192,\n\t\"openbracket\": 219,\n\t\"backslash\": 220,\n\t\"closebracket\": 221,\n\t\"quote\": 222\n};\n\nfunction KeyboardManager(options) {\n\tvar self = this;\n\toptions = options || \"\";\n\t// Save the named key hashmap\n\tthis.namedKeys = namedKeys;\n\t// Create a reverse mapping of code to keyname\n\tthis.keyNames = [];\n\t$tw.utils.each(namedKeys,function(keyCode,name) {\n\t\tself.keyNames[keyCode] = name.substr(0,1).toUpperCase() + name.substr(1);\n\t});\n\t// Save the platform-specific name of the \"meta\" key\n\tthis.metaKeyName = $tw.platform.isMac ? \"cmd-\" : \"win-\";\n\tthis.shortcutKeysList = [], // Stores the shortcut-key descriptors\n\tthis.shortcutActionList = [], // Stores the corresponding action strings\n\tthis.shortcutParsedList = []; // Stores the parsed key descriptors\n\tthis.lookupNames = [\"shortcuts\"];\n\tthis.lookupNames.push($tw.platform.isMac ? \"shortcuts-mac\" : \"shortcuts-not-mac\")\n\tthis.lookupNames.push($tw.platform.isWindows ? \"shortcuts-windows\" : \"shortcuts-not-windows\");\n\tthis.lookupNames.push($tw.platform.isLinux ? \"shortcuts-linux\" : \"shortcuts-not-linux\");\n\tthis.updateShortcutLists(this.getShortcutTiddlerList());\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\tself.handleShortcutChanges(changes);\n\t});\n}\n\n/*\nReturn an array of keycodes for the modifier keys ctrl, shift, alt, meta\n*/\nKeyboardManager.prototype.getModifierKeys = function() {\n\treturn [\n\t\t16, // Shift\n\t\t17, // Ctrl\n\t\t18, // Alt\n\t\t20, // CAPS LOCK\n\t\t91, // Meta (left)\n\t\t93, // Meta (right)\n\t\t224 // Meta (Firefox)\n\t]\n};\n\n/*\nParses a key descriptor into the structure:\n{\n\tkeyCode: numeric keycode\n\tshiftKey: boolean\n\taltKey: boolean\n\tctrlKey: boolean\n\tmetaKey: boolean\n}\nKey descriptors have the following format:\n\tctrl+enter\n\tctrl+shift+alt+A\n*/\nKeyboardManager.prototype.parseKeyDescriptor = function(keyDescriptor,options) {\n\tvar components = keyDescriptor.split(/\\+|\\-/),\n\t\tinfo = {\n\t\t\tkeyCode: 0,\n\t\t\tshiftKey: false,\n\t\t\taltKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\tfor(var t=0; t&lt;components.length; t++) {\n\t\tvar s = components[t].toLowerCase(),\n\t\t\tc = s.charCodeAt(0);\n\t\t// Look for modifier keys\n\t\tif(s === \"ctrl\") {\n\t\t\tinfo.ctrlKey = true;\n\t\t} else if(s === \"shift\") {\n\t\t\tinfo.shiftKey = true;\n\t\t} else if(s === \"alt\") {\n\t\t\tinfo.altKey = true;\n\t\t} else if(s === \"meta\" || s === \"cmd\" || s === \"win\") {\n\t\t\tinfo.metaKey = true;\n\t\t}\n\t\t// Replace named keys with their code\n\t\tif(this.namedKeys[s]) {\n\t\t\tinfo.keyCode = this.namedKeys[s];\n\t\t}\n\t}\n\tif(options.keyDescriptor) {\n\t\tinfo.keyDescriptor = options.keyDescriptor;\n\t}\n\tif(info.keyCode) {\n\t\treturn info;\n\t} else {\n\t\treturn null;\n\t}\n};\n\n/*\nParse a list of key descriptors into an array of keyInfo objects. The key descriptors can be passed as an array of strings or a space separated string\n*/\nKeyboardManager.prototype.parseKeyDescriptors = function(keyDescriptors,options) {\n\tvar self = this;\n\toptions = options || {};\n\toptions.stack = options.stack || [];\n\tvar wiki = options.wiki || $tw.wiki;\n\tif(typeof keyDescriptors === \"string\" &amp;&amp; keyDescriptors === \"\") {\n\t\treturn [];\n\t}\n\tif(!$tw.utils.isArray(keyDescriptors)) {\n\t\tkeyDescriptors = keyDescriptors.split(\" \");\n\t}\n\tvar result = [];\n\t$tw.utils.each(keyDescriptors,function(keyDescriptor) {\n\t\t// Look for a named shortcut\n\t\tif(keyDescriptor.substr(0,2) === \"((\" &amp;&amp; keyDescriptor.substr(-2,2) === \"))\") {\n\t\t\tif(options.stack.indexOf(keyDescriptor) === -1) {\n\t\t\t\toptions.stack.push(keyDescriptor);\n\t\t\t\tvar name = keyDescriptor.substring(2,keyDescriptor.length - 2),\n\t\t\t\t\tlookupName = function(configName) {\n\t\t\t\t\t\tvar keyDescriptors = wiki.getTiddlerText(\"$:/config/\" + configName + \"/\" + name);\n\t\t\t\t\t\tif(keyDescriptors) {\n\t\t\t\t\t\t\toptions.keyDescriptor = keyDescriptor;\n\t\t\t\t\t\t\tresult.push.apply(result,self.parseKeyDescriptors(keyDescriptors,options));\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t$tw.utils.each(self.lookupNames,function(platformDescriptor) {\n\t\t\t\t\tlookupName(platformDescriptor);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tresult.push(self.parseKeyDescriptor(keyDescriptor,options));\n\t\t}\n\t});\n\treturn result;\n};\n\nKeyboardManager.prototype.getPrintableShortcuts = function(keyInfoArray) {\n\tvar self = this,\n\t\tresult = [];\n\t$tw.utils.each(keyInfoArray,function(keyInfo) {\n\t\tif(keyInfo) {\n\t\t\tresult.push((keyInfo.ctrlKey ? \"ctrl-\" : \"\") + \n\t\t\t\t   (keyInfo.shiftKey ? \"shift-\" : \"\") + \n\t\t\t\t   (keyInfo.altKey ? \"alt-\" : \"\") + \n\t\t\t\t   (keyInfo.metaKey ? self.metaKeyName : \"\") + \n\t\t\t\t   (self.keyNames[keyInfo.keyCode]));\n\t\t}\n\t});\n\treturn result;\n}\n\nKeyboardManager.prototype.checkKeyDescriptor = function(event,keyInfo) {\n\treturn keyInfo &amp;&amp;\n\t\t\tevent.keyCode === keyInfo.keyCode &amp;&amp; \n\t\t\tevent.shiftKey === keyInfo.shiftKey &amp;&amp; \n\t\t\tevent.altKey === keyInfo.altKey &amp;&amp; \n\t\t\tevent.ctrlKey === keyInfo.ctrlKey &amp;&amp; \n\t\t\tevent.metaKey === keyInfo.metaKey;\n};\n\nKeyboardManager.prototype.checkKeyDescriptors = function(event,keyInfoArray) {\n\treturn (this.getMatchingKeyDescriptor(event,keyInfoArray) !== null);\n};\n\nKeyboardManager.prototype.getMatchingKeyDescriptor = function(event,keyInfoArray) {\n\tfor(var t=0; t&lt;keyInfoArray.length; t++) {\n\t\tif(this.checkKeyDescriptor(event,keyInfoArray[t])) {\n\t\t\treturn keyInfoArray[t];\n\t\t}\n\t}\n\treturn null;\n};\n\nKeyboardManager.prototype.getEventModifierKeyDescriptor = function(event) {\n\treturn event.ctrlKey &amp;&amp; !event.shiftKey\t&amp;&amp; !event.altKey &amp;&amp; !event.metaKey ? \"ctrl\" : \n\t\tevent.shiftKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.altKey &amp;&amp; !event.metaKey ? \"shift\" : \n\t\tevent.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; !event.altKey &amp;&amp; !event.metaKey ? \"ctrl-shift\" : \n\t\tevent.altKey &amp;&amp; !event.shiftKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.metaKey ? \"alt\" : \n\t\tevent.altKey &amp;&amp; event.shiftKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.metaKey ? \"alt-shift\" : \n\t\tevent.altKey &amp;&amp; event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; !event.metaKey ? \"ctrl-alt\" : \n\t\tevent.altKey &amp;&amp; event.shiftKey &amp;&amp; event.ctrlKey &amp;&amp; !event.metaKey ? \"ctrl-alt-shift\" : \n\t\tevent.metaKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; !event.altKey ? \"meta\" : \n\t\tevent.metaKey &amp;&amp; event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; !event.altKey ? \"meta-ctrl\" :\n\t\tevent.metaKey &amp;&amp; event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; !event.altKey ? \"meta-ctrl-shift\" :\n\t\tevent.metaKey &amp;&amp; event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; event.altKey ? \"meta-ctrl-alt-shift\" : \"normal\";\n};\n\nKeyboardManager.prototype.getShortcutTiddlerList = function() {\n\treturn $tw.wiki.getTiddlersWithTag(\"$:/tags/KeyboardShortcut\");\n};\n\nKeyboardManager.prototype.updateShortcutLists = function(tiddlerList) {\n\tthis.shortcutTiddlers = tiddlerList;\n\tfor(var i=0; i&lt;tiddlerList.length; i++) {\n\t\tvar title = tiddlerList[i],\n\t\t\ttiddlerFields = $tw.wiki.getTiddler(title).fields;\n\t\tthis.shortcutKeysList[i] = tiddlerFields.key !== undefined ? tiddlerFields.key : undefined;\n\t\tthis.shortcutActionList[i] = tiddlerFields.text;\n\t\tthis.shortcutParsedList[i] = this.shortcutKeysList[i] !== undefined ? this.parseKeyDescriptors(this.shortcutKeysList[i]) : undefined;\n\t}\n};\n\nKeyboardManager.prototype.handleKeydownEvent = function(event) {\n\tvar key, action;\n\tfor(var i=0; i&lt;this.shortcutTiddlers.length; i++) {\n\t\tif(this.shortcutParsedList[i] !== undefined &amp;&amp; this.checkKeyDescriptors(event,this.shortcutParsedList[i])) {\n\t\t\tkey = this.shortcutParsedList[i];\n\t\t\taction = this.shortcutActionList[i];\n\t\t}\n\t}\n\tif(key !== undefined) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\t$tw.rootWidget.invokeActionString(action,$tw.rootWidget,event);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nKeyboardManager.prototype.detectNewShortcuts = function(changedTiddlers) {\n\tvar shortcutConfigTiddlers = [],\n\t\thandled = false;\n\t$tw.utils.each(this.lookupNames,function(platformDescriptor) {\n\t\tvar descriptorString = \"$:/config/\" + platformDescriptor + \"/\";\n\t\tObject.keys(changedTiddlers).forEach(function(configTiddler) {\n\t\t\tvar configString = configTiddler.substr(0, configTiddler.lastIndexOf(\"/\") + 1);\n\t\t\tif(configString === descriptorString) {\n\t\t\t\tshortcutConfigTiddlers.push(configTiddler);\n\t\t\t\thandled = true;\n\t\t\t}\n\t\t});\n\t});\n\tif(handled) {\n\t\treturn $tw.utils.hopArray(changedTiddlers,shortcutConfigTiddlers);\n\t} else {\n\t\treturn false;\n\t}\n};\n\nKeyboardManager.prototype.handleShortcutChanges = function(changedTiddlers) {\n\tvar newList = this.getShortcutTiddlerList();\n\tvar hasChanged = $tw.utils.hopArray(changedTiddlers,this.shortcutTiddlers) ? true :\n\t\t($tw.utils.hopArray(changedTiddlers,newList) ? true :\n\t\t(this.detectNewShortcuts(changedTiddlers))\n\t);\n\t// Re-cache shortcuts if something changed\n\tif(hasChanged) {\n\t\tthis.updateShortcutLists(newList);\n\t}\n};\n\nexports.KeyboardManager = KeyboardManager;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/language.js":{"title":"$:/core/modules/language.js","text":"/*\\\ntitle: $:/core/modules/language.js\ntype: application/javascript\nmodule-type: global\n\nThe $tw.Language() manages translateable strings\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nCreate an instance of the language manager. Options include:\nwiki: wiki from which to retrieve translation tiddlers\n*/\nfunction Language(options) {\n\toptions = options || \"\";\n\tthis.wiki = options.wiki || $tw.wiki;\n}\n\n/*\nReturn a wikified translateable string. The title is automatically prefixed with \"$:/language/\"\nOptions include:\nvariables: optional hashmap of variables to supply to the language wikification\n*/\nLanguage.prototype.getString = function(title,options) {\n\toptions = options || {};\n\ttitle = \"$:/language/\" + title;\n\treturn this.wiki.renderTiddler(\"text/plain\",title,{variables: options.variables});\n};\n\n/*\nReturn a raw, unwikified translateable string. The title is automatically prefixed with \"$:/language/\"\n*/\nLanguage.prototype.getRawString = function(title) {\n\ttitle = \"$:/language/\" + title;\n\treturn this.wiki.getTiddlerText(title);\n};\n\nexports.Language = Language;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/macros/changecount.js":{"title":"$:/core/modules/macros/changecount.js","text":"/*\\\ntitle: $:/core/modules/macros/changecount.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to return the changecount for the current tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"changecount\";\n\nexports.params = [];\n\n/*\nRun the macro\n*/\nexports.run = function() {\n\treturn this.wiki.getChangeCount(this.getVariable(\"currentTiddler\")) + \"\";\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/contrastcolour.js":{"title":"$:/core/modules/macros/contrastcolour.js","text":"/*\\\ntitle: $:/core/modules/macros/contrastcolour.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to choose which of two colours has the highest contrast with a base colour\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"contrastcolour\";\n\nexports.params = [\n\t{name: \"target\"},\n\t{name: \"fallbackTarget\"},\n\t{name: \"colourA\"},\n\t{name: \"colourB\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(target,fallbackTarget,colourA,colourB) {\n\tvar rgbTarget = $tw.utils.parseCSSColor(target) || $tw.utils.parseCSSColor(fallbackTarget);\n\tif(!rgbTarget) {\n\t\treturn colourA;\n\t}\n\tvar rgbColourA = $tw.utils.parseCSSColor(colourA),\n\t\trgbColourB = $tw.utils.parseCSSColor(colourB);\n\tif(rgbColourA &amp;&amp; !rgbColourB) {\n\t\treturn rgbColourA;\n\t}\n\tif(rgbColourB &amp;&amp; !rgbColourA) {\n\t\treturn rgbColourB;\n\t}\n\tif(!rgbColourA &amp;&amp; !rgbColourB) {\n\t\t// If neither colour is readable, return a crude inverse of the target\n\t\treturn [255 - rgbTarget[0],255 - rgbTarget[1],255 - rgbTarget[2],rgbTarget[3]];\n\t}\n\t// Colour brightness formula derived from http://www.w3.org/WAI/ER/WD-AERT/#color-contrast\n\tvar brightnessTarget = rgbTarget[0] * 0.299 + rgbTarget[1] * 0.587 + rgbTarget[2] * 0.114,\n\t\tbrightnessA = rgbColourA[0] * 0.299 + rgbColourA[1] * 0.587 + rgbColourA[2] * 0.114,\n\t\tbrightnessB = rgbColourB[0] * 0.299 + rgbColourB[1] * 0.587 + rgbColourB[2] * 0.114;\n\treturn Math.abs(brightnessTarget - brightnessA) &gt; Math.abs(brightnessTarget - brightnessB) ? colourA : colourB;\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/csvtiddlers.js":{"title":"$:/core/modules/macros/csvtiddlers.js","text":"/*\\\ntitle: $:/core/modules/macros/csvtiddlers.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to output tiddlers matching a filter to CSV\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"csvtiddlers\";\n\nexports.params = [\n\t{name: \"filter\"},\n\t{name: \"format\"},\n];\n\n/*\nRun the macro\n*/\nexports.run = function(filter,format) {\n\tvar self = this,\n\t\ttiddlers = this.wiki.filterTiddlers(filter),\n\t\ttiddler,\n\t\tfields = [],\n\t\tt,f;\n\t// Collect all the fields\n\tfor(t=0;t&lt;tiddlers.length; t++) {\n\t\ttiddler = this.wiki.getTiddler(tiddlers[t]);\n\t\tfor(f in tiddler.fields) {\n\t\t\tif(fields.indexOf(f) === -1) {\n\t\t\t\tfields.push(f);\n\t\t\t}\n\t\t}\n\t}\n\t// Sort the fields and bring the standard ones to the front\n\tfields.sort();\n\t\"title text modified modifier created creator\".split(\" \").reverse().forEach(function(value,index) {\n\t\tvar p = fields.indexOf(value);\n\t\tif(p !== -1) {\n\t\t\tfields.splice(p,1);\n\t\t\tfields.unshift(value)\n\t\t}\n\t});\n\t// Output the column headings\n\tvar output = [], row = [];\n\tfields.forEach(function(value) {\n\t\trow.push(quoteAndEscape(value))\n\t});\n\toutput.push(row.join(\",\"));\n\t// Output each tiddler\n\tfor(var t=0;t&lt;tiddlers.length; t++) {\n\t\trow = [];\n\t\ttiddler = this.wiki.getTiddler(tiddlers[t]);\n\t\t\tfor(f=0; f&lt;fields.length; f++) {\n\t\t\t\trow.push(quoteAndEscape(tiddler ? tiddler.getFieldString(fields[f]) || \"\" : \"\"));\n\t\t\t}\n\t\toutput.push(row.join(\",\"));\n\t}\n\treturn output.join(\"\\n\");\n};\n\nfunction quoteAndEscape(value) {\n\treturn \"\\\"\" + value.replace(/\"/mg,\"\\\"\\\"\") + \"\\\"\";\n}\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/displayshortcuts.js":{"title":"$:/core/modules/macros/displayshortcuts.js","text":"/*\\\ntitle: $:/core/modules/macros/displayshortcuts.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to display a list of keyboard shortcuts in human readable form. Notably, it resolves named shortcuts like `((bold))` to the underlying keystrokes.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"displayshortcuts\";\n\nexports.params = [\n\t{name: \"shortcuts\"},\n\t{name: \"prefix\"},\n\t{name: \"separator\"},\n\t{name: \"suffix\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(shortcuts,prefix,separator,suffix) {\n\tvar shortcutArray = $tw.keyboardManager.getPrintableShortcuts($tw.keyboardManager.parseKeyDescriptors(shortcuts,{\n\t\twiki: this.wiki\n\t}));\n\tif(shortcutArray.length &gt; 0) {\n\t\tshortcutArray.sort(function(a,b) {\n\t\t    return a.toLowerCase().localeCompare(b.toLowerCase());\n\t\t})\n\t\treturn prefix + shortcutArray.join(separator) + suffix;\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/jsontiddler.js":{"title":"$:/core/modules/macros/jsontiddler.js","text":"/*\\\ntitle: $:/core/modules/macros/jsontiddler.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to output a single tiddler to JSON\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"jsontiddler\";\n\nexports.params = [\n\t{name: \"title\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(title) {\n\ttitle = title || this.getVariable(\"currentTiddler\");\n\tvar tiddler = !!title &amp;&amp; this.wiki.getTiddler(title),\n\t\tfields = new Object();\n\tif(tiddler) {\n\t\tfor(var field in tiddler.fields) {\n\t\t\tfields[field] = tiddler.getFieldString(field);\n\t\t}\n\t}\n\treturn JSON.stringify(fields,null,$tw.config.preferences.jsonSpaces);\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/jsontiddlers.js":{"title":"$:/core/modules/macros/jsontiddlers.js","text":"/*\\\ntitle: $:/core/modules/macros/jsontiddlers.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to output tiddlers matching a filter to JSON\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"jsontiddlers\";\n\nexports.params = [\n\t{name: \"filter\"},\n\t{name: \"spaces\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(filter,spaces) {\n\treturn this.wiki.getTiddlersAsJson(filter,$tw.utils.parseInt(spaces));\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/makedatauri.js":{"title":"$:/core/modules/macros/makedatauri.js","text":"/*\\\ntitle: $:/core/modules/macros/makedatauri.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to convert a string of text to a data URI\n\n&lt;&lt;makedatauri text:\"Text to be converted\" type:\"text/vnd.tiddlywiki\"&gt;&gt;\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"makedatauri\";\n\nexports.params = [\n\t{name: \"text\"},\n\t{name: \"type\"},\n\t{name: \"_canonical_uri\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(text,type,_canonical_uri) {\n\treturn $tw.utils.makeDataUri(text,type,_canonical_uri);\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/now.js":{"title":"$:/core/modules/macros/now.js","text":"/*\\\ntitle: $:/core/modules/macros/now.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to return a formatted version of the current time\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"now\";\n\nexports.params = [\n\t{name: \"format\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(format) {\n\treturn $tw.utils.formatDateString(new Date(),format || \"0hh:0mm, DDth MMM YYYY\");\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/qualify.js":{"title":"$:/core/modules/macros/qualify.js","text":"/*\\\ntitle: $:/core/modules/macros/qualify.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to qualify a state tiddler title according\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"qualify\";\n\nexports.params = [\n\t{name: \"title\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(title) {\n\treturn title + \"-\" + this.getStateQualifier();\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/resolvepath.js":{"title":"$:/core/modules/macros/resolvepath.js","text":"/*\\\ntitle: $:/core/modules/macros/resolvepath.js\ntype: application/javascript\nmodule-type: macro\n\nResolves a relative path for an absolute rootpath.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"resolvepath\";\n\nexports.params = [\n\t{name: \"source\"},\n\t{name: \"root\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(source, root) {\n\treturn $tw.utils.resolvePath(source, root);\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/unusedtitle.js":{"title":"$:/core/modules/macros/unusedtitle.js","text":"/*\\\ntitle: $:/core/modules/macros/unusedtitle.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to return a new title that is unused in the wiki. It can be given a name as a base.\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"unusedtitle\";\n\nexports.params = [\n\t{name: \"baseName\"},\n\t{name: \"separator\"},\n\t{name: \"template\"}\n];\n\n/*\nRun the macro\n*/\nexports.run = function(baseName,separator,template) {\n\tseparator = separator || \" \";\n\tif(!baseName) {\n\t\tbaseName = $tw.language.getString(\"DefaultNewTiddlerTitle\");\n\t}\n\t// $tw.wiki.generateNewTitle = function(baseTitle,options)\n\t// options.prefix must be a string! \n\treturn this.wiki.generateNewTitle(baseName, {\"prefix\": separator, \"template\": template});\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/macros/version.js":{"title":"$:/core/modules/macros/version.js","text":"/*\\\ntitle: $:/core/modules/macros/version.js\ntype: application/javascript\nmodule-type: macro\n\nMacro to return the TiddlyWiki core version number\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInformation about this macro\n*/\n\nexports.name = \"version\";\n\nexports.params = [];\n\n/*\nRun the macro\n*/\nexports.run = function() {\n\treturn $tw.version;\n};\n\n})();\n","type":"application/javascript","module-type":"macro"},"$:/core/modules/parsers/audioparser.js":{"title":"$:/core/modules/parsers/audioparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/audioparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe audio parser parses an audio tiddler into an embeddable HTML element\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar AudioParser = function(type,text,options) {\n\tvar element = {\n\t\t\ttype: \"element\",\n\t\t\ttag: \"audio\",\n\t\t\tattributes: {\n\t\t\t\tcontrols: {type: \"string\", value: \"controls\"},\n\t\t\t\tstyle: {type: \"string\", value: \"width: 100%; object-fit: contain\"}\n\t\t\t}\n\t\t},\n\t\tsrc;\n\tif(options._canonical_uri) {\n\t\telement.attributes.src = {type: \"string\", value: options._canonical_uri};\n\t} else if(text) {\n\t\telement.attributes.src = {type: \"string\", value: \"data:\" + type + \";base64,\" + text};\n\t}\n\tthis.tree = [element];\n};\n\nexports[\"audio/ogg\"] = AudioParser;\nexports[\"audio/mpeg\"] = AudioParser;\nexports[\"audio/mp3\"] = AudioParser;\nexports[\"audio/mp4\"] = AudioParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/binaryparser.js":{"title":"$:/core/modules/parsers/binaryparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/binaryparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe binary parser parses a binary tiddler into a warning message and download link\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar BINARY_WARNING_MESSAGE = \"$:/core/ui/BinaryWarning\";\nvar EXPORT_BUTTON_IMAGE = \"$:/core/images/export-button\";\n\nvar BinaryParser = function(type,text,options) {\n\t// Transclude the binary data tiddler warning message\n\tvar warn = {\n\t\ttype: \"element\",\n\t\ttag: \"p\",\n\t\tchildren: [{\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: BINARY_WARNING_MESSAGE}\n\t\t\t}\n\t\t}]\n\t};\n\t// Create download link based on binary tiddler title\n\tvar link = {\n\t\ttype: \"element\",\n\t\ttag: \"a\",\n\t\tattributes: {\n\t\t\ttitle: {type: \"indirect\", textReference: \"!!title\"},\n\t\t\tdownload: {type: \"indirect\", textReference: \"!!title\"}\n\t\t},\n\t\tchildren: [{\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: EXPORT_BUTTON_IMAGE}\n\t\t\t}\n\t\t}]\n\t};\n\t// Set the link href to external or internal data URI\n\tif(options._canonical_uri) {\n\t\tlink.attributes.href = {\n\t\t\ttype: \"string\", \n\t\t\tvalue: options._canonical_uri\n\t\t};\n\t} else if(text) {\n\t\tlink.attributes.href = {\n\t\t\ttype: \"string\", \n\t\t\tvalue: \"data:\" + type + \";base64,\" + text\n\t\t};\n\t}\n\t// Combine warning message and download link in a div\n\tvar element = {\n\t\ttype: \"element\",\n\t\ttag: \"div\",\n\t\tattributes: {\n\t\t\tclass: {type: \"string\", value: \"tc-binary-warning\"}\n\t\t},\n\t\tchildren: [warn, link]\n\t}\n\tthis.tree = [element];\n};\n\nexports[\"application/octet-stream\"] = BinaryParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/csvparser.js":{"title":"$:/core/modules/parsers/csvparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/csvparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe CSV text parser processes CSV files into a table wrapped in a scrollable widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar CsvParser = function(type,text,options) {\n\t// Table framework\n\tthis.tree = [{\n\t\t\"type\": \"scrollable\", \"children\": [{\n\t\t\t\"type\": \"element\", \"tag\": \"table\", \"children\": [{\n\t\t\t\t\"type\": \"element\", \"tag\": \"tbody\", \"children\": []\n\t\t\t}], \"attributes\": {\n\t\t\t\t\"class\": {\"type\": \"string\", \"value\": \"tc-csv-table\"}\n\t\t\t}\n\t\t}]\n\t}];\n\t// Split the text into lines\n\tvar lines = text.split(/\\r?\\n/mg),\n\t\ttag = \"th\";\n\tfor(var line=0; line&lt;lines.length; line++) {\n\t\tvar lineText = lines[line];\n\t\tif(lineText) {\n\t\t\tvar row = {\n\t\t\t\t\t\"type\": \"element\", \"tag\": \"tr\", \"children\": []\n\t\t\t\t};\n\t\t\tvar columns = lineText.split(\",\");\n\t\t\tfor(var column=0; column&lt;columns.length; column++) {\n\t\t\t\trow.children.push({\n\t\t\t\t\t\t\"type\": \"element\", \"tag\": tag, \"children\": [{\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": columns[column]\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t}\n\t\t\ttag = \"td\";\n\t\t\tthis.tree[0].children[0].children[0].children.push(row);\n\t\t}\n\t}\n};\n\nexports[\"text/csv\"] = CsvParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/htmlparser.js":{"title":"$:/core/modules/parsers/htmlparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/htmlparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe HTML parser displays text as raw HTML\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar HtmlParser = function(type,text,options) {\n\tvar src;\n\tif(options._canonical_uri) {\n\t\tsrc = options._canonical_uri;\n\t} else if(text) {\n\t\tsrc = \"data:text/html;charset=utf-8,\" + encodeURIComponent(text);\n\t}\n\tthis.tree = [{\n\t\ttype: \"element\",\n\t\ttag: \"iframe\",\n\t\tattributes: {\n\t\t\tsrc: {type: \"string\", value: src}\n\t\t}\n\t}];\n\tif($tw.wiki.getTiddlerText(\"$:/config/HtmlParser/DisableSandbox\",\"no\") !== \"yes\") {\n\t\tthis.tree[0].attributes.sandbox = {type: \"string\", value: $tw.wiki.getTiddlerText(\"$:/config/HtmlParser/SandboxTokens\",\"\")};\n\t}\n};\n\nexports[\"text/html\"] = HtmlParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/imageparser.js":{"title":"$:/core/modules/parsers/imageparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/imageparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe image parser parses an image into an embeddable HTML element\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar ImageParser = function(type,text,options) {\n\tvar element = {\n\t\t\ttype: \"element\",\n\t\t\ttag: \"img\",\n\t\t\tattributes: {}\n\t\t};\n\tif(options._canonical_uri) {\n\t\telement.attributes.src = {type: \"string\", value: options._canonical_uri};\n\t} else if(text) {\n\t\tif(type === \"image/svg+xml\" || type === \".svg\") {\n\t\t\telement.attributes.src = {type: \"string\", value: \"data:image/svg+xml,\" + encodeURIComponent(text)};\n\t\t} else {\n\t\t\telement.attributes.src = {type: \"string\", value: \"data:\" + type + \";base64,\" + text};\n\t\t}\n\t}\n\tthis.tree = [element];\n};\n\nexports[\"image/svg+xml\"] = ImageParser;\nexports[\"image/jpg\"] = ImageParser;\nexports[\"image/jpeg\"] = ImageParser;\nexports[\"image/png\"] = ImageParser;\nexports[\"image/gif\"] = ImageParser;\nexports[\"image/webp\"] = ImageParser;\nexports[\"image/heic\"] = ImageParser;\nexports[\"image/heif\"] = ImageParser;\nexports[\"image/x-icon\"] = ImageParser;\nexports[\"image/vnd.microsoft.icon\"] = ImageParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/utils/parseutils.js":{"title":"$:/core/modules/utils/parseutils.js","text":"/*\\\ntitle: $:/core/modules/utils/parseutils.js\ntype: application/javascript\nmodule-type: utils\n\nUtility functions concerned with parsing text into tokens.\n\nMost functions have the following pattern:\n\n* The parameters are:\n** `source`: the source string being parsed\n** `pos`: the current parse position within the string\n** Any further parameters are used to identify the token that is being parsed\n* The return value is:\n** null if the token was not found at the specified position\n** an object representing the token with the following standard fields:\n*** `type`: string indicating the type of the token\n*** `start`: start position of the token in the source string\n*** `end`: end position of the token in the source string\n*** Any further fields required to describe the token\n\nThe exception is `skipWhiteSpace`, which just returns the position after the whitespace.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nLook for a whitespace token. Returns null if not found, otherwise returns {type: \"whitespace\", start:, end:,}\n*/\nexports.parseWhiteSpace = function(source,pos) {\n\tvar p = pos,c;\n\twhile(true) {\n\t\tc = source.charAt(p);\n\t\tif((c === \" \") || (c === \"\\f\") || (c === \"\\n\") || (c === \"\\r\") || (c === \"\\t\") || (c === \"\\v\") || (c === \"\\u00a0\")) { // Ignores some obscure unicode spaces\n\t\t\tp++;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(p === pos) {\n\t\treturn null;\n\t} else {\n\t\treturn {\n\t\t\ttype: \"whitespace\",\n\t\t\tstart: pos,\n\t\t\tend: p\n\t\t}\n\t}\n};\n\n/*\nConvenience wrapper for parseWhiteSpace. Returns the position after the whitespace\n*/\nexports.skipWhiteSpace = function(source,pos) {\n\tvar c;\n\twhile(true) {\n\t\tc = source.charAt(pos);\n\t\tif((c === \" \") || (c === \"\\f\") || (c === \"\\n\") || (c === \"\\r\") || (c === \"\\t\") || (c === \"\\v\") || (c === \"\\u00a0\")) { // Ignores some obscure unicode spaces\n\t\t\tpos++;\n\t\t} else {\n\t\t\treturn pos;\n\t\t}\n\t}\n};\n\n/*\nLook for a given string token. Returns null if not found, otherwise returns {type: \"token\", value:, start:, end:,}\n*/\nexports.parseTokenString = function(source,pos,token) {\n\tvar match = source.indexOf(token,pos) === pos;\n\tif(match) {\n\t\treturn {\n\t\t\ttype: \"token\",\n\t\t\tvalue: token,\n\t\t\tstart: pos,\n\t\t\tend: pos + token.length\n\t\t};\n\t}\n\treturn null;\n};\n\n/*\nLook for a token matching a regex. Returns null if not found, otherwise returns {type: \"regexp\", match:, start:, end:,}\n*/\nexports.parseTokenRegExp = function(source,pos,reToken) {\n\tvar node = {\n\t\ttype: \"regexp\",\n\t\tstart: pos\n\t};\n\treToken.lastIndex = pos;\n\tnode.match = reToken.exec(source);\n\tif(node.match &amp;&amp; node.match.index === pos) {\n\t\tnode.end = pos + node.match[0].length;\n\t\treturn node;\n\t} else {\n\t\treturn null;\n\t}\n};\n\n/*\nLook for a string literal. Returns null if not found, otherwise returns {type: \"string\", value:, start:, end:,}\n*/\nexports.parseStringLiteral = function(source,pos) {\n\tvar node = {\n\t\ttype: \"string\",\n\t\tstart: pos\n\t};\n\tvar reString = /(?:\"\"\"([\\s\\S]*?)\"\"\"|\"([^\"]*)\")|(?:'([^']*)')/g;\n\treString.lastIndex = pos;\n\tvar match = reString.exec(source);\n\tif(match &amp;&amp; match.index === pos) {\n\t\tnode.value = match[1] !== undefined ? match[1] :(\n\t\t\tmatch[2] !== undefined ? match[2] : match[3] \n\t\t\t\t\t);\n\t\tnode.end = pos + match[0].length;\n\t\treturn node;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexports.parseMacroParameters = function(node,source,pos) {\n\t// Process parameters\n\tvar parameter = $tw.utils.parseMacroParameter(source,pos);\n\twhile(parameter) {\n\t\tnode.params.push(parameter);\n\t\tpos = parameter.end;\n\t\t// Get the next parameter\n\t\tparameter = $tw.utils.parseMacroParameter(source,pos);\n\t}\n\tnode.end = pos;\n\treturn node;\n}\n\n/*\nLook for a macro invocation parameter. Returns null if not found, or {type: \"macro-parameter\", name:, value:, start:, end:}\n*/\nexports.parseMacroParameter = function(source,pos) {\n\tvar node = {\n\t\ttype: \"macro-parameter\",\n\t\tstart: pos\n\t};\n\t// Define our regexp\n\tvar reMacroParameter = /(?:([A-Za-z0-9\\-_]+)\\s*:)?(?:\\s*(?:\"\"\"([\\s\\S]*?)\"\"\"|\"([^\"]*)\"|'([^']*)'|\\[\\[([^\\]]*)\\]\\]|((?:(?:&gt;(?!&gt;))|[^\\s&gt;\"'])+)))/g;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for the parameter\n\tvar token = $tw.utils.parseTokenRegExp(source,pos,reMacroParameter);\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Get the parameter details\n\tnode.value = token.match[2] !== undefined ? token.match[2] : (\n\t\t\t\t\ttoken.match[3] !== undefined ? token.match[3] : (\n\t\t\t\t\t\ttoken.match[4] !== undefined ? token.match[4] : (\n\t\t\t\t\t\t\ttoken.match[5] !== undefined ? token.match[5] : (\n\t\t\t\t\t\t\t\ttoken.match[6] !== undefined ? token.match[6] : (\n\t\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\tif(token.match[1]) {\n\t\tnode.name = token.match[1];\n\t}\n\t// Update the end position\n\tnode.end = pos;\n\treturn node;\n};\n\n/*\nLook for a macro invocation. Returns null if not found, or {type: \"macrocall\", name:, parameters:, start:, end:}\n*/\nexports.parseMacroInvocation = function(source,pos) {\n\tvar node = {\n\t\ttype: \"macrocall\",\n\t\tstart: pos,\n\t\tparams: []\n\t};\n\t// Define our regexps\n\tvar reMacroName = /([^\\s&gt;\"'=]+)/g;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for a double less than sign\n\tvar token = $tw.utils.parseTokenString(source,pos,\"&lt;&lt;\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Get the macro name\n\tvar name = $tw.utils.parseTokenRegExp(source,pos,reMacroName);\n\tif(!name) {\n\t\treturn null;\n\t}\n\tnode.name = name.match[1];\n\tpos = name.end;\n\tnode = $tw.utils.parseMacroParameters(node,source,pos);\n\tpos = node.end;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for a double greater than sign\n\ttoken = $tw.utils.parseTokenString(source,pos,\"&gt;&gt;\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Update the end position\n\tnode.end = pos;\n\treturn node;\n};\n\nexports.parseFilterVariable = function(source) {\n\tvar node = {\n\t\t\tname: \"\",\n\t\t\tparams: [],\n\t\t},\n\t\tpos = 0,\n\t\treName = /([^\\s\"']+)/g;\n\t// If there is no whitespace or it is an empty string then there are no macro parameters\n\tif(/^\\S*$/.test(source)) {\n\t\tnode.name = source;\n\t\treturn node;\n\t}\n\t// Get the variable name\n\tvar nameMatch = $tw.utils.parseTokenRegExp(source,pos,reName);\n\tif(nameMatch) {\n\t\tnode.name = nameMatch.match[1];\n\t\tpos = nameMatch.end;\n\t\tnode = $tw.utils.parseMacroParameters(node,source,pos);\n\t\tdelete node.end;\n\t}\n\treturn node;\n};\n\n/*\nLook for an HTML attribute definition. Returns null if not found, otherwise returns {type: \"attribute\", name:, valueType: \"string|indirect|macro\", value:, start:, end:,}\n*/\nexports.parseAttribute = function(source,pos) {\n\tvar node = {\n\t\tstart: pos\n\t};\n\t// Define our regexps\n\tvar reAttributeName = /([^\\/\\s&gt;\"'=]+)/g,\n\t\treUnquotedAttribute = /([^\\/\\s&lt;&gt;\"'=]+)/g,\n\t\treFilteredValue = /\\{\\{\\{(.+?)\\}\\}\\}/g,\n\t\treIndirectValue = /\\{\\{([^\\}]+)\\}\\}/g;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Get the attribute name\n\tvar name = $tw.utils.parseTokenRegExp(source,pos,reAttributeName);\n\tif(!name) {\n\t\treturn null;\n\t}\n\tnode.name = name.match[1];\n\tpos = name.end;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for an equals sign\n\tvar token = $tw.utils.parseTokenString(source,pos,\"=\");\n\tif(token) {\n\t\tpos = token.end;\n\t\t// Skip whitespace\n\t\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t\t// Look for a string literal\n\t\tvar stringLiteral = $tw.utils.parseStringLiteral(source,pos);\n\t\tif(stringLiteral) {\n\t\t\tpos = stringLiteral.end;\n\t\t\tnode.type = \"string\";\n\t\t\tnode.value = stringLiteral.value;\n\t\t} else {\n\t\t\t// Look for a filtered value\n\t\t\tvar filteredValue = $tw.utils.parseTokenRegExp(source,pos,reFilteredValue);\n\t\t\tif(filteredValue) {\n\t\t\t\tpos = filteredValue.end;\n\t\t\t\tnode.type = \"filtered\";\n\t\t\t\tnode.filter = filteredValue.match[1];\n\t\t\t} else {\n\t\t\t\t// Look for an indirect value\n\t\t\t\tvar indirectValue = $tw.utils.parseTokenRegExp(source,pos,reIndirectValue);\n\t\t\t\tif(indirectValue) {\n\t\t\t\t\tpos = indirectValue.end;\n\t\t\t\t\tnode.type = \"indirect\";\n\t\t\t\t\tnode.textReference = indirectValue.match[1];\n\t\t\t\t} else {\n\t\t\t\t\t// Look for a unquoted value\n\t\t\t\t\tvar unquotedValue = $tw.utils.parseTokenRegExp(source,pos,reUnquotedAttribute);\n\t\t\t\t\tif(unquotedValue) {\n\t\t\t\t\t\tpos = unquotedValue.end;\n\t\t\t\t\t\tnode.type = \"string\";\n\t\t\t\t\t\tnode.value = unquotedValue.match[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Look for a macro invocation value\n\t\t\t\t\t\tvar macroInvocation = $tw.utils.parseMacroInvocation(source,pos);\n\t\t\t\t\t\tif(macroInvocation) {\n\t\t\t\t\t\t\tpos = macroInvocation.end;\n\t\t\t\t\t\t\tnode.type = \"macro\";\n\t\t\t\t\t\t\tnode.value = macroInvocation;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode.type = \"string\";\n\t\t\t\t\t\t\tnode.value = \"true\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tnode.type = \"string\";\n\t\tnode.value = \"true\";\n\t}\n\t// Update the end position\n\tnode.end = pos;\n\treturn node;\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/parsers/pdfparser.js":{"title":"$:/core/modules/parsers/pdfparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/pdfparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe PDF parser embeds a PDF viewer\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar ImageParser = function(type,text,options) {\n\tvar element = {\n\t\t\ttype: \"element\",\n\t\t\ttag: \"embed\",\n\t\t\tattributes: {}\n\t\t},\n\t\tsrc;\n\tif(options._canonical_uri) {\n\t\telement.attributes.src = {type: \"string\", value: options._canonical_uri};\n\t} else if(text) {\n\t\telement.attributes.src = {type: \"string\", value: \"data:application/pdf;base64,\" + text};\n\t}\n\tthis.tree = [element];\n};\n\nexports[\"application/pdf\"] = ImageParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/textparser.js":{"title":"$:/core/modules/parsers/textparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/textparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe plain text parser processes blocks of source text into a degenerate parse tree consisting of a single text node\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar TextParser = function(type,text,options) {\n\tthis.tree = [{\n\t\ttype: \"codeblock\",\n\t\tattributes: {\n\t\t\tcode: {type: \"string\", value: text},\n\t\t\tlanguage: {type: \"string\", value: type}\n\t\t}\n\t}];\n};\n\nexports[\"text/plain\"] = TextParser;\nexports[\"text/x-tiddlywiki\"] = TextParser;\nexports[\"application/javascript\"] = TextParser;\nexports[\"application/json\"] = TextParser;\nexports[\"text/css\"] = TextParser;\nexports[\"application/x-tiddler-dictionary\"] = TextParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/videoparser.js":{"title":"$:/core/modules/parsers/videoparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/videoparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe video parser parses a video tiddler into an embeddable HTML element\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar VideoParser = function(type,text,options) {\n\tvar element = {\n\t\t\ttype: \"element\",\n\t\t\ttag: \"video\",\n\t\t\tattributes: {\n\t\t\t\tcontrols: {type: \"string\", value: \"controls\"},\n\t\t\t\tstyle: {type: \"string\", value: \"width: 100%; object-fit: contain\"}\n\t\t\t}\n\t\t},\n\t\tsrc;\n\tif(options._canonical_uri) {\n\t\telement.attributes.src = {type: \"string\", value: options._canonical_uri};\n\t} else if(text) {\n\t\telement.attributes.src = {type: \"string\", value: \"data:\" + type + \";base64,\" + text};\n\t}\n\tthis.tree = [element];\n};\n\nexports[\"video/ogg\"] = VideoParser;\nexports[\"video/webm\"] = VideoParser;\nexports[\"video/mp4\"] = VideoParser;\nexports[\"video/quicktime\"] = VideoParser;\n\n})();\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/wikiparser/rules/codeblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/codeblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/codeblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for code blocks. For example:\n\n```\n\t```\n\tThis text will not be //wikified//\n\t```\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"codeblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match and get language if defined\n\tthis.matchRegExp = /```([\\w-]*)\\r?\\n/mg;\n};\n\nexports.parse = function() {\n\tvar reEnd = /(\\r?\\n```$)/mg;\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Look for the end of the block\n\treEnd.lastIndex = this.parser.pos;\n\tvar match = reEnd.exec(this.parser.source),\n\t\ttext;\n\t// Process the block\n\tif(match) {\n\t\ttext = this.parser.source.substring(this.parser.pos,match.index);\n\t\tthis.parser.pos = match.index + match[0].length;\n\t} else {\n\t\ttext = this.parser.source.substr(this.parser.pos);\n\t\tthis.parser.pos = this.parser.sourceLength;\n\t}\n\t// Return the $codeblock widget\n\treturn [{\n\t\t\ttype: \"codeblock\",\n\t\t\tattributes: {\n\t\t\t\t\tcode: {type: \"string\", value: text},\n\t\t\t\t\tlanguage: {type: \"string\", value: this.match[1]}\n\t\t\t}\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/codeinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/codeinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/codeinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for code runs. For example:\n\n```\n\tThis is a `code run`.\n\tThis is another ``code run``\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"codeinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /(``?)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\tvar reEnd = new RegExp(this.match[1], \"mg\");\n\t// Look for the end marker\n\treEnd.lastIndex = this.parser.pos;\n\tvar match = reEnd.exec(this.parser.source),\n\t\ttext;\n\t// Process the text\n\tif(match) {\n\t\ttext = this.parser.source.substring(this.parser.pos,match.index);\n\t\tthis.parser.pos = match.index + match[0].length;\n\t} else {\n\t\ttext = this.parser.source.substr(this.parser.pos);\n\t\tthis.parser.pos = this.parser.sourceLength;\n\t}\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"code\",\n\t\tchildren: [{\n\t\t\ttype: \"text\",\n\t\t\ttext: text\n\t\t}]\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/commentblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/commentblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/commentblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for HTML comments. For example:\n\n```\n&lt;!-- This is a comment --&gt;\n\\define macroX()\n&lt;!-- This is a comment --&gt;\nxxxx\n\\end\n&lt;!-- This is a comment --&gt;\n\n```\n\nNote that the syntax for comments is simplified to an opening \"&lt;!--\" sequence and a closing \"--&gt;\" sequence -- HTML itself implements a more complex format (see http://ostermiller.org/findhtmlcomment.html)\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"commentblock\";\nexports.types = {block:true, pragma:true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\tthis.matchRegExp = /&lt;!--/mg;\n\tthis.endMatchRegExp = /--&gt;/mg;\n};\n\nexports.findNextMatch = function(startPos) {\n\tthis.matchRegExp.lastIndex = startPos;\n\tthis.match = this.matchRegExp.exec(this.parser.source);\n\tif(this.match) {\n\t\tthis.endMatchRegExp.lastIndex = this.match.index + this.match[0].length;\n\t\tthis.endMatch = this.endMatchRegExp.exec(this.parser.source);\n\t\tif(this.endMatch) {\n\t\t\treturn this.match.index;\n\t\t}\n\t}\n\treturn undefined;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.endMatchRegExp.lastIndex;\n\t// Don't return any elements\n\treturn [];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/commentinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/commentinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/commentinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for HTML comments. For example:\n\n```\n&lt;!-- This is a comment --&gt;\n```\n\nNote that the syntax for comments is simplified to an opening \"&lt;!--\" sequence and a closing \"--&gt;\" sequence -- HTML itself implements a more complex format (see http://ostermiller.org/findhtmlcomment.html)\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"commentinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\tthis.matchRegExp = /&lt;!--/mg;\n\tthis.endMatchRegExp = /--&gt;/mg;\n};\n\nexports.findNextMatch = function(startPos) {\n\tthis.matchRegExp.lastIndex = startPos;\n\tthis.match = this.matchRegExp.exec(this.parser.source);\n\tif(this.match) {\n\t\tthis.endMatchRegExp.lastIndex = this.match.index + this.match[0].length;\n\t\tthis.endMatch = this.endMatchRegExp.exec(this.parser.source);\n\t\tif(this.endMatch) {\n\t\t\treturn this.match.index;\n\t\t}\n\t}\n\treturn undefined;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.endMatchRegExp.lastIndex;\n\t// Don't return any elements\n\treturn [];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/dash.js":{"title":"$:/core/modules/parsers/wikiparser/rules/dash.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/dash.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for dashes. For example:\n\n```\nThis is an en-dash: --\n\nThis is an em-dash: ---\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"dash\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /-{2,3}(?!-)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\tvar dash = this.match[0].length === 2 ? \"&amp;ndash;\" : \"&amp;mdash;\";\n\treturn [{\n\t\ttype: \"entity\",\n\t\tentity: dash\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/bold.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/bold.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/bold.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - bold. For example:\n\n```\n\tThis is ''bold'' text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except bold \n\\rules only bold \n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"bold\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /''/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/''/mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"strong\",\n\t\tchildren: tree\n\t}];\n};\n\n})();","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/italic.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/italic.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/italic.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - italic. For example:\n\n```\n\tThis is //italic// text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except italic\n\\rules only italic\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"italic\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\/\\//mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/\\/\\//mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"em\",\n\t\tchildren: tree\n\t}];\n};\n\n})();","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/strikethrough.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/strikethrough.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/strikethrough.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - strikethrough. For example:\n\n```\n\tThis is ~~strikethrough~~ text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except strikethrough \n\\rules only strikethrough \n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"strikethrough\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /~~/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/~~/mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"strike\",\n\t\tchildren: tree\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/subscript.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/subscript.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/subscript.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - subscript. For example:\n\n```\n\tThis is ,,subscript,, text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except subscript \n\\rules only subscript \n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"subscript\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /,,/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/,,/mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"sub\",\n\t\tchildren: tree\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/superscript.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/superscript.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/superscript.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - superscript. For example:\n\n```\n\tThis is ^^superscript^^ text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except superscript \n\\rules only superscript \n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"superscript\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\^\\^/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/\\^\\^/mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"sup\",\n\t\tchildren: tree\n\t}];\n};\n\n})();","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/emphasis/underscore.js":{"title":"$:/core/modules/parsers/wikiparser/rules/emphasis/underscore.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/emphasis/underscore.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for emphasis - underscore. For example:\n\n```\n\tThis is __underscore__ text\n```\n\nThis wikiparser can be modified using the rules eg:\n\n```\n\\rules except underscore \n\\rules only underscore\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"underscore\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /__/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\n\t// Parse the run including the terminator\n\tvar tree = this.parser.parseInlineRun(/__/mg,{eatTerminator: true});\n\n\t// Return the classed span\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"u\",\n\t\tchildren: tree\n\t}];\n};\n\n})();","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/entity.js":{"title":"$:/core/modules/parsers/wikiparser/rules/entity.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/entity.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for HTML entities. For example:\n\n```\n\tThis is a copyright symbol: &amp;copy;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"entity\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /(&amp;#?[a-zA-Z0-9]{2,8};)/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Get all the details of the match\n\tvar entityString = this.match[1];\n\t// Move past the macro call\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Return the entity\n\treturn [{type: \"entity\", entity: this.match[0]}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/extlink.js":{"title":"$:/core/modules/parsers/wikiparser/rules/extlink.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/extlink.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for external links. For example:\n\n```\nAn external link: https://www.tiddlywiki.com/\n\nA suppressed external link: ~http://www.tiddlyspace.com/\n```\n\nExternal links can be suppressed by preceding them with `~`.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"extlink\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /~?(?:file|http|https|mailto|ftp|irc|news|data|skype):[^\\s&lt;&gt;{}\\[\\]`|\"\\\\^]+(?:\\/|\\b)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Create the link unless it is suppressed\n\tif(this.match[0].substr(0,1) === \"~\") {\n\t\treturn [{type: \"text\", text: this.match[0].substr(1)}];\n\t} else {\n\t\treturn [{\n\t\t\ttype: \"element\",\n\t\t\ttag: \"a\",\n\t\t\tattributes: {\n\t\t\t\thref: {type: \"string\", value: this.match[0]},\n\t\t\t\t\"class\": {type: \"string\", value: \"tc-tiddlylink-external\"},\n\t\t\t\ttarget: {type: \"string\", value: \"_blank\"},\n\t\t\t\trel: {type: \"string\", value: \"noopener noreferrer\"}\n\t\t\t},\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\", text: this.match[0]\n\t\t\t}]\n\t\t}];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/filteredtranscludeblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/filteredtranscludeblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/filteredtranscludeblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for block-level filtered transclusion. For example:\n\n```\n{{{ [tag[docs]] }}}\n{{{ [tag[docs]] |tooltip}}}\n{{{ [tag[docs]] ||TemplateTitle}}}\n{{{ [tag[docs]] |tooltip||TemplateTitle}}}\n{{{ [tag[docs]] }}width:40;height:50;}.class.class\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"filteredtranscludeblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\{\\{\\{([^\\|]+?)(?:\\|([^\\|\\{\\}]+))?(?:\\|\\|([^\\|\\{\\}]+))?\\}\\}([^\\}]*)\\}(?:\\.(\\S+))?(?:\\r?\\n|$)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Get the match details\n\tvar filter = this.match[1],\n\t\ttooltip = this.match[2],\n\t\ttemplate = $tw.utils.trim(this.match[3]),\n\t\tstyle = this.match[4],\n\t\tclasses = this.match[5];\n\t// Return the list widget\n\tvar node = {\n\t\ttype: \"list\",\n\t\tattributes: {\n\t\t\tfilter: {type: \"string\", value: filter}\n\t\t},\n\t\tisBlock: true\n\t};\n\tif(tooltip) {\n\t\tnode.attributes.tooltip = {type: \"string\", value: tooltip};\n\t}\n\tif(template) {\n\t\tnode.attributes.template = {type: \"string\", value: template};\n\t}\n\tif(style) {\n\t\tnode.attributes.style = {type: \"string\", value: style};\n\t}\n\tif(classes) {\n\t\tnode.attributes.itemClass = {type: \"string\", value: classes.split(\".\").join(\" \")};\n\t}\n\treturn [node];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/filteredtranscludeinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/filteredtranscludeinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/filteredtranscludeinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for inline filtered transclusion. For example:\n\n```\n{{{ [tag[docs]] }}}\n{{{ [tag[docs]] |tooltip}}}\n{{{ [tag[docs]] ||TemplateTitle}}}\n{{{ [tag[docs]] |tooltip||TemplateTitle}}}\n{{{ [tag[docs]] }}width:40;height:50;}.class.class\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"filteredtranscludeinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\{\\{\\{([^\\|]+?)(?:\\|([^\\|\\{\\}]+))?(?:\\|\\|([^\\|\\{\\}]+))?\\}\\}([^\\}]*)\\}(?:\\.(\\S+))?/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Get the match details\n\tvar filter = this.match[1],\n\t\ttooltip = this.match[2],\n\t\ttemplate = $tw.utils.trim(this.match[3]),\n\t\tstyle = this.match[4],\n\t\tclasses = this.match[5];\n\t// Return the list widget\n\tvar node = {\n\t\ttype: \"list\",\n\t\tattributes: {\n\t\t\tfilter: {type: \"string\", value: filter}\n\t\t}\n\t};\n\tif(tooltip) {\n\t\tnode.attributes.tooltip = {type: \"string\", value: tooltip};\n\t}\n\tif(template) {\n\t\tnode.attributes.template = {type: \"string\", value: template};\n\t}\n\tif(style) {\n\t\tnode.attributes.style = {type: \"string\", value: style};\n\t}\n\tif(classes) {\n\t\tnode.attributes.itemClass = {type: \"string\", value: classes.split(\".\").join(\" \")};\n\t}\n\treturn [node];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/hardlinebreaks.js":{"title":"$:/core/modules/parsers/wikiparser/rules/hardlinebreaks.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/hardlinebreaks.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for marking areas with hard line breaks. For example:\n\n```\n\"\"\"\nThis is some text\nThat is set like\nIt is a Poem\nWhen it is\nClearly\nNot\n\"\"\"\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"hardlinebreaks\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\"\"\"(?:\\r?\\n)?/mg;\n};\n\nexports.parse = function() {\n\tvar reEnd = /(\"\"\")|(\\r?\\n)/mg,\n\t\ttree = [],\n\t\tmatch;\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\tdo {\n\t\t// Parse the run up to the terminator\n\t\ttree.push.apply(tree,this.parser.parseInlineRun(reEnd,{eatTerminator: false}));\n\t\t// Redo the terminator match\n\t\treEnd.lastIndex = this.parser.pos;\n\t\tmatch = reEnd.exec(this.parser.source);\n\t\tif(match) {\n\t\t\tthis.parser.pos = reEnd.lastIndex;\n\t\t\t// Add a line break if the terminator was a line break\n\t\t\tif(match[2]) {\n\t\t\t\ttree.push({type: \"element\", tag: \"br\"});\n\t\t\t}\n\t\t}\n\t} while(match &amp;&amp; !match[1]);\n\t// Return the nodes\n\treturn tree;\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/heading.js":{"title":"$:/core/modules/parsers/wikiparser/rules/heading.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/heading.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for headings\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"heading\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /(!{1,6})/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Get all the details of the match\n\tvar headingLevel = this.match[1].length;\n\t// Move past the !s\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse any classes, whitespace and then the heading itself\n\tvar classes = this.parser.parseClasses();\n\tthis.parser.skipWhitespace({treatNewlinesAsNonWhitespace: true});\n\tvar tree = this.parser.parseInlineRun(/(\\r?\\n)/mg);\n\t// Return the heading\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"h\" + headingLevel, \n\t\tattributes: {\n\t\t\t\"class\": {type: \"string\", value: classes.join(\" \")}\n\t\t},\n\t\tchildren: tree\n\t}];\n};\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/horizrule.js":{"title":"$:/core/modules/parsers/wikiparser/rules/horizrule.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/horizrule.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for rules. For example:\n\n```\n---\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"horizrule\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /-{3,}\\r?(?:\\n|$)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\treturn [{type: \"element\", tag: \"hr\"}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/html.js":{"title":"$:/core/modules/parsers/wikiparser/rules/html.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/html.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki rule for HTML elements and widgets. For example:\n\n{{{\n&lt;aside&gt;\nThis is an HTML5 aside element\n&lt;/aside&gt;\n\n&lt;$slider target=\"MyTiddler\"&gt;\nThis is a widget invocation\n&lt;/$slider&gt;\n\n}}}\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"html\";\nexports.types = {inline: true, block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n};\n\nexports.findNextMatch = function(startPos) {\n\t// Find the next tag\n\tthis.nextTag = this.findNextTag(this.parser.source,startPos,{\n\t\trequireLineBreak: this.is.block\n\t});\n\treturn this.nextTag ? this.nextTag.start : undefined;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Retrieve the most recent match so that recursive calls don't overwrite it\n\tvar tag = this.nextTag;\n\tthis.nextTag = null;\n\t// Advance the parser position to past the tag\n\tthis.parser.pos = tag.end;\n\t// Check for an immediately following double linebreak\n\tvar hasLineBreak = !tag.isSelfClosing &amp;&amp; !!$tw.utils.parseTokenRegExp(this.parser.source,this.parser.pos,/([^\\S\\n\\r]*\\r?\\n(?:[^\\S\\n\\r]*\\r?\\n|$))/g);\n\t// Set whether we're in block mode\n\ttag.isBlock = this.is.block || hasLineBreak;\n\t// Parse the body if we need to\n\tif(!tag.isSelfClosing &amp;&amp; $tw.config.htmlVoidElements.indexOf(tag.tag) === -1) {\n\t\tvar reEndString = \"&lt;/\" + $tw.utils.escapeRegExp(tag.tag) + \"&gt;\";\n\t\tif(hasLineBreak) {\n\t\t\ttag.children = this.parser.parseBlocks(reEndString);\n\t\t} else {\n\t\t\tvar reEnd = new RegExp(\"(\" + reEndString + \")\",\"mg\");\n\t\t\ttag.children = this.parser.parseInlineRun(reEnd,{eatTerminator: true});\n\t\t}\n\t}\n\t// Return the tag\n\treturn [tag];\n};\n\n/*\nLook for an HTML tag. Returns null if not found, otherwise returns {type: \"element\", name:, attributes: [], isSelfClosing:, start:, end:,}\n*/\nexports.parseTag = function(source,pos,options) {\n\toptions = options || {};\n\tvar token,\n\t\tnode = {\n\t\t\ttype: \"element\",\n\t\t\tstart: pos,\n\t\t\tattributes: {}\n\t\t};\n\t// Define our regexps\n\tvar reTagName = /([a-zA-Z0-9\\-\\$]+)/g;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for a less than sign\n\ttoken = $tw.utils.parseTokenString(source,pos,\"&lt;\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Get the tag name\n\ttoken = $tw.utils.parseTokenRegExp(source,pos,reTagName);\n\tif(!token) {\n\t\treturn null;\n\t}\n\tnode.tag = token.match[1];\n\tif(node.tag.slice(1).indexOf(\"$\") !== -1) {\n\t\treturn null;\n\t}\n\tif(node.tag.charAt(0) === \"$\") {\n\t\tnode.type = node.tag.substr(1);\n\t}\n\tpos = token.end;\n\t// Check that the tag is terminated by a space, / or &gt;\n\tif(!$tw.utils.parseWhiteSpace(source,pos) &amp;&amp; !(source.charAt(pos) === \"/\") &amp;&amp; !(source.charAt(pos) === \"&gt;\") ) {\n\t\treturn null;\n\t}\n\t// Process attributes\n\tvar attribute = $tw.utils.parseAttribute(source,pos);\n\twhile(attribute) {\n\t\tnode.attributes[attribute.name] = attribute;\n\t\tpos = attribute.end;\n\t\t// Get the next attribute\n\t\tattribute = $tw.utils.parseAttribute(source,pos);\n\t}\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for a closing slash\n\ttoken = $tw.utils.parseTokenString(source,pos,\"/\");\n\tif(token) {\n\t\tpos = token.end;\n\t\tnode.isSelfClosing = true;\n\t}\n\t// Look for a greater than sign\n\ttoken = $tw.utils.parseTokenString(source,pos,\"&gt;\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Check for a required line break\n\tif(options.requireLineBreak) {\n\t\ttoken = $tw.utils.parseTokenRegExp(source,pos,/([^\\S\\n\\r]*\\r?\\n(?:[^\\S\\n\\r]*\\r?\\n|$))/g);\n\t\tif(!token) {\n\t\t\treturn null;\n\t\t}\n\t}\n\t// Update the end position\n\tnode.end = pos;\n\treturn node;\n};\n\nexports.findNextTag = function(source,pos,options) {\n\t// A regexp for finding candidate HTML tags\n\tvar reLookahead = /&lt;([a-zA-Z\\-\\$]+)/g;\n\t// Find the next candidate\n\treLookahead.lastIndex = pos;\n\tvar match = reLookahead.exec(source);\n\twhile(match) {\n\t\t// Try to parse the candidate as a tag\n\t\tvar tag = this.parseTag(source,match.index,options);\n\t\t// Return success\n\t\tif(tag &amp;&amp; this.isLegalTag(tag)) {\n\t\t\treturn tag;\n\t\t}\n\t\t// Look for the next match\n\t\treLookahead.lastIndex = match.index + 1;\n\t\tmatch = reLookahead.exec(source);\n\t}\n\t// Failed\n\treturn null;\n};\n\nexports.isLegalTag = function(tag) {\n\t// Widgets are always OK\n\tif(tag.type !== \"element\") {\n\t\treturn true;\n\t// If it's an HTML tag that starts with a dash then it's not legal\n\t} else if(tag.tag.charAt(0) === \"-\") {\n\t\treturn false;\n\t} else {\n\t\t// Otherwise it's OK\n\t\treturn true;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/image.js":{"title":"$:/core/modules/parsers/wikiparser/rules/image.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/image.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for embedding images. For example:\n\n```\n[img[https://tiddlywiki.com/fractalveg.jpg]]\n[img width=23 height=24 [https://tiddlywiki.com/fractalveg.jpg]]\n[img width={{!!width}} height={{!!height}} [https://tiddlywiki.com/fractalveg.jpg]]\n[img[Description of image|https://tiddlywiki.com/fractalveg.jpg]]\n[img[TiddlerTitle]]\n[img[Description of image|TiddlerTitle]]\n```\n\nGenerates the `&lt;$image&gt;` widget.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"image\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n};\n\nexports.findNextMatch = function(startPos) {\n\t// Find the next tag\n\tthis.nextImage = this.findNextImage(this.parser.source,startPos);\n\treturn this.nextImage ? this.nextImage.start : undefined;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.nextImage.end;\n\tvar node = {\n\t\ttype: \"image\",\n\t\tattributes: this.nextImage.attributes\n\t};\n\treturn [node];\n};\n\n/*\nFind the next image from the current position\n*/\nexports.findNextImage = function(source,pos) {\n\t// A regexp for finding candidate HTML tags\n\tvar reLookahead = /(\\[img)/g;\n\t// Find the next candidate\n\treLookahead.lastIndex = pos;\n\tvar match = reLookahead.exec(source);\n\twhile(match) {\n\t\t// Try to parse the candidate as a tag\n\t\tvar tag = this.parseImage(source,match.index);\n\t\t// Return success\n\t\tif(tag) {\n\t\t\treturn tag;\n\t\t}\n\t\t// Look for the next match\n\t\treLookahead.lastIndex = match.index + 1;\n\t\tmatch = reLookahead.exec(source);\n\t}\n\t// Failed\n\treturn null;\n};\n\n/*\nLook for an image at the specified position. Returns null if not found, otherwise returns {type: \"image\", attributes: [], isSelfClosing:, start:, end:,}\n*/\nexports.parseImage = function(source,pos) {\n\tvar token,\n\t\tnode = {\n\t\t\ttype: \"image\",\n\t\t\tstart: pos,\n\t\t\tattributes: {}\n\t\t};\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for the `[img`\n\ttoken = $tw.utils.parseTokenString(source,pos,\"[img\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Process attributes\n\tif(source.charAt(pos) !== \"[\") {\n\t\tvar attribute = $tw.utils.parseAttribute(source,pos);\n\t\twhile(attribute) {\n\t\t\tnode.attributes[attribute.name] = attribute;\n\t\t\tpos = attribute.end;\n\t\t\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t\t\tif(source.charAt(pos) !== \"[\") {\n\t\t\t\t// Get the next attribute\n\t\t\t\tattribute = $tw.utils.parseAttribute(source,pos);\n\t\t\t} else {\n\t\t\t\tattribute = null;\n\t\t\t}\n\t\t}\n\t}\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for the `[` after the attributes\n\ttoken = $tw.utils.parseTokenString(source,pos,\"[\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Get the source up to the terminating `]]`\n\ttoken = $tw.utils.parseTokenRegExp(source,pos,/(?:([^|\\]]*?)\\|)?([^\\]]+?)\\]\\]/g);\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\tif(token.match[1]) {\n\t\tnode.attributes.tooltip = {type: \"string\", value: token.match[1].trim()};\n\t}\n\tnode.attributes.source = {type: \"string\", value: (token.match[2] || \"\").trim()};\n\t// Update the end position\n\tnode.end = pos;\n\treturn node;\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/import.js":{"title":"$:/core/modules/parsers/wikiparser/rules/import.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/import.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki pragma rule for importing variable definitions\n\n```\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"import\";\nexports.types = {pragma: true};\n\n/*\nInstantiate parse rule\n*/\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /^\\\\import[^\\S\\n]/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\tvar self = this;\n\t// Move past the pragma invocation\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse the filter terminated by a line break\n\tvar reMatch = /(.*)(?:$|\\r?\\n)/mg;\n\treMatch.lastIndex = this.parser.pos;\n\tvar match = reMatch.exec(this.parser.source);\n\tthis.parser.pos = reMatch.lastIndex;\n\t// Parse tree nodes to return\n\treturn [{\n\t\ttype: \"importvariables\",\n\t\tattributes: {\n\t\t\tfilter: {type: \"string\", value: match[1]}\n\t\t},\n\t\tchildren: []\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/list.js":{"title":"$:/core/modules/parsers/wikiparser/rules/list.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/list.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for lists. For example:\n\n```\n* This is an unordered list\n* It has two items\n\n# This is a numbered list\n## With a subitem\n# And a third item\n\n; This is a term that is being defined\n: This is the definition of that term\n```\n\nNote that lists can be nested arbitrarily:\n\n```\n#** One\n#* Two\n#** Three\n#**** Four\n#**# Five\n#**## Six\n## Seven\n### Eight\n## Nine\n```\n\nA CSS class can be applied to a list item as follows:\n\n```\n* List item one\n*.active List item two has the class `active`\n* List item three\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"list\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /([\\*#;:&gt;]+)/mg;\n};\n\nvar listTypes = {\n\t\"*\": {listTag: \"ul\", itemTag: \"li\"},\n\t\"#\": {listTag: \"ol\", itemTag: \"li\"},\n\t\";\": {listTag: \"dl\", itemTag: \"dt\"},\n\t\":\": {listTag: \"dl\", itemTag: \"dd\"},\n\t\"&gt;\": {listTag: \"blockquote\", itemTag: \"div\"}\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Array of parse tree nodes for the previous row of the list\n\tvar listStack = [];\n\t// Cycle through the items in the list\n\twhile(true) {\n\t\t// Match the list marker\n\t\tvar reMatch = /([\\*#;:&gt;]+)/mg;\n\t\treMatch.lastIndex = this.parser.pos;\n\t\tvar match = reMatch.exec(this.parser.source);\n\t\tif(!match || match.index !== this.parser.pos) {\n\t\t\tbreak;\n\t\t}\n\t\t// Check whether the list type of the top level matches\n\t\tvar listInfo = listTypes[match[0].charAt(0)];\n\t\tif(listStack.length &gt; 0 &amp;&amp; listStack[0].tag !== listInfo.listTag) {\n\t\t\tbreak;\n\t\t}\n\t\t// Move past the list marker\n\t\tthis.parser.pos = match.index + match[0].length;\n\t\t// Walk through the list markers for the current row\n\t\tfor(var t=0; t&lt;match[0].length; t++) {\n\t\t\tlistInfo = listTypes[match[0].charAt(t)];\n\t\t\t// Remove any stacked up element if we can't re-use it because the list type doesn't match\n\t\t\tif(listStack.length &gt; t &amp;&amp; listStack[t].tag !== listInfo.listTag) {\n\t\t\t\tlistStack.splice(t,listStack.length - t);\n\t\t\t}\n\t\t\t// Construct the list element or reuse the previous one at this level\n\t\t\tif(listStack.length &lt;= t) {\n\t\t\t\tvar listElement = {type: \"element\", tag: listInfo.listTag, children: [\n\t\t\t\t\t{type: \"element\", tag: listInfo.itemTag, children: []}\n\t\t\t\t]};\n\t\t\t\t// Link this list element into the last child item of the parent list item\n\t\t\t\tif(t) {\n\t\t\t\t\tvar prevListItem = listStack[t-1].children[listStack[t-1].children.length-1];\n\t\t\t\t\tprevListItem.children.push(listElement);\n\t\t\t\t}\n\t\t\t\t// Save this element in the stack\n\t\t\t\tlistStack[t] = listElement;\n\t\t\t} else if(t === (match[0].length - 1)) {\n\t\t\t\tlistStack[t].children.push({type: \"element\", tag: listInfo.itemTag, children: []});\n\t\t\t}\n\t\t}\n\t\tif(listStack.length &gt; match[0].length) {\n\t\t\tlistStack.splice(match[0].length,listStack.length - match[0].length);\n\t\t}\n\t\t// Process the body of the list item into the last list item\n\t\tvar lastListChildren = listStack[listStack.length-1].children,\n\t\t\tlastListItem = lastListChildren[lastListChildren.length-1],\n\t\t\tclasses = this.parser.parseClasses();\n\t\tthis.parser.skipWhitespace({treatNewlinesAsNonWhitespace: true});\n\t\tvar tree = this.parser.parseInlineRun(/(\\r?\\n)/mg);\n\t\tlastListItem.children.push.apply(lastListItem.children,tree);\n\t\tif(classes.length &gt; 0) {\n\t\t\t$tw.utils.addClassToParseTreeNode(lastListItem,classes.join(\" \"));\n\t\t}\n\t\t// Consume any whitespace following the list item\n\t\tthis.parser.skipWhitespace();\n\t}\n\t// Return the root element of the list\n\treturn [listStack[0]];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/macrocallblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/macrocallblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/macrocallblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki rule for block macro calls\n\n```\n&lt;&lt;name value value2&gt;&gt;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"macrocallblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n};\n\nexports.findNextMatch = function(startPos) {\n\tvar nextStart = startPos;\n\t// Try parsing at all possible macrocall openers until we match\n\twhile((nextStart = this.parser.source.indexOf(\"&lt;&lt;\",nextStart)) &gt;= 0) {\n\t\tvar nextCall = $tw.utils.parseMacroInvocation(this.parser.source,nextStart);\n\t\tif(nextCall) {\n\t\t\tvar c = this.parser.source.charAt(nextCall.end);\n\t\t\t// Ensure EOL after parsed macro\n\t\t\t// If we didn't need to support IE, we'd just use /(?:\\r?\\n|$)/ym\n\t\t\tif ((c === \"\") || (c === \"\\n\") || ((c === \"\\r\") &amp;&amp; this.parser.source.charAt(nextCall.end+1) === \"\\n\")) {\n\t\t\t\tthis.nextCall = nextCall;\n\t\t\t\treturn nextStart;\n\t\t\t}\n\t\t}\n\t\tnextStart += 2;\n\t}\n\treturn undefined;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\tvar call = this.nextCall;\n\tcall.isBlock = true;\n\tthis.nextCall = null;\n\tthis.parser.pos = call.end;\n\treturn [call];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/macrocallinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/macrocallinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/macrocallinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki rule for macro calls\n\n```\n&lt;&lt;name value value2&gt;&gt;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"macrocallinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n};\n\nexports.findNextMatch = function(startPos) {\n\tvar nextStart = startPos;\n\t// Try parsing at all possible macrocall openers until we match\n\twhile((nextStart = this.parser.source.indexOf(\"&lt;&lt;\",nextStart)) &gt;= 0) {\n\t\tthis.nextCall = $tw.utils.parseMacroInvocation(this.parser.source,nextStart);\n\t\tif(this.nextCall) {\n\t\t\treturn nextStart;\n\t\t}\n\t\tnextStart += 2;\n\t}\n\treturn undefined;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\tvar call = this.nextCall;\n\tthis.nextCall = null;\n\tthis.parser.pos = call.end;\n\treturn [call];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/macrodef.js":{"title":"$:/core/modules/parsers/wikiparser/rules/macrodef.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/macrodef.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki pragma rule for macro definitions\n\n```\n\\define name(param:defaultvalue,param2:defaultvalue)\ndefinition text, including $param$ markers\n\\end\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"macrodef\";\nexports.types = {pragma: true};\n\n/*\nInstantiate parse rule\n*/\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /^\\\\define\\s+([^(\\s]+)\\(\\s*([^)]*)\\)(\\s*\\r?\\n)?/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Move past the macro name and parameters\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse the parameters\n\tvar paramString = this.match[2],\n\t\tparams = [];\n\tif(paramString !== \"\") {\n\t\tvar reParam = /\\s*([A-Za-z0-9\\-_]+)(?:\\s*:\\s*(?:\"\"\"([\\s\\S]*?)\"\"\"|\"([^\"]*)\"|'([^']*)'|\\[\\[([^\\]]*)\\]\\]|([^\"'\\s]+)))?/mg,\n\t\t\tparamMatch = reParam.exec(paramString);\n\t\twhile(paramMatch) {\n\t\t\t// Save the parameter details\n\t\t\tvar paramInfo = {name: paramMatch[1]},\n\t\t\t\tdefaultValue = paramMatch[2] || paramMatch[3] || paramMatch[4] || paramMatch[5] || paramMatch[6];\n\t\t\tif(defaultValue) {\n\t\t\t\tparamInfo[\"default\"] = defaultValue;\n\t\t\t}\n\t\t\tparams.push(paramInfo);\n\t\t\t// Look for the next parameter\n\t\t\tparamMatch = reParam.exec(paramString);\n\t\t}\n\t}\n\t// Is this a multiline definition?\n\tvar reEnd;\n\tif(this.match[3]) {\n\t\t// If so, the end of the body is marked with \\end\n\t\treEnd = /(\\r?\\n\\\\end[^\\S\\n\\r]*(?:$|\\r?\\n))/mg;\n\t} else {\n\t\t// Otherwise, the end of the definition is marked by the end of the line\n\t\treEnd = /($|\\r?\\n)/mg;\n\t\t// Move past any whitespace\n\t\tthis.parser.pos = $tw.utils.skipWhiteSpace(this.parser.source,this.parser.pos);\n\t}\n\t// Find the end of the definition\n\treEnd.lastIndex = this.parser.pos;\n\tvar text,\n\t\tendMatch = reEnd.exec(this.parser.source);\n\tif(endMatch) {\n\t\ttext = this.parser.source.substring(this.parser.pos,endMatch.index);\n\t\tthis.parser.pos = endMatch.index + endMatch[0].length;\n\t} else {\n\t\t// We didn't find the end of the definition, so we'll make it blank\n\t\ttext = \"\";\n\t}\n\t// Save the macro definition\n\treturn [{\n\t\ttype: \"set\",\n\t\tattributes: {\n\t\t\tname: {type: \"string\", value: this.match[1]},\n\t\t\tvalue: {type: \"string\", value: text}\n\t\t},\n\t\tchildren: [],\n\t\tparams: params,\n\t\tisMacroDefinition: true\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/prettyextlink.js":{"title":"$:/core/modules/parsers/wikiparser/rules/prettyextlink.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/prettyextlink.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for external links. For example:\n\n```\n[ext[https://tiddlywiki.com/fractalveg.jpg]]\n[ext[Tooltip|https://tiddlywiki.com/fractalveg.jpg]]\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"prettyextlink\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n};\n\nexports.findNextMatch = function(startPos) {\n\t// Find the next tag\n\tthis.nextLink = this.findNextLink(this.parser.source,startPos);\n\treturn this.nextLink ? this.nextLink.start : undefined;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.nextLink.end;\n\treturn [this.nextLink];\n};\n\n/*\nFind the next link from the current position\n*/\nexports.findNextLink = function(source,pos) {\n\t// A regexp for finding candidate links\n\tvar reLookahead = /(\\[ext\\[)/g;\n\t// Find the next candidate\n\treLookahead.lastIndex = pos;\n\tvar match = reLookahead.exec(source);\n\twhile(match) {\n\t\t// Try to parse the candidate as a link\n\t\tvar link = this.parseLink(source,match.index);\n\t\t// Return success\n\t\tif(link) {\n\t\t\treturn link;\n\t\t}\n\t\t// Look for the next match\n\t\treLookahead.lastIndex = match.index + 1;\n\t\tmatch = reLookahead.exec(source);\n\t}\n\t// Failed\n\treturn null;\n};\n\n/*\nLook for an link at the specified position. Returns null if not found, otherwise returns {type: \"element\", tag: \"a\", attributes: [], isSelfClosing:, start:, end:,}\n*/\nexports.parseLink = function(source,pos) {\n\tvar token,\n\t\ttextNode = {\n\t\t\ttype: \"text\"\n\t\t},\n\t\tnode = {\n\t\t\ttype: \"element\",\n\t\t\ttag: \"a\",\n\t\t\tstart: pos,\n\t\t\tattributes: {\n\t\t\t\t\"class\": {type: \"string\", value: \"tc-tiddlylink-external\"},\n\t\t\t},\n\t\t\tchildren: [textNode]\n\t\t};\n\t// Skip whitespace\n\tpos = $tw.utils.skipWhiteSpace(source,pos);\n\t// Look for the `[ext[`\n\ttoken = $tw.utils.parseTokenString(source,pos,\"[ext[\");\n\tif(!token) {\n\t\treturn null;\n\t}\n\tpos = token.end;\n\t// Look ahead for the terminating `]]`\n\tvar closePos = source.indexOf(\"]]\",pos);\n\tif(closePos === -1) {\n\t\treturn null;\n\t}\n\t// Look for a `|` separating the tooltip\n\tvar splitPos = source.indexOf(\"|\",pos);\n\tif(splitPos === -1 || splitPos &gt; closePos) {\n\t\tsplitPos = null;\n\t}\n\t// Pull out the tooltip and URL\n\tvar tooltip, URL;\n\tif(splitPos) {\n\t\tURL = source.substring(splitPos + 1,closePos).trim();\n\t\ttextNode.text = source.substring(pos,splitPos).trim();\n\t} else {\n\t\tURL = source.substring(pos,closePos).trim();\n\t\ttextNode.text = URL;\n\t}\n\tnode.attributes.href = {type: \"string\", value: URL};\n\tnode.attributes.target = {type: \"string\", value: \"_blank\"};\n\tnode.attributes.rel = {type: \"string\", value: \"noopener noreferrer\"};\n\t// Update the end position\n\tnode.end = closePos + 2;\n\treturn node;\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/prettylink.js":{"title":"$:/core/modules/parsers/wikiparser/rules/prettylink.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/prettylink.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for pretty links. For example:\n\n```\n[[Introduction]]\n\n[[Link description|TiddlerTitle]]\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"prettylink\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\[\\[(.*?)(?:\\|(.*?))?\\]\\]/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Process the link\n\tvar text = this.match[1],\n\t\tlink = this.match[2] || text;\n\tif($tw.utils.isLinkExternal(link)) {\n\t\treturn [{\n\t\t\ttype: \"element\",\n\t\t\ttag: \"a\",\n\t\t\tattributes: {\n\t\t\t\thref: {type: \"string\", value: link},\n\t\t\t\t\"class\": {type: \"string\", value: \"tc-tiddlylink-external\"},\n\t\t\t\ttarget: {type: \"string\", value: \"_blank\"},\n\t\t\t\trel: {type: \"string\", value: \"noopener noreferrer\"}\n\t\t\t},\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\", text: text\n\t\t\t}]\n\t\t}];\n\t} else {\n\t\treturn [{\n\t\t\ttype: \"link\",\n\t\t\tattributes: {\n\t\t\t\tto: {type: \"string\", value: link}\n\t\t\t},\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\", text: text\n\t\t\t}]\n\t\t}];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/quoteblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/quoteblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/quoteblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for quote blocks. For example:\n\n```\n\t&lt;&lt;&lt;.optionalClass(es) optional cited from\n\ta quote\n\t&lt;&lt;&lt;\n\t\n\t&lt;&lt;&lt;.optionalClass(es)\n\ta quote\n\t&lt;&lt;&lt; optional cited from\n```\n\nQuotes can be quoted by putting more &lt;s\n\n```\n\t&lt;&lt;&lt;\n\tQuote Level 1\n\t\n\t&lt;&lt;&lt;&lt;\n\tQuoteLevel 2\n\t&lt;&lt;&lt;&lt;\n\t\n\t&lt;&lt;&lt;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"quoteblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /(&lt;&lt;&lt;+)/mg;\n};\n\nexports.parse = function() {\n\tvar classes = [\"tc-quote\"];\n\t// Get all the details of the match\n\tvar reEndString = \"^\" + this.match[1] + \"(?!&lt;)\";\n\t// Move past the &lt;s\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t\n\t// Parse any classes, whitespace and then the optional cite itself\n\tclasses.push.apply(classes, this.parser.parseClasses());\n\tthis.parser.skipWhitespace({treatNewlinesAsNonWhitespace: true});\n\tvar cite = this.parser.parseInlineRun(/(\\r?\\n)/mg);\n\t// before handling the cite, parse the body of the quote\n\tvar tree= this.parser.parseBlocks(reEndString);\n\t// If we got a cite, put it before the text\n\tif(cite.length &gt; 0) {\n\t\ttree.unshift({\n\t\t\ttype: \"element\",\n\t\t\ttag: \"cite\",\n\t\t\tchildren: cite\n\t\t});\n\t}\n\t// Parse any optional cite\n\tthis.parser.skipWhitespace({treatNewlinesAsNonWhitespace: true});\n\tcite = this.parser.parseInlineRun(/(\\r?\\n)/mg);\n\t// If we got a cite, push it\n\tif(cite.length &gt; 0) {\n\t\ttree.push({\n\t\t\ttype: \"element\",\n\t\t\ttag: \"cite\",\n\t\t\tchildren: cite\n\t\t});\n\t}\n\t// Return the blockquote element\n\treturn [{\n\t\ttype: \"element\",\n\t\ttag: \"blockquote\",\n\t\tattributes: {\n\t\t\tclass: { type: \"string\", value: classes.join(\" \") },\n\t\t},\n\t\tchildren: tree\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/rules.js":{"title":"$:/core/modules/parsers/wikiparser/rules/rules.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/rules.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki pragma rule for rules specifications\n\n```\n\\rules except ruleone ruletwo rulethree\n\\rules only ruleone ruletwo rulethree\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"rules\";\nexports.types = {pragma: true};\n\n/*\nInstantiate parse rule\n*/\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /^\\\\rules[^\\S\\n]/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Move past the pragma invocation\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse whitespace delimited tokens terminated by a line break\n\tvar reMatch = /[^\\S\\n]*(\\S+)|(\\r?\\n)/mg,\n\t\ttokens = [];\n\treMatch.lastIndex = this.parser.pos;\n\tvar match = reMatch.exec(this.parser.source);\n\twhile(match &amp;&amp; match.index === this.parser.pos) {\n\t\tthis.parser.pos = reMatch.lastIndex;\n\t\t// Exit if we've got the line break\n\t\tif(match[2]) {\n\t\t\tbreak;\n\t\t}\n\t\t// Process the token\n\t\tif(match[1]) {\n\t\t\ttokens.push(match[1]);\n\t\t}\n\t\t// Match the next token\n\t\tmatch = reMatch.exec(this.parser.source);\n\t}\n\t// Process the tokens\n\tif(tokens.length &gt; 0) {\n\t\tthis.parser.amendRules(tokens[0],tokens.slice(1));\n\t}\n\t// No parse tree nodes to return\n\treturn [];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/styleblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/styleblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/styleblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for assigning styles and classes to paragraphs and other blocks. For example:\n\n```\n@@.myClass\n@@background-color:red;\nThis paragraph will have the CSS class `myClass`.\n\n* The `&lt;ul&gt;` around this list will also have the class `myClass`\n* List item 2\n\n@@\n```\n\nNote that classes and styles can be mixed subject to the rule that styles must precede classes. For example\n\n```\n@@.myFirstClass.mySecondClass\n@@width:100px;.myThirdClass\nThis is a paragraph\n@@\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"styleblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /@@((?:[^\\.\\r\\n\\s:]+:[^\\r\\n;]+;)+)?(?:\\.([^\\r\\n\\s]+))?\\r?\\n/mg;\n};\n\nexports.parse = function() {\n\tvar reEndString = \"^@@(?:\\\\r?\\\\n)?\";\n\tvar classes = [], styles = [];\n\tdo {\n\t\t// Get the class and style\n\t\tif(this.match[1]) {\n\t\t\tstyles.push(this.match[1]);\n\t\t}\n\t\tif(this.match[2]) {\n\t\t\tclasses.push(this.match[2].split(\".\").join(\" \"));\n\t\t}\n\t\t// Move past the match\n\t\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t\t// Look for another line of classes and styles\n\t\tthis.match = this.matchRegExp.exec(this.parser.source);\n\t} while(this.match &amp;&amp; this.match.index === this.parser.pos);\n\t// Parse the body\n\tvar tree = this.parser.parseBlocks(reEndString);\n\tfor(var t=0; t&lt;tree.length; t++) {\n\t\tif(classes.length &gt; 0) {\n\t\t\t$tw.utils.addClassToParseTreeNode(tree[t],classes.join(\" \"));\n\t\t}\n\t\tif(styles.length &gt; 0) {\n\t\t\t$tw.utils.addAttributeToParseTreeNode(tree[t],\"style\",styles.join(\"\"));\n\t\t}\n\t}\n\treturn tree;\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/styleinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/styleinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/styleinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for assigning styles and classes to inline runs. For example:\n\n```\n@@.myClass This is some text with a class@@\n@@background-color:red;This is some text with a background colour@@\n@@width:100px;.myClass This is some text with a class and a width@@\n```\n\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"styleinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /@@((?:[^\\.\\r\\n\\s:]+:[^\\r\\n;]+;)+)?(\\.(?:[^\\r\\n\\s]+)\\s+)?/mg;\n};\n\nexports.parse = function() {\n\tvar reEnd = /@@/g;\n\t// Get the styles and class\n\tvar stylesString = this.match[1],\n\t\tclassString = this.match[2] ? this.match[2].split(\".\").join(\" \") : undefined;\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse the run up to the terminator\n\tvar tree = this.parser.parseInlineRun(reEnd,{eatTerminator: true});\n\t// Return the classed span\n\tvar node = {\n\t\ttype: \"element\",\n\t\ttag: \"span\",\n\t\tattributes: {\n\t\t\t\"class\": {type: \"string\", value: \"tc-inline-style\"}\n\t\t},\n\t\tchildren: tree\n\t};\n\tif(classString) {\n\t\t$tw.utils.addClassToParseTreeNode(node,classString);\n\t}\n\tif(stylesString) {\n\t\t$tw.utils.addAttributeToParseTreeNode(node,\"style\",stylesString);\n\t}\n\treturn [node];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/syslink.js":{"title":"$:/core/modules/parsers/wikiparser/rules/syslink.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/syslink.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for system tiddler links.\nCan be suppressed preceding them with `~`.\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"syslink\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = new RegExp(\n\t\t\"~?\\\\$:\\\\/[\" +\n\t\t$tw.config.textPrimitives.anyLetter.substr(1,$tw.config.textPrimitives.anyLetter.length - 2) +\n\t\t\"\\/._-]+\",\n\t\t\"mg\"\n\t);\n};\n\nexports.parse = function() {\n\tvar match = this.match[0];\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Create the link unless it is suppressed\n\tif(match.substr(0,1) === \"~\") {\n\t\treturn [{type: \"text\", text: match.substr(1)}];\n\t} else {\n\t\treturn [{\n\t\t\ttype: \"link\",\n\t\t\tattributes: {\n\t\t\t\tto: {type: \"string\", value: match}\n\t\t\t},\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\",\n\t\t\t\ttext: match\n\t\t\t}]\n\t\t}];\n\t}\n};\n\n})();","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/table.js":{"title":"$:/core/modules/parsers/wikiparser/rules/table.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/table.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text block rule for tables.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"table\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /^\\|(?:[^\\n]*)\\|(?:[fhck]?)\\r?(?:\\n|$)/mg;\n};\n\nvar processRow = function(prevColumns) {\n\tvar cellRegExp = /(?:\\|([^\\n\\|]*)\\|)|(\\|[fhck]?\\r?(?:\\n|$))/mg,\n\t\tcellTermRegExp = /((?:\\x20*)\\|)/mg,\n\t\ttree = [],\n\t\tcol = 0,\n\t\tcolSpanCount = 1,\n\t\tprevCell,\n\t\tvAlign;\n\t// Match a single cell\n\tcellRegExp.lastIndex = this.parser.pos;\n\tvar cellMatch = cellRegExp.exec(this.parser.source);\n\twhile(cellMatch &amp;&amp; cellMatch.index === this.parser.pos) {\n\t\tif(cellMatch[1] === \"~\") {\n\t\t\t// Rowspan\n\t\t\tvar last = prevColumns[col];\n\t\t\tif(last) {\n\t\t\t\tlast.rowSpanCount++;\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(last.element,\"rowspan\",last.rowSpanCount);\n\t\t\t\tvAlign = $tw.utils.getAttributeValueFromParseTreeNode(last.element,\"valign\",\"center\");\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(last.element,\"valign\",vAlign);\n\t\t\t\tif(colSpanCount &gt; 1) {\n\t\t\t\t\t$tw.utils.addAttributeToParseTreeNode(last.element,\"colspan\",colSpanCount);\n\t\t\t\t\tcolSpanCount = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Move to just before the `|` terminating the cell\n\t\t\tthis.parser.pos = cellRegExp.lastIndex - 1;\n\t\t} else if(cellMatch[1] === \"&gt;\") {\n\t\t\t// Colspan\n\t\t\tcolSpanCount++;\n\t\t\t// Move to just before the `|` terminating the cell\n\t\t\tthis.parser.pos = cellRegExp.lastIndex - 1;\n\t\t} else if(cellMatch[1] === \"&lt;\" &amp;&amp; prevCell) {\n\t\t\tcolSpanCount = 1 + $tw.utils.getAttributeValueFromParseTreeNode(prevCell,\"colspan\",1);\n\t\t\t$tw.utils.addAttributeToParseTreeNode(prevCell,\"colspan\",colSpanCount);\n\t\t\tcolSpanCount = 1;\n\t\t\t// Move to just before the `|` terminating the cell\n\t\t\tthis.parser.pos = cellRegExp.lastIndex - 1;\n\t\t} else if(cellMatch[2]) {\n\t\t\t// End of row\n\t\t\tif(prevCell &amp;&amp; colSpanCount &gt; 1) {\n\t\t\t\tif(prevCell.attributes &amp;&amp; prevCell.attributes &amp;&amp; prevCell.attributes.colspan) {\n\t\t\t\t\t\tcolSpanCount += prevCell.attributes.colspan.value;\n\t\t\t\t} else {\n\t\t\t\t\tcolSpanCount -= 1;\n\t\t\t\t}\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(prevCell,\"colspan\",colSpanCount);\n\t\t\t}\n\t\t\tthis.parser.pos = cellRegExp.lastIndex - 1;\n\t\t\tbreak;\n\t\t} else {\n\t\t\t// For ordinary cells, step beyond the opening `|`\n\t\t\tthis.parser.pos++;\n\t\t\t// Look for a space at the start of the cell\n\t\t\tvar spaceLeft = false;\n\t\t\tvAlign = null;\n\t\t\tif(this.parser.source.substr(this.parser.pos).search(/^\\^([^\\^]|\\^\\^)/) === 0) {\n\t\t\t\tvAlign = \"top\";\n\t\t\t} else if(this.parser.source.substr(this.parser.pos).search(/^,([^,]|,,)/) === 0) {\n\t\t\t\tvAlign = \"bottom\";\n\t\t\t}\n\t\t\tif(vAlign) {\n\t\t\t\tthis.parser.pos++;\n\t\t\t}\n\t\t\tvar chr = this.parser.source.substr(this.parser.pos,1);\n\t\t\twhile(chr === \" \") {\n\t\t\t\tspaceLeft = true;\n\t\t\t\tthis.parser.pos++;\n\t\t\t\tchr = this.parser.source.substr(this.parser.pos,1);\n\t\t\t}\n\t\t\t// Check whether this is a heading cell\n\t\t\tvar cell;\n\t\t\tif(chr === \"!\") {\n\t\t\t\tthis.parser.pos++;\n\t\t\t\tcell = {type: \"element\", tag: \"th\", children: []};\n\t\t\t} else {\n\t\t\t\tcell = {type: \"element\", tag: \"td\", children: []};\n\t\t\t}\n\t\t\ttree.push(cell);\n\t\t\t// Record information about this cell\n\t\t\tprevCell = cell;\n\t\t\tprevColumns[col] = {rowSpanCount:1,element:cell};\n\t\t\t// Check for a colspan\n\t\t\tif(colSpanCount &gt; 1) {\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(cell,\"colspan\",colSpanCount);\n\t\t\t\tcolSpanCount = 1;\n\t\t\t}\n\t\t\t// Parse the cell\n\t\t\tcell.children = this.parser.parseInlineRun(cellTermRegExp,{eatTerminator: true});\n\t\t\t// Set the alignment for the cell\n\t\t\tif(vAlign) {\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(cell,\"valign\",vAlign);\n\t\t\t}\n\t\t\tif(this.parser.source.substr(this.parser.pos - 2,1) === \" \") { // spaceRight\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(cell,\"align\",spaceLeft ? \"center\" : \"left\");\n\t\t\t} else if(spaceLeft) {\n\t\t\t\t$tw.utils.addAttributeToParseTreeNode(cell,\"align\",\"right\");\n\t\t\t}\n\t\t\t// Move back to the closing `|`\n\t\t\tthis.parser.pos--;\n\t\t}\n\t\tcol++;\n\t\tcellRegExp.lastIndex = this.parser.pos;\n\t\tcellMatch = cellRegExp.exec(this.parser.source);\n\t}\n\treturn tree;\n};\n\nexports.parse = function() {\n\tvar rowContainerTypes = {\"c\":\"caption\", \"h\":\"thead\", \"\":\"tbody\", \"f\":\"tfoot\"},\n\t\ttable = {type: \"element\", tag: \"table\", children: []},\n\t\trowRegExp = /^\\|([^\\n]*)\\|([fhck]?)\\r?(?:\\n|$)/mg,\n\t\trowTermRegExp = /(\\|(?:[fhck]?)\\r?(?:\\n|$))/mg,\n\t\tprevColumns = [],\n\t\tcurrRowType,\n\t\trowContainer,\n\t\trowCount = 0;\n\t// Match the row\n\trowRegExp.lastIndex = this.parser.pos;\n\tvar rowMatch = rowRegExp.exec(this.parser.source);\n\twhile(rowMatch &amp;&amp; rowMatch.index === this.parser.pos) {\n\t\tvar rowType = rowMatch[2];\n\t\t// Check if it is a class assignment\n\t\tif(rowType === \"k\") {\n\t\t\t$tw.utils.addClassToParseTreeNode(table,rowMatch[1]);\n\t\t\tthis.parser.pos = rowMatch.index + rowMatch[0].length;\n\t\t} else {\n\t\t\t// Otherwise, create a new row if this one is of a different type\n\t\t\tif(rowType !== currRowType) {\n\t\t\t\trowContainer = {type: \"element\", tag: rowContainerTypes[rowType], children: []};\n\t\t\t\ttable.children.push(rowContainer);\n\t\t\t\tcurrRowType = rowType;\n\t\t\t}\n\t\t\t// Is this a caption row?\n\t\t\tif(currRowType === \"c\") {\n\t\t\t\t// If so, move past the opening `|` of the row\n\t\t\t\tthis.parser.pos++;\n\t\t\t\t// Move the caption to the first row if it isn't already\n\t\t\t\tif(table.children.length !== 1) {\n\t\t\t\t\ttable.children.pop(); // Take rowContainer out of the children array\n\t\t\t\t\ttable.children.splice(0,0,rowContainer); // Insert it at the bottom\n\t\t\t\t}\n\t\t\t\t// Set the alignment - TODO: figure out why TW did this\n//\t\t\t\trowContainer.attributes.align = rowCount === 0 ? \"top\" : \"bottom\";\n\t\t\t\t// Parse the caption\n\t\t\t\trowContainer.children = this.parser.parseInlineRun(rowTermRegExp,{eatTerminator: true});\n\t\t\t} else {\n\t\t\t\t// Create the row\n\t\t\t\tvar theRow = {type: \"element\", tag: \"tr\", children: []};\n\t\t\t\t$tw.utils.addClassToParseTreeNode(theRow,rowCount%2 ? \"oddRow\" : \"evenRow\");\n\t\t\t\trowContainer.children.push(theRow);\n\t\t\t\t// Process the row\n\t\t\t\ttheRow.children = processRow.call(this,prevColumns);\n\t\t\t\tthis.parser.pos = rowMatch.index + rowMatch[0].length;\n\t\t\t\t// Increment the row count\n\t\t\t\trowCount++;\n\t\t\t}\n\t\t}\n\t\trowMatch = rowRegExp.exec(this.parser.source);\n\t}\n\treturn [table];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/transcludeblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/transcludeblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/transcludeblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for block-level transclusion. For example:\n\n```\n{{MyTiddler}}\n{{MyTiddler||TemplateTitle}}\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"transcludeblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\{\\{([^\\{\\}\\|]*)(?:\\|\\|([^\\|\\{\\}]+))?\\}\\}(?:\\r?\\n|$)/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Get the match details\n\tvar template = $tw.utils.trim(this.match[2]),\n\t\ttextRef = $tw.utils.trim(this.match[1]);\n\t// Prepare the transclude widget\n\tvar transcludeNode = {\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {},\n\t\t\tisBlock: true\n\t\t};\n\t// Prepare the tiddler widget\n\tvar tr, targetTitle, targetField, targetIndex, tiddlerNode;\n\tif(textRef) {\n\t\ttr = $tw.utils.parseTextReference(textRef);\n\t\ttargetTitle = tr.title;\n\t\ttargetField = tr.field;\n\t\ttargetIndex = tr.index;\n\t\ttiddlerNode = {\n\t\t\ttype: \"tiddler\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: targetTitle}\n\t\t\t},\n\t\t\tisBlock: true,\n\t\t\tchildren: [transcludeNode]\n\t\t};\n\t}\n\tif(template) {\n\t\ttranscludeNode.attributes.tiddler = {type: \"string\", value: template};\n\t\tif(textRef) {\n\t\t\treturn [tiddlerNode];\n\t\t} else {\n\t\t\treturn [transcludeNode];\n\t\t}\n\t} else {\n\t\tif(textRef) {\n\t\t\ttranscludeNode.attributes.tiddler = {type: \"string\", value: targetTitle};\n\t\t\tif(targetField) {\n\t\t\t\ttranscludeNode.attributes.field = {type: \"string\", value: targetField};\n\t\t\t}\n\t\t\tif(targetIndex) {\n\t\t\t\ttranscludeNode.attributes.index = {type: \"string\", value: targetIndex};\n\t\t\t}\n\t\t\treturn [tiddlerNode];\n\t\t} else {\n\t\t\treturn [transcludeNode];\n\t\t}\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/transcludeinline.js":{"title":"$:/core/modules/parsers/wikiparser/rules/transcludeinline.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/transcludeinline.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for inline-level transclusion. For example:\n\n```\n{{MyTiddler}}\n{{MyTiddler||TemplateTitle}}\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"transcludeinline\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\{\\{([^\\{\\}\\|]*)(?:\\|\\|([^\\|\\{\\}]+))?\\}\\}/mg;\n};\n\nexports.parse = function() {\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Get the match details\n\tvar template = $tw.utils.trim(this.match[2]),\n\t\ttextRef = $tw.utils.trim(this.match[1]);\n\t// Prepare the transclude widget\n\tvar transcludeNode = {\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {}\n\t\t};\n\t// Prepare the tiddler widget\n\tvar tr, targetTitle, targetField, targetIndex, tiddlerNode;\n\tif(textRef) {\n\t\ttr = $tw.utils.parseTextReference(textRef);\n\t\ttargetTitle = tr.title;\n\t\ttargetField = tr.field;\n\t\ttargetIndex = tr.index;\n\t\ttiddlerNode = {\n\t\t\ttype: \"tiddler\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: targetTitle}\n\t\t\t},\n\t\t\tchildren: [transcludeNode]\n\t\t};\n\t}\n\tif(template) {\n\t\ttranscludeNode.attributes.tiddler = {type: \"string\", value: template};\n\t\tif(textRef) {\n\t\t\treturn [tiddlerNode];\n\t\t} else {\n\t\t\treturn [transcludeNode];\n\t\t}\n\t} else {\n\t\tif(textRef) {\n\t\t\ttranscludeNode.attributes.tiddler = {type: \"string\", value: targetTitle};\n\t\t\tif(targetField) {\n\t\t\t\ttranscludeNode.attributes.field = {type: \"string\", value: targetField};\n\t\t\t}\n\t\t\tif(targetIndex) {\n\t\t\t\ttranscludeNode.attributes.index = {type: \"string\", value: targetIndex};\n\t\t\t}\n\t\t\treturn [tiddlerNode];\n\t\t} else {\n\t\t\treturn [transcludeNode];\n\t\t}\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/typedblock.js":{"title":"$:/core/modules/parsers/wikiparser/rules/typedblock.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/typedblock.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text rule for typed blocks. For example:\n\n```\n$$$.js\nThis will be rendered as JavaScript\n$$$\n\n$$$.svg\n&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"150\" height=\"100\"&gt;\n  &lt;circle cx=\"100\" cy=\"50\" r=\"40\" stroke=\"black\" stroke-width=\"2\" fill=\"red\" /&gt;\n&lt;/svg&gt;\n$$$\n\n$$$text/vnd.tiddlywiki&gt;text/html\nThis will be rendered as an //HTML representation// of WikiText\n$$$\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.name = \"typedblock\";\nexports.types = {block: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /\\$\\$\\$([^ &gt;\\r\\n]*)(?: *&gt; *([^ \\r\\n]+))?\\r?\\n/mg;\n};\n\nexports.parse = function() {\n\tvar reEnd = /\\r?\\n\\$\\$\\$\\r?(?:\\n|$)/mg;\n\t// Save the type\n\tvar parseType = this.match[1],\n\t\trenderType = this.match[2];\n\t// Move past the match\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Look for the end of the block\n\treEnd.lastIndex = this.parser.pos;\n\tvar match = reEnd.exec(this.parser.source),\n\t\ttext;\n\t// Process the block\n\tif(match) {\n\t\ttext = this.parser.source.substring(this.parser.pos,match.index);\n\t\tthis.parser.pos = match.index + match[0].length;\n\t} else {\n\t\ttext = this.parser.source.substr(this.parser.pos);\n\t\tthis.parser.pos = this.parser.sourceLength;\n\t}\n\t// Parse the block according to the specified type\n\tvar parser = this.parser.wiki.parseText(parseType,text,{defaultType: \"text/plain\"});\n\t// If there's no render type, just return the parse tree\n\tif(!renderType) {\n\t\treturn parser.tree;\n\t} else {\n\t\t// Otherwise, render to the rendertype and return in a &lt;PRE&gt; tag\n\t\tvar widgetNode = this.parser.wiki.makeWidget(parser),\n\t\t\tcontainer = $tw.fakeDocument.createElement(\"div\");\n\t\twidgetNode.render(container,null);\n\t\ttext = renderType === \"text/html\" ? container.innerHTML : container.textContent;\n\t\treturn [{\n\t\t\ttype: \"element\",\n\t\t\ttag: \"pre\",\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\",\n\t\t\t\ttext: text\n\t\t\t}]\n\t\t}];\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/whitespace.js":{"title":"$:/core/modules/parsers/wikiparser/rules/whitespace.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/whitespace.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki pragma rule for whitespace specifications\n\n```\n\\whitespace trim\n\\whitespace notrim\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"whitespace\";\nexports.types = {pragma: true};\n\n/*\nInstantiate parse rule\n*/\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = /^\\\\whitespace[^\\S\\n]/mg;\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\tvar self = this;\n\t// Move past the pragma invocation\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// Parse whitespace delimited tokens terminated by a line break\n\tvar reMatch = /[^\\S\\n]*(\\S+)|(\\r?\\n)/mg,\n\t\ttokens = [];\n\treMatch.lastIndex = this.parser.pos;\n\tvar match = reMatch.exec(this.parser.source);\n\twhile(match &amp;&amp; match.index === this.parser.pos) {\n\t\tthis.parser.pos = reMatch.lastIndex;\n\t\t// Exit if we've got the line break\n\t\tif(match[2]) {\n\t\t\tbreak;\n\t\t}\n\t\t// Process the token\n\t\tif(match[1]) {\n\t\t\ttokens.push(match[1]);\n\t\t}\n\t\t// Match the next token\n\t\tmatch = reMatch.exec(this.parser.source);\n\t}\n\t// Process the tokens\n\t$tw.utils.each(tokens,function(token) {\n\t\tswitch(token) {\n\t\t\tcase \"trim\":\n\t\t\t\tself.parser.configTrimWhiteSpace = true;\n\t\t\t\tbreak;\n\t\t\tcase \"notrim\":\n\t\t\t\tself.parser.configTrimWhiteSpace = false;\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t// No parse tree nodes to return\n\treturn [];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/rules/wikilink.js":{"title":"$:/core/modules/parsers/wikiparser/rules/wikilink.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/wikilink.js\ntype: application/javascript\nmodule-type: wikirule\n\nWiki text inline rule for wiki links. For example:\n\n```\nAWikiLink\nAnotherLink\n~SuppressedLink\n```\n\nPrecede a camel case word with `~` to prevent it from being recognised as a link.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.name = \"wikilink\";\nexports.types = {inline: true};\n\nexports.init = function(parser) {\n\tthis.parser = parser;\n\t// Regexp to match\n\tthis.matchRegExp = new RegExp($tw.config.textPrimitives.unWikiLink + \"?\" + $tw.config.textPrimitives.wikiLink,\"mg\");\n};\n\n/*\nParse the most recent match\n*/\nexports.parse = function() {\n\t// Get the details of the match\n\tvar linkText = this.match[0];\n\t// Move past the macro call\n\tthis.parser.pos = this.matchRegExp.lastIndex;\n\t// If the link starts with the unwikilink character then just output it as plain text\n\tif(linkText.substr(0,1) === $tw.config.textPrimitives.unWikiLink) {\n\t\treturn [{type: \"text\", text: linkText.substr(1)}];\n\t}\n\t// If the link has been preceded with a blocked letter then don't treat it as a link\n\tif(this.match.index &gt; 0) {\n\t\tvar preRegExp = new RegExp($tw.config.textPrimitives.blockPrefixLetters,\"mg\");\n\t\tpreRegExp.lastIndex = this.match.index-1;\n\t\tvar preMatch = preRegExp.exec(this.parser.source);\n\t\tif(preMatch &amp;&amp; preMatch.index === this.match.index-1) {\n\t\t\treturn [{type: \"text\", text: linkText}];\n\t\t}\n\t}\n\treturn [{\n\t\ttype: \"link\",\n\t\tattributes: {\n\t\t\tto: {type: \"string\", value: linkText}\n\t\t},\n\t\tchildren: [{\n\t\t\ttype: \"text\",\n\t\t\ttext: linkText\n\t\t}]\n\t}];\n};\n\n})();\n","type":"application/javascript","module-type":"wikirule"},"$:/core/modules/parsers/wikiparser/wikiparser.js":{"title":"$:/core/modules/parsers/wikiparser/wikiparser.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/wikiparser.js\ntype: application/javascript\nmodule-type: parser\n\nThe wiki text parser processes blocks of source text into a parse tree.\n\nThe parse tree is made up of nested arrays of these JavaScript objects:\n\n\t{type: \"element\", tag: &lt;string&gt;, attributes: {}, children: []} - an HTML element\n\t{type: \"text\", text: &lt;string&gt;} - a text node\n\t{type: \"entity\", value: &lt;string&gt;} - an entity\n\t{type: \"raw\", html: &lt;string&gt;} - raw HTML\n\nAttributes are stored as hashmaps of the following objects:\n\n\t{type: \"string\", value: &lt;string&gt;} - literal string\n\t{type: \"indirect\", textReference: &lt;textReference&gt;} - indirect through a text reference\n\t{type: \"macro\", macro: &lt;TBD&gt;} - indirect through a macro invocation\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\ntype: content type of text\ntext: text to be parsed\noptions: see below:\n\tparseAsInline: true to parse text as inline instead of block\n\twiki: reference to wiki to use\n\t_canonical_uri: optional URI of content if text is missing or empty\n*/\nvar WikiParser = function(type,text,options) {\n\tthis.wiki = options.wiki;\n\tvar self = this;\n\t// Check for an externally linked tiddler\n\tif($tw.browser &amp;&amp; (text || \"\") === \"\" &amp;&amp; options._canonical_uri) {\n\t\tthis.loadRemoteTiddler(options._canonical_uri);\n\t\ttext = $tw.language.getRawString(\"LazyLoadingWarning\");\n\t}\n\t// Save the parse text\n\tthis.type = type || \"text/vnd.tiddlywiki\";\n\tthis.source = text || \"\";\n\tthis.sourceLength = this.source.length;\n\t// Flag for ignoring whitespace\n\tthis.configTrimWhiteSpace = false;\n\t// Set current parse position\n\tthis.pos = 0;\n\t// Start with empty output\n\tthis.tree = [];\n\t// Assemble the rule classes we're going to use\n\tvar pragmaRuleClasses, blockRuleClasses, inlineRuleClasses;\n\tif(options.rules) {\n\t\tpragmaRuleClasses = options.rules.pragma;\n\t\tblockRuleClasses = options.rules.block;\n\t\tinlineRuleClasses = options.rules.inline;\n\t} else {\n\t\t// Setup the rule classes if we don't have them already\n\t\tif(!this.pragmaRuleClasses) {\n\t\t\tWikiParser.prototype.pragmaRuleClasses = $tw.modules.createClassesFromModules(\"wikirule\",\"pragma\",$tw.WikiRuleBase);\n\t\t\tthis.setupRules(WikiParser.prototype.pragmaRuleClasses,\"$:/config/WikiParserRules/Pragmas/\");\n\t\t}\n\t\tpragmaRuleClasses = this.pragmaRuleClasses;\n\t\tif(!this.blockRuleClasses) {\n\t\t\tWikiParser.prototype.blockRuleClasses = $tw.modules.createClassesFromModules(\"wikirule\",\"block\",$tw.WikiRuleBase);\n\t\t\tthis.setupRules(WikiParser.prototype.blockRuleClasses,\"$:/config/WikiParserRules/Block/\");\n\t\t}\n\t\tblockRuleClasses = this.blockRuleClasses;\n\t\tif(!this.inlineRuleClasses) {\n\t\t\tWikiParser.prototype.inlineRuleClasses = $tw.modules.createClassesFromModules(\"wikirule\",\"inline\",$tw.WikiRuleBase);\n\t\t\tthis.setupRules(WikiParser.prototype.inlineRuleClasses,\"$:/config/WikiParserRules/Inline/\");\n\t\t}\n\t\tinlineRuleClasses = this.inlineRuleClasses;\n\t}\n\t// Instantiate the pragma parse rules\n\tthis.pragmaRules = this.instantiateRules(pragmaRuleClasses,\"pragma\",0);\n\t// Instantiate the parser block and inline rules\n\tthis.blockRules = this.instantiateRules(blockRuleClasses,\"block\",0);\n\tthis.inlineRules = this.instantiateRules(inlineRuleClasses,\"inline\",0);\n\t// Parse any pragmas\n\tvar topBranch = this.parsePragmas();\n\t// Parse the text into inline runs or blocks\n\tif(options.parseAsInline) {\n\t\ttopBranch.push.apply(topBranch,this.parseInlineRun());\n\t} else {\n\t\ttopBranch.push.apply(topBranch,this.parseBlocks());\n\t}\n\t// Return the parse tree\n};\n\n/*\n*/\nWikiParser.prototype.loadRemoteTiddler = function(url) {\n\tvar self = this;\n\t$tw.utils.httpRequest({\n\t\turl: url,\n\t\ttype: \"GET\",\n\t\tcallback: function(err,data) {\n\t\t\tif(!err) {\n\t\t\t\tvar tiddlers = self.wiki.deserializeTiddlers(\".tid\",data,self.wiki.getCreationFields());\n\t\t\t\t$tw.utils.each(tiddlers,function(tiddler) {\n\t\t\t\t\ttiddler[\"_canonical_uri\"] = url;\n\t\t\t\t});\n\t\t\t\tif(tiddlers) {\n\t\t\t\t\tself.wiki.addTiddlers(tiddlers);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\n/*\n*/\nWikiParser.prototype.setupRules = function(proto,configPrefix) {\n\tvar self = this;\n\tif(!$tw.safemode) {\n\t\t$tw.utils.each(proto,function(object,name) {\n\t\t\tif(self.wiki.getTiddlerText(configPrefix + name,\"enable\") !== \"enable\") {\n\t\t\t\tdelete proto[name];\n\t\t\t}\n\t\t});\n\t}\n};\n\n/*\nInstantiate an array of parse rules\n*/\nWikiParser.prototype.instantiateRules = function(classes,type,startPos) {\n\tvar rulesInfo = [],\n\t\tself = this;\n\t$tw.utils.each(classes,function(RuleClass) {\n\t\t// Instantiate the rule\n\t\tvar rule = new RuleClass(self);\n\t\trule.is = {};\n\t\trule.is[type] = true;\n\t\trule.init(self);\n\t\tvar matchIndex = rule.findNextMatch(startPos);\n\t\tif(matchIndex !== undefined) {\n\t\t\trulesInfo.push({\n\t\t\t\trule: rule,\n\t\t\t\tmatchIndex: matchIndex\n\t\t\t});\n\t\t}\n\t});\n\treturn rulesInfo;\n};\n\n/*\nSkip any whitespace at the current position. Options are:\n\ttreatNewlinesAsNonWhitespace: true if newlines are NOT to be treated as whitespace\n*/\nWikiParser.prototype.skipWhitespace = function(options) {\n\toptions = options || {};\n\tvar whitespaceRegExp = options.treatNewlinesAsNonWhitespace ? /([^\\S\\n]+)/mg : /(\\s+)/mg;\n\twhitespaceRegExp.lastIndex = this.pos;\n\tvar whitespaceMatch = whitespaceRegExp.exec(this.source);\n\tif(whitespaceMatch &amp;&amp; whitespaceMatch.index === this.pos) {\n\t\tthis.pos = whitespaceRegExp.lastIndex;\n\t}\n};\n\n/*\nGet the next match out of an array of parse rule instances\n*/\nWikiParser.prototype.findNextMatch = function(rules,startPos) {\n\t// Find the best matching rule by finding the closest match position\n\tvar matchingRule,\n\t\tmatchingRulePos = this.sourceLength;\n\t// Step through each rule\n\tfor(var t=0; t&lt;rules.length; t++) {\n\t\tvar ruleInfo = rules[t];\n\t\t// Ask the rule to get the next match if we've moved past the current one\n\t\tif(ruleInfo.matchIndex !== undefined  &amp;&amp; ruleInfo.matchIndex &lt; startPos) {\n\t\t\truleInfo.matchIndex = ruleInfo.rule.findNextMatch(startPos);\n\t\t}\n\t\t// Adopt this match if it's closer than the current best match\n\t\tif(ruleInfo.matchIndex !== undefined &amp;&amp; ruleInfo.matchIndex &lt;= matchingRulePos) {\n\t\t\tmatchingRule = ruleInfo;\n\t\t\tmatchingRulePos = ruleInfo.matchIndex;\n\t\t}\n\t}\n\treturn matchingRule;\n};\n\n/*\nParse any pragmas at the beginning of a block of parse text\n*/\nWikiParser.prototype.parsePragmas = function() {\n\tvar currentTreeBranch = this.tree;\n\twhile(true) {\n\t\t// Skip whitespace\n\t\tthis.skipWhitespace();\n\t\t// Check for the end of the text\n\t\tif(this.pos &gt;= this.sourceLength) {\n\t\t\tbreak;\n\t\t}\n\t\t// Check if we've arrived at a pragma rule match\n\t\tvar nextMatch = this.findNextMatch(this.pragmaRules,this.pos);\n\t\t// If not, just exit\n\t\tif(!nextMatch || nextMatch.matchIndex !== this.pos) {\n\t\t\tbreak;\n\t\t}\n\t\t// Process the pragma rule\n\t\tvar subTree = nextMatch.rule.parse();\n\t\tif(subTree.length &gt; 0) {\n\t\t\t// Quick hack; we only cope with a single parse tree node being returned, which is true at the moment\n\t\t\tcurrentTreeBranch.push.apply(currentTreeBranch,subTree);\n\t\t\tsubTree[0].children = [];\n\t\t\tcurrentTreeBranch = subTree[0].children;\n\t\t}\n\t}\n\treturn currentTreeBranch;\n};\n\n/*\nParse a block from the current position\n\tterminatorRegExpString: optional regular expression string that identifies the end of plain paragraphs. Must not include capturing parenthesis\n*/\nWikiParser.prototype.parseBlock = function(terminatorRegExpString) {\n\tvar terminatorRegExp = terminatorRegExpString ? new RegExp(\"(\" + terminatorRegExpString + \"|\\\\r?\\\\n\\\\r?\\\\n)\",\"mg\") : /(\\r?\\n\\r?\\n)/mg;\n\tthis.skipWhitespace();\n\tif(this.pos &gt;= this.sourceLength) {\n\t\treturn [];\n\t}\n\t// Look for a block rule that applies at the current position\n\tvar nextMatch = this.findNextMatch(this.blockRules,this.pos);\n\tif(nextMatch &amp;&amp; nextMatch.matchIndex === this.pos) {\n\t\treturn nextMatch.rule.parse();\n\t}\n\t// Treat it as a paragraph if we didn't find a block rule\n\treturn [{type: \"element\", tag: \"p\", children: this.parseInlineRun(terminatorRegExp)}];\n};\n\n/*\nParse a series of blocks of text until a terminating regexp is encountered or the end of the text\n\tterminatorRegExpString: terminating regular expression\n*/\nWikiParser.prototype.parseBlocks = function(terminatorRegExpString) {\n\tif(terminatorRegExpString) {\n\t\treturn this.parseBlocksTerminated(terminatorRegExpString);\n\t} else {\n\t\treturn this.parseBlocksUnterminated();\n\t}\n};\n\n/*\nParse a block from the current position to the end of the text\n*/\nWikiParser.prototype.parseBlocksUnterminated = function() {\n\tvar tree = [];\n\twhile(this.pos &lt; this.sourceLength) {\n\t\ttree.push.apply(tree,this.parseBlock());\n\t}\n\treturn tree;\n};\n\n/*\nParse blocks of text until a terminating regexp is encountered\n*/\nWikiParser.prototype.parseBlocksTerminated = function(terminatorRegExpString) {\n\tvar terminatorRegExp = new RegExp(\"(\" + terminatorRegExpString + \")\",\"mg\"),\n\t\ttree = [];\n\t// Skip any whitespace\n\tthis.skipWhitespace();\n\t//  Check if we've got the end marker\n\tterminatorRegExp.lastIndex = this.pos;\n\tvar match = terminatorRegExp.exec(this.source);\n\t// Parse the text into blocks\n\twhile(this.pos &lt; this.sourceLength &amp;&amp; !(match &amp;&amp; match.index === this.pos)) {\n\t\tvar blocks = this.parseBlock(terminatorRegExpString);\n\t\ttree.push.apply(tree,blocks);\n\t\t// Skip any whitespace\n\t\tthis.skipWhitespace();\n\t\t//  Check if we've got the end marker\n\t\tterminatorRegExp.lastIndex = this.pos;\n\t\tmatch = terminatorRegExp.exec(this.source);\n\t}\n\tif(match &amp;&amp; match.index === this.pos) {\n\t\tthis.pos = match.index + match[0].length;\n\t}\n\treturn tree;\n};\n\n/*\nParse a run of text at the current position\n\tterminatorRegExp: a regexp at which to stop the run\n\toptions: see below\nOptions available:\n\teatTerminator: move the parse position past any encountered terminator (default false)\n*/\nWikiParser.prototype.parseInlineRun = function(terminatorRegExp,options) {\n\tif(terminatorRegExp) {\n\t\treturn this.parseInlineRunTerminated(terminatorRegExp,options);\n\t} else {\n\t\treturn this.parseInlineRunUnterminated(options);\n\t}\n};\n\nWikiParser.prototype.parseInlineRunUnterminated = function(options) {\n\tvar tree = [];\n\t// Find the next occurrence of an inline rule\n\tvar nextMatch = this.findNextMatch(this.inlineRules,this.pos);\n\t// Loop around the matches until we've reached the end of the text\n\twhile(this.pos &lt; this.sourceLength &amp;&amp; nextMatch) {\n\t\t// Process the text preceding the run rule\n\t\tif(nextMatch.matchIndex &gt; this.pos) {\n\t\t\tthis.pushTextWidget(tree,this.source.substring(this.pos,nextMatch.matchIndex));\n\t\t\tthis.pos = nextMatch.matchIndex;\n\t\t}\n\t\t// Process the run rule\n\t\ttree.push.apply(tree,nextMatch.rule.parse());\n\t\t// Look for the next run rule\n\t\tnextMatch = this.findNextMatch(this.inlineRules,this.pos);\n\t}\n\t// Process the remaining text\n\tif(this.pos &lt; this.sourceLength) {\n\t\tthis.pushTextWidget(tree,this.source.substr(this.pos));\n\t}\n\tthis.pos = this.sourceLength;\n\treturn tree;\n};\n\nWikiParser.prototype.parseInlineRunTerminated = function(terminatorRegExp,options) {\n\toptions = options || {};\n\tvar tree = [];\n\t// Find the next occurrence of the terminator\n\tterminatorRegExp.lastIndex = this.pos;\n\tvar terminatorMatch = terminatorRegExp.exec(this.source);\n\t// Find the next occurrence of a inlinerule\n\tvar inlineRuleMatch = this.findNextMatch(this.inlineRules,this.pos);\n\t// Loop around until we've reached the end of the text\n\twhile(this.pos &lt; this.sourceLength &amp;&amp; (terminatorMatch || inlineRuleMatch)) {\n\t\t// Return if we've found the terminator, and it precedes any inline rule match\n\t\tif(terminatorMatch) {\n\t\t\tif(!inlineRuleMatch || inlineRuleMatch.matchIndex &gt;= terminatorMatch.index) {\n\t\t\t\tif(terminatorMatch.index &gt; this.pos) {\n\t\t\t\t\tthis.pushTextWidget(tree,this.source.substring(this.pos,terminatorMatch.index));\n\t\t\t\t}\n\t\t\t\tthis.pos = terminatorMatch.index;\n\t\t\t\tif(options.eatTerminator) {\n\t\t\t\t\tthis.pos += terminatorMatch[0].length;\n\t\t\t\t}\n\t\t\t\treturn tree;\n\t\t\t}\n\t\t}\n\t\t// Process any inline rule, along with the text preceding it\n\t\tif(inlineRuleMatch) {\n\t\t\t// Preceding text\n\t\t\tif(inlineRuleMatch.matchIndex &gt; this.pos) {\n\t\t\t\tthis.pushTextWidget(tree,this.source.substring(this.pos,inlineRuleMatch.matchIndex));\n\t\t\t\tthis.pos = inlineRuleMatch.matchIndex;\n\t\t\t}\n\t\t\t// Process the inline rule\n\t\t\ttree.push.apply(tree,inlineRuleMatch.rule.parse());\n\t\t\t// Look for the next inline rule\n\t\t\tinlineRuleMatch = this.findNextMatch(this.inlineRules,this.pos);\n\t\t\t// Look for the next terminator match\n\t\t\tterminatorRegExp.lastIndex = this.pos;\n\t\t\tterminatorMatch = terminatorRegExp.exec(this.source);\n\t\t}\n\t}\n\t// Process the remaining text\n\tif(this.pos &lt; this.sourceLength) {\n\t\tthis.pushTextWidget(tree,this.source.substr(this.pos));\n\t}\n\tthis.pos = this.sourceLength;\n\treturn tree;\n};\n\n/*\nPush a text widget onto an array, respecting the configTrimWhiteSpace setting\n*/\nWikiParser.prototype.pushTextWidget = function(array,text) {\n\tif(this.configTrimWhiteSpace) {\n\t\ttext = $tw.utils.trim(text);\n\t}\n\tif(text) {\n\t\tarray.push({type: \"text\", text: text});\n\t}\n};\n\n/*\nParse zero or more class specifiers `.classname`\n*/\nWikiParser.prototype.parseClasses = function() {\n\tvar classRegExp = /\\.([^\\s\\.]+)/mg,\n\t\tclassNames = [];\n\tclassRegExp.lastIndex = this.pos;\n\tvar match = classRegExp.exec(this.source);\n\twhile(match &amp;&amp; match.index === this.pos) {\n\t\tthis.pos = match.index + match[0].length;\n\t\tclassNames.push(match[1]);\n\t\tmatch = classRegExp.exec(this.source);\n\t}\n\treturn classNames;\n};\n\n/*\nAmend the rules used by this instance of the parser\n\ttype: `only` keeps just the named rules, `except` keeps all but the named rules\n\tnames: array of rule names\n*/\nWikiParser.prototype.amendRules = function(type,names) {\n\tnames = names || [];\n\t// Define the filter function\n\tvar target;\n\tif(type === \"only\") {\n\t\ttarget = true;\n\t} else if(type === \"except\") {\n\t\ttarget = false;\n\t} else {\n\t\treturn;\n\t}\n\t// Define a function to process each of our rule arrays\n\tvar processRuleArray = function(ruleArray) {\n\t\tfor(var t=ruleArray.length-1; t&gt;=0; t--) {\n\t\t\tif((names.indexOf(ruleArray[t].rule.name) === -1) === target) {\n\t\t\t\truleArray.splice(t,1);\n\t\t\t}\n\t\t}\n\t};\n\t// Process each rule array\n\tprocessRuleArray(this.pragmaRules);\n\tprocessRuleArray(this.blockRules);\n\tprocessRuleArray(this.inlineRules);\n};\n\nexports[\"text/vnd.tiddlywiki\"] = WikiParser;\n\n})();\n\n","type":"application/javascript","module-type":"parser"},"$:/core/modules/parsers/wikiparser/rules/wikirulebase.js":{"title":"$:/core/modules/parsers/wikiparser/rules/wikirulebase.js","text":"/*\\\ntitle: $:/core/modules/parsers/wikiparser/rules/wikirulebase.js\ntype: application/javascript\nmodule-type: global\n\nBase class for wiki parser rules\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nThis constructor is always overridden with a blank constructor, and so shouldn't be used\n*/\nvar WikiRuleBase = function() {\n};\n\n/*\nTo be overridden by individual rules\n*/\nWikiRuleBase.prototype.init = function(parser) {\n\tthis.parser = parser;\n};\n\n/*\nDefault implementation of findNextMatch uses RegExp matching\n*/\nWikiRuleBase.prototype.findNextMatch = function(startPos) {\n\tthis.matchRegExp.lastIndex = startPos;\n\tthis.match = this.matchRegExp.exec(this.parser.source);\n\treturn this.match ? this.match.index : undefined;\n};\n\nexports.WikiRuleBase = WikiRuleBase;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/pluginswitcher.js":{"title":"$:/core/modules/pluginswitcher.js","text":"/*\\\ntitle: $:/core/modules/pluginswitcher.js\ntype: application/javascript\nmodule-type: global\n\nManages switching plugins for themes and languages.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\noptions:\nwiki: wiki store to be used\npluginType: type of plugin to be switched\ncontrollerTitle: title of tiddler used to control switching of this resource\ndefaultPlugins: array of default plugins to be used if nominated plugin isn't found\nonSwitch: callback when plugin is switched (single parameter is array of plugin titles)\n*/\nfunction PluginSwitcher(options) {\n\tthis.wiki = options.wiki;\n\tthis.pluginType = options.pluginType;\n\tthis.controllerTitle = options.controllerTitle;\n\tthis.defaultPlugins = options.defaultPlugins || [];\n\tthis.onSwitch = options.onSwitch;\n\t// Switch to the current plugin\n\tthis.switchPlugins();\n\t// Listen for changes to the selected plugin\n\tvar self = this;\n\tthis.wiki.addEventListener(\"change\",function(changes) {\n\t\tif($tw.utils.hop(changes,self.controllerTitle)) {\n\t\t\tself.switchPlugins();\n\t\t}\n\t});\n}\n\nPluginSwitcher.prototype.switchPlugins = function() {\n\t// Get the name of the current theme\n\tvar selectedPluginTitle = this.wiki.getTiddlerText(this.controllerTitle);\n\t// If it doesn't exist, then fallback to one of the default themes\n\tvar index = 0;\n\twhile(!this.wiki.getTiddler(selectedPluginTitle) &amp;&amp; index &lt; this.defaultPlugins.length) {\n\t\tselectedPluginTitle = this.defaultPlugins[index++];\n\t}\n\t// Accumulate the titles of the plugins that we need to load\n\tvar plugins = [],\n\t\tself = this,\n\t\taccumulatePlugin = function(title) {\n\t\t\tvar tiddler = self.wiki.getTiddler(title);\n\t\t\tif(tiddler &amp;&amp; tiddler.isPlugin() &amp;&amp; plugins.indexOf(title) === -1) {\n\t\t\t\tplugins.push(title);\n\t\t\t\tvar pluginInfo = JSON.parse(self.wiki.getTiddlerText(title)),\n\t\t\t\t\tdependents = $tw.utils.parseStringArray(tiddler.fields.dependents || \"\");\n\t\t\t\t$tw.utils.each(dependents,function(title) {\n\t\t\t\t\taccumulatePlugin(title);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\taccumulatePlugin(selectedPluginTitle);\n\t// Read the plugin info for the incoming plugins\n\tvar changes = $tw.wiki.readPluginInfo(plugins);\n\t// Unregister any existing theme tiddlers\n\tvar unregisteredTiddlers = $tw.wiki.unregisterPluginTiddlers(this.pluginType);\n\t// Register any new theme tiddlers\n\tvar registeredTiddlers = $tw.wiki.registerPluginTiddlers(this.pluginType,plugins);\n\t// Unpack the current theme tiddlers\n\t$tw.wiki.unpackPluginTiddlers();\n\t// Call the switch handler\n\tif(this.onSwitch) {\n\t\tthis.onSwitch(plugins);\n\t}\n};\n\nexports.PluginSwitcher = PluginSwitcher;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/saver-handler.js":{"title":"$:/core/modules/saver-handler.js","text":"/*\\\ntitle: $:/core/modules/saver-handler.js\ntype: application/javascript\nmodule-type: global\n\nThe saver handler tracks changes to the store and handles saving the entire wiki via saver modules.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nInstantiate the saver handler with the following options:\nwiki: wiki to be synced\ndirtyTracking: true if dirty tracking should be performed\n*/\nfunction SaverHandler(options) {\n\tvar self = this;\n\tthis.wiki = options.wiki;\n\tthis.dirtyTracking = options.dirtyTracking;\n\tthis.preloadDirty = options.preloadDirty || [];\n\tthis.pendingAutoSave = false;\n\t// Make a logger\n\tthis.logger = new $tw.utils.Logger(\"saver-handler\");\n\t// Initialise our savers\n\tif($tw.browser) {\n\t\tthis.initSavers();\n\t}\n\t// Only do dirty tracking if required\n\tif($tw.browser &amp;&amp; this.dirtyTracking) {\n\t\t// Compile the dirty tiddler filter\n\t\tthis.filterFn = this.wiki.compileFilter(this.wiki.getTiddlerText(this.titleSyncFilter));\n\t\t// Count of changes that have not yet been saved\n\t\tvar filteredChanges = self.filterFn.call(self.wiki,function(iterator) {\n\t\t\t\t$tw.utils.each(self.preloadDirty,function(title) {\n\t\t\t\t\tvar tiddler = self.wiki.getTiddler(title);\n\t\t\t\t\titerator(tiddler,title);\n\t\t\t\t});\n\t\t});\n\t\tthis.numChanges = filteredChanges.length;\n\t\t// Listen out for changes to tiddlers\n\t\tthis.wiki.addEventListener(\"change\",function(changes) {\n\t\t\t// Filter the changes so that we only count changes to tiddlers that we care about\n\t\t\tvar filteredChanges = self.filterFn.call(self.wiki,function(iterator) {\n\t\t\t\t$tw.utils.each(changes,function(change,title) {\n\t\t\t\t\tvar tiddler = self.wiki.getTiddler(title);\n\t\t\t\t\titerator(tiddler,title);\n\t\t\t\t});\n\t\t\t});\n\t\t\t// Adjust the number of changes\n\t\t\tself.numChanges += filteredChanges.length;\n\t\t\tself.updateDirtyStatus();\n\t\t\t// Do any autosave if one is pending and there's no more change events\n\t\t\tif(self.pendingAutoSave &amp;&amp; self.wiki.getSizeOfTiddlerEventQueue() === 0) {\n\t\t\t\t// Check if we're dirty\n\t\t\t\tif(self.numChanges &gt; 0) {\n\t\t\t\t\tself.saveWiki({\n\t\t\t\t\t\tmethod: \"autosave\",\n\t\t\t\t\t\tdownloadType: \"text/plain\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tself.pendingAutoSave = false;\n\t\t\t}\n\t\t});\n\t\t// Listen for the autosave event\n\t\t$tw.rootWidget.addEventListener(\"tm-auto-save-wiki\",function(event) {\n\t\t\t// Do the autosave unless there are outstanding tiddler change events\n\t\t\tif(self.wiki.getSizeOfTiddlerEventQueue() === 0) {\n\t\t\t\t// Check if we're dirty\n\t\t\t\tif(self.numChanges &gt; 0) {\n\t\t\t\t\tself.saveWiki({\n\t\t\t\t\t\tmethod: \"autosave\",\n\t\t\t\t\t\tdownloadType: \"text/plain\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Otherwise put ourselves in the \"pending autosave\" state and wait for the change event before we do the autosave\n\t\t\t\tself.pendingAutoSave = true;\n\t\t\t}\n\t\t});\n\t\t// Set up our beforeunload handler\n\t\t$tw.addUnloadTask(function(event) {\n\t\t\tvar confirmationMessage;\n\t\t\tif(self.isDirty()) {\n\t\t\t\tconfirmationMessage = $tw.language.getString(\"UnsavedChangesWarning\");\n\t\t\t\tevent.returnValue = confirmationMessage; // Gecko\n\t\t\t}\n\t\t\treturn confirmationMessage;\n\t\t});\n\t}\n\t// Install the save action handlers\n\tif($tw.browser) {\n\t\t$tw.rootWidget.addEventListener(\"tm-save-wiki\",function(event) {\n\t\t\tself.saveWiki({\n\t\t\t\ttemplate: event.param,\n\t\t\t\tdownloadType: \"text/plain\",\n\t\t\t\tvariables: event.paramObject\n\t\t\t});\n\t\t});\n\t\t$tw.rootWidget.addEventListener(\"tm-download-file\",function(event) {\n\t\t\tself.saveWiki({\n\t\t\t\tmethod: \"download\",\n\t\t\t\ttemplate: event.param,\n\t\t\t\tdownloadType: \"text/plain\",\n\t\t\t\tvariables: event.paramObject\n\t\t\t});\n\t\t});\n\t}\n}\n\nSaverHandler.prototype.titleSyncFilter = \"$:/config/SaverFilter\";\nSaverHandler.prototype.titleAutoSave = \"$:/config/AutoSave\";\nSaverHandler.prototype.titleSavedNotification = \"$:/language/Notifications/Save/Done\";\n\n/*\nSelect the appropriate saver modules and set them up\n*/\nSaverHandler.prototype.initSavers = function(moduleType) {\n\tmoduleType = moduleType || \"saver\";\n\t// Instantiate the available savers\n\tthis.savers = [];\n\tvar self = this;\n\t$tw.modules.forEachModuleOfType(moduleType,function(title,module) {\n\t\tif(module.canSave(self)) {\n\t\t\tself.savers.push(module.create(self.wiki));\n\t\t}\n\t});\n\t// Sort the savers into priority order\n\tthis.savers.sort(function(a,b) {\n\t\tif(a.info.priority &lt; b.info.priority) {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\tif(a.info.priority &gt; b.info.priority) {\n\t\t\t\treturn +1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t});\n};\n\n/*\nSave the wiki contents. Options are:\n\tmethod: \"save\", \"autosave\" or \"download\"\n\ttemplate: the tiddler containing the template to save\n\tdownloadType: the content type for the saved file\n*/\nSaverHandler.prototype.saveWiki = function(options) {\n\toptions = options || {};\n\tvar self = this,\n\t\tmethod = options.method || \"save\";\n\t// Ignore autosave if disabled\n\tif(method === \"autosave\" &amp;&amp; ($tw.config.disableAutoSave || this.wiki.getTiddlerText(this.titleAutoSave,\"yes\") !== \"yes\")) {\n\t\treturn false;\n\t}\n\tvar\tvariables = options.variables || {},\n\t\ttemplate = options.template || \"$:/core/save/all\",\n\t\tdownloadType = options.downloadType || \"text/plain\",\n\t\ttext = this.wiki.renderTiddler(downloadType,template,options),\n\t\tcallback = function(err) {\n\t\t\tif(err) {\n\t\t\t\talert($tw.language.getString(\"Error/WhileSaving\") + \":\\n\\n\" + err);\n\t\t\t} else {\n\t\t\t\t// Clear the task queue if we're saving (rather than downloading)\n\t\t\t\tif(method !== \"download\") {\n\t\t\t\t\tself.numChanges = 0;\n\t\t\t\t\tself.updateDirtyStatus();\n\t\t\t\t}\n\t\t\t\t$tw.notifier.display(self.titleSavedNotification);\n\t\t\t\tif(options.callback) {\n\t\t\t\t\toptions.callback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t// Call the highest priority saver that supports this method\n\tfor(var t=this.savers.length-1; t&gt;=0; t--) {\n\t\tvar saver = this.savers[t];\n\t\tif(saver.info.capabilities.indexOf(method) !== -1 &amp;&amp; saver.save(text,method,callback,{variables: {filename: variables.filename}})) {\n\t\t\tthis.logger.log(\"Saving wiki with method\",method,\"through saver\",saver.info.name);\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n/*\nChecks whether the wiki is dirty (ie the window shouldn't be closed)\n*/\nSaverHandler.prototype.isDirty = function() {\n\treturn this.numChanges &gt; 0;\n};\n\n/*\nUpdate the document body with the class \"tc-dirty\" if the wiki has unsaved/unsynced changes\n*/\nSaverHandler.prototype.updateDirtyStatus = function() {\n\tvar self = this;\n\tif($tw.browser) {\n\t\t$tw.utils.toggleClass(document.body,\"tc-dirty\",this.isDirty());\n\t\t$tw.utils.each($tw.windows,function(win) {\n\t\t\t$tw.utils.toggleClass(win.document.body,\"tc-dirty\",self.isDirty());\n\t\t});\n\t}\n};\n\nexports.SaverHandler = SaverHandler;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/savers/andtidwiki.js":{"title":"$:/core/modules/savers/andtidwiki.js","text":"/*\\\ntitle: $:/core/modules/savers/andtidwiki.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via the AndTidWiki Android app\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false, netscape: false, Components: false */\n\"use strict\";\n\nvar AndTidWiki = function(wiki) {\n};\n\nAndTidWiki.prototype.save = function(text,method,callback,options) {\n\tvar filename = options &amp;&amp; options.variables ? options.variables.filename : null;\n\tif (method === \"download\") {\n\t\t// Support download\n\t\tif (window.twi.saveDownload) {\n\t\t\ttry {\n\t\t\t\twindow.twi.saveDownload(text,filename);\n\t\t\t} catch(err) {\n\t\t\t\tif (err.message === \"Method not found\") {\n\t\t\t\t\twindow.twi.saveDownload(text);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar link = document.createElement(\"a\");\n\t\t\tlink.setAttribute(\"href\",\"data:text/plain,\" + encodeURIComponent(text));\n\t\t\tif (filename) {\n\t\t\t    link.setAttribute(\"download\",filename);\n\t\t\t}\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t}\n\t} else if (window.twi.saveWiki) {\n\t\t// Direct save in Tiddloid\n\t\twindow.twi.saveWiki(text);\n\t} else {\n\t\t// Get the pathname of this document\n\t\tvar pathname = decodeURIComponent(document.location.toString().split(\"#\")[0]);\n\t\t// Strip the file://\n\t\tif(pathname.indexOf(\"file://\") === 0) {\n\t\t\tpathname = pathname.substr(7);\n\t\t}\n\t\t// Strip any query or location part\n\t\tvar p = pathname.indexOf(\"?\");\n\t\tif(p !== -1) {\n\t\t\tpathname = pathname.substr(0,p);\n\t\t}\n\t\tp = pathname.indexOf(\"#\");\n\t\tif(p !== -1) {\n\t\t\tpathname = pathname.substr(0,p);\n\t\t}\n\t\t// Save the file\n\t\twindow.twi.saveFile(pathname,text);\n\t}\n\t// Call the callback\n\tcallback(null);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nAndTidWiki.prototype.info = {\n\tname: \"andtidwiki\",\n\tpriority: 1600,\n\tcapabilities: [\"save\", \"autosave\", \"download\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn !!window.twi &amp;&amp; !!window.twi.saveFile;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new AndTidWiki(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/beaker.js":{"title":"$:/core/modules/savers/beaker.js","text":"/*\\\ntitle: $:/core/modules/savers/beaker.js\ntype: application/javascript\nmodule-type: saver\n\nSaves files using the Beaker browser's (https://beakerbrowser.com) Dat protocol (https://datproject.org/)\nCompatible with beaker &gt;= V0.7.2\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSet up the saver\n*/\nvar BeakerSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nBeakerSaver.prototype.save = function(text,method,callback) {\n\tvar dat = new DatArchive(\"\" + window.location),\n\t\tpathname = (\"\" + window.location.pathname).split(\"#\")[0];\n\tdat.stat(pathname).then(function(value) {\n\t\tif(value.isDirectory()) {\n\t\t\tpathname = pathname + \"/index.html\";\n\t\t}\n\t\tdat.writeFile(pathname,text,\"utf8\").then(function(value) {\n\t\t\tcallback(null);\n\t\t},function(reason) {\n\t\t\tcallback(\"Beaker Saver Write Error: \" + reason);\n\t\t});\n\t},function(reason) {\n\t\tcallback(\"Beaker Saver Stat Error: \" + reason);\n\t});\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nBeakerSaver.prototype.info = {\n\tname: \"beaker\",\n\tpriority: 3000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn !!window.DatArchive &amp;&amp; location.protocol===\"dat:\";\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new BeakerSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/custom.js":{"title":"$:/core/modules/savers/custom.js","text":"/*\\\ntitle: $:/core/modules/savers/custom.js\ntype: application/javascript\nmodule-type: saver\n\nLooks for `window.$tw.customSaver` first on the current window, then\non the parent window (of an iframe). If present, the saver must define\n\tsave: function(text,method,callback) { ... }\nand the saver may define\n\tpriority: number\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar findSaver = function(window) {\n\ttry {\n\t\treturn window &amp;&amp; window.$tw &amp;&amp; window.$tw.customSaver;\n\t} catch (err) {\n\t\t// Catching the exception is the most reliable way to detect cross-origin iframe errors.\n\t\t// For example, instead of saying that `window.parent.$tw` is undefined, Firefox will throw\n\t\t//   Uncaught DOMException: Permission denied to access property \"$tw\" on cross-origin object\n\t\tconsole.log({ msg: \"custom saver is disabled\", reason: err });\n\t\treturn null;\n\t}\n}\nvar saver = findSaver(window) || findSaver(window.parent) || {};\n\nvar CustomSaver = function(wiki) {\n};\n\nCustomSaver.prototype.save = function(text,method,callback) {\n\treturn saver.save(text, method, callback);\n};\n\n/*\nInformation about this saver\n*/\nCustomSaver.prototype.info = {\n\tname: \"custom\",\n\tpriority: saver.priority || 4000,\n\tcapabilities: [\"save\",\"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn !!(saver.save);\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new CustomSaver(wiki);\n};\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/download.js":{"title":"$:/core/modules/savers/download.js","text":"/*\\\ntitle: $:/core/modules/savers/download.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via HTML5's download APIs\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar DownloadSaver = function(wiki) {\n};\n\nDownloadSaver.prototype.save = function(text,method,callback,options) {\n\toptions = options || {};\n\t// Get the current filename\n\tvar filename = options.variables.filename;\n\tif(!filename) {\n\t\tvar p = document.location.pathname.lastIndexOf(\"/\");\n\t\tif(p !== -1) {\n\t\t\t// We decode the pathname because document.location is URL encoded by the browser\n\t\t\tfilename = decodeURIComponent(document.location.pathname.substr(p+1));\n\t\t}\n\t}\n\tif(!filename) {\n\t\tfilename = \"tiddlywiki.html\";\n\t}\n\t// Set up the link\n\tvar link = document.createElement(\"a\");\n\tif(Blob !== undefined) {\n\t\tvar blob = new Blob([text], {type: \"text/html\"});\n\t\tlink.setAttribute(\"href\", URL.createObjectURL(blob));\n\t} else {\n\t\tlink.setAttribute(\"href\",\"data:text/html,\" + encodeURIComponent(text));\n\t}\n\tlink.setAttribute(\"download\",filename);\n\tdocument.body.appendChild(link);\n\tlink.click();\n\tdocument.body.removeChild(link);\n\t// Callback that we succeeded\n\tcallback(null);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nDownloadSaver.prototype.info = {\n\tname: \"download\",\n\tpriority: 100\n};\n\nObject.defineProperty(DownloadSaver.prototype.info, \"capabilities\", {\n\tget: function() {\n\t\tvar capabilities = [\"save\", \"download\"];\n\t\tif(($tw.wiki.getTextReference(\"$:/config/DownloadSaver/AutoSave\") || \"\").toLowerCase() === \"yes\") {\n\t\t\tcapabilities.push(\"autosave\");\n\t\t}\n\t\treturn capabilities;\n\t}\n});\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn document.createElement(\"a\").download !== undefined;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new DownloadSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/fsosaver.js":{"title":"$:/core/modules/savers/fsosaver.js","text":"/*\\\ntitle: $:/core/modules/savers/fsosaver.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via MS FileSystemObject ActiveXObject\n\nNote: Since TiddlyWiki's markup contains the MOTW, the FileSystemObject normally won't be available. \nHowever, if the wiki is loaded as an .HTA file (Windows HTML Applications) then the FSO can be used.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar FSOSaver = function(wiki) {\n};\n\nFSOSaver.prototype.save = function(text,method,callback) {\n\t// Get the pathname of this document\n\tvar pathname = unescape(document.location.pathname);\n\t// Test for a Windows path of the form /x:\\blah...\n\tif(/^\\/[A-Z]\\:\\\\[^\\\\]+/i.test(pathname)) {\t// ie: ^/[a-z]:/[^/]+\n\t\t// Remove the leading slash\n\t\tpathname = pathname.substr(1);\n\t} else if(document.location.hostname !== \"\" &amp;&amp; /^\\/\\\\[^\\\\]+\\\\[^\\\\]+/i.test(pathname)) {\t// test for \\\\server\\share\\blah... - ^/[^/]+/[^/]+\n\t\t// Remove the leading slash\n\t\tpathname = pathname.substr(1);\n\t\t// reconstruct UNC path\n\t\tpathname = \"\\\\\\\\\" + document.location.hostname + pathname;\n\t} else {\n\t\treturn false;\n\t}\n\t// Save the file (as UTF-16)\n\tvar fso = new ActiveXObject(\"Scripting.FileSystemObject\");\n\tvar file = fso.OpenTextFile(pathname,2,-1,-1);\n\tfile.Write(text);\n\tfile.Close();\n\t// Callback that we succeeded\n\tcallback(null);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nFSOSaver.prototype.info = {\n\tname: \"FSOSaver\",\n\tpriority: 120,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\ttry {\n\t\treturn (window.location.protocol === \"file:\") &amp;&amp; !!(new ActiveXObject(\"Scripting.FileSystemObject\"));\n\t} catch(e) { return false; }\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new FSOSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/gitea.js":{"title":"$:/core/modules/savers/gitea.js","text":"/*\\\ntitle: $:/core/modules/savers/gitea.js\ntype: application/javascript\nmodule-type: saver\n\nSaves wiki by pushing a commit to the gitea\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar GiteaSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nGiteaSaver.prototype.save = function(text,method,callback) {\n\tvar self = this,\n\t\tusername = this.wiki.getTiddlerText(\"$:/Gitea/Username\"),\n\t\tpassword = $tw.utils.getPassword(\"Gitea\"),\n\t\trepo = this.wiki.getTiddlerText(\"$:/Gitea/Repo\"),\n\t\tpath = this.wiki.getTiddlerText(\"$:/Gitea/Path\",\"\"),\n\t\tfilename = this.wiki.getTiddlerText(\"$:/Gitea/Filename\"),\n\t\tbranch = this.wiki.getTiddlerText(\"$:/Gitea/Branch\") || \"master\",\n\t\tendpoint = this.wiki.getTiddlerText(\"$:/Gitea/ServerURL\") || \"https://gitea\",\n\t\theaders = {\n\t\t\t\"Accept\": \"application/json\",\n\t\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\n\t\t\t\"Authorization\": \"token \" + password\n\t\t};\n\t// Bail if we don't have everything we need\n\tif(!username || !password || !repo || !filename) {\n\t\treturn false;\n\t}\n\t// Make sure the path start and ends with a slash\n\tif(path.substring(0,1) !== \"/\") {\n\t\tpath = \"/\" + path;\n\t}\n\tif(path.substring(path.length - 1) !== \"/\") {\n\t\tpath = path + \"/\";\n\t}\n\t// Compose the base URI\n\tvar uri = endpoint + \"/repos/\" + repo + \"/contents\" + path;\n\t// Perform a get request to get the details (inc shas) of files in the same path as our file\n\t$tw.utils.httpRequest({\n\t\turl: uri,\n\t\ttype: \"GET\",\n\t\theaders: headers,\n\t\tdata: {\n\t\t\tref: branch\n\t\t},\n\t\tcallback: function(err,getResponseDataJson,xhr) {\n\t\t\tvar getResponseData,sha = \"\";\n\t\t\tif(err &amp;&amp; xhr.status !== 404) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tvar use_put = true;\n\t\t\tif(xhr.status !== 404) {\n\t\t\t\tgetResponseData = JSON.parse(getResponseDataJson);\n\t\t\t\t$tw.utils.each(getResponseData,function(details) {\n\t\t\t\t\tif(details.name === filename) {\n\t\t\t\t\t\tsha = details.sha;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(sha === \"\"){\n\t\t\t\t\tuse_put = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\tmessage: $tw.language.getRawString(\"ControlPanel/Saving/GitService/CommitMessage\"),\n\t\t\t\tcontent: $tw.utils.base64Encode(text),\n\t\t\t\tsha: sha\n\t\t\t};\n\t\t\t$tw.utils.httpRequest({\n\t\t\t\turl: endpoint + \"/repos/\" + repo + \"/branches/\" + branch,\n\t\t\t\ttype: \"GET\",\n\t\t\t\theaders: headers,\n\t\t\t\tcallback: function(err,getResponseDataJson,xhr) {\n\t\t\t\t\tif(xhr.status === 404) {\n\t\t\t\t\t\tcallback(\"Please ensure the branch in the Gitea repo exists\");\n\t\t\t\t\t}else{\n\t\t\t\t\t\tdata[\"branch\"] = branch;\n\t\t\t\t\t\tself.upload(uri + filename, use_put?\"PUT\":\"POST\", headers, data, callback);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\treturn true;\n};\n\nGiteaSaver.prototype.upload = function(uri,method,headers,data,callback) {\n\t$tw.utils.httpRequest({\n\t\turl: uri,\n\t\ttype: method,\n\t\theaders: headers,\n\t\tdata: JSON.stringify(data),\n\t\tcallback: function(err,putResponseDataJson,xhr) {\n\t\t\tif(err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tvar putResponseData = JSON.parse(putResponseDataJson);\n\t\t\tcallback(null);\n\t\t}\n\t});\n};\n\n/*\nInformation about this saver\n*/\nGiteaSaver.prototype.info = {\n\tname: \"Gitea\",\n\tpriority: 2000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new GiteaSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/github.js":{"title":"$:/core/modules/savers/github.js","text":"/*\\\ntitle: $:/core/modules/savers/github.js\ntype: application/javascript\nmodule-type: saver\n\nSaves wiki by pushing a commit to the GitHub v3 REST API\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar GitHubSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nGitHubSaver.prototype.save = function(text,method,callback) {\n\tvar self = this,\n\t\tusername = this.wiki.getTiddlerText(\"$:/GitHub/Username\"),\n\t\tpassword = $tw.utils.getPassword(\"github\"),\n\t\trepo = this.wiki.getTiddlerText(\"$:/GitHub/Repo\"),\n\t\tpath = this.wiki.getTiddlerText(\"$:/GitHub/Path\",\"\"),\n\t\tfilename = this.wiki.getTiddlerText(\"$:/GitHub/Filename\"),\n\t\tbranch = this.wiki.getTiddlerText(\"$:/GitHub/Branch\") || \"main\",\n\t\tendpoint = this.wiki.getTiddlerText(\"$:/GitHub/ServerURL\") || \"https://api.github.com\",\n\t\theaders = {\n\t\t\t\"Accept\": \"application/vnd.github.v3+json\",\n\t\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\n\t\t\t\"Authorization\": \"Basic \" + window.btoa(username + \":\" + password),\n\t\t\t\"If-None-Match\": \"\"\n\t\t};\n\t// Bail if we don't have everything we need\n\tif(!username || !password || !repo || !filename) {\n\t\treturn false;\n\t}\n\t// Make sure the path start and ends with a slash\n\tif(path.substring(0,1) !== \"/\") {\n\t\tpath = \"/\" + path;\n\t}\n\tif(path.substring(path.length - 1) !== \"/\") {\n\t\tpath = path + \"/\";\n\t}\n\t// Compose the base URI\n\tvar uri = endpoint + \"/repos/\" + repo + \"/contents\" + path;\n\t// Perform a get request to get the details (inc shas) of files in the same path as our file\n\t$tw.utils.httpRequest({\n\t\turl: uri,\n\t\ttype: \"GET\",\n\t\theaders: headers,\n\t\tdata: {\n\t\t\tref: branch\n\t\t},\n\t\tcallback: function(err,getResponseDataJson,xhr) {\n\t\t\tvar getResponseData,sha = \"\";\n\t\t\tif(err &amp;&amp; xhr.status !== 404) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tif(xhr.status !== 404) {\n\t\t\t\tgetResponseData = JSON.parse(getResponseDataJson);\n\t\t\t\t$tw.utils.each(getResponseData,function(details) {\n\t\t\t\t\tif(details.name === filename) {\n\t\t\t\t\t\tsha = details.sha;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\tmessage: $tw.language.getRawString(\"ControlPanel/Saving/GitService/CommitMessage\"),\n\t\t\t\tcontent: $tw.utils.base64Encode(text),\n\t\t\t\tbranch: branch,\n\t\t\t\tsha: sha\n\t\t\t};\n\t\t\t// Perform a PUT request to save the file\n\t\t\t$tw.utils.httpRequest({\n\t\t\t\turl: uri + filename,\n\t\t\t\ttype: \"PUT\",\n\t\t\t\theaders: headers,\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tcallback: function(err,putResponseDataJson,xhr) {\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\tvar putResponseData = JSON.parse(putResponseDataJson);\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nGitHubSaver.prototype.info = {\n\tname: \"github\",\n\tpriority: 2000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new GitHubSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/gitlab.js":{"title":"$:/core/modules/savers/gitlab.js","text":"/*\\\ntitle: $:/core/modules/savers/gitlab.js\ntype: application/javascript\nmodule-type: saver\n\nSaves wiki by pushing a commit to the GitLab REST API\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: true */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar GitLabSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nGitLabSaver.prototype.save = function(text,method,callback) {\n\t/* See https://docs.gitlab.com/ee/api/repository_files.html */\n\tvar self = this,\n\t\tusername = this.wiki.getTiddlerText(\"$:/GitLab/Username\"),\n\t\tpassword = $tw.utils.getPassword(\"gitlab\"),\n\t\trepo = this.wiki.getTiddlerText(\"$:/GitLab/Repo\"),\n\t\tpath = this.wiki.getTiddlerText(\"$:/GitLab/Path\",\"\"),\n\t\tfilename = this.wiki.getTiddlerText(\"$:/GitLab/Filename\"),\n\t\tbranch = this.wiki.getTiddlerText(\"$:/GitLab/Branch\") || \"master\",\n\t\tendpoint = this.wiki.getTiddlerText(\"$:/GitLab/ServerURL\") || \"https://gitlab.com/api/v4\",\n\t\theaders = {\n\t\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\n\t\t\t\"Private-Token\": password\n\t\t};\n\t// Bail if we don't have everything we need\n\tif(!username || !password || !repo || !filename) {\n\t\treturn false;\n\t}\n\t// Make sure the path start and ends with a slash\n\tif(path.substring(0,1) !== \"/\") {\n\t\tpath = \"/\" + path;\n\t}\n\tif(path.substring(path.length - 1) !== \"/\") {\n\t\tpath = path + \"/\";\n\t}\n\t// Compose the base URI\n\tvar uri = endpoint + \"/projects/\" + encodeURIComponent(repo) + \"/repository/\";\n\t// Perform a get request to get the details (inc shas) of files in the same path as our file\n\t$tw.utils.httpRequest({\n\t\turl: uri + \"tree/?path=\" + encodeURIComponent(path.replace(/^\\/+|\\/$/g, '')) + \"&amp;branch=\" + encodeURIComponent(branch.replace(/^\\/+|\\/$/g, '')),\n\t\ttype: \"GET\",\n\t\theaders: headers,\n\t\tcallback: function(err,getResponseDataJson,xhr) {\n\t\t\tvar getResponseData,sha = \"\";\n\t\t\tif(err &amp;&amp; xhr.status !== 404) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tvar requestType = \"POST\";\n\t\t\tif(xhr.status !== 404) {\n\t\t\t\tgetResponseData = JSON.parse(getResponseDataJson);\n\t\t\t\t$tw.utils.each(getResponseData,function(details) {\n\t\t\t\t\tif(details.name === filename) {\n\t\t\t\t\t\trequestType = \"PUT\";\n\t\t\t\t\t\tsha = details.sha;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\tcommit_message: $tw.language.getRawString(\"ControlPanel/Saving/GitService/CommitMessage\"),\n\t\t\t\tcontent: text,\n\t\t\t\tbranch: branch,\n\t\t\t\tsha: sha\n\t\t\t};\n\t\t\t// Perform a request to save the file\n\t\t\t$tw.utils.httpRequest({\n\t\t\t\turl: uri + \"files/\" + encodeURIComponent(path.replace(/^\\/+/, '') + filename),\n\t\t\t\ttype: requestType,\n\t\t\t\theaders: headers,\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tcallback: function(err,putResponseDataJson,xhr) {\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\tvar putResponseData = JSON.parse(putResponseDataJson);\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nGitLabSaver.prototype.info = {\n\tname: \"gitlab\",\n\tpriority: 2000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new GitLabSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/hyperdrive.js":{"title":"$:/core/modules/savers/hyperdrive.js","text":"/*\\\ntitle: $:/core/modules/savers/hyperdrive.js\ntype: application/javascript\nmodule-type: saver\n\nSaves files using the Hyperdrive Protocol (https://hypercore-protocol.org/#hyperdrive) Beaker browser beta-1.0 and later (https://beakerbrowser.com)\nCompatible with beaker &gt;= V1.0.0\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSet up the saver\n*/\nvar HyperdriveSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nHyperdriveSaver.prototype.save = function(text,method,callback) {\n\tvar dat = beaker.hyperdrive.drive(\"\" + window.location),\n\t\tpathname = (\"\" + window.location.pathname).split(\"#\")[0];\n\tdat.stat(pathname).then(function(value) {\n\t\tif(value.isDirectory()) {\n\t\t\tpathname = pathname + \"/index.html\";\n\t\t}\n\t\tdat.writeFile(pathname,text,\"utf8\").then(function(value) {\n\t\t\tcallback(null);\n\t\t},function(reason) {\n\t\t\tcallback(\"Hyperdrive Saver Write Error: \" + reason);\n\t\t});\n\t},function(reason) {\n\t\tcallback(\"Hyperdrive Saver Stat Error: \" + reason);\n\t});\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nHyperdriveSaver.prototype.info = {\n\tname: \"beaker-1.x\",\n\tpriority: 3000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn !!window.beaker &amp;&amp; !!beaker.hyperdrive &amp;&amp; location.protocol===\"hyper:\";\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new HyperdriveSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/manualdownload.js":{"title":"$:/core/modules/savers/manualdownload.js","text":"/*\\\ntitle: $:/core/modules/savers/manualdownload.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via HTML5's download APIs\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Title of the tiddler containing the download message\nvar downloadInstructionsTitle = \"$:/language/Modals/Download\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar ManualDownloadSaver = function(wiki) {\n};\n\nManualDownloadSaver.prototype.save = function(text,method,callback) {\n\t$tw.modal.display(downloadInstructionsTitle,{\n\t\tdownloadLink: \"data:text/html,\" + encodeURIComponent(text)\n\t});\n\t// Callback that we succeeded\n\tcallback(null);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nManualDownloadSaver.prototype.info = {\n\tname: \"manualdownload\",\n\tpriority: 0,\n\tcapabilities: [\"save\", \"download\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new ManualDownloadSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/msdownload.js":{"title":"$:/core/modules/savers/msdownload.js","text":"/*\\\ntitle: $:/core/modules/savers/msdownload.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via window.navigator.msSaveBlob()\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar MsDownloadSaver = function(wiki) {\n};\n\nMsDownloadSaver.prototype.save = function(text,method,callback) {\n\t// Get the current filename\n\tvar filename = \"tiddlywiki.html\",\n\t\tp = document.location.pathname.lastIndexOf(\"/\");\n\tif(p !== -1) {\n\t\tfilename = document.location.pathname.substr(p+1);\n\t}\n\t// Set up the link\n\tvar blob = new Blob([text], {type: \"text/html\"});\n\twindow.navigator.msSaveBlob(blob,filename);\n\t// Callback that we succeeded\n\tcallback(null);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nMsDownloadSaver.prototype.info = {\n\tname: \"msdownload\",\n\tpriority: 110,\n\tcapabilities: [\"save\", \"download\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn !!window.navigator.msSaveBlob;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new MsDownloadSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/put.js":{"title":"$:/core/modules/savers/put.js","text":"/*\\\ntitle: $:/core/modules/savers/put.js\ntype: application/javascript\nmodule-type: saver\n\nSaves wiki by performing a PUT request to the server\n\nWorks with any server which accepts a PUT request\nto the current URL, such as a WebDAV server.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nRetrieve ETag if available\n*/\nvar retrieveETag = function(self) {\n\tvar headers = {\n\t\tAccept: \"*/*;charset=UTF-8\"\n\t};\n\t$tw.utils.httpRequest({\n\t\turl: self.uri(),\n\t\ttype: \"HEAD\",\n\t\theaders: headers,\n\t\tcallback: function(err,data,xhr) {\n\t\t\tif(err) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar etag = xhr.getResponseHeader(\"ETag\");\n\t\t\tif(!etag) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.etag = etag.replace(/^W\\//,\"\");\n\t\t}\n\t});\n};\n\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar PutSaver = function(wiki) {\n\tthis.wiki = wiki;\n\tvar self = this;\n\tvar uri = this.uri();\n\t// Async server probe. Until probe finishes, save will fail fast\n\t// See also https://github.com/Jermolene/TiddlyWiki5/issues/2276\n\t$tw.utils.httpRequest({\n\t\turl: uri,\n\t\ttype: \"OPTIONS\",\n\t\tcallback: function(err,data,xhr) {\n\t\t\t// Check DAV header http://www.webdav.org/specs/rfc2518.html#rfc.section.9.1\n\t\t\tif(!err) {\n\t\t\t\tself.serverAcceptsPuts = xhr.status === 200 &amp;&amp; !!xhr.getResponseHeader(\"dav\");\n\t\t\t}\n\t\t}\n\t});\n\tretrieveETag(this);\n};\n\nPutSaver.prototype.uri = function() {\n\treturn document.location.toString().split(\"#\")[0];\n};\n\n// TODO: in case of edit conflict\n// Prompt: Do you want to save over this? Y/N\n// Merging would be ideal, and may be possible using future generic merge flow\nPutSaver.prototype.save = function(text,method,callback) {\n\tif(!this.serverAcceptsPuts) {\n\t\treturn false;\n\t}\n\tvar self = this;\n\tvar headers = {\n\t\t\"Content-Type\": \"text/html;charset=UTF-8\"\n\t};\n\tif(this.etag) {\n\t\theaders[\"If-Match\"] = this.etag;\n\t}\n\t$tw.utils.httpRequest({\n\t\turl: this.uri(),\n\t\ttype: \"PUT\",\n\t\theaders: headers,\n\t\tdata: text,\n\t\tcallback: function(err,data,xhr) {\n\t\t\tif(err) {\n\t\t\t\t// response is textual: \"XMLHttpRequest error code: 412\"\n\t\t\t\tvar status = Number(err.substring(err.indexOf(':') + 2, err.length))\n\t\t\t\tif(status === 412) { // file changed on server\n\t\t\t\t\tcallback($tw.language.getString(\"Error/PutEditConflict\"));\n\t\t\t\t} else if(status === 401) { // authentication required\n\t\t\t\t\tcallback($tw.language.getString(\"Error/PutUnauthorized\"));\n\t\t\t\t} else if(status === 403) { // permission denied\n\t\t\t\t\tcallback($tw.language.getString(\"Error/PutForbidden\"));\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err); // fail\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.etag = xhr.getResponseHeader(\"ETag\");\n\t\t\t\tif(self.etag == null) {\n\t\t\t\t\tretrieveETag(self);\n\t\t\t\t}\n\t\t\t\tcallback(null); // success\n\t\t\t}\n\t\t}\n\t});\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nPutSaver.prototype.info = {\n\tname: \"put\",\n\tpriority: 2000,\n\tcapabilities: [\"save\",\"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn /^https?:/.test(location.protocol);\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new PutSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/tiddlyfox.js":{"title":"$:/core/modules/savers/tiddlyfox.js","text":"/*\\\ntitle: $:/core/modules/savers/tiddlyfox.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via the TiddlyFox file extension\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false, netscape: false, Components: false */\n\"use strict\";\n\nvar TiddlyFoxSaver = function(wiki) {\n};\n\nTiddlyFoxSaver.prototype.save = function(text,method,callback) {\n\tvar messageBox = document.getElementById(\"tiddlyfox-message-box\");\n\tif(messageBox) {\n\t\t// Get the pathname of this document\n\t\tvar pathname = document.location.toString().split(\"#\")[0];\n\t\t// Replace file://localhost/ with file:///\n\t\tif(pathname.indexOf(\"file://localhost/\") === 0) {\n\t\t\tpathname = \"file://\" + pathname.substr(16);\n\t\t}\n\t\t// Windows path file:///x:/blah/blah --&gt; x:\\blah\\blah\n\t\tif(/^file\\:\\/\\/\\/[A-Z]\\:\\//i.test(pathname)) {\n\t\t\t// Remove the leading slash and convert slashes to backslashes\n\t\t\tpathname = pathname.substr(8).replace(/\\//g,\"\\\\\");\n\t\t// Firefox Windows network path file://///server/share/blah/blah --&gt; //server/share/blah/blah\n\t\t} else if(pathname.indexOf(\"file://///\") === 0) {\n\t\t\tpathname = \"\\\\\\\\\" + unescape(pathname.substr(10)).replace(/\\//g,\"\\\\\");\n\t\t// Mac/Unix local path file:///path/path --&gt; /path/path\n\t\t} else if(pathname.indexOf(\"file:///\") === 0) {\n\t\t\tpathname = unescape(pathname.substr(7));\n\t\t// Mac/Unix local path file:/path/path --&gt; /path/path\n\t\t} else if(pathname.indexOf(\"file:/\") === 0) {\n\t\t\tpathname = unescape(pathname.substr(5));\n\t\t// Otherwise Windows networth path file://server/share/path/path --&gt; \\\\server\\share\\path\\path\n\t\t} else {\n\t\t\tpathname = \"\\\\\\\\\" + unescape(pathname.substr(7)).replace(new RegExp(\"/\",\"g\"),\"\\\\\");\n\t\t}\n\t\t// Create the message element and put it in the message box\n\t\tvar message = document.createElement(\"div\");\n\t\tmessage.setAttribute(\"data-tiddlyfox-path\",decodeURIComponent(pathname));\n\t\tmessage.setAttribute(\"data-tiddlyfox-content\",text);\n\t\tmessageBox.appendChild(message);\n\t\t// Add an event handler for when the file has been saved\n\t\tmessage.addEventListener(\"tiddlyfox-have-saved-file\",function(event) {\n\t\t\tcallback(null);\n\t\t}, false);\n\t\t// Create and dispatch the custom event to the extension\n\t\tvar event = document.createEvent(\"Events\");\n\t\tevent.initEvent(\"tiddlyfox-save-file\",true,false);\n\t\tmessage.dispatchEvent(event);\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/*\nInformation about this saver\n*/\nTiddlyFoxSaver.prototype.info = {\n\tname: \"tiddlyfox\",\n\tpriority: 1500,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new TiddlyFoxSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/tiddlyie.js":{"title":"$:/core/modules/savers/tiddlyie.js","text":"/*\\\ntitle: $:/core/modules/savers/tiddlyie.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via Internet Explorer BHO extenion (TiddlyIE)\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar TiddlyIESaver = function(wiki) {\n};\n\nTiddlyIESaver.prototype.save = function(text,method,callback) {\n\t// Check existence of TiddlyIE BHO extension (note: only works after document is complete)\n\tif(typeof(window.TiddlyIE) != \"undefined\") {\n\t\t// Get the pathname of this document\n\t\tvar pathname = unescape(document.location.pathname);\n\t\t// Test for a Windows path of the form /x:/blah...\n\t\tif(/^\\/[A-Z]\\:\\/[^\\/]+/i.test(pathname)) {\t// ie: ^/[a-z]:/[^/]+ (is this better?: ^/[a-z]:/[^/]+(/[^/]+)*\\.[^/]+ )\n\t\t\t// Remove the leading slash\n\t\t\tpathname = pathname.substr(1);\n\t\t\t// Convert slashes to backslashes\n\t\t\tpathname = pathname.replace(/\\//g,\"\\\\\");\n\t\t} else if(document.hostname !== \"\" &amp;&amp; /^\\/[^\\/]+\\/[^\\/]+/i.test(pathname)) {\t// test for \\\\server\\share\\blah... - ^/[^/]+/[^/]+\n\t\t\t// Convert slashes to backslashes\n\t\t\tpathname = pathname.replace(/\\//g,\"\\\\\");\n\t\t\t// reconstruct UNC path\n\t\t\tpathname = \"\\\\\\\\\" + document.location.hostname + pathname;\n\t\t} else return false;\n\t\t// Prompt the user to save the file\n\t\twindow.TiddlyIE.save(pathname, text);\n\t\t// Callback that we succeeded\n\t\tcallback(null);\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/*\nInformation about this saver\n*/\nTiddlyIESaver.prototype.info = {\n\tname: \"tiddlyiesaver\",\n\tpriority: 1500,\n\tcapabilities: [\"save\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn (window.location.protocol === \"file:\");\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new TiddlyIESaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/twedit.js":{"title":"$:/core/modules/savers/twedit.js","text":"/*\\\ntitle: $:/core/modules/savers/twedit.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via the TWEdit iOS app\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false, netscape: false, Components: false */\n\"use strict\";\n\nvar TWEditSaver = function(wiki) {\n};\n\nTWEditSaver.prototype.save = function(text,method,callback) {\n\t// Bail if we're not running under TWEdit\n\tif(typeof DeviceInfo !== \"object\") {\n\t\treturn false;\n\t}\n\t// Get the pathname of this document\n\tvar pathname = decodeURIComponent(document.location.pathname);\n\t// Strip any query or location part\n\tvar p = pathname.indexOf(\"?\");\n\tif(p !== -1) {\n\t\tpathname = pathname.substr(0,p);\n\t}\n\tp = pathname.indexOf(\"#\");\n\tif(p !== -1) {\n\t\tpathname = pathname.substr(0,p);\n\t}\n\t// Remove the leading \"/Documents\" from path\n\tvar prefix = \"/Documents\";\n\tif(pathname.indexOf(prefix) === 0) {\n\t\tpathname = pathname.substr(prefix.length);\n\t}\n\t// Error handler\n\tvar errorHandler = function(event) {\n\t\t// Error\n\t\tcallback($tw.language.getString(\"Error/SavingToTWEdit\") + \": \" + event.target.error.code);\n\t};\n\t// Get the file system\n\twindow.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(fileSystem) {\n\t\t// Now we've got the filesystem, get the fileEntry\n\t\tfileSystem.root.getFile(pathname, {create: true}, function(fileEntry) {\n\t\t\t// Now we've got the fileEntry, create the writer\n\t\t\tfileEntry.createWriter(function(writer) {\n\t\t\t\twriter.onerror = errorHandler;\n\t\t\t\twriter.onwrite = function() {\n\t\t\t\t\tcallback(null);\n\t\t\t\t};\n\t\t\t\twriter.position = 0;\n\t\t\t\twriter.write(text);\n\t\t\t},errorHandler);\n\t\t}, errorHandler);\n\t}, errorHandler);\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nTWEditSaver.prototype.info = {\n\tname: \"twedit\",\n\tpriority: 1600,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new TWEditSaver(wiki);\n};\n\n/////////////////////////// Hack\n// HACK: This ensures that TWEdit recognises us as a TiddlyWiki document\nif($tw.browser) {\n\twindow.version = {title: \"TiddlyWiki\"};\n}\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/savers/upload.js":{"title":"$:/core/modules/savers/upload.js","text":"/*\\\ntitle: $:/core/modules/savers/upload.js\ntype: application/javascript\nmodule-type: saver\n\nHandles saving changes via upload to a server.\n\nDesigned to be compatible with BidiX's UploadPlugin at http://tiddlywiki.bidix.info/#UploadPlugin\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSelect the appropriate saver module and set it up\n*/\nvar UploadSaver = function(wiki) {\n\tthis.wiki = wiki;\n};\n\nUploadSaver.prototype.save = function(text,method,callback) {\n\t// Get the various parameters we need\n\tvar backupDir = this.wiki.getTextReference(\"$:/UploadBackupDir\") || \".\",\n\t\tusername = this.wiki.getTextReference(\"$:/UploadName\"),\n\t\tpassword = $tw.utils.getPassword(\"upload\"),\n\t\tuploadDir = this.wiki.getTextReference(\"$:/UploadDir\") || \".\",\n\t\tuploadFilename = this.wiki.getTextReference(\"$:/UploadFilename\") || \"index.html\",\n\t\tuploadWithUrlOnly = this.wiki.getTextReference(\"$:/UploadWithUrlOnly\") || \"no\",\n\t\turl = this.wiki.getTextReference(\"$:/UploadURL\");\n\t// Bail out if we don't have the bits we need\n\tif (uploadWithUrlOnly === \"yes\") {\n\t\t// The url is good enough. No need for a username and password.\n\t\t// Assume the server uses some other kind of auth mechanism.\n\t\tif(!url || url.toString().trim() === \"\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\telse {\n\t\t// Require username and password to be present.\n\t\t// Assume the server uses the standard UploadPlugin username/password.\n\t\tif(!username || username.toString().trim() === \"\" || !password || password.toString().trim() === \"\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\t// Construct the url if not provided\n\tif(!url) {\n\t\turl = \"http://\" + username + \".tiddlyspot.com/store.cgi\";\n\t}\n\t// Assemble the header\n\tvar boundary = \"---------------------------\" + \"AaB03x\";\n\tvar uploadFormName = \"UploadPlugin\";\n\tvar head = [];\n\thead.push(\"--\" + boundary + \"\\r\\nContent-disposition: form-data; name=\\\"UploadPlugin\\\"\\r\\n\");\n\thead.push(\"backupDir=\" + backupDir + \";user=\" + username + \";password=\" + password + \";uploaddir=\" + uploadDir + \";;\"); \n\thead.push(\"\\r\\n\" + \"--\" + boundary);\n\thead.push(\"Content-disposition: form-data; name=\\\"userfile\\\"; filename=\\\"\" + uploadFilename + \"\\\"\");\n\thead.push(\"Content-Type: text/html;charset=UTF-8\");\n\thead.push(\"Content-Length: \" + text.length + \"\\r\\n\");\n\thead.push(\"\");\n\t// Assemble the tail and the data itself\n\tvar tail = \"\\r\\n--\" + boundary + \"--\\r\\n\",\n\t\tdata = head.join(\"\\r\\n\") + text + tail;\n\t// Do the HTTP post\n\tvar http = new XMLHttpRequest();\n\thttp.open(\"POST\",url,true,username,password);\n\thttp.setRequestHeader(\"Content-Type\",\"multipart/form-data; charset=UTF-8; boundary=\" + boundary);\n\thttp.onreadystatechange = function() {\n\t\tif(http.readyState == 4 &amp;&amp; http.status == 200) {\n\t\t\tif(http.responseText.substr(0,4) === \"0 - \") {\n\t\t\t\tcallback(null);\n\t\t\t} else {\n\t\t\t\tcallback(http.responseText);\n\t\t\t}\n\t\t}\n\t};\n\ttry {\n\t\thttp.send(data);\n\t} catch(ex) {\n\t\treturn callback($tw.language.getString(\"Error/Caption\") + \":\" + ex);\n\t}\n\t$tw.notifier.display(\"$:/language/Notifications/Save/Starting\");\n\treturn true;\n};\n\n/*\nInformation about this saver\n*/\nUploadSaver.prototype.info = {\n\tname: \"upload\",\n\tpriority: 2000,\n\tcapabilities: [\"save\", \"autosave\"]\n};\n\n/*\nStatic method that returns true if this saver is capable of working\n*/\nexports.canSave = function(wiki) {\n\treturn true;\n};\n\n/*\nCreate an instance of this saver\n*/\nexports.create = function(wiki) {\n\treturn new UploadSaver(wiki);\n};\n\n})();\n","type":"application/javascript","module-type":"saver"},"$:/core/modules/server/authenticators/basic.js":{"title":"$:/core/modules/server/authenticators/basic.js","text":"/*\\\ntitle: $:/core/modules/server/authenticators/basic.js\ntype: application/javascript\nmodule-type: authenticator\n\nAuthenticator for WWW basic authentication\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nif($tw.node) {\n\tvar util = require(\"util\"),\n\t\tfs = require(\"fs\"),\n\t\turl = require(\"url\"),\n\t\tpath = require(\"path\");\n}\n\nfunction BasicAuthenticator(server) {\n\tthis.server = server;\n\tthis.credentialsData = [];\n}\n\n/*\nReturns true if the authenticator is active, false if it is inactive, or a string if there is an error\n*/\nBasicAuthenticator.prototype.init = function() {\n\t// Read the credentials data\n\tthis.credentialsFilepath = this.server.get(\"credentials\");\n\tif(this.credentialsFilepath) {\n\t\tvar resolveCredentialsFilepath = path.resolve(this.server.boot.wikiPath,this.credentialsFilepath);\n\t\tif(fs.existsSync(resolveCredentialsFilepath) &amp;&amp; !fs.statSync(resolveCredentialsFilepath).isDirectory()) {\n\t\t\tvar credentialsText = fs.readFileSync(resolveCredentialsFilepath,\"utf8\"),\n\t\t\t\tcredentialsData = $tw.utils.parseCsvStringWithHeader(credentialsText);\n\t\t\tif(typeof credentialsData === \"string\") {\n\t\t\t\treturn \"Error: \" + credentialsData + \" reading credentials from '\" + resolveCredentialsFilepath + \"'\";\n\t\t\t} else {\n\t\t\t\tthis.credentialsData = credentialsData;\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"Error: Unable to load user credentials from '\" + resolveCredentialsFilepath + \"'\";\n\t\t}\n\t}\n\t// Add the hardcoded username and password if specified\n\tif(this.server.get(\"username\") &amp;&amp; this.server.get(\"password\")) {\n\t\tthis.credentialsData = this.credentialsData || [];\n\t\tthis.credentialsData.push({\n\t\t\tusername: this.server.get(\"username\"),\n\t\t\tpassword: this.server.get(\"password\")\n\t\t});\n\t}\n\treturn this.credentialsData.length &gt; 0;\n};\n\n/*\nReturns true if the request is authenticated and assigns the \"authenticatedUsername\" state variable.\nReturns false if the request couldn't be authenticated having sent an appropriate response to the browser\n*/\nBasicAuthenticator.prototype.authenticateRequest = function(request,response,state) {\n\t// Extract the incoming username and password from the request\n\tvar header = request.headers.authorization || \"\";\n\tif(!header &amp;&amp; state.allowAnon) {\n\t\t// If there's no header and anonymous access is allowed then we don't set authenticatedUsername\n\t\treturn true;\n\t}\n\tvar token = header.split(/\\s+/).pop() || \"\",\n\t\tauth = $tw.utils.base64Decode(token),\n\t\tparts = auth.split(/:/),\n\t\tincomingUsername = parts[0],\n\t\tincomingPassword = parts[1];\n\t// Check that at least one of the credentials matches\n\tvar matchingCredentials = this.credentialsData.find(function(credential) {\n\t\treturn credential.username === incomingUsername &amp;&amp; credential.password === incomingPassword;\n\t});\n\tif(matchingCredentials) {\n\t\t// If so, add the authenticated username to the request state\n\t\tstate.authenticatedUsername = incomingUsername;\n\t\treturn true;\n\t} else {\n\t\t// If not, return an authentication challenge\n\t\tresponse.writeHead(401,\"Authentication required\",{\n\t\t\t\"WWW-Authenticate\": 'Basic realm=\"Please provide your username and password to login to ' + state.server.servername + '\"'\n\t\t});\n\t\tresponse.end();\n\t\treturn false;\n\t}\n};\n\nexports.AuthenticatorClass = BasicAuthenticator;\n\n})();\n","type":"application/javascript","module-type":"authenticator"},"$:/core/modules/server/authenticators/header.js":{"title":"$:/core/modules/server/authenticators/header.js","text":"/*\\\ntitle: $:/core/modules/server/authenticators/header.js\ntype: application/javascript\nmodule-type: authenticator\n\nAuthenticator for trusted header authentication\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nfunction HeaderAuthenticator(server) {\n\tthis.server = server;\n\tthis.header = server.get(\"authenticated-user-header\") ? server.get(\"authenticated-user-header\").toLowerCase() : undefined;\n}\n\n/*\nReturns true if the authenticator is active, false if it is inactive, or a string if there is an error\n*/\nHeaderAuthenticator.prototype.init = function() {\n\treturn !!this.header;\n};\n\n/*\nReturns true if the request is authenticated and assigns the \"authenticatedUsername\" state variable.\nReturns false if the request couldn't be authenticated having sent an appropriate response to the browser\n*/\nHeaderAuthenticator.prototype.authenticateRequest = function(request,response,state) {\n\t// Otherwise, authenticate as the username in the specified header\n\tvar username = request.headers[this.header];\n\tif(!username &amp;&amp; !state.allowAnon) {\n\t\tresponse.writeHead(401,\"Authorization header required to login to '\" + state.server.servername + \"'\");\n\t\tresponse.end();\n\t\treturn false;\n\t} else {\n\t\t// authenticatedUsername will be undefined for anonymous users\n\t\tstate.authenticatedUsername = username;\n\t\treturn true;\n\t}\n};\n\nexports.AuthenticatorClass = HeaderAuthenticator;\n\n})();\n","type":"application/javascript","module-type":"authenticator"},"$:/core/modules/server/routes/delete-tiddler.js":{"title":"$:/core/modules/server/routes/delete-tiddler.js","text":"/*\\\ntitle: $:/core/modules/server/routes/delete-tiddler.js\ntype: application/javascript\nmodule-type: route\n\nDELETE /recipes/default/tiddlers/:title\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"DELETE\";\n\nexports.path = /^\\/bags\\/default\\/tiddlers\\/(.+)$/;\n\nexports.handler = function(request,response,state) {\n\tvar title = decodeURIComponent(state.params[0]);\n\tstate.wiki.deleteTiddler(title);\n\tresponse.writeHead(204, \"OK\", {\n\t\t\"Content-Type\": \"text/plain\"\n\t});\n\tresponse.end();\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-favicon.js":{"title":"$:/core/modules/server/routes/get-favicon.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-favicon.js\ntype: application/javascript\nmodule-type: route\n\nGET /favicon.ico\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/favicon.ico$/;\n\nexports.handler = function(request,response,state) {\n\tvar buffer = state.wiki.getTiddlerText(\"$:/favicon.ico\",\"\");\n\tstate.sendResponse(200,{\"Content-Type\": \"image/x-icon\"},buffer,\"base64\");\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-file.js":{"title":"$:/core/modules/server/routes/get-file.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-file.js\ntype: application/javascript\nmodule-type: route\n\nGET /files/:filepath\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/files\\/(.+)$/;\n\nexports.handler = function(request,response,state) {\n\tvar path = require(\"path\"),\n\t\tfs = require(\"fs\"),\n\t\tutil = require(\"util\"),\n\t\tsuppliedFilename = decodeURIComponent(state.params[0]),\n\t\tfilename = path.resolve(state.boot.wikiPath,\"files\",suppliedFilename),\n\t\textension = path.extname(filename);\n\tfs.readFile(filename,function(err,content) {\n\t\tvar status,content,type = \"text/plain\";\n\t\tif(err) {\n\t\t\tconsole.log(\"Error accessing file \" + filename + \": \" + err.toString());\n\t\t\tstatus = 404;\n\t\t\tcontent = \"File '\" + suppliedFilename + \"' not found\";\n\t\t} else {\n\t\t\tstatus = 200;\n\t\t\tcontent = content;\n\t\t\ttype = ($tw.config.fileExtensionInfo[extension] ? $tw.config.fileExtensionInfo[extension].type : \"application/octet-stream\");\n\t\t}\n\t\tstate.sendResponse(status,{\"Content-Type\": type},content);\n\t});\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-index.js":{"title":"$:/core/modules/server/routes/get-index.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-index.js\ntype: application/javascript\nmodule-type: route\n\nGET /\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/$/;\n\nexports.handler = function(request,response,state) {\n\tvar text = state.wiki.renderTiddler(state.server.get(\"root-render-type\"),state.server.get(\"root-tiddler\")),\n\t\tresponseHeaders = {\n\t\t\"Content-Type\": state.server.get(\"root-serve-type\")\n\t};\n\tstate.sendResponse(200,responseHeaders,text);\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-login-basic.js":{"title":"$:/core/modules/server/routes/get-login-basic.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-login-basic.js\ntype: application/javascript\nmodule-type: route\n\nGET /login-basic -- force a Basic Authentication challenge\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/login-basic$/;\n\nexports.handler = function(request,response,state) {\n\tif(!state.authenticatedUsername) {\n\t\t// Challenge if there's no username\n\t\tresponse.writeHead(401,{\n\t\t\t\"WWW-Authenticate\": 'Basic realm=\"Please provide your username and password to login to ' + state.server.servername + '\"'\n\t\t});\n\t\tresponse.end();\n\t} else {\n\t\t// Redirect to the root wiki if login worked\n\t\tvar location = ($tw.syncadaptor &amp;&amp; $tw.syncadaptor.host)? $tw.syncadaptor.host: \"/\";\n\t\tresponse.writeHead(302,{\n\t\t\tLocation: location\n\t\t});\n\t\tresponse.end();\n\t}\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-status.js":{"title":"$:/core/modules/server/routes/get-status.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-status.js\ntype: application/javascript\nmodule-type: route\n\nGET /status\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/status$/;\n\nexports.handler = function(request,response,state) {\n\tvar text = JSON.stringify({\n\t\tusername: state.authenticatedUsername || state.server.get(\"anon-username\") || \"\",\n\t\tanonymous: !state.authenticatedUsername,\n\t\tread_only: !state.server.isAuthorized(\"writers\",state.authenticatedUsername),\n\t\tsse_enabled: state.server.get(\"sse-enabled\") === \"yes\",\n\t\tspace: {\n\t\t\trecipe: \"default\"\n\t\t},\n\t\ttiddlywiki_version: $tw.version\n\t});\n\tstate.sendResponse(200,{\"Content-Type\": \"application/json\"},text,\"utf8\");\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-tiddler-html.js":{"title":"$:/core/modules/server/routes/get-tiddler-html.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-tiddler-html.js\ntype: application/javascript\nmodule-type: route\n\nGET /:title\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/([^\\/]+)$/;\n\nexports.handler = function(request,response,state) {\n\tvar title = decodeURIComponent(state.params[0]),\n\t\ttiddler = state.wiki.getTiddler(title);\n\tif(tiddler) {\n\t\tvar renderType = tiddler.getFieldString(\"_render_type\"),\n\t\t\trenderTemplate = tiddler.getFieldString(\"_render_template\");\n\t\t// Tiddler fields '_render_type' and '_render_template' overwrite\n\t\t// system wide settings for render type and template\n\t\tif(state.wiki.isSystemTiddler(title)) {\n\t\t\trenderType = renderType || state.server.get(\"system-tiddler-render-type\");\n\t\t\trenderTemplate = renderTemplate || state.server.get(\"system-tiddler-render-template\");\n\t\t} else {\n\t\t\trenderType = renderType || state.server.get(\"tiddler-render-type\");\n\t\t\trenderTemplate = renderTemplate || state.server.get(\"tiddler-render-template\");\n\t\t}\n\t\tvar text = state.wiki.renderTiddler(renderType,renderTemplate,{parseAsInline: true, variables: {currentTiddler: title}});\n\n\t\t// Naughty not to set a content-type, but it's the easiest way to ensure the browser will see HTML pages as HTML, and accept plain text tiddlers as CSS or JS\n\t\tstate.sendResponse(200,{},text,\"utf8\");\n\t} else {\n\t\tresponse.writeHead(404);\n\t\tresponse.end();\n\t}\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-tiddler.js":{"title":"$:/core/modules/server/routes/get-tiddler.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-tiddler.js\ntype: application/javascript\nmodule-type: route\n\nGET /recipes/default/tiddlers/:title\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/recipes\\/default\\/tiddlers\\/(.+)$/;\n\nexports.handler = function(request,response,state) {\n\tvar title = decodeURIComponent(state.params[0]),\n\t\ttiddler = state.wiki.getTiddler(title),\n\t\ttiddlerFields = {},\n\t\tknownFields = [\n\t\t\t\"bag\", \"created\", \"creator\", \"modified\", \"modifier\", \"permissions\", \"recipe\", \"revision\", \"tags\", \"text\", \"title\", \"type\", \"uri\"\n\t\t];\n\tif(tiddler) {\n\t\t$tw.utils.each(tiddler.fields,function(field,name) {\n\t\t\tvar value = tiddler.getFieldString(name);\n\t\t\tif(knownFields.indexOf(name) !== -1) {\n\t\t\t\ttiddlerFields[name] = value;\n\t\t\t} else {\n\t\t\t\ttiddlerFields.fields = tiddlerFields.fields || {};\n\t\t\t\ttiddlerFields.fields[name] = value;\n\t\t\t}\n\t\t});\n\t\ttiddlerFields.revision = state.wiki.getChangeCount(title);\n\t\ttiddlerFields.bag = \"default\";\n\t\ttiddlerFields.type = tiddlerFields.type || \"text/vnd.tiddlywiki\";\n\t\tstate.sendResponse(200,{\"Content-Type\": \"application/json\"},JSON.stringify(tiddlerFields),\"utf8\");\n\t} else {\n\t\tresponse.writeHead(404);\n\t\tresponse.end();\n\t}\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/get-tiddlers-json.js":{"title":"$:/core/modules/server/routes/get-tiddlers-json.js","text":"/*\\\ntitle: $:/core/modules/server/routes/get-tiddlers-json.js\ntype: application/javascript\nmodule-type: route\n\nGET /recipes/default/tiddlers.json?filter=&lt;filter&gt;\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar DEFAULT_FILTER = \"[all[tiddlers]!is[system]sort[title]]\";\n\nexports.method = \"GET\";\n\nexports.path = /^\\/recipes\\/default\\/tiddlers.json$/;\n\nexports.handler = function(request,response,state) {\n\tvar filter = state.queryParameters.filter || DEFAULT_FILTER;\n\tif(state.wiki.getTiddlerText(\"$:/config/Server/AllowAllExternalFilters\") !== \"yes\") {\n\t\tif(state.wiki.getTiddlerText(\"$:/config/Server/ExternalFilters/\" + filter) !== \"yes\") {\n\t\t\tconsole.log(\"Blocked attempt to GET /recipes/default/tiddlers.json with filter: \" + filter);\n\t\t\tresponse.writeHead(403);\n\t\t\tresponse.end();\n\t\t\treturn;\n\t\t}\n\t}\n\tif(state.wiki.getTiddlerText(\"$:/config/SyncSystemTiddlersFromServer\") === \"no\") {\n\t\tfilter += \"+[!is[system]]\";\n\t}\n\tvar excludeFields = (state.queryParameters.exclude || \"text\").split(\",\"),\n\t\ttitles = state.wiki.filterTiddlers(filter);\n\tvar tiddlers = [];\n\t$tw.utils.each(titles,function(title) {\n\t\tvar tiddler = state.wiki.getTiddler(title);\n\t\tif(tiddler) {\n\t\t\tvar tiddlerFields = tiddler.getFieldStrings({exclude: excludeFields});\n\t\t\ttiddlerFields.revision = state.wiki.getChangeCount(title);\n\t\t\ttiddlerFields.type = tiddlerFields.type || \"text/vnd.tiddlywiki\";\n\t\t\ttiddlers.push(tiddlerFields);\n\t\t}\n\t});\n\tvar text = JSON.stringify(tiddlers);\n\tstate.sendResponse(200,{\"Content-Type\": \"application/json\"},text,\"utf8\");\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/routes/put-tiddler.js":{"title":"$:/core/modules/server/routes/put-tiddler.js","text":"/*\\\ntitle: $:/core/modules/server/routes/put-tiddler.js\ntype: application/javascript\nmodule-type: route\n\nPUT /recipes/default/tiddlers/:title\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.method = \"PUT\";\n\nexports.path = /^\\/recipes\\/default\\/tiddlers\\/(.+)$/;\n\nexports.handler = function(request,response,state) {\n\tvar title = decodeURIComponent(state.params[0]),\n\tfields = JSON.parse(state.data);\n\t// Pull up any subfields in the `fields` object\n\tif(fields.fields) {\n\t\t$tw.utils.each(fields.fields,function(field,name) {\n\t\t\tfields[name] = field;\n\t\t});\n\t\tdelete fields.fields;\n\t}\n\t// Remove any revision field\n\tif(fields.revision) {\n\t\tdelete fields.revision;\n\t}\n\tstate.wiki.addTiddler(new $tw.Tiddler(state.wiki.getCreationFields(),fields,{title: title},state.wiki.getModificationFields()));\n\tvar changeCount = state.wiki.getChangeCount(title).toString();\n\tresponse.writeHead(204, \"OK\",{\n\t\tEtag: \"\\\"default/\" + encodeURIComponent(title) + \"/\" + changeCount + \":\\\"\",\n\t\t\"Content-Type\": \"text/plain\"\n\t});\n\tresponse.end();\n};\n\n}());\n","type":"application/javascript","module-type":"route"},"$:/core/modules/server/server-sent-events.js":{"title":"$:/core/modules/server/server-sent-events.js","text":"/*\\\ntitle: $:/core/modules/server/server-sent-events.js\ntype: application/javascript\nmodule-type: library\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nparameters:\n\t\tprefix - usually the plugin path, such as `plugins/tiddlywiki/tiddlyweb`. The\n\t\t\troute will match `/events/${prefix}` exactly.\n\n\t\thandler - a function that will be called each time a request comes in with the\n\t\t\trequest and state from the route and an emit function to call.\n*/\n\nvar ServerSentEvents = function ServerSentEvents(prefix, handler) {\n\tthis.handler = handler;\n\tthis.prefix = prefix;\n};\n\nServerSentEvents.prototype.getExports = function() {\n\treturn {\n\t\tbodyFormat: \"stream\",\n\t\tmethod: \"GET\",\n\t\tpath: new RegExp(\"^/events/\" + this.prefix + \"$\"),\n\t\thandler: this.handleEventRequest.bind(this)\n\t};\n};\n\nServerSentEvents.prototype.handleEventRequest = function(request,response,state) {\n\tif(ServerSentEvents.prototype.isEventStreamRequest(request)) {\n\t\tresponse.writeHead(200, {\n\t\t\t\"Content-Type\": \"text/event-stream\",\n\t\t\t\"Cache-Control\": \"no-cache\",\n\t\t\t\"Connection\": \"keep-alive\"\n\t\t});\n\t\tthis.handler(request,state,this.emit.bind(this,response),this.end.bind(this,response));\n\t} else {\n\t\tresponse.writeHead(406,\"Not Acceptable\",{});\n\t\tresponse.end();\n\t}\n};\n\nServerSentEvents.prototype.isEventStreamRequest = function(request) {\n\treturn request.headers.accept &amp;&amp;\n\t\trequest.headers.accept.match(/^text\\/event-stream/);\n};\n\nServerSentEvents.prototype.emit = function(response,event,data) {\n\tif(typeof event !== \"string\" || event.indexOf(\"\\n\") !== -1) {\n\t\tthrow new Error(\"Type must be a single-line string\");\n\t}\n\tif(typeof data !== \"string\" || data.indexOf(\"\\n\") !== -1) {\n\t\tthrow new Error(\"Data must be a single-line string\");\n\t}\n\tresponse.write(\"event: \" + event + \"\\ndata: \" + data + \"\\n\\n\", \"utf8\");\n};\n\nServerSentEvents.prototype.end = function(response) {\n\tresponse.end();\n};\n\nexports.ServerSentEvents = ServerSentEvents;\n\n})();\n","type":"application/javascript","module-type":"library"},"$:/core/modules/server/server.js":{"title":"$:/core/modules/server/server.js","text":"/*\\\ntitle: $:/core/modules/server/server.js\ntype: application/javascript\nmodule-type: library\n\nServe tiddlers over http\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nif($tw.node) {\n\tvar util = require(\"util\"),\n\t\tfs = require(\"fs\"),\n\t\turl = require(\"url\"),\n\t\tpath = require(\"path\"),\n\t\tquerystring = require(\"querystring\"),\n\t\tcrypto = require(\"crypto\"),\n\t\tzlib = require(\"zlib\");\n}\n\n/*\nA simple HTTP server with regexp-based routes\noptions: variables - optional hashmap of variables to set (a misnomer - they are really constant parameters)\n\t\t routes - optional array of routes to use\n\t\t wiki - reference to wiki object\n*/\nfunction Server(options) {\n\tvar self = this;\n\tthis.routes = options.routes || [];\n\tthis.authenticators = options.authenticators || [];\n\tthis.wiki = options.wiki;\n\tthis.boot = options.boot || $tw.boot;\n\tthis.servername = $tw.utils.transliterateToSafeASCII(this.wiki.getTiddlerText(\"$:/SiteTitle\") || \"TiddlyWiki5\");\n\t// Initialise the variables\n\tthis.variables = $tw.utils.extend({},this.defaultVariables);\n\tif(options.variables) {\n\t\tfor(var variable in options.variables) {\n\t\t\tif(options.variables[variable]) {\n\t\t\t\tthis.variables[variable] = options.variables[variable];\n\t\t\t}\n\t\t}\n\t}\n\t$tw.utils.extend({},this.defaultVariables,options.variables);\n\t// Initialise CSRF\n\tthis.csrfDisable = this.get(\"csrf-disable\") === \"yes\";\n\t// Initialize Gzip compression\n\tthis.enableGzip = this.get(\"gzip\") === \"yes\";\n\t// Initialize browser-caching\n\tthis.enableBrowserCache = this.get(\"use-browser-cache\") === \"yes\";\n\t// Initialise authorization\n\tvar authorizedUserName = (this.get(\"username\") &amp;&amp; this.get(\"password\")) ? this.get(\"username\") : \"(anon)\";\n\tthis.authorizationPrincipals = {\n\t\treaders: (this.get(\"readers\") || authorizedUserName).split(\",\").map($tw.utils.trim),\n\t\twriters: (this.get(\"writers\") || authorizedUserName).split(\",\").map($tw.utils.trim)\n\t}\n\t// Load and initialise authenticators\n\t$tw.modules.forEachModuleOfType(\"authenticator\", function(title,authenticatorDefinition) {\n\t\t// console.log(\"Loading server route \" + title);\n\t\tself.addAuthenticator(authenticatorDefinition.AuthenticatorClass);\n\t});\n\t// Load route handlers\n\t$tw.modules.forEachModuleOfType(\"route\", function(title,routeDefinition) {\n\t\t// console.log(\"Loading server route \" + title);\n\t\tself.addRoute(routeDefinition);\n\t});\n\t// Initialise the http vs https\n\tthis.listenOptions = null;\n\tthis.protocol = \"http\";\n\tvar tlsKeyFilepath = this.get(\"tls-key\"),\n\t\ttlsCertFilepath = this.get(\"tls-cert\");\n\tif(tlsCertFilepath &amp;&amp; tlsKeyFilepath) {\n\t\tthis.listenOptions = {\n\t\t\tkey: fs.readFileSync(path.resolve(this.boot.wikiPath,tlsKeyFilepath),\"utf8\"),\n\t\t\tcert: fs.readFileSync(path.resolve(this.boot.wikiPath,tlsCertFilepath),\"utf8\")\n\t\t};\n\t\tthis.protocol = \"https\";\n\t}\n\tthis.transport = require(this.protocol);\n}\n\n/*\nSend a response to the client. This method checks if the response must be sent\nor if the client alrady has the data cached. If that's the case only a 304\nresponse will be transmitted and the browser will use the cached data.\nOnly requests with status code 200 are considdered for caching.\nrequest: request instance passed to the handler\nresponse: response instance passed to the handler\nstatusCode: stauts code to send to the browser\nheaders: response headers (they will be augmented with an `Etag` header)\ndata: the data to send (passed to the end method of the response instance)\nencoding: the encoding of the data to send (passed to the end method of the response instance)\n*/\nfunction sendResponse(request,response,statusCode,headers,data,encoding) {\n\tif(this.enableBrowserCache &amp;&amp; (statusCode == 200)) {\n\t\tvar hash = crypto.createHash('md5');\n\t\t// Put everything into the hash that could change and invalidate the data that\n\t\t// the browser already stored. The headers the data and the encoding.\n\t\thash.update(data);\n\t\thash.update(JSON.stringify(headers));\n\t\tif(encoding) {\n\t\t\thash.update(encoding);\n\t\t}\n\t\tvar contentDigest = hash.digest(\"hex\");\n\t\t// RFC 7232 section 2.3 mandates for the etag to be enclosed in quotes\n\t\theaders[\"Etag\"] = '\"' + contentDigest + '\"';\n\t\theaders[\"Cache-Control\"] = \"max-age=0, must-revalidate\";\n\t\t// Check if any of the hashes contained within the if-none-match header\n\t\t// matches the current hash.\n\t\t// If one matches, do not send the data but tell the browser to use the\n\t\t// cached data.\n\t\t// We do not implement \"*\" as it makes no sense here.\n\t\tvar ifNoneMatch = request.headers[\"if-none-match\"];\n\t\tif(ifNoneMatch) {\n\t\t\tvar matchParts = ifNoneMatch.split(\",\").map(function(etag) {\n\t\t\t\treturn etag.replace(/^[ \"]+|[ \"]+$/g, \"\");\n\t\t\t});\n\t\t\tif(matchParts.indexOf(contentDigest) != -1) {\n\t\t\t\tresponse.writeHead(304,headers);\n\t\t\t\tresponse.end();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\t/*\n\tIf the gzip=yes is set, check if the user agent permits compression. If so,\n\tcompress our response if the raw data is bigger than 2k. Compressing less\n\tdata is inefficient. Note that we use the synchronous functions from zlib\n\tto stay in the imperative style. The current `Server` doesn't depend on\n\tthis, and we may just as well use the async versions.\n\t*/\n\tif(this.enableGzip &amp;&amp; (data.length &gt; 2048)) {\n\t\tvar acceptEncoding = request.headers[\"accept-encoding\"] || \"\";\n\t\tif(/\\bdeflate\\b/.test(acceptEncoding)) {\n\t\t\theaders[\"Content-Encoding\"] = \"deflate\";\n\t\t\tdata = zlib.deflateSync(data);\n\t\t} else if(/\\bgzip\\b/.test(acceptEncoding)) {\n\t\t\theaders[\"Content-Encoding\"] = \"gzip\";\n\t\t\tdata = zlib.gzipSync(data);\n\t\t}\n\t}\n\n\tresponse.writeHead(statusCode,headers);\n\tresponse.end(data,encoding);\n}\n\nServer.prototype.defaultVariables = {\n\tport: \"8080\",\n\thost: \"127.0.0.1\",\n\t\"root-tiddler\": \"$:/core/save/all\",\n\t\"root-render-type\": \"text/plain\",\n\t\"root-serve-type\": \"text/html\",\n\t\"tiddler-render-type\": \"text/html\",\n\t\"tiddler-render-template\": \"$:/core/templates/server/static.tiddler.html\",\n\t\"system-tiddler-render-type\": \"text/plain\",\n\t\"system-tiddler-render-template\": \"$:/core/templates/wikified-tiddler\",\n\t\"debug-level\": \"none\",\n\t\"gzip\": \"no\",\n\t\"use-browser-cache\": \"no\"\n};\n\nServer.prototype.get = function(name) {\n\treturn this.variables[name];\n};\n\nServer.prototype.addRoute = function(route) {\n\tthis.routes.push(route);\n};\n\nServer.prototype.addAuthenticator = function(AuthenticatorClass) {\n\t// Instantiate and initialise the authenticator\n\tvar authenticator = new AuthenticatorClass(this),\n\t\tresult = authenticator.init();\n\tif(typeof result === \"string\") {\n\t\t$tw.utils.error(\"Error: \" + result);\n\t} else if(result) {\n\t\t// Only use the authenticator if it initialised successfully\n\t\tthis.authenticators.push(authenticator);\n\t}\n};\n\nServer.prototype.findMatchingRoute = function(request,state) {\n\tfor(var t=0; t&lt;this.routes.length; t++) {\n\t\tvar potentialRoute = this.routes[t],\n\t\t\tpathRegExp = potentialRoute.path,\n\t\t\tpathname = state.urlInfo.pathname,\n\t\t\tmatch;\n\t\tif(state.pathPrefix) {\n\t\t\tif(pathname.substr(0,state.pathPrefix.length) === state.pathPrefix) {\n\t\t\t\tpathname = pathname.substr(state.pathPrefix.length) || \"/\";\n\t\t\t\tmatch = potentialRoute.path.exec(pathname);\n\t\t\t} else {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t} else {\n\t\t\tmatch = potentialRoute.path.exec(pathname);\n\t\t}\n\t\tif(match &amp;&amp; request.method === potentialRoute.method) {\n\t\t\tstate.params = [];\n\t\t\tfor(var p=1; p&lt;match.length; p++) {\n\t\t\t\tstate.params.push(match[p]);\n\t\t\t}\n\t\t\treturn potentialRoute;\n\t\t}\n\t}\n\treturn null;\n};\n\nServer.prototype.methodMappings = {\n\t\"GET\": \"readers\",\n\t\"OPTIONS\": \"readers\",\n\t\"HEAD\": \"readers\",\n\t\"PUT\": \"writers\",\n\t\"POST\": \"writers\",\n\t\"DELETE\": \"writers\"\n};\n\n/*\nCheck whether a given user is authorized for the specified authorizationType (\"readers\" or \"writers\"). Pass null or undefined as the username to check for anonymous access\n*/\nServer.prototype.isAuthorized = function(authorizationType,username) {\n\tvar principals = this.authorizationPrincipals[authorizationType] || [];\n\treturn principals.indexOf(\"(anon)\") !== -1 || (username &amp;&amp; (principals.indexOf(\"(authenticated)\") !== -1 || principals.indexOf(username) !== -1));\n}\n\nServer.prototype.requestHandler = function(request,response,options) {\n\toptions = options || {};\n\t// Compose the state object\n\tvar self = this;\n\tvar state = {};\n\tstate.wiki = options.wiki || self.wiki;\n\tstate.boot = options.boot || self.boot;\n\tstate.server = self;\n\tstate.urlInfo = url.parse(request.url);\n\tstate.queryParameters = querystring.parse(state.urlInfo.query);\n\tstate.pathPrefix = options.pathPrefix || this.get(\"path-prefix\") || \"\";\n\tstate.sendResponse = sendResponse.bind(self,request,response);\n\t// Get the principals authorized to access this resource\n\tvar authorizationType = this.methodMappings[request.method] || \"readers\";\n\t// Check for the CSRF header if this is a write\n\tif(!this.csrfDisable &amp;&amp; authorizationType === \"writers\" &amp;&amp; request.headers[\"x-requested-with\"] !== \"TiddlyWiki\") {\n\t\tresponse.writeHead(403,\"'X-Requested-With' header required to login to '\" + this.servername + \"'\");\n\t\tresponse.end();\n\t\treturn;\n\t}\n\t// Check whether anonymous access is granted\n\tstate.allowAnon = this.isAuthorized(authorizationType,null);\n\t// Authenticate with the first active authenticator\n\tif(this.authenticators.length &gt; 0) {\n\t\tif(!this.authenticators[0].authenticateRequest(request,response,state)) {\n\t\t\t// Bail if we failed (the authenticator will have sent the response)\n\t\t\treturn;\n\t\t}\n\t}\n\t// Authorize with the authenticated username\n\tif(!this.isAuthorized(authorizationType,state.authenticatedUsername)) {\n\t\tresponse.writeHead(401,\"'\" + state.authenticatedUsername + \"' is not authorized to access '\" + this.servername + \"'\");\n\t\tresponse.end();\n\t\treturn;\n\t}\n\t// Find the route that matches this path\n\tvar route = self.findMatchingRoute(request,state);\n\t// Optionally output debug info\n\tif(self.get(\"debug-level\") !== \"none\") {\n\t\tconsole.log(\"Request path:\",JSON.stringify(state.urlInfo));\n\t\tconsole.log(\"Request headers:\",JSON.stringify(request.headers));\n\t\tconsole.log(\"authenticatedUsername:\",state.authenticatedUsername);\n\t}\n\t// Return a 404 if we didn't find a route\n\tif(!route) {\n\t\tresponse.writeHead(404);\n\t\tresponse.end();\n\t\treturn;\n\t}\n\t// Receive the request body if necessary and hand off to the route handler\n\tif(route.bodyFormat === \"stream\" || request.method === \"GET\" || request.method === \"HEAD\") {\n\t\t// Let the route handle the request stream itself\n\t\troute.handler(request,response,state);\n\t} else if(route.bodyFormat === \"string\" || !route.bodyFormat) {\n\t\t// Set the encoding for the incoming request\n\t\trequest.setEncoding(\"utf8\");\n\t\tvar data = \"\";\n\t\trequest.on(\"data\",function(chunk) {\n\t\t\tdata += chunk.toString();\n\t\t});\n\t\trequest.on(\"end\",function() {\n\t\t\tstate.data = data;\n\t\t\troute.handler(request,response,state);\n\t\t});\n\t} else if(route.bodyFormat === \"buffer\") {\n\t\tvar data = [];\n\t\trequest.on(\"data\",function(chunk) {\n\t\t\tdata.push(chunk);\n\t\t});\n\t\trequest.on(\"end\",function() {\n\t\t\tstate.data = Buffer.concat(data);\n\t\t\troute.handler(request,response,state);\n\t\t})\n\t} else {\n\t\tresponse.writeHead(400,\"Invalid bodyFormat \" + route.bodyFormat + \" in route \" + route.method + \" \" + route.path.source);\n\t\tresponse.end();\n\t}\n};\n\n/*\nListen for requests\nport: optional port number (falls back to value of \"port\" variable)\nhost: optional host address (falls back to value of \"host\" variable)\nprefix: optional prefix (falls back to value of \"path-prefix\" variable)\n*/\nServer.prototype.listen = function(port,host,prefix) {\n\tvar self = this;\n\t// Handle defaults for port and host\n\tport = port || this.get(\"port\");\n\thost = host || this.get(\"host\");\n\tprefix = prefix || this.get(\"path-prefix\") || \"\";\n\t// Check for the port being a string and look it up as an environment variable\n\tif(parseInt(port,10).toString() !== port) {\n\t\tport = process.env[port] || 8080;\n\t}\n\t// Warn if required plugins are missing\n\tif(!this.wiki.getTiddler(\"$:/plugins/tiddlywiki/tiddlyweb\") || !this.wiki.getTiddler(\"$:/plugins/tiddlywiki/filesystem\")) {\n\t\t$tw.utils.warning(\"Warning: Plugins required for client-server operation (\\\"tiddlywiki/filesystem\\\" and \\\"tiddlywiki/tiddlyweb\\\") are missing from tiddlywiki.info file\");\n\t}\n\t// Create the server\n\tvar server;\n\tif(this.listenOptions) {\n\t\tserver = this.transport.createServer(this.listenOptions,this.requestHandler.bind(this));\n\t} else {\n\t\tserver = this.transport.createServer(this.requestHandler.bind(this));\n\t}\n\t// Display the port number after we've started listening (the port number might have been specified as zero, in which case we will get an assigned port)\n\tserver.on(\"listening\",function() {\n\t\tvar address = server.address();\n\t\t$tw.utils.log(\"Serving on \" + self.protocol + \"://\" + address.address + \":\" + address.port + prefix,\"brown/orange\");\n\t\t$tw.utils.log(\"(press ctrl-C to exit)\",\"red\");\n\t});\n\t// Listen\n\treturn server.listen(port,host);\n};\n\nexports.Server = Server;\n\n})();\n","type":"application/javascript","module-type":"library"},"$:/core/modules/browser-messaging.js":{"title":"$:/core/modules/browser-messaging.js","text":"/*\\\ntitle: $:/core/modules/browser-messaging.js\ntype: application/javascript\nmodule-type: startup\n\nBrowser message handling\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"browser-messaging\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\n/*\nLoad a specified url as an iframe and call the callback when it is loaded. If the url is already loaded then the existing iframe instance is used\n*/\nfunction loadIFrame(url,callback) {\n\t// Check if iframe already exists\n\tvar iframeInfo = $tw.browserMessaging.iframeInfoMap[url];\n\tif(iframeInfo) {\n\t\t// We've already got the iframe\n\t\tcallback(null,iframeInfo);\n\t} else {\n\t\t// Create the iframe and save it in the list\n\t\tvar iframe = document.createElement(\"iframe\");\n\t\tiframeInfo = {\n\t\t\turl: url,\n\t\t\tstatus: \"loading\",\n\t\t\tdomNode: iframe\n\t\t};\n\t\t$tw.browserMessaging.iframeInfoMap[url] = iframeInfo;\n\t\tsaveIFrameInfoTiddler(iframeInfo);\n\t\t// Add the iframe to the DOM and hide it\n\t\tiframe.style.display = \"none\";\n\t\tiframe.setAttribute(\"library\",\"true\");\n\t\tdocument.body.appendChild(iframe);\n\t\t// Set up onload\n\t\tiframe.onload = function() {\n\t\t\tiframeInfo.status = \"loaded\";\n\t\t\tsaveIFrameInfoTiddler(iframeInfo);\n\t\t\tcallback(null,iframeInfo);\n\t\t};\n\t\tiframe.onerror = function() {\n\t\t\tcallback(\"Cannot load iframe\");\n\t\t};\n\t\ttry {\n\t\t\tiframe.src = url;\n\t\t} catch(ex) {\n\t\t\tcallback(ex);\n\t\t}\n\t}\n}\n\n/*\nUnload library iframe for given url\n*/\nfunction unloadIFrame(url){\n\t$tw.utils.each(document.getElementsByTagName('iframe'), function(iframe) {\n\t\tif(iframe.getAttribute(\"library\") === \"true\" &amp;&amp;\n\t\t  iframe.getAttribute(\"src\") === url) {\n\t\t\tiframe.parentNode.removeChild(iframe);\n\t\t}\n\t});\n}\n\nfunction saveIFrameInfoTiddler(iframeInfo) {\n\t$tw.wiki.addTiddler(new $tw.Tiddler($tw.wiki.getCreationFields(),{\n\t\ttitle: \"$:/temp/ServerConnection/\" + iframeInfo.url,\n\t\ttext: iframeInfo.status,\n\t\ttags: [\"$:/tags/ServerConnection\"],\n\t\turl: iframeInfo.url\n\t},$tw.wiki.getModificationFields()));\n}\n\nexports.startup = function() {\n\t// Initialise the store of iframes we've created\n\t$tw.browserMessaging = {\n\t\tiframeInfoMap: {} // Hashmap by URL of {url:,status:\"loading/loaded\",domNode:}\n\t};\n\t// Listen for widget messages to control loading the plugin library\n\t$tw.rootWidget.addEventListener(\"tm-load-plugin-library\",function(event) {\n\t\tvar paramObject = event.paramObject || {},\n\t\t\turl = paramObject.url;\n\t\tif(url) {\n\t\t\tloadIFrame(url,function(err,iframeInfo) {\n\t\t\t\tif(err) {\n\t\t\t\t\talert($tw.language.getString(\"Error/LoadingPluginLibrary\") + \": \" + url);\n\t\t\t\t} else {\n\t\t\t\t\tiframeInfo.domNode.contentWindow.postMessage({\n\t\t\t\t\t\tverb: \"GET\",\n\t\t\t\t\t\turl: \"recipes/library/tiddlers.json\",\n\t\t\t\t\t\tcookies: {\n\t\t\t\t\t\t\ttype: \"save-info\",\n\t\t\t\t\t\t\tinfoTitlePrefix: paramObject.infoTitlePrefix || \"$:/temp/RemoteAssetInfo/\",\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}\n\t\t\t\t\t},\"*\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\t// Listen for widget messages to control unloading the plugin library\n\t$tw.rootWidget.addEventListener(\"tm-unload-plugin-library\",function(event) {\n\t\tvar paramObject = event.paramObject || {},\n\t\t\turl = paramObject.url;\n\t\t$tw.browserMessaging.iframeInfoMap[url] = undefined;\n\t\tif(url) {\n\t\t\tunloadIFrame(url);\n\t\t\t$tw.utils.each(\n\t\t\t\t$tw.wiki.filterTiddlers(\"[[$:/temp/ServerConnection/\" + url + \"]] [prefix[$:/temp/RemoteAssetInfo/\" + url + \"/]]\"),\n\t\t\t\tfunction(title) {\n\t\t\t\t\t$tw.wiki.deleteTiddler(title);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\t$tw.rootWidget.addEventListener(\"tm-load-plugin-from-library\",function(event) {\n\t\tvar paramObject = event.paramObject || {},\n\t\t\turl = paramObject.url,\n\t\t\ttitle = paramObject.title;\n\t\tif(url &amp;&amp; title) {\n\t\t\tloadIFrame(url,function(err,iframeInfo) {\n\t\t\t\tif(err) {\n\t\t\t\t\talert($tw.language.getString(\"Error/LoadingPluginLibrary\") + \": \" + url);\n\t\t\t\t} else {\n\t\t\t\t\tiframeInfo.domNode.contentWindow.postMessage({\n\t\t\t\t\t\tverb: \"GET\",\n\t\t\t\t\t\turl: \"recipes/library/tiddlers/\" + encodeURIComponent(title) + \".json\",\n\t\t\t\t\t\tcookies: {\n\t\t\t\t\t\t\ttype: \"save-tiddler\",\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}\n\t\t\t\t\t},\"*\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\t// Listen for window messages from other windows\n\twindow.addEventListener(\"message\",function listener(event){\n\t\t// console.log(\"browser-messaging: \",document.location.toString())\n\t\t// console.log(\"browser-messaging: Received message from\",event.origin);\n\t\t// console.log(\"browser-messaging: Message content\",event.data);\n\t\tswitch(event.data.verb) {\n\t\t\tcase \"GET-RESPONSE\":\n\t\t\t\tif(event.data.status.charAt(0) === \"2\") {\n\t\t\t\t\tif(event.data.cookies) {\n\t\t\t\t\t\tif(event.data.cookies.type === \"save-info\") {\n\t\t\t\t\t\t\tvar tiddlers = JSON.parse(event.data.body);\n\t\t\t\t\t\t\t$tw.utils.each(tiddlers,function(tiddler) {\n\t\t\t\t\t\t\t\t$tw.wiki.addTiddler(new $tw.Tiddler($tw.wiki.getCreationFields(),tiddler,{\n\t\t\t\t\t\t\t\t\ttitle: event.data.cookies.infoTitlePrefix + event.data.cookies.url + \"/\" + tiddler.title,\n\t\t\t\t\t\t\t\t\t\"original-title\": tiddler.title,\n\t\t\t\t\t\t\t\t\ttext: \"\",\n\t\t\t\t\t\t\t\t\ttype: \"text/vnd.tiddlywiki\",\n\t\t\t\t\t\t\t\t\t\"original-type\": tiddler.type,\n\t\t\t\t\t\t\t\t\t\"plugin-type\": undefined,\n\t\t\t\t\t\t\t\t\t\"original-plugin-type\": tiddler[\"plugin-type\"],\n\t\t\t\t\t\t\t\t\t\"module-type\": undefined,\n\t\t\t\t\t\t\t\t\t\"original-module-type\": tiddler[\"module-type\"],\n\t\t\t\t\t\t\t\t\ttags: [\"$:/tags/RemoteAssetInfo\"],\n\t\t\t\t\t\t\t\t\t\"original-tags\": $tw.utils.stringifyList(tiddler.tags || []),\n\t\t\t\t\t\t\t\t\t\"server-url\": event.data.cookies.url\n\t\t\t\t\t\t\t\t},$tw.wiki.getModificationFields()));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if(event.data.cookies.type === \"save-tiddler\") {\n\t\t\t\t\t\t\tvar tiddler = JSON.parse(event.data.body);\n\t\t\t\t\t\t\t$tw.wiki.addTiddler(new $tw.Tiddler(tiddler));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},false);\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/commands.js":{"title":"$:/core/modules/startup/commands.js","text":"/*\\\ntitle: $:/core/modules/startup/commands.js\ntype: application/javascript\nmodule-type: startup\n\nCommand processing\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"commands\";\nexports.platforms = [\"node\"];\nexports.after = [\"story\"];\nexports.synchronous = false;\n\nexports.startup = function(callback) {\n\t// On the server, start a commander with the command line arguments\n\tvar commander = new $tw.Commander(\n\t\t$tw.boot.argv,\n\t\tfunction(err) {\n\t\t\tif(err) {\n\t\t\t\treturn $tw.utils.error(\"Error: \" + err);\n\t\t\t}\n\t\t\tcallback();\n\t\t},\n\t\t$tw.wiki,\n\t\t{output: process.stdout, error: process.stderr}\n\t);\n\tcommander.execute();\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/favicon.js":{"title":"$:/core/modules/startup/favicon.js","text":"/*\\\ntitle: $:/core/modules/startup/favicon.js\ntype: application/javascript\nmodule-type: startup\n\nFavicon handling\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"favicon\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\n// Favicon tiddler\nvar FAVICON_TITLE = \"$:/favicon.ico\";\n\nexports.startup = function() {\n\t// Set up the favicon\n\tsetFavicon();\n\t// Reset the favicon when the tiddler changes\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\tif($tw.utils.hop(changes,FAVICON_TITLE)) {\n\t\t\tsetFavicon();\n\t\t}\n\t});\n};\n\nfunction setFavicon() {\n\tvar tiddler = $tw.wiki.getTiddler(FAVICON_TITLE);\n\tif(tiddler) {\n\t\tvar faviconLink = document.getElementById(\"faviconLink\");\n\t\tfaviconLink.setAttribute(\"href\",$tw.utils.makeDataUri(tiddler.fields.text,tiddler.fields.type,tiddler.fields._canonical_uri));\n\t}\n}\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/info.js":{"title":"$:/core/modules/startup/info.js","text":"/*\\\ntitle: $:/core/modules/startup/info.js\ntype: application/javascript\nmodule-type: startup\n\nInitialise $:/info tiddlers via $:/temp/info-plugin pseudo-plugin\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"info\";\nexports.before = [\"startup\"];\nexports.after = [\"load-modules\"];\nexports.synchronous = true;\n\nvar TITLE_INFO_PLUGIN = \"$:/temp/info-plugin\";\n\nexports.startup = function() {\n\t// Function to bake the info plugin with new tiddlers\n\tvar updateInfoPlugin = function(tiddlerFieldsArray) {\n\t\t// Get the existing tiddlers\n\t\tvar json = $tw.wiki.getTiddlerData(TITLE_INFO_PLUGIN,{tiddlers: {}});\n\t\t// Add the new ones\n\t\t$tw.utils.each(tiddlerFieldsArray,function(fields) {\n\t\t\tif(fields &amp;&amp; fields.title) {\n\t\t\t\tjson.tiddlers[fields.title] = fields;\n\t\t\t}\n\t\t});\n\t\t// Bake the info tiddlers into a plugin. We use the non-standard plugin-type \"info\" because ordinary plugins are only registered asynchronously after being loaded dynamically\n\t\tvar fields = {\n\t\t\ttitle: TITLE_INFO_PLUGIN,\n\t\t\ttype: \"application/json\",\n\t\t\t\"plugin-type\": \"info\",\n\t\t\ttext: JSON.stringify(json,null,$tw.config.preferences.jsonSpaces)\n\t\t};\n\t\t$tw.wiki.addTiddler(new $tw.Tiddler(fields));\n\n\t};\n\t// Collect up the info tiddlers\n\tvar tiddlerFieldsArray = [];\n\t// Give each info module a chance to provide as many info tiddlers as they want as an array, and give them a callback for dynamically updating them\n\t$tw.modules.forEachModuleOfType(\"info\",function(title,moduleExports) {\n\t\tif(moduleExports &amp;&amp; moduleExports.getInfoTiddlerFields) {\n\t\t\tArray.prototype.push.apply(tiddlerFieldsArray,moduleExports.getInfoTiddlerFields(updateInfoPlugin));\n\t\t}\n\t});\n\tupdateInfoPlugin(tiddlerFieldsArray);\n\tvar changes = $tw.wiki.readPluginInfo([TITLE_INFO_PLUGIN]);\n\t$tw.wiki.registerPluginTiddlers(\"info\",[TITLE_INFO_PLUGIN]);\n\t$tw.wiki.unpackPluginTiddlers();\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/load-modules.js":{"title":"$:/core/modules/startup/load-modules.js","text":"/*\\\ntitle: $:/core/modules/startup/load-modules.js\ntype: application/javascript\nmodule-type: startup\n\nLoad core modules\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"load-modules\";\nexports.synchronous = true;\n\nexports.startup = function() {\n\t// Load modules\n\t$tw.modules.applyMethods(\"utils\",$tw.utils);\n\tif($tw.node) {\n\t\t$tw.modules.applyMethods(\"utils-node\",$tw.utils);\n\t}\n\tif($tw.browser) {\n\t\t$tw.modules.applyMethods(\"utils-browser\",$tw.utils);\n\t}\n\t$tw.modules.applyMethods(\"global\",$tw);\n\t$tw.modules.applyMethods(\"config\",$tw.config);\n\t$tw.Tiddler.fieldModules = $tw.modules.getModulesByTypeAsHashmap(\"tiddlerfield\");\n\t$tw.modules.applyMethods(\"tiddlermethod\",$tw.Tiddler.prototype);\n\t$tw.modules.applyMethods(\"wikimethod\",$tw.Wiki.prototype);\n\t$tw.wiki.addIndexersToWiki();\n\t$tw.modules.applyMethods(\"tiddlerdeserializer\",$tw.Wiki.tiddlerDeserializerModules);\n\t$tw.macros = $tw.modules.getModulesByTypeAsHashmap(\"macro\");\n\t$tw.wiki.initParsers();\n\t$tw.Commander.initCommands();\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/password.js":{"title":"$:/core/modules/startup/password.js","text":"/*\\\ntitle: $:/core/modules/startup/password.js\ntype: application/javascript\nmodule-type: startup\n\nPassword handling\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"password\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\nexports.startup = function() {\n\t$tw.rootWidget.addEventListener(\"tm-set-password\",function(event) {\n\t\t$tw.passwordPrompt.createPrompt({\n\t\t\tserviceName: $tw.language.getString(\"Encryption/PromptSetPassword\"),\n\t\t\tnoUserName: true,\n\t\t\tsubmitText: $tw.language.getString(\"Encryption/SetPassword\"),\n\t\t\tcanCancel: true,\n\t\t\trepeatPassword: true,\n\t\t\tcallback: function(data) {\n\t\t\t\tif(data) {\n\t\t\t\t\t$tw.crypto.setPassword(data.password);\n\t\t\t\t}\n\t\t\t\treturn true; // Get rid of the password prompt\n\t\t\t}\n\t\t});\n\t});\n\t$tw.rootWidget.addEventListener(\"tm-clear-password\",function(event) {\n\t\tif($tw.browser) {\n\t\t\tif(!confirm($tw.language.getString(\"Encryption/ConfirmClearPassword\"))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$tw.crypto.setPassword(null);\n\t});\n\t// Ensure that $:/isEncrypted is maintained properly\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\tif($tw.utils.hop(changes,\"$:/isEncrypted\")) {\n\t\t\t$tw.crypto.updateCryptoStateTiddler();\n\t\t}\n\t});\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/plugins.js":{"title":"$:/core/modules/startup/plugins.js","text":"/*\\\ntitle: $:/core/modules/startup/plugins.js\ntype: application/javascript\nmodule-type: startup\n\nStartup logic concerned with managing plugins\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"plugins\";\nexports.after = [\"load-modules\"];\nexports.synchronous = true;\n\nvar TITLE_REQUIRE_RELOAD_DUE_TO_PLUGIN_CHANGE = \"$:/status/RequireReloadDueToPluginChange\";\n\nvar PREFIX_CONFIG_REGISTER_PLUGIN_TYPE = \"$:/config/RegisterPluginType/\";\n\nexports.startup = function() {\n\t$tw.wiki.addTiddler({title: TITLE_REQUIRE_RELOAD_DUE_TO_PLUGIN_CHANGE,text: \"no\"});\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\t// Work out which of the changed tiddlers are plugins that we need to reregister\n\t\tvar changesToProcess = [],\n\t\t\trequireReloadDueToPluginChange = false;\n\t\t$tw.utils.each(Object.keys(changes),function(title) {\n\t\t\tvar tiddler = $tw.wiki.getTiddler(title),\n\t\t\t\trequiresReload = $tw.wiki.doesPluginRequireReload(title);\n\t\t\tif(requiresReload) {\n\t\t\t\trequireReloadDueToPluginChange = true;\n\t\t\t} else if(tiddler) {\n\t\t\t\tvar pluginType = tiddler.fields[\"plugin-type\"];\n\t\t\t\tif($tw.wiki.getTiddlerText(PREFIX_CONFIG_REGISTER_PLUGIN_TYPE + (tiddler.fields[\"plugin-type\"] || \"\"),\"no\") === \"yes\") {\n\t\t\t\t\tchangesToProcess.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// Issue warning if any of the tiddlers require a reload\n\t\tif(requireReloadDueToPluginChange) {\n\t\t\t$tw.wiki.addTiddler({title: TITLE_REQUIRE_RELOAD_DUE_TO_PLUGIN_CHANGE,text: \"yes\"});\n\t\t}\n\t\t// Read or delete the plugin info of the changed tiddlers\n\t\tif(changesToProcess.length &gt; 0) {\n\t\t\tvar changes = $tw.wiki.readPluginInfo(changesToProcess);\n\t\t\tif(changes.modifiedPlugins.length &gt; 0 || changes.deletedPlugins.length &gt; 0) {\n\t\t\t\tvar changedShadowTiddlers = {};\n\t\t\t\t// Collect the shadow tiddlers of any deleted plugins\n\t\t\t\t$tw.utils.each(changes.deletedPlugins,function(pluginTitle) {\n\t\t\t\t\tvar pluginInfo = $tw.wiki.getPluginInfo(pluginTitle);\n\t\t\t\t\tif(pluginInfo) {\n\t\t\t\t\t\t$tw.utils.each(Object.keys(pluginInfo.tiddlers),function(title) {\n\t\t\t\t\t\t\tchangedShadowTiddlers[title] = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// Collect the shadow tiddlers of any modified plugins\n\t\t\t\t$tw.utils.each(changes.modifiedPlugins,function(pluginTitle) {\n\t\t\t\t\tvar pluginInfo = $tw.wiki.getPluginInfo(pluginTitle);\n\t\t\t\t\tif(pluginInfo) {\n\t\t\t\t\t\t$tw.utils.each(Object.keys(pluginInfo.tiddlers),function(title) {\n\t\t\t\t\t\t\tchangedShadowTiddlers[title] = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// (Re-)register any modified plugins\n\t\t\t\t$tw.wiki.registerPluginTiddlers(null,changes.modifiedPlugins);\n\t\t\t\t// Unregister any deleted plugins\n\t\t\t\t$tw.wiki.unregisterPluginTiddlers(null,changes.deletedPlugins);\n\t\t\t\t// Unpack the shadow tiddlers\n\t\t\t\t$tw.wiki.unpackPluginTiddlers();\n\t\t\t\t// Queue change events for the changed shadow tiddlers\n\t\t\t\t$tw.utils.each(Object.keys(changedShadowTiddlers),function(title) {\n\t\t\t\t\t$tw.wiki.enqueueTiddlerEvent(title,changedShadowTiddlers[title]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/render.js":{"title":"$:/core/modules/startup/render.js","text":"/*\\\ntitle: $:/core/modules/startup/render.js\ntype: application/javascript\nmodule-type: startup\n\nTitle, stylesheet and page rendering\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"render\";\nexports.platforms = [\"browser\"];\nexports.after = [\"story\"];\nexports.synchronous = true;\n\n// Default story and history lists\nvar PAGE_TITLE_TITLE = \"$:/core/wiki/title\";\nvar PAGE_STYLESHEET_TITLE = \"$:/core/ui/PageStylesheet\";\nvar PAGE_TEMPLATE_TITLE = \"$:/core/ui/RootTemplate\";\n\n// Time (in ms) that we defer refreshing changes to draft tiddlers\nvar DRAFT_TIDDLER_TIMEOUT_TITLE = \"$:/config/Drafts/TypingTimeout\";\nvar THROTTLE_REFRESH_TIMEOUT = 400;\n\nexports.startup = function() {\n\t// Set up the title\n\t$tw.titleWidgetNode = $tw.wiki.makeTranscludeWidget(PAGE_TITLE_TITLE,{document: $tw.fakeDocument, parseAsInline: true});\n\t$tw.titleContainer = $tw.fakeDocument.createElement(\"div\");\n\t$tw.titleWidgetNode.render($tw.titleContainer,null);\n\tdocument.title = $tw.titleContainer.textContent;\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\tif($tw.titleWidgetNode.refresh(changes,$tw.titleContainer,null)) {\n\t\t\tdocument.title = $tw.titleContainer.textContent;\n\t\t}\n\t});\n\t// Set up the styles\n\t$tw.styleWidgetNode = $tw.wiki.makeTranscludeWidget(PAGE_STYLESHEET_TITLE,{document: $tw.fakeDocument});\n\t$tw.styleContainer = $tw.fakeDocument.createElement(\"style\");\n\t$tw.styleWidgetNode.render($tw.styleContainer,null);\n\t$tw.styleElement = document.createElement(\"style\");\n\t$tw.styleElement.innerHTML = $tw.styleContainer.textContent;\n\tdocument.head.insertBefore($tw.styleElement,document.head.firstChild);\n\t$tw.wiki.addEventListener(\"change\",$tw.perf.report(\"styleRefresh\",function(changes) {\n\t\tif($tw.styleWidgetNode.refresh(changes,$tw.styleContainer,null)) {\n\t\t\t$tw.styleElement.innerHTML = $tw.styleContainer.textContent;\n\t\t}\n\t}));\n\t// Display the $:/core/ui/PageTemplate tiddler to kick off the display\n\t$tw.perf.report(\"mainRender\",function() {\n\t\t$tw.pageWidgetNode = $tw.wiki.makeTranscludeWidget(PAGE_TEMPLATE_TITLE,{document: document, parentWidget: $tw.rootWidget, recursionMarker: \"no\"});\n\t\t$tw.pageContainer = document.createElement(\"div\");\n\t\t$tw.utils.addClass($tw.pageContainer,\"tc-page-container-wrapper\");\n\t\tdocument.body.insertBefore($tw.pageContainer,document.body.firstChild);\n\t\t$tw.pageWidgetNode.render($tw.pageContainer,null);\n   \t\t$tw.hooks.invokeHook(\"th-page-refreshed\");\n\t})();\n\t// Remove any splash screen elements\n\tvar removeList = document.querySelectorAll(\".tc-remove-when-wiki-loaded\");\n\t$tw.utils.each(removeList,function(removeItem) {\n\t\tif(removeItem.parentNode) {\n\t\t\tremoveItem.parentNode.removeChild(removeItem);\n\t\t}\n\t});\n\t// Prepare refresh mechanism\n\tvar deferredChanges = Object.create(null),\n\t\ttimerId;\n\tfunction refresh() {\n\t\t// Process the refresh\n\t\t$tw.hooks.invokeHook(\"th-page-refreshing\");\n\t\t$tw.pageWidgetNode.refresh(deferredChanges);\n\t\tdeferredChanges = Object.create(null);\n\t\t$tw.hooks.invokeHook(\"th-page-refreshed\");\n\t}\n\t// Add the change event handler\n\t$tw.wiki.addEventListener(\"change\",$tw.perf.report(\"mainRefresh\",function(changes) {\n\t\t// Check if only tiddlers that are throttled have changed\n\t\tvar onlyThrottledTiddlersHaveChanged = true;\n\t\tfor(var title in changes) {\n\t\t\tvar tiddler = $tw.wiki.getTiddler(title);\n\t\t\tif(!$tw.wiki.isVolatileTiddler(title) &amp;&amp; (!tiddler || !(tiddler.hasField(\"draft.of\") || tiddler.hasField(\"throttle.refresh\")))) {\n\t\t\t\tonlyThrottledTiddlersHaveChanged = false;\n\t\t\t}\n\t\t}\n\t\t// Defer the change if only drafts have changed\n\t\tif(timerId) {\n\t\t\tclearTimeout(timerId);\n\t\t}\n\t\ttimerId = null;\n\t\tif(onlyThrottledTiddlersHaveChanged) {\n\t\t\tvar timeout = parseInt($tw.wiki.getTiddlerText(DRAFT_TIDDLER_TIMEOUT_TITLE,\"\"),10);\n\t\t\tif(isNaN(timeout)) {\n\t\t\t\ttimeout = THROTTLE_REFRESH_TIMEOUT;\n\t\t\t}\n\t\t\ttimerId = setTimeout(refresh,timeout);\n\t\t\t$tw.utils.extend(deferredChanges,changes);\n\t\t} else {\n\t\t\t$tw.utils.extend(deferredChanges,changes);\n\t\t\trefresh();\n\t\t}\n\t}));\n\t// Fix up the link between the root widget and the page container\n\t$tw.rootWidget.domNodes = [$tw.pageContainer];\n\t$tw.rootWidget.children = [$tw.pageWidgetNode];\n\t// Run any post-render startup actions\n\t$tw.rootWidget.invokeActionsByTag(\"$:/tags/StartupAction/PostRender\");\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/rootwidget.js":{"title":"$:/core/modules/startup/rootwidget.js","text":"/*\\\ntitle: $:/core/modules/startup/rootwidget.js\ntype: application/javascript\nmodule-type: startup\n\nSetup the root widget and the core root widget handlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"rootwidget\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.before = [\"story\"];\nexports.synchronous = true;\n\nexports.startup = function() {\n\t// Install the modal message mechanism\n\t$tw.modal = new $tw.utils.Modal($tw.wiki);\n\t$tw.rootWidget.addEventListener(\"tm-modal\",function(event) {\n\t\t$tw.modal.display(event.param,{variables: event.paramObject, event: event});\n\t});\n\t$tw.rootWidget.addEventListener(\"tm-show-switcher\",function(event) {\n\t\t$tw.modal.display(\"$:/core/ui/SwitcherModal\",{variables: event.paramObject, event: event});\n\t});\n\t// Install the notification  mechanism\n\t$tw.notifier = new $tw.utils.Notifier($tw.wiki);\n\t$tw.rootWidget.addEventListener(\"tm-notify\",function(event) {\n\t\t$tw.notifier.display(event.param,{variables: event.paramObject});\n\t});\n\t// Install the copy-to-clipboard  mechanism\n\t$tw.rootWidget.addEventListener(\"tm-copy-to-clipboard\",function(event) {\n\t\t$tw.utils.copyToClipboard(event.param);\n\t});\n\t// Install the tm-focus-selector message\n\t$tw.rootWidget.addEventListener(\"tm-focus-selector\",function(event) {\n\t\tvar selector = event.param || \"\",\n\t\t\telement,\n\t\t    \tdoc = event.event &amp;&amp; event.event.target ? event.event.target.ownerDocument : document;\n\t\ttry {\n\t\t\telement = doc.querySelector(selector);\n\t\t} catch(e) {\n\t\t\tconsole.log(\"Error in selector: \",selector)\n\t\t}\n\t\tif(element &amp;&amp; element.focus) {\n\t\t\telement.focus(event.paramObject);\n\t\t}\n\t});\n\t// Install the scroller\n\t$tw.pageScroller = new $tw.utils.PageScroller();\n\t$tw.rootWidget.addEventListener(\"tm-scroll\",function(event) {\n\t\t$tw.pageScroller.handleEvent(event);\n\t});\n\tvar fullscreen = $tw.utils.getFullScreenApis();\n\tif(fullscreen) {\n\t\t$tw.rootWidget.addEventListener(\"tm-full-screen\",function(event) {\n\t\t\tvar fullScreenDocument = event.event ? event.event.target.ownerDocument : document;\n\t\t\tif(event.param === \"enter\") {\n\t\t\t\tfullScreenDocument.documentElement[fullscreen._requestFullscreen](Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t} else if(event.param === \"exit\") {\n\t\t\t\tfullScreenDocument[fullscreen._exitFullscreen]();\n\t\t\t} else {\n\t\t\t\tif(fullScreenDocument[fullscreen._fullscreenElement]) {\n\t\t\t\t\tfullScreenDocument[fullscreen._exitFullscreen]();\n\t\t\t\t} else {\n\t\t\t\t\tfullScreenDocument.documentElement[fullscreen._requestFullscreen](Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t// If we're being viewed on a data: URI then give instructions for how to save\n\tif(document.location.protocol === \"data:\") {\n\t\t$tw.rootWidget.dispatchEvent({\n\t\t\ttype: \"tm-modal\",\n\t\t\tparam: \"$:/language/Modals/SaveInstructions\"\n\t\t});\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup.js":{"title":"$:/core/modules/startup.js","text":"/*\\\ntitle: $:/core/modules/startup.js\ntype: application/javascript\nmodule-type: startup\n\nMiscellaneous startup logic for both the client and server.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"startup\";\nexports.after = [\"load-modules\"];\nexports.synchronous = true;\n\n// Set to `true` to enable performance instrumentation\nvar PERFORMANCE_INSTRUMENTATION_CONFIG_TITLE = \"$:/config/Performance/Instrumentation\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nexports.startup = function() {\n\t// Minimal browser detection\n\tif($tw.browser) {\n\t\t$tw.browser.isIE = (/msie|trident/i.test(navigator.userAgent));\n\t\t$tw.browser.isFirefox = !!document.mozFullScreenEnabled;\n\t}\n\t// Platform detection\n\t$tw.platform = {};\n\tif($tw.browser) {\n\t\t$tw.platform.isMac = /Mac/.test(navigator.platform);\n\t\t$tw.platform.isWindows = /win/i.test(navigator.platform);\n\t\t$tw.platform.isLinux = /Linux/i.test(navigator.platform);\n\t} else {\n\t\tswitch(require(\"os\").platform()) {\n\t\t\tcase \"darwin\":\n\t\t\t\t$tw.platform.isMac = true;\n\t\t\t\tbreak;\n\t\t\tcase \"win32\":\n\t\t\t\t$tw.platform.isWindows = true;\n\t\t\t\tbreak;\n\t\t\tcase \"freebsd\":\n\t\t\t\t$tw.platform.isLinux = true;\n\t\t\t\tbreak;\n\t\t\tcase \"linux\":\n\t\t\t\t$tw.platform.isLinux = true;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t// Initialise version\n\t$tw.version = $tw.utils.extractVersionInfo();\n\t// Set up the performance framework\n\t$tw.perf = new $tw.Performance($tw.wiki.getTiddlerText(PERFORMANCE_INSTRUMENTATION_CONFIG_TITLE,\"no\") === \"yes\");\n\t// Create a root widget for attaching event handlers. By using it as the parentWidget for another widget tree, one can reuse the event handlers\n\t$tw.rootWidget = new widget.widget({\n\t\ttype: \"widget\",\n\t\tchildren: []\n\t},{\n\t\twiki: $tw.wiki,\n\t\tdocument: $tw.browser ? document : $tw.fakeDocument\n\t});\n\t// Execute any startup actions\n\t$tw.rootWidget.invokeActionsByTag(\"$:/tags/StartupAction\");\n\tif($tw.browser) {\n\t\t$tw.rootWidget.invokeActionsByTag(\"$:/tags/StartupAction/Browser\");\n\t}\n\tif($tw.node) {\n\t\t$tw.rootWidget.invokeActionsByTag(\"$:/tags/StartupAction/Node\");\n\t}\n\t// Kick off the language manager and switcher\n\t$tw.language = new $tw.Language();\n\t$tw.languageSwitcher = new $tw.PluginSwitcher({\n\t\twiki: $tw.wiki,\n\t\tpluginType: \"language\",\n\t\tcontrollerTitle: \"$:/language\",\n\t\tdefaultPlugins: [\n\t\t\t\"$:/languages/en-GB\"\n\t\t],\n\t\tonSwitch: function(plugins) {\n\t\t\tif($tw.browser) {\n\t\t\t\tvar pluginTiddler = $tw.wiki.getTiddler(plugins[0]);\n\t\t\t\tif(pluginTiddler) {\n\t\t\t\t\tdocument.documentElement.setAttribute(\"dir\",pluginTiddler.getFieldString(\"text-direction\") || \"auto\");\n\t\t\t\t} else {\n\t\t\t\t\tdocument.documentElement.removeAttribute(\"dir\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// Kick off the theme manager\n\t$tw.themeManager = new $tw.PluginSwitcher({\n\t\twiki: $tw.wiki,\n\t\tpluginType: \"theme\",\n\t\tcontrollerTitle: \"$:/theme\",\n\t\tdefaultPlugins: [\n\t\t\t\"$:/themes/tiddlywiki/snowwhite\",\n\t\t\t\"$:/themes/tiddlywiki/vanilla\"\n\t\t]\n\t});\n\t// Kick off the keyboard manager\n\t$tw.keyboardManager = new $tw.KeyboardManager();\n\t// Listen for shortcuts\n\tif($tw.browser) {\n\t\t$tw.utils.addEventListeners(document,[{\n\t\t\tname: \"keydown\",\n\t\t\thandlerObject: $tw.keyboardManager,\n\t\t\thandlerMethod: \"handleKeydownEvent\"\n\t\t}]);\n\t}\n\t// Clear outstanding tiddler store change events to avoid an unnecessary refresh cycle at startup\n\t$tw.wiki.clearTiddlerEventQueue();\n\t// Find a working syncadaptor\n\t$tw.syncadaptor = undefined;\n\t$tw.modules.forEachModuleOfType(\"syncadaptor\",function(title,module) {\n\t\tif(!$tw.syncadaptor &amp;&amp; module.adaptorClass) {\n\t\t\t$tw.syncadaptor = new module.adaptorClass({wiki: $tw.wiki});\n\t\t}\n\t});\n\t// Set up the syncer object if we've got a syncadaptor\n\tif($tw.syncadaptor) {\n\t\t$tw.syncer = new $tw.Syncer({wiki: $tw.wiki, syncadaptor: $tw.syncadaptor});\n\t}\n\t// Setup the saver handler\n\t$tw.saverHandler = new $tw.SaverHandler({\n\t\twiki: $tw.wiki,\n\t\tdirtyTracking: !$tw.syncadaptor,\n\t\tpreloadDirty: $tw.boot.preloadDirty || []\n\t});\n\t// Host-specific startup\n\tif($tw.browser) {\n\t\t// Install the popup manager\n\t\t$tw.popup = new $tw.utils.Popup();\n\t\t// Install the animator\n\t\t$tw.anim = new $tw.utils.Animator();\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/story.js":{"title":"$:/core/modules/startup/story.js","text":"/*\\\ntitle: $:/core/modules/startup/story.js\ntype: application/javascript\nmodule-type: startup\n\nLoad core modules\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"story\";\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\n// Default story and history lists\nvar DEFAULT_STORY_TITLE = \"$:/StoryList\";\nvar DEFAULT_HISTORY_TITLE = \"$:/HistoryList\";\n\n// Default tiddlers\nvar DEFAULT_TIDDLERS_TITLE = \"$:/DefaultTiddlers\";\n\n// Config\nvar CONFIG_UPDATE_ADDRESS_BAR = \"$:/config/Navigation/UpdateAddressBar\"; // Can be \"no\", \"permalink\", \"permaview\"\nvar CONFIG_UPDATE_HISTORY = \"$:/config/Navigation/UpdateHistory\"; // Can be \"yes\" or \"no\"\nvar CONFIG_PERMALINKVIEW_COPY_TO_CLIPBOARD = \"$:/config/Navigation/Permalinkview/CopyToClipboard\"; // Can be \"yes\" (default) or \"no\"\nvar CONFIG_PERMALINKVIEW_UPDATE_ADDRESS_BAR = \"$:/config/Navigation/Permalinkview/UpdateAddressBar\"; // Can be \"yes\" (default) or \"no\"\n\n\n// Links to help, if there is no param\nvar HELP_OPEN_EXTERNAL_WINDOW = \"http://tiddlywiki.com/#WidgetMessage%3A%20tm-open-external-window\";\n\nexports.startup = function() {\n\t// Open startup tiddlers\n\topenStartupTiddlers({\n\t\tdisableHistory: $tw.boot.disableStartupNavigation\n\t});\n\tif($tw.browser) {\n\t\t// Set up location hash update\n\t\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\t\tif($tw.utils.hop(changes,DEFAULT_STORY_TITLE) || $tw.utils.hop(changes,DEFAULT_HISTORY_TITLE)) {\n\t\t\t\tupdateLocationHash({\n\t\t\t\t\tupdateAddressBar: $tw.wiki.getTiddlerText(CONFIG_UPDATE_ADDRESS_BAR,\"permaview\").trim(),\n\t\t\t\t\tupdateHistory: $tw.wiki.getTiddlerText(CONFIG_UPDATE_HISTORY,\"no\").trim()\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t// Listen for changes to the browser location hash\n\t\twindow.addEventListener(\"hashchange\",function() {\n\t\t\tvar hash = $tw.utils.getLocationHash();\n\t\t\tif(hash !== $tw.locationHash) {\n\t\t\t\t$tw.locationHash = hash;\n\t\t\t\topenStartupTiddlers({defaultToCurrentStory: true});\n\t\t\t}\n\t\t},false);\n\t\t// Listen for the tm-browser-refresh message\n\t\t$tw.rootWidget.addEventListener(\"tm-browser-refresh\",function(event) {\n\t\t\twindow.location.reload(true);\n\t\t});\n\t\t// Listen for tm-open-external-window message\n\t\t$tw.rootWidget.addEventListener(\"tm-open-external-window\",function(event) {\n\t\t\tvar paramObject = event.paramObject || {},\n\t\t\t\tstrUrl = event.param || HELP_OPEN_EXTERNAL_WINDOW,\n\t\t\t\tstrWindowName = paramObject.windowName,\n\t\t\t\tstrWindowFeatures = paramObject.windowFeatures;\n\t\t\twindow.open(strUrl, strWindowName, strWindowFeatures);\n\t\t});\n\t\t// Listen for the tm-print message\n\t\t$tw.rootWidget.addEventListener(\"tm-print\",function(event) {\n\t\t\t(event.event.view || window).print();\n\t\t});\n\t\t// Listen for the tm-home message\n\t\t$tw.rootWidget.addEventListener(\"tm-home\",function(event) {\n\t\t\twindow.location.hash = \"\";\n\t\t\tvar storyFilter = $tw.wiki.getTiddlerText(DEFAULT_TIDDLERS_TITLE),\n\t\t\t\tstoryList = $tw.wiki.filterTiddlers(storyFilter);\n\t\t\t//invoke any hooks that might change the default story list\n\t\t\tstoryList = $tw.hooks.invokeHook(\"th-opening-default-tiddlers-list\",storyList);\n\t\t\t$tw.wiki.addTiddler({title: DEFAULT_STORY_TITLE, text: \"\", list: storyList},$tw.wiki.getModificationFields());\n\t\t\tif(storyList[0]) {\n\t\t\t\t$tw.wiki.addToHistory(storyList[0]);\n\t\t\t}\n\t\t});\n\t\t// Listen for the tm-permalink message\n\t\t$tw.rootWidget.addEventListener(\"tm-permalink\",function(event) {\n\t\t\tupdateLocationHash({\n\t\t\t\tupdateAddressBar: $tw.wiki.getTiddlerText(CONFIG_PERMALINKVIEW_UPDATE_ADDRESS_BAR,\"yes\").trim() === \"yes\" ? \"permalink\" : \"none\",\n\t\t\t\tupdateHistory: $tw.wiki.getTiddlerText(CONFIG_UPDATE_HISTORY,\"no\").trim(),\n\t\t\t\ttargetTiddler: event.param || event.tiddlerTitle,\n\t\t\t\tcopyToClipboard: $tw.wiki.getTiddlerText(CONFIG_PERMALINKVIEW_COPY_TO_CLIPBOARD,\"yes\").trim() === \"yes\" ? \"permalink\" : \"none\"\n\t\t\t});\n\t\t});\n\t\t// Listen for the tm-permaview message\n\t\t$tw.rootWidget.addEventListener(\"tm-permaview\",function(event) {\n\t\t\tupdateLocationHash({\n\t\t\t\tupdateAddressBar: $tw.wiki.getTiddlerText(CONFIG_PERMALINKVIEW_UPDATE_ADDRESS_BAR,\"yes\").trim() === \"yes\" ? \"permaview\" : \"none\",\n\t\t\t\tupdateHistory: $tw.wiki.getTiddlerText(CONFIG_UPDATE_HISTORY,\"no\").trim(),\n\t\t\t\ttargetTiddler: event.param || event.tiddlerTitle,\n\t\t\t\tcopyToClipboard: $tw.wiki.getTiddlerText(CONFIG_PERMALINKVIEW_COPY_TO_CLIPBOARD,\"yes\").trim() === \"yes\" ? \"permaview\" : \"none\"\n\t\t\t});\n\t\t});\n\t}\n};\n\n/*\nProcess the location hash to open the specified tiddlers. Options:\ndisableHistory: if true $:/History is NOT updated\ndefaultToCurrentStory: If true, the current story is retained as the default, instead of opening the default tiddlers\n*/\nfunction openStartupTiddlers(options) {\n\toptions = options || {};\n\t// Work out the target tiddler and the story filter. \"null\" means \"unspecified\"\n\tvar target = null,\n\t\tstoryFilter = null;\n\tif($tw.locationHash.length &gt; 1) {\n\t\tvar hash = $tw.locationHash.substr(1),\n\t\t\tsplit = hash.indexOf(\":\");\n\t\tif(split === -1) {\n\t\t\ttarget = decodeURIComponent(hash.trim());\n\t\t} else {\n\t\t\ttarget = decodeURIComponent(hash.substr(0,split).trim());\n\t\t\tstoryFilter = decodeURIComponent(hash.substr(split + 1).trim());\n\t\t}\n\t}\n\t// If the story wasn't specified use the current tiddlers or a blank story\n\tif(storyFilter === null) {\n\t\tif(options.defaultToCurrentStory) {\n\t\t\tvar currStoryList = $tw.wiki.getTiddlerList(DEFAULT_STORY_TITLE);\n\t\t\tstoryFilter = $tw.utils.stringifyList(currStoryList);\n\t\t} else {\n\t\t\tif(target &amp;&amp; target !== \"\") {\n\t\t\t\tstoryFilter = \"\";\n\t\t\t} else {\n\t\t\t\tstoryFilter = $tw.wiki.getTiddlerText(DEFAULT_TIDDLERS_TITLE);\n\t\t\t}\n\t\t}\n\t}\n\t// Process the story filter to get the story list\n\tvar storyList = $tw.wiki.filterTiddlers(storyFilter);\n\t// Invoke any hooks that want to change the default story list\n\tstoryList = $tw.hooks.invokeHook(\"th-opening-default-tiddlers-list\",storyList);\n\t// If the target tiddler isn't included then splice it in at the top\n\tif(target &amp;&amp; storyList.indexOf(target) === -1) {\n\t\tstoryList.unshift(target);\n\t}\n\t// Save the story list\n\t$tw.wiki.addTiddler({title: DEFAULT_STORY_TITLE, text: \"\", list: storyList},$tw.wiki.getModificationFields());\n\t// Update history\n\tvar story = new $tw.Story({\n\t\twiki: $tw.wiki,\n\t\tstoryTitle: DEFAULT_STORY_TITLE,\n\t\thistoryTitle: DEFAULT_HISTORY_TITLE\n\t});\n\tif(!options.disableHistory) {\n\t\t// If a target tiddler was specified add it to the history stack\n\t\tif(target &amp;&amp; target !== \"\") {\n\t\t\t// The target tiddler doesn't need double square brackets, but we'll silently remove them if they're present\n\t\t\tif(target.indexOf(\"[[\") === 0 &amp;&amp; target.substr(-2) === \"]]\") {\n\t\t\t\ttarget = target.substr(2,target.length - 4);\n\t\t\t}\n\t\t\tstory.addToHistory(target);\n\t\t} else if(storyList.length &gt; 0) {\n\t\t\tstory.addToHistory(storyList[0]);\n\t\t}\n\t}\n}\n\n/*\noptions: See below\noptions.updateAddressBar: \"permalink\", \"permaview\" or \"no\" (defaults to \"permaview\")\noptions.updateHistory: \"yes\" or \"no\" (defaults to \"no\")\noptions.copyToClipboard: \"permalink\", \"permaview\" or \"no\" (defaults to \"no\")\noptions.targetTiddler: optional title of target tiddler for permalink\n*/\nfunction updateLocationHash(options) {\n\t// Get the story and the history stack\n\tvar storyList = $tw.wiki.getTiddlerList(DEFAULT_STORY_TITLE),\n\t\thistoryList = $tw.wiki.getTiddlerData(DEFAULT_HISTORY_TITLE,[]),\n\t\ttargetTiddler = \"\";\n\tif(options.targetTiddler) {\n\t\ttargetTiddler = options.targetTiddler;\n\t} else {\n\t\t// The target tiddler is the one at the top of the stack\n\t\tif(historyList.length &gt; 0) {\n\t\t\ttargetTiddler = historyList[historyList.length-1].title;\n\t\t}\n\t\t// Blank the target tiddler if it isn't present in the story\n\t\tif(storyList.indexOf(targetTiddler) === -1) {\n\t\t\ttargetTiddler = \"\";\n\t\t}\n\t}\n\t// Assemble the location hash\n\tswitch(options.updateAddressBar) {\n\t\tcase \"permalink\":\n\t\t\t$tw.locationHash = \"#\" + encodeURIComponent(targetTiddler);\n\t\t\tbreak;\n\t\tcase \"permaview\":\n\t\t\t$tw.locationHash = \"#\" + encodeURIComponent(targetTiddler) + \":\" + encodeURIComponent($tw.utils.stringifyList(storyList));\n\t\t\tbreak;\n\t}\n\t// Copy URL to the clipboard\n\tswitch(options.copyToClipboard) {\n\t\tcase \"permalink\":\n\t\t\t$tw.utils.copyToClipboard($tw.utils.getLocationPath() + \"#\" + encodeURIComponent(targetTiddler));\n\t\t\tbreak;\n\t\tcase \"permaview\":\n\t\t\t$tw.utils.copyToClipboard($tw.utils.getLocationPath() + \"#\" + encodeURIComponent(targetTiddler) + \":\" + encodeURIComponent($tw.utils.stringifyList(storyList)));\n\t\t\tbreak;\n\t}\n\t// Only change the location hash if we must, thus avoiding unnecessary onhashchange events\n\tif($tw.utils.getLocationHash() !== $tw.locationHash) {\n\t\tif(options.updateHistory === \"yes\") {\n\t\t\t// Assign the location hash so that history is updated\n\t\t\twindow.location.hash = $tw.locationHash;\n\t\t} else {\n\t\t\t// We use replace so that browser history isn't affected\n\t\t\twindow.location.replace(window.location.toString().split(\"#\")[0] + $tw.locationHash);\n\t\t}\n\t}\n}\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/startup/windows.js":{"title":"$:/core/modules/startup/windows.js","text":"/*\\\ntitle: $:/core/modules/startup/windows.js\ntype: application/javascript\nmodule-type: startup\n\nSetup root widget handlers for the messages concerned with opening external browser windows\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"windows\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\n// Global to keep track of open windows (hashmap by title)\n$tw.windows = {};\n\nexports.startup = function() {\n\t// Handle open window message\n\t$tw.rootWidget.addEventListener(\"tm-open-window\",function(event) {\n\t\t// Get the parameters\n\t\tvar refreshHandler,\n\t\t\ttitle = event.param || event.tiddlerTitle,\n\t\t\tparamObject = event.paramObject || {},\n\t\t\twindowTitle = paramObject.windowTitle || title,\n\t\t\ttemplate = paramObject.template || \"$:/core/templates/single.tiddler.window\",\n\t\t\twidth = paramObject.width || \"700\",\n\t\t\theight = paramObject.height || \"600\",\n\t\t\tvariables = $tw.utils.extend({},paramObject,{currentTiddler: title});\n\t\t// Open the window\n\t\tvar srcWindow,\n\t\t    srcDocument;\n\t\t// In case that popup blockers deny opening a new window\n\t\ttry {\n\t\t\tsrcWindow = window.open(\"\",\"external-\" + title,\"scrollbars,width=\" + width + \",height=\" + height),\n\t\t\tsrcDocument = srcWindow.document;\n\t\t}\n\t\tcatch(e) {\n\t\t\treturn;\n\t\t}\n\t\t$tw.windows[title] = srcWindow;\n\t\t// Check for reopening the same window\n\t\tif(srcWindow.haveInitialisedWindow) {\n\t\t\treturn;\n\t\t}\n\t\t// Initialise the document\n\t\tsrcDocument.write(\"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body class='tc-body tc-single-tiddler-window'&gt;&lt;/body&gt;&lt;/html&gt;\");\n\t\tsrcDocument.close();\n\t\tsrcDocument.title = windowTitle;\n\t\tsrcWindow.addEventListener(\"beforeunload\",function(event) {\n\t\t\tdelete $tw.windows[title];\n\t\t\t$tw.wiki.removeEventListener(\"change\",refreshHandler);\n\t\t},false);\n\t\t// Set up the styles\n\t\tvar styleWidgetNode = $tw.wiki.makeTranscludeWidget(\"$:/core/ui/PageStylesheet\",{\n\t\t\t\tdocument: $tw.fakeDocument,\n\t\t\t\tvariables: variables,\n\t\t\t\timportPageMacros: true}),\n\t\t\tstyleContainer = $tw.fakeDocument.createElement(\"style\");\n\t\tstyleWidgetNode.render(styleContainer,null);\n\t\tvar styleElement = srcDocument.createElement(\"style\");\n\t\tstyleElement.innerHTML = styleContainer.textContent;\n\t\tsrcDocument.head.insertBefore(styleElement,srcDocument.head.firstChild);\n\t\t// Render the text of the tiddler\n\t\tvar parser = $tw.wiki.parseTiddler(template),\n\t\t\twidgetNode = $tw.wiki.makeWidget(parser,{document: srcDocument, parentWidget: $tw.rootWidget, variables: variables});\n\t\twidgetNode.render(srcDocument.body,srcDocument.body.firstChild);\n\t\t// Function to handle refreshes\n\t\trefreshHandler = function(changes) {\n\t\t\tif(styleWidgetNode.refresh(changes,styleContainer,null)) {\n\t\t\t\tstyleElement.innerHTML = styleContainer.textContent;\n\t\t\t}\n\t\t\twidgetNode.refresh(changes);\n\t\t};\n\t\t$tw.wiki.addEventListener(\"change\",refreshHandler);\n\t\t// Listen for keyboard shortcuts\n\t\t$tw.utils.addEventListeners(srcDocument,[{\n\t\t\tname: \"keydown\",\n\t\t\thandlerObject: $tw.keyboardManager,\n\t\t\thandlerMethod: \"handleKeydownEvent\"\n\t\t}]);\n\t\tsrcWindow.document.documentElement.addEventListener(\"click\",$tw.popup,true);\n\t\tsrcWindow.haveInitialisedWindow = true;\n\t});\n\t// Close open windows when unloading main window\n\t$tw.addUnloadTask(function() {\n\t\t$tw.utils.each($tw.windows,function(win) {\n\t\t\twin.close();\n\t\t});\n\t});\n\n};\n\n})();\n","type":"application/javascript","module-type":"startup"},"$:/core/modules/story.js":{"title":"$:/core/modules/story.js","text":"/*\\\ntitle: $:/core/modules/story.js\ntype: application/javascript\nmodule-type: global\n\nLightweight object for managing interactions with the story and history lists.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nConstruct Story object with options:\nwiki: reference to wiki object to use to resolve tiddler titles\nstoryTitle: title of story list tiddler\nhistoryTitle: title of history list tiddler\n*/\nfunction Story(options) {\n\toptions = options || {};\n\tthis.wiki = options.wiki || $tw.wiki;\n\tthis.storyTitle = options.storyTitle || \"$:/StoryList\";\n\tthis.historyTitle = options.historyTitle || \"$:/HistoryList\";\n};\n\nStory.prototype.navigateTiddler = function(navigateTo,navigateFromTitle,navigateFromClientRect) {\n\tthis.addToStory(navigateTo,navigateFromTitle);\n\tthis.addToHistory(navigateTo,navigateFromClientRect);\n};\n\nStory.prototype.getStoryList = function() {\n\treturn this.wiki.getTiddlerList(this.storyTitle) || [];\n};\n\nStory.prototype.addToStory = function(navigateTo,navigateFromTitle,options) {\n\toptions = options || {};\n\tvar storyList = this.getStoryList();\n\t// See if the tiddler is already there\n\tvar slot = storyList.indexOf(navigateTo);\n\t// Quit if it already exists in the story river\n\tif(slot &gt;= 0) {\n\t\treturn;\n\t}\n\t// First we try to find the position of the story element we navigated from\n\tvar fromIndex = storyList.indexOf(navigateFromTitle);\n\tif(fromIndex &gt;= 0) {\n\t\t// The tiddler is added from inside the river\n\t\t// Determine where to insert the tiddler; Fallback is \"below\"\n\t\tswitch(options.openLinkFromInsideRiver) {\n\t\t\tcase \"top\":\n\t\t\t\tslot = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tslot = storyList.length;\n\t\t\t\tbreak;\n\t\t\tcase \"above\":\n\t\t\t\tslot = fromIndex;\n\t\t\t\tbreak;\n\t\t\tcase \"below\": // Intentional fall-through\n\t\t\tdefault:\n\t\t\t\tslot = fromIndex + 1;\n\t\t\t\tbreak;\n\t\t}\n\t} else {\n\t\t// The tiddler is opened from outside the river. Determine where to insert the tiddler; default is \"top\"\n\t\tif(options.openLinkFromOutsideRiver === \"bottom\") {\n\t\t\t// Insert at bottom\n\t\t\tslot = storyList.length;\n\t\t} else {\n\t\t\t// Insert at top\n\t\t\tslot = 0;\n\t\t}\n\t}\n\t// Add the tiddler\n\tstoryList.splice(slot,0,navigateTo);\n\t// Save the story\n\tthis.saveStoryList(storyList);\n};\n\nStory.prototype.saveStoryList = function(storyList) {\n\tvar storyTiddler = this.wiki.getTiddler(this.storyTitle);\n\tthis.wiki.addTiddler(new $tw.Tiddler(\n\t\tthis.wiki.getCreationFields(),\n\t\t{title: this.storyTitle},\n\t\tstoryTiddler,\n\t\t{list: storyList},\n\t\tthis.wiki.getModificationFields()\n\t));\n};\n\nStory.prototype.addToHistory = function(navigateTo,navigateFromClientRect) {\n\tvar titles = $tw.utils.isArray(navigateTo) ? navigateTo : [navigateTo];\n\t// Add a new record to the top of the history stack\n\tvar historyList = this.wiki.getTiddlerData(this.historyTitle,[]);\n\t$tw.utils.each(titles,function(title) {\n\t\thistoryList.push({title: title, fromPageRect: navigateFromClientRect});\n\t});\n\tthis.wiki.setTiddlerData(this.historyTitle,historyList,{\"current-tiddler\": titles[titles.length-1]});\n};\n\nStory.prototype.storyCloseTiddler = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storyCloseAllTiddlers = function() {\n// TBD\n};\n\nStory.prototype.storyCloseOtherTiddlers = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storyEditTiddler = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storyDeleteTiddler = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storySaveTiddler = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storyCancelTiddler = function(targetTitle) {\n// TBD\n};\n\nStory.prototype.storyNewTiddler = function(targetTitle) {\n// TBD\n};\n\nexports.Story = Story;\n\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/storyviews/classic.js":{"title":"$:/core/modules/storyviews/classic.js","text":"/*\\\ntitle: $:/core/modules/storyviews/classic.js\ntype: application/javascript\nmodule-type: storyview\n\nViews the story as a linear sequence\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar easing = \"cubic-bezier(0.645, 0.045, 0.355, 1)\"; // From http://easings.net/#easeInOutCubic\n\nvar ClassicStoryView = function(listWidget) {\n\tthis.listWidget = listWidget;\n};\n\nClassicStoryView.prototype.navigateTo = function(historyInfo) {\n\tvar duration = $tw.utils.getAnimationDuration()\n\tvar listElementIndex = this.listWidget.findListItem(0,historyInfo.title);\n\tif(listElementIndex === undefined) {\n\t\treturn;\n\t}\n\tvar listItemWidget = this.listWidget.children[listElementIndex],\n\t\ttargetElement = listItemWidget.findFirstDomNode();\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\treturn;\n\t}\n\tif(duration) {\n\t\t// Scroll the node into view\n\t\tthis.listWidget.dispatchEvent({type: \"tm-scroll\", target: targetElement});\n\t} else {\n\t\ttargetElement.scrollIntoView();\n\t}\n};\n\nClassicStoryView.prototype.insert = function(widget) {\n\tvar duration = $tw.utils.getAnimationDuration();\n\tif(duration) {\n\t\tvar targetElement = widget.findFirstDomNode();\n\t\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\t\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\t\treturn;\n\t\t}\n\t\t// Get the current height of the tiddler\n\t\tvar computedStyle = window.getComputedStyle(targetElement),\n\t\t\tcurrMarginBottom = parseInt(computedStyle.marginBottom,10),\n\t\t\tcurrMarginTop = parseInt(computedStyle.marginTop,10),\n\t\t\tcurrHeight = targetElement.offsetHeight + currMarginTop;\n\t\t// Reset the margin once the transition is over\n\t\tsetTimeout(function() {\n\t\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t\t{transition: \"none\"},\n\t\t\t\t{marginBottom: \"\"}\n\t\t\t]);\n\t\t},duration);\n\t\t// Set up the initial position of the element\n\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t{transition: \"none\"},\n\t\t\t{marginBottom: (-currHeight) + \"px\"},\n\t\t\t{opacity: \"0.0\"}\n\t\t]);\n\t\t$tw.utils.forceLayout(targetElement);\n\t\t// Transition to the final position\n\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t{transition: \"opacity \" + duration + \"ms \" + easing + \", \" +\n\t\t\t\t\t\t\"margin-bottom \" + duration + \"ms \" + easing},\n\t\t\t{marginBottom: currMarginBottom + \"px\"},\n\t\t\t{opacity: \"1.0\"}\n\t]);\n\t}\n};\n\nClassicStoryView.prototype.remove = function(widget) {\n\tvar duration = $tw.utils.getAnimationDuration();\n\tif(duration) {\n\t\tvar targetElement = widget.findFirstDomNode(),\n\t\t\tremoveElement = function() {\n\t\t\t\twidget.removeChildDomNodes();\n\t\t\t};\n\t\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\t\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\t\tremoveElement();\n\t\t\treturn;\n\t\t}\n\t\t// Get the current height of the tiddler\n\t\tvar currWidth = targetElement.offsetWidth,\n\t\t\tcomputedStyle = window.getComputedStyle(targetElement),\n\t\t\tcurrMarginBottom = parseInt(computedStyle.marginBottom,10),\n\t\t\tcurrMarginTop = parseInt(computedStyle.marginTop,10),\n\t\t\tcurrHeight = targetElement.offsetHeight + currMarginTop;\n\t\t// Remove the dom nodes of the widget at the end of the transition\n\t\tsetTimeout(removeElement,duration);\n\t\t// Animate the closure\n\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t{transition: \"none\"},\n\t\t\t{transform: \"translateX(0px)\"},\n\t\t\t{marginBottom:  currMarginBottom + \"px\"},\n\t\t\t{opacity: \"1.0\"}\n\t\t]);\n\t\t$tw.utils.forceLayout(targetElement);\n\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms \" + easing + \", \" +\n\t\t\t\t\t\t\"opacity \" + duration + \"ms \" + easing + \", \" +\n\t\t\t\t\t\t\"margin-bottom \" + duration + \"ms \" + easing},\n\t\t\t{transform: \"translateX(-\" + currWidth + \"px)\"},\n\t\t\t{marginBottom: (-currHeight) + \"px\"},\n\t\t\t{opacity: \"0.0\"}\n\t\t]);\n\t} else {\n\t\twidget.removeChildDomNodes();\n\t}\n};\n\nexports.classic = ClassicStoryView;\n\n})();\n","type":"application/javascript","module-type":"storyview"},"$:/core/modules/storyviews/pop.js":{"title":"$:/core/modules/storyviews/pop.js","text":"/*\\\ntitle: $:/core/modules/storyviews/pop.js\ntype: application/javascript\nmodule-type: storyview\n\nAnimates list insertions and removals\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar PopStoryView = function(listWidget) {\n\tthis.listWidget = listWidget;\n};\n\nPopStoryView.prototype.navigateTo = function(historyInfo) {\n\tvar listElementIndex = this.listWidget.findListItem(0,historyInfo.title);\n\tif(listElementIndex === undefined) {\n\t\treturn;\n\t}\n\tvar listItemWidget = this.listWidget.children[listElementIndex],\n\t\ttargetElement = listItemWidget.findFirstDomNode();\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\treturn;\n\t}\n\t// Scroll the node into view\n\tthis.listWidget.dispatchEvent({type: \"tm-scroll\", target: targetElement});\n};\n\nPopStoryView.prototype.insert = function(widget) {\n\tvar targetElement = widget.findFirstDomNode(),\n\t\tduration = $tw.utils.getAnimationDuration();\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\treturn;\n\t}\n\t// Reset once the transition is over\n\tsetTimeout(function() {\n\t\t$tw.utils.setStyle(targetElement,[\n\t\t\t{transition: \"none\"},\n\t\t\t{transform: \"none\"}\n\t\t]);\n\t\t$tw.utils.setStyle(widget.document.body,[\n\t\t\t{\"overflow-x\": \"\"}\n\t\t]);\n\t},duration);\n\t// Prevent the page from overscrolling due to the zoom factor\n\t$tw.utils.setStyle(widget.document.body,[\n\t\t{\"overflow-x\": \"hidden\"}\n\t]);\n\t// Set up the initial position of the element\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transition: \"none\"},\n\t\t{transform: \"scale(2)\"},\n\t\t{opacity: \"0.0\"}\n\t]);\n\t$tw.utils.forceLayout(targetElement);\n\t// Transition to the final position\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"opacity \" + duration + \"ms ease-in-out\"},\n\t\t{transform: \"scale(1)\"},\n\t\t{opacity: \"1.0\"}\n\t]);\n};\n\nPopStoryView.prototype.remove = function(widget) {\n\tvar targetElement = widget.findFirstDomNode(),\n\t\tduration = $tw.utils.getAnimationDuration(),\n\t\tremoveElement = function() {\n\t\t\tif(targetElement &amp;&amp; targetElement.parentNode) {\n\t\t\t\twidget.removeChildDomNodes();\n\t\t\t}\n\t\t};\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\tremoveElement();\n\t\treturn;\n\t}\n\t// Remove the element at the end of the transition\n\tsetTimeout(removeElement,duration);\n\t// Animate the closure\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transition: \"none\"},\n\t\t{transform: \"scale(1)\"},\n\t\t{opacity: \"1.0\"}\n\t]);\n\t$tw.utils.forceLayout(targetElement);\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"opacity \" + duration + \"ms ease-in-out\"},\n\t\t{transform: \"scale(0.1)\"},\n\t\t{opacity: \"0.0\"}\n\t]);\n};\n\nexports.pop = PopStoryView;\n\n})();\n","type":"application/javascript","module-type":"storyview"},"$:/core/modules/storyviews/zoomin.js":{"title":"$:/core/modules/storyviews/zoomin.js","text":"/*\\\ntitle: $:/core/modules/storyviews/zoomin.js\ntype: application/javascript\nmodule-type: storyview\n\nZooms between individual tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar easing = \"cubic-bezier(0.645, 0.045, 0.355, 1)\"; // From http://easings.net/#easeInOutCubic\n\nvar ZoominListView = function(listWidget) {\n\tvar self = this;\n\tthis.listWidget = listWidget;\n\t// Get the index of the tiddler that is at the top of the history\n\tvar history = this.listWidget.wiki.getTiddlerDataCached(this.listWidget.historyTitle,[]),\n\t\ttargetTiddler;\n\tif(history.length &gt; 0) {\n\t\ttargetTiddler = history[history.length-1].title;\n\t}\n\t// Make all the tiddlers position absolute, and hide all but the top (or first) one\n\t$tw.utils.each(this.listWidget.children,function(itemWidget,index) {\n\t\tvar domNode = itemWidget.findFirstDomNode();\n\t\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\t\tif(!(domNode instanceof Element)) {\n\t\t\treturn;\n\t\t}\n\t\tif((targetTiddler &amp;&amp; targetTiddler !== itemWidget.parseTreeNode.itemTitle) || (!targetTiddler &amp;&amp; index)) {\n\t\t\tdomNode.style.display = \"none\";\n\t\t} else {\n\t\t\tself.currentTiddlerDomNode = domNode;\n\t\t}\n\t\t$tw.utils.addClass(domNode,\"tc-storyview-zoomin-tiddler\");\n\t});\n};\n\nZoominListView.prototype.navigateTo = function(historyInfo) {\n\tvar duration = $tw.utils.getAnimationDuration(),\n\t\tlistElementIndex = this.listWidget.findListItem(0,historyInfo.title);\n\tif(listElementIndex === undefined) {\n\t\treturn;\n\t}\n\tvar listItemWidget = this.listWidget.children[listElementIndex],\n\t\ttargetElement = listItemWidget.findFirstDomNode();\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\treturn;\n\t}\n\t// Make the new tiddler be position absolute and visible so that we can measure it\n\t$tw.utils.addClass(targetElement,\"tc-storyview-zoomin-tiddler\");\n\t$tw.utils.setStyle(targetElement,[\n\t\t{display: \"block\"},\n\t\t{transformOrigin: \"0 0\"},\n\t\t{transform: \"translateX(0px) translateY(0px) scale(1)\"},\n\t\t{transition: \"none\"},\n\t\t{opacity: \"0.0\"}\n\t]);\n\t// Get the position of the source node, or use the centre of the window as the source position\n\tvar sourceBounds = historyInfo.fromPageRect || {\n\t\t\tleft: window.innerWidth/2 - 2,\n\t\t\ttop: window.innerHeight/2 - 2,\n\t\t\twidth: window.innerWidth/8,\n\t\t\theight: window.innerHeight/8\n\t\t};\n\t// Try to find the title node in the target tiddler\n\tvar titleDomNode = findTitleDomNode(listItemWidget) || listItemWidget.findFirstDomNode(),\n\t\tzoomBounds = titleDomNode.getBoundingClientRect();\n\t// Compute the transform for the target tiddler to make the title lie over the source rectange\n\tvar targetBounds = targetElement.getBoundingClientRect(),\n\t\tscale = sourceBounds.width / zoomBounds.width,\n\t\tx = sourceBounds.left - targetBounds.left - (zoomBounds.left - targetBounds.left) * scale,\n\t\ty = sourceBounds.top - targetBounds.top - (zoomBounds.top - targetBounds.top) * scale;\n\t// Transform the target tiddler to its starting position\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transform: \"translateX(\" + x + \"px) translateY(\" + y + \"px) scale(\" + scale + \")\"}\n\t]);\n\t// Force layout\n\t$tw.utils.forceLayout(targetElement);\n\t// Apply the ending transitions with a timeout to ensure that the previously applied transformations are applied first\n\tvar self = this,\n\t\tprevCurrentTiddler = this.currentTiddlerDomNode;\n\tthis.currentTiddlerDomNode = targetElement;\n\t// Transform the target tiddler to its natural size\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms \" + easing + \", opacity \" + duration + \"ms \" + easing},\n\t\t{opacity: \"1.0\"},\n\t\t{transform: \"translateX(0px) translateY(0px) scale(1)\"},\n\t\t{zIndex: \"500\"},\n\t]);\n\t// Transform the previous tiddler out of the way and then hide it\n\tif(prevCurrentTiddler &amp;&amp; prevCurrentTiddler !== targetElement) {\n\t\tscale = zoomBounds.width / sourceBounds.width;\n\t\tx =  zoomBounds.left - targetBounds.left - (sourceBounds.left - targetBounds.left) * scale;\n\t\ty =  zoomBounds.top - targetBounds.top - (sourceBounds.top - targetBounds.top) * scale;\n\t\t$tw.utils.setStyle(prevCurrentTiddler,[\n\t\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms \" + easing + \", opacity \" + duration + \"ms \" + easing},\n\t\t\t{opacity: \"0.0\"},\n\t\t\t{transformOrigin: \"0 0\"},\n\t\t\t{transform: \"translateX(\" + x + \"px) translateY(\" + y + \"px) scale(\" + scale + \")\"},\n\t\t\t{zIndex: \"0\"}\n\t\t]);\n\t\t// Hide the tiddler when the transition has finished\n\t\tsetTimeout(function() {\n\t\t\tif(self.currentTiddlerDomNode !== prevCurrentTiddler) {\n\t\t\t\tprevCurrentTiddler.style.display = \"none\";\n\t\t\t}\n\t\t},duration);\n\t}\n\t// Scroll the target into view\n//\t$tw.pageScroller.scrollIntoView(targetElement);\n};\n\n/*\nFind the first child DOM node of a widget that has the class \"tc-title\"\n*/\nfunction findTitleDomNode(widget,targetClass) {\n\ttargetClass = targetClass || \"tc-title\";\n\tvar domNode = widget.findFirstDomNode();\n\tif(domNode &amp;&amp; domNode.querySelector) {\n\t\treturn domNode.querySelector(\".\" + targetClass);\n\t}\n\treturn null;\n}\n\nZoominListView.prototype.insert = function(widget) {\n\tvar targetElement = widget.findFirstDomNode();\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\treturn;\n\t}\n\t// Make the newly inserted node position absolute and hidden\n\t$tw.utils.addClass(targetElement,\"tc-storyview-zoomin-tiddler\");\n\t$tw.utils.setStyle(targetElement,[\n\t\t{display: \"none\"}\n\t]);\n};\n\nZoominListView.prototype.remove = function(widget) {\n\tvar targetElement = widget.findFirstDomNode(),\n\t\tduration = $tw.utils.getAnimationDuration(),\n\t\tremoveElement = function() {\n\t\t\twidget.removeChildDomNodes();\n\t\t};\n\t// Abandon if the list entry isn't a DOM element (it might be a text node)\n\tif(!targetElement || targetElement.nodeType === Node.TEXT_NODE) {\n\t\tremoveElement();\n\t\treturn;\n\t}\n\t// Abandon if hidden\n\tif(targetElement.style.display != \"block\" ) {\n\t\tremoveElement();\n\t\treturn;\n\t}\n\t// Set up the tiddler that is being closed\n\t$tw.utils.addClass(targetElement,\"tc-storyview-zoomin-tiddler\");\n\t$tw.utils.setStyle(targetElement,[\n\t\t{display: \"block\"},\n\t\t{transformOrigin: \"50% 50%\"},\n\t\t{transform: \"translateX(0px) translateY(0px) scale(1)\"},\n\t\t{transition: \"none\"},\n\t\t{zIndex: \"0\"}\n\t]);\n\t// We'll move back to the previous or next element in the story\n\tvar toWidget = widget.previousSibling();\n\tif(!toWidget) {\n\t\ttoWidget = widget.nextSibling();\n\t}\n\tvar toWidgetDomNode = toWidget &amp;&amp; toWidget.findFirstDomNode();\n\t// Set up the tiddler we're moving back in\n\tif(toWidgetDomNode) {\n\t\t$tw.utils.addClass(toWidgetDomNode,\"tc-storyview-zoomin-tiddler\");\n\t\t$tw.utils.setStyle(toWidgetDomNode,[\n\t\t\t{display: \"block\"},\n\t\t\t{transformOrigin: \"50% 50%\"},\n\t\t\t{transform: \"translateX(0px) translateY(0px) scale(10)\"},\n\t\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms \" + easing + \", opacity \" + duration + \"ms \" + easing},\n\t\t\t{opacity: \"0\"},\n\t\t\t{zIndex: \"500\"}\n\t\t]);\n\t\tthis.currentTiddlerDomNode = toWidgetDomNode;\n\t}\n\t// Animate them both\n\t// Force layout\n\t$tw.utils.forceLayout(this.listWidget.parentDomNode);\n\t// First, the tiddler we're closing\n\t$tw.utils.setStyle(targetElement,[\n\t\t{transformOrigin: \"50% 50%\"},\n\t\t{transform: \"translateX(0px) translateY(0px) scale(0.1)\"},\n\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms \" + easing + \", opacity \" + duration + \"ms \" + easing},\n\t\t{opacity: \"0\"},\n\t\t{zIndex: \"0\"}\n\t]);\n\tsetTimeout(removeElement,duration);\n\t// Now the tiddler we're going back to\n\tif(toWidgetDomNode) {\n\t\t$tw.utils.setStyle(toWidgetDomNode,[\n\t\t\t{transform: \"translateX(0px) translateY(0px) scale(1)\"},\n\t\t\t{opacity: \"1\"}\n\t\t]);\n\t}\n\treturn true; // Indicate that we'll delete the DOM node\n};\n\nexports.zoomin = ZoominListView;\n\n})();\n","type":"application/javascript","module-type":"storyview"},"$:/core/modules/syncer.js":{"title":"$:/core/modules/syncer.js","text":"/*\\\ntitle: $:/core/modules/syncer.js\ntype: application/javascript\nmodule-type: global\n\nThe syncer tracks changes to the store and synchronises them to a remote data store represented as a \"sync adaptor\"\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nDefaults\n*/\nSyncer.prototype.titleIsLoggedIn = \"$:/status/IsLoggedIn\";\nSyncer.prototype.titleIsAnonymous = \"$:/status/IsAnonymous\";\nSyncer.prototype.titleIsReadOnly = \"$:/status/IsReadOnly\";\nSyncer.prototype.titleUserName = \"$:/status/UserName\";\nSyncer.prototype.titleSyncFilter = \"$:/config/SyncFilter\";\nSyncer.prototype.titleSyncDisablePolling = \"$:/config/SyncDisablePolling\";\nSyncer.prototype.titleSyncPollingInterval = \"$:/config/SyncPollingInterval\";\nSyncer.prototype.titleSyncDisableLazyLoading = \"$:/config/SyncDisableLazyLoading\";\nSyncer.prototype.titleSavedNotification = \"$:/language/Notifications/Save/Done\";\nSyncer.prototype.titleSyncThrottleInterval = \"$:/config/SyncThrottleInterval\";\nSyncer.prototype.taskTimerInterval = 1 * 1000; // Interval for sync timer\nSyncer.prototype.throttleInterval = 1 * 1000; // Defer saving tiddlers if they've changed in the last 1s...\nSyncer.prototype.errorRetryInterval = 5 * 1000; // Interval to retry after an error\nSyncer.prototype.fallbackInterval = 10 * 1000; // Unless the task is older than 10s\nSyncer.prototype.pollTimerInterval = 60 * 1000; // Interval for polling for changes from the adaptor\n\n/*\nInstantiate the syncer with the following options:\nsyncadaptor: reference to syncadaptor to be used\nwiki: wiki to be synced\n*/\nfunction Syncer(options) {\n\tvar self = this;\n\tthis.wiki = options.wiki;\n\t// Save parameters\n\tthis.syncadaptor = options.syncadaptor;\n\tthis.disableUI = !!options.disableUI;\n\tthis.titleIsLoggedIn = options.titleIsLoggedIn || this.titleIsLoggedIn;\n\tthis.titleUserName = options.titleUserName || this.titleUserName;\n\tthis.titleSyncFilter = options.titleSyncFilter || this.titleSyncFilter;\n\tthis.titleSavedNotification = options.titleSavedNotification || this.titleSavedNotification;\n\tthis.taskTimerInterval = options.taskTimerInterval || this.taskTimerInterval;\n\tthis.throttleInterval = options.throttleInterval || parseInt(this.wiki.getTiddlerText(this.titleSyncThrottleInterval,\"\"),10) || this.throttleInterval;\n\tthis.errorRetryInterval = options.errorRetryInterval || this.errorRetryInterval;\n\tthis.fallbackInterval = options.fallbackInterval || this.fallbackInterval;\n\tthis.pollTimerInterval = options.pollTimerInterval || parseInt(this.wiki.getTiddlerText(this.titleSyncPollingInterval,\"\"),10) || this.pollTimerInterval;\n\tthis.logging = \"logging\" in options ? options.logging : true;\n\t// Make a logger\n\tthis.logger = new $tw.utils.Logger(\"syncer\" + ($tw.browser ? \"-browser\" : \"\") + ($tw.node ? \"-server\" : \"\")  + (this.syncadaptor.name ? (\"-\" + this.syncadaptor.name) : \"\"),{\n\t\tcolour: \"cyan\",\n\t\tenable: this.logging,\n\t\tsaveHistory: true\n\t});\n\t// Make another logger for connection errors\n\tthis.loggerConnection = new $tw.utils.Logger(\"syncer\" + ($tw.browser ? \"-browser\" : \"\") + ($tw.node ? \"-server\" : \"\")  + (this.syncadaptor.name ? (\"-\" + this.syncadaptor.name) : \"\") + \"-connection\",{\n\t\tcolour: \"cyan\",\n\t\tenable: this.logging\n\t});\n\t// Ask the syncadaptor to use the main logger\n\tif(this.syncadaptor.setLoggerSaveBuffer) {\n\t\tthis.syncadaptor.setLoggerSaveBuffer(this.logger);\n\t}\n\t// Compile the dirty tiddler filter\n\tthis.filterFn = this.wiki.compileFilter(this.wiki.getTiddlerText(this.titleSyncFilter));\n\t// Record information for known tiddlers\n\tthis.readTiddlerInfo();\n\tthis.titlesToBeLoaded = {}; // Hashmap of titles of tiddlers that need loading from the server\n\tthis.titlesHaveBeenLazyLoaded = {}; // Hashmap of titles of tiddlers that have already been lazily loaded from the server\n\t// Timers\n\tthis.taskTimerId = null; // Timer for task dispatch\n\tthis.pollTimerId = null; // Timer for polling server\n\t// Number of outstanding requests\n\tthis.numTasksInProgress = 0;\n\t// Listen out for changes to tiddlers\n\tthis.wiki.addEventListener(\"change\",function(changes) {\n\t\t// Filter the changes to just include ones that are being synced\n\t\tvar filteredChanges = self.getSyncedTiddlers(function(callback) {\n\t\t\t$tw.utils.each(changes,function(change,title) {\n\t\t\t\tvar tiddler = self.wiki.tiddlerExists(title) &amp;&amp; self.wiki.getTiddler(title);\n\t\t\t\tcallback(tiddler,title);\n\t\t\t});\n\t\t});\n\t\tif(filteredChanges.length &gt; 0) {\n\t\t\tself.processTaskQueue();\n\t\t} else {\n\t\t\t// Look for deletions of tiddlers we're already syncing\n\t\t\tvar outstandingDeletion = false\n\t\t\t$tw.utils.each(changes,function(change,title,object) {\n\t\t\t\tif(change.deleted &amp;&amp; $tw.utils.hop(self.tiddlerInfo,title)) {\n\t\t\t\t\toutstandingDeletion = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(outstandingDeletion) {\n\t\t\t\tself.processTaskQueue();\n\t\t\t}\n\t\t}\n\t});\n\t// Browser event handlers\n\tif($tw.browser &amp;&amp; !this.disableUI) {\n\t\t// Set up our beforeunload handler\n\t\t$tw.addUnloadTask(function(event) {\n\t\t\tvar confirmationMessage;\n\t\t\tif(self.isDirty()) {\n\t\t\t\tconfirmationMessage = $tw.language.getString(\"UnsavedChangesWarning\");\n\t\t\t\tevent.returnValue = confirmationMessage; // Gecko\n\t\t\t}\n\t\t\treturn confirmationMessage;\n\t\t});\n\t\t// Listen out for login/logout/refresh events in the browser\n\t\t$tw.rootWidget.addEventListener(\"tm-login\",function(event) {\n\t\t\tvar username = event &amp;&amp; event.paramObject &amp;&amp; event.paramObject.username,\n\t\t\t\tpassword = event &amp;&amp; event.paramObject &amp;&amp; event.paramObject.password;\n\t\t\tif(username &amp;&amp; password) {\n\t\t\t\t// Login with username and password\n\t\t\t\tself.login(username,password,function() {});\n\t\t\t} else {\n\t\t\t\t// No username and password, so we display a prompt\n\t\t\t\tself.handleLoginEvent();\n\t\t\t}\n\t\t});\n\t\t$tw.rootWidget.addEventListener(\"tm-logout\",function() {\n\t\t\tself.handleLogoutEvent();\n\t\t});\n\t\t$tw.rootWidget.addEventListener(\"tm-server-refresh\",function() {\n\t\t\tself.handleRefreshEvent();\n\t\t});\n\t\t$tw.rootWidget.addEventListener(\"tm-copy-syncer-logs-to-clipboard\",function() {\n\t\t\t$tw.utils.copyToClipboard($tw.utils.getSystemInfo() + \"\\n\\nLog:\\n\" + self.logger.getBuffer());\n\t\t});\n\t}\n\t// Listen out for lazyLoad events\n\tif(!this.disableUI &amp;&amp; this.wiki.getTiddlerText(this.titleSyncDisableLazyLoading) !== \"yes\") {\n\t\tthis.wiki.addEventListener(\"lazyLoad\",function(title) {\n\t\t\tself.handleLazyLoadEvent(title);\n\t\t});\n\t}\n\t// Get the login status\n\tthis.getStatus(function(err,isLoggedIn) {\n\t\t// Do a sync from the server\n\t\tself.syncFromServer();\n\t});\n}\n\n/*\nShow a generic network error alert\n*/\nSyncer.prototype.displayError = function(msg,err) {\n\tif(err === ($tw.language.getString(\"Error/XMLHttpRequest\") + \": 0\")) {\n\t\tthis.loggerConnection.alert($tw.language.getString(\"Error/NetworkErrorAlert\"));\n\t\tthis.logger.log(msg + \":\",err);\n\t} else {\n\t\tthis.logger.alert(msg + \":\",err);\n\t}\n};\n\n/*\nReturn an array of the tiddler titles that are subjected to syncing\n*/\nSyncer.prototype.getSyncedTiddlers = function(source) {\n\treturn this.filterFn.call(this.wiki,source);\n};\n\n/*\nReturn an array of the tiddler titles that are subjected to syncing\n*/\nSyncer.prototype.getTiddlerRevision = function(title) {\n\tif(this.syncadaptor &amp;&amp; this.syncadaptor.getTiddlerRevision) {\n\t\treturn this.syncadaptor.getTiddlerRevision(title);\n\t} else {\n\t\treturn this.wiki.getTiddler(title).fields.revision;\n\t}\n};\n\n/*\nRead (or re-read) the latest tiddler info from the store\n*/\nSyncer.prototype.readTiddlerInfo = function() {\n\t// Hashmap by title of {revision:,changeCount:,adaptorInfo:}\n\t// \"revision\" is the revision of the tiddler last seen on the server, and \"changecount\" is the corresponding local changecount\n\tthis.tiddlerInfo = {};\n\t// Record information for known tiddlers\n\tvar self = this,\n\t\ttiddlers = this.getSyncedTiddlers();\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar tiddler = self.wiki.getTiddler(title);\n\t\tif(tiddler) {\n\t\t\tself.tiddlerInfo[title] = {\n\t\t\t\trevision: self.getTiddlerRevision(title),\n\t\t\t\tadaptorInfo: self.syncadaptor &amp;&amp; self.syncadaptor.getTiddlerInfo(tiddler),\n\t\t\t\tchangeCount: self.wiki.getChangeCount(title)\n\t\t\t};\n\t\t}\n\t});\n};\n\n/*\nChecks whether the wiki is dirty (ie the window shouldn't be closed)\n*/\nSyncer.prototype.isDirty = function() {\n\tthis.logger.log(\"Checking dirty status\");\n\t// Check tiddlers that are in the store and included in the filter function\n\tvar titles = this.getSyncedTiddlers();\n\tfor(var index=0; index&lt;titles.length; index++) {\n\t\tvar title = titles[index],\n\t\t\ttiddlerInfo = this.tiddlerInfo[title];\n\t\tif(this.wiki.tiddlerExists(title)) {\n\t\t\tif(tiddlerInfo) {\n\t\t\t\t// If the tiddler is known on the server and has been modified locally then it needs to be saved to the server\n\t\t\t\tif(this.wiki.getChangeCount(title) &gt; tiddlerInfo.changeCount) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If the tiddler isn't known on the server then it needs to be saved to the server\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\t// Check tiddlers that are known from the server but not currently in the store\n\ttitles = Object.keys(this.tiddlerInfo);\n\tfor(index=0; index&lt;titles.length; index++) {\n\t\tif(!this.wiki.tiddlerExists(titles[index])) {\n\t\t\t// There must be a pending delete\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n/*\nUpdate the document body with the class \"tc-dirty\" if the wiki has unsaved/unsynced changes\n*/\nSyncer.prototype.updateDirtyStatus = function() {\n\tif($tw.browser &amp;&amp; !this.disableUI) {\n\t\tvar dirty = this.isDirty();\n\t\t$tw.utils.toggleClass(document.body,\"tc-dirty\",dirty);\n\t\tif(!dirty) {\n\t\t\tthis.loggerConnection.clearAlerts();\n\t\t}\n\t}\n};\n\n/*\nSave an incoming tiddler in the store, and updates the associated tiddlerInfo\n*/\nSyncer.prototype.storeTiddler = function(tiddlerFields) {\n\t// Save the tiddler\n\tvar tiddler = new $tw.Tiddler(tiddlerFields);\n\tthis.wiki.addTiddler(tiddler);\n\t// Save the tiddler revision and changeCount details\n\tthis.tiddlerInfo[tiddlerFields.title] = {\n\t\trevision: this.getTiddlerRevision(tiddlerFields.title),\n\t\tadaptorInfo: this.syncadaptor.getTiddlerInfo(tiddler),\n\t\tchangeCount: this.wiki.getChangeCount(tiddlerFields.title)\n\t};\n};\n\nSyncer.prototype.getStatus = function(callback) {\n\tvar self = this;\n\t// Check if the adaptor supports getStatus()\n\tif(this.syncadaptor &amp;&amp; this.syncadaptor.getStatus) {\n\t\t// Mark us as not logged in\n\t\tthis.wiki.addTiddler({title: this.titleIsLoggedIn,text: \"no\"});\n\t\t// Get login status\n\t\tthis.syncadaptor.getStatus(function(err,isLoggedIn,username,isReadOnly,isAnonymous,isPollingDisabled) {\n\t\t\tif(err) {\n\t\t\t\tself.logger.alert(err);\n\t\t\t} else {\n\t\t\t\t// Set the various status tiddlers\n\t\t\t\tself.wiki.addTiddler({title: self.titleIsReadOnly,text: isReadOnly ? \"yes\" : \"no\"});\n\t\t\t\tself.wiki.addTiddler({title: self.titleIsAnonymous,text: isAnonymous ? \"yes\" : \"no\"});\n\t\t\t\tself.wiki.addTiddler({title: self.titleIsLoggedIn,text: isLoggedIn ? \"yes\" : \"no\"});\n\t\t\t\tif(isLoggedIn) {\n\t\t\t\t\tself.wiki.addTiddler({title: self.titleUserName,text: username || \"\"});\n\t\t\t\t}\n\t\t\t\tif(isPollingDisabled) {\n\t\t\t\t\tself.wiki.addTiddler({title: self.titleSyncDisablePolling, text: \"yes\"});\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Invoke the callback\n\t\t\tif(callback) {\n\t\t\t\tcallback(err,isLoggedIn,username);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tcallback(null,true,\"UNAUTHENTICATED\");\n\t}\n};\n\n/*\nSynchronise from the server by reading the skinny tiddler list and queuing up loads for any tiddlers that we don't already have up to date\n*/\nSyncer.prototype.syncFromServer = function() {\n\tvar self = this,\n\t\tcancelNextSync = function() {\n\t\t\tif(self.pollTimerId) {\n\t\t\t\tclearTimeout(self.pollTimerId);\n\t\t\t\tself.pollTimerId = null;\n\t\t\t}\n\t\t},\n\t\ttriggerNextSync = function() {\n\t\t\tif(pollingEnabled) {\n\t\t\t\tself.pollTimerId = setTimeout(function() {\n\t\t\t\t\tself.pollTimerId = null;\n\t\t\t\t\tself.syncFromServer.call(self);\n\t\t\t\t},self.pollTimerInterval);\n\t\t\t}\n\t\t},\n\t\tsyncSystemFromServer = (self.wiki.getTiddlerText(\"$:/config/SyncSystemTiddlersFromServer\") === \"yes\"),\n\t\tpollingEnabled = (self.wiki.getTiddlerText(self.titleSyncDisablePolling) !== \"yes\");\n\tif(this.syncadaptor &amp;&amp; this.syncadaptor.getUpdatedTiddlers) {\n\t\tthis.logger.log(\"Retrieving updated tiddler list\");\n\t\tcancelNextSync();\n\t\tthis.syncadaptor.getUpdatedTiddlers(self,function(err,updates) {\n\t\t\ttriggerNextSync();\n\t\t\tif(err) {\n\t\t\t\tself.displayError($tw.language.getString(\"Error/RetrievingSkinny\"),err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(updates) {\n\t\t\t\t$tw.utils.each(updates.modifications,function(title) {\n\t\t\t\t\tself.titlesToBeLoaded[title] = true;\n\t\t\t\t});\n\t\t\t\t$tw.utils.each(updates.deletions,function(title) {\n\t\t\t\t\tif(syncSystemFromServer || !self.wiki.isSystemTiddler(title)) {\n\t\t\t\t\t\tdelete self.tiddlerInfo[title];\n\t\t\t\t\t\tself.logger.log(\"Deleting tiddler missing from server:\",title);\n\t\t\t\t\t\tself.wiki.deleteTiddler(title);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(updates.modifications.length &gt; 0 || updates.deletions.length &gt; 0) {\n\t\t\t\t\tself.processTaskQueue();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else if(this.syncadaptor &amp;&amp; this.syncadaptor.getSkinnyTiddlers) {\n\t\tthis.logger.log(\"Retrieving skinny tiddler list\");\n\t\tcancelNextSync();\n\t\tthis.syncadaptor.getSkinnyTiddlers(function(err,tiddlers) {\n\t\t\ttriggerNextSync();\n\t\t\t// Check for errors\n\t\t\tif(err) {\n\t\t\t\tself.displayError($tw.language.getString(\"Error/RetrievingSkinny\"),err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Keep track of which tiddlers we already know about have been reported this time\n\t\t\tvar previousTitles = Object.keys(self.tiddlerInfo);\n\t\t\t// Process each incoming tiddler\n\t\t\tfor(var t=0; t&lt;tiddlers.length; t++) {\n\t\t\t\t// Get the incoming tiddler fields, and the existing tiddler\n\t\t\t\tvar tiddlerFields = tiddlers[t],\n\t\t\t\t\tincomingRevision = tiddlerFields.revision + \"\",\n\t\t\t\t\ttiddler = self.wiki.tiddlerExists(tiddlerFields.title) &amp;&amp; self.wiki.getTiddler(tiddlerFields.title),\n\t\t\t\t\ttiddlerInfo = self.tiddlerInfo[tiddlerFields.title],\n\t\t\t\t\tcurrRevision = tiddlerInfo ? tiddlerInfo.revision : null,\n\t\t\t\t\tindexInPreviousTitles = previousTitles.indexOf(tiddlerFields.title);\n\t\t\t\tif(indexInPreviousTitles !== -1) {\n\t\t\t\t\tpreviousTitles.splice(indexInPreviousTitles,1);\n\t\t\t\t}\n\t\t\t\t// Ignore the incoming tiddler if it's the same as the revision we've already got\n\t\t\t\tif(currRevision !== incomingRevision) {\n\t\t\t\t\t// Only load the skinny version if we don't already have a fat version of the tiddler\n\t\t\t\t\tif(!tiddler || tiddler.fields.text === undefined) {\n\t\t\t\t\t\tself.storeTiddler(tiddlerFields);\n\t\t\t\t\t}\n\t\t\t\t\t// Do a full load of this tiddler\n\t\t\t\t\tself.titlesToBeLoaded[tiddlerFields.title] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Delete any tiddlers that were previously reported but missing this time\n\t\t\t$tw.utils.each(previousTitles,function(title) {\n\t\t\t\tif(syncSystemFromServer || !self.wiki.isSystemTiddler(title)) {\n\t\t\t\t\tdelete self.tiddlerInfo[title];\n\t\t\t\t\tself.logger.log(\"Deleting tiddler missing from server:\",title);\n\t\t\t\t\tself.wiki.deleteTiddler(title);\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.processTaskQueue();\n\t\t});\n\t}\n};\n\n/*\nForce load a tiddler from the server\n*/\nSyncer.prototype.enqueueLoadTiddler = function(title) {\n\tthis.titlesToBeLoaded[title] = true;\n\tthis.processTaskQueue();\n};\n\n/*\nLazily load a skinny tiddler if we can\n*/\nSyncer.prototype.handleLazyLoadEvent = function(title) {\n\t// Ignore if the syncadaptor doesn't handle it\n\tif(!this.syncadaptor.supportsLazyLoading) {\n\t\treturn;\n\t}\n\t// Don't lazy load the same tiddler twice\n\tif(!this.titlesHaveBeenLazyLoaded[title]) {\n\t\t// Don't lazy load if the tiddler isn't included in the sync filter\n\t\tif(this.getSyncedTiddlers().indexOf(title) !== -1) {\n\t\t\t// Mark the tiddler as needing loading, and having already been lazily loaded\n\t\t\tthis.titlesToBeLoaded[title] = true;\n\t\t\tthis.titlesHaveBeenLazyLoaded[title] = true;\n\t\t}\n\t}\n};\n\n/*\nDispay a password prompt and allow the user to login\n*/\nSyncer.prototype.handleLoginEvent = function() {\n\tvar self = this;\n\tthis.getStatus(function(err,isLoggedIn,username) {\n\t\tif(!err &amp;&amp; !isLoggedIn) {\n\t\t\tif(self.syncadaptor &amp;&amp; self.syncadaptor.displayLoginPrompt) {\n\t\t\t\tself.syncadaptor.displayLoginPrompt(self);\n\t\t\t} else {\n\t\t\t\tself.displayLoginPrompt();\n\t\t\t}\n\t\t}\n\t});\n};\n\n/*\nDispay a password prompt\n*/\nSyncer.prototype.displayLoginPrompt = function() {\n\tvar self = this;\n\tvar promptInfo = $tw.passwordPrompt.createPrompt({\n\t\tserviceName: $tw.language.getString(\"LoginToTiddlySpace\"),\n\t\tcallback: function(data) {\n\t\t\tself.login(data.username,data.password,function(err,isLoggedIn) {\n\t\t\t\tself.syncFromServer();\n\t\t\t});\n\t\t\treturn true; // Get rid of the password prompt\n\t\t}\n\t});\n};\n\n/*\nAttempt to login to TiddlyWeb.\n\tusername: username\n\tpassword: password\n\tcallback: invoked with arguments (err,isLoggedIn)\n*/\nSyncer.prototype.login = function(username,password,callback) {\n\tthis.logger.log(\"Attempting to login as\",username);\n\tvar self = this;\n\tif(this.syncadaptor.login) {\n\t\tthis.syncadaptor.login(username,password,function(err) {\n\t\t\tif(err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tself.getStatus(function(err,isLoggedIn,username) {\n\t\t\t\tif(callback) {\n\t\t\t\t\tcallback(err,isLoggedIn);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tcallback(null,true);\n\t}\n};\n\n/*\nAttempt to log out of TiddlyWeb\n*/\nSyncer.prototype.handleLogoutEvent = function() {\n\tthis.logger.log(\"Attempting to logout\");\n\tvar self = this;\n\tif(this.syncadaptor.logout) {\n\t\tthis.syncadaptor.logout(function(err) {\n\t\t\tif(err) {\n\t\t\t\tself.logger.alert(err);\n\t\t\t} else {\n\t\t\t\tself.getStatus();\n\t\t\t}\n\t\t});\n\t}\n};\n\n/*\nImmediately refresh from the server\n*/\nSyncer.prototype.handleRefreshEvent = function() {\n\tthis.syncFromServer();\n};\n\n/*\nProcess the next task\n*/\nSyncer.prototype.processTaskQueue = function() {\n\tvar self = this;\n\t// Only process a task if the sync adaptor is fully initialised and we're not already performing\n\t// a task. If we are already performing a task then we'll dispatch the next one when it completes\n\tif((!this.syncadaptor.isReady || this.syncadaptor.isReady()) &amp;&amp; this.numTasksInProgress === 0) {\n\t\t// Choose the next task to perform\n\t\tvar task = this.chooseNextTask();\n\t\t// Perform the task if we had one\n\t\tif(typeof task === \"object\" &amp;&amp; task !== null) {\n\t\t\tthis.numTasksInProgress += 1;\n\t\t\ttask.run(function(err) {\n\t\t\t\tself.numTasksInProgress -= 1;\n\t\t\t\tif(err) {\n\t\t\t\t\tself.displayError(\"Sync error while processing \" + task.type + \" of '\" + task.title + \"'\",err);\n\t\t\t\t\tself.updateDirtyStatus();\n\t\t\t\t\tself.triggerTimeout(self.errorRetryInterval);\n\t\t\t\t} else {\n\t\t\t\t\tself.updateDirtyStatus();\n\t\t\t\t\t// Process the next task\n\t\t\t\t\tself.processTaskQueue.call(self);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// No task is ready so update the status\n\t\t\tthis.updateDirtyStatus();\n\t\t\t// And trigger a timeout if there is a pending task\n\t\t\tif(task === true) {\n\t\t\t\tthis.triggerTimeout();\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.updateDirtyStatus();\n\t}\n};\n\nSyncer.prototype.triggerTimeout = function(interval) {\n\tvar self = this;\n\tif(!this.taskTimerId) {\n\t\tthis.taskTimerId = setTimeout(function() {\n\t\t\tself.taskTimerId = null;\n\t\t\tself.processTaskQueue.call(self);\n\t\t},interval || self.taskTimerInterval);\n\t}\n};\n\n/*\nChoose the next sync task. We prioritise saves, then deletes, then loads from the server\n\nReturns either a task object, null if there's no upcoming tasks, or the boolean true if there are pending tasks that aren't yet due\n*/\nSyncer.prototype.chooseNextTask = function() {\n\tvar thresholdLastSaved = (new Date()) - this.throttleInterval,\n\t\thavePending = null;\n\t// First we look for tiddlers that have been modified locally and need saving back to the server\n\tvar titles = this.getSyncedTiddlers();\n\tfor(var index=0; index&lt;titles.length; index++) {\n\t\tvar title = titles[index],\n\t\t\ttiddler = this.wiki.tiddlerExists(title) &amp;&amp; this.wiki.getTiddler(title),\n\t\t\ttiddlerInfo = this.tiddlerInfo[title];\n\t\tif(tiddler) {\n\t\t\t// If the tiddler is not known on the server, or has been modified locally no more recently than the threshold then it needs to be saved to the server\n\t\t\tvar hasChanged = !tiddlerInfo || this.wiki.getChangeCount(title) &gt; tiddlerInfo.changeCount,\n\t\t\t\tisReadyToSave = !tiddlerInfo || !tiddlerInfo.timestampLastSaved || tiddlerInfo.timestampLastSaved &lt; thresholdLastSaved;\n\t\t\tif(hasChanged) {\n\t\t\t\tif(isReadyToSave) {\n\t\t\t\t\treturn new SaveTiddlerTask(this,title);\n\t\t\t\t} else {\n\t\t\t\t\thavePending = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Second, we check tiddlers that are known from the server but not currently in the store, and so need deleting on the server\n\ttitles = Object.keys(this.tiddlerInfo);\n\tfor(index=0; index&lt;titles.length; index++) {\n\t\ttitle = titles[index];\n\t\ttiddlerInfo = this.tiddlerInfo[title];\n\t\ttiddler = this.wiki.tiddlerExists(title) &amp;&amp; this.wiki.getTiddler(title);\n\t\tif(!tiddler) {\n\t\t\treturn new DeleteTiddlerTask(this,title);\n\t\t}\n\t}\n\t// Check for tiddlers that need loading\n\ttitle = Object.keys(this.titlesToBeLoaded)[0];\n\tif(title) {\n\t\tdelete this.titlesToBeLoaded[title];\n\t\treturn new LoadTiddlerTask(this,title);\n\t}\n\t// No tasks are ready\n\treturn havePending;\n};\n\nfunction SaveTiddlerTask(syncer,title) {\n\tthis.syncer = syncer;\n\tthis.title = title;\n\tthis.type = \"save\";\n}\n\nSaveTiddlerTask.prototype.run = function(callback) {\n\tvar self = this,\n\t\tchangeCount = this.syncer.wiki.getChangeCount(this.title),\n\t\ttiddler = this.syncer.wiki.tiddlerExists(this.title) &amp;&amp; this.syncer.wiki.getTiddler(this.title);\n\tthis.syncer.logger.log(\"Dispatching 'save' task:\",this.title);\n\tif(tiddler) {\n\t\tthis.syncer.syncadaptor.saveTiddler(tiddler,{\n\t\t\tchangeCount: changeCount,\n\t\t\ttiddlerInfo: self.syncer.tiddlerInfo[self.title]\n\t\t},function(err,adaptorInfo,revision) {\n\t\t\t// If there's an error, exit without changing any internal state\n\t\t\tif(err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\t// Adjust the info stored about this tiddler\n\t\t\tself.syncer.tiddlerInfo[self.title] = {\n\t\t\t\tchangeCount: changeCount,\n\t\t\t\tadaptorInfo: adaptorInfo,\n\t\t\t\trevision: revision,\n\t\t\t\ttimestampLastSaved: new Date()\n\t\t\t};\n\t\t\t// Invoke the callback\n\t\t\tcallback(null);\n\t\t});\n\t} else {\n\t\tthis.syncer.logger.log(\" Not Dispatching 'save' task:\",this.title,\"tiddler does not exist\");\n\t\t$tw.utils.nextTick(callback(null));\n\t}\n};\n\nfunction DeleteTiddlerTask(syncer,title) {\n\tthis.syncer = syncer;\n\tthis.title = title;\n\tthis.type = \"delete\";\n}\n\nDeleteTiddlerTask.prototype.run = function(callback) {\n\tvar self = this;\n\tthis.syncer.logger.log(\"Dispatching 'delete' task:\",this.title);\n\tthis.syncer.syncadaptor.deleteTiddler(this.title,{\n\t\ttiddlerInfo: self.syncer.tiddlerInfo[this.title]\n\t},function(err,adaptorInfo) {\n\t\t// If there's an error, exit without changing any internal state\n\t\tif(err) {\n\t\t\treturn callback(err);\n\t\t}\n\t\t// Remove the info stored about this tiddler\n\t\tdelete self.syncer.tiddlerInfo[self.title];\n\t\t// Invoke the callback\n\t\tcallback(null);\n\t});\n};\n\nfunction LoadTiddlerTask(syncer,title) {\n\tthis.syncer = syncer;\n\tthis.title = title;\n\tthis.type = \"load\";\n}\n\nLoadTiddlerTask.prototype.run = function(callback) {\n\tvar self = this;\n\tthis.syncer.logger.log(\"Dispatching 'load' task:\",this.title);\n\tthis.syncer.syncadaptor.loadTiddler(this.title,function(err,tiddlerFields) {\n\t\t// If there's an error, exit without changing any internal state\n\t\tif(err) {\n\t\t\treturn callback(err);\n\t\t}\n\t\t// Update the info stored about this tiddler\n\t\tif(tiddlerFields) {\n\t\t\tself.syncer.storeTiddler(tiddlerFields);\n\t\t}\n\t\t// Invoke the callback\n\t\tcallback(null);\n\t});\n};\n\nexports.Syncer = Syncer;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/tiddler.js":{"title":"$:/core/modules/tiddler.js","text":"/*\\\ntitle: $:/core/modules/tiddler.js\ntype: application/javascript\nmodule-type: tiddlermethod\n\nExtension methods for the $tw.Tiddler object (constructor and methods required at boot time are in boot/boot.js)\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.hasTag = function(tag) {\n\treturn this.fields.tags &amp;&amp; this.fields.tags.indexOf(tag) !== -1;\n};\n\nexports.isPlugin = function() {\n\treturn this.fields.type === \"application/json\" &amp;&amp; this.hasField(\"plugin-type\");\n};\n\nexports.isDraft = function() {\n\treturn this.hasField(\"draft.of\");\n};\n\nexports.getFieldString = function(field) {\n\tvar value = this.fields[field];\n\t// Check for a missing field\n\tif(value === undefined || value === null) {\n\t\treturn \"\";\n\t}\n\t// Parse the field with the associated module (if any)\n\tvar fieldModule = $tw.Tiddler.fieldModules[field];\n\tif(fieldModule &amp;&amp; fieldModule.stringify) {\n\t\treturn fieldModule.stringify.call(this,value);\n\t} else {\n\t\treturn value.toString();\n\t}\n};\n\n/*\nGet the value of a field as a list\n*/\nexports.getFieldList = function(field) {\n\tvar value = this.fields[field];\n\t// Check for a missing field\n\tif(value === undefined || value === null) {\n\t\treturn [];\n\t}\n\treturn $tw.utils.parseStringArray(value);\n};\n\n/*\nGet all the fields as a hashmap of strings. Options:\n\texclude: an array of field names to exclude\n*/\nexports.getFieldStrings = function(options) {\n\toptions = options || {};\n\tvar exclude = options.exclude || [];\n\tvar fields = {};\n\tfor(var field in this.fields) {\n\t\tif($tw.utils.hop(this.fields,field)) {\n\t\t\tif(exclude.indexOf(field) === -1) {\n\t\t\t\tfields[field] = this.getFieldString(field);\n\t\t\t}\n\t\t}\n\t}\n\treturn fields;\n};\n\n/*\nGet all the fields as a name:value block. Options:\n\texclude: an array of field names to exclude\n*/\nexports.getFieldStringBlock = function(options) {\n\toptions = options || {};\n\tvar exclude = options.exclude || [],\n\t\tfields = Object.keys(this.fields).sort(),\n\t\tresult = [];\n\tfor(var t=0; t&lt;fields.length; t++) {\n\t\tvar field = fields[t];\n\t\tif(exclude.indexOf(field) === -1) {\n\t\t\tresult.push(field + \": \" + this.getFieldString(field));\n\t\t}\n\t}\n\treturn result.join(\"\\n\");\n};\n\nexports.getFieldDay = function(field) {\n\tif(this.cache &amp;&amp; this.cache.day &amp;&amp; $tw.utils.hop(this.cache.day,field) ) {\n\t\treturn this.cache.day[field];\n\t}\n\tvar day = \"\";\n\tif(this.fields[field]) {\n\t\tday = (new Date($tw.utils.parseDate(this.fields[field]))).setHours(0,0,0,0);\n\t}\n\tthis.cache.day = this.cache.day || {};\n\tthis.cache.day[field] = day;\n\treturn day;\n};\n\n})();\n","type":"application/javascript","module-type":"tiddlermethod"},"$:/core/modules/upgraders/plugins.js":{"title":"$:/core/modules/upgraders/plugins.js","text":"/*\\\ntitle: $:/core/modules/upgraders/plugins.js\ntype: application/javascript\nmodule-type: upgrader\n\nUpgrader module that checks that plugins are newer than any already installed version\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar UPGRADE_LIBRARY_TITLE = \"$:/UpgradeLibrary\";\n\nvar BLOCKED_PLUGINS = {\n\t\"$:/themes/tiddlywiki/stickytitles\": {\n\t\tversions: [\"*\"]\n\t},\n\t\"$:/plugins/tiddlywiki/fullscreen\": {\n\t\tversions: [\"*\"]\n\t}\n};\n\nexports.upgrade = function(wiki,titles,tiddlers) {\n\tvar self = this,\n\t\tmessages = {},\n\t\tupgradeLibrary,\n\t\tgetLibraryTiddler = function(title) {\n\t\t\tif(!upgradeLibrary) {\n\t\t\t\tupgradeLibrary = wiki.getTiddlerData(UPGRADE_LIBRARY_TITLE,{});\n\t\t\t\tupgradeLibrary.tiddlers = upgradeLibrary.tiddlers || {};\n\t\t\t}\n\t\t\treturn upgradeLibrary.tiddlers[title];\n\t\t};\n\n\t// Go through all the incoming tiddlers\n\t$tw.utils.each(titles,function(title) {\n\t\tvar incomingTiddler = tiddlers[title];\n\t\t// Check if we're dealing with a plugin\n\t\tif(incomingTiddler &amp;&amp; incomingTiddler[\"plugin-type\"]) {\n\t\t\t// Check whether the plugin contains JS modules\n\t\t\tvar requiresReload = wiki.doesPluginInfoRequireReload(JSON.parse(incomingTiddler.text)) ? (wiki.getTiddlerText(\"$:/language/ControlPanel/Plugins/PluginWillRequireReload\") + \" \") : \"\";\n\t\t\tmessages[title] = requiresReload;\n\t\t\tif(incomingTiddler.version) {\n\t\t\t\t// Upgrade the incoming plugin if it is in the upgrade library\n\t\t\t\tvar libraryTiddler = getLibraryTiddler(title);\n\t\t\t\tif(libraryTiddler &amp;&amp; libraryTiddler[\"plugin-type\"] &amp;&amp; libraryTiddler.version) {\n\t\t\t\t\ttiddlers[title] = libraryTiddler;\n\t\t\t\t\tmessages[title] = requiresReload + $tw.language.getString(\"Import/Upgrader/Plugins/Upgraded\",{variables: {incoming: incomingTiddler.version, upgraded: libraryTiddler.version}});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Suppress the incoming plugin if it is older than the currently installed one\n\t\t\t\tvar existingTiddler = wiki.getTiddler(title);\n\t\t\t\tif(existingTiddler &amp;&amp; existingTiddler.hasField(\"plugin-type\") &amp;&amp; existingTiddler.hasField(\"version\")) {\n\t\t\t\t\t// Reject the incoming plugin by blanking all its fields\n\t\t\t\t\tif($tw.utils.checkVersions(existingTiddler.fields.version,incomingTiddler.version)) {\n\t\t\t\t\t\ttiddlers[title] = Object.create(null);\n\t\t\t\t\t\tmessages[title] = $tw.language.getString(\"Import/Upgrader/Plugins/Suppressed/Version\",{variables: {incoming: incomingTiddler.version, existing: existingTiddler.fields.version}});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Check whether the plugin is on the blocked list\n\t\t\tvar blockInfo = BLOCKED_PLUGINS[title];\n\t\t\tif(blockInfo) {\n\t\t\t\tif(blockInfo.versions.indexOf(\"*\") !== -1 || (incomingTiddler.version &amp;&amp; blockInfo.versions.indexOf(incomingTiddler.version) !== -1)) {\n\t\t\t\t\ttiddlers[title] = Object.create(null);\n\t\t\t\t\tmessages[title] = $tw.language.getString(\"Import/Upgrader/Plugins/Suppressed/Incompatible\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn messages;\n};\n\n})();\n","type":"application/javascript","module-type":"upgrader"},"$:/core/modules/upgraders/system.js":{"title":"$:/core/modules/upgraders/system.js","text":"/*\\\ntitle: $:/core/modules/upgraders/system.js\ntype: application/javascript\nmodule-type: upgrader\n\nUpgrader module that suppresses certain system tiddlers that shouldn't be imported\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar DONT_IMPORT_LIST = [\"$:/Import\"],\n\tUNSELECT_PREFIX_LIST = [\"$:/temp/\",\"$:/state/\",\"$:/StoryList\",\"$:/HistoryList\"],\n\tWARN_IMPORT_PREFIX_LIST = [\"$:/core/modules/\"];\n\nexports.upgrade = function(wiki,titles,tiddlers) {\n\tvar self = this,\n\t\tmessages = {},\n\t\tshowAlert = false;\n\t// Check for tiddlers on our list\n\t$tw.utils.each(titles,function(title) {\n\t\tif(DONT_IMPORT_LIST.indexOf(title) !== -1) {\n\t\t\ttiddlers[title] = Object.create(null);\n\t\t\tmessages[title] = $tw.language.getString(\"Import/Upgrader/System/Suppressed\");\n\t\t} else {\n\t\t\tfor(var t=0; t&lt;UNSELECT_PREFIX_LIST.length; t++) {\n\t\t\t\tvar prefix = UNSELECT_PREFIX_LIST[t];\n\t\t\t\tif(title.substr(0,prefix.length) === prefix) {\n\t\t\t\t\tmessages[title] = $tw.language.getString(\"Import/Upgrader/Tiddler/Unselected\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var t=0; t&lt;WARN_IMPORT_PREFIX_LIST.length; t++) {\n\t\t\t\tvar prefix = WARN_IMPORT_PREFIX_LIST[t];\n\t\t\t\tif(title.substr(0,prefix.length) === prefix &amp;&amp; wiki.isShadowTiddler(title)) {\n\t\t\t\t\tshowAlert = true;\n\t\t\t\t\tmessages[title] = $tw.language.getString(\"Import/Upgrader/System/Warning\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif(showAlert) {\n\t\tvar logger = new $tw.utils.Logger(\"import\");\n\t\tlogger.alert($tw.language.getString(\"Import/Upgrader/System/Alert\"));\n\t}\n\treturn messages;\n};\n\n})();\n","type":"application/javascript","module-type":"upgrader"},"$:/core/modules/upgraders/themetweaks.js":{"title":"$:/core/modules/upgraders/themetweaks.js","text":"/*\\\ntitle: $:/core/modules/upgraders/themetweaks.js\ntype: application/javascript\nmodule-type: upgrader\n\nUpgrader module that handles the change in theme tweak storage introduced in 5.0.14-beta.\n\nPreviously, theme tweaks were stored in two data tiddlers:\n\n* $:/themes/tiddlywiki/vanilla/metrics\n* $:/themes/tiddlywiki/vanilla/settings\n\nNow, each tweak is stored in its own separate tiddler.\n\nThis upgrader copies any values from the old format to the new. The old data tiddlers are not deleted in case they have been used to store additional indexes.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar MAPPINGS = {\n\t\"$:/themes/tiddlywiki/vanilla/metrics\": {\n\t\t\"fontsize\": \"$:/themes/tiddlywiki/vanilla/metrics/fontsize\",\n\t\t\"lineheight\": \"$:/themes/tiddlywiki/vanilla/metrics/lineheight\",\n\t\t\"storyleft\": \"$:/themes/tiddlywiki/vanilla/metrics/storyleft\",\n\t\t\"storytop\": \"$:/themes/tiddlywiki/vanilla/metrics/storytop\",\n\t\t\"storyright\": \"$:/themes/tiddlywiki/vanilla/metrics/storyright\",\n\t\t\"storywidth\": \"$:/themes/tiddlywiki/vanilla/metrics/storywidth\",\n\t\t\"tiddlerwidth\": \"$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth\"\n\t},\n\t\"$:/themes/tiddlywiki/vanilla/settings\": {\n\t\t\"fontfamily\": \"$:/themes/tiddlywiki/vanilla/settings/fontfamily\"\n\t}\n};\n\nexports.upgrade = function(wiki,titles,tiddlers) {\n\tvar self = this,\n\t\tmessages = {};\n\t// Check for tiddlers on our list\n\t$tw.utils.each(titles,function(title) {\n\t\tvar mapping = MAPPINGS[title];\n\t\tif(mapping) {\n\t\t\tvar tiddler = new $tw.Tiddler(tiddlers[title]),\n\t\t\t\ttiddlerData = wiki.getTiddlerDataCached(tiddler,{});\n\t\t\tfor(var index in mapping) {\n\t\t\t\tvar mappedTitle = mapping[index];\n\t\t\t\tif(!tiddlers[mappedTitle] || tiddlers[mappedTitle].title !== mappedTitle) {\n\t\t\t\t\ttiddlers[mappedTitle] = {\n\t\t\t\t\t\ttitle: mappedTitle,\n\t\t\t\t\t\ttext: tiddlerData[index]\n\t\t\t\t\t};\n\t\t\t\t\tmessages[mappedTitle] = $tw.language.getString(\"Import/Upgrader/ThemeTweaks/Created\",{variables: {\n\t\t\t\t\t\tfrom: title + \"##\" + index\n\t\t\t\t\t}});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn messages;\n};\n\n})();\n","type":"application/javascript","module-type":"upgrader"},"$:/core/modules/utils/base64-utf8/base64-utf8.module.js":{"text":"(function(){// From https://gist.github.com/Nijikokun/5192472\n//\n// UTF8 Module\n//\n// Cleaner and modularized utf-8 encoding and decoding library for javascript.\n//\n// copyright: MIT\n// author: Nijiko Yonskai, @nijikokun, nijikokun@gmail.com\n!function(r,e,o,t){void 0!==o.module&amp;&amp;o.module.exports?o.module.exports=e.apply(o):void 0!==o.define&amp;&amp;\"function\"===o.define&amp;&amp;o.define.amd?define(\"utf8\",[],e):o.utf8=e.apply(o)}(0,function(){return{encode:function(r){if(\"string\"!=typeof r)return r;r=r.replace(/\\r\\n/g,\"\\n\");for(var e,o=\"\",t=0;t&lt;r.length;t++)if((e=r.charCodeAt(t))&lt;128)o+=String.fromCharCode(e);else if(e&gt;127&amp;&amp;e&lt;2048)o+=String.fromCharCode(e&gt;&gt;6|192),o+=String.fromCharCode(63&amp;e|128);else if(e&gt;55295&amp;&amp;e&lt;57344&amp;&amp;r.length&gt;t+1){var i=e,n=r.charCodeAt(t+1);t++;var d=65536+(i-55296&lt;&lt;10|n-56320);o+=String.fromCharCode(d&gt;&gt;18|240),o+=String.fromCharCode(d&gt;&gt;12&amp;63|128),o+=String.fromCharCode(d&gt;&gt;6&amp;63|128),o+=String.fromCharCode(63&amp;d|128)}else o+=String.fromCharCode(e&gt;&gt;12|224),o+=String.fromCharCode(e&gt;&gt;6&amp;63|128),o+=String.fromCharCode(63&amp;e|128);return o},decode:function(r){if(\"string\"!=typeof r)return r;for(var e=\"\",o=0,t=0;o&lt;r.length;)if((t=r.charCodeAt(o))&lt;128)e+=String.fromCharCode(t),o++;else if(t&gt;191&amp;&amp;t&lt;224)e+=String.fromCharCode((31&amp;t)&lt;&lt;6|63&amp;r.charCodeAt(o+1)),o+=2;else if(t&gt;223&amp;&amp;t&lt;240)e+=String.fromCharCode((15&amp;t)&lt;&lt;12|(63&amp;r.charCodeAt(o+1))&lt;&lt;6|63&amp;r.charCodeAt(o+2)),o+=3;else{var i=(7&amp;t)&lt;&lt;18|(63&amp;r.charCodeAt(o+1))&lt;&lt;12|(63&amp;r.charCodeAt(o+2))&lt;&lt;6|63&amp;r.charCodeAt(o+3);e+=String.fromCharCode(55296+(i-65536&gt;&gt;10))+String.fromCharCode(56320+(i-65536&amp;1023)),o+=4}return e}}},this),function(r,e,o,t){if(void 0!==o.module&amp;&amp;o.module.exports){if(t&amp;&amp;o.require)for(var i=0;i&lt;t.length;i++)o[t[i]]=o.require(t[i]);o.module.exports=e.apply(o)}else void 0!==o.define&amp;&amp;\"function\"===o.define&amp;&amp;o.define.amd?define(\"base64\",t||[],e):o.base64=e.apply(o)}(0,function(r){var e=r||this.utf8,o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";return{encode:function(r){if(void 0===e)throw{error:\"MissingMethod\",message:\"UTF8 Module is missing.\"};if(\"string\"!=typeof r)return r;r=e.encode(r);for(var t,i,n,d,f,a,h,C=\"\",c=0;c&lt;r.length;)d=(t=r.charCodeAt(c++))&gt;&gt;2,f=(3&amp;t)&lt;&lt;4|(i=r.charCodeAt(c++))&gt;&gt;4,a=(15&amp;i)&lt;&lt;2|(n=r.charCodeAt(c++))&gt;&gt;6,h=63&amp;n,isNaN(i)?a=h=64:isNaN(n)&amp;&amp;(h=64),C+=o.charAt(d)+o.charAt(f)+o.charAt(a)+o.charAt(h);return C},decode:function(r){if(void 0===e)throw{error:\"MissingMethod\",message:\"UTF8 Module is missing.\"};if(\"string\"!=typeof r)return r;r=r.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");for(var t,i,n,d,f,a,h=\"\",C=0;C&lt;r.length;)t=o.indexOf(r.charAt(C++))&lt;&lt;2|(d=o.indexOf(r.charAt(C++)))&gt;&gt;4,i=(15&amp;d)&lt;&lt;4|(f=o.indexOf(r.charAt(C++)))&gt;&gt;2,n=(3&amp;f)&lt;&lt;6|(a=o.indexOf(r.charAt(C++))),h+=String.fromCharCode(t),64!=f&amp;&amp;(h+=String.fromCharCode(i)),64!=a&amp;&amp;(h+=String.fromCharCode(n));return e.decode(h)}}},this,[\"utf8\"]);}).call(exports);","type":"application/javascript","title":"$:/core/modules/utils/base64-utf8/base64-utf8.module.js","module-type":"library"},"$:/core/modules/utils/crypto.js":{"title":"$:/core/modules/utils/crypto.js","text":"/*\\\ntitle: $:/core/modules/utils/crypto.js\ntype: application/javascript\nmodule-type: utils\n\nUtility functions related to crypto.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nLook for an encrypted store area in the text of a TiddlyWiki file\n*/\nexports.extractEncryptedStoreArea = function(text) {\n\tvar encryptedStoreAreaStartMarker = \"&lt;pre id=\\\"encryptedStoreArea\\\" type=\\\"text/plain\\\" style=\\\"display:none;\\\"&gt;\",\n\t\tencryptedStoreAreaStart = text.indexOf(encryptedStoreAreaStartMarker);\n\tif(encryptedStoreAreaStart !== -1) {\n\t\tvar encryptedStoreAreaEnd = text.indexOf(\"&lt;/pre&gt;\",encryptedStoreAreaStart);\n\t\tif(encryptedStoreAreaEnd !== -1) {\n\t\t\treturn $tw.utils.htmlDecode(text.substring(encryptedStoreAreaStart + encryptedStoreAreaStartMarker.length,encryptedStoreAreaEnd-1));\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nAttempt to extract the tiddlers from an encrypted store area using the current password. If the password is not provided then the password in the password store will be used\n*/\nexports.decryptStoreArea = function(encryptedStoreArea,password) {\n\tvar decryptedText = $tw.crypto.decrypt(encryptedStoreArea,password);\n\tif(decryptedText) {\n\t\tvar json = JSON.parse(decryptedText),\n\t\t\ttiddlers = [];\n\t\tfor(var title in json) {\n\t\t\tif(title !== \"$:/isEncrypted\") {\n\t\t\t\ttiddlers.push(json[title]);\n\t\t\t}\n\t\t}\n\t\treturn tiddlers;\n\t} else {\n\t\treturn null;\n\t}\n};\n\n\n/*\nAttempt to extract the tiddlers from an encrypted store area using the current password. If that fails, the user is prompted for a password.\nencryptedStoreArea: text of the TiddlyWiki encrypted store area\ncallback: function(tiddlers) called with the array of decrypted tiddlers\n\nThe following configuration settings are supported:\n\n$tw.config.usePasswordVault: causes any password entered by the user to also be put into the system password vault\n*/\nexports.decryptStoreAreaInteractive = function(encryptedStoreArea,callback,options) {\n\t// Try to decrypt with the current password\n\tvar tiddlers = $tw.utils.decryptStoreArea(encryptedStoreArea);\n\tif(tiddlers) {\n\t\tcallback(tiddlers);\n\t} else {\n\t\t// Prompt for a new password and keep trying\n\t\t$tw.passwordPrompt.createPrompt({\n\t\t\tserviceName: \"Enter a password to decrypt the imported TiddlyWiki\",\n\t\t\tnoUserName: true,\n\t\t\tcanCancel: true,\n\t\t\tsubmitText: \"Decrypt\",\n\t\t\tcallback: function(data) {\n\t\t\t\t// Exit if the user cancelled\n\t\t\t\tif(!data) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Attempt to decrypt the tiddlers\n\t\t\t\tvar tiddlers = $tw.utils.decryptStoreArea(encryptedStoreArea,data.password);\n\t\t\t\tif(tiddlers) {\n\t\t\t\t\tif($tw.config.usePasswordVault) {\n\t\t\t\t\t\t$tw.crypto.setPassword(data.password);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(tiddlers);\n\t\t\t\t\t// Exit and remove the password prompt\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\t// We didn't decrypt everything, so continue to prompt for password\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/csv.js":{"title":"$:/core/modules/utils/csv.js","text":"/*\\\ntitle: $:/core/modules/utils/csv.js\ntype: application/javascript\nmodule-type: utils\n\nA barebones CSV parser\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nParse a CSV string with a header row and return an array of hashmaps.\n*/\nexports.parseCsvStringWithHeader = function(text,options) {\n\toptions = options || {};\n\tvar separator = options.separator || \",\",\n\t\trows = text.split(/\\r?\\n/mg).map(function(row) {\n\t\t\treturn $tw.utils.trim(row);\n\t\t}).filter(function(row) {\n\t\t\treturn row !== \"\";\n\t\t});\n\tif(rows.length &lt; 1) {\n\t\treturn \"Missing header row\";\n\t}\n\tvar headings = rows[0].split(separator),\n\t\tresults = [];\n\tfor(var row=1; row&lt;rows.length; row++) {\n\t\tvar columns = rows[row].split(separator),\n\t\t\tcolumnResult = Object.create(null);\n\t\tif(columns.length !== headings.length) {\n\t\t\treturn \"Malformed CSV row '\" + rows[row] + \"'\";\n\t\t}\n\t\tfor(var column=0; column&lt;columns.length; column++) {\n\t\t\tvar columnName = headings[column];\n\t\t\tcolumnResult[columnName] = $tw.utils.trim(columns[column] || \"\");\n\t\t}\n\t\tresults.push(columnResult);\n\t}\n\treturn results;\n}\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/diff-match-patch/diff_match_patch.js":{"text":"(function(){function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;\ndiff_match_patch.prototype.diff_main=function(a,b,c,d){\"undefined\"==typeof d&amp;&amp;(d=0&gt;=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==b)throw Error(\"Null input. (diff_main)\");if(a==b)return a?[[DIFF_EQUAL,a]]:[];\"undefined\"==typeof c&amp;&amp;(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f);a=a.substring(f);b=b.substring(f);f=this.diff_commonSuffix(a,b);var g=a.substring(a.length-f);a=a.substring(0,a.length-f);b=b.substring(0,b.length-f);a=this.diff_compute_(a,\nb,e,d);c&amp;&amp;a.unshift([DIFF_EQUAL,c]);g&amp;&amp;a.push([DIFF_EQUAL,g]);this.diff_cleanupMerge(a);return a};\ndiff_match_patch.prototype.diff_compute_=function(a,b,c,d){if(!a)return[[DIFF_INSERT,b]];if(!b)return[[DIFF_DELETE,a]];var e=a.length&gt;b.length?a:b,f=a.length&gt;b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[[DIFF_INSERT,e.substring(0,g)],[DIFF_EQUAL,f],[DIFF_INSERT,e.substring(g+f.length)]],a.length&gt;b.length&amp;&amp;(c[0][0]=c[2][0]=DIFF_DELETE),c):1==f.length?[[DIFF_DELETE,a],[DIFF_INSERT,b]]:(e=this.diff_halfMatch_(a,b))?(b=e[1],f=e[3],a=e[4],e=this.diff_main(e[0],e[2],c,d),c=this.diff_main(b,f,c,d),e.concat([[DIFF_EQUAL,\na]],c)):c&amp;&amp;100&lt;a.length&amp;&amp;100&lt;b.length?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)};\ndiff_match_patch.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1;b=d.chars2;d=d.lineArray;a=this.diff_main(a,b,!1,c);this.diff_charsToLines_(a,d);this.diff_cleanupSemantic(a);a.push([DIFF_EQUAL,\"\"]);for(var e=d=b=0,f=\"\",g=\"\";b&lt;a.length;){switch(a[b][0]){case DIFF_INSERT:e++;g+=a[b][1];break;case DIFF_DELETE:d++;f+=a[b][1];break;case DIFF_EQUAL:if(1&lt;=d&amp;&amp;1&lt;=e){a.splice(b-d-e,d+e);b=b-d-e;d=this.diff_main(f,g,!1,c);for(e=d.length-1;0&lt;=e;e--)a.splice(b,0,d[e]);b+=\nd.length}d=e=0;g=f=\"\"}b++}a.pop();return a};\ndiff_match_patch.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=2*f,h=Array(g),l=Array(g),k=0;k&lt;g;k++)h[k]=-1,l[k]=-1;h[f+1]=0;l[f+1]=0;k=d-e;for(var m=0!=k%2,p=0,x=0,w=0,q=0,t=0;t&lt;f&amp;&amp;!((new Date).getTime()&gt;c);t++){for(var v=-t+p;v&lt;=t-x;v+=2){var n=f+v;var r=v==-t||v!=t&amp;&amp;h[n-1]&lt;h[n+1]?h[n+1]:h[n-1]+1;for(var y=r-v;r&lt;d&amp;&amp;y&lt;e&amp;&amp;a.charAt(r)==b.charAt(y);)r++,y++;h[n]=r;if(r&gt;d)x+=2;else if(y&gt;e)p+=2;else if(m&amp;&amp;(n=f+k-v,0&lt;=n&amp;&amp;n&lt;g&amp;&amp;-1!=l[n])){var u=d-l[n];if(r&gt;=\nu)return this.diff_bisectSplit_(a,b,r,y,c)}}for(v=-t+w;v&lt;=t-q;v+=2){n=f+v;u=v==-t||v!=t&amp;&amp;l[n-1]&lt;l[n+1]?l[n+1]:l[n-1]+1;for(r=u-v;u&lt;d&amp;&amp;r&lt;e&amp;&amp;a.charAt(d-u-1)==b.charAt(e-r-1);)u++,r++;l[n]=u;if(u&gt;d)q+=2;else if(r&gt;e)w+=2;else if(!m&amp;&amp;(n=f+k-v,0&lt;=n&amp;&amp;n&lt;g&amp;&amp;-1!=h[n]&amp;&amp;(r=h[n],y=f+r-n,u=d-u,r&gt;=u)))return this.diff_bisectSplit_(a,b,r,y,c)}}return[[DIFF_DELETE,a],[DIFF_INSERT,b]]};\ndiff_match_patch.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);a=a.substring(c);b=b.substring(d);f=this.diff_main(f,g,!1,e);e=this.diff_main(a,b,!1,e);return f.concat(e)};\ndiff_match_patch.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b=\"\",c=0,f=-1,g=d.length;f&lt;a.length-1;){f=a.indexOf(\"\\n\",c);-1==f&amp;&amp;(f=a.length-1);var h=a.substring(c,f+1);c=f+1;(e.hasOwnProperty?e.hasOwnProperty(h):void 0!==e[h])?b+=String.fromCharCode(e[h]):(b+=String.fromCharCode(g),e[h]=g,d[g++]=h)}return b}var d=[],e={};d[0]=\"\";var f=c(a),g=c(b);return{chars1:f,chars2:g,lineArray:d}};\ndiff_match_patch.prototype.diff_charsToLines_=function(a,b){for(var c=0;c&lt;a.length;c++){for(var d=a[c][1],e=[],f=0;f&lt;d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join(\"\")}};diff_match_patch.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c&lt;e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};\ndiff_match_patch.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c&lt;e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};\ndiff_match_patch.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c&gt;d?a=a.substring(c-d):c&lt;d&amp;&amp;(b=b.substring(0,c));c=Math.min(c,d);if(a==b)return c;d=0;for(var e=1;;){var f=a.substring(c-e);f=b.indexOf(f);if(-1==f)return d;e+=f;if(0==f||a.substring(c-e)==b.substring(0,e))d=e,e++}};\ndiff_match_patch.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,g=\"\",h,k,l,m;-1!=(e=b.indexOf(d,e+1));){var p=f.diff_commonPrefix(a.substring(c),b.substring(e)),u=f.diff_commonSuffix(a.substring(0,c),b.substring(0,e));g.length&lt;u+p&amp;&amp;(g=b.substring(e-u,e)+b.substring(e,e+p),h=a.substring(0,c-u),k=a.substring(c+p),l=b.substring(0,e-u),m=b.substring(e+p))}return 2*g.length&gt;=a.length?[h,k,l,m,g]:null}if(0&gt;=this.Diff_Timeout)return null;\nvar d=a.length&gt;b.length?a:b,e=a.length&gt;b.length?b:a;if(4&gt;d.length||2*e.length&lt;d.length)return null;var f=this,g=c(d,e,Math.ceil(d.length/4));d=c(d,e,Math.ceil(d.length/2));if(g||d)g=d?g?g[4].length&gt;d[4].length?g:d:d:g;else return null;if(a.length&gt;b.length){d=g[0];e=g[1];var h=g[2];var l=g[3]}else h=g[0],l=g[1],d=g[2],e=g[3];return[d,e,h,l,g[4]]};\ndiff_match_patch.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,l=0,k=0;f&lt;a.length;)a[f][0]==DIFF_EQUAL?(c[d++]=f,g=l,h=k,k=l=0,e=a[f][1]):(a[f][0]==DIFF_INSERT?l+=a[f][1].length:k+=a[f][1].length,e&amp;&amp;e.length&lt;=Math.max(g,h)&amp;&amp;e.length&lt;=Math.max(l,k)&amp;&amp;(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,d--,f=0&lt;d?c[d-1]:-1,k=l=h=g=0,e=null,b=!0)),f++;b&amp;&amp;this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(f=1;f&lt;a.length;){if(a[f-1][0]==\nDIFF_DELETE&amp;&amp;a[f][0]==DIFF_INSERT){b=a[f-1][1];c=a[f][1];d=this.diff_commonOverlap_(b,c);e=this.diff_commonOverlap_(c,b);if(d&gt;=e){if(d&gt;=b.length/2||d&gt;=c.length/2)a.splice(f,0,[DIFF_EQUAL,c.substring(0,d)]),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++}else if(e&gt;=b.length/2||e&gt;=c.length/2)a.splice(f,0,[DIFF_EQUAL,b.substring(0,e)]),a[f-1][0]=DIFF_INSERT,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=DIFF_DELETE,a[f+1][1]=b.substring(e),f++;f++}f++}};\ndiff_match_patch.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){if(!a||!b)return 6;var c=a.charAt(a.length-1),d=b.charAt(0),e=c.match(diff_match_patch.nonAlphaNumericRegex_),f=d.match(diff_match_patch.nonAlphaNumericRegex_),g=e&amp;&amp;c.match(diff_match_patch.whitespaceRegex_),h=f&amp;&amp;d.match(diff_match_patch.whitespaceRegex_);c=g&amp;&amp;c.match(diff_match_patch.linebreakRegex_);d=h&amp;&amp;d.match(diff_match_patch.linebreakRegex_);var k=c&amp;&amp;a.match(diff_match_patch.blanklineEndRegex_),l=d&amp;&amp;b.match(diff_match_patch.blanklineStartRegex_);\nreturn k||l?5:c||d?4:e&amp;&amp;!g&amp;&amp;h?3:g||h?2:e||f?1:0}for(var c=1;c&lt;a.length-1;){if(a[c-1][0]==DIFF_EQUAL&amp;&amp;a[c+1][0]==DIFF_EQUAL){var d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=this.diff_commonSuffix(d,e);if(g){var h=e.substring(e.length-g);d=d.substring(0,d.length-g);e=h+e.substring(0,e.length-g);f=h+f}g=d;h=e;for(var l=f,k=b(d,e)+b(e,f);e.charAt(0)===f.charAt(0);){d+=e.charAt(0);e=e.substring(1)+f.charAt(0);f=f.substring(1);var m=b(d,e)+b(e,f);m&gt;=k&amp;&amp;(k=m,g=d,h=e,l=f)}a[c-1][1]!=g&amp;&amp;(g?a[c-1][1]=g:(a.splice(c-\n1,1),c--),a[c][1]=h,l?a[c+1][1]=l:(a.splice(c+1,1),c--))}c++}};diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;diff_match_patch.whitespaceRegex_=/\\s/;diff_match_patch.linebreakRegex_=/[\\r\\n]/;diff_match_patch.blanklineEndRegex_=/\\n\\r?\\n$/;diff_match_patch.blanklineStartRegex_=/^\\r?\\n\\r?\\n/;\ndiff_match_patch.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,l=!1,k=!1;f&lt;a.length;)a[f][0]==DIFF_EQUAL?(a[f][1].length&lt;this.Diff_EditCost&amp;&amp;(l||k)?(c[d++]=f,g=l,h=k,e=a[f][1]):(d=0,e=null),l=k=!1):(a[f][0]==DIFF_DELETE?k=!0:l=!0,e&amp;&amp;(g&amp;&amp;h&amp;&amp;l&amp;&amp;k||e.length&lt;this.Diff_EditCost/2&amp;&amp;3==g+h+l+k)&amp;&amp;(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,e=null,g&amp;&amp;h?(l=k=!0,d=0):(d--,f=0&lt;d?c[d-1]:-1,l=k=!1),b=!0)),f++;b&amp;&amp;this.diff_cleanupMerge(a)};\ndiff_match_patch.prototype.diff_cleanupMerge=function(a){a.push([DIFF_EQUAL,\"\"]);for(var b=0,c=0,d=0,e=\"\",f=\"\",g;b&lt;a.length;)switch(a[b][0]){case DIFF_INSERT:d++;f+=a[b][1];b++;break;case DIFF_DELETE:c++;e+=a[b][1];b++;break;case DIFF_EQUAL:1&lt;c+d?(0!==c&amp;&amp;0!==d&amp;&amp;(g=this.diff_commonPrefix(f,e),0!==g&amp;&amp;(0&lt;b-c-d&amp;&amp;a[b-c-d-1][0]==DIFF_EQUAL?a[b-c-d-1][1]+=f.substring(0,g):(a.splice(0,0,[DIFF_EQUAL,f.substring(0,g)]),b++),f=f.substring(g),e=e.substring(g)),g=this.diff_commonSuffix(f,e),0!==g&amp;&amp;(a[b][1]=f.substring(f.length-\ng)+a[b][1],f=f.substring(0,f.length-g),e=e.substring(0,e.length-g))),0===c?a.splice(b-d,c+d,[DIFF_INSERT,f]):0===d?a.splice(b-c,c+d,[DIFF_DELETE,e]):a.splice(b-c-d,c+d,[DIFF_DELETE,e],[DIFF_INSERT,f]),b=b-c-d+(c?1:0)+(d?1:0)+1):0!==b&amp;&amp;a[b-1][0]==DIFF_EQUAL?(a[b-1][1]+=a[b][1],a.splice(b,1)):b++,c=d=0,f=e=\"\"}\"\"===a[a.length-1][1]&amp;&amp;a.pop();c=!1;for(b=1;b&lt;a.length-1;)a[b-1][0]==DIFF_EQUAL&amp;&amp;a[b+1][0]==DIFF_EQUAL&amp;&amp;(a[b][1].substring(a[b][1].length-a[b-1][1].length)==a[b-1][1]?(a[b][1]=a[b-1][1]+a[b][1].substring(0,\na[b][1].length-a[b-1][1].length),a[b+1][1]=a[b-1][1]+a[b+1][1],a.splice(b-1,1),c=!0):a[b][1].substring(0,a[b+1][1].length)==a[b+1][1]&amp;&amp;(a[b-1][1]+=a[b+1][1],a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1],a.splice(b+1,1),c=!0)),b++;c&amp;&amp;this.diff_cleanupMerge(a)};\ndiff_match_patch.prototype.diff_xIndex=function(a,b){var c=0,d=0,e=0,f=0,g;for(g=0;g&lt;a.length;g++){a[g][0]!==DIFF_INSERT&amp;&amp;(c+=a[g][1].length);a[g][0]!==DIFF_DELETE&amp;&amp;(d+=a[g][1].length);if(c&gt;b)break;e=c;f=d}return a.length!=g&amp;&amp;a[g][0]===DIFF_DELETE?f:f+(b-e)};\ndiff_match_patch.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&amp;/g,d=/&lt;/g,e=/&gt;/g,f=/\\n/g,g=0;g&lt;a.length;g++){var h=a[g][0],l=a[g][1].replace(c,\"&amp;amp;\").replace(d,\"&amp;lt;\").replace(e,\"&amp;gt;\").replace(f,\"&amp;para;&lt;br&gt;\");switch(h){case DIFF_INSERT:b[g]='&lt;ins style=\"background:#e6ffe6;\"&gt;'+l+\"&lt;/ins&gt;\";break;case DIFF_DELETE:b[g]='&lt;del style=\"background:#ffe6e6;\"&gt;'+l+\"&lt;/del&gt;\";break;case DIFF_EQUAL:b[g]=\"&lt;span&gt;\"+l+\"&lt;/span&gt;\"}}return b.join(\"\")};\ndiff_match_patch.prototype.diff_text1=function(a){for(var b=[],c=0;c&lt;a.length;c++)a[c][0]!==DIFF_INSERT&amp;&amp;(b[c]=a[c][1]);return b.join(\"\")};diff_match_patch.prototype.diff_text2=function(a){for(var b=[],c=0;c&lt;a.length;c++)a[c][0]!==DIFF_DELETE&amp;&amp;(b[c]=a[c][1]);return b.join(\"\")};\ndiff_match_patch.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e&lt;a.length;e++){var f=a[e][1];switch(a[e][0]){case DIFF_INSERT:c+=f.length;break;case DIFF_DELETE:d+=f.length;break;case DIFF_EQUAL:b+=Math.max(c,d),d=c=0}}return b+=Math.max(c,d)};\ndiff_match_patch.prototype.diff_toDelta=function(a){for(var b=[],c=0;c&lt;a.length;c++)switch(a[c][0]){case DIFF_INSERT:b[c]=\"+\"+encodeURI(a[c][1]);break;case DIFF_DELETE:b[c]=\"-\"+a[c][1].length;break;case DIFF_EQUAL:b[c]=\"=\"+a[c][1].length}return b.join(\"\\t\").replace(/%20/g,\" \")};\ndiff_match_patch.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\\t/g),g=0;g&lt;f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case \"+\":try{c[d++]=[DIFF_INSERT,decodeURI(h)]}catch(k){throw Error(\"Illegal escape in diff_fromDelta: \"+h);}break;case \"-\":case \"=\":var l=parseInt(h,10);if(isNaN(l)||0&gt;l)throw Error(\"Invalid number in diff_fromDelta: \"+h);h=a.substring(e,e+=l);\"=\"==f[g].charAt(0)?c[d++]=[DIFF_EQUAL,h]:c[d++]=[DIFF_DELETE,h];break;default:if(f[g])throw Error(\"Invalid diff operation in diff_fromDelta: \"+\nf[g]);}}if(e!=a.length)throw Error(\"Delta length (\"+e+\") does not equal source text length (\"+a.length+\").\");return c};diff_match_patch.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error(\"Null input. (match_main)\");c=Math.max(0,Math.min(c,a.length));return a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1};\ndiff_match_patch.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return f.Match_Distance?e+g/f.Match_Distance:g?1:e}if(b.length&gt;this.Match_MaxBits)throw Error(\"Pattern too long for this browser.\");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&amp;&amp;(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&amp;&amp;(g=Math.min(d(0,h),g)));var l=1&lt;&lt;b.length-1;h=-1;for(var k,m,p=b.length+a.length,x,w=0;w&lt;b.length;w++){k=0;for(m=p;k&lt;m;)d(w,\nc+m)&lt;=g?k=m:p=m,m=Math.floor((p-k)/2+k);p=m;k=Math.max(1,c-m+1);var q=Math.min(c+m,a.length)+b.length;m=Array(q+2);for(m[q+1]=(1&lt;&lt;w)-1;q&gt;=k;q--){var t=e[a.charAt(q-1)];m[q]=0===w?(m[q+1]&lt;&lt;1|1)&amp;t:(m[q+1]&lt;&lt;1|1)&amp;t|(x[q+1]|x[q])&lt;&lt;1|1|x[q+1];if(m[q]&amp;l&amp;&amp;(t=d(w,q-1),t&lt;=g))if(g=t,h=q-1,h&gt;c)k=Math.max(1,2*c-h);else break}if(d(w+1,c)&gt;g)break;x=m}return h};\ndiff_match_patch.prototype.match_alphabet_=function(a){for(var b={},c=0;c&lt;a.length;c++)b[a.charAt(c)]=0;for(c=0;c&lt;a.length;c++)b[a.charAt(c)]|=1&lt;&lt;a.length-c-1;return b};\ndiff_match_patch.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&amp;&amp;c.length&lt;this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;(c=b.substring(a.start2-d,a.start2))&amp;&amp;a.diffs.unshift([DIFF_EQUAL,c]);(d=b.substring(a.start2+a.length1,a.start2+a.length1+d))&amp;&amp;a.diffs.push([DIFF_EQUAL,d]);a.start1-=c.length;a.start2-=\nc.length;a.length1+=c.length+d.length;a.length2+=c.length+d.length}};\ndiff_match_patch.prototype.patch_make=function(a,b,c){if(\"string\"==typeof a&amp;&amp;\"string\"==typeof b&amp;&amp;\"undefined\"==typeof c){var d=a;b=this.diff_main(d,b,!0);2&lt;b.length&amp;&amp;(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b))}else if(a&amp;&amp;\"object\"==typeof a&amp;&amp;\"undefined\"==typeof b&amp;&amp;\"undefined\"==typeof c)b=a,d=this.diff_text1(b);else if(\"string\"==typeof a&amp;&amp;b&amp;&amp;\"object\"==typeof b&amp;&amp;\"undefined\"==typeof c)d=a;else if(\"string\"==typeof a&amp;&amp;\"string\"==typeof b&amp;&amp;c&amp;&amp;\"object\"==typeof c)d=a,b=c;else throw Error(\"Unknown call format to patch_make.\");\nif(0===b.length)return[];c=[];a=new diff_match_patch.patch_obj;for(var e=0,f=0,g=0,h=d,l=0;l&lt;b.length;l++){var k=b[l][0],m=b[l][1];e||k===DIFF_EQUAL||(a.start1=f,a.start2=g);switch(k){case DIFF_INSERT:a.diffs[e++]=b[l];a.length2+=m.length;d=d.substring(0,g)+m+d.substring(g);break;case DIFF_DELETE:a.length1+=m.length;a.diffs[e++]=b[l];d=d.substring(0,g)+d.substring(g+m.length);break;case DIFF_EQUAL:m.length&lt;=2*this.Patch_Margin&amp;&amp;e&amp;&amp;b.length!=l+1?(a.diffs[e++]=b[l],a.length1+=m.length,a.length2+=m.length):\nm.length&gt;=2*this.Patch_Margin&amp;&amp;e&amp;&amp;(this.patch_addContext_(a,h),c.push(a),a=new diff_match_patch.patch_obj,e=0,h=d,f=g)}k!==DIFF_INSERT&amp;&amp;(f+=m.length);k!==DIFF_DELETE&amp;&amp;(g+=m.length)}e&amp;&amp;(this.patch_addContext_(a,h),c.push(a));return c};\ndiff_match_patch.prototype.patch_deepCopy=function(a){for(var b=[],c=0;c&lt;a.length;c++){var d=a[c],e=new diff_match_patch.patch_obj;e.diffs=[];for(var f=0;f&lt;d.diffs.length;f++)e.diffs[f]=d.diffs[f].slice();e.start1=d.start1;e.start2=d.start2;e.length1=d.length1;e.length2=d.length2;b[c]=e}return b};\ndiff_match_patch.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c;this.patch_splitMax(a);for(var d=0,e=[],f=0;f&lt;a.length;f++){var g=a[f].start2+d,h=this.diff_text1(a[f].diffs),l=-1;if(h.length&gt;this.Match_MaxBits){var k=this.match_main(b,h.substring(0,this.Match_MaxBits),g);-1!=k&amp;&amp;(l=this.match_main(b,h.substring(h.length-this.Match_MaxBits),g+h.length-this.Match_MaxBits),-1==l||k&gt;=l)&amp;&amp;(k=-1)}else k=this.match_main(b,h,\ng);if(-1==k)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=k-g,g=-1==l?b.substring(k,k+h.length):b.substring(k,l+this.Match_MaxBits),h==g)b=b.substring(0,k)+this.diff_text2(a[f].diffs)+b.substring(k+h.length);else if(g=this.diff_main(h,g,!1),h.length&gt;this.Match_MaxBits&amp;&amp;this.diff_levenshtein(g)/h.length&gt;this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(g);h=0;var m;for(l=0;l&lt;a[f].diffs.length;l++){var p=a[f].diffs[l];p[0]!==DIFF_EQUAL&amp;&amp;(m=this.diff_xIndex(g,h));p[0]===\nDIFF_INSERT?b=b.substring(0,k+m)+p[1]+b.substring(k+m):p[0]===DIFF_DELETE&amp;&amp;(b=b.substring(0,k+m)+b.substring(k+this.diff_xIndex(g,h+p[1].length)));p[0]!==DIFF_DELETE&amp;&amp;(h+=p[1].length)}}}b=b.substring(c.length,b.length-c.length);return[b,e]};\ndiff_match_patch.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c=\"\",d=1;d&lt;=b;d++)c+=String.fromCharCode(d);for(d=0;d&lt;a.length;d++)a[d].start1+=b,a[d].start2+=b;d=a[0];var e=d.diffs;if(0==e.length||e[0][0]!=DIFF_EQUAL)e.unshift([DIFF_EQUAL,c]),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b&gt;e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1];d.start1-=f;d.start2-=f;d.length1+=f;d.length2+=f}d=a[a.length-1];e=d.diffs;0==e.length||e[e.length-\n1][0]!=DIFF_EQUAL?(e.push([DIFF_EQUAL,c]),d.length1+=b,d.length2+=b):b&gt;e[e.length-1][1].length&amp;&amp;(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f);return c};\ndiff_match_patch.prototype.patch_splitMax=function(a){for(var b=this.Match_MaxBits,c=0;c&lt;a.length;c++)if(!(a[c].length1&lt;=b)){var d=a[c];a.splice(c--,1);for(var e=d.start1,f=d.start2,g=\"\";0!==d.diffs.length;){var h=new diff_match_patch.patch_obj,l=!0;h.start1=e-g.length;h.start2=f-g.length;\"\"!==g&amp;&amp;(h.length1=h.length2=g.length,h.diffs.push([DIFF_EQUAL,g]));for(;0!==d.diffs.length&amp;&amp;h.length1&lt;b-this.Patch_Margin;){g=d.diffs[0][0];var k=d.diffs[0][1];g===DIFF_INSERT?(h.length2+=k.length,f+=k.length,h.diffs.push(d.diffs.shift()),\nl=!1):g===DIFF_DELETE&amp;&amp;1==h.diffs.length&amp;&amp;h.diffs[0][0]==DIFF_EQUAL&amp;&amp;k.length&gt;2*b?(h.length1+=k.length,e+=k.length,l=!1,h.diffs.push([g,k]),d.diffs.shift()):(k=k.substring(0,b-h.length1-this.Patch_Margin),h.length1+=k.length,e+=k.length,g===DIFF_EQUAL?(h.length2+=k.length,f+=k.length):l=!1,h.diffs.push([g,k]),k==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(k.length))}g=this.diff_text2(h.diffs);g=g.substring(g.length-this.Patch_Margin);k=this.diff_text1(d.diffs).substring(0,\nthis.Patch_Margin);\"\"!==k&amp;&amp;(h.length1+=k.length,h.length2+=k.length,0!==h.diffs.length&amp;&amp;h.diffs[h.diffs.length-1][0]===DIFF_EQUAL?h.diffs[h.diffs.length-1][1]+=k:h.diffs.push([DIFF_EQUAL,k]));l||a.splice(++c,0,h)}}};diff_match_patch.prototype.patch_toText=function(a){for(var b=[],c=0;c&lt;a.length;c++)b[c]=a[c];return b.join(\"\")};\ndiff_match_patch.prototype.patch_fromText=function(a){var b=[];if(!a)return b;a=a.split(\"\\n\");for(var c=0,d=/^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;c&lt;a.length;){var e=a[c].match(d);if(!e)throw Error(\"Invalid patch string: \"+a[c]);var f=new diff_match_patch.patch_obj;b.push(f);f.start1=parseInt(e[1],10);\"\"===e[2]?(f.start1--,f.length1=1):\"0\"==e[2]?f.length1=0:(f.start1--,f.length1=parseInt(e[2],10));f.start2=parseInt(e[3],10);\"\"===e[4]?(f.start2--,f.length2=1):\"0\"==e[4]?f.length2=0:(f.start2--,f.length2=\nparseInt(e[4],10));for(c++;c&lt;a.length;){e=a[c].charAt(0);try{var g=decodeURI(a[c].substring(1))}catch(h){throw Error(\"Illegal escape in patch_fromText: \"+g);}if(\"-\"==e)f.diffs.push([DIFF_DELETE,g]);else if(\"+\"==e)f.diffs.push([DIFF_INSERT,g]);else if(\" \"==e)f.diffs.push([DIFF_EQUAL,g]);else if(\"@\"==e)break;else if(\"\"!==e)throw Error('Invalid patch mode \"'+e+'\" in: '+g);c++}}return b};diff_match_patch.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};\ndiff_match_patch.patch_obj.prototype.toString=function(){for(var a=[\"@@ -\"+(0===this.length1?this.start1+\",0\":1==this.length1?this.start1+1:this.start1+1+\",\"+this.length1)+\" +\"+(0===this.length2?this.start2+\",0\":1==this.length2?this.start2+1:this.start2+1+\",\"+this.length2)+\" @@\\n\"],b,c=0;c&lt;this.diffs.length;c++){switch(this.diffs[c][0]){case DIFF_INSERT:b=\"+\";break;case DIFF_DELETE:b=\"-\";break;case DIFF_EQUAL:b=\" \"}a[c+1]=b+encodeURI(this.diffs[c][1])+\"\\n\"}return a.join(\"\").replace(/%20/g,\" \")};\nthis.diff_match_patch=diff_match_patch;this.DIFF_DELETE=DIFF_DELETE;this.DIFF_INSERT=DIFF_INSERT;this.DIFF_EQUAL=DIFF_EQUAL;\n}).call(exports);","type":"application/javascript","title":"$:/core/modules/utils/diff-match-patch/diff_match_patch.js","module-type":"library"},"$:/core/modules/utils/dom/animations/slide.js":{"title":"$:/core/modules/utils/dom/animations/slide.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/animations/slide.js\ntype: application/javascript\nmodule-type: animation\n\nA simple slide animation that varies the height of the element\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nfunction slideOpen(domNode,options) {\n\toptions = options || {};\n\tvar duration = options.duration || $tw.utils.getAnimationDuration();\n\t// Get the current height of the domNode\n\tvar computedStyle = window.getComputedStyle(domNode),\n\t\tcurrMarginBottom = parseInt(computedStyle.marginBottom,10),\n\t\tcurrMarginTop = parseInt(computedStyle.marginTop,10),\n\t\tcurrPaddingBottom = parseInt(computedStyle.paddingBottom,10),\n\t\tcurrPaddingTop = parseInt(computedStyle.paddingTop,10),\n\t\tcurrHeight = domNode.offsetHeight;\n\t// Reset the margin once the transition is over\n\tsetTimeout(function() {\n\t\t$tw.utils.setStyle(domNode,[\n\t\t\t{transition: \"none\"},\n\t\t\t{marginBottom: \"\"},\n\t\t\t{marginTop: \"\"},\n\t\t\t{paddingBottom: \"\"},\n\t\t\t{paddingTop: \"\"},\n\t\t\t{height: \"auto\"},\n\t\t\t{opacity: \"\"}\n\t\t]);\n\t\tif(options.callback) {\n\t\t\toptions.callback();\n\t\t}\n\t},duration);\n\t// Set up the initial position of the element\n\t$tw.utils.setStyle(domNode,[\n\t\t{transition: \"none\"},\n\t\t{marginTop: \"0px\"},\n\t\t{marginBottom: \"0px\"},\n\t\t{paddingTop: \"0px\"},\n\t\t{paddingBottom: \"0px\"},\n\t\t{height: \"0px\"},\n\t\t{opacity: \"0\"}\n\t]);\n\t$tw.utils.forceLayout(domNode);\n\t// Transition to the final position\n\t$tw.utils.setStyle(domNode,[\n\t\t{transition: \"margin-top \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"margin-bottom \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"padding-top \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"padding-bottom \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"height \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"opacity \" + duration + \"ms ease-in-out\"},\n\t\t{marginBottom: currMarginBottom + \"px\"},\n\t\t{marginTop: currMarginTop + \"px\"},\n\t\t{paddingBottom: currPaddingBottom + \"px\"},\n\t\t{paddingTop: currPaddingTop + \"px\"},\n\t\t{height: currHeight + \"px\"},\n\t\t{opacity: \"1\"}\n\t]);\n}\n\nfunction slideClosed(domNode,options) {\n\toptions = options || {};\n\tvar duration = options.duration || $tw.utils.getAnimationDuration(),\n\t\tcurrHeight = domNode.offsetHeight;\n\t// Clear the properties we've set when the animation is over\n\tsetTimeout(function() {\n\t\t$tw.utils.setStyle(domNode,[\n\t\t\t{transition: \"none\"},\n\t\t\t{marginBottom: \"\"},\n\t\t\t{marginTop: \"\"},\n\t\t\t{paddingBottom: \"\"},\n\t\t\t{paddingTop: \"\"},\n\t\t\t{height: \"auto\"},\n\t\t\t{opacity: \"\"}\n\t\t]);\n\t\tif(options.callback) {\n\t\t\toptions.callback();\n\t\t}\n\t},duration);\n\t// Set up the initial position of the element\n\t$tw.utils.setStyle(domNode,[\n\t\t{height: currHeight + \"px\"},\n\t\t{opacity: \"1\"}\n\t]);\n\t$tw.utils.forceLayout(domNode);\n\t// Transition to the final position\n\t$tw.utils.setStyle(domNode,[\n\t\t{transition: \"margin-top \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"margin-bottom \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"padding-top \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"padding-bottom \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"height \" + duration + \"ms ease-in-out, \" +\n\t\t\t\t\t\"opacity \" + duration + \"ms ease-in-out\"},\n\t\t{marginTop: \"0px\"},\n\t\t{marginBottom: \"0px\"},\n\t\t{paddingTop: \"0px\"},\n\t\t{paddingBottom: \"0px\"},\n\t\t{height: \"0px\"},\n\t\t{opacity: \"0\"}\n\t]);\n}\n\nexports.slide = {\n\topen: slideOpen,\n\tclose: slideClosed\n};\n\n})();\n","type":"application/javascript","module-type":"animation"},"$:/core/modules/utils/dom/animator.js":{"title":"$:/core/modules/utils/dom/animator.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/animator.js\ntype: application/javascript\nmodule-type: utils\n\nOrchestrates animations and transitions\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nfunction Animator() {\n\t// Get the registered animation modules\n\tthis.animations = {};\n\t$tw.modules.applyMethods(\"animation\",this.animations);\n}\n\nAnimator.prototype.perform = function(type,domNode,options) {\n\toptions = options || {};\n\t// Find an animation that can handle this type\n\tvar chosenAnimation;\n\t$tw.utils.each(this.animations,function(animation,name) {\n\t\tif($tw.utils.hop(animation,type)) {\n\t\t\tchosenAnimation = animation[type];\n\t\t}\n\t});\n\tif(!chosenAnimation) {\n\t\tchosenAnimation = function(domNode,options) {\n\t\t\tif(options.callback) {\n\t\t\t\toptions.callback();\n\t\t\t}\n\t\t};\n\t}\n\t// Call the animation\n\tchosenAnimation(domNode,options);\n};\n\nexports.Animator = Animator;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/browser.js":{"title":"$:/core/modules/utils/dom/browser.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/browser.js\ntype: application/javascript\nmodule-type: utils\n\nBrowser feature detection\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nSet style properties of an element\n\telement: dom node\n\tstyles: ordered array of {name: value} pairs\n*/\nexports.setStyle = function(element,styles) {\n\tif(element.nodeType === 1) { // Element.ELEMENT_NODE\n\t\tfor(var t=0; t&lt;styles.length; t++) {\n\t\t\tfor(var styleName in styles[t]) {\n\t\t\t\telement.style[$tw.utils.convertStyleNameToPropertyName(styleName)] = styles[t][styleName];\n\t\t\t}\n\t\t}\n\t}\n};\n\n/*\nConverts a standard CSS property name into the local browser-specific equivalent. For example:\n\t\"background-color\" --&gt; \"backgroundColor\"\n\t\"transition\" --&gt; \"webkitTransition\"\n*/\n\nvar styleNameCache = {}; // We'll cache the style name conversions\n\nexports.convertStyleNameToPropertyName = function(styleName) {\n\t// Return from the cache if we can\n\tif(styleNameCache[styleName]) {\n\t\treturn styleNameCache[styleName];\n\t}\n\t// Convert it by first removing any hyphens\n\tvar propertyName = $tw.utils.unHyphenateCss(styleName);\n\t// Then check if it needs a prefix\n\tif($tw.browser &amp;&amp; document.body.style[propertyName] === undefined) {\n\t\tvar prefixes = [\"O\",\"MS\",\"Moz\",\"webkit\"];\n\t\tfor(var t=0; t&lt;prefixes.length; t++) {\n\t\t\tvar prefixedName = prefixes[t] + propertyName.substr(0,1).toUpperCase() + propertyName.substr(1);\n\t\t\tif(document.body.style[prefixedName] !== undefined) {\n\t\t\t\tpropertyName = prefixedName;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t// Put it in the cache too\n\tstyleNameCache[styleName] = propertyName;\n\treturn propertyName;\n};\n\n/*\nConverts a JS format CSS property name back into the dashed form used in CSS declarations. For example:\n\t\"backgroundColor\" --&gt; \"background-color\"\n\t\"webkitTransform\" --&gt; \"-webkit-transform\"\n*/\nexports.convertPropertyNameToStyleName = function(propertyName) {\n\t// Rehyphenate the name\n\tvar styleName = $tw.utils.hyphenateCss(propertyName);\n\t// If there's a webkit prefix, add a dash (other browsers have uppercase prefixes, and so get the dash automatically)\n\tif(styleName.indexOf(\"webkit\") === 0) {\n\t\tstyleName = \"-\" + styleName;\n\t} else if(styleName.indexOf(\"-m-s\") === 0) {\n\t\tstyleName = \"-ms\" + styleName.substr(4);\n\t}\n\treturn styleName;\n};\n\n/*\nRound trip a stylename to a property name and back again. For example:\n\t\"transform\" --&gt; \"webkitTransform\" --&gt; \"-webkit-transform\"\n*/\nexports.roundTripPropertyName = function(propertyName) {\n\treturn $tw.utils.convertPropertyNameToStyleName($tw.utils.convertStyleNameToPropertyName(propertyName));\n};\n\n/*\nConverts a standard event name into the local browser specific equivalent. For example:\n\t\"animationEnd\" --&gt; \"webkitAnimationEnd\"\n*/\n\nvar eventNameCache = {}; // We'll cache the conversions\n\nvar eventNameMappings = {\n\t\"transitionEnd\": {\n\t\tcorrespondingCssProperty: \"transition\",\n\t\tmappings: {\n\t\t\ttransition: \"transitionend\",\n\t\t\tOTransition: \"oTransitionEnd\",\n\t\t\tMSTransition: \"msTransitionEnd\",\n\t\t\tMozTransition: \"transitionend\",\n\t\t\twebkitTransition: \"webkitTransitionEnd\"\n\t\t}\n\t},\n\t\"animationEnd\": {\n\t\tcorrespondingCssProperty: \"animation\",\n\t\tmappings: {\n\t\t\tanimation: \"animationend\",\n\t\t\tOAnimation: \"oAnimationEnd\",\n\t\t\tMSAnimation: \"msAnimationEnd\",\n\t\t\tMozAnimation: \"animationend\",\n\t\t\twebkitAnimation: \"webkitAnimationEnd\"\n\t\t}\n\t}\n};\n\nexports.convertEventName = function(eventName) {\n\tif(eventNameCache[eventName]) {\n\t\treturn eventNameCache[eventName];\n\t}\n\tvar newEventName = eventName,\n\t\tmappings = eventNameMappings[eventName];\n\tif(mappings) {\n\t\tvar convertedProperty = $tw.utils.convertStyleNameToPropertyName(mappings.correspondingCssProperty);\n\t\tif(mappings.mappings[convertedProperty]) {\n\t\t\tnewEventName = mappings.mappings[convertedProperty];\n\t\t}\n\t}\n\t// Put it in the cache too\n\teventNameCache[eventName] = newEventName;\n\treturn newEventName;\n};\n\n/*\nReturn the names of the fullscreen APIs\n*/\nexports.getFullScreenApis = function() {\n\tvar d = document,\n\t\tdb = d.body,\n\t\tresult = {\n\t\t\"_requestFullscreen\": db.webkitRequestFullscreen !== undefined ? \"webkitRequestFullscreen\" :\n\t\t\t\t\t\t\tdb.mozRequestFullScreen !== undefined ? \"mozRequestFullScreen\" :\n\t\t\t\t\t\t\tdb.msRequestFullscreen !== undefined ? \"msRequestFullscreen\" :\n\t\t\t\t\t\t\tdb.requestFullscreen !== undefined ? \"requestFullscreen\" : \"\",\n\t\t\"_exitFullscreen\": d.webkitExitFullscreen !== undefined ? \"webkitExitFullscreen\" :\n\t\t\t\t\t\t\td.mozCancelFullScreen !== undefined ? \"mozCancelFullScreen\" :\n\t\t\t\t\t\t\td.msExitFullscreen !== undefined ? \"msExitFullscreen\" :\n\t\t\t\t\t\t\td.exitFullscreen !== undefined ? \"exitFullscreen\" : \"\",\n\t\t\"_fullscreenElement\": d.webkitFullscreenElement !== undefined ? \"webkitFullscreenElement\" :\n\t\t\t\t\t\t\td.mozFullScreenElement !== undefined ? \"mozFullScreenElement\" :\n\t\t\t\t\t\t\td.msFullscreenElement !== undefined ? \"msFullscreenElement\" :\n\t\t\t\t\t\t\td.fullscreenElement !== undefined ? \"fullscreenElement\" : \"\",\n\t\t\"_fullscreenChange\": d.webkitFullscreenElement !== undefined ? \"webkitfullscreenchange\" :\n\t\t\t\t\t\t\td.mozFullScreenElement !== undefined ? \"mozfullscreenchange\" :\n\t\t\t\t\t\t\td.msFullscreenElement !== undefined ? \"MSFullscreenChange\" :\n\t\t\t\t\t\t\td.fullscreenElement !== undefined ? \"fullscreenchange\" : \"\"\n\t};\n\tif(!result._requestFullscreen || !result._exitFullscreen || !result._fullscreenElement || !result._fullscreenChange) {\n\t\treturn null;\n\t} else {\n\t\treturn result;\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/csscolorparser.js":{"title":"$:/core/modules/utils/dom/csscolorparser.js","text":"// (c) Dean McNamee &lt;dean@gmail.com&gt;, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i &lt; 0 ? 0 : i &gt; 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f &lt; 0 ? 0 : f &gt; 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h &lt; 0) h += 1;\n  else if (h &gt; 1) h -= 1;\n\n  if (h * 6 &lt; 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 &lt; 1) return m2;\n  if (h * 3 &lt; 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv &gt;= 0 &amp;&amp; iv &lt;= 0xfff)) return null;  // Covers NaN.\n      return [((iv &amp; 0xf00) &gt;&gt; 4) | ((iv &amp; 0xf00) &gt;&gt; 8),\n              (iv &amp; 0xf0) | ((iv &amp; 0xf0) &gt;&gt; 4),\n              (iv &amp; 0xf) | ((iv &amp; 0xf) &lt;&lt; 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv &gt;= 0 &amp;&amp; iv &lt;= 0xffffff)) return null;  // Covers NaN.\n      return [(iv &amp; 0xff0000) &gt;&gt; 16,\n              (iv &amp; 0xff00) &gt;&gt; 8,\n              iv &amp; 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 &amp;&amp; ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l &lt;= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom.js":{"title":"$:/core/modules/utils/dom.js","text":"/*\\\ntitle: $:/core/modules/utils/dom.js\ntype: application/javascript\nmodule-type: utils\n\nVarious static DOM-related utility functions.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nDetermines whether element 'a' contains element 'b'\nCode thanks to John Resig, http://ejohn.org/blog/comparing-document-position/\n*/\nexports.domContains = function(a,b) {\n\treturn a.contains ?\n\t\ta !== b &amp;&amp; a.contains(b) :\n\t\t!!(a.compareDocumentPosition(b) &amp; 16);\n};\n\nexports.domMatchesSelector = function(node,selector) {\n\treturn node.matches ? node.matches(selector) : node.msMatchesSelector(selector);\n};\n\nexports.removeChildren = function(node) {\n\twhile(node.hasChildNodes()) {\n\t\tnode.removeChild(node.firstChild);\n\t}\n};\n\nexports.hasClass = function(el,className) {\n\treturn el &amp;&amp; el.hasAttribute &amp;&amp; el.hasAttribute(\"class\") &amp;&amp; el.getAttribute(\"class\").split(\" \").indexOf(className) !== -1;\n};\n\nexports.addClass = function(el,className) {\n\tvar c = (el.getAttribute(\"class\") || \"\").split(\" \");\n\tif(c.indexOf(className) === -1) {\n\t\tc.push(className);\n\t\tel.setAttribute(\"class\",c.join(\" \"));\n\t}\n};\n\nexports.removeClass = function(el,className) {\n\tvar c = (el.getAttribute(\"class\") || \"\").split(\" \"),\n\t\tp = c.indexOf(className);\n\tif(p !== -1) {\n\t\tc.splice(p,1);\n\t\tel.setAttribute(\"class\",c.join(\" \"));\n\t}\n};\n\nexports.toggleClass = function(el,className,status) {\n\tif(status === undefined) {\n\t\tstatus = !exports.hasClass(el,className);\n\t}\n\tif(status) {\n\t\texports.addClass(el,className);\n\t} else {\n\t\texports.removeClass(el,className);\n\t}\n};\n\n/*\nGet the first parent element that has scrollbars or use the body as fallback.\n*/\nexports.getScrollContainer = function(el) {\n\tvar doc = el.ownerDocument;\n\twhile(el.parentNode) {\n\t\tel = el.parentNode;\n\t\tif(el.scrollTop) {\n\t\t\treturn el;\n\t\t}\n\t}\n\treturn doc.body;\n};\n\n/*\nGet the scroll position of the viewport\nReturns:\n\t{\n\t\tx: horizontal scroll position in pixels,\n\t\ty: vertical scroll position in pixels\n\t}\n*/\nexports.getScrollPosition = function(srcWindow) {\n\tvar scrollWindow = srcWindow || window;\n\tif(\"scrollX\" in scrollWindow) {\n\t\treturn {x: scrollWindow.scrollX, y: scrollWindow.scrollY};\n\t} else {\n\t\treturn {x: scrollWindow.document.documentElement.scrollLeft, y: scrollWindow.document.documentElement.scrollTop};\n\t}\n};\n\n/*\nAdjust the height of a textarea to fit its content, preserving scroll position, and return the height\n*/\nexports.resizeTextAreaToFit = function(domNode,minHeight) {\n\t// Get the scroll container and register the current scroll position\n\tvar container = $tw.utils.getScrollContainer(domNode),\n\t\tscrollTop = container.scrollTop;\n    // Measure the specified minimum height\n\tdomNode.style.height = minHeight;\n\tvar measuredHeight = domNode.offsetHeight || parseInt(minHeight,10);\n\t// Set its height to auto so that it snaps to the correct height\n\tdomNode.style.height = \"auto\";\n\t// Calculate the revised height\n\tvar newHeight = Math.max(domNode.scrollHeight + domNode.offsetHeight - domNode.clientHeight,measuredHeight);\n\t// Only try to change the height if it has changed\n\tif(newHeight !== domNode.offsetHeight) {\n\t\tdomNode.style.height = newHeight + \"px\";\n\t\t// Make sure that the dimensions of the textarea are recalculated\n\t\t$tw.utils.forceLayout(domNode);\n\t\t// Set the container to the position we registered at the beginning\n\t\tcontainer.scrollTop = scrollTop;\n\t}\n\treturn newHeight;\n};\n\n/*\nGets the bounding rectangle of an element in absolute page coordinates\n*/\nexports.getBoundingPageRect = function(element) {\n\tvar scrollPos = $tw.utils.getScrollPosition(element.ownerDocument.defaultView),\n\t\tclientRect = element.getBoundingClientRect();\n\treturn {\n\t\tleft: clientRect.left + scrollPos.x,\n\t\twidth: clientRect.width,\n\t\tright: clientRect.right + scrollPos.x,\n\t\ttop: clientRect.top + scrollPos.y,\n\t\theight: clientRect.height,\n\t\tbottom: clientRect.bottom + scrollPos.y\n\t};\n};\n\n/*\nSaves a named password in the browser\n*/\nexports.savePassword = function(name,password) {\n\tvar done = false;\n\ttry {\n\t\twindow.localStorage.setItem(\"tw5-password-\" + name,password);\n\t\tdone = true;\n\t} catch(e) {\n\t}\n\tif(!done) {\n\t\t$tw.savedPasswords = $tw.savedPasswords || Object.create(null);\n\t\t$tw.savedPasswords[name] = password;\n\t}\n};\n\n/*\nRetrieve a named password from the browser\n*/\nexports.getPassword = function(name) {\n\tvar value;\n\ttry {\n\t\tvalue = window.localStorage.getItem(\"tw5-password-\" + name);\n\t} catch(e) {\n\t}\n\tif(value !== undefined) {\n\t\treturn value;\n\t} else {\n\t\treturn ($tw.savedPasswords || Object.create(null))[name] || \"\";\n\t}\n};\n\n/*\nForce layout of a dom node and its descendents\n*/\nexports.forceLayout = function(element) {\n\tvar dummy = element.offsetWidth;\n};\n\n/*\nPulse an element for debugging purposes\n*/\nexports.pulseElement = function(element) {\n\t// Event handler to remove the class at the end\n\telement.addEventListener($tw.browser.animationEnd,function handler(event) {\n\t\telement.removeEventListener($tw.browser.animationEnd,handler,false);\n\t\t$tw.utils.removeClass(element,\"pulse\");\n\t},false);\n\t// Apply the pulse class\n\t$tw.utils.removeClass(element,\"pulse\");\n\t$tw.utils.forceLayout(element);\n\t$tw.utils.addClass(element,\"pulse\");\n};\n\n/*\nAttach specified event handlers to a DOM node\ndomNode: where to attach the event handlers\nevents: array of event handlers to be added (see below)\nEach entry in the events array is an object with these properties:\nhandlerFunction: optional event handler function\nhandlerObject: optional event handler object\nhandlerMethod: optionally specifies object handler method name (defaults to `handleEvent`)\n*/\nexports.addEventListeners = function(domNode,events) {\n\t$tw.utils.each(events,function(eventInfo) {\n\t\tvar handler;\n\t\tif(eventInfo.handlerFunction) {\n\t\t\thandler = eventInfo.handlerFunction;\n\t\t} else if(eventInfo.handlerObject) {\n\t\t\tif(eventInfo.handlerMethod) {\n\t\t\t\thandler = function(event) {\n\t\t\t\t\teventInfo.handlerObject[eventInfo.handlerMethod].call(eventInfo.handlerObject,event);\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\thandler = eventInfo.handlerObject;\n\t\t\t}\n\t\t}\n\t\tdomNode.addEventListener(eventInfo.name,handler,false);\n\t});\n};\n\n/*\nGet the computed styles applied to an element as an array of strings of individual CSS properties\n*/\nexports.getComputedStyles = function(domNode) {\n\tvar textAreaStyles = window.getComputedStyle(domNode,null),\n\t\tstyleDefs = [],\n\t\tname;\n\tfor(var t=0; t&lt;textAreaStyles.length; t++) {\n\t\tname = textAreaStyles[t];\n\t\tstyleDefs.push(name + \": \" + textAreaStyles.getPropertyValue(name) + \";\");\n\t}\n\treturn styleDefs;\n};\n\n/*\nApply a set of styles passed as an array of strings of individual CSS properties\n*/\nexports.setStyles = function(domNode,styleDefs) {\n\tdomNode.style.cssText = styleDefs.join(\"\");\n};\n\n/*\nCopy the computed styles from a source element to a destination element\n*/\nexports.copyStyles = function(srcDomNode,dstDomNode) {\n\t$tw.utils.setStyles(dstDomNode,$tw.utils.getComputedStyles(srcDomNode));\n};\n\n/*\nCopy plain text to the clipboard on browsers that support it\n*/\nexports.copyToClipboard = function(text,options) {\n\toptions = options || {};\n\tvar textArea = document.createElement(\"textarea\");\n\ttextArea.style.position = \"fixed\";\n\ttextArea.style.top = 0;\n\ttextArea.style.left = 0;\n\ttextArea.style.fontSize = \"12pt\";\n\ttextArea.style.width = \"2em\";\n\ttextArea.style.height = \"2em\";\n\ttextArea.style.padding = 0;\n\ttextArea.style.border = \"none\";\n\ttextArea.style.outline = \"none\";\n\ttextArea.style.boxShadow = \"none\";\n\ttextArea.style.background = \"transparent\";\n\ttextArea.value = text;\n\tdocument.body.appendChild(textArea);\n\ttextArea.select();\n\ttextArea.setSelectionRange(0,text.length);\n\tvar succeeded = false;\n\ttry {\n\t\tsucceeded = document.execCommand(\"copy\");\n\t} catch (err) {\n\t}\n\tif(!options.doNotNotify) {\n\t\t$tw.notifier.display(succeeded ? \"$:/language/Notifications/CopiedToClipboard/Succeeded\" : \"$:/language/Notifications/CopiedToClipboard/Failed\");\n\t}\n\tdocument.body.removeChild(textArea);\n};\n\nexports.getLocationPath = function() {\n\treturn window.location.toString().split(\"#\")[0];\n};\n\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/dragndrop.js":{"title":"$:/core/modules/utils/dom/dragndrop.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/dragndrop.js\ntype: application/javascript\nmodule-type: utils\n\nBrowser data transfer utilities, used with the clipboard and drag and drop\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nOptions:\n\ndomNode: dom node to make draggable\ndragImageType: \"pill\" or \"dom\"\ndragTiddlerFn: optional function to retrieve the title of tiddler to drag\ndragFilterFn: optional function to retreive the filter defining a list of tiddlers to drag\nwidget: widget to use as the contect for the filter\n*/\nexports.makeDraggable = function(options) {\n\tvar dragImageType = options.dragImageType || \"dom\",\n\t\tdragImage,\n\t\tdomNode = options.domNode;\n\t// Make the dom node draggable (not necessary for anchor tags)\n\tif((domNode.tagName || \"\").toLowerCase() !== \"a\") {\n\t\tdomNode.setAttribute(\"draggable\",\"true\");\n\t}\n\t// Add event handlers\n\t$tw.utils.addEventListeners(domNode,[\n\t\t{name: \"dragstart\", handlerFunction: function(event) {\n\t\t\tif(event.dataTransfer === undefined) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Collect the tiddlers being dragged\n\t\t\tvar dragTiddler = options.dragTiddlerFn &amp;&amp; options.dragTiddlerFn(),\n\t\t\t\tdragFilter = options.dragFilterFn &amp;&amp; options.dragFilterFn(),\n\t\t\t\ttitles = dragTiddler ? [dragTiddler] : [],\n\t\t\t    \tstartActions = options.startActions;\n\t\t\tif(dragFilter) {\n\t\t\t\ttitles.push.apply(titles,options.widget.wiki.filterTiddlers(dragFilter,options.widget));\n\t\t\t}\n\t\t\tvar titleString = $tw.utils.stringifyList(titles);\n\t\t\t// Check that we've something to drag\n\t\t\tif(titles.length &gt; 0 &amp;&amp; event.target === domNode) {\n\t\t\t\t// Mark the drag in progress\n\t\t\t\t$tw.dragInProgress = domNode;\n\t\t\t\t// Set the dragging class on the element being dragged\n\t\t\t\t$tw.utils.addClass(event.target,\"tc-dragging\");\n\t\t\t\t// Invoke drag-start actions if given\n\t\t\t\tif(startActions !== undefined) {\n\t\t\t\t\toptions.widget.invokeActionString(startActions,options.widget,event,{actionTiddler: titleString});\n\t\t\t\t}\n\t\t\t\t// Create the drag image elements\n\t\t\t\tdragImage = options.widget.document.createElement(\"div\");\n\t\t\t\tdragImage.className = \"tc-tiddler-dragger\";\n\t\t\t\tvar inner = options.widget.document.createElement(\"div\");\n\t\t\t\tinner.className = \"tc-tiddler-dragger-inner\";\n\t\t\t\tinner.appendChild(options.widget.document.createTextNode(\n\t\t\t\t\ttitles.length === 1 ? \n\t\t\t\t\t\ttitles[0] :\n\t\t\t\t\t\ttitles.length + \" tiddlers\"\n\t\t\t\t));\n\t\t\t\tdragImage.appendChild(inner);\n\t\t\t\toptions.widget.document.body.appendChild(dragImage);\n\t\t\t\t// Set the data transfer properties\n\t\t\t\tvar dataTransfer = event.dataTransfer;\n\t\t\t\t// Set up the image\n\t\t\t\tdataTransfer.effectAllowed = \"all\";\n\t\t\t\tif(dataTransfer.setDragImage) {\n\t\t\t\t\tif(dragImageType === \"pill\") {\n\t\t\t\t\t\tdataTransfer.setDragImage(dragImage.firstChild,-16,-16);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar r = domNode.getBoundingClientRect();\n\t\t\t\t\t\tdataTransfer.setDragImage(domNode,event.clientX-r.left,event.clientY-r.top);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Set up the data transfer\n\t\t\t\tif(dataTransfer.clearData) {\n\t\t\t\t\tdataTransfer.clearData();\n\t\t\t\t}\n\t\t\t\tvar jsonData = [];\n\t\t\t\tif(titles.length &gt; 1) {\n\t\t\t\t\ttitles.forEach(function(title) {\n\t\t\t\t\t\tjsonData.push(options.widget.wiki.getTiddlerAsJson(title));\n\t\t\t\t\t});\n\t\t\t\t\tjsonData = \"[\" + jsonData.join(\",\") + \"]\";\n\t\t\t\t} else {\n\t\t\t\t\tjsonData = options.widget.wiki.getTiddlerAsJson(titles[0]);\n\t\t\t\t}\n\t\t\t\t// IE doesn't like these content types\n\t\t\t\tif(!$tw.browser.isIE) {\n\t\t\t\t\tdataTransfer.setData(\"text/vnd.tiddler\",jsonData);\n\t\t\t\t\tdataTransfer.setData(\"text/plain\",titleString);\n\t\t\t\t\tdataTransfer.setData(\"text/x-moz-url\",\"data:text/vnd.tiddler,\" + encodeURIComponent(jsonData));\n\t\t\t\t}\n\t\t\t\tdataTransfer.setData(\"URL\",\"data:text/vnd.tiddler,\" + encodeURIComponent(jsonData));\n\t\t\t\tdataTransfer.setData(\"Text\",titleString);\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t\treturn false;\n\t\t}},\n\t\t{name: \"dragend\", handlerFunction: function(event) {\n\t\t\tif(event.target === domNode) {\n\t\t\t\t// Collect the tiddlers being dragged\n\t\t\t\tvar dragTiddler = options.dragTiddlerFn &amp;&amp; options.dragTiddlerFn(),\n\t\t\t\t\tdragFilter = options.dragFilterFn &amp;&amp; options.dragFilterFn(),\n\t\t\t\t\ttitles = dragTiddler ? [dragTiddler] : [],\n\t\t\t    \t\tendActions = options.endActions;\n\t\t\t\tif(dragFilter) {\n\t\t\t\t\ttitles.push.apply(titles,options.widget.wiki.filterTiddlers(dragFilter,options.widget));\n\t\t\t\t}\n\t\t\t\tvar titleString = $tw.utils.stringifyList(titles);\n\t\t\t\t$tw.dragInProgress = null;\n\t\t\t\t// Invoke drag-end actions if given\n\t\t\t\tif(endActions !== undefined) {\n\t\t\t\t\toptions.widget.invokeActionString(endActions,options.widget,event,{actionTiddler: titleString});\n\t\t\t\t}\n\t\t\t\t// Remove the dragging class on the element being dragged\n\t\t\t\t$tw.utils.removeClass(event.target,\"tc-dragging\");\n\t\t\t\t// Delete the drag image element\n\t\t\t\tif(dragImage) {\n\t\t\t\t\tdragImage.parentNode.removeChild(dragImage);\n\t\t\t\t\tdragImage = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}}\n\t]);\n};\n\nexports.importDataTransfer = function(dataTransfer,fallbackTitle,callback) {\n\t// Try each provided data type in turn\n\tif($tw.log.IMPORT) {\n\t\tconsole.log(\"Available data types:\");\n\t\tfor(var type=0; type&lt;dataTransfer.types.length; type++) {\n\t\t\tconsole.log(\"type\",dataTransfer.types[type],dataTransfer.getData(dataTransfer.types[type]))\n\t\t}\n\t}\n\tfor(var t=0; t&lt;importDataTypes.length; t++) {\n\t\tif(!$tw.browser.isIE || importDataTypes[t].IECompatible) {\n\t\t\t// Get the data\n\t\t\tvar dataType = importDataTypes[t];\n\t\t\t\tvar data = dataTransfer.getData(dataType.type);\n\t\t\t// Import the tiddlers in the data\n\t\t\tif(data !== \"\" &amp;&amp; data !== null) {\n\t\t\t\tif($tw.log.IMPORT) {\n\t\t\t\t\tconsole.log(\"Importing data type '\" + dataType.type + \"', data: '\" + data + \"'\")\n\t\t\t\t}\n\t\t\t\tvar tiddlerFields = dataType.toTiddlerFieldsArray(data,fallbackTitle);\n\t\t\t\tcallback(tiddlerFields);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar importDataTypes = [\n\t{type: \"text/vnd.tiddler\", IECompatible: false, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\treturn parseJSONTiddlers(data,fallbackTitle);\n\t}},\n\t{type: \"URL\", IECompatible: true, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\t// Check for tiddler data URI\n\t\tvar match = decodeURIComponent(data).match(/^data\\:text\\/vnd\\.tiddler,(.*)/i);\n\t\tif(match) {\n\t\t\treturn parseJSONTiddlers(match[1],fallbackTitle);\n\t\t} else {\n\t\t\treturn [{title: fallbackTitle, text: data}]; // As URL string\n\t\t}\n\t}},\n\t{type: \"text/x-moz-url\", IECompatible: false, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\t// Check for tiddler data URI\n\t\tvar match = decodeURIComponent(data).match(/^data\\:text\\/vnd\\.tiddler,(.*)/i);\n\t\tif(match) {\n\t\t\treturn parseJSONTiddlers(match[1],fallbackTitle);\n\t\t} else {\n\t\t\treturn [{title: fallbackTitle, text: data}]; // As URL string\n\t\t}\n\t}},\n\t{type: \"text/html\", IECompatible: false, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\treturn [{title: fallbackTitle, text: data}];\n\t}},\n\t{type: \"text/plain\", IECompatible: false, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\treturn [{title: fallbackTitle, text: data}];\n\t}},\n\t{type: \"Text\", IECompatible: true, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\treturn [{title: fallbackTitle, text: data}];\n\t}},\n\t{type: \"text/uri-list\", IECompatible: false, toTiddlerFieldsArray: function(data,fallbackTitle) {\n\t\treturn [{title: fallbackTitle, text: data}];\n\t}}\n];\n\nfunction parseJSONTiddlers(json,fallbackTitle) {\n\tvar data = JSON.parse(json);\n\tif(!$tw.utils.isArray(data)) {\n\t\tdata = [data];\n\t}\n\tdata.forEach(function(fields) {\n\t\tfields.title = fields.title || fallbackTitle;\n\t});\n\treturn data;\n};\n\nexports.dragEventContainsFiles = function(event) {\n\tif(event.dataTransfer.types) {\n\t\tfor(var i=0; i&lt;event.dataTransfer.types.length; i++) {\n\t\t\tif(event.dataTransfer.types[i] === \"Files\") {\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/http.js":{"title":"$:/core/modules/utils/dom/http.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/http.js\ntype: application/javascript\nmodule-type: utils\n\nBrowser HTTP support\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nA quick and dirty HTTP function; to be refactored later. Options are:\n\turl: URL to retrieve\n\theaders: hashmap of headers to send\n\ttype: GET, PUT, POST etc\n\tcallback: function invoked with (err,data,xhr)\n\treturnProp: string name of the property to return as first argument of callback\n*/\nexports.httpRequest = function(options) {\n\tvar type = options.type || \"GET\",\n\t\turl = options.url,\n\t\theaders = options.headers || {accept: \"application/json\"},\n\t\thasHeader = function(targetHeader) {\n\t\t\ttargetHeader = targetHeader.toLowerCase();\n\t\t\tvar result = false;\n\t\t\t$tw.utils.each(headers,function(header,headerTitle,object) {\n\t\t\t\tif(headerTitle.toLowerCase() === targetHeader) {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\t\treturnProp = options.returnProp || \"responseText\",\n\t\trequest = new XMLHttpRequest(),\n\t\tdata = \"\",\n\t\tf,results;\n\t// Massage the data hashmap into a string\n\tif(options.data) {\n\t\tif(typeof options.data === \"string\") { // Already a string\n\t\t\tdata = options.data;\n\t\t} else { // A hashmap of strings\n\t\t\tresults = [];\n\t\t\t$tw.utils.each(options.data,function(dataItem,dataItemTitle) {\n\t\t\t\tresults.push(dataItemTitle + \"=\" + encodeURIComponent(dataItem));\n\t\t\t});\n\t\t\tif(type === \"GET\" || type === \"HEAD\") {\n\t\t\t\turl += \"?\" + results.join(\"&amp;\");\n\t\t\t} else {\n\t\t\t\tdata = results.join(\"&amp;\");\n\t\t\t}\n\t\t}\n\t}\n\t// Set up the state change handler\n\trequest.onreadystatechange = function() {\n\t\tif(this.readyState === 4) {\n\t\t\tif(this.status === 200 || this.status === 201 || this.status === 204) {\n\t\t\t\t// Success!\n\t\t\t\toptions.callback(null,this[returnProp],this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t// Something went wrong\n\t\toptions.callback($tw.language.getString(\"Error/XMLHttpRequest\") + \": \" + this.status,null,this);\n\t\t}\n\t};\n\t// Make the request\n\trequest.open(type,url,true);\n\tif(headers) {\n\t\t$tw.utils.each(headers,function(header,headerTitle,object) {\n\t\t\trequest.setRequestHeader(headerTitle,header);\n\t\t});\n\t}\n\tif(data &amp;&amp; !hasHeader(\"Content-Type\")) {\n\t\trequest.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded; charset=UTF-8\");\n\t}\n\tif(!hasHeader(\"X-Requested-With\")) {\n\t\trequest.setRequestHeader(\"X-Requested-With\",\"TiddlyWiki\");\n\t}\n\ttry {\n\t\trequest.send(data);\n\t} catch(e) {\n\t\toptions.callback(e,null,this);\n\t}\n\treturn request;\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/keyboard.js":{"title":"$:/core/modules/utils/dom/keyboard.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/keyboard.js\ntype: application/javascript\nmodule-type: utils\n\nKeyboard utilities; now deprecated. Instead, use $tw.keyboardManager\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n[\"parseKeyDescriptor\",\"checkKeyDescriptor\"].forEach(function(method) {\n\texports[method] = function() {\n\t\tif($tw.keyboardManager) {\n\t\t\treturn $tw.keyboardManager[method].apply($tw.keyboardManager,Array.prototype.slice.call(arguments,0));\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t};\n});\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/modal.js":{"title":"$:/core/modules/utils/dom/modal.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/modal.js\ntype: application/javascript\nmodule-type: utils\n\nModal message mechanism\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\nvar navigator = require(\"$:/core/modules/widgets/navigator.js\");\n\nvar Modal = function(wiki) {\n\tthis.wiki = wiki;\n\tthis.modalCount = 0;\n};\n\n/*\nDisplay a modal dialogue\n\ttitle: Title of tiddler to display\n\toptions: see below\nOptions include:\n\tdownloadLink: Text of a big download link to include\n*/\nModal.prototype.display = function(title,options) {\n\toptions = options || {};\n\tthis.srcDocument = options.variables &amp;&amp; (options.variables.rootwindow === \"true\" ||\n\t\t\t\toptions.variables.rootwindow === \"yes\") ? document :\n\t\t\t\t(options.event &amp;&amp; options.event.event &amp;&amp; options.event.event.target ? options.event.event.target.ownerDocument : document);\n\tthis.srcWindow = this.srcDocument.defaultView;\n\tvar self = this,\n\t\trefreshHandler,\n\t\tduration = $tw.utils.getAnimationDuration(),\n\t\ttiddler = this.wiki.getTiddler(title);\n\t// Don't do anything if the tiddler doesn't exist\n\tif(!tiddler) {\n\t\treturn;\n\t}\n\t// Create the variables\n\tvar variables = $tw.utils.extend({\n\t\t\tcurrentTiddler: title,\n\t\t\t\"tv-story-list\": (options.event &amp;&amp; options.event.widget ? options.event.widget.getVariable(\"tv-story-list\") : \"\"),\n\t\t\t\"tv-history-list\": (options.event &amp;&amp; options.event.widget ? options.event.widget.getVariable(\"tv-history-list\") : \"\")\n\t\t},options.variables);\n\n\t// Create the wrapper divs\n\tvar wrapper = this.srcDocument.createElement(\"div\"),\n\t\tmodalBackdrop = this.srcDocument.createElement(\"div\"),\n\t\tmodalWrapper = this.srcDocument.createElement(\"div\"),\n\t\tmodalHeader = this.srcDocument.createElement(\"div\"),\n\t\theaderTitle = this.srcDocument.createElement(\"h3\"),\n\t\tmodalBody = this.srcDocument.createElement(\"div\"),\n\t\tmodalLink = this.srcDocument.createElement(\"a\"),\n\t\tmodalFooter = this.srcDocument.createElement(\"div\"),\n\t\tmodalFooterHelp = this.srcDocument.createElement(\"span\"),\n\t\tmodalFooterButtons = this.srcDocument.createElement(\"span\");\n\t// Up the modal count and adjust the body class\n\tthis.modalCount++;\n\tthis.adjustPageClass();\n\t// Add classes\n\t$tw.utils.addClass(wrapper,\"tc-modal-wrapper\");\n\tif(tiddler.fields &amp;&amp; tiddler.fields.class) {\n\t\t$tw.utils.addClass(wrapper,tiddler.fields.class);\n\t}\n\t$tw.utils.addClass(modalBackdrop,\"tc-modal-backdrop\");\n\t$tw.utils.addClass(modalWrapper,\"tc-modal\");\n\t$tw.utils.addClass(modalHeader,\"tc-modal-header\");\n\t$tw.utils.addClass(modalBody,\"tc-modal-body\");\n\t$tw.utils.addClass(modalFooter,\"tc-modal-footer\");\n\t// Join them together\n\twrapper.appendChild(modalBackdrop);\n\twrapper.appendChild(modalWrapper);\n\tmodalHeader.appendChild(headerTitle);\n\tmodalWrapper.appendChild(modalHeader);\n\tmodalWrapper.appendChild(modalBody);\n\tmodalFooter.appendChild(modalFooterHelp);\n\tmodalFooter.appendChild(modalFooterButtons);\n\tmodalWrapper.appendChild(modalFooter);\n\tvar navigatorTree = {\n\t\t\"type\": \"navigator\",\n\t\t\"attributes\": {\n\t\t\t\"story\": {\n\t\t\t\t\"name\": \"story\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"value\": variables[\"tv-story-list\"]\n\t\t\t},\n\t\t\t\"history\": {\n\t\t\t\t\"name\": \"history\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"value\": variables[\"tv-history-list\"]\n\t\t\t}\n\t\t},\n\t\t\"tag\": \"$navigator\",\n\t\t\"isBlock\": true,\n\t\t\"children\": []\n\t};\n\tvar navigatorWidgetNode = new navigator.navigator(navigatorTree, {\n\t\twiki: this.wiki,\n\t\tdocument : this.srcDocument,\n\t\tparentWidget: $tw.rootWidget\n\t});\n\tnavigatorWidgetNode.render(modalBody,null);\n\n\t// Render the title of the message\n\tvar headerWidgetNode = this.wiki.makeTranscludeWidget(title,{\n\t\tfield: \"subtitle\",\n\t\tmode: \"inline\",\n\t\tchildren: [{\n\t\t\ttype: \"text\",\n\t\t\tattributes: {\n\t\t\t\ttext: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tvalue: title\n\t\t}}}],\n\t\tparentWidget: navigatorWidgetNode,\n\t\tdocument: this.srcDocument,\n\t\tvariables: variables,\n\t\timportPageMacros: true\n\t});\n\theaderWidgetNode.render(headerTitle,null);\n\t// Render the body of the message\n\tvar bodyWidgetNode = this.wiki.makeTranscludeWidget(title,{\n\t\tparentWidget: navigatorWidgetNode,\n\t\tdocument: this.srcDocument,\n\t\tvariables: variables,\n\t\timportPageMacros: true\n\t});\n\n\tbodyWidgetNode.render(modalBody,null);\n\t// Setup the link if present\n\tif(options.downloadLink) {\n\t\tmodalLink.href = options.downloadLink;\n\t\tmodalLink.appendChild(this.srcDocument.createTextNode(\"Right-click to save changes\"));\n\t\tmodalBody.appendChild(modalLink);\n\t}\n\t// Render the footer of the message\n\tif(tiddler.fields &amp;&amp; tiddler.fields.help) {\n\t\tvar link = this.srcDocument.createElement(\"a\");\n\t\tlink.setAttribute(\"href\",tiddler.fields.help);\n\t\tlink.setAttribute(\"target\",\"_blank\");\n\t\tlink.setAttribute(\"rel\",\"noopener noreferrer\");\n\t\tlink.appendChild(this.srcDocument.createTextNode(\"Help\"));\n\t\tmodalFooterHelp.appendChild(link);\n\t\tmodalFooterHelp.style.float = \"left\";\n\t}\n\tvar footerWidgetNode = this.wiki.makeTranscludeWidget(title,{\n\t\tfield: \"footer\",\n\t\tmode: \"inline\",\n\t\tchildren: [{\n\t\t\ttype: \"button\",\n\t\t\tattributes: {\n\t\t\t\tmessage: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tvalue: \"tm-close-tiddler\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tchildren: [{\n\t\t\t\ttype: \"text\",\n\t\t\t\tattributes: {\n\t\t\t\t\ttext: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tvalue: $tw.language.getString(\"Buttons/Close/Caption\")\n\t\t\t}}}\n\t\t]}],\n\t\tparentWidget: navigatorWidgetNode,\n\t\tdocument: this.srcDocument,\n\t\tvariables: variables,\n\t\timportPageMacros: true\n\t});\n\tfooterWidgetNode.render(modalFooterButtons,null);\n\t// Set up the refresh handler\n\trefreshHandler = function(changes) {\n\t\theaderWidgetNode.refresh(changes,modalHeader,null);\n\t\tbodyWidgetNode.refresh(changes,modalBody,null);\n\t\tfooterWidgetNode.refresh(changes,modalFooterButtons,null);\n\t};\n\tthis.wiki.addEventListener(\"change\",refreshHandler);\n\t// Add the close event handler\n\tvar closeHandler = function(event) {\n\t\t// Remove our refresh handler\n\t\tself.wiki.removeEventListener(\"change\",refreshHandler);\n\t\t// Decrease the modal count and adjust the body class\n\t\tself.modalCount--;\n\t\tself.adjustPageClass();\n\t\t// Force layout and animate the modal message away\n\t\t$tw.utils.forceLayout(modalBackdrop);\n\t\t$tw.utils.forceLayout(modalWrapper);\n\t\t$tw.utils.setStyle(modalBackdrop,[\n\t\t\t{opacity: \"0\"}\n\t\t]);\n\t\t$tw.utils.setStyle(modalWrapper,[\n\t\t\t{transform: \"translateY(\" + self.srcWindow.innerHeight + \"px)\"}\n\t\t]);\n\t\t// Set up an event for the transition end\n\t\tself.srcWindow.setTimeout(function() {\n\t\t\tif(wrapper.parentNode) {\n\t\t\t\t// Remove the modal message from the DOM\n\t\t\t\tself.srcDocument.body.removeChild(wrapper);\n\t\t\t}\n\t\t},duration);\n\t\t// Don't let anyone else handle the tm-close-tiddler message\n\t\treturn false;\n\t};\n\theaderWidgetNode.addEventListener(\"tm-close-tiddler\",closeHandler,false);\n\tbodyWidgetNode.addEventListener(\"tm-close-tiddler\",closeHandler,false);\n\tfooterWidgetNode.addEventListener(\"tm-close-tiddler\",closeHandler,false);\n\t// Set the initial styles for the message\n\t$tw.utils.setStyle(modalBackdrop,[\n\t\t{opacity: \"0\"}\n\t]);\n\t$tw.utils.setStyle(modalWrapper,[\n\t\t{transformOrigin: \"0% 0%\"},\n\t\t{transform: \"translateY(\" + (-this.srcWindow.innerHeight) + \"px)\"}\n\t]);\n\t// Put the message into the document\n\tthis.srcDocument.body.appendChild(wrapper);\n\t// Set up animation for the styles\n\t$tw.utils.setStyle(modalBackdrop,[\n\t\t{transition: \"opacity \" + duration + \"ms ease-out\"}\n\t]);\n\t$tw.utils.setStyle(modalWrapper,[\n\t\t{transition: $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms ease-in-out\"}\n\t]);\n\t// Force layout\n\t$tw.utils.forceLayout(modalBackdrop);\n\t$tw.utils.forceLayout(modalWrapper);\n\t// Set final animated styles\n\t$tw.utils.setStyle(modalBackdrop,[\n\t\t{opacity: \"0.7\"}\n\t]);\n\t$tw.utils.setStyle(modalWrapper,[\n\t\t{transform: \"translateY(0px)\"}\n\t]);\n};\n\nModal.prototype.adjustPageClass = function() {\n\tvar windowContainer = $tw.pageContainer ? ($tw.pageContainer === this.srcDocument.body.firstChild ? $tw.pageContainer : this.srcDocument.body.firstChild) : null;\n\tif(windowContainer) {\n\t\t$tw.utils.toggleClass(windowContainer,\"tc-modal-displayed\",this.modalCount &gt; 0);\n\t}\n\t$tw.utils.toggleClass(this.srcDocument.body,\"tc-modal-prevent-scroll\",this.modalCount &gt; 0);\n};\n\nexports.Modal = Modal;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/notifier.js":{"title":"$:/core/modules/utils/dom/notifier.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/notifier.js\ntype: application/javascript\nmodule-type: utils\n\nNotifier mechanism\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nvar Notifier = function(wiki) {\n\tthis.wiki = wiki;\n};\n\n/*\nDisplay a notification\n\ttitle: Title of tiddler containing the notification text\n\toptions: see below\nOptions include:\n*/\nNotifier.prototype.display = function(title,options) {\n\toptions = options || {};\n\t// Create the wrapper divs\n\tvar self = this,\n\t\tnotification = document.createElement(\"div\"),\n\t\ttiddler = this.wiki.getTiddler(title),\n\t\tduration = $tw.utils.getAnimationDuration(),\n\t\trefreshHandler;\n\t// Don't do anything if the tiddler doesn't exist\n\tif(!tiddler) {\n\t\treturn;\n\t}\n\t// Add classes\n\t$tw.utils.addClass(notification,\"tc-notification\");\n\t// Create the variables\n\tvar variables = $tw.utils.extend({currentTiddler: title},options.variables);\n\t// Render the body of the notification\n\tvar widgetNode = this.wiki.makeTranscludeWidget(title,{\n\t\tparentWidget: $tw.rootWidget,\n\t\tdocument: document,\n\t\tvariables: variables,\n\t\timportPageMacros: true});\n\twidgetNode.render(notification,null);\n\trefreshHandler = function(changes) {\n\t\twidgetNode.refresh(changes,notification,null);\n\t};\n\tthis.wiki.addEventListener(\"change\",refreshHandler);\n\t// Set the initial styles for the notification\n\t$tw.utils.setStyle(notification,[\n\t\t{opacity: \"0\"},\n\t\t{transformOrigin: \"0% 0%\"},\n\t\t{transform: \"translateY(\" + (-window.innerHeight) + \"px)\"},\n\t\t{transition: \"opacity \" + duration + \"ms ease-out, \" + $tw.utils.roundTripPropertyName(\"transform\") + \" \" + duration + \"ms ease-in-out\"}\n\t]);\n\t// Add the notification to the DOM\n\tdocument.body.appendChild(notification);\n\t// Force layout\n\t$tw.utils.forceLayout(notification);\n\t// Set final animated styles\n\t$tw.utils.setStyle(notification,[\n\t\t{opacity: \"1.0\"},\n\t\t{transform: \"translateY(0px)\"}\n\t]);\n\t// Set a timer to remove the notification\n\twindow.setTimeout(function() {\n\t\t// Remove our change event handler\n\t\tself.wiki.removeEventListener(\"change\",refreshHandler);\n\t\t// Force layout and animate the notification away\n\t\t$tw.utils.forceLayout(notification);\n\t\t$tw.utils.setStyle(notification,[\n\t\t\t{opacity: \"0.0\"},\n\t\t\t{transform: \"translateX(\" + (notification.offsetWidth) + \"px)\"}\n\t\t]);\n\t\t// Remove the modal message from the DOM once the transition ends\n\t\tsetTimeout(function() {\n\t\t\tif(notification.parentNode) {\n\t\t\t\tdocument.body.removeChild(notification);\n\t\t\t}\n\t\t},duration);\n\t},$tw.config.preferences.notificationDuration);\n};\n\nexports.Notifier = Notifier;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/popup.js":{"title":"$:/core/modules/utils/dom/popup.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/popup.js\ntype: application/javascript\nmodule-type: utils\n\nModule that creates a $tw.utils.Popup object prototype that manages popups in the browser\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nCreates a Popup object with these options:\n\trootElement: the DOM element to which the popup zapper should be attached\n*/\nvar Popup = function(options) {\n\toptions = options || {};\n\tthis.rootElement = options.rootElement || document.documentElement;\n\tthis.popups = []; // Array of {title:,wiki:,domNode:} objects\n};\n\n/*\nTrigger a popup open or closed. Parameters are in a hashmap:\n\ttitle: title of the tiddler where the popup details are stored\n\tdomNode: dom node to which the popup will be positioned (one of domNode or domNodeRect is required)\n\tdomNodeRect: rectangle to which the popup will be positioned\n\twiki: wiki\n\tforce: if specified, forces the popup state to true or false (instead of toggling it)\n\tfloating: if true, skips registering the popup, meaning that it will need manually clearing\n*/\nPopup.prototype.triggerPopup = function(options) {\n\t// Check if this popup is already active\n\tvar index = this.findPopup(options.title);\n\t// Compute the new state\n\tvar state = index === -1;\n\tif(options.force !== undefined) {\n\t\tstate = options.force;\n\t}\n\t// Show or cancel the popup according to the new state\n\tif(state) {\n\t\tthis.show(options);\n\t} else {\n\t\tthis.cancel(index);\n\t}\n};\n\nPopup.prototype.findPopup = function(title) {\n\tvar index = -1;\n\tfor(var t=0; t&lt;this.popups.length; t++) {\n\t\tif(this.popups[t].title === title) {\n\t\t\tindex = t;\n\t\t}\n\t}\n\treturn index;\n};\n\nPopup.prototype.handleEvent = function(event) {\n\tif(event.type === \"click\") {\n\t\t// Find out what was clicked on\n\t\tvar info = this.popupInfo(event.target),\n\t\t\tcancelLevel = info.popupLevel - 1;\n\t\t// Don't remove the level that was clicked on if we clicked on a handle\n\t\tif(info.isHandle) {\n\t\t\tcancelLevel++;\n\t\t}\n\t\t// Cancel\n\t\tthis.cancel(cancelLevel);\n\t}\n};\n\n/*\nFind the popup level containing a DOM node. Returns:\npopupLevel: count of the number of nested popups containing the specified element\nisHandle: true if the specified element is within a popup handle\n*/\nPopup.prototype.popupInfo = function(domNode) {\n\tvar isHandle = false,\n\t\tpopupCount = 0,\n\t\tnode = domNode;\n\t// First check ancestors to see if we're within a popup handle\n\twhile(node) {\n\t\tif($tw.utils.hasClass(node,\"tc-popup-handle\")) {\n\t\t\tisHandle = true;\n\t\t\tpopupCount++;\n\t\t}\n\t\tif($tw.utils.hasClass(node,\"tc-popup-keep\")) {\n\t\t\tisHandle = true;\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\t// Then count the number of ancestor popups\n\tnode = domNode;\n\twhile(node) {\n\t\tif($tw.utils.hasClass(node,\"tc-popup\")) {\n\t\t\tpopupCount++;\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\tvar info = {\n\t\tpopupLevel: popupCount,\n\t\tisHandle: isHandle\n\t};\n\treturn info;\n};\n\n/*\nDisplay a popup by adding it to the stack\n*/\nPopup.prototype.show = function(options) {\n\t// Find out what was clicked on\n\tvar info = this.popupInfo(options.domNode);\n\t// Cancel any higher level popups\n\tthis.cancel(info.popupLevel);\n\n\t// Store the popup details if not already there\n\tif(!options.floating &amp;&amp; this.findPopup(options.title) === -1) {\n\t\tthis.popups.push({\n\t\t\ttitle: options.title,\n\t\t\twiki: options.wiki,\n\t\t\tdomNode: options.domNode,\n\t\t\tnoStateReference: options.noStateReference\n\t\t});\n\t}\n\t// Set the state tiddler\n\tvar rect;\n\tif(options.domNodeRect) {\n\t\trect = options.domNodeRect;\n\t} else {\n\t\trect = {\n\t\t\tleft: options.domNode.offsetLeft,\n\t\t\ttop: options.domNode.offsetTop,\n\t\t\twidth: options.domNode.offsetWidth,\n\t\t\theight: options.domNode.offsetHeight\n\t\t};\n\t}\n\tvar popupRect = \"(\" + rect.left + \",\" + rect.top + \",\" + \n\t\t\t\trect.width + \",\" + rect.height + \")\";\n\tif(options.noStateReference) {\n\t\toptions.wiki.setText(options.title,\"text\",undefined,popupRect);\n\t} else {\n\t\toptions.wiki.setTextReference(options.title,popupRect);\n\t}\n\t// Add the click handler if we have any popups\n\tif(this.popups.length &gt; 0) {\n\t\tthis.rootElement.addEventListener(\"click\",this,true);\n\t}\n};\n\n/*\nCancel all popups at or above a specified level or DOM node\nlevel: popup level to cancel (0 cancels all popups)\n*/\nPopup.prototype.cancel = function(level) {\n\tvar numPopups = this.popups.length;\n\tlevel = Math.max(0,Math.min(level,numPopups));\n\tfor(var t=level; t&lt;numPopups; t++) {\n\t\tvar popup = this.popups.pop();\n\t\tif(popup.title) {\n\t\t\tif(popup.noStateReference) {\n\t\t\t\tpopup.wiki.deleteTiddler(popup.title);\n\t\t\t} else {\n\t\t\t\tpopup.wiki.deleteTiddler($tw.utils.parseTextReference(popup.title).title);\n        \t\t}\n\t\t}\n\t}\n\tif(this.popups.length === 0) {\n\t\tthis.rootElement.removeEventListener(\"click\",this,false);\n\t}\n};\n\n/*\nReturns true if the specified title and text identifies an active popup\n*/\nPopup.prototype.readPopupState = function(text) {\n\tvar popupLocationRegExp = /^\\((-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+)\\)$/;\n\treturn popupLocationRegExp.test(text);\n};\n\nexports.Popup = Popup;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/dom/scroller.js":{"title":"$:/core/modules/utils/dom/scroller.js","text":"/*\\\ntitle: $:/core/modules/utils/dom/scroller.js\ntype: application/javascript\nmodule-type: utils\n\nModule that creates a $tw.utils.Scroller object prototype that manages scrolling in the browser\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nEvent handler for when the `tm-scroll` event hits the document body\n*/\nvar PageScroller = function() {\n\tthis.idRequestFrame = null;\n\tthis.requestAnimationFrame = window.requestAnimationFrame ||\n\t\twindow.webkitRequestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame ||\n\t\tfunction(callback) {\n\t\t\treturn window.setTimeout(callback, 1000/60);\n\t\t};\n\tthis.cancelAnimationFrame = window.cancelAnimationFrame ||\n\t\twindow.webkitCancelAnimationFrame ||\n\t\twindow.webkitCancelRequestAnimationFrame ||\n\t\twindow.mozCancelAnimationFrame ||\n\t\twindow.mozCancelRequestAnimationFrame ||\n\t\tfunction(id) {\n\t\t\twindow.clearTimeout(id);\n\t\t};\n};\n\nPageScroller.prototype.isScrolling = function() {\n\treturn this.idRequestFrame !== null;\n}\n\nPageScroller.prototype.cancelScroll = function(srcWindow) {\n\tif(this.idRequestFrame) {\n\t\tthis.cancelAnimationFrame.call(srcWindow,this.idRequestFrame);\n\t\tthis.idRequestFrame = null;\n\t}\n};\n\n/*\nHandle an event\n*/\nPageScroller.prototype.handleEvent = function(event) {\n\tif(event.type === \"tm-scroll\") {\n\t\tif(event.paramObject &amp;&amp; event.paramObject.selector) {\n\t\t\tthis.scrollSelectorIntoView(null,event.paramObject.selector);\n\t\t} else {\n\t\t\tthis.scrollIntoView(event.target);\n\t\t}\n\t\treturn false; // Event was handled\n\t}\n\treturn true;\n};\n\n/*\nHandle a scroll event hitting the page document\n*/\nPageScroller.prototype.scrollIntoView = function(element,callback) {\n\tvar self = this,\n\t\tduration = $tw.utils.getAnimationDuration(),\n\t    srcWindow = element ? element.ownerDocument.defaultView : window;\n\t// Now get ready to scroll the body\n\tthis.cancelScroll(srcWindow);\n\tthis.startTime = Date.now();\n\t// Get the height of any position:fixed toolbars\n\tvar toolbar = srcWindow.document.querySelector(\".tc-adjust-top-of-scroll\"),\n\t\toffset = 0;\n\tif(toolbar) {\n\t\toffset = toolbar.offsetHeight;\n\t}\n\t// Get the client bounds of the element and adjust by the scroll position\n\tvar getBounds = function() {\n\t\t\tvar clientBounds = typeof callback === 'function' ? callback() : element.getBoundingClientRect(),\n\t\t\t\tscrollPosition = $tw.utils.getScrollPosition(srcWindow);\n\t\t\treturn {\n\t\t\t\tleft: clientBounds.left + scrollPosition.x,\n\t\t\t\ttop: clientBounds.top + scrollPosition.y - offset,\n\t\t\t\twidth: clientBounds.width,\n\t\t\t\theight: clientBounds.height\n\t\t\t};\n\t\t},\n\t\t// We'll consider the horizontal and vertical scroll directions separately via this function\n\t\t// targetPos/targetSize - position and size of the target element\n\t\t// currentPos/currentSize - position and size of the current scroll viewport\n\t\t// returns: new position of the scroll viewport\n\t\tgetEndPos = function(targetPos,targetSize,currentPos,currentSize) {\n\t\t\tvar newPos = targetPos;\n\t\t\t// If we are scrolling within 50 pixels of the top/left then snap to zero\n\t\t\tif(newPos &lt; 50) {\n\t\t\t\tnewPos = 0;\n\t\t\t}\n\t\t\treturn newPos;\n\t\t},\n\t\tdrawFrame = function drawFrame() {\n\t\t\tvar t;\n\t\t\tif(duration &lt;= 0) {\n\t\t\t\tt = 1;\n\t\t\t} else {\n\t\t\t\tt = ((Date.now()) - self.startTime) / duration;\n\t\t\t}\n\t\t\tif(t &gt;= 1) {\n\t\t\t\tself.cancelScroll(srcWindow);\n\t\t\t\tt = 1;\n\t\t\t}\n\t\t\tt = $tw.utils.slowInSlowOut(t);\n\t\t\tvar scrollPosition = $tw.utils.getScrollPosition(srcWindow),\n\t\t\t\tbounds = getBounds(),\n\t\t\t\tendX = getEndPos(bounds.left,bounds.width,scrollPosition.x,srcWindow.innerWidth),\n\t\t\t\tendY = getEndPos(bounds.top,bounds.height,scrollPosition.y,srcWindow.innerHeight);\n\t\t\tsrcWindow.scrollTo(scrollPosition.x + (endX - scrollPosition.x) * t,scrollPosition.y + (endY - scrollPosition.y) * t);\n\t\t\tif(t &lt; 1) {\n\t\t\t\tself.idRequestFrame = self.requestAnimationFrame.call(srcWindow,drawFrame);\n\t\t\t}\n\t\t};\n\tdrawFrame();\n};\n\nPageScroller.prototype.scrollSelectorIntoView = function(baseElement,selector,callback) {\n\tbaseElement = baseElement || document.body;\n\tvar element = baseElement.querySelector(selector);\n\tif(element) {\n\t\tthis.scrollIntoView(element,callback);\n\t}\n};\n\nexports.PageScroller = PageScroller;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/edition-info.js":{"title":"$:/core/modules/utils/edition-info.js","text":"/*\\\ntitle: $:/core/modules/utils/edition-info.js\ntype: application/javascript\nmodule-type: utils-node\n\nInformation about the available editions\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar fs = require(\"fs\"),\n\tpath = require(\"path\");\n\nvar editionInfo;\n\nexports.getEditionInfo = function() {\n\tif(!editionInfo) {\n\t\t// Enumerate the edition paths\n\t\tvar editionPaths = $tw.getLibraryItemSearchPaths($tw.config.editionsPath,$tw.config.editionsEnvVar);\n\t\teditionInfo = {};\n\t\tfor(var editionIndex=0; editionIndex&lt;editionPaths.length; editionIndex++) {\n\t\t\tvar editionPath = editionPaths[editionIndex];\n\t\t\t// Enumerate the folders\n\t\t\tvar entries = fs.readdirSync(editionPath);\n\t\t\tfor(var entryIndex=0; entryIndex&lt;entries.length; entryIndex++) {\n\t\t\t\tvar entry = entries[entryIndex];\n\t\t\t\t// Check if directories have a valid tiddlywiki.info\n\t\t\t\tif(!editionInfo[entry] &amp;&amp; $tw.utils.isDirectory(path.resolve(editionPath,entry))) {\n\t\t\t\t\tvar info;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tinfo = JSON.parse(fs.readFileSync(path.resolve(editionPath,entry,\"tiddlywiki.info\"),\"utf8\"));\n\t\t\t\t\t} catch(ex) {\n\t\t\t\t\t}\n\t\t\t\t\tif(info) {\n\t\t\t\t\t\teditionInfo[entry] = info;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn editionInfo;\n};\n\n})();\n","type":"application/javascript","module-type":"utils-node"},"$:/core/modules/utils/escapecss.js":{"title":"$:/core/modules/utils/escapecss.js","text":"/*\\\ntitle: $:/core/modules/utils/escapecss.js\ntype: application/javascript\nmodule-type: utils\n\nProvides CSS.escape() functionality.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false, window: false */\n\"use strict\";\n\nexports.escapeCSS = (function() {\n\t// use browser's native CSS.escape() function if available\n\tif ($tw.browser &amp;&amp; window.CSS &amp;&amp; window.CSS.escape) {\n\t\treturn window.CSS.escape;\n\t}\n\n\t// otherwise, a utility method is provided\n\t// see also https://drafts.csswg.org/cssom/#serialize-an-identifier\n\n\t/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\treturn function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index &lt; length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit &gt;= 0x0001 &amp;&amp; codeUnit &lt;= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 &amp;&amp; codeUnit &gt;= 0x0030 &amp;&amp; codeUnit &lt;= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &amp;&amp;\n\t\t\t\t\tcodeUnit &gt;= 0x0030 &amp;&amp; codeUnit &lt;= 0x0039 &amp;&amp;\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &amp;&amp;\n\t\t\t\tlength == 1 &amp;&amp;\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit &gt;= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit &gt;= 0x0030 &amp;&amp; codeUnit &lt;= 0x0039 ||\n\t\t\t\tcodeUnit &gt;= 0x0041 &amp;&amp; codeUnit &lt;= 0x005A ||\n\t\t\t\tcodeUnit &gt;= 0x0061 &amp;&amp; codeUnit &lt;= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n})();\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/fakedom.js":{"title":"$:/core/modules/utils/fakedom.js","text":"/*\\\ntitle: $:/core/modules/utils/fakedom.js\ntype: application/javascript\nmodule-type: global\n\nA barebones implementation of DOM interfaces needed by the rendering mechanism.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Sequence number used to enable us to track objects for testing\nvar sequenceNumber = null;\n\nvar bumpSequenceNumber = function(object) {\n\tif(sequenceNumber !== null) {\n\t\tobject.sequenceNumber = sequenceNumber++;\n\t}\n};\n\nvar TW_Node = function (){\n\tthrow TypeError(\"Illegal constructor\");\n};\n\nObject.defineProperty(TW_Node.prototype, 'ELEMENT_NODE', {\n\tget: function() {\n\t\treturn 1;\n\t}\n});\n\nObject.defineProperty(TW_Node.prototype, 'TEXT_NODE', {\n\tget: function() {\n\t\treturn 3;\n\t}\n});\n\nvar TW_TextNode = function(text) {\n\tbumpSequenceNumber(this);\n\tthis.textContent = text + \"\";\n};\n\nTW_TextNode.prototype = Object.create(TW_Node.prototype);\n\nObject.defineProperty(TW_TextNode.prototype, \"nodeType\", {\n\tget: function() {\n\t\treturn this.TEXT_NODE;\n\t}\n});\n\nObject.defineProperty(TW_TextNode.prototype, \"formattedTextContent\", {\n\tget: function() {\n\t\treturn this.textContent.replace(/(\\r?\\n)/g,\"\");\n\t}\n});\n\nvar TW_Element = function(tag,namespace) {\n\tbumpSequenceNumber(this);\n\tthis.isTiddlyWikiFakeDom = true;\n\tthis.tag = tag;\n\tthis.attributes = {};\n\tthis.isRaw = false;\n\tthis.children = [];\n\tthis._style = {};\n\tthis.namespaceURI = namespace || \"http://www.w3.org/1999/xhtml\";\n};\n\nTW_Element.prototype = Object.create(TW_Node.prototype);\n\nObject.defineProperty(TW_Element.prototype, \"style\", {\n\tget: function() {\n\t\treturn this._style;\n\t},\n\tset: function(str) {\n\t\tvar self = this;\n\t\tstr = str || \"\";\n\t\t$tw.utils.each(str.split(\";\"),function(declaration) {\n\t\t\tvar parts = declaration.split(\":\"),\n\t\t\t\tname = $tw.utils.trim(parts[0]),\n\t\t\t\tvalue = $tw.utils.trim(parts[1]);\n\t\t\tif(name &amp;&amp; value) {\n\t\t\t\tself._style[$tw.utils.convertStyleNameToPropertyName(name)] = value;\n\t\t\t}\n\t\t});\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"nodeType\", {\n\tget: function() {\n\t\treturn this.ELEMENT_NODE;\n\t}\n});\n\nTW_Element.prototype.getAttribute = function(name) {\n\tif(this.isRaw) {\n\t\tthrow \"Cannot getAttribute on a raw TW_Element\";\n\t}\n\treturn this.attributes[name];\n};\n\nTW_Element.prototype.setAttribute = function(name,value) {\n\tif(this.isRaw) {\n\t\tthrow \"Cannot setAttribute on a raw TW_Element\";\n\t}\n\tthis.attributes[name] = value + \"\";\n};\n\nTW_Element.prototype.setAttributeNS = function(namespace,name,value) {\n\tthis.setAttribute(name,value);\n};\n\nTW_Element.prototype.removeAttribute = function(name) {\n\tif(this.isRaw) {\n\t\tthrow \"Cannot removeAttribute on a raw TW_Element\";\n\t}\n\tif($tw.utils.hop(this.attributes,name)) {\n\t\tdelete this.attributes[name];\n\t}\n};\n\nTW_Element.prototype.appendChild = function(node) {\n\tthis.children.push(node);\n\tnode.parentNode = this;\n};\n\nTW_Element.prototype.insertBefore = function(node,nextSibling) {\n\tif(nextSibling) {\n\t\tvar p = this.children.indexOf(nextSibling);\n\t\tif(p !== -1) {\n\t\t\tthis.children.splice(p,0,node);\n\t\t\tnode.parentNode = this;\n\t\t} else {\n\t\t\tthis.appendChild(node);\n\t\t}\n\t} else {\n\t\tthis.appendChild(node);\n\t}\n};\n\nTW_Element.prototype.removeChild = function(node) {\n\tvar p = this.children.indexOf(node);\n\tif(p !== -1) {\n\t\tthis.children.splice(p,1);\n\t}\n};\n\nTW_Element.prototype.hasChildNodes = function() {\n\treturn !!this.children.length;\n};\n\nObject.defineProperty(TW_Element.prototype, \"childNodes\", {\n\tget: function() {\n\t\treturn this.children;\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"firstChild\", {\n\tget: function() {\n\t\treturn this.children[0];\n\t}\n});\n\nTW_Element.prototype.addEventListener = function(type,listener,useCapture) {\n\t// Do nothing\n};\n\nObject.defineProperty(TW_Element.prototype, \"tagName\", {\n\tget: function() {\n\t\treturn this.tag || \"\";\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"className\", {\n\tget: function() {\n\t\treturn this.attributes[\"class\"] || \"\";\n\t},\n\tset: function(value) {\n\t\tthis.attributes[\"class\"] = value + \"\";\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"value\", {\n\tget: function() {\n\t\treturn this.attributes.value || \"\";\n\t},\n\tset: function(value) {\n\t\tthis.attributes.value = value + \"\";\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"outerHTML\", {\n\tget: function() {\n\t\tvar output = [],attr,a,v;\n\t\toutput.push(\"&lt;\",this.tag);\n\t\tif(this.attributes) {\n\t\t\tattr = [];\n\t\t\tfor(a in this.attributes) {\n\t\t\t\tattr.push(a);\n\t\t\t}\n\t\t\tattr.sort();\n\t\t\tfor(a=0; a&lt;attr.length; a++) {\n\t\t\t\tv = this.attributes[attr[a]];\n\t\t\t\tif(v !== undefined) {\n\t\t\t\t\toutput.push(\" \",attr[a],\"=\\\"\",$tw.utils.htmlEncode(v),\"\\\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this._style) {\n\t\t\tvar style = [];\n\t\t\tfor(var s in this._style) {\n\t\t\t\tstyle.push($tw.utils.convertPropertyNameToStyleName(s) + \":\" + this._style[s] + \";\");\n\t\t\t}\n\t\t\tif(style.length &gt; 0) {\n\t\t\t\toutput.push(\" style=\\\"\",style.join(\"\"),\"\\\"\");\n\t\t\t}\n\t\t}\n\t\toutput.push(\"&gt;\");\n\t\tif($tw.config.htmlVoidElements.indexOf(this.tag) === -1) {\n\t\t\toutput.push(this.innerHTML);\n\t\t\toutput.push(\"&lt;/\",this.tag,\"&gt;\");\n\t\t}\n\t\treturn output.join(\"\");\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"innerHTML\", {\n\tget: function() {\n\t\tif(this.isRaw) {\n\t\t\treturn this.rawHTML;\n\t\t} else {\n\t\t\tvar b = [];\n\t\t\t$tw.utils.each(this.children,function(node) {\n\t\t\t\tif(node instanceof TW_Element) {\n\t\t\t\t\tb.push(node.outerHTML);\n\t\t\t\t} else if(node instanceof TW_TextNode) {\n\t\t\t\t\tb.push($tw.utils.htmlEncode(node.textContent));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn b.join(\"\");\n\t\t}\n\t},\n\tset: function(value) {\n\t\tthis.isRaw = true;\n\t\tthis.rawHTML = value;\n\t\tthis.rawTextContent = null;\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"textInnerHTML\", {\n\tset: function(value) {\n\t\tif(this.isRaw) {\n\t\t\tthis.rawTextContent = value;\n\t\t} else {\n\t\t\tthrow \"Cannot set textInnerHTML of a non-raw TW_Element\";\n\t\t}\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"textContent\", {\n\tget: function() {\n\t\tif(this.isRaw) {\n\t\t\tif(this.rawTextContent === null) {\n\t\t\t\treturn \"\";\n\t\t\t} else {\n\t\t\t\treturn this.rawTextContent;\n\t\t\t}\n\t\t} else {\n\t\t\tvar b = [];\n\t\t\t$tw.utils.each(this.children,function(node) {\n\t\t\t\tb.push(node.textContent);\n\t\t\t});\n\t\t\treturn b.join(\"\");\n\t\t}\n\t},\n\tset: function(value) {\n\t\tthis.children = [new TW_TextNode(value)];\n\t}\n});\n\nObject.defineProperty(TW_Element.prototype, \"formattedTextContent\", {\n\tget: function() {\n\t\tif(this.isRaw) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\tvar b = [],\n\t\t\t\tisBlock = $tw.config.htmlBlockElements.indexOf(this.tag) !== -1;\n\t\t\tif(isBlock) {\n\t\t\t\tb.push(\"\\n\");\n\t\t\t}\n\t\t\tif(this.tag === \"li\") {\n\t\t\t\tb.push(\"* \");\n\t\t\t}\n\t\t\t$tw.utils.each(this.children,function(node) {\n\t\t\t\tb.push(node.formattedTextContent);\n\t\t\t});\n\t\t\tif(isBlock) {\n\t\t\t\tb.push(\"\\n\");\n\t\t\t}\n\t\t\treturn b.join(\"\");\n\t\t}\n\t}\n});\n\nvar document = {\n\tsetSequenceNumber: function(value) {\n\t\tsequenceNumber = value;\n\t},\n\tcreateElementNS: function(namespace,tag) {\n\t\treturn new TW_Element(tag,namespace);\n\t},\n\tcreateElement: function(tag) {\n\t\treturn new TW_Element(tag);\n\t},\n\tcreateTextNode: function(text) {\n\t\treturn new TW_TextNode(text);\n\t},\n\tcompatMode: \"CSS1Compat\", // For KaTeX to know that we're not a browser in quirks mode\n\tisTiddlyWikiFakeDom: true\n};\n\nexports.fakeDocument = document;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/utils/filesystem.js":{"title":"$:/core/modules/utils/filesystem.js","text":"/*\\\ntitle: $:/core/modules/utils/filesystem.js\ntype: application/javascript\nmodule-type: utils-node\n\nFile system utilities\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar fs = require(\"fs\"),\n\tpath = require(\"path\");\n\n/*\nReturn the subdirectories of a path\n*/\nexports.getSubdirectories = function(dirPath) {\n\tif(!$tw.utils.isDirectory(dirPath)) {\n\t\treturn null;\n\t}\n\tvar subdirs = [];\n\t$tw.utils.each(fs.readdirSync(dirPath),function(item) {\n\t\tif($tw.utils.isDirectory(path.resolve(dirPath,item))) {\n\t\t\tsubdirs.push(item);\n\t\t}\n\t});\n\treturn subdirs;\n}\n\n/*\nRecursively (and synchronously) copy a directory and all its content\n*/\nexports.copyDirectory = function(srcPath,dstPath) {\n\t// Remove any trailing path separators\n\tsrcPath = path.resolve($tw.utils.removeTrailingSeparator(srcPath));\n\tdstPath = path.resolve($tw.utils.removeTrailingSeparator(dstPath));\n\t// Check that neither director is within the other\n\tif(srcPath.substring(0,dstPath.length) === dstPath || dstPath.substring(0,srcPath.length) === srcPath) {\n\t\treturn \"Cannot copy nested directories\";\n\t}\n\t// Create the destination directory\n\tvar err = $tw.utils.createDirectory(dstPath);\n\tif(err) {\n\t\treturn err;\n\t}\n\t// Function to copy a folder full of files\n\tvar copy = function(srcPath,dstPath) {\n\t\tvar srcStats = fs.lstatSync(srcPath),\n\t\t\tdstExists = fs.existsSync(dstPath);\n\t\tif(srcStats.isFile()) {\n\t\t\t$tw.utils.copyFile(srcPath,dstPath);\n\t\t} else if(srcStats.isDirectory()) {\n\t\t\tvar items = fs.readdirSync(srcPath);\n\t\t\tfor(var t=0; t&lt;items.length; t++) {\n\t\t\t\tvar item = items[t],\n\t\t\t\t\terr = copy(srcPath + path.sep + item,dstPath + path.sep + item);\n\t\t\t\tif(err) {\n\t\t\t\t\treturn err;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tcopy(srcPath,dstPath);\n\treturn null;\n};\n\n/*\nCopy a file\n*/\nvar FILE_BUFFER_LENGTH = 64 * 1024,\n\tfileBuffer;\n\nexports.copyFile = function(srcPath,dstPath) {\n\t// Create buffer if required\n\tif(!fileBuffer) {\n\t\tfileBuffer = Buffer.alloc(FILE_BUFFER_LENGTH);\n\t}\n\t// Create any directories in the destination\n\t$tw.utils.createDirectory(path.dirname(dstPath));\n\t// Copy the file\n\tvar srcFile = fs.openSync(srcPath,\"r\"),\n\t\tdstFile = fs.openSync(dstPath,\"w\"),\n\t\tbytesRead = 1,\n\t\tpos = 0;\n\twhile (bytesRead &gt; 0) {\n\t\tbytesRead = fs.readSync(srcFile,fileBuffer,0,FILE_BUFFER_LENGTH,pos);\n\t\tfs.writeSync(dstFile,fileBuffer,0,bytesRead);\n\t\tpos += bytesRead;\n\t}\n\tfs.closeSync(srcFile);\n\tfs.closeSync(dstFile);\n\treturn null;\n};\n\n/*\nRemove trailing path separator\n*/\nexports.removeTrailingSeparator = function(dirPath) {\n\tvar len = dirPath.length;\n\tif(dirPath.charAt(len-1) === path.sep) {\n\t\tdirPath = dirPath.substr(0,len-1);\n\t}\n\treturn dirPath;\n};\n\n/*\nRecursively create a directory\n*/\nexports.createDirectory = function(dirPath) {\n\tif(dirPath.substr(dirPath.length-1,1) !== path.sep) {\n\t\tdirPath = dirPath + path.sep;\n\t}\n\tvar pos = 1;\n\tpos = dirPath.indexOf(path.sep,pos);\n\twhile(pos !== -1) {\n\t\tvar subDirPath = dirPath.substr(0,pos);\n\t\tif(!$tw.utils.isDirectory(subDirPath)) {\n\t\t\ttry {\n\t\t\t\tfs.mkdirSync(subDirPath);\n\t\t\t} catch(e) {\n\t\t\t\treturn \"Error creating directory '\" + subDirPath + \"'\";\n\t\t\t}\n\t\t}\n\t\tpos = dirPath.indexOf(path.sep,pos + 1);\n\t}\n\treturn null;\n};\n\n/*\nRecursively create directories needed to contain a specified file\n*/\nexports.createFileDirectories = function(filePath) {\n\treturn $tw.utils.createDirectory(path.dirname(filePath));\n};\n\n/*\nRecursively delete a directory\n*/\nexports.deleteDirectory = function(dirPath) {\n\tif(fs.existsSync(dirPath)) {\n\t\tvar entries = fs.readdirSync(dirPath);\n\t\tfor(var entryIndex=0; entryIndex&lt;entries.length; entryIndex++) {\n\t\t\tvar currPath = dirPath + path.sep + entries[entryIndex];\n\t\t\tif(fs.lstatSync(currPath).isDirectory()) {\n\t\t\t\t$tw.utils.deleteDirectory(currPath);\n\t\t\t} else {\n\t\t\t\tfs.unlinkSync(currPath);\n\t\t\t}\n\t\t}\n\tfs.rmdirSync(dirPath);\n\t}\n\treturn null;\n};\n\n/*\nCheck if a path identifies a directory\n*/\nexports.isDirectory = function(dirPath) {\n\treturn fs.existsSync(dirPath) &amp;&amp; fs.statSync(dirPath).isDirectory();\n};\n\n/*\nCheck if a path identifies a directory that is empty\n*/\nexports.isDirectoryEmpty = function(dirPath) {\n\tif(!$tw.utils.isDirectory(dirPath)) {\n\t\treturn false;\n\t}\n\tvar files = fs.readdirSync(dirPath),\n\t\tempty = true;\n\t$tw.utils.each(files,function(file,index) {\n\t\tif(file.charAt(0) !== \".\") {\n\t\t\tempty = false;\n\t\t}\n\t});\n\treturn empty;\n};\n\n/*\nRecursively delete a tree of empty directories\n*/\nexports.deleteEmptyDirs = function(dirpath,callback) {\n\tvar self = this;\n\tfs.readdir(dirpath,function(err,files) {\n\t\tif(err) {\n\t\t\treturn callback(err);\n\t\t}\n\t\tif(files.length &gt; 0) {\n\t\t\treturn callback(null);\n\t\t}\n\t\tfs.rmdir(dirpath,function(err) {\n\t\t\tif(err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tself.deleteEmptyDirs(path.dirname(dirpath),callback);\n\t\t});\n\t});\n};\n\n/*\nCreate a fileInfo object for saving a tiddler:\n\tfilepath: the absolute path to the file containing the tiddler\n\ttype: the type of the tiddler file on disk (NOT the type of the tiddler)\n\thasMetaFile: true if the file also has a companion .meta file\n\tisEditableFile: true if the tiddler was loaded via non-standard options &amp; marked editable\nOptions include:\n\tdirectory: absolute path of root directory to which we are saving\n\tpathFilters: optional array of filters to be used to generate the base path\n\textFilters: optional array of filters to be used to generate the base path\n\twiki: optional wiki for evaluating the pathFilters,\n\tfileInfo: an existing fileInfo to check against\n*/\nexports.generateTiddlerFileInfo = function(tiddler,options) {\n\tvar fileInfo = {}, metaExt;\n\t// Propagate the isEditableFile flag\n\tif(options.fileInfo &amp;&amp; !!options.fileInfo.isEditableFile) {\n\t\tfileInfo.isEditableFile = true;\n\t\tfileInfo.originalpath = options.fileInfo.originalpath;\n\t}\n\t// Check if the tiddler has any unsafe fields that can't be expressed in a .tid or .meta file: containing control characters, or leading/trailing whitespace\n\tvar hasUnsafeFields = false;\n\t$tw.utils.each(tiddler.getFieldStrings(),function(value,fieldName) {\n\t\tif(fieldName !== \"text\") {\n\t\t\thasUnsafeFields = hasUnsafeFields || /[\\x00-\\x1F]/mg.test(value);\n\t\t\thasUnsafeFields = hasUnsafeFields || ($tw.utils.trim(value) !== value);\n\t\t}\n\t\thasUnsafeFields = hasUnsafeFields || /:/mg.test(fieldName);\n\t});\n\t// Check for field values \n\tif(hasUnsafeFields) {\n\t\t// Save as a JSON file\n\t\tfileInfo.type = \"application/json\";\n\t\tfileInfo.hasMetaFile = false;\n\t} else {\n\t\t// Save as a .tid or a text/binary file plus a .meta file\n\t\tvar tiddlerType = tiddler.fields.type || \"text/vnd.tiddlywiki\";\n\t\tif(tiddlerType === \"text/vnd.tiddlywiki\") {\n\t\t\t// Save as a .tid file\n\t\t\tfileInfo.type = \"application/x-tiddler\";\n\t\t\tfileInfo.hasMetaFile = false;\n\t\t} else {\n\t\t\t// Save as a text/binary file and a .meta file\n\t\t\tfileInfo.type = tiddlerType;\n\t\t\tfileInfo.hasMetaFile = true;\n\t\t}\n\t\tif(options.extFilters) {\n\t\t\t// Check for extension overrides\n\t\t\tmetaExt = $tw.utils.generateTiddlerExtension(tiddler.fields.title,{\n\t\t\t\textFilters: options.extFilters,\n\t\t\t\twiki: options.wiki\n\t\t\t});\n\t\t\tif(metaExt) {\n\t\t\t\tif(metaExt === \".tid\") {\n\t\t\t\t\t// Overriding to the .tid extension needs special handling\n\t\t\t\t\tfileInfo.type = \"application/x-tiddler\";\n\t\t\t\t\tfileInfo.hasMetaFile = false;\n\t\t\t\t} else if (metaExt === \".json\") {\n\t\t\t\t\t// Overriding to the .json extension needs special handling\n\t\t\t\t\tfileInfo.type = \"application/json\";\n\t\t\t\t\tfileInfo.hasMetaFile = false;\n\t\t\t\t} else {\n\t\t\t\t\t//If the new type matches a known extention, use that MIME type's encoding\n\t\t\t\t\tvar extInfo = $tw.utils.getFileExtensionInfo(metaExt);\n\t\t\t\t\tfileInfo.type = extInfo ? extInfo.type : null;\n\t\t\t\t\tfileInfo.encoding = $tw.utils.getTypeEncoding(metaExt);\n\t\t\t\t\tfileInfo.hasMetaFile = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Take the file extension from the tiddler content type or metaExt\n\tvar contentTypeInfo = $tw.config.contentTypeInfo[fileInfo.type] || {extension: \"\"};\n\t// Generate the filepath\n\tfileInfo.filepath = $tw.utils.generateTiddlerFilepath(tiddler.fields.title,{\n\t\textension: metaExt || contentTypeInfo.extension,\n\t\tdirectory: options.directory,\n\t\tpathFilters: options.pathFilters,\n\t\twiki: options.wiki,\n\t\tfileInfo: options.fileInfo\n\t});\n\treturn fileInfo;\n};\n\n/*\nGenerate the file extension for saving a tiddler\nOptions include:\n\textFilters: optional array of filters to be used to generate the extention\n\twiki: optional wiki for evaluating the extFilters\n*/\nexports.generateTiddlerExtension = function(title,options) {\n\tvar extension;\n\t// Check if any of the extFilters applies\n\tif(options.extFilters &amp;&amp; options.wiki) { \n\t\t$tw.utils.each(options.extFilters,function(filter) {\n\t\t\tif(!extension) {\n\t\t\t\tvar source = options.wiki.makeTiddlerIterator([title]),\n\t\t\t\t\tresult = options.wiki.filterTiddlers(filter,null,source);\n\t\t\t\tif(result.length &gt; 0) {\n\t\t\t\t\textension = result[0];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn extension;\n};\n\n/*\nGenerate the filepath for saving a tiddler\nOptions include:\n\textension: file extension to be added the finished filepath\n\tdirectory: absolute path of root directory to which we are saving\n\tpathFilters: optional array of filters to be used to generate the base path\n\twiki: optional wiki for evaluating the pathFilters\n\tfileInfo: an existing fileInfo object to check against\n*/\nexports.generateTiddlerFilepath = function(title,options) {\n\tvar directory = options.directory || \"\",\n\t\textension = options.extension || \"\",\n\t\toriginalpath = (options.fileInfo &amp;&amp; options.fileInfo.originalpath) ? options.fileInfo.originalpath : \"\",\n\t\tfilepath;\n\t// Check if any of the pathFilters applies\n\tif(options.pathFilters &amp;&amp; options.wiki) {\n\t\t$tw.utils.each(options.pathFilters,function(filter) {\n\t\t\tif(!filepath) {\n\t\t\t\tvar source = options.wiki.makeTiddlerIterator([title]),\n\t\t\t\t\tresult = options.wiki.filterTiddlers(filter,null,source);\n\t\t\t\tif(result.length &gt; 0) {\n\t\t\t\t\tfilepath = result[0];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tif(!filepath &amp;&amp; !!originalpath) {\n\t\t//Use the originalpath without the extension\n\t\tvar ext = path.extname(originalpath);\n\t\tfilepath = originalpath.substring(0,originalpath.length - ext.length);\n\t} else if(!filepath) {\n\t\tfilepath = title;\n\t\t// Remove any forward or backward slashes so we don't create directories\n\t\tfilepath = filepath.replace(/\\/|\\\\/g,\"_\");\n\t}\n\t// Replace any Windows control codes\n\tfilepath = filepath.replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i,\"_$1_\");\n\t// Replace any leading spaces with the same number of underscores\n\tfilepath = filepath.replace(/^ +/,function (u) { return u.replace(/ /g, \"_\")});\n\t//If the path does not start with \".\" or \"..\" &amp;&amp; a path seperator, then\n\tif(!/^\\.{1,2}[/\\\\]/g.test(filepath)) {\n\t\t// Don't let the filename start with any dots because such files are invisible on *nix\n\t\tfilepath = filepath.replace(/^\\.+/g,function (u) { return u.replace(/\\./g, \"_\")});\n\t}\n\t// Replace any Unicode control codes\n\tfilepath = filepath.replace(/[\\x00-\\x1f\\x80-\\x9f]/g,\"_\");\n\t// Replace any characters that can't be used in cross-platform filenames\n\tfilepath = $tw.utils.transliterate(filepath.replace(/&lt;|&gt;|~|\\:|\\\"|\\||\\?|\\*|\\^/g,\"_\"));\n\t// Replace any dots or spaces at the end of the extension with the same number of underscores\n\textension = extension.replace(/[\\. ]+$/, function (u) { return u.replace(/[\\. ]/g, \"_\")});\n\t// Truncate the extension if it is too long\n\tif(extension.length &gt; 32) {\n\t\textension = extension.substr(0,32);\n\t}\n\t// If the filepath already ends in the extension then remove it\n\tif(filepath.substring(filepath.length - extension.length) === extension) {\n\t\tfilepath = filepath.substring(0,filepath.length - extension.length);\n\t}\n\t// Truncate the filename if it is too long\n\tif(filepath.length &gt; 200) {\n\t\tfilepath = filepath.substr(0,200);\n\t}\n\t// If the resulting filename is blank (eg because the title is just punctuation)\n\tif(!filepath || /^_+$/g.test(filepath)) {\n\t\t// ...then just use the character codes of the title\n\t\tfilepath = \"\";\n\t\t$tw.utils.each(title.split(\"\"),function(char) {\n\t\t\tif(filepath) {\n\t\t\t\tfilepath += \"-\";\n\t\t\t}\n\t\t\tfilepath += char.charCodeAt(0).toString();\n\t\t});\n\t}\n\t// Add a uniquifier if the file already exists\n\tvar fullPath, oldPath = (options.fileInfo) ? options.fileInfo.filepath : undefined,\n\t\tcount = 0;\n\tdo {\n\t\tfullPath = path.resolve(directory,filepath + (count ? \"_\" + count : \"\") + extension);\n\t\tif(oldPath &amp;&amp; oldPath == fullPath) {\n\t\t\tbreak;\n\t\t}\n\t\tcount++;\n\t} while(fs.existsSync(fullPath));\n\t// If the last write failed with an error, or if path does not start with:\n\t//\tthe resolved options.directory, the resolved wikiPath directory, the wikiTiddlersPath directory, \n\t//\tor the 'originalpath' directory, then encodeURIComponent() and resolve to tiddler directory.\n\tvar writePath = $tw.hooks.invokeHook(\"th-make-tiddler-path\",fullPath,fullPath),\n\t\tencode = (options.fileInfo || {writeError: false}).writeError == true;\n\tif(!encode) {\n\t\tencode = !(writePath.indexOf($tw.boot.wikiTiddlersPath) == 0 ||\n\t\t\twritePath.indexOf(path.resolve(directory)) == 0 ||\n\t\t\twritePath.indexOf(path.resolve($tw.boot.wikiPath)) == 0 ||\n\t\t\twritePath.indexOf(path.resolve($tw.boot.wikiTiddlersPath,originalpath)) == 0 );\n\t\t}\n\tif(encode) {\n\t\twritePath = path.resolve(directory,encodeURIComponent(fullPath));\n\t}\n\t// Return the full path to the file\n\treturn writePath;\n};\n\n/*\nSave a tiddler to a file described by the fileInfo:\n\tfilepath: the absolute path to the file containing the tiddler\n\ttype: the type of the tiddler file (NOT the type of the tiddler)\n\thasMetaFile: true if the file also has a companion .meta file\n*/\nexports.saveTiddlerToFile = function(tiddler,fileInfo,callback) {\n\t$tw.utils.createDirectory(path.dirname(fileInfo.filepath));\n\tif(fileInfo.hasMetaFile) {\n\t\t// Save the tiddler as a separate body and meta file\n\t\tvar typeInfo = $tw.config.contentTypeInfo[tiddler.fields.type || \"text/plain\"] || {encoding: \"utf8\"};\n\t\tfs.writeFile(fileInfo.filepath,tiddler.fields.text || \"\",typeInfo.encoding,function(err) {\n\t\t\tif(err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tfs.writeFile(fileInfo.filepath + \".meta\",tiddler.getFieldStringBlock({exclude: [\"text\",\"bag\"]}),\"utf8\",function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\treturn callback(null,fileInfo);\n\t\t\t});\n\t\t});\n\t} else {\n\t\t// Save the tiddler as a self contained templated file\n\t\tif(fileInfo.type === \"application/x-tiddler\") {\n\t\t\tfs.writeFile(fileInfo.filepath,tiddler.getFieldStringBlock({exclude: [\"text\",\"bag\"]}) + (!!tiddler.fields.text ? \"\\n\\n\" + tiddler.fields.text : \"\"),\"utf8\",function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\treturn callback(null,fileInfo);\n\t\t\t});\n\t\t} else {\n\t\t\tfs.writeFile(fileInfo.filepath,JSON.stringify([tiddler.getFieldStrings({exclude: [\"bag\"]})],null,$tw.config.preferences.jsonSpaces),\"utf8\",function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\treturn callback(null,fileInfo);\n\t\t\t});\n\t\t}\n\t}\n};\n\n/*\nSave a tiddler to a file described by the fileInfo:\n\tfilepath: the absolute path to the file containing the tiddler\n\ttype: the type of the tiddler file (NOT the type of the tiddler)\n\thasMetaFile: true if the file also has a companion .meta file\n*/\nexports.saveTiddlerToFileSync = function(tiddler,fileInfo) {\n\t$tw.utils.createDirectory(path.dirname(fileInfo.filepath));\n\tif(fileInfo.hasMetaFile) {\n\t\t// Save the tiddler as a separate body and meta file\n\t\tvar typeInfo = $tw.config.contentTypeInfo[tiddler.fields.type || \"text/plain\"] || {encoding: \"utf8\"};\n\t\tfs.writeFileSync(fileInfo.filepath,tiddler.fields.text || \"\",typeInfo.encoding);\n\t\tfs.writeFileSync(fileInfo.filepath + \".meta\",tiddler.getFieldStringBlock({exclude: [\"text\",\"bag\"]}),\"utf8\");\n\t} else {\n\t\t// Save the tiddler as a self contained templated file\n\t\tif(fileInfo.type === \"application/x-tiddler\") {\n\t\t\tfs.writeFileSync(fileInfo.filepath,tiddler.getFieldStringBlock({exclude: [\"text\",\"bag\"]}) + (!!tiddler.fields.text ? \"\\n\\n\" + tiddler.fields.text : \"\"),\"utf8\");\n\t\t} else {\n\t\t\tfs.writeFileSync(fileInfo.filepath,JSON.stringify([tiddler.getFieldStrings({exclude: [\"bag\"]})],null,$tw.config.preferences.jsonSpaces),\"utf8\");\n\t\t}\n\t}\n\treturn fileInfo;\n};\n\n/*\nDelete a file described by the fileInfo if it exits\n*/\nexports.deleteTiddlerFile = function(fileInfo,callback) {\n\t//Only attempt to delete files that exist on disk\n\tif(!fileInfo.filepath || !fs.existsSync(fileInfo.filepath)) {\n\t\t//For some reason, the tiddler is only in memory or we can't modify the file at this path\n\t\t$tw.syncer.displayError(\"Server deleteTiddlerFile task failed for filepath: \"+fileInfo.filepath);\n\t\treturn callback(null,fileInfo);\n\t}\n\t// Delete the file\n\tfs.unlink(fileInfo.filepath,function(err) {\n\t\tif(err) {\n\t\t\treturn callback(err);\n\t\t}\n\t\t// Delete the metafile if present\n\t\tif(fileInfo.hasMetaFile &amp;&amp; fs.existsSync(fileInfo.filepath + \".meta\")) {\n\t\t\tfs.unlink(fileInfo.filepath + \".meta\",function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\treturn $tw.utils.deleteEmptyDirs(path.dirname(fileInfo.filepath),function(err) {\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\treturn callback(null,fileInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\treturn $tw.utils.deleteEmptyDirs(path.dirname(fileInfo.filepath),function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\treturn callback(null,fileInfo);\n\t\t\t});\n\t\t}\n\t});\n};\n\n/*\nCleanup old files on disk, by comparing the options values:\n\tadaptorInfo from $tw.syncer.tiddlerInfo\n\tbootInfo from $tw.boot.files\n*/\nexports.cleanupTiddlerFiles = function(options,callback) {\n\tvar adaptorInfo = options.adaptorInfo || {},\n\tbootInfo = options.bootInfo || {},\n\ttitle = options.title || \"undefined\";\n\tif(adaptorInfo.filepath &amp;&amp; bootInfo.filepath &amp;&amp; adaptorInfo.filepath !== bootInfo.filepath) {\n\t\t$tw.utils.deleteTiddlerFile(adaptorInfo,function(err) {\n\t\t\tif(err) {\n\t\t\t\tif ((err.code == \"EPERM\" || err.code == \"EACCES\") &amp;&amp; err.syscall == \"unlink\") {\n\t\t\t\t\t// Error deleting the previous file on disk, should fail gracefully\n\t\t\t\t\t$tw.syncer.displayError(\"Server desynchronized. Error cleaning up previous file for tiddler: \\\"\"+title+\"\\\"\",err);\n\t\t\t\t\treturn callback(null,bootInfo);\n\t\t\t\t} else {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn callback(null,bootInfo);\n\t\t});\n\t} else {\n\t\treturn callback(null,bootInfo);\n\t}\n};\n\n})();\n","type":"application/javascript","module-type":"utils-node"},"$:/core/modules/utils/linkedlist.js":{"title":"$:/core/modules/utils/linkedlist.js","text":"/*\\\nmodule-type: utils\ntitle: $:/core/modules/utils/linkedlist.js\ntype: application/javascript\n\nThis is a doubly-linked indexed list intended for manipulation, particularly\npushTop, which it does with significantly better performance than an array.\n\n\\*/\n(function(){\n\nfunction LinkedList() {\n\tthis.clear();\n};\n\nLinkedList.prototype.clear = function() {\n\t// LinkedList performs the duty of both the head and tail node\n\tthis.next = Object.create(null);\n\tthis.prev = Object.create(null);\n\tthis.first = undefined;\n\tthis.last = undefined;\n\tthis.length = 0;\n};\n\nLinkedList.prototype.remove = function(value) {\n\tif($tw.utils.isArray(value)) {\n\t\tfor(var t=0; t&lt;value.length; t++) {\n\t\t\t_assertString(value[t]);\n\t\t}\n\t\tfor(var t=0; t&lt;value.length; t++) {\n\t\t\t_removeOne(this,value[t]);\n\t\t}\n\t} else {\n\t\t_assertString(value);\n\t\t_removeOne(this,value);\n\t}\n};\n\n/*\nPush behaves like array.push and accepts multiple string arguments. But it also\naccepts a single array argument too, to be consistent with its other methods.\n*/\nLinkedList.prototype.push = function(/* values */) {\n\tvar values = arguments;\n\tif($tw.utils.isArray(values[0])) {\n\t\tvalues = values[0];\n\t}\n\tfor(var i = 0; i &lt; values.length; i++) {\n\t\t_assertString(values[i]);\n\t}\n\tfor(var i = 0; i &lt; values.length; i++) {\n\t\t_linkToEnd(this,values[i]);\n\t}\n\treturn this.length;\n};\n\nLinkedList.prototype.pushTop = function(value) {\n\tif($tw.utils.isArray(value)) {\n\t\tfor (var t=0; t&lt;value.length; t++) {\n\t\t\t_assertString(value[t]);\n\t\t}\n\t\tfor(var t=0; t&lt;value.length; t++) {\n\t\t\t_removeOne(this,value[t]);\n\t\t}\n\t\tfor(var t=0; t&lt;value.length; t++) {\n\t\t\t_linkToEnd(this,value[t]);\n\t\t}\n\t} else {\n\t\t_assertString(value);\n\t\t_removeOne(this,value);\n\t\t_linkToEnd(this,value);\n\t}\n};\n\nLinkedList.prototype.each = function(callback) {\n\tvar visits = Object.create(null),\n\t\tvalue = this.first;\n\twhile(value !== undefined) {\n\t\tcallback(value);\n\t\tvar next = this.next[value];\n\t\tif(typeof next === \"object\") {\n\t\t\tvar i = visits[value] || 0;\n\t\t\tvisits[value] = i+1;\n\t\t\tvalue = next[i];\n\t\t} else {\n\t\t\tvalue = next;\n\t\t}\n\t}\n};\n\nLinkedList.prototype.toArray = function() {\n\tvar output = new Array(this.length),\n\t\tindex = 0;\n\tthis.each(function(value) { output[index++] = value; });\n\treturn output;\n};\n\nfunction _removeOne(list,value) {\n\tvar prevEntry = list.prev[value],\n\t\tnextEntry = list.next[value],\n\t\tprev = prevEntry,\n\t\tnext = nextEntry;\n\tif(typeof nextEntry === \"object\") {\n\t\tnext = nextEntry[0];\n\t\tprev = prevEntry[0];\n\t}\n\t// Relink preceding element.\n\tif(list.first === value) {\n\t\tlist.first = next\n\t} else if(prev !== undefined) {\n\t\tif(typeof list.next[prev] === \"object\") {\n\t\t\tif(next === undefined) {\n\t\t\t\t// Must have been last, and 'i' would be last element.\n\t\t\t\tlist.next[prev].pop();\n\t\t\t} else {\n\t\t\t\tvar i = list.next[prev].indexOf(value);\n\t\t\t\tlist.next[prev][i] = next;\n\t\t\t}\n\t\t} else {\n\t\t\tlist.next[prev] = next;\n\t\t}\n\t} else {\n\t\treturn;\n\t}\n\t// Now relink following element\n\t// Check \"next !== undefined\" rather than \"list.last === value\" because\n\t// we need to know if the FIRST value is the last in the list, not the last.\n\tif(next !== undefined) {\n\t\tif(typeof list.prev[next] === \"object\") {\n\t\t\tif(prev === undefined) {\n\t\t\t\t// Must have been first, and 'i' would be 0.\n\t\t\t\tlist.prev[next].shift();\n\t\t\t} else {\n\t\t\t\tvar i = list.prev[next].indexOf(value);\n\t\t\t\tlist.prev[next][i] = prev;\n\t\t\t}\n\t\t} else {\n\t\t\tlist.prev[next] = prev;\n\t\t}\n\t} else {\n\t\tlist.last = prev;\n\t}\n\t// Delink actual value. If it uses arrays, just remove first entries.\n\tif(typeof nextEntry === \"object\") {\n\t\tnextEntry.shift();\n\t\tprevEntry.shift();\n\t} else {\n\t\tlist.next[value] = undefined;\n\t\tlist.prev[value] = undefined;\n\t}\n\tlist.length -= 1;\n};\n\n// Sticks the given node onto the end of the list.\nfunction _linkToEnd(list,value) {\n\tif(list.first === undefined) {\n\t\tlist.first = value;\n\t} else {\n\t\t// Does it already exists?\n\t\tif(list.first === value || list.prev[value] !== undefined) {\n\t\t\tif(typeof list.next[value] === \"string\") {\n\t\t\t\tlist.next[value] = [list.next[value]];\n\t\t\t\tlist.prev[value] = [list.prev[value]];\n\t\t\t} else if(typeof list.next[value] === \"undefined\") {\n\t\t\t\t// list.next[value] must be undefined.\n\t\t\t\t// Special case. List already has 1 value. It's at the end.\n\t\t\t\tlist.next[value] = [];\n\t\t\t\tlist.prev[value] = [list.prev[value]];\n\t\t\t}\n\t\t\tlist.prev[value].push(list.last);\n\t\t\t// We do NOT append a new value onto \"next\" list. Iteration will\n\t\t\t// figure out it must point to End-of-List on its own.\n\t\t} else {\n\t\t\tlist.prev[value] = list.last;\n\t\t}\n\t\t// Make the old last point to this new one.\n\t\tif(typeof list.next[list.last] === \"object\") {\n\t\t\tlist.next[list.last].push(value);\n\t\t} else {\n\t\t\tlist.next[list.last] = value;\n\t\t}\n\t}\n\tlist.last = value;\n\tlist.length += 1;\n};\n\nfunction _assertString(value) {\n\tif(typeof value !== \"string\") {\n\t\tthrow \"Linked List only accepts string values, not \" + value;\n\t}\n};\n\nexports.LinkedList = LinkedList;\n\n})();\n","module-type":"utils","type":"application/javascript"},"$:/core/modules/utils/logger.js":{"title":"$:/core/modules/utils/logger.js","text":"/*\\\ntitle: $:/core/modules/utils/logger.js\ntype: application/javascript\nmodule-type: utils\n\nA basic logging implementation\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar ALERT_TAG = \"$:/tags/Alert\";\n\n/*\nMake a new logger\n*/\nfunction Logger(componentName,options) {\n\toptions = options || {};\n\tthis.componentName = componentName || \"\";\n\tthis.colour = options.colour || \"white\";\n\tthis.enable = \"enable\" in options ? options.enable : true;\n\tthis.save = \"save\" in options ? options.save : true;\n\tthis.saveLimit = options.saveLimit || 100 * 1024;\n\tthis.saveBufferLogger = this;\n\tthis.buffer = \"\";\n\tthis.alertCount = 0;\n}\n\nLogger.prototype.setSaveBuffer = function(logger) {\n\tthis.saveBufferLogger = logger;\n};\n\n/*\nLog a message\n*/\nLogger.prototype.log = function(/* args */) {\n\tvar self = this;\n\tif(this.enable) {\n\t\tif(this.saveBufferLogger.save) {\n\t\t\tthis.saveBufferLogger.buffer += $tw.utils.formatDateString(new Date(),\"YYYY MM DD 0hh:0mm:0ss.0XXX\") + \":\";\n\t\t\t$tw.utils.each(Array.prototype.slice.call(arguments,0),function(arg,index) {\n\t\t\t\tself.saveBufferLogger.buffer += \" \" + arg;\n\t\t\t});\n\t\t\tthis.saveBufferLogger.buffer += \"\\n\";\n\t\t\tthis.saveBufferLogger.buffer = this.saveBufferLogger.buffer.slice(-this.saveBufferLogger.saveLimit);\n\t\t}\n\t\tif(console !== undefined &amp;&amp; console.log !== undefined) {\n\t\t\treturn Function.apply.call(console.log, console, [$tw.utils.terminalColour(this.colour),this.componentName + \":\"].concat(Array.prototype.slice.call(arguments,0)).concat($tw.utils.terminalColour()));\n\t\t}\n\t} \n};\n\n/*\nRead the message buffer\n*/\nLogger.prototype.getBuffer = function() {\n\treturn this.saveBufferLogger.buffer;\n};\n\n/*\nLog a structure as a table\n*/\nLogger.prototype.table = function(value) {\n\t(console.table || console.log)(value);\n};\n\n/*\nAlert a message\n*/\nLogger.prototype.alert = function(/* args */) {\n\tif(this.enable) {\n\t\t// Prepare the text of the alert\n\t\tvar text = Array.prototype.join.call(arguments,\" \");\n\t\t// Create alert tiddlers in the browser\n\t\tif($tw.browser) {\n\t\t\t// Check if there is an existing alert with the same text and the same component\n\t\t\tvar existingAlerts = $tw.wiki.getTiddlersWithTag(ALERT_TAG),\n\t\t\t\talertFields,\n\t\t\t\texistingCount,\n\t\t\t\tself = this;\n\t\t\t$tw.utils.each(existingAlerts,function(title) {\n\t\t\t\tvar tiddler = $tw.wiki.getTiddler(title);\n\t\t\t\tif(tiddler.fields.text === text &amp;&amp; tiddler.fields.component === self.componentName &amp;&amp; tiddler.fields.modified &amp;&amp; (!alertFields || tiddler.fields.modified &lt; alertFields.modified)) {\n\t\t\t\t\t\talertFields = $tw.utils.extend({},tiddler.fields);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(alertFields) {\n\t\t\t\texistingCount = alertFields.count || 1;\n\t\t\t} else {\n\t\t\t\talertFields = {\n\t\t\t\t\ttitle: $tw.wiki.generateNewTitle(\"$:/temp/alerts/alert\",{prefix: \"\"}),\n\t\t\t\t\ttext: text,\n\t\t\t\t\ttags: [ALERT_TAG],\n\t\t\t\t\tcomponent: this.componentName\n\t\t\t\t};\n\t\t\t\texistingCount = 0;\n\t\t\t\tthis.alertCount += 1;\n\t\t\t}\n\t\t\talertFields.modified = new Date();\n\t\t\tif(++existingCount &gt; 1) {\n\t\t\t\talertFields.count = existingCount;\n\t\t\t} else {\n\t\t\t\talertFields.count = undefined;\n\t\t\t}\n\t\t\t$tw.wiki.addTiddler(new $tw.Tiddler(alertFields));\n\t\t\t// Log the alert as well\n\t\t\tthis.log.apply(this,Array.prototype.slice.call(arguments,0));\n\t\t} else {\n\t\t\t// Print an orange message to the console if not in the browser\n\t\t\tconsole.error(\"\\x1b[1;33m\" + text + \"\\x1b[0m\");\n\t\t}\n\t}\n};\n\n/*\nClear outstanding alerts\n*/\nLogger.prototype.clearAlerts = function() {\n\tvar self = this;\n\tif($tw.browser &amp;&amp; this.alertCount &gt; 0) {\n\t\t$tw.utils.each($tw.wiki.getTiddlersWithTag(ALERT_TAG),function(title) {\n\t\t\tvar tiddler = $tw.wiki.getTiddler(title);\n\t\t\tif(tiddler.fields.component === self.componentName) {\n\t\t\t\t$tw.wiki.deleteTiddler(title);\n\t\t\t}\n\t\t});\n\t\tthis.alertCount = 0;\n\t}\n};\n\nexports.Logger = Logger;\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/parsetree.js":{"title":"$:/core/modules/utils/parsetree.js","text":"/*\\\ntitle: $:/core/modules/utils/parsetree.js\ntype: application/javascript\nmodule-type: utils\n\nParse tree utility functions.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.addAttributeToParseTreeNode = function(node,name,value) {\n\tnode.attributes = node.attributes || {};\n\tnode.attributes[name] = {type: \"string\", value: value};\n};\n\nexports.getAttributeValueFromParseTreeNode = function(node,name,defaultValue) {\n\tif(node.attributes &amp;&amp; node.attributes[name] &amp;&amp; node.attributes[name].value !== undefined) {\n\t\treturn node.attributes[name].value;\n\t}\n\treturn defaultValue;\n};\n\nexports.addClassToParseTreeNode = function(node,classString) {\n\tvar classes = [];\n\tnode.attributes = node.attributes || {};\n\tnode.attributes[\"class\"] = node.attributes[\"class\"] || {type: \"string\", value: \"\"};\n\tif(node.attributes[\"class\"].type === \"string\") {\n\t\tif(node.attributes[\"class\"].value !== \"\") {\n\t\t\tclasses = node.attributes[\"class\"].value.split(\" \");\n\t\t}\n\t\tif(classString !== \"\") {\n\t\t\t$tw.utils.pushTop(classes,classString.split(\" \"));\n\t\t}\n\t\tnode.attributes[\"class\"].value = classes.join(\" \");\n\t}\n};\n\nexports.addStyleToParseTreeNode = function(node,name,value) {\n\t\tnode.attributes = node.attributes || {};\n\t\tnode.attributes.style = node.attributes.style || {type: \"string\", value: \"\"};\n\t\tif(node.attributes.style.type === \"string\") {\n\t\t\tnode.attributes.style.value += name + \":\" + value + \";\";\n\t\t}\n};\n\nexports.findParseTreeNode = function(nodeArray,search) {\n\tfor(var t=0; t&lt;nodeArray.length; t++) {\n\t\tif(nodeArray[t].type === search.type &amp;&amp; nodeArray[t].tag === search.tag) {\n\t\t\treturn nodeArray[t];\n\t\t}\n\t}\n\treturn undefined;\n};\n\n/*\nHelper to get the text of a parse tree node or array of nodes\n*/\nexports.getParseTreeText = function getParseTreeText(tree) {\n\tvar output = [];\n\tif($tw.utils.isArray(tree)) {\n\t\t$tw.utils.each(tree,function(node) {\n\t\t\toutput.push(getParseTreeText(node));\n\t\t});\n\t} else {\n\t\tif(tree.type === \"text\") {\n\t\t\toutput.push(tree.text);\n\t\t}\n\t\tif(tree.children) {\n\t\t\treturn getParseTreeText(tree.children);\n\t\t}\n\t}\n\treturn output.join(\"\");\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/performance.js":{"title":"$:/core/modules/utils/performance.js","text":"/*\\\ntitle: $:/core/modules/utils/performance.js\ntype: application/javascript\nmodule-type: global\n\nPerformance measurement.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nfunction Performance(enabled) {\n\tthis.enabled = !!enabled;\n\tthis.measures = {}; // Hashmap by measurement name of {time:, invocations:}\n\tthis.logger = new $tw.utils.Logger(\"performance\");\n\tthis.showGreeting();\n}\n\nPerformance.prototype.showGreeting = function() {\n\tif($tw.browser) {\n\t\tthis.logger.log(\"Execute $tw.perf.log(); to see filter execution timings\");\n\t}\n};\n\n/*\nWrap performance reporting around a top level function\n*/\nPerformance.prototype.report = function(name,fn) {\n\tvar self = this;\n\tif(this.enabled) {\n\t\treturn function() {\n\t\t\tvar startTime = $tw.utils.timer(),\n\t\t\t\tresult = fn.apply(this,arguments);\n\t\t\tself.logger.log(name + \": \" + $tw.utils.timer(startTime).toFixed(2) + \"ms\");\n\t\t\treturn result;\n\t\t};\n\t} else {\n\t\treturn fn;\n\t}\n};\n\nPerformance.prototype.log = function() {\n\tvar self = this,\n\t\ttotalTime = 0,\n\t\torderedMeasures = Object.keys(this.measures).sort(function(a,b) {\n\t\t\tif(self.measures[a].time &gt; self.measures[b].time) {\n\t\t\t\treturn -1;\n\t\t\t} else if (self.measures[a].time &lt; self.measures[b].time) {\n\t\t\t\treturn + 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t$tw.utils.each(orderedMeasures,function(name) {\n\t\ttotalTime += self.measures[name].time;\n\t});\n\tvar results = []\n\t$tw.utils.each(orderedMeasures,function(name) {\n\t\tvar measure = self.measures[name];\n\t\tresults.push({name: name,invocations: measure.invocations, avgTime: measure.time / measure.invocations, totalTime: measure.time, percentTime: (measure.time / totalTime) * 100})\n\t});\n\tself.logger.table(results);\n};\n\n/*\nWrap performance measurements around a subfunction\n*/\nPerformance.prototype.measure = function(name,fn) {\n\tvar self = this;\n\tif(this.enabled) {\n\t\treturn function() {\n\t\t\tvar startTime = $tw.utils.timer(),\n\t\t\t\tresult = fn.apply(this,arguments);\n\t\t\tif(!(name in self.measures)) {\n\t\t\t\tself.measures[name] = {time: 0, invocations: 0};\n\t\t\t}\n\t\t\tself.measures[name].time += $tw.utils.timer(startTime);\n\t\t\tself.measures[name].invocations++;\n\t\t\treturn result;\n\t\t};\n\t} else {\n\t\treturn fn;\n\t}\n};\n\nexports.Performance = Performance;\n\n})();\n","type":"application/javascript","module-type":"global"},"$:/core/modules/utils/pluginmaker.js":{"title":"$:/core/modules/utils/pluginmaker.js","text":"/*\\\ntitle: $:/core/modules/utils/pluginmaker.js\ntype: application/javascript\nmodule-type: utils\n\nA quick and dirty way to pack up plugins within the browser.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nRepack a plugin, and then delete any non-shadow payload tiddlers\n*/\nexports.repackPlugin = function(title,additionalTiddlers,excludeTiddlers) {\n\tadditionalTiddlers = additionalTiddlers || [];\n\texcludeTiddlers = excludeTiddlers || [];\n\t// Get the plugin tiddler\n\tvar pluginTiddler = $tw.wiki.getTiddler(title);\n\tif(!pluginTiddler) {\n\t\tthrow \"No such tiddler as \" + title;\n\t}\n\t// Extract the JSON\n\tvar jsonPluginTiddler;\n\ttry {\n\t\tjsonPluginTiddler = JSON.parse(pluginTiddler.fields.text);\n\t} catch(e) {\n\t\tthrow \"Cannot parse plugin tiddler \" + title + \"\\n\" + $tw.language.getString(\"Error/Caption\") + \": \" + e;\n\t}\n\t// Get the list of tiddlers\n\tvar tiddlers = Object.keys(jsonPluginTiddler.tiddlers);\n\t// Add the additional tiddlers\n\t$tw.utils.pushTop(tiddlers,additionalTiddlers);\n\t// Remove any excluded tiddlers\n\tfor(var t=tiddlers.length-1; t&gt;=0; t--) {\n\t\tif(excludeTiddlers.indexOf(tiddlers[t]) !== -1) {\n\t\t\ttiddlers.splice(t,1);\n\t\t}\n\t}\n\t// Pack up the tiddlers into a block of JSON\n\tvar plugins = {};\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar tiddler = $tw.wiki.getTiddler(title),\n\t\t\tfields = {};\n\t\t$tw.utils.each(tiddler.fields,function (value,name) {\n\t\t\tfields[name] = tiddler.getFieldString(name);\n\t\t});\n\t\tplugins[title] = fields;\n\t});\n\t// Retrieve and bump the version number\n\tvar pluginVersion = $tw.utils.parseVersion(pluginTiddler.getFieldString(\"version\") || \"0.0.0\") || {\n\t\t\tmajor: \"0\",\n\t\t\tminor: \"0\",\n\t\t\tpatch: \"0\"\n\t\t};\n\tpluginVersion.patch++;\n\tvar version = pluginVersion.major + \".\" + pluginVersion.minor + \".\" + pluginVersion.patch;\n\tif(pluginVersion.prerelease) {\n\t\tversion += \"-\" + pluginVersion.prerelease;\n\t}\n\tif(pluginVersion.build) {\n\t\tversion += \"+\" + pluginVersion.build;\n\t}\n\t// Save the tiddler\n\t$tw.wiki.addTiddler(new $tw.Tiddler(pluginTiddler,{text: JSON.stringify({tiddlers: plugins},null,4), version: version}));\n\t// Delete any non-shadow constituent tiddlers\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tif($tw.wiki.tiddlerExists(title)) {\n\t\t\t$tw.wiki.deleteTiddler(title);\n\t\t}\n\t});\n\t// Trigger an autosave\n\t$tw.rootWidget.dispatchEvent({type: \"tm-auto-save-wiki\"});\n\t// Return a heartwarming confirmation\n\treturn \"Plugin \" + title + \" successfully saved\";\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/transliterate.js":{"title":"$:/core/modules/utils/transliterate.js","text":"/*\\\ntitle: $:/core/modules/utils/transliterate.js\ntype: application/javascript\nmodule-type: utils\n\nTransliteration static utility functions.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nTransliterate string to ASCII\n\n(Some pairs taken from http://semplicewebsites.com/removing-accents-javascript)\n*/\nexports.transliterationPairs = {\n\t\"Á\":\"A\",\n\t\"Ă\":\"A\",\n\t\"Ắ\":\"A\",\n\t\"Ặ\":\"A\",\n\t\"Ằ\":\"A\",\n\t\"Ẳ\":\"A\",\n\t\"Ẵ\":\"A\",\n\t\"Ǎ\":\"A\",\n\t\"Â\":\"A\",\n\t\"Ấ\":\"A\",\n\t\"Ậ\":\"A\",\n\t\"Ầ\":\"A\",\n\t\"Ẩ\":\"A\",\n\t\"Ẫ\":\"A\",\n\t\"Ä\":\"A\",\n\t\"Ǟ\":\"A\",\n\t\"Ȧ\":\"A\",\n\t\"Ǡ\":\"A\",\n\t\"Ạ\":\"A\",\n\t\"Ȁ\":\"A\",\n\t\"À\":\"A\",\n\t\"Ả\":\"A\",\n\t\"Ȃ\":\"A\",\n\t\"Ā\":\"A\",\n\t\"Ą\":\"A\",\n\t\"Å\":\"A\",\n\t\"Ǻ\":\"A\",\n\t\"Ḁ\":\"A\",\n\t\"Ⱥ\":\"A\",\n\t\"Ã\":\"A\",\n\t\"Ꜳ\":\"AA\",\n\t\"Æ\":\"AE\",\n\t\"Ǽ\":\"AE\",\n\t\"Ǣ\":\"AE\",\n\t\"Ꜵ\":\"AO\",\n\t\"Ꜷ\":\"AU\",\n\t\"Ꜹ\":\"AV\",\n\t\"Ꜻ\":\"AV\",\n\t\"Ꜽ\":\"AY\",\n\t\"Ḃ\":\"B\",\n\t\"Ḅ\":\"B\",\n\t\"Ɓ\":\"B\",\n\t\"Ḇ\":\"B\",\n\t\"Ƀ\":\"B\",\n\t\"Ƃ\":\"B\",\n\t\"Ć\":\"C\",\n\t\"Č\":\"C\",\n\t\"Ç\":\"C\",\n\t\"Ḉ\":\"C\",\n\t\"Ĉ\":\"C\",\n\t\"Ċ\":\"C\",\n\t\"Ƈ\":\"C\",\n\t\"Ȼ\":\"C\",\n\t\"Ď\":\"D\",\n\t\"Ḑ\":\"D\",\n\t\"Ḓ\":\"D\",\n\t\"Ḋ\":\"D\",\n\t\"Ḍ\":\"D\",\n\t\"Ɗ\":\"D\",\n\t\"Ḏ\":\"D\",\n\t\"ǲ\":\"D\",\n\t\"ǅ\":\"D\",\n\t\"Đ\":\"D\",\n\t\"Ƌ\":\"D\",\n\t\"Ǳ\":\"DZ\",\n\t\"Ǆ\":\"DZ\",\n\t\"É\":\"E\",\n\t\"Ĕ\":\"E\",\n\t\"Ě\":\"E\",\n\t\"Ȩ\":\"E\",\n\t\"Ḝ\":\"E\",\n\t\"Ê\":\"E\",\n\t\"Ế\":\"E\",\n\t\"Ệ\":\"E\",\n\t\"Ề\":\"E\",\n\t\"Ể\":\"E\",\n\t\"Ễ\":\"E\",\n\t\"Ḙ\":\"E\",\n\t\"Ë\":\"E\",\n\t\"Ė\":\"E\",\n\t\"Ẹ\":\"E\",\n\t\"Ȅ\":\"E\",\n\t\"È\":\"E\",\n\t\"Ẻ\":\"E\",\n\t\"Ȇ\":\"E\",\n\t\"Ē\":\"E\",\n\t\"Ḗ\":\"E\",\n\t\"Ḕ\":\"E\",\n\t\"Ę\":\"E\",\n\t\"Ɇ\":\"E\",\n\t\"Ẽ\":\"E\",\n\t\"Ḛ\":\"E\",\n\t\"Ꝫ\":\"ET\",\n\t\"Ḟ\":\"F\",\n\t\"Ƒ\":\"F\",\n\t\"Ǵ\":\"G\",\n\t\"Ğ\":\"G\",\n\t\"Ǧ\":\"G\",\n\t\"Ģ\":\"G\",\n\t\"Ĝ\":\"G\",\n\t\"Ġ\":\"G\",\n\t\"Ɠ\":\"G\",\n\t\"Ḡ\":\"G\",\n\t\"Ǥ\":\"G\",\n\t\"Ḫ\":\"H\",\n\t\"Ȟ\":\"H\",\n\t\"Ḩ\":\"H\",\n\t\"Ĥ\":\"H\",\n\t\"Ⱨ\":\"H\",\n\t\"Ḧ\":\"H\",\n\t\"Ḣ\":\"H\",\n\t\"Ḥ\":\"H\",\n\t\"Ħ\":\"H\",\n\t\"Í\":\"I\",\n\t\"Ĭ\":\"I\",\n\t\"Ǐ\":\"I\",\n\t\"Î\":\"I\",\n\t\"Ï\":\"I\",\n\t\"Ḯ\":\"I\",\n\t\"İ\":\"I\",\n\t\"Ị\":\"I\",\n\t\"Ȉ\":\"I\",\n\t\"Ì\":\"I\",\n\t\"Ỉ\":\"I\",\n\t\"Ȋ\":\"I\",\n\t\"Ī\":\"I\",\n\t\"Į\":\"I\",\n\t\"Ɨ\":\"I\",\n\t\"Ĩ\":\"I\",\n\t\"Ḭ\":\"I\",\n\t\"Ꝺ\":\"D\",\n\t\"Ꝼ\":\"F\",\n\t\"Ᵹ\":\"G\",\n\t\"Ꞃ\":\"R\",\n\t\"Ꞅ\":\"S\",\n\t\"Ꞇ\":\"T\",\n\t\"Ꝭ\":\"IS\",\n\t\"Ĵ\":\"J\",\n\t\"Ɉ\":\"J\",\n\t\"Ḱ\":\"K\",\n\t\"Ǩ\":\"K\",\n\t\"Ķ\":\"K\",\n\t\"Ⱪ\":\"K\",\n\t\"Ꝃ\":\"K\",\n\t\"Ḳ\":\"K\",\n\t\"Ƙ\":\"K\",\n\t\"Ḵ\":\"K\",\n\t\"Ꝁ\":\"K\",\n\t\"Ꝅ\":\"K\",\n\t\"Ĺ\":\"L\",\n\t\"Ƚ\":\"L\",\n\t\"Ľ\":\"L\",\n\t\"Ļ\":\"L\",\n\t\"Ḽ\":\"L\",\n\t\"Ḷ\":\"L\",\n\t\"Ḹ\":\"L\",\n\t\"Ⱡ\":\"L\",\n\t\"Ꝉ\":\"L\",\n\t\"Ḻ\":\"L\",\n\t\"Ŀ\":\"L\",\n\t\"Ɫ\":\"L\",\n\t\"ǈ\":\"L\",\n\t\"Ł\":\"L\",\n\t\"Ǉ\":\"LJ\",\n\t\"Ḿ\":\"M\",\n\t\"Ṁ\":\"M\",\n\t\"Ṃ\":\"M\",\n\t\"Ɱ\":\"M\",\n\t\"Ń\":\"N\",\n\t\"Ň\":\"N\",\n\t\"Ņ\":\"N\",\n\t\"Ṋ\":\"N\",\n\t\"Ṅ\":\"N\",\n\t\"Ṇ\":\"N\",\n\t\"Ǹ\":\"N\",\n\t\"Ɲ\":\"N\",\n\t\"Ṉ\":\"N\",\n\t\"Ƞ\":\"N\",\n\t\"ǋ\":\"N\",\n\t\"Ñ\":\"N\",\n\t\"Ǌ\":\"NJ\",\n\t\"Ó\":\"O\",\n\t\"Ŏ\":\"O\",\n\t\"Ǒ\":\"O\",\n\t\"Ô\":\"O\",\n\t\"Ố\":\"O\",\n\t\"Ộ\":\"O\",\n\t\"Ồ\":\"O\",\n\t\"Ổ\":\"O\",\n\t\"Ỗ\":\"O\",\n\t\"Ö\":\"O\",\n\t\"Ȫ\":\"O\",\n\t\"Ȯ\":\"O\",\n\t\"Ȱ\":\"O\",\n\t\"Ọ\":\"O\",\n\t\"Ő\":\"O\",\n\t\"Ȍ\":\"O\",\n\t\"Ò\":\"O\",\n\t\"Ỏ\":\"O\",\n\t\"Ơ\":\"O\",\n\t\"Ớ\":\"O\",\n\t\"Ợ\":\"O\",\n\t\"Ờ\":\"O\",\n\t\"Ở\":\"O\",\n\t\"Ỡ\":\"O\",\n\t\"Ȏ\":\"O\",\n\t\"Ꝋ\":\"O\",\n\t\"Ꝍ\":\"O\",\n\t\"Ō\":\"O\",\n\t\"Ṓ\":\"O\",\n\t\"Ṑ\":\"O\",\n\t\"Ɵ\":\"O\",\n\t\"Ǫ\":\"O\",\n\t\"Ǭ\":\"O\",\n\t\"Ø\":\"O\",\n\t\"Ǿ\":\"O\",\n\t\"Õ\":\"O\",\n\t\"Ṍ\":\"O\",\n\t\"Ṏ\":\"O\",\n\t\"Ȭ\":\"O\",\n\t\"Ƣ\":\"OI\",\n\t\"Ꝏ\":\"OO\",\n\t\"Ɛ\":\"E\",\n\t\"Ɔ\":\"O\",\n\t\"Ȣ\":\"OU\",\n\t\"Ṕ\":\"P\",\n\t\"Ṗ\":\"P\",\n\t\"Ꝓ\":\"P\",\n\t\"Ƥ\":\"P\",\n\t\"Ꝕ\":\"P\",\n\t\"Ᵽ\":\"P\",\n\t\"Ꝑ\":\"P\",\n\t\"Ꝙ\":\"Q\",\n\t\"Ꝗ\":\"Q\",\n\t\"Ŕ\":\"R\",\n\t\"Ř\":\"R\",\n\t\"Ŗ\":\"R\",\n\t\"Ṙ\":\"R\",\n\t\"Ṛ\":\"R\",\n\t\"Ṝ\":\"R\",\n\t\"Ȑ\":\"R\",\n\t\"Ȓ\":\"R\",\n\t\"Ṟ\":\"R\",\n\t\"Ɍ\":\"R\",\n\t\"Ɽ\":\"R\",\n\t\"Ꜿ\":\"C\",\n\t\"Ǝ\":\"E\",\n\t\"Ś\":\"S\",\n\t\"Ṥ\":\"S\",\n\t\"Š\":\"S\",\n\t\"Ṧ\":\"S\",\n\t\"Ş\":\"S\",\n\t\"Ŝ\":\"S\",\n\t\"Ș\":\"S\",\n\t\"Ṡ\":\"S\",\n\t\"Ṣ\":\"S\",\n\t\"Ṩ\":\"S\",\n\t\"Ť\":\"T\",\n\t\"Ţ\":\"T\",\n\t\"Ṱ\":\"T\",\n\t\"Ț\":\"T\",\n\t\"Ⱦ\":\"T\",\n\t\"Ṫ\":\"T\",\n\t\"Ṭ\":\"T\",\n\t\"Ƭ\":\"T\",\n\t\"Ṯ\":\"T\",\n\t\"Ʈ\":\"T\",\n\t\"Ŧ\":\"T\",\n\t\"Ɐ\":\"A\",\n\t\"Ꞁ\":\"L\",\n\t\"Ɯ\":\"M\",\n\t\"Ʌ\":\"V\",\n\t\"Ꜩ\":\"TZ\",\n\t\"Ú\":\"U\",\n\t\"Ŭ\":\"U\",\n\t\"Ǔ\":\"U\",\n\t\"Û\":\"U\",\n\t\"Ṷ\":\"U\",\n\t\"Ü\":\"U\",\n\t\"Ǘ\":\"U\",\n\t\"Ǚ\":\"U\",\n\t\"Ǜ\":\"U\",\n\t\"Ǖ\":\"U\",\n\t\"Ṳ\":\"U\",\n\t\"Ụ\":\"U\",\n\t\"Ű\":\"U\",\n\t\"Ȕ\":\"U\",\n\t\"Ù\":\"U\",\n\t\"Ủ\":\"U\",\n\t\"Ư\":\"U\",\n\t\"Ứ\":\"U\",\n\t\"Ự\":\"U\",\n\t\"Ừ\":\"U\",\n\t\"Ử\":\"U\",\n\t\"Ữ\":\"U\",\n\t\"Ȗ\":\"U\",\n\t\"Ū\":\"U\",\n\t\"Ṻ\":\"U\",\n\t\"Ų\":\"U\",\n\t\"Ů\":\"U\",\n\t\"Ũ\":\"U\",\n\t\"Ṹ\":\"U\",\n\t\"Ṵ\":\"U\",\n\t\"Ꝟ\":\"V\",\n\t\"Ṿ\":\"V\",\n\t\"Ʋ\":\"V\",\n\t\"Ṽ\":\"V\",\n\t\"Ꝡ\":\"VY\",\n\t\"Ẃ\":\"W\",\n\t\"Ŵ\":\"W\",\n\t\"Ẅ\":\"W\",\n\t\"Ẇ\":\"W\",\n\t\"Ẉ\":\"W\",\n\t\"Ẁ\":\"W\",\n\t\"Ⱳ\":\"W\",\n\t\"Ẍ\":\"X\",\n\t\"Ẋ\":\"X\",\n\t\"Ý\":\"Y\",\n\t\"Ŷ\":\"Y\",\n\t\"Ÿ\":\"Y\",\n\t\"Ẏ\":\"Y\",\n\t\"Ỵ\":\"Y\",\n\t\"Ỳ\":\"Y\",\n\t\"Ƴ\":\"Y\",\n\t\"Ỷ\":\"Y\",\n\t\"Ỿ\":\"Y\",\n\t\"Ȳ\":\"Y\",\n\t\"Ɏ\":\"Y\",\n\t\"Ỹ\":\"Y\",\n\t\"Ź\":\"Z\",\n\t\"Ž\":\"Z\",\n\t\"Ẑ\":\"Z\",\n\t\"Ⱬ\":\"Z\",\n\t\"Ż\":\"Z\",\n\t\"Ẓ\":\"Z\",\n\t\"Ȥ\":\"Z\",\n\t\"Ẕ\":\"Z\",\n\t\"Ƶ\":\"Z\",\n\t\"Ĳ\":\"IJ\",\n\t\"Œ\":\"OE\",\n\t\"ᴀ\":\"A\",\n\t\"ᴁ\":\"AE\",\n\t\"ʙ\":\"B\",\n\t\"ᴃ\":\"B\",\n\t\"ᴄ\":\"C\",\n\t\"ᴅ\":\"D\",\n\t\"ᴇ\":\"E\",\n\t\"ꜰ\":\"F\",\n\t\"ɢ\":\"G\",\n\t\"ʛ\":\"G\",\n\t\"ʜ\":\"H\",\n\t\"ɪ\":\"I\",\n\t\"ʁ\":\"R\",\n\t\"ᴊ\":\"J\",\n\t\"ᴋ\":\"K\",\n\t\"ʟ\":\"L\",\n\t\"ᴌ\":\"L\",\n\t\"ᴍ\":\"M\",\n\t\"ɴ\":\"N\",\n\t\"ᴏ\":\"O\",\n\t\"ɶ\":\"OE\",\n\t\"ᴐ\":\"O\",\n\t\"ᴕ\":\"OU\",\n\t\"ᴘ\":\"P\",\n\t\"ʀ\":\"R\",\n\t\"ᴎ\":\"N\",\n\t\"ᴙ\":\"R\",\n\t\"ꜱ\":\"S\",\n\t\"ᴛ\":\"T\",\n\t\"ⱻ\":\"E\",\n\t\"ᴚ\":\"R\",\n\t\"ᴜ\":\"U\",\n\t\"ᴠ\":\"V\",\n\t\"ᴡ\":\"W\",\n\t\"ʏ\":\"Y\",\n\t\"ᴢ\":\"Z\",\n\t\"á\":\"a\",\n\t\"ă\":\"a\",\n\t\"ắ\":\"a\",\n\t\"ặ\":\"a\",\n\t\"ằ\":\"a\",\n\t\"ẳ\":\"a\",\n\t\"ẵ\":\"a\",\n\t\"ǎ\":\"a\",\n\t\"â\":\"a\",\n\t\"ấ\":\"a\",\n\t\"ậ\":\"a\",\n\t\"ầ\":\"a\",\n\t\"ẩ\":\"a\",\n\t\"ẫ\":\"a\",\n\t\"ä\":\"a\",\n\t\"ǟ\":\"a\",\n\t\"ȧ\":\"a\",\n\t\"ǡ\":\"a\",\n\t\"ạ\":\"a\",\n\t\"ȁ\":\"a\",\n\t\"à\":\"a\",\n\t\"ả\":\"a\",\n\t\"ȃ\":\"a\",\n\t\"ā\":\"a\",\n\t\"ą\":\"a\",\n\t\"ᶏ\":\"a\",\n\t\"ẚ\":\"a\",\n\t\"å\":\"a\",\n\t\"ǻ\":\"a\",\n\t\"ḁ\":\"a\",\n\t\"ⱥ\":\"a\",\n\t\"ã\":\"a\",\n\t\"ꜳ\":\"aa\",\n\t\"æ\":\"ae\",\n\t\"ǽ\":\"ae\",\n\t\"ǣ\":\"ae\",\n\t\"ꜵ\":\"ao\",\n\t\"ꜷ\":\"au\",\n\t\"ꜹ\":\"av\",\n\t\"ꜻ\":\"av\",\n\t\"ꜽ\":\"ay\",\n\t\"ḃ\":\"b\",\n\t\"ḅ\":\"b\",\n\t\"ɓ\":\"b\",\n\t\"ḇ\":\"b\",\n\t\"ᵬ\":\"b\",\n\t\"ᶀ\":\"b\",\n\t\"ƀ\":\"b\",\n\t\"ƃ\":\"b\",\n\t\"ɵ\":\"o\",\n\t\"ć\":\"c\",\n\t\"č\":\"c\",\n\t\"ç\":\"c\",\n\t\"ḉ\":\"c\",\n\t\"ĉ\":\"c\",\n\t\"ɕ\":\"c\",\n\t\"ċ\":\"c\",\n\t\"ƈ\":\"c\",\n\t\"ȼ\":\"c\",\n\t\"ď\":\"d\",\n\t\"ḑ\":\"d\",\n\t\"ḓ\":\"d\",\n\t\"ȡ\":\"d\",\n\t\"ḋ\":\"d\",\n\t\"ḍ\":\"d\",\n\t\"ɗ\":\"d\",\n\t\"ᶑ\":\"d\",\n\t\"ḏ\":\"d\",\n\t\"ᵭ\":\"d\",\n\t\"ᶁ\":\"d\",\n\t\"đ\":\"d\",\n\t\"ɖ\":\"d\",\n\t\"ƌ\":\"d\",\n\t\"ı\":\"i\",\n\t\"ȷ\":\"j\",\n\t\"ɟ\":\"j\",\n\t\"ʄ\":\"j\",\n\t\"ǳ\":\"dz\",\n\t\"ǆ\":\"dz\",\n\t\"é\":\"e\",\n\t\"ĕ\":\"e\",\n\t\"ě\":\"e\",\n\t\"ȩ\":\"e\",\n\t\"ḝ\":\"e\",\n\t\"ê\":\"e\",\n\t\"ế\":\"e\",\n\t\"ệ\":\"e\",\n\t\"ề\":\"e\",\n\t\"ể\":\"e\",\n\t\"ễ\":\"e\",\n\t\"ḙ\":\"e\",\n\t\"ë\":\"e\",\n\t\"ė\":\"e\",\n\t\"ẹ\":\"e\",\n\t\"ȅ\":\"e\",\n\t\"è\":\"e\",\n\t\"ẻ\":\"e\",\n\t\"ȇ\":\"e\",\n\t\"ē\":\"e\",\n\t\"ḗ\":\"e\",\n\t\"ḕ\":\"e\",\n\t\"ⱸ\":\"e\",\n\t\"ę\":\"e\",\n\t\"ᶒ\":\"e\",\n\t\"ɇ\":\"e\",\n\t\"ẽ\":\"e\",\n\t\"ḛ\":\"e\",\n\t\"ꝫ\":\"et\",\n\t\"ḟ\":\"f\",\n\t\"ƒ\":\"f\",\n\t\"ᵮ\":\"f\",\n\t\"ᶂ\":\"f\",\n\t\"ǵ\":\"g\",\n\t\"ğ\":\"g\",\n\t\"ǧ\":\"g\",\n\t\"ģ\":\"g\",\n\t\"ĝ\":\"g\",\n\t\"ġ\":\"g\",\n\t\"ɠ\":\"g\",\n\t\"ḡ\":\"g\",\n\t\"ᶃ\":\"g\",\n\t\"ǥ\":\"g\",\n\t\"ḫ\":\"h\",\n\t\"ȟ\":\"h\",\n\t\"ḩ\":\"h\",\n\t\"ĥ\":\"h\",\n\t\"ⱨ\":\"h\",\n\t\"ḧ\":\"h\",\n\t\"ḣ\":\"h\",\n\t\"ḥ\":\"h\",\n\t\"ɦ\":\"h\",\n\t\"ẖ\":\"h\",\n\t\"ħ\":\"h\",\n\t\"ƕ\":\"hv\",\n\t\"í\":\"i\",\n\t\"ĭ\":\"i\",\n\t\"ǐ\":\"i\",\n\t\"î\":\"i\",\n\t\"ï\":\"i\",\n\t\"ḯ\":\"i\",\n\t\"ị\":\"i\",\n\t\"ȉ\":\"i\",\n\t\"ì\":\"i\",\n\t\"ỉ\":\"i\",\n\t\"ȋ\":\"i\",\n\t\"ī\":\"i\",\n\t\"į\":\"i\",\n\t\"ᶖ\":\"i\",\n\t\"ɨ\":\"i\",\n\t\"ĩ\":\"i\",\n\t\"ḭ\":\"i\",\n\t\"ꝺ\":\"d\",\n\t\"ꝼ\":\"f\",\n\t\"ᵹ\":\"g\",\n\t\"ꞃ\":\"r\",\n\t\"ꞅ\":\"s\",\n\t\"ꞇ\":\"t\",\n\t\"ꝭ\":\"is\",\n\t\"ǰ\":\"j\",\n\t\"ĵ\":\"j\",\n\t\"ʝ\":\"j\",\n\t\"ɉ\":\"j\",\n\t\"ḱ\":\"k\",\n\t\"ǩ\":\"k\",\n\t\"ķ\":\"k\",\n\t\"ⱪ\":\"k\",\n\t\"ꝃ\":\"k\",\n\t\"ḳ\":\"k\",\n\t\"ƙ\":\"k\",\n\t\"ḵ\":\"k\",\n\t\"ᶄ\":\"k\",\n\t\"ꝁ\":\"k\",\n\t\"ꝅ\":\"k\",\n\t\"ĺ\":\"l\",\n\t\"ƚ\":\"l\",\n\t\"ɬ\":\"l\",\n\t\"ľ\":\"l\",\n\t\"ļ\":\"l\",\n\t\"ḽ\":\"l\",\n\t\"ȴ\":\"l\",\n\t\"ḷ\":\"l\",\n\t\"ḹ\":\"l\",\n\t\"ⱡ\":\"l\",\n\t\"ꝉ\":\"l\",\n\t\"ḻ\":\"l\",\n\t\"ŀ\":\"l\",\n\t\"ɫ\":\"l\",\n\t\"ᶅ\":\"l\",\n\t\"ɭ\":\"l\",\n\t\"ł\":\"l\",\n\t\"ǉ\":\"lj\",\n\t\"ſ\":\"s\",\n\t\"ẜ\":\"s\",\n\t\"ẛ\":\"s\",\n\t\"ẝ\":\"s\",\n\t\"ḿ\":\"m\",\n\t\"ṁ\":\"m\",\n\t\"ṃ\":\"m\",\n\t\"ɱ\":\"m\",\n\t\"ᵯ\":\"m\",\n\t\"ᶆ\":\"m\",\n\t\"ń\":\"n\",\n\t\"ň\":\"n\",\n\t\"ņ\":\"n\",\n\t\"ṋ\":\"n\",\n\t\"ȵ\":\"n\",\n\t\"ṅ\":\"n\",\n\t\"ṇ\":\"n\",\n\t\"ǹ\":\"n\",\n\t\"ɲ\":\"n\",\n\t\"ṉ\":\"n\",\n\t\"ƞ\":\"n\",\n\t\"ᵰ\":\"n\",\n\t\"ᶇ\":\"n\",\n\t\"ɳ\":\"n\",\n\t\"ñ\":\"n\",\n\t\"ǌ\":\"nj\",\n\t\"ó\":\"o\",\n\t\"ŏ\":\"o\",\n\t\"ǒ\":\"o\",\n\t\"ô\":\"o\",\n\t\"ố\":\"o\",\n\t\"ộ\":\"o\",\n\t\"ồ\":\"o\",\n\t\"ổ\":\"o\",\n\t\"ỗ\":\"o\",\n\t\"ö\":\"o\",\n\t\"ȫ\":\"o\",\n\t\"ȯ\":\"o\",\n\t\"ȱ\":\"o\",\n\t\"ọ\":\"o\",\n\t\"ő\":\"o\",\n\t\"ȍ\":\"o\",\n\t\"ò\":\"o\",\n\t\"ỏ\":\"o\",\n\t\"ơ\":\"o\",\n\t\"ớ\":\"o\",\n\t\"ợ\":\"o\",\n\t\"ờ\":\"o\",\n\t\"ở\":\"o\",\n\t\"ỡ\":\"o\",\n\t\"ȏ\":\"o\",\n\t\"ꝋ\":\"o\",\n\t\"ꝍ\":\"o\",\n\t\"ⱺ\":\"o\",\n\t\"ō\":\"o\",\n\t\"ṓ\":\"o\",\n\t\"ṑ\":\"o\",\n\t\"ǫ\":\"o\",\n\t\"ǭ\":\"o\",\n\t\"ø\":\"o\",\n\t\"ǿ\":\"o\",\n\t\"õ\":\"o\",\n\t\"ṍ\":\"o\",\n\t\"ṏ\":\"o\",\n\t\"ȭ\":\"o\",\n\t\"ƣ\":\"oi\",\n\t\"ꝏ\":\"oo\",\n\t\"ɛ\":\"e\",\n\t\"ᶓ\":\"e\",\n\t\"ɔ\":\"o\",\n\t\"ᶗ\":\"o\",\n\t\"ȣ\":\"ou\",\n\t\"ṕ\":\"p\",\n\t\"ṗ\":\"p\",\n\t\"ꝓ\":\"p\",\n\t\"ƥ\":\"p\",\n\t\"ᵱ\":\"p\",\n\t\"ᶈ\":\"p\",\n\t\"ꝕ\":\"p\",\n\t\"ᵽ\":\"p\",\n\t\"ꝑ\":\"p\",\n\t\"ꝙ\":\"q\",\n\t\"ʠ\":\"q\",\n\t\"ɋ\":\"q\",\n\t\"ꝗ\":\"q\",\n\t\"ŕ\":\"r\",\n\t\"ř\":\"r\",\n\t\"ŗ\":\"r\",\n\t\"ṙ\":\"r\",\n\t\"ṛ\":\"r\",\n\t\"ṝ\":\"r\",\n\t\"ȑ\":\"r\",\n\t\"ɾ\":\"r\",\n\t\"ᵳ\":\"r\",\n\t\"ȓ\":\"r\",\n\t\"ṟ\":\"r\",\n\t\"ɼ\":\"r\",\n\t\"ᵲ\":\"r\",\n\t\"ᶉ\":\"r\",\n\t\"ɍ\":\"r\",\n\t\"ɽ\":\"r\",\n\t\"ↄ\":\"c\",\n\t\"ꜿ\":\"c\",\n\t\"ɘ\":\"e\",\n\t\"ɿ\":\"r\",\n\t\"ś\":\"s\",\n\t\"ṥ\":\"s\",\n\t\"š\":\"s\",\n\t\"ṧ\":\"s\",\n\t\"ş\":\"s\",\n\t\"ŝ\":\"s\",\n\t\"ș\":\"s\",\n\t\"ṡ\":\"s\",\n\t\"ṣ\":\"s\",\n\t\"ṩ\":\"s\",\n\t\"ʂ\":\"s\",\n\t\"ᵴ\":\"s\",\n\t\"ᶊ\":\"s\",\n\t\"ȿ\":\"s\",\n\t\"ɡ\":\"g\",\n\t\"ᴑ\":\"o\",\n\t\"ᴓ\":\"o\",\n\t\"ᴝ\":\"u\",\n\t\"ť\":\"t\",\n\t\"ţ\":\"t\",\n\t\"ṱ\":\"t\",\n\t\"ț\":\"t\",\n\t\"ȶ\":\"t\",\n\t\"ẗ\":\"t\",\n\t\"ⱦ\":\"t\",\n\t\"ṫ\":\"t\",\n\t\"ṭ\":\"t\",\n\t\"ƭ\":\"t\",\n\t\"ṯ\":\"t\",\n\t\"ᵵ\":\"t\",\n\t\"ƫ\":\"t\",\n\t\"ʈ\":\"t\",\n\t\"ŧ\":\"t\",\n\t\"ᵺ\":\"th\",\n\t\"ɐ\":\"a\",\n\t\"ᴂ\":\"ae\",\n\t\"ǝ\":\"e\",\n\t\"ᵷ\":\"g\",\n\t\"ɥ\":\"h\",\n\t\"ʮ\":\"h\",\n\t\"ʯ\":\"h\",\n\t\"ᴉ\":\"i\",\n\t\"ʞ\":\"k\",\n\t\"ꞁ\":\"l\",\n\t\"ɯ\":\"m\",\n\t\"ɰ\":\"m\",\n\t\"ᴔ\":\"oe\",\n\t\"ɹ\":\"r\",\n\t\"ɻ\":\"r\",\n\t\"ɺ\":\"r\",\n\t\"ⱹ\":\"r\",\n\t\"ʇ\":\"t\",\n\t\"ʌ\":\"v\",\n\t\"ʍ\":\"w\",\n\t\"ʎ\":\"y\",\n\t\"ꜩ\":\"tz\",\n\t\"ú\":\"u\",\n\t\"ŭ\":\"u\",\n\t\"ǔ\":\"u\",\n\t\"û\":\"u\",\n\t\"ṷ\":\"u\",\n\t\"ü\":\"u\",\n\t\"ǘ\":\"u\",\n\t\"ǚ\":\"u\",\n\t\"ǜ\":\"u\",\n\t\"ǖ\":\"u\",\n\t\"ṳ\":\"u\",\n\t\"ụ\":\"u\",\n\t\"ű\":\"u\",\n\t\"ȕ\":\"u\",\n\t\"ù\":\"u\",\n\t\"ủ\":\"u\",\n\t\"ư\":\"u\",\n\t\"ứ\":\"u\",\n\t\"ự\":\"u\",\n\t\"ừ\":\"u\",\n\t\"ử\":\"u\",\n\t\"ữ\":\"u\",\n\t\"ȗ\":\"u\",\n\t\"ū\":\"u\",\n\t\"ṻ\":\"u\",\n\t\"ų\":\"u\",\n\t\"ᶙ\":\"u\",\n\t\"ů\":\"u\",\n\t\"ũ\":\"u\",\n\t\"ṹ\":\"u\",\n\t\"ṵ\":\"u\",\n\t\"ᵫ\":\"ue\",\n\t\"ꝸ\":\"um\",\n\t\"ⱴ\":\"v\",\n\t\"ꝟ\":\"v\",\n\t\"ṿ\":\"v\",\n\t\"ʋ\":\"v\",\n\t\"ᶌ\":\"v\",\n\t\"ⱱ\":\"v\",\n\t\"ṽ\":\"v\",\n\t\"ꝡ\":\"vy\",\n\t\"ẃ\":\"w\",\n\t\"ŵ\":\"w\",\n\t\"ẅ\":\"w\",\n\t\"ẇ\":\"w\",\n\t\"ẉ\":\"w\",\n\t\"ẁ\":\"w\",\n\t\"ⱳ\":\"w\",\n\t\"ẘ\":\"w\",\n\t\"ẍ\":\"x\",\n\t\"ẋ\":\"x\",\n\t\"ᶍ\":\"x\",\n\t\"ý\":\"y\",\n\t\"ŷ\":\"y\",\n\t\"ÿ\":\"y\",\n\t\"ẏ\":\"y\",\n\t\"ỵ\":\"y\",\n\t\"ỳ\":\"y\",\n\t\"ƴ\":\"y\",\n\t\"ỷ\":\"y\",\n\t\"ỿ\":\"y\",\n\t\"ȳ\":\"y\",\n\t\"ẙ\":\"y\",\n\t\"ɏ\":\"y\",\n\t\"ỹ\":\"y\",\n\t\"ź\":\"z\",\n\t\"ž\":\"z\",\n\t\"ẑ\":\"z\",\n\t\"ʑ\":\"z\",\n\t\"ⱬ\":\"z\",\n\t\"ż\":\"z\",\n\t\"ẓ\":\"z\",\n\t\"ȥ\":\"z\",\n\t\"ẕ\":\"z\",\n\t\"ᵶ\":\"z\",\n\t\"ᶎ\":\"z\",\n\t\"ʐ\":\"z\",\n\t\"ƶ\":\"z\",\n\t\"ɀ\":\"z\",\n\t\"ﬀ\":\"ff\",\n\t\"ﬃ\":\"ffi\",\n\t\"ﬄ\":\"ffl\",\n\t\"ﬁ\":\"fi\",\n\t\"ﬂ\":\"fl\",\n\t\"ĳ\":\"ij\",\n\t\"œ\":\"oe\",\n\t\"ﬆ\":\"st\",\n\t\"ₐ\":\"a\",\n\t\"ₑ\":\"e\",\n\t\"ᵢ\":\"i\",\n\t\"ⱼ\":\"j\",\n\t\"ₒ\":\"o\",\n\t\"ᵣ\":\"r\",\n\t\"ᵤ\":\"u\",\n\t\"ᵥ\":\"v\",\n\t\"ₓ\":\"x\",\n\t\"Ё\":\"YO\",\n\t\"Й\":\"I\",\n\t\"Ц\":\"TS\",\n\t\"У\":\"U\",\n\t\"К\":\"K\",\n\t\"Е\":\"E\",\n\t\"Н\":\"N\",\n\t\"Г\":\"G\",\n\t\"Ш\":\"SH\",\n\t\"Щ\":\"SCH\",\n\t\"З\":\"Z\",\n\t\"Х\":\"H\",\n\t\"Ъ\":\"'\",\n\t\"ё\":\"yo\",\n\t\"й\":\"i\",\n\t\"ц\":\"ts\",\n\t\"у\":\"u\",\n\t\"к\":\"k\",\n\t\"е\":\"e\",\n\t\"н\":\"n\",\n\t\"г\":\"g\",\n\t\"ш\":\"sh\",\n\t\"щ\":\"sch\",\n\t\"з\":\"z\",\n\t\"х\":\"h\",\n\t\"ъ\":\"'\",\n\t\"Ф\":\"F\",\n\t\"Ы\":\"I\",\n\t\"В\":\"V\",\n\t\"А\":\"a\",\n\t\"П\":\"P\",\n\t\"Р\":\"R\",\n\t\"О\":\"O\",\n\t\"Л\":\"L\",\n\t\"Д\":\"D\",\n\t\"Ж\":\"ZH\",\n\t\"Э\":\"E\",\n\t\"ф\":\"f\",\n\t\"ы\":\"i\",\n\t\"в\":\"v\",\n\t\"а\":\"a\",\n\t\"п\":\"p\",\n\t\"р\":\"r\",\n\t\"о\":\"o\",\n\t\"л\":\"l\",\n\t\"д\":\"d\",\n\t\"ж\":\"zh\",\n\t\"э\":\"e\",\n\t\"Я\":\"Ya\",\n\t\"Ч\":\"CH\",\n\t\"С\":\"S\",\n\t\"М\":\"M\",\n\t\"И\":\"I\",\n\t\"Т\":\"T\",\n\t\"Ь\":\"'\",\n\t\"Б\":\"B\",\n\t\"Ю\":\"YU\",\n\t\"я\":\"ya\",\n\t\"ч\":\"ch\",\n\t\"с\":\"s\",\n\t\"м\":\"m\",\n\t\"и\":\"i\",\n\t\"т\":\"t\",\n\t\"ь\":\"'\",\n\t\"б\":\"b\",\n\t\"ю\":\"yu\"\n};\n\nexports.transliterate = function(str) {\n\treturn str.replace(/[^A-Za-z0-9\\[\\] ]/g,function(ch) {\n\t\treturn exports.transliterationPairs[ch] || ch\n\t});\n};\n\nexports.transliterateToSafeASCII = function(str) {\n\treturn str.replace(/[^\\x00-\\x7F]/g,function(ch) {\n\t\treturn exports.transliterationPairs[ch] || \"\"\n\t});\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/utils/utils.js":{"title":"$:/core/modules/utils/utils.js","text":"/*\\\ntitle: $:/core/modules/utils/utils.js\ntype: application/javascript\nmodule-type: utils\n\nVarious static utility functions.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar base64utf8 = require(\"$:/core/modules/utils/base64-utf8/base64-utf8.module.js\");\n\n/*\nDisplay a message, in colour if we're on a terminal\n*/\nexports.log = function(text,colour) {\n\tconsole.log($tw.node ? exports.terminalColour(colour) + text + exports.terminalColour() : text);\n};\n\nexports.terminalColour = function(colour) {\n\tif(!$tw.browser &amp;&amp; $tw.node &amp;&amp; process.stdout.isTTY) {\n\t\tif(colour) {\n\t\t\tvar code = exports.terminalColourLookup[colour];\n\t\t\tif(code) {\n\t\t\t\treturn \"\\x1b[\" + code + \"m\";\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"\\x1b[0m\"; // Cancel colour\n\t\t}\n\t}\n\treturn \"\";\n};\n\nexports.terminalColourLookup = {\n\t\"black\": \"0;30\",\n\t\"red\": \"0;31\",\n\t\"green\": \"0;32\",\n\t\"brown/orange\": \"0;33\",\n\t\"blue\": \"0;34\",\n\t\"purple\": \"0;35\",\n\t\"cyan\": \"0;36\",\n\t\"light gray\": \"0;37\"\n};\n\n/*\nDisplay a warning, in colour if we're on a terminal\n*/\nexports.warning = function(text) {\n\texports.log(text,\"brown/orange\");\n};\n\n/*\nLog a table of name: value pairs\n*/\nexports.logTable = function(data) {\n\tif(console.table) {\n\t\tconsole.table(data);\n\t} else {\n\t\t$tw.utils.each(data,function(value,name) {\n\t\t\tconsole.log(name + \": \" + value);\n\t\t});\n\t}\n}\n\n/*\nReturn the integer represented by the str (string).\nReturn the dflt (default) parameter if str is not a base-10 number.\n*/\nexports.getInt = function(str,deflt) {\n\tvar i = parseInt(str,10);\n\treturn isNaN(i) ? deflt : i;\n}\n\n/*\nRepeatedly replaces a substring within a string. Like String.prototype.replace, but without any of the default special handling of $ sequences in the replace string\n*/\nexports.replaceString = function(text,search,replace) {\n\treturn text.replace(search,function() {\n\t\treturn replace;\n\t});\n};\n\n/*\nRepeats a string\n*/\nexports.repeat = function(str,count) {\n\tvar result = \"\";\n\tfor(var t=0;t&lt;count;t++) {\n\t\tresult += str;\n\t}\n\treturn result;\n};\n\n/*\nTrim whitespace from the start and end of a string\nThanks to Steven Levithan, http://blog.stevenlevithan.com/archives/faster-trim-javascript\n*/\nexports.trim = function(str) {\n\tif(typeof str === \"string\") {\n\t\treturn str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t} else {\n\t\treturn str;\n\t}\n};\n\nexports.trimPrefix = function(str,unwanted) {\n\tif(typeof str === \"string\" &amp;&amp; typeof unwanted === \"string\") {\n\t\tif(unwanted === \"\") {\n\t\t\treturn str.replace(/^\\s\\s*/, '');\n\t\t} else {\n\t\t\t// Safely regexp-escape the unwanted text\n\t\t\tunwanted = unwanted.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&amp;');\n\t\t\tvar regex = new RegExp('^(' + unwanted + ')+');\n\t\t\treturn str.replace(regex, '');\n\t\t}\n\t} else {\n\t\treturn str;\n\t}\n};\n\nexports.trimSuffix = function(str,unwanted) {\n\tif(typeof str === \"string\" &amp;&amp; typeof unwanted === \"string\") {\n\t\tif(unwanted === \"\") {\n\t\t\treturn str.replace(/\\s\\s*$/, '');\n\t\t} else {\n\t\t\t// Safely regexp-escape the unwanted text\n\t\t\tunwanted = unwanted.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&amp;');\n\t\t\tvar regex = new RegExp('(' + unwanted + ')+$');\n\t\t\treturn str.replace(regex, '');\n\t\t}\n\t} else {\n\t\treturn str;\n\t}\n};\n\n/*\nConvert a string to sentence case (ie capitalise first letter)\n*/\nexports.toSentenceCase = function(str) {\n\treturn (str || \"\").replace(/^\\S/, function(c) {return c.toUpperCase();});\n}\n\n/*\nConvert a string to title case (ie capitalise each initial letter)\n*/\nexports.toTitleCase = function(str) {\n\treturn (str || \"\").replace(/(^|\\s)\\S/g, function(c) {return c.toUpperCase();});\n}\n\n/*\nFind the line break preceding a given position in a string\nReturns position immediately after that line break, or the start of the string\n*/\nexports.findPrecedingLineBreak = function(text,pos) {\n\tvar result = text.lastIndexOf(\"\\n\",pos - 1);\n\tif(result === -1) {\n\t\tresult = 0;\n\t} else {\n\t\tresult++;\n\t\tif(text.charAt(result) === \"\\r\") {\n\t\t\tresult++;\n\t\t}\n\t}\n\treturn result;\n};\n\n/*\nFind the line break following a given position in a string\n*/\nexports.findFollowingLineBreak = function(text,pos) {\n\t// Cut to just past the following line break, or to the end of the text\n\tvar result = text.indexOf(\"\\n\",pos);\n\tif(result === -1) {\n\t\tresult = text.length;\n\t} else {\n\t\tif(text.charAt(result) === \"\\r\") {\n\t\t\tresult++;\n\t\t}\n\t}\n\treturn result;\n};\n\n/*\nReturn the number of keys in an object\n*/\nexports.count = function(object) {\n\treturn Object.keys(object || {}).length;\n};\n\n/*\nDetermine whether an array-item is an object-property\n*/\nexports.hopArray = function(object,array) {\n\tfor(var i=0; i&lt;array.length; i++) {\n\t\tif($tw.utils.hop(object,array[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n/*\nRemove entries from an array\n\tarray: array to modify\n\tvalue: a single value to remove, or an array of values to remove\n*/\nexports.removeArrayEntries = function(array,value) {\n\tvar t,p;\n\tif($tw.utils.isArray(value)) {\n\t\tfor(t=0; t&lt;value.length; t++) {\n\t\t\tp = array.indexOf(value[t]);\n\t\t\tif(p !== -1) {\n\t\t\t\tarray.splice(p,1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tp = array.indexOf(value);\n\t\tif(p !== -1) {\n\t\t\tarray.splice(p,1);\n\t\t}\n\t}\n\treturn array;\n};\n\n/*\nCheck whether any members of a hashmap are present in another hashmap\n*/\nexports.checkDependencies = function(dependencies,changes) {\n\tvar hit = false;\n\t$tw.utils.each(changes,function(change,title) {\n\t\tif($tw.utils.hop(dependencies,title)) {\n\t\t\thit = true;\n\t\t}\n\t});\n\treturn hit;\n};\n\nexports.extend = function(object /* [, src] */) {\n\t$tw.utils.each(Array.prototype.slice.call(arguments, 1), function(source) {\n\t\tif(source) {\n\t\t\tfor(var property in source) {\n\t\t\t\tobject[property] = source[property];\n\t\t\t}\n\t\t}\n\t});\n\treturn object;\n};\n\nexports.deepCopy = function(object) {\n\tvar result,t;\n\tif($tw.utils.isArray(object)) {\n\t\t// Copy arrays\n\t\tresult = object.slice(0);\n\t} else if(typeof object === \"object\") {\n\t\tresult = {};\n\t\tfor(t in object) {\n\t\t\tif(object[t] !== undefined) {\n\t\t\t\tresult[t] = $tw.utils.deepCopy(object[t]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tresult = object;\n\t}\n\treturn result;\n};\n\nexports.extendDeepCopy = function(object,extendedProperties) {\n\tvar result = $tw.utils.deepCopy(object),t;\n\tfor(t in extendedProperties) {\n\t\tif(extendedProperties[t] !== undefined) {\n\t\t\tresult[t] = $tw.utils.deepCopy(extendedProperties[t]);\n\t\t}\n\t}\n\treturn result;\n};\n\nexports.deepFreeze = function deepFreeze(object) {\n\tvar property, key;\n\tif(object) {\n\t\tObject.freeze(object);\n\t\tfor(key in object) {\n\t\t\tproperty = object[key];\n\t\t\tif($tw.utils.hop(object,key) &amp;&amp; (typeof property === \"object\") &amp;&amp; !Object.isFrozen(property)) {\n\t\t\t\tdeepFreeze(property);\n\t\t\t}\n\t\t}\n\t}\n};\n\nexports.slowInSlowOut = function(t) {\n\treturn (1 - ((Math.cos(t * Math.PI) + 1) / 2));\n};\n\nexports.formatTitleString = function(template,options) {\n\tvar base = options.base || \"\",\n\t\tseparator = options.separator || \"\",\n\t\tcounter = options.counter || \"\";\n\tvar result = \"\",\n\t\tt = template,\n\t\tmatches = [\n\t\t\t[/^\\$basename\\$/i, function() {\n\t\t\t\treturn base;\n\t\t\t}],\n\t\t\t[/^\\$count:(\\d+)\\$/i, function(match) {\n\t\t\t\treturn $tw.utils.pad(counter,match[1]);\n\t\t\t}],\n\t\t\t[/^\\$separator\\$/i, function() {\n\t\t\t\treturn separator;\n\t\t\t}],\n\t\t\t[/^\\$count\\$/i, function() {\n\t\t\t\treturn counter + \"\";\n\t\t\t}]\n\t\t];\n\twhile(t.length){\n\t\tvar matchString = \"\";\n\t\t$tw.utils.each(matches, function(m) {\n\t\t\tvar match = m[0].exec(t);\n\t\t\tif(match) {\n\t\t\t\tmatchString = m[1].call(null,match);\n\t\t\t\tt = t.substr(match[0].length);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif(matchString) {\n\t\t\tresult += matchString;\n\t\t} else {\n\t\t\tresult += t.charAt(0);\n\t\t\tt = t.substr(1);\n\t\t}\n\t}\n\tresult = result.replace(/\\\\(.)/g,\"$1\");\n\treturn result;\n};\n\nexports.formatDateString = function(date,template) {\n\tvar result = \"\",\n\t\tt = template,\n\t\tmatches = [\n\t\t\t[/^0hh12/, function() {\n\t\t\t\treturn $tw.utils.pad($tw.utils.getHours12(date));\n\t\t\t}],\n\t\t\t[/^wYYYY/, function() {\n\t\t\t\treturn $tw.utils.pad($tw.utils.getYearForWeekNo(date),4);\n\t\t\t}],\n\t\t\t[/^hh12/, function() {\n\t\t\t\treturn $tw.utils.getHours12(date);\n\t\t\t}],\n\t\t\t[/^DDth/, function() {\n\t\t\t\treturn date.getDate() + $tw.utils.getDaySuffix(date);\n\t\t\t}],\n\t\t\t[/^YYYY/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getFullYear(),4);\n\t\t\t}],\n\t\t\t[/^aYYYY/, function() {\n\t\t\t\treturn $tw.utils.pad(Math.abs(date.getFullYear()),4);\n\t\t\t}],\n\t\t\t[/^\\{era:([^,\\|}]*)\\|([^}\\|]*)\\|([^}]*)\\}/, function(match) {\n\t\t\t\tvar year = date.getFullYear();\n\t\t\t\treturn year === 0 ? match[2] : (year &lt; 0 ? match[1] : match[3]);\n\t\t\t}],\n\t\t\t[/^0hh/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getHours());\n\t\t\t}],\n\t\t\t[/^0mm/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getMinutes());\n\t\t\t}],\n\t\t\t[/^0ss/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getSeconds());\n\t\t\t}],\n\t\t\t[/^0XXX/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getMilliseconds(),3);\n\t\t\t}],\n\t\t\t[/^0DD/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getDate());\n\t\t\t}],\n\t\t\t[/^0MM/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getMonth()+1);\n\t\t\t}],\n\t\t\t[/^0WW/, function() {\n\t\t\t\treturn $tw.utils.pad($tw.utils.getWeek(date));\n\t\t\t}],\n\t\t\t[/^ddd/, function() {\n\t\t\t\treturn $tw.language.getString(\"Date/Short/Day/\" + date.getDay());\n\t\t\t}],\n\t\t\t[/^mmm/, function() {\n\t\t\t\treturn $tw.language.getString(\"Date/Short/Month/\" + (date.getMonth() + 1));\n\t\t\t}],\n\t\t\t[/^DDD/, function() {\n\t\t\t\treturn $tw.language.getString(\"Date/Long/Day/\" + date.getDay());\n\t\t\t}],\n\t\t\t[/^MMM/, function() {\n\t\t\t\treturn $tw.language.getString(\"Date/Long/Month/\" + (date.getMonth() + 1));\n\t\t\t}],\n\t\t\t[/^TZD/, function() {\n\t\t\t\tvar tz = date.getTimezoneOffset(),\n\t\t\t\tatz = Math.abs(tz);\n\t\t\t\treturn (tz &lt; 0 ? '+' : '-') + $tw.utils.pad(Math.floor(atz / 60)) + ':' + $tw.utils.pad(atz % 60);\n\t\t\t}],\n\t\t\t[/^wYY/, function() {\n\t\t\t\treturn $tw.utils.pad($tw.utils.getYearForWeekNo(date) - 2000);\n\t\t\t}],\n\t\t\t[/^[ap]m/, function() {\n\t\t\t\treturn $tw.utils.getAmPm(date).toLowerCase();\n\t\t\t}],\n\t\t\t[/^hh/, function() {\n\t\t\t\treturn date.getHours();\n\t\t\t}],\n\t\t\t[/^mm/, function() {\n\t\t\t\treturn date.getMinutes();\n\t\t\t}],\n\t\t\t[/^ss/, function() {\n\t\t\t\treturn date.getSeconds();\n\t\t\t}],\n\t\t\t[/^XXX/, function() {\n\t\t\t\treturn date.getMilliseconds();\n\t\t\t}],\n\t\t\t[/^[AP]M/, function() {\n\t\t\t\treturn $tw.utils.getAmPm(date).toUpperCase();\n\t\t\t}],\n\t\t\t[/^DD/, function() {\n\t\t\t\treturn date.getDate();\n\t\t\t}],\n\t\t\t[/^MM/, function() {\n\t\t\t\treturn date.getMonth() + 1;\n\t\t\t}],\n\t\t\t[/^WW/, function() {\n\t\t\t\treturn $tw.utils.getWeek(date);\n\t\t\t}],\n\t\t\t[/^YY/, function() {\n\t\t\t\treturn $tw.utils.pad(date.getFullYear() - 2000);\n\t\t\t}]\n\t\t];\n\t// If the user wants everything in UTC, shift the datestamp\n\t// Optimize for format string that essentially means\n\t// 'return raw UTC (tiddlywiki style) date string.'\n\tif(t.indexOf(\"[UTC]\") == 0 ) {\n\t\tif(t == \"[UTC]YYYY0MM0DD0hh0mm0ssXXX\")\n\t\t\treturn $tw.utils.stringifyDate(new Date());\n\t\tvar offset = date.getTimezoneOffset() ; // in minutes\n\t\tdate = new Date(date.getTime()+offset*60*1000) ;\n\t\tt = t.substr(5) ;\n\t}\n\twhile(t.length){\n\t\tvar matchString = \"\";\n\t\t$tw.utils.each(matches, function(m) {\n\t\t\tvar match = m[0].exec(t);\n\t\t\tif(match) {\n\t\t\t\tmatchString = m[1].call(null,match);\n\t\t\t\tt = t.substr(match[0].length);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif(matchString) {\n\t\t\tresult += matchString;\n\t\t} else {\n\t\t\tresult += t.charAt(0);\n\t\t\tt = t.substr(1);\n\t\t}\n\t}\n\tresult = result.replace(/\\\\(.)/g,\"$1\");\n\treturn result;\n};\n\nexports.getAmPm = function(date) {\n\treturn $tw.language.getString(\"Date/Period/\" + (date.getHours() &gt;= 12 ? \"pm\" : \"am\"));\n};\n\nexports.getDaySuffix = function(date) {\n\treturn $tw.language.getString(\"Date/DaySuffix/\" + date.getDate());\n};\n\nexports.getWeek = function(date) {\n\tvar dt = new Date(date.getTime());\n\tvar d = dt.getDay();\n\tif(d === 0) {\n\t\td = 7; // JavaScript Sun=0, ISO Sun=7\n\t}\n\tdt.setTime(dt.getTime() + (4 - d) * 86400000);// shift day to Thurs of same week to calculate weekNo\n\tvar x = new Date(dt.getFullYear(),0,1);\n\tvar n = Math.floor((dt.getTime() - x.getTime()) / 86400000);\n\treturn Math.floor(n / 7) + 1;\n};\n\nexports.getYearForWeekNo = function(date) {\n\tvar dt = new Date(date.getTime());\n\tvar d = dt.getDay();\n\tif(d === 0) {\n\t\td = 7; // JavaScript Sun=0, ISO Sun=7\n\t}\n\tdt.setTime(dt.getTime() + (4 - d) * 86400000);// shift day to Thurs of same week\n\treturn dt.getFullYear();\n};\n\nexports.getHours12 = function(date) {\n\tvar h = date.getHours();\n\treturn h &gt; 12 ? h-12 : ( h &gt; 0 ? h : 12 );\n};\n\n/*\nConvert a date delta in milliseconds into a string representation of \"23 seconds ago\", \"27 minutes ago\" etc.\n\tdelta: delta in milliseconds\nReturns an object with these members:\n\tdescription: string describing the delta period\n\tupdatePeriod: time in millisecond until the string will be inaccurate\n*/\nexports.getRelativeDate = function(delta) {\n\tvar futurep = false;\n\tif(delta &lt; 0) {\n\t\tdelta = -1 * delta;\n\t\tfuturep = true;\n\t}\n\tvar units = [\n\t\t{name: \"Years\",   duration:      365 * 24 * 60 * 60 * 1000},\n\t\t{name: \"Months\",  duration: (365/12) * 24 * 60 * 60 * 1000},\n\t\t{name: \"Days\",    duration:            24 * 60 * 60 * 1000},\n\t\t{name: \"Hours\",   duration:                 60 * 60 * 1000},\n\t\t{name: \"Minutes\", duration:                      60 * 1000},\n\t\t{name: \"Seconds\", duration:                           1000}\n\t];\n\tfor(var t=0; t&lt;units.length; t++) {\n\t\tvar result = Math.floor(delta / units[t].duration);\n\t\tif(result &gt;= 2) {\n\t\t\treturn {\n\t\t\t\tdelta: delta,\n\t\t\t\tdescription: $tw.language.getString(\n\t\t\t\t\t\"RelativeDate/\" + (futurep ? \"Future\" : \"Past\") + \"/\" + units[t].name,\n\t\t\t\t\t{variables:\n\t\t\t\t\t\t{period: result.toString()}\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tupdatePeriod: units[t].duration\n\t\t\t};\n\t\t}\n\t}\n\treturn {\n\t\tdelta: delta,\n\t\tdescription: $tw.language.getString(\n\t\t\t\"RelativeDate/\" + (futurep ? \"Future\" : \"Past\") + \"/Second\",\n\t\t\t{variables:\n\t\t\t\t{period: \"1\"}\n\t\t\t}\n\t\t),\n\t\tupdatePeriod: 1000\n\t};\n};\n\n// Convert &amp; to \"&amp;amp;\", &lt; to \"&amp;lt;\", &gt; to \"&amp;gt;\", \" to \"&amp;quot;\"\nexports.htmlEncode = function(s) {\n\tif(s) {\n\t\treturn s.toString().replace(/&amp;/mg,\"&amp;amp;\").replace(/&lt;/mg,\"&amp;lt;\").replace(/&gt;/mg,\"&amp;gt;\").replace(/\\\"/mg,\"&amp;quot;\");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n// Converts like htmlEncode, but forgets the double quote for brevity\nexports.htmlTextEncode = function(s) {\n\tif(s) {\n\t\treturn s.toString().replace(/&amp;/mg,\"&amp;amp;\").replace(/&lt;/mg,\"&amp;lt;\").replace(/&gt;/mg,\"&amp;gt;\");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n// Converts all HTML entities to their character equivalents\nexports.entityDecode = function(s) {\n\tvar converter = String.fromCodePoint || String.fromCharCode,\n\t\te = s.substr(1,s.length-2), // Strip the &amp; and the ;\n\t\tc;\n\tif(e.charAt(0) === \"#\") {\n\t\tif(e.charAt(1) === \"x\" || e.charAt(1) === \"X\") {\n\t\t\tc = parseInt(e.substr(2),16);\n\t\t} else {\n\t\t\tc = parseInt(e.substr(1),10);\n\t\t}\n\t\tif(isNaN(c)) {\n\t\t\treturn s;\n\t\t} else {\n\t\t\treturn converter(c);\n\t\t}\n\t} else {\n\t\tc = $tw.config.htmlEntities[e];\n\t\tif(c) {\n\t\t\treturn converter(c);\n\t\t} else {\n\t\t\treturn s; // Couldn't convert it as an entity, just return it raw\n\t\t}\n\t}\n};\n\nexports.unescapeLineBreaks = function(s) {\n\treturn s.replace(/\\\\n/mg,\"\\n\").replace(/\\\\b/mg,\" \").replace(/\\\\s/mg,\"\\\\\").replace(/\\r/mg,\"\");\n};\n\n/*\n * Returns an escape sequence for given character. Uses \\x for characters &lt;=\n * 0xFF to save space, \\u for the rest.\n *\n * The code needs to be in sync with th code template in the compilation\n * function for \"action\" nodes.\n */\n// Copied from peg.js, thanks to David Majda\nexports.escape = function(ch) {\n\tvar charCode = ch.charCodeAt(0);\n\tif(charCode &lt;= 0xFF) {\n\t\treturn '\\\\x' + $tw.utils.pad(charCode.toString(16).toUpperCase());\n\t} else {\n\t\treturn '\\\\u' + $tw.utils.pad(charCode.toString(16).toUpperCase(),4);\n\t}\n};\n\n// Turns a string into a legal JavaScript string\n// Copied from peg.js, thanks to David Majda\nexports.stringify = function(s, rawUnicode) {\n\t/*\n\t* ECMA-262, 5th ed., 7.8.4: All characters may appear literally in a string\n\t* literal except for the closing quote character, backslash, carriage return,\n\t* line separator, paragraph separator, and line feed. Any character may\n\t* appear in the form of an escape sequence.\n\t*\n\t* For portability, we also escape all non-ASCII characters.\n\t*/\n\tvar regex = rawUnicode ? /[\\x00-\\x1f]/g : /[\\x00-\\x1f\\x80-\\uFFFF]/g;\n\treturn (s || \"\")\n\t\t.replace(/\\\\/g, '\\\\\\\\')            // backslash\n\t\t.replace(/\"/g, '\\\\\"')              // double quote character\n\t\t.replace(/'/g, \"\\\\'\")              // single quote character\n\t\t.replace(/\\r/g, '\\\\r')             // carriage return\n\t\t.replace(/\\n/g, '\\\\n')             // line feed\n\t\t.replace(regex, exports.escape);   // non-ASCII characters\n};\n\n// Turns a string into a legal JSON string\n// Derived from peg.js, thanks to David Majda\nexports.jsonStringify = function(s, rawUnicode) {\n\t// See http://www.json.org/\n\tvar regex = rawUnicode ? /[\\x00-\\x1f]/g : /[\\x00-\\x1f\\x80-\\uFFFF]/g;\n\treturn (s || \"\")\n\t\t.replace(/\\\\/g, '\\\\\\\\')            // backslash\n\t\t.replace(/\"/g, '\\\\\"')              // double quote character\n\t\t.replace(/\\r/g, '\\\\r')             // carriage return\n\t\t.replace(/\\n/g, '\\\\n')             // line feed\n\t\t.replace(/\\x08/g, '\\\\b')           // backspace\n\t\t.replace(/\\x0c/g, '\\\\f')           // formfeed\n\t\t.replace(/\\t/g, '\\\\t')             // tab\n\t\t.replace(regex,function(s) {\n\t\t\treturn '\\\\u' + $tw.utils.pad(s.charCodeAt(0).toString(16).toUpperCase(),4);\n\t\t}); // non-ASCII characters\n};\n\n/*\nEscape the RegExp special characters with a preceding backslash\n*/\nexports.escapeRegExp = function(s) {\n    return s.replace(/[\\-\\/\\\\\\^\\$\\*\\+\\?\\.\\(\\)\\|\\[\\]\\{\\}]/g, '\\\\$&amp;');\n};\n\n// Checks whether a link target is external, i.e. not a tiddler title\nexports.isLinkExternal = function(to) {\n\tvar externalRegExp = /^(?:file|http|https|mailto|ftp|irc|news|data|skype):[^\\s&lt;&gt;{}\\[\\]`|\"\\\\^]+(?:\\/|\\b)/i;\n\treturn externalRegExp.test(to);\n};\n\nexports.nextTick = function(fn) {\n/*global window: false */\n\tif(typeof process === \"undefined\") {\n\t\t// Apparently it would be faster to use postMessage - http://dbaron.org/log/20100309-faster-timeouts\n\t\twindow.setTimeout(fn,0);\n\t} else {\n\t\tprocess.nextTick(fn);\n\t}\n};\n\n/*\nConvert a hyphenated CSS property name into a camel case one\n*/\nexports.unHyphenateCss = function(propName) {\n\treturn propName.replace(/-([a-z])/gi, function(match0,match1) {\n\t\treturn match1.toUpperCase();\n\t});\n};\n\n/*\nConvert a camelcase CSS property name into a dashed one (\"backgroundColor\" --&gt; \"background-color\")\n*/\nexports.hyphenateCss = function(propName) {\n\treturn propName.replace(/([A-Z])/g, function(match0,match1) {\n\t\treturn \"-\" + match1.toLowerCase();\n\t});\n};\n\n/*\nParse a text reference of one of these forms:\n* title\n* !!field\n* title!!field\n* title##index\n* etc\nReturns an object with the following fields, all optional:\n* title: tiddler title\n* field: tiddler field name\n* index: JSON property index\n*/\nexports.parseTextReference = function(textRef) {\n\t// Separate out the title, field name and/or JSON indices\n\tvar reTextRef = /(?:(.*?)!!(.+))|(?:(.*?)##(.+))|(.*)/mg,\n\t\tmatch = reTextRef.exec(textRef),\n\t\tresult = {};\n\tif(match &amp;&amp; reTextRef.lastIndex === textRef.length) {\n\t\t// Return the parts\n\t\tif(match[1]) {\n\t\t\tresult.title = match[1];\n\t\t}\n\t\tif(match[2]) {\n\t\t\tresult.field = match[2];\n\t\t}\n\t\tif(match[3]) {\n\t\t\tresult.title = match[3];\n\t\t}\n\t\tif(match[4]) {\n\t\t\tresult.index = match[4];\n\t\t}\n\t\tif(match[5]) {\n\t\t\tresult.title = match[5];\n\t\t}\n\t} else {\n\t\t// If we couldn't parse it\n\t\tresult.title = textRef\n\t}\n\treturn result;\n};\n\n/*\nChecks whether a string is a valid fieldname\n*/\nexports.isValidFieldName = function(name) {\n\tif(!name || typeof name !== \"string\") {\n\t\treturn false;\n\t}\n\tname = name.toLowerCase().trim();\n\tvar fieldValidatorRegEx = /^[a-z0-9\\-\\._]+$/mg;\n\treturn fieldValidatorRegEx.test(name);\n};\n\n/*\nExtract the version number from the meta tag or from the boot file\n*/\n\n// Browser version\nexports.extractVersionInfo = function() {\n\tif($tw.packageInfo) {\n\t\treturn $tw.packageInfo.version;\n\t} else {\n\t\tvar metatags = document.getElementsByTagName(\"meta\");\n\t\tfor(var t=0; t&lt;metatags.length; t++) {\n\t\t\tvar m = metatags[t];\n\t\t\tif(m.name === \"tiddlywiki-version\") {\n\t\t\t\treturn m.content;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nGet the animation duration in ms\n*/\nexports.getAnimationDuration = function() {\n\treturn parseInt($tw.wiki.getTiddlerText(\"$:/config/AnimationDuration\",\"400\"),10) || 0;\n};\n\n/*\nHash a string to a number\nDerived from http://stackoverflow.com/a/15710692\n*/\nexports.hashString = function(str) {\n\treturn str.split(\"\").reduce(function(a,b) {\n\t\ta = ((a &lt;&lt; 5) - a) + b.charCodeAt(0);\n\t\treturn a &amp; a;\n\t},0);\n};\n\n/*\nDecode a base64 string\n*/\nexports.base64Decode = function(string64) {\n\treturn base64utf8.base64.decode.call(base64utf8,string64);\n};\n\n/*\nEncode a string to base64\n*/\nexports.base64Encode = function(string64) {\n\treturn base64utf8.base64.encode.call(base64utf8,string64);\n};\n\n/*\nConvert a hashmap into a tiddler dictionary format sequence of name:value pairs\n*/\nexports.makeTiddlerDictionary = function(data) {\n\tvar output = [];\n\tfor(var name in data) {\n\t\toutput.push(name + \": \" + data[name]);\n\t}\n\treturn output.join(\"\\n\");\n};\n\n/*\nHigh resolution microsecond timer for profiling\n*/\nexports.timer = function(base) {\n\tvar m;\n\tif($tw.node) {\n\t\tvar r = process.hrtime();\n\t\tm =  r[0] * 1e3 + (r[1] / 1e6);\n\t} else if(window.performance) {\n\t\tm = performance.now();\n\t} else {\n\t\tm = Date.now();\n\t}\n\tif(typeof base !== \"undefined\") {\n\t\tm = m - base;\n\t}\n\treturn m;\n};\n\n/*\nConvert text and content type to a data URI\n*/\nexports.makeDataUri = function(text,type,_canonical_uri) {\n\ttype = type || \"text/vnd.tiddlywiki\";\n\tvar typeInfo = $tw.config.contentTypeInfo[type] || $tw.config.contentTypeInfo[\"text/plain\"],\n\t\tisBase64 = typeInfo.encoding === \"base64\",\n\t\tparts = [];\n\tif(_canonical_uri) {\n\t\tparts.push(_canonical_uri);\n\t} else {\n\t\tparts.push(\"data:\");\n\t\tparts.push(type);\n\t\tparts.push(isBase64 ? \";base64\" : \"\");\n\t\tparts.push(\",\");\n\t\tparts.push(isBase64 ? text : encodeURIComponent(text));\n\t}\n\treturn parts.join(\"\");\n};\n\n/*\nUseful for finding out the fully escaped CSS selector equivalent to a given tag. For example:\n\n$tw.utils.tagToCssSelector(\"$:/tags/Stylesheet\") --&gt; tc-tagged-\\%24\\%3A\\%2Ftags\\%2FStylesheet\n*/\nexports.tagToCssSelector = function(tagName) {\n\treturn \"tc-tagged-\" + encodeURIComponent(tagName).replace(/[!\"#$%&amp;'()*+,\\-./:;&lt;=&gt;?@[\\\\\\]^`{\\|}~,]/mg,function(c) {\n\t\treturn \"\\\\\" + c;\n\t});\n};\n\n/*\nIE does not have sign function\n*/\nexports.sign = Math.sign || function(x) {\n\tx = +x; // convert to a number\n\tif (x === 0 || isNaN(x)) {\n\t\treturn x;\n\t}\n\treturn x &gt; 0 ? 1 : -1;\n};\n\n/*\nIE does not have an endsWith function\n*/\nexports.strEndsWith = function(str,ending,position) {\n\tif(str.endsWith) {\n\t\treturn str.endsWith(ending,position);\n\t} else {\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position &gt; str.length) {\n\t\t\tposition = str.length;\n\t\t}\n\t\tposition -= ending.length;\n\t\tvar lastIndex = str.indexOf(ending, position);\n\t\treturn lastIndex !== -1 &amp;&amp; lastIndex === position;\n\t}\n};\n\n/*\nReturn system information useful for debugging\n*/\nexports.getSystemInfo = function(str,ending,position) {\n\tvar results = [],\n\t\tsave = function(desc,value) {\n\t\t\tresults.push(desc + \": \" + value);\n\t\t};\n\tif($tw.browser) {\n\t\tsave(\"User Agent\",navigator.userAgent);\n\t\tsave(\"Online Status\",window.navigator.onLine);\n\t}\n\tif($tw.node) {\n\t\tsave(\"Node Version\",process.version);\n\t}\n\treturn results.join(\"\\n\");\n};\n\nexports.parseNumber = function(str) {\n\treturn parseFloat(str) || 0;\n};\n\nexports.parseInt = function(str) {\n\treturn parseInt(str,10) || 0;\n};\n\nexports.stringifyNumber = function(num) {\n\treturn num + \"\";\n};\n\nexports.makeCompareFunction = function(type,options) {\n\toptions = options || {};\n\t// set isCaseSensitive to true if not defined in options\n\tvar isCaseSensitive = (options.isCaseSensitive === false) ? false : true,\n\t\tgt = options.invert ? -1 : +1,\n\t\tlt = options.invert ? +1 : -1,\n\t\tcompare = function(a,b) {\n\t\t\tif(a &gt; b) {\n\t\t\t\treturn gt ;\n\t\t\t} else if(a &lt; b) {\n\t\t\t\treturn lt;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\ttypes = {\n\t\t\t\"number\": function(a,b) {\n\t\t\t\treturn compare($tw.utils.parseNumber(a),$tw.utils.parseNumber(b));\n\t\t\t},\n\t\t\t\"integer\": function(a,b) {\n\t\t\t\treturn compare($tw.utils.parseInt(a),$tw.utils.parseInt(b));\n\t\t\t},\n\t\t\t\"string\": function(a,b) {\n\t\t\t\tif(!isCaseSensitive) {\n\t\t\t\t\ta = a.toLowerCase();\n\t\t\t\t\tb = b.toLowerCase();\n\t\t\t\t}\n\t\t\t\treturn compare(\"\" + a,\"\" + b);\n\t\t\t},\n\t\t\t\"date\": function(a,b) {\n\t\t\t\tvar dateA = $tw.utils.parseDate(a),\n\t\t\t\t\tdateB = $tw.utils.parseDate(b);\n\t\t\t\tif(!isFinite(dateA)) {\n\t\t\t\t\tdateA = new Date(0);\n\t\t\t\t}\n\t\t\t\tif(!isFinite(dateB)) {\n\t\t\t\t\tdateB = new Date(0);\n\t\t\t\t}\n\t\t\t\treturn compare(dateA,dateB);\n\t\t\t},\n\t\t\t\"version\": function(a,b) {\n\t\t\t\treturn $tw.utils.compareVersions(a,b);\n\t\t\t},\n\t\t\t\"alphanumeric\": function(a,b) {\n\t\t\t\tif(!isCaseSensitive) {\n\t\t\t\t\ta = a.toLowerCase();\n\t\t\t\t\tb = b.toLowerCase();\n\t\t\t\t}\n\t\t\t\treturn options.invert ? b.localeCompare(a,undefined,{numeric: true,sensitivity: \"base\"}) : a.localeCompare(b,undefined,{numeric: true,sensitivity: \"base\"});\n\t\t\t}\n\t\t};\n\treturn (types[type] || types[options.defaultType] || types.number);\n};\n\n})();\n","type":"application/javascript","module-type":"utils"},"$:/core/modules/widgets/action-confirm.js":{"title":"$:/core/modules/widgets/action-confirm.js","text":"/*\\\n\ntitle: $:/core/modules/widgets/action-confirm.js\ntype: application/javascript\nmodule-type: widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ConfirmWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nConfirmWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nConfirmWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.parentDomNode = parent;\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nConfirmWidget.prototype.execute = function() {\n\tthis.message = this.getAttribute(\"$message\",$tw.language.getString(\"ConfirmAction\"));\n\tthis.prompt = (this.getAttribute(\"$prompt\",\"yes\") == \"no\" ? false : true);\n\tthis.makeChildWidgets();\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nConfirmWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$message\"] || changedAttributes[\"$prompt\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nConfirmWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tvar invokeActions = true,\n\t\thandled = true,\n\t    \twin = event.event &amp;&amp; event.event.view ? event.event.view : window;\n\tif(this.prompt) {\n\t\tinvokeActions = win.confirm(this.message);\n\t}\n\tif(invokeActions) {\n\t\thandled = this.invokeActions(triggeringWidget,event);\n\t}\n\treturn handled;\n};\n\nConfirmWidget.prototype.allowActionPropagation = function() {\n\treturn false;\n};\n\nexports[\"action-confirm\"] = ConfirmWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-createtiddler.js":{"title":"$:/core/modules/widgets/action-createtiddler.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-createtiddler.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to create a new tiddler with a unique name and specified fields.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw:false, require:false, exports:false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar CreateTiddlerWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nCreateTiddlerWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nCreateTiddlerWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Render children\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nCreateTiddlerWidget.prototype.execute = function() {\n\tthis.actionBaseTitle = this.getAttribute(\"$basetitle\");\n\tthis.hasBase = !!this.actionBaseTitle;\n\tthis.actionSaveTitle = this.getAttribute(\"$savetitle\");\n\tthis.actionSaveDraftTitle = this.getAttribute(\"$savedrafttitle\");\n\tthis.actionTimestamp = this.getAttribute(\"$timestamp\",\"yes\") === \"yes\";\n\t//Following params are new since 5.1.22\n\tthis.actionTemplate = this.getAttribute(\"$template\");\n\tthis.useTemplate = !!this.actionTemplate;\n\tthis.actionOverwrite = this.getAttribute(\"$overwrite\",\"no\");\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nCreateTiddlerWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nCreateTiddlerWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tvar title = this.wiki.getTiddlerText(\"$:/language/DefaultNewTiddlerTitle\"), // Get the initial new-tiddler title\n\t\tfields = {},\n\t\tcreationFields,\n\t\tmodificationFields;\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.charAt(0) !== \"$\") {\n\t\t\tfields[name] = attribute;\n\t\t}\n\t});\n\tif(this.actionTimestamp) {\n\t\tcreationFields = this.wiki.getCreationFields();\n\t\tmodificationFields = this.wiki.getModificationFields();\n\t}\n\tif(this.hasBase &amp;&amp; this.actionOverwrite === \"no\") {\n\t\ttitle = this.wiki.generateNewTitle(this.actionBaseTitle);\n\t} else if (this.hasBase &amp;&amp; this.actionOverwrite === \"yes\") {\n\t\ttitle = this.actionBaseTitle\n\t}\n\t// NO $basetitle BUT $template parameter is available\n\t// the title MUST be unique, otherwise the template would be overwritten\n\tif (!this.hasBase &amp;&amp; this.useTemplate) {\n\t\ttitle = this.wiki.generateNewTitle(this.actionTemplate);\n\t} else if (!this.hasBase &amp;&amp; !this.useTemplate) {\n\t\t// If no $basetitle and no $template then use initial title\n\t\ttitle = this.wiki.generateNewTitle(title);\n\t}\n\tvar templateTiddler = this.wiki.getTiddler(this.actionTemplate) || {};\n\tthis.wiki.addTiddler(new $tw.Tiddler(templateTiddler.fields,creationFields,fields,modificationFields,{title: title}));\n\tvar draftTitle = this.wiki.generateDraftTitle(title);\n\tif(this.actionSaveTitle) {\n\t\tthis.wiki.setTextReference(this.actionSaveTitle,title,this.getVariable(\"currentTiddler\"));\n\t}\n\tif(this.actionSaveDraftTitle) {\n\t\tthis.wiki.setTextReference(this.actionSaveDraftTitle,draftTitle,this.getVariable(\"currentTiddler\"));\n\t}\n\tthis.setVariable(\"createTiddler-title\",title);\n\tthis.setVariable(\"createTiddler-draftTitle\",draftTitle);\n\tthis.refreshChildren();\n\treturn true; // Action was invoked\n};\n\nexports[\"action-createtiddler\"] = CreateTiddlerWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-deletefield.js":{"title":"$:/core/modules/widgets/action-deletefield.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-deletefield.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to delete fields of a tiddler.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar DeleteFieldWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDeleteFieldWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nDeleteFieldWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nDeleteFieldWidget.prototype.execute = function() {\n\tthis.actionTiddler = this.getAttribute(\"$tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.actionField = this.getAttribute(\"$field\");\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nDeleteFieldWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$tiddler\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nDeleteFieldWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tvar self = this,\n\t\ttiddler = this.wiki.getTiddler(self.actionTiddler),\n\t\tremoveFields = {},\n\t\thasChanged = false;\n\tif(this.actionField &amp;&amp; tiddler) {\n\t\tremoveFields[this.actionField] = undefined;\n\t\tif(this.actionField in tiddler.fields) {\n\t\t\thasChanged = true;\n\t\t}\n\t}\n\tif(tiddler) {\n\t\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\t\tif(name.charAt(0) !== \"$\" &amp;&amp; name !== \"title\") {\n\t\t\t\tremoveFields[name] = undefined;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\t\t});\n\t\tif(hasChanged) {\n\t\t\tthis.wiki.addTiddler(new $tw.Tiddler(this.wiki.getCreationFields(),tiddler,removeFields,this.wiki.getModificationFields()));\n\t\t}\n\t}\n\treturn true; // Action was invoked\n};\n\nexports[\"action-deletefield\"] = DeleteFieldWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-deletetiddler.js":{"title":"$:/core/modules/widgets/action-deletetiddler.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-deletetiddler.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to delete a tiddler.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar DeleteTiddlerWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDeleteTiddlerWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nDeleteTiddlerWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nDeleteTiddlerWidget.prototype.execute = function() {\n\tthis.actionFilter = this.getAttribute(\"$filter\");\n\tthis.actionTiddler = this.getAttribute(\"$tiddler\");\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nDeleteTiddlerWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$filter\"] || changedAttributes[\"$tiddler\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nDeleteTiddlerWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tvar tiddlers = [];\n\tif(this.actionFilter) {\n\t\ttiddlers = this.wiki.filterTiddlers(this.actionFilter,this);\n\t}\n\tif(this.actionTiddler) {\n\t\ttiddlers.push(this.actionTiddler);\n\t}\n\tfor(var t=0; t&lt;tiddlers.length; t++) {\n\t\tthis.wiki.deleteTiddler(tiddlers[t]);\n\t}\n\treturn true; // Action was invoked\n};\n\nexports[\"action-deletetiddler\"] = DeleteTiddlerWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-listops.js":{"title":"$:/core/modules/widgets/action-listops.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-listops.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to apply list operations to any tiddler field (defaults to the 'list' field of the current tiddler)\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\nvar ActionListopsWidget = function(parseTreeNode, options) {\n\tthis.initialise(parseTreeNode, options);\n};\n/**\n * Inherit from the base widget class\n */\nActionListopsWidget.prototype = new Widget();\n/**\n * Render this widget into the DOM\n */\nActionListopsWidget.prototype.render = function(parent, nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n/**\n * Compute the internal state of the widget\n */\nActionListopsWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.target = this.getAttribute(\"$tiddler\", this.getVariable(\n\t\t\"currentTiddler\"));\n\tthis.filter = this.getAttribute(\"$filter\");\n\tthis.subfilter = this.getAttribute(\"$subfilter\");\n\tthis.listField = this.getAttribute(\"$field\", \"list\");\n\tthis.listIndex = this.getAttribute(\"$index\");\n\tthis.filtertags = this.getAttribute(\"$tags\");\n};\n/**\n * \tRefresh the widget by ensuring our attributes are up to date\n */\nActionListopsWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n/**\n * \tInvoke the action associated with this widget\n */\nActionListopsWidget.prototype.invokeAction = function(triggeringWidget,\n\tevent) {\n\t//Apply the specified filters to the lists\n\tvar field = this.listField,\n\t\tindex,\n\t\tlist = this.listField;\n\tif(this.listIndex) {\n\t\tfield = undefined;\n\t\tindex = this.listIndex;\n\t\tlist = this.listIndex;\n\t}\n\tif(this.filter) {\n\t\tthis.wiki.setText(this.target, field, index, $tw.utils.stringifyList(\n\t\t\tthis.wiki\n\t\t\t.filterTiddlers(this.filter, this)));\n\t}\n\tif(this.subfilter) {\n\t\tvar inputList = this.wiki.getTiddlerList(this.target,field,index),\n\t\t\tsubfilter = $tw.utils.stringifyList(inputList) + \" \" + this.subfilter;\n\t\tthis.wiki.setText(this.target, field, index, $tw.utils.stringifyList(this.wiki.filterTiddlers(subfilter,this)));\n\t}\n\tif(this.filtertags) {\n\t\tvar tiddler = this.wiki.getTiddler(this.target),\n\t\t\toldtags = tiddler ? (tiddler.fields.tags || []).slice(0) : [],\n\t\t\ttagfilter = $tw.utils.stringifyList(oldtags) + \" \" + this.filtertags,\n\t\t\tnewtags = this.wiki.filterTiddlers(tagfilter,this);\n\t\tif($tw.utils.stringifyList(oldtags.sort()) !== $tw.utils.stringifyList(newtags.sort())) {\n\t\t\tthis.wiki.setText(this.target,\"tags\",undefined,$tw.utils.stringifyList(newtags));\n\t\t}\n\t}\n\treturn true; // Action was invoked\n};\n\nexports[\"action-listops\"] = ActionListopsWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-log.js":{"title":"$:/core/modules/widgets/action-log.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-log.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to log debug messages\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar LogWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nLogWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nLogWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\nLogWidget.prototype.execute = function(){\n\tthis.message = this.getAttribute(\"$$message\",\"debug\");\n\tthis.logAll = this.getAttribute(\"$$all\",\"no\") === \"yes\" ? true : false;\n\tthis.filter = this.getAttribute(\"$$filter\");\n}\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nLogWidget.prototype.refresh = function(changedTiddlers) {\n\tthis.refreshSelf();\n\treturn true;\n};\n\n/*\nInvoke the action associated with this widget\n*/\nLogWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tthis.log();\n\treturn true; // Action was invoked\n};\n\nLogWidget.prototype.log = function() {\n\tvar data = {},\n\t\tdataCount,\n\t\tallVars = {},\n\t\tfilteredVars;\n\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.substring(0,2) !== \"$$\") {\n\t\t\tdata[name] = attribute;\n\t\t}\n\t});\n\n\tfor(var v in this.variables) {\n\t\tallVars[v] = this.getVariable(v,{defaultValue:\"\"});\n\t}\n\tif(this.filter) {\n\t\tfilteredVars = this.wiki.compileFilter(this.filter).call(this.wiki,this.wiki.makeTiddlerIterator(allVars));\n\t\t$tw.utils.each(filteredVars,function(name) {\n\t\t\tdata[name] = allVars[name];\n\t\t});\n\t}\n\tdataCount = $tw.utils.count(data);\n\n\tconsole.group(this.message);\n\tif(dataCount &gt; 0) {\n\t\t$tw.utils.logTable(data);\n\t}\n\tif(this.logAll || !dataCount) {\n\t\tconsole.groupCollapsed(\"All variables\");\n\t\t$tw.utils.logTable(allVars);\n\t\tconsole.groupEnd();\n\t}\n\tconsole.groupEnd();\n}\n\nexports[\"action-log\"] = LogWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-navigate.js":{"title":"$:/core/modules/widgets/action-navigate.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-navigate.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to navigate to a tiddler\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar NavigateWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nNavigateWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nNavigateWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nNavigateWidget.prototype.execute = function() {\n\tthis.actionTo = this.getAttribute(\"$to\");\n\tthis.actionScroll = this.getAttribute(\"$scroll\");\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nNavigateWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$to\"] || changedAttributes[\"$scroll\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nNavigateWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tevent = event || {};\n\tvar bounds = triggeringWidget &amp;&amp; triggeringWidget.getBoundingClientRect &amp;&amp; triggeringWidget.getBoundingClientRect(),\n\t\tsuppressNavigation = event.metaKey || event.ctrlKey || (event.button === 1);\n\tif(this.actionScroll === \"yes\") {\n\t\tsuppressNavigation = false;\n\t} else if(this.actionScroll === \"no\") {\n\t\tsuppressNavigation = true;\n\t}\n\tthis.dispatchEvent({\n\t\ttype: \"tm-navigate\",\n\t\tnavigateTo: this.actionTo === undefined ? this.getVariable(\"currentTiddler\") : this.actionTo,\n\t\tnavigateFromTitle: this.getVariable(\"storyTiddler\"),\n\t\tnavigateFromNode: triggeringWidget,\n\t\tnavigateFromClientRect: bounds &amp;&amp; { top: bounds.top, left: bounds.left, width: bounds.width, right: bounds.right, bottom: bounds.bottom, height: bounds.height\n\t\t},\n\t\tnavigateSuppressNavigation: suppressNavigation,\n\t\tmetaKey: event.metaKey,\n\t\tctrlKey: event.ctrlKey,\n\t\taltKey: event.altKey,\n\t\tshiftKey: event.shiftKey,\n\t\tevent: event\n\t});\n\treturn true; // Action was invoked\n};\n\nexports[\"action-navigate\"] = NavigateWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-popup.js":{"title":"$:/core/modules/widgets/action-popup.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-popup.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to trigger a popup.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ActionPopupWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nActionPopupWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nActionPopupWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nActionPopupWidget.prototype.execute = function() {\n\tthis.actionState = this.getAttribute(\"$state\");\n\tthis.actionCoords = this.getAttribute(\"$coords\");\n\tthis.floating = this.getAttribute(\"$floating\",\"no\") === \"yes\";\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nActionPopupWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$state\"] || changedAttributes[\"$coords\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nActionPopupWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\t// Trigger the popup\n\tvar popupLocationRegExp = /^\\((-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+)\\)$/,\n\t\tmatch = popupLocationRegExp.exec(this.actionCoords || \"\");\n\tif(match) {\n\t\t$tw.popup.triggerPopup({\n\t\t\tdomNode: null,\n\t\t\tdomNodeRect: {\n\t\t\t\tleft: parseFloat(match[1]),\n\t\t\t\ttop: parseFloat(match[2]),\n\t\t\t\twidth: parseFloat(match[3]),\n\t\t\t\theight: parseFloat(match[4])\n\t\t\t},\n\t\t\ttitle: this.actionState,\n\t\t\twiki: this.wiki,\n\t\t\tfloating: this.floating\n\t\t});\n\t} else {\n\t\t$tw.popup.cancel(0);\n\t}\n\treturn true; // Action was invoked\n};\n\nexports[\"action-popup\"] = ActionPopupWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-sendmessage.js":{"title":"$:/core/modules/widgets/action-sendmessage.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-sendmessage.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to send a message\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar SendMessageWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nSendMessageWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nSendMessageWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nSendMessageWidget.prototype.execute = function() {\n\tthis.actionMessage = this.getAttribute(\"$message\");\n\tthis.actionParam = this.getAttribute(\"$param\");\n\tthis.actionName = this.getAttribute(\"$name\");\n\tthis.actionValue = this.getAttribute(\"$value\",\"\");\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nSendMessageWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(Object.keys(changedAttributes).length) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nSendMessageWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\t// Get the string parameter\n\tvar param = this.actionParam;\n\t// Assemble the attributes as a hashmap\n\tvar paramObject = Object.create(null);\n\tvar count = 0;\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.charAt(0) !== \"$\") {\n\t\t\tparamObject[name] = attribute;\n\t\t\tcount++;\n\t\t}\n\t});\n\t// Add name/value pair if present\n\tif(this.actionName) {\n\t\tparamObject[this.actionName] = this.actionValue;\n\t}\n\t// Dispatch the message\n\tthis.dispatchEvent({\n\t\ttype: this.actionMessage,\n\t\tparam: param,\n\t\tparamObject: paramObject,\n\t\ttiddlerTitle: this.getVariable(\"currentTiddler\"),\n\t\tnavigateFromTitle: this.getVariable(\"storyTiddler\"),\n\t\tevent: event\n\t});\n\treturn true; // Action was invoked\n};\n\nexports[\"action-sendmessage\"] = SendMessageWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/action-setfield.js":{"title":"$:/core/modules/widgets/action-setfield.js","text":"/*\\\ntitle: $:/core/modules/widgets/action-setfield.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to set a single field or index on a tiddler.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar SetFieldWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nSetFieldWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nSetFieldWidget.prototype.render = function(parent,nextSibling) {\n\tthis.computeAttributes();\n\tthis.execute();\n};\n\n/*\nCompute the internal state of the widget\n*/\nSetFieldWidget.prototype.execute = function() {\n\tthis.actionTiddler = this.getAttribute(\"$tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.actionField = this.getAttribute(\"$field\");\n\tthis.actionIndex = this.getAttribute(\"$index\");\n\tthis.actionValue = this.getAttribute(\"$value\");\n\tthis.actionTimestamp = this.getAttribute(\"$timestamp\",\"yes\") === \"yes\";\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nSetFieldWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"$tiddler\"] || changedAttributes[\"$field\"] || changedAttributes[\"$index\"] || changedAttributes[\"$value\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nInvoke the action associated with this widget\n*/\nSetFieldWidget.prototype.invokeAction = function(triggeringWidget,event) {\n\tvar self = this,\n\t\toptions = {};\n\toptions.suppressTimestamp = !this.actionTimestamp;\n\tif((typeof this.actionField == \"string\") || (typeof this.actionIndex == \"string\")  || (typeof this.actionValue == \"string\")) {\n\t\tthis.wiki.setText(this.actionTiddler,this.actionField,this.actionIndex,this.actionValue,options);\n\t}\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.charAt(0) !== \"$\") {\n\t\t\tself.wiki.setText(self.actionTiddler,name,undefined,attribute,options);\n\t\t}\n\t});\n\treturn true; // Action was invoked\n};\n\nexports[\"action-setfield\"] = SetFieldWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/browse.js":{"title":"$:/core/modules/widgets/browse.js","text":"/*\\\ntitle: $:/core/modules/widgets/browse.js\ntype: application/javascript\nmodule-type: widget\n\nBrowse widget for browsing for files to import\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar BrowseWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nBrowseWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nBrowseWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create element\n\tvar domNode = this.document.createElement(\"input\");\n\tdomNode.setAttribute(\"type\",\"file\");\n\tif(this.browseMultiple) {\n\t\tdomNode.setAttribute(\"multiple\",\"multiple\");\n\t}\n\tif(this.tooltip) {\n\t\tdomNode.setAttribute(\"title\",this.tooltip);\n\t}\n\t// Nw.js supports \"nwsaveas\" to force a \"save as\" dialogue that allows a new or existing file to be selected\n\tif(this.nwsaveas) {\n\t\tdomNode.setAttribute(\"nwsaveas\",this.nwsaveas);\n\t}\n\tif(this.accept) {\n\t\tdomNode.setAttribute(\"accept\",this.accept);\n\t}\n\t// Nw.js supports \"webkitdirectory\" and \"nwdirectory\" to allow a directory to be selected\n\tif(this.webkitdirectory) {\n\t\tdomNode.setAttribute(\"webkitdirectory\",this.webkitdirectory);\n\t}\n\tif(this.nwdirectory) {\n\t\tdomNode.setAttribute(\"nwdirectory\",this.nwdirectory);\n\t}\n\t// Add a click event handler\n\tdomNode.addEventListener(\"change\",function (event) {\n\t\tif(self.message) {\n\t\t\tself.dispatchEvent({type: self.message, param: self.param, files: event.target.files});\n\t\t} else {\n\t\t\tself.wiki.readFiles(event.target.files,{\n\t\t\t\tcallback: function(tiddlerFieldsArray) {\n\t\t\t\t\tself.dispatchEvent({type: \"tm-import-tiddlers\", param: JSON.stringify(tiddlerFieldsArray)});\n\t\t\t\t},\n\t\t\t\tdeserializer: self.deserializer\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t},false);\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nBrowseWidget.prototype.execute = function() {\n\tthis.browseMultiple = this.getAttribute(\"multiple\");\n\tthis.deserializer = this.getAttribute(\"deserializer\");\n\tthis.message = this.getAttribute(\"message\");\n\tthis.param = this.getAttribute(\"param\");\n\tthis.tooltip = this.getAttribute(\"tooltip\");\n\tthis.nwsaveas = this.getAttribute(\"nwsaveas\");\n\tthis.accept = this.getAttribute(\"accept\");\n\tthis.webkitdirectory = this.getAttribute(\"webkitdirectory\");\n\tthis.nwdirectory = this.getAttribute(\"nwdirectory\");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nBrowseWidget.prototype.refresh = function(changedTiddlers) {\n\treturn false;\n};\n\nexports.browse = BrowseWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/button.js":{"title":"$:/core/modules/widgets/button.js","text":"/*\\\ntitle: $:/core/modules/widgets/button.js\ntype: application/javascript\nmodule-type: widget\n\nButton widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ButtonWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nButtonWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nButtonWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this,\n\t\ttag = \"button\",\n\t\tdomNode;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create element\n\tif(this.buttonTag &amp;&amp; $tw.config.htmlUnsafeElements.indexOf(this.buttonTag) === -1) {\n\t\ttag = this.buttonTag;\n\t}\n\tdomNode = this.document.createElement(tag);\n\tthis.domNode = domNode;\n\t// Assign classes\n\tvar classes = this[\"class\"].split(\" \") || [],\n\t\tisPoppedUp = (this.popup || this.popupTitle) &amp;&amp; this.isPoppedUp();\n\tif(this.selectedClass) {\n\t\tif((this.set || this.setTitle) &amp;&amp; this.setTo &amp;&amp; this.isSelected()) {\n\t\t\t$tw.utils.pushTop(classes,this.selectedClass.split(\" \"));\n\t\t}\n\t\tif(isPoppedUp) {\n\t\t\t$tw.utils.pushTop(classes,this.selectedClass.split(\" \"));\n\t\t}\n\t}\n\tif(isPoppedUp) {\n\t\t$tw.utils.pushTop(classes,\"tc-popup-handle\");\n\t}\n\tdomNode.className = classes.join(\" \");\n\t// Assign other attributes\n\tif(this.style) {\n\t\tdomNode.setAttribute(\"style\",this.style);\n\t}\n\tif(this.tooltip) {\n\t\tdomNode.setAttribute(\"title\",this.tooltip);\n\t}\n\tif(this[\"aria-label\"]) {\n\t\tdomNode.setAttribute(\"aria-label\",this[\"aria-label\"]);\n\t}\n\tif(this.popup || this.popupTitle) {\n\t\tdomNode.setAttribute(\"aria-expanded\",isPoppedUp ? \"true\" : \"false\");\n\t}\n\t// Set the tabindex\n\tif(this.tabIndex) {\n\t\tdomNode.setAttribute(\"tabindex\",this.tabIndex);\n\t}\n\tif(this.isDisabled === \"yes\") {\n\t\tdomNode.setAttribute(\"disabled\",true);\n\t}\n\t// Add a click event handler\n\tdomNode.addEventListener(\"click\",function (event) {\n\t\tvar handled = false;\n\t\tif(self.invokeActions(self,event)) {\n\t\t\thandled = true;\n\t\t}\n\t\tif(self.to) {\n\t\t\tself.navigateTo(event);\n\t\t\thandled = true;\n\t\t}\n\t\tif(self.message) {\n\t\t\tself.dispatchMessage(event);\n\t\t\thandled = true;\n\t\t}\n\t\tif(self.popup || self.popupTitle) {\n\t\t\tself.triggerPopup(event);\n\t\t\thandled = true;\n\t\t}\n\t\tif(self.set || self.setTitle) {\n\t\t\tself.setTiddler();\n\t\t\thandled = true;\n\t\t}\n\t\tif(self.actions) {\n\t\t\tvar modifierKey = $tw.keyboardManager.getEventModifierKeyDescriptor(event);\n\t\t\tself.invokeActionString(self.actions,self,event,{modifier: modifierKey});\n\t\t}\n\t\tif(handled) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\treturn handled;\n\t},false);\n\t// Make it draggable if required\n\tif(this.dragTiddler || this.dragFilter) {\n\t\t$tw.utils.makeDraggable({\n\t\t\tdomNode: domNode,\n\t\t\tdragTiddlerFn: function() {return self.dragTiddler;},\n\t\t\tdragFilterFn: function() {return self.dragFilter;},\n\t\t\twidget: this\n\t\t});\n\t}\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nWe don't allow actions to propagate because we trigger actions ourselves\n*/\nButtonWidget.prototype.allowActionPropagation = function() {\n\treturn false;\n};\n\nButtonWidget.prototype.getBoundingClientRect = function() {\n\treturn this.domNodes[0].getBoundingClientRect();\n};\n\nButtonWidget.prototype.isSelected = function() {\n    return this.setTitle ? (this.setField ? this.wiki.getTiddler(this.setTitle).getFieldString(this.setField) === this.setTo :\n\t\t(this.setIndex ? this.wiki.extractTiddlerDataItem(this.setTitle,this.setIndex) === this.setTo :\n\t\t\tthis.wiki.getTiddlerText(this.setTitle))) || this.defaultSetValue || this.getVariable(\"currentTiddler\") :\n\t\tthis.wiki.getTextReference(this.set,this.defaultSetValue,this.getVariable(\"currentTiddler\")) === this.setTo;\n};\n\nButtonWidget.prototype.isPoppedUp = function() {\n\tvar tiddler = this.popupTitle ? this.wiki.getTiddler(this.popupTitle) : this.wiki.getTiddler(this.popup);\n\tvar result = tiddler &amp;&amp; tiddler.fields.text ? $tw.popup.readPopupState(tiddler.fields.text) : false;\n\treturn result;\n};\n\nButtonWidget.prototype.navigateTo = function(event) {\n\tvar bounds = this.getBoundingClientRect();\n\tthis.dispatchEvent({\n\t\ttype: \"tm-navigate\",\n\t\tnavigateTo: this.to,\n\t\tnavigateFromTitle: this.getVariable(\"storyTiddler\"),\n\t\tnavigateFromNode: this,\n\t\tnavigateFromClientRect: { top: bounds.top, left: bounds.left, width: bounds.width, right: bounds.right, bottom: bounds.bottom, height: bounds.height\n\t\t},\n\t\tnavigateSuppressNavigation: event.metaKey || event.ctrlKey || (event.button === 1),\n\t\tevent: event\n\t});\n};\n\nButtonWidget.prototype.dispatchMessage = function(event) {\n\tthis.dispatchEvent({type: this.message, param: this.param, tiddlerTitle: this.getVariable(\"currentTiddler\"), event: event});\n};\n\nButtonWidget.prototype.triggerPopup = function(event) {\n\tif(this.popupTitle) {\n\t\t$tw.popup.triggerPopup({\n\t\t\tdomNode: this.domNodes[0],\n\t\t\ttitle: this.popupTitle,\n\t\t\twiki: this.wiki,\n\t\t\tnoStateReference: true\n\t\t});\n\t} else {\n\t\t$tw.popup.triggerPopup({\n\t\t\tdomNode: this.domNodes[0],\n\t\t\ttitle: this.popup,\n\t\t\twiki: this.wiki\n\t\t});\n\t}\n};\n\nButtonWidget.prototype.setTiddler = function() {\n\tif(this.setTitle) {\n\t\tthis.setField ? this.wiki.setText(this.setTitle,this.setField,undefined,this.setTo) :\n\t\t\t\t(this.setIndex ? this.wiki.setText(this.setTitle,undefined,this.setIndex,this.setTo) :\n\t\t\t\tthis.wiki.setText(this.setTitle,\"text\",undefined,this.setTo));\n\t} else {\n\t\tthis.wiki.setTextReference(this.set,this.setTo,this.getVariable(\"currentTiddler\"));\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nButtonWidget.prototype.execute = function() {\n\t// Get attributes\n\tthis.actions = this.getAttribute(\"actions\");\n\tthis.to = this.getAttribute(\"to\");\n\tthis.message = this.getAttribute(\"message\");\n\tthis.param = this.getAttribute(\"param\");\n\tthis.set = this.getAttribute(\"set\");\n\tthis.setTo = this.getAttribute(\"setTo\");\n\tthis.popup = this.getAttribute(\"popup\");\n\tthis.hover = this.getAttribute(\"hover\");\n\tthis[\"aria-label\"] = this.getAttribute(\"aria-label\");\n\tthis.tooltip = this.getAttribute(\"tooltip\");\n\tthis.style = this.getAttribute(\"style\");\n\tthis[\"class\"] = this.getAttribute(\"class\",\"\");\n\tthis.selectedClass = this.getAttribute(\"selectedClass\");\n\tthis.defaultSetValue = this.getAttribute(\"default\",\"\");\n\tthis.buttonTag = this.getAttribute(\"tag\");\n\tthis.dragTiddler = this.getAttribute(\"dragTiddler\");\n\tthis.dragFilter = this.getAttribute(\"dragFilter\");\n\tthis.setTitle = this.getAttribute(\"setTitle\");\n\tthis.setField = this.getAttribute(\"setField\");\n\tthis.setIndex = this.getAttribute(\"setIndex\");\n\tthis.popupTitle = this.getAttribute(\"popupTitle\");\n\tthis.tabIndex = this.getAttribute(\"tabindex\");\n\tthis.isDisabled = this.getAttribute(\"disabled\",\"no\");\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\nButtonWidget.prototype.updateDomNodeClasses = function() {\n\tvar domNodeClasses = this.domNode.className.split(\" \"),\n\t\toldClasses = this.class.split(\" \"),\n\t\tnewClasses;\n\tthis[\"class\"] = this.getAttribute(\"class\",\"\");\n\tnewClasses = this.class.split(\" \");\n\t//Remove classes assigned from the old value of class attribute\n\t$tw.utils.each(oldClasses,function(oldClass){\n\t\tvar i = domNodeClasses.indexOf(oldClass);\n\t\tif(i !== -1) {\n\t\t\tdomNodeClasses.splice(i,1);\n\t\t}\n\t});\n\t//Add new classes from updated class attribute.\n\t$tw.utils.pushTop(domNodeClasses,newClasses);\n\tthis.domNode.className = domNodeClasses.join(\" \");\n}\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nButtonWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.actions || changedAttributes.to || changedAttributes.message || changedAttributes.param || changedAttributes.set || changedAttributes.setTo || changedAttributes.popup || changedAttributes.hover || changedAttributes.selectedClass || changedAttributes.style || changedAttributes.dragFilter || changedAttributes.dragTiddler || (this.set &amp;&amp; changedTiddlers[this.set]) || (this.popup &amp;&amp; changedTiddlers[this.popup]) || (this.popupTitle &amp;&amp; changedTiddlers[this.popupTitle]) || changedAttributes.setTitle || changedAttributes.setField || changedAttributes.setIndex || changedAttributes.popupTitle || changedAttributes.disabled) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedAttributes[\"class\"]) {\n\t\tthis.updateDomNodeClasses();\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.button = ButtonWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/checkbox.js":{"title":"$:/core/modules/widgets/checkbox.js","text":"/*\\\ntitle: $:/core/modules/widgets/checkbox.js\ntype: application/javascript\nmodule-type: widget\n\nCheckbox widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar CheckboxWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nCheckboxWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nCheckboxWidget.prototype.render = function(parent,nextSibling) {\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Create our elements\n\tthis.labelDomNode = this.document.createElement(\"label\");\n\tthis.labelDomNode.setAttribute(\"class\",this.checkboxClass);\n\tthis.inputDomNode = this.document.createElement(\"input\");\n\tthis.inputDomNode.setAttribute(\"type\",\"checkbox\");\n\tif(this.getValue()) {\n\t\tthis.inputDomNode.setAttribute(\"checked\",\"true\");\n\t}\n\tif(this.isDisabled === \"yes\") {\n\t\tthis.inputDomNode.setAttribute(\"disabled\",true);\n\t}\n\tthis.labelDomNode.appendChild(this.inputDomNode);\n\tthis.spanDomNode = this.document.createElement(\"span\");\n\tthis.labelDomNode.appendChild(this.spanDomNode);\n\t// Add a click event handler\n\t$tw.utils.addEventListeners(this.inputDomNode,[\n\t\t{name: \"change\", handlerObject: this, handlerMethod: \"handleChangeEvent\"}\n\t]);\n\t// Insert the label into the DOM and render any children\n\tparent.insertBefore(this.labelDomNode,nextSibling);\n\tthis.renderChildren(this.spanDomNode,null);\n\tthis.domNodes.push(this.labelDomNode);\n};\n\nCheckboxWidget.prototype.getValue = function() {\n\tvar tiddler = this.wiki.getTiddler(this.checkboxTitle);\n\tif(tiddler) {\n\t\tif(this.checkboxTag) {\n\t\t\tif(this.checkboxInvertTag) {\n\t\t\t\treturn !tiddler.hasTag(this.checkboxTag);\n\t\t\t} else {\n\t\t\t\treturn tiddler.hasTag(this.checkboxTag);\n\t\t\t}\n\t\t}\n\t\tif(this.checkboxField) {\n\t\t\tvar value;\n\t\t\tif($tw.utils.hop(tiddler.fields,this.checkboxField)) {\n\t\t\t\tvalue = tiddler.fields[this.checkboxField] || \"\";\n\t\t\t} else {\n\t\t\t\tvalue = this.checkboxDefault || \"\";\n\t\t\t}\n\t\t\tif(value === this.checkboxChecked) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(value === this.checkboxUnchecked) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(this.checkboxIndex) {\n\t\t\tvar value = this.wiki.extractTiddlerDataItem(tiddler,this.checkboxIndex,this.checkboxDefault || \"\");\n\t\t\tif(value === this.checkboxChecked) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(value === this.checkboxUnchecked) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif(this.checkboxTag) {\n\t\t\treturn false;\n\t\t}\n\t\tif(this.checkboxField) {\n\t\t\tif(this.checkboxDefault === this.checkboxChecked) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.checkboxDefault === this.checkboxUnchecked) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nCheckboxWidget.prototype.handleChangeEvent = function(event) {\n\tvar checked = this.inputDomNode.checked,\n\t\ttiddler = this.wiki.getTiddler(this.checkboxTitle),\n\t\tfallbackFields = {text: \"\"},\n\t\tnewFields = {title: this.checkboxTitle},\n\t\thasChanged = false,\n\t\ttagCheck = false,\n\t\thasTag = tiddler &amp;&amp; tiddler.hasTag(this.checkboxTag),\n\t\tvalue = checked ? this.checkboxChecked : this.checkboxUnchecked;\n\tif(this.checkboxTag &amp;&amp; this.checkboxInvertTag === \"yes\") {\n\t\ttagCheck = hasTag === checked;\n\t} else {\n\t\ttagCheck = hasTag !== checked;\n\t}\n\t// Set the tag if specified\n\tif(this.checkboxTag &amp;&amp; (!tiddler || tagCheck)) {\n\t\tnewFields.tags = tiddler ? (tiddler.fields.tags || []).slice(0) : [];\n\t\tvar pos = newFields.tags.indexOf(this.checkboxTag);\n\t\tif(pos !== -1) {\n\t\t\tnewFields.tags.splice(pos,1);\n\t\t}\n\t\tif(this.checkboxInvertTag === \"yes\" &amp;&amp; !checked) {\n\t\t\tnewFields.tags.push(this.checkboxTag);\n\t\t} else if(this.checkboxInvertTag !== \"yes\" &amp;&amp; checked) {\n\t\t\tnewFields.tags.push(this.checkboxTag);\n\t\t}\n\t\thasChanged = true;\n\t}\n\t// Set the field if specified\n\tif(this.checkboxField) {\n\t\tif(!tiddler || tiddler.fields[this.checkboxField] !== value) {\n\t\t\tnewFields[this.checkboxField] = value;\n\t\t\thasChanged = true;\n\t\t}\n\t}\n\t// Set the index if specified\n\tif(this.checkboxIndex) {\n\t\tvar indexValue = this.wiki.extractTiddlerDataItem(this.checkboxTitle,this.checkboxIndex);\n\t\tif(!tiddler || indexValue !== value) {\n\t\t\thasChanged = true;\n\t\t}\n\t}\n\tif(hasChanged) {\n\t\tif(this.checkboxIndex) {\n\t\t\tthis.wiki.setText(this.checkboxTitle,\"\",this.checkboxIndex,value);\n\t\t} else {\n\t\t\tthis.wiki.addTiddler(new $tw.Tiddler(this.wiki.getCreationFields(),fallbackFields,tiddler,newFields,this.wiki.getModificationFields()));\n\t\t}\n\t}\n\t// Trigger actions\n\tif(this.checkboxActions) {\n\t\tthis.invokeActionString(this.checkboxActions,this,event);\n\t}\n\tif(this.checkboxCheckActions &amp;&amp; checked) {\n\t\tthis.invokeActionString(this.checkboxCheckActions,this,event);\n\t}\n\tif(this.checkboxUncheckActions &amp;&amp; !checked) {\n\t\tthis.invokeActionString(this.checkboxUncheckActions,this,event);\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nCheckboxWidget.prototype.execute = function() {\n\t// Get the parameters from the attributes\n\tthis.checkboxActions = this.getAttribute(\"actions\");\n\tthis.checkboxCheckActions = this.getAttribute(\"checkactions\");\n\tthis.checkboxUncheckActions = this.getAttribute(\"uncheckactions\");\n\tthis.checkboxTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.checkboxTag = this.getAttribute(\"tag\");\n\tthis.checkboxField = this.getAttribute(\"field\");\n\tthis.checkboxIndex = this.getAttribute(\"index\");\n\tthis.checkboxChecked = this.getAttribute(\"checked\");\n\tthis.checkboxUnchecked = this.getAttribute(\"unchecked\");\n\tthis.checkboxDefault = this.getAttribute(\"default\");\n\tthis.checkboxClass = this.getAttribute(\"class\",\"\");\n\tthis.checkboxInvertTag = this.getAttribute(\"invertTag\",\"\");\n\tthis.isDisabled = this.getAttribute(\"disabled\",\"no\");\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nCheckboxWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tiddler || changedAttributes.tag || changedAttributes.invertTag || changedAttributes.field || changedAttributes.index || changedAttributes.checked || changedAttributes.unchecked || changedAttributes[\"default\"] || changedAttributes[\"class\"] || changedAttributes.disabled) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\tvar refreshed = false;\n\t\tif(changedTiddlers[this.checkboxTitle]) {\n\t\t\tthis.inputDomNode.checked = this.getValue();\n\t\t\trefreshed = true;\n\t\t}\n\t\treturn this.refreshChildren(changedTiddlers) || refreshed;\n\t}\n};\n\nexports.checkbox = CheckboxWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/codeblock.js":{"title":"$:/core/modules/widgets/codeblock.js","text":"/*\\\ntitle: $:/core/modules/widgets/codeblock.js\ntype: application/javascript\nmodule-type: widget\n\nCode block node widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar CodeBlockWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nCodeBlockWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nCodeBlockWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar codeNode = this.document.createElement(\"code\"),\n\t\tdomNode = this.document.createElement(\"pre\");\n\tcodeNode.appendChild(this.document.createTextNode(this.getAttribute(\"code\")));\n\tdomNode.appendChild(codeNode);\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.domNodes.push(domNode);\n\tif(this.postRender) {\n\t\tthis.postRender();\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nCodeBlockWidget.prototype.execute = function() {\n\tthis.language = this.getAttribute(\"language\");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nCodeBlockWidget.prototype.refresh = function(changedTiddlers) {\n\treturn false;\n};\n\nexports.codeblock = CodeBlockWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/count.js":{"title":"$:/core/modules/widgets/count.js","text":"/*\\\ntitle: $:/core/modules/widgets/count.js\ntype: application/javascript\nmodule-type: widget\n\nCount widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar CountWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nCountWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nCountWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar textNode = this.document.createTextNode(this.currentCount);\n\tparent.insertBefore(textNode,nextSibling);\n\tthis.domNodes.push(textNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nCountWidget.prototype.execute = function() {\n\t// Get parameters from our attributes\n\tthis.filter = this.getAttribute(\"filter\");\n\t// Execute the filter\n\tif(this.filter) {\n\t\tthis.currentCount = this.wiki.filterTiddlers(this.filter,this).length;\n\t} else {\n\t\tthis.currentCount = \"0\";\n\t}\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nCountWidget.prototype.refresh = function(changedTiddlers) {\n\t// Re-execute the filter to get the count\n\tthis.computeAttributes();\n\tvar oldCount = this.currentCount;\n\tthis.execute();\n\tif(this.currentCount !== oldCount) {\n\t\t// Regenerate and rerender the widget and replace the existing DOM node\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n\n};\n\nexports.count = CountWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/diff-text.js":{"title":"$:/core/modules/widgets/diff-text.js","text":"/*\\\ntitle: $:/core/modules/widgets/diff-text.js\ntype: application/javascript\nmodule-type: widget\n\nWidget to display a diff between two texts\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget,\n\tdmp = require(\"$:/core/modules/utils/diff-match-patch/diff_match_patch.js\");\n\nvar DiffTextWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDiffTextWidget.prototype = new Widget();\n\nDiffTextWidget.prototype.invisibleCharacters = {\n\t\"\\n\": \"↩︎\\n\",\n\t\"\\r\": \"⇠\",\n\t\"\\t\": \"⇥\\t\"\n};\n\n/*\nRender this widget into the DOM\n*/\nDiffTextWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create the diff\n\tvar dmpObject = new dmp.diff_match_patch(),\n\t\tdiffs = dmpObject.diff_main(this.getAttribute(\"source\"),this.getAttribute(\"dest\"));\n\t// Apply required cleanup\n\tswitch(this.getAttribute(\"cleanup\",\"semantic\")) {\n\t\tcase \"none\":\n\t\t\t// No cleanup\n\t\t\tbreak;\n\t\tcase \"efficiency\":\n\t\t\tdmpObject.diff_cleanupEfficiency(diffs);\n\t\t\tbreak;\n\t\tdefault: // case \"semantic\"\n\t\t\tdmpObject.diff_cleanupSemantic(diffs);\n\t\t\tbreak;\n\t}\n\t// Create the elements\n\tvar domContainer = this.document.createElement(\"div\"), \n\t\tdomDiff = this.createDiffDom(diffs);\n\tparent.insertBefore(domContainer,nextSibling);\n\t// Set variables\n\tthis.setVariable(\"diff-count\",diffs.reduce(function(acc,diff) {\n\t\tif(diff[0] !== dmp.DIFF_EQUAL) {\n\t\t\tacc++;\n\t\t}\n\t\treturn acc;\n\t},0).toString());\n\t// Render child widgets\n\tthis.renderChildren(domContainer,null);\n\t// Render the diff\n\tdomContainer.appendChild(domDiff);\n\t// Save our container\n\tthis.domNodes.push(domContainer);\n};\n\n/*\nCreate DOM elements representing a list of diffs\n*/\nDiffTextWidget.prototype.createDiffDom = function(diffs) {\n\tvar self = this;\n\t// Create the element and assign the attributes\n\tvar domPre = this.document.createElement(\"pre\"),\n\t\tdomCode = this.document.createElement(\"code\");\n\t$tw.utils.each(diffs,function(diff) {\n\t\tvar tag = diff[0] === dmp.DIFF_INSERT ? \"ins\" : (diff[0] === dmp.DIFF_DELETE ? \"del\" : \"span\"),\n\t\t\tclassName = diff[0] === dmp.DIFF_INSERT ? \"tc-diff-insert\" : (diff[0] === dmp.DIFF_DELETE ? \"tc-diff-delete\" : \"tc-diff-equal\"),\n\t\t\tdom = self.document.createElement(tag),\n\t\t\ttext = diff[1],\n\t\t\tcurrPos = 0,\n\t\t\tre = /([\\x00-\\x1F])/mg,\n\t\t\tmatch = re.exec(text),\n\t\t\tspan,\n\t\t\tprintable;\n\t\tdom.className = className;\n\t\twhile(match) {\n\t\t\tif(currPos &lt; match.index) {\n\t\t\t\tdom.appendChild(self.document.createTextNode(text.slice(currPos,match.index)));\n\t\t\t}\n\t\t\tspan = self.document.createElement(\"span\");\n\t\t\tspan.className = \"tc-diff-invisible\";\n\t\t\tprintable = self.invisibleCharacters[match[0]] || (\"[0x\" + match[0].charCodeAt(0).toString(16) + \"]\");\n\t\t\tspan.appendChild(self.document.createTextNode(printable));\n\t\t\tdom.appendChild(span);\n\t\t\tcurrPos = match.index + match[0].length;\n\t\t\tmatch = re.exec(text);\n\t\t}\n\t\tif(currPos &lt; text.length) {\n\t\t\tdom.appendChild(self.document.createTextNode(text.slice(currPos)));\n\t\t}\n\t\tdomCode.appendChild(dom);\n\t});\n\tdomPre.appendChild(domCode);\n\treturn domPre;\n};\n\n/*\nCompute the internal state of the widget\n*/\nDiffTextWidget.prototype.execute = function() {\n\t// Make child widgets\n\tvar parseTreeNodes;\n\tif(this.parseTreeNode &amp;&amp; this.parseTreeNode.children &amp;&amp; this.parseTreeNode.children.length &gt; 0) {\n\t\tparseTreeNodes = this.parseTreeNode.children;\n\t} else {\n\t\tparseTreeNodes = [{\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: \"$:/language/Diffs/CountMessage\"}\n\t\t\t}\n\t\t}];\n\t}\n\tthis.makeChildWidgets(parseTreeNodes);\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nDiffTextWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.source || changedAttributes.dest || changedAttributes.cleanup) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports[\"diff-text\"] = DiffTextWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/draggable.js":{"title":"$:/core/modules/widgets/draggable.js","text":"/*\\\ntitle: $:/core/modules/widgets/draggable.js\ntype: application/javascript\nmodule-type: widget\n\nDraggable widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar DraggableWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDraggableWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nDraggableWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Sanitise the specified tag\n\tvar tag = this.draggableTag;\n\tif($tw.config.htmlUnsafeElements.indexOf(tag) !== -1) {\n\t\ttag = \"div\";\n\t}\n\t// Create our element\n\tvar domNode = this.document.createElement(tag);\n\t// Assign classes\n\tvar classes = [\"tc-draggable\"];\n\tif(this.draggableClasses) {\n\t\tclasses.push(this.draggableClasses);\n\t}\n\tdomNode.setAttribute(\"class\",classes.join(\" \"));\n\t// Add event handlers\n\t$tw.utils.makeDraggable({\n\t\tdomNode: domNode,\n\t\tdragTiddlerFn: function() {return self.getAttribute(\"tiddler\");},\n\t\tdragFilterFn: function() {return self.getAttribute(\"filter\");},\n\t\tstartActions: self.startActions,\n\t\tendActions: self.endActions,\n\t\twidget: this\n\t});\n\t// Insert the link into the DOM and render any children\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nDraggableWidget.prototype.execute = function() {\n\t// Pick up our attributes\n\tthis.draggableTag = this.getAttribute(\"tag\",\"div\");\n\tthis.draggableClasses = this.getAttribute(\"class\");\n\tthis.startActions = this.getAttribute(\"startactions\");\n\tthis.endActions = this.getAttribute(\"endactions\");\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nDraggableWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tag || changedAttributes[\"class\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.draggable = DraggableWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/droppable.js":{"title":"$:/core/modules/widgets/droppable.js","text":"/*\\\ntitle: $:/core/modules/widgets/droppable.js\ntype: application/javascript\nmodule-type: widget\n\nDroppable widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar DroppableWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDroppableWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nDroppableWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this,\n\t\ttag = this.parseTreeNode.isBlock ? \"div\" : \"span\",\n\t\tdomNode;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\tif(this.droppableTag &amp;&amp; $tw.config.htmlUnsafeElements.indexOf(this.droppableTag) === -1) {\n\t\ttag = this.droppableTag;\n\t}\n\t// Create element and assign classes\n\tdomNode = this.document.createElement(tag);\n\tthis.domNode = domNode;\n\tthis.assignDomNodeClasses();\n\t// Add event handlers\n\tif(this.droppableEnable) {\n\t\t$tw.utils.addEventListeners(domNode,[\n\t\t\t{name: \"dragenter\", handlerObject: this, handlerMethod: \"handleDragEnterEvent\"},\n\t\t\t{name: \"dragover\", handlerObject: this, handlerMethod: \"handleDragOverEvent\"},\n\t\t\t{name: \"dragleave\", handlerObject: this, handlerMethod: \"handleDragLeaveEvent\"},\n\t\t\t{name: \"drop\", handlerObject: this, handlerMethod: \"handleDropEvent\"}\n\t\t]);\n\t} else {\n\t\t$tw.utils.addClass(this.domNode,this.disabledClass);\n\t}\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n\t// Stack of outstanding enter/leave events\n\tthis.currentlyEntered = [];\n};\n\nDroppableWidget.prototype.enterDrag = function(event) {\n\tif(this.currentlyEntered.indexOf(event.target) === -1) {\n\t\tthis.currentlyEntered.push(event.target);\n\t}\n\t// If we're entering for the first time we need to apply highlighting\n\t$tw.utils.addClass(this.domNodes[0],\"tc-dragover\");\n};\n\nDroppableWidget.prototype.leaveDrag = function(event) {\n\tvar pos = this.currentlyEntered.indexOf(event.target);\n\tif(pos !== -1) {\n\t\tthis.currentlyEntered.splice(pos,1);\n\t}\n\t// Remove highlighting if we're leaving externally. The hacky second condition is to resolve a problem with Firefox whereby there is an erroneous dragenter event if the node being dragged is within the dropzone\n\tif(this.currentlyEntered.length === 0 || (this.currentlyEntered.length === 1 &amp;&amp; this.currentlyEntered[0] === $tw.dragInProgress)) {\n\t\tthis.currentlyEntered = [];\n\t\tif(this.domNodes[0]) {\n\t\t\t$tw.utils.removeClass(this.domNodes[0],\"tc-dragover\");\n\t\t}\n\t}\n};\n\nDroppableWidget.prototype.handleDragEnterEvent  = function(event) {\n\tthis.enterDrag(event);\n\t// Tell the browser that we're ready to handle the drop\n\tevent.preventDefault();\n\t// Tell the browser not to ripple the drag up to any parent drop handlers\n\tevent.stopPropagation();\n\treturn false;\n};\n\nDroppableWidget.prototype.handleDragOverEvent  = function(event) {\n\t// Check for being over a TEXTAREA or INPUT\n\tif([\"TEXTAREA\",\"INPUT\"].indexOf(event.target.tagName) !== -1) {\n\t\treturn false;\n\t}\n\t// Tell the browser that we're still interested in the drop\n\tevent.preventDefault();\n\t// Set the drop effect\n\tevent.dataTransfer.dropEffect = this.droppableEffect;\n\treturn false;\n};\n\nDroppableWidget.prototype.handleDragLeaveEvent  = function(event) {\n\tthis.leaveDrag(event);\n\treturn false;\n};\n\nDroppableWidget.prototype.handleDropEvent  = function(event) {\n\tvar self = this;\n\tthis.leaveDrag(event);\n\t// Check for being over a TEXTAREA or INPUT\n\tif([\"TEXTAREA\",\"INPUT\"].indexOf(event.target.tagName) !== -1) {\n\t\treturn false;\n\t}\n\tvar dataTransfer = event.dataTransfer;\n\t// Remove highlighting\n\t$tw.utils.removeClass(this.domNodes[0],\"tc-dragover\");\n\t// Try to import the various data types we understand\n\t$tw.utils.importDataTransfer(dataTransfer,null,function(fieldsArray) {\n\t\tfieldsArray.forEach(function(fields) {\n\t\t\tself.performActions(fields.title || fields.text,event);\n\t\t});\n\t});\n\t// Tell the browser that we handled the drop\n\tevent.preventDefault();\n\t// Stop the drop ripple up to any parent handlers\n\tevent.stopPropagation();\n\treturn false;\n};\n\nDroppableWidget.prototype.performActions = function(title,event) {\n\tif(this.droppableActions) {\n\t\tvar modifierKey = $tw.keyboardManager.getEventModifierKeyDescriptor(event);\n\t\tthis.invokeActionString(this.droppableActions,this,event,{actionTiddler: title, modifier: modifierKey});\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nDroppableWidget.prototype.execute = function() {\n\tthis.droppableActions = this.getAttribute(\"actions\");\n\tthis.droppableEffect = this.getAttribute(\"effect\",\"copy\");\n\tthis.droppableTag = this.getAttribute(\"tag\");\n\tthis.droppableEnable = (this.getAttribute(\"enable\") || \"yes\") === \"yes\";\n\tthis.disabledClass = this.getAttribute(\"disabledClass\",\"\");\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\nDroppableWidget.prototype.assignDomNodeClasses = function() {\n\tvar classes = this.getAttribute(\"class\",\"\").split(\" \");\n\tclasses.push(\"tc-droppable\");\n\tthis.domNode.className = classes.join(\" \");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nDroppableWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tag || changedAttributes.enable || changedAttributes.disabledClass || changedAttributes.actions || changedAttributes.effect) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedAttributes[\"class\"]) {\n\t\tthis.assignDomNodeClasses();\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.droppable = DroppableWidget;\n\n})();","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/dropzone.js":{"title":"$:/core/modules/widgets/dropzone.js","text":"/*\\\ntitle: $:/core/modules/widgets/dropzone.js\ntype: application/javascript\nmodule-type: widget\n\nDropzone widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar IMPORT_TITLE = \"$:/Import\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar DropZoneWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nDropZoneWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nDropZoneWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create element\n\tvar domNode = this.document.createElement(\"div\");\n\tthis.domNode = domNode;\n\tdomNode.className = this.dropzoneClass || \"tc-dropzone\";\n\t// Add event handlers\n\tif(this.dropzoneEnable) {\n\t\t$tw.utils.addEventListeners(domNode,[\n\t\t\t{name: \"dragenter\", handlerObject: this, handlerMethod: \"handleDragEnterEvent\"},\n\t\t\t{name: \"dragover\", handlerObject: this, handlerMethod: \"handleDragOverEvent\"},\n\t\t\t{name: \"dragleave\", handlerObject: this, handlerMethod: \"handleDragLeaveEvent\"},\n\t\t\t{name: \"drop\", handlerObject: this, handlerMethod: \"handleDropEvent\"},\n\t\t\t{name: \"paste\", handlerObject: this, handlerMethod: \"handlePasteEvent\"},\n\t\t\t{name: \"dragend\", handlerObject: this, handlerMethod: \"handleDragEndEvent\"}\n\t\t]);\n\t}\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n\t// Stack of outstanding enter/leave events\n\tthis.currentlyEntered = [];\n};\n\n// Handler for transient event listeners added when the dropzone has an active drag in progress\nDropZoneWidget.prototype.handleEvent = function(event) {\n\tif(event.type === \"click\") {\n\t\tif(this.currentlyEntered.length) {\n\t\t\tthis.resetState();\n\t\t}\n\t} else if(event.type === \"dragenter\") {\n\t\tif(event.target &amp;&amp; event.target !== this.domNode &amp;&amp; !$tw.utils.domContains(this.domNode,event.target)) {\n\t\t\tthis.resetState();\n\t\t}\n\t} else if(event.type === \"dragleave\") {\n\t\t// Check if drag left the window\n\t\tif(event.relatedTarget === null || (event.relatedTarget &amp;&amp; event.relatedTarget.nodeName === \"HTML\")) {\n\t\t\tthis.resetState();\n\t\t}\n\t}\n};\n\n// Reset the state of the dropzone after a drag has ended\nDropZoneWidget.prototype.resetState = function() {\n\t$tw.utils.removeClass(this.domNode,\"tc-dragover\");\n\tthis.currentlyEntered = [];\n\tthis.document.body.removeEventListener(\"click\",this,true);\n\tthis.document.body.removeEventListener(\"dragenter\",this,true);\n\tthis.document.body.removeEventListener(\"dragleave\",this,true);\n\tthis.dragInProgress = false;\n};\n\nDropZoneWidget.prototype.enterDrag = function(event) {\n\tif(this.currentlyEntered.indexOf(event.target) === -1) {\n\t\tthis.currentlyEntered.push(event.target);\n\t}\n\tif(!this.dragInProgress) {\n\t\tthis.dragInProgress = true;\n\t\t// If we're entering for the first time we need to apply highlighting\n\t\t$tw.utils.addClass(this.domNodes[0],\"tc-dragover\");\n\t\tthis.document.body.addEventListener(\"click\",this,true);\n\t\tthis.document.body.addEventListener(\"dragenter\",this,true);\n\t\tthis.document.body.addEventListener(\"dragleave\",this,true);\n\t}\n};\n\nDropZoneWidget.prototype.leaveDrag = function(event) {\n\tvar pos = this.currentlyEntered.indexOf(event.target);\n\tif(pos !== -1) {\n\t\tthis.currentlyEntered.splice(pos,1);\n\t}\n\t// Remove highlighting if we're leaving externally\n\tif(this.currentlyEntered.length === 0) {\n\t\tthis.resetState();\n\t}\n};\n\nDropZoneWidget.prototype.handleDragEnterEvent  = function(event) {\n\tif($tw.dragInProgress) {\n\t\treturn false;\n\t}\n\tif(this.filesOnly &amp;&amp; !$tw.utils.dragEventContainsFiles(event)) {\n\t\treturn false;\n\t}\n\tthis.enterDrag(event);\n\t// Tell the browser that we're ready to handle the drop\n\tevent.preventDefault();\n\t// Tell the browser not to ripple the drag up to any parent drop handlers\n\tevent.stopPropagation();\n};\n\nDropZoneWidget.prototype.handleDragOverEvent  = function(event) {\n\t// Check for being over a TEXTAREA or INPUT\n\tif([\"TEXTAREA\",\"INPUT\"].indexOf(event.target.tagName) !== -1) {\n\t\treturn false;\n\t}\n\t// Check for this window being the source of the drag\n\tif($tw.dragInProgress) {\n\t\treturn false;\n\t}\n\t// Tell the browser that we're still interested in the drop\n\tevent.preventDefault();\n\t// Check if this is a synthetic event, IE does not allow accessing dropEffect outside of original event handler\n\tif(event.isTrusted) {\n\t\tevent.dataTransfer.dropEffect = \"copy\"; // Explicitly show this is a copy\n\t}\n};\n\nDropZoneWidget.prototype.handleDragLeaveEvent  = function(event) {\n\tthis.leaveDrag(event);\n};\n\nDropZoneWidget.prototype.handleDragEndEvent = function(event) {\n\tthis.resetState();\n};\n\nDropZoneWidget.prototype.filterByContentTypes = function(tiddlerFieldsArray) {\n\tvar filteredTypes,\n\t\tfiltered = [],\n\t\ttypes = [];\n\t$tw.utils.each(tiddlerFieldsArray,function(tiddlerFields) {\n\t\ttypes.push(tiddlerFields.type || \"\");\n\t});\n\tfilteredTypes = this.wiki.filterTiddlers(this.contentTypesFilter,this,this.wiki.makeTiddlerIterator(types));\n\t$tw.utils.each(tiddlerFieldsArray,function(tiddlerFields) {\n\t\tif(filteredTypes.indexOf(tiddlerFields.type) !== -1) {\n\t\t\tfiltered.push(tiddlerFields);\n\t\t}\n\t});\n\treturn filtered;\n};\n\nDropZoneWidget.prototype.readFileCallback = function(tiddlerFieldsArray) {\n\tif(this.contentTypesFilter) {\n\t\ttiddlerFieldsArray = this.filterByContentTypes(tiddlerFieldsArray);\n\t}\n\tif(tiddlerFieldsArray.length) {\n\t\tthis.dispatchEvent({type: \"tm-import-tiddlers\", param: JSON.stringify(tiddlerFieldsArray), autoOpenOnImport: this.autoOpenOnImport, importTitle: this.importTitle});\n\t\tif(this.actions) {\n\t\t\tthis.invokeActionString(this.actions,this,event,{importTitle: this.importTitle});\n\t\t}\n\t}\n};\n\nDropZoneWidget.prototype.handleDropEvent  = function(event) {\n\tvar self = this,\n\t\treadFileCallback = function(tiddlerFieldsArray) {\n\t\t\tself.readFileCallback(tiddlerFieldsArray);\n\t\t};\n\tthis.leaveDrag(event);\n\t// Check for being over a TEXTAREA or INPUT\n\tif([\"TEXTAREA\",\"INPUT\"].indexOf(event.target.tagName) !== -1) {\n\t\treturn false;\n\t}\n\t// Check for this window being the source of the drag\n\tif($tw.dragInProgress) {\n\t\treturn false;\n\t}\n\tvar self = this,\n\t\tdataTransfer = event.dataTransfer;\n\t// Remove highlighting\n\tthis.resetState();\n\t// Import any files in the drop\n\tvar numFiles = 0;\n\tif(dataTransfer.files) {\n\t\tnumFiles = this.wiki.readFiles(dataTransfer.files,{\n\t\t\tcallback: readFileCallback,\n\t\t\tdeserializer: this.dropzoneDeserializer\n\t\t});\n\t}\n\t// Try to import the various data types we understand\n\tif(numFiles === 0) {\n\t\tvar fallbackTitle = self.wiki.generateNewTitle(\"Untitled\");\n\t\t//Use the deserializer specified if any\n\t\tif(this.dropzoneDeserializer) {\n\t\t\tfor(var t= 0; t&lt;dataTransfer.items.length; t++) {\n\t\t\t\tvar item = dataTransfer.items[t];\n\t\t\t\tif(item.kind === \"string\") {\n\t\t\t\t\titem.getAsString(function(str){\n\t\t\t\t\t\tvar tiddlerFields = self.wiki.deserializeTiddlers(null,str,{title: fallbackTitle},{deserializer:self.dropzoneDeserializer});\n\t\t\t\t\t\tif(tiddlerFields &amp;&amp; tiddlerFields.length) {\n\t\t\t\t\t\t\treadFileCallback(tiddlerFields);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t$tw.utils.importDataTransfer(dataTransfer,fallbackTitle,readFileCallback);\n\t\t}\n\t}\n\t// Tell the browser that we handled the drop\n\tevent.preventDefault();\n\t// Stop the drop ripple up to any parent handlers\n\tevent.stopPropagation();\n};\n\nDropZoneWidget.prototype.handlePasteEvent  = function(event) {\n\tvar self = this,\n\t\treadFileCallback = function(tiddlerFieldsArray) {\n\t\t\tself.readFileCallback(tiddlerFieldsArray);\n\t\t};\n\t// Let the browser handle it if we're in a textarea or input box\n\tif([\"TEXTAREA\",\"INPUT\"].indexOf(event.target.tagName) == -1 &amp;&amp; !event.target.isContentEditable) {\n\t\tvar self = this,\n\t\t\titems = event.clipboardData.items;\n\t\t// Enumerate the clipboard items\n\t\tfor(var t = 0; t&lt;items.length; t++) {\n\t\t\tvar item = items[t];\n\t\t\tif(item.kind === \"file\") {\n\t\t\t\t// Import any files\n\t\t\t\tthis.wiki.readFile(item.getAsFile(),{\n\t\t\t\t\tcallback: readFileCallback,\n\t\t\t\t\tdeserializer: this.dropzoneDeserializer\n\t\t\t\t});\n\t\t\t} else if(item.kind === \"string\") {\n\t\t\t\t// Create tiddlers from string items\n\t\t\t\tvar tiddlerFields,\n\t\t\t\t\ttype = item.type;\n\t\t\t\titem.getAsString(function(str) {\n\t\t\t\t\t// Use the deserializer specified if any\n\t\t\t\t\tif(self.dropzoneDeserializer) {\n\t\t\t\t\t\ttiddlerFields = self.wiki.deserializeTiddlers(null,str,{title: self.wiki.generateNewTitle(\"Untitled\")},{deserializer:self.dropzoneDeserializer});\n\t\t\t\t\t\tif(tiddlerFields &amp;&amp; tiddlerFields.length) {\n\t\t\t\t\t\t\treadFileCallback(tiddlerFields);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttiddlerFields = {\n\t\t\t\t\t\t\ttitle: self.wiki.generateNewTitle(\"Untitled\"),\n\t\t\t\t\t\t\ttext: str,\n\t\t\t\t\t\t\ttype: type\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif($tw.log.IMPORT) {\n\t\t\t\t\t\t\tconsole.log(\"Importing string '\" + str + \"', type: '\" + type + \"'\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treadFileCallback([tiddlerFields]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// Tell the browser that we've handled the paste\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nDropZoneWidget.prototype.execute = function() {\n\tthis.dropzoneClass = this.getAttribute(\"class\");\n\tthis.dropzoneDeserializer = this.getAttribute(\"deserializer\");\n\tthis.dropzoneEnable = (this.getAttribute(\"enable\") || \"yes\") === \"yes\";\n\tthis.autoOpenOnImport = this.getAttribute(\"autoOpenOnImport\");\n\tthis.importTitle = this.getAttribute(\"importTitle\",IMPORT_TITLE);\n\tthis.actions = this.getAttribute(\"actions\");\n\tthis.contentTypesFilter = this.getAttribute(\"contentTypesFilter\");\n\tthis.filesOnly = this.getAttribute(\"filesOnly\",\"no\") === \"yes\";\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nDropZoneWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.dropzone = DropZoneWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/edit-binary.js":{"title":"$:/core/modules/widgets/edit-binary.js","text":"/*\\\ntitle: $:/core/modules/widgets/edit-binary.js\ntype: application/javascript\nmodule-type: widget\n\nEdit-binary widget; placeholder for editing binary tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar BINARY_WARNING_MESSAGE = \"$:/core/ui/BinaryWarning\";\nvar EXPORT_BUTTON_IMAGE = \"$:/core/images/export-button\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EditBinaryWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEditBinaryWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEditBinaryWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nEditBinaryWidget.prototype.execute = function() {\n\t// Get our parameters\n\tvar editTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tvar tiddler = this.wiki.getTiddler(editTitle);\n\tvar type = tiddler.fields.type;\n\tvar text = tiddler.fields.text;\n\t// Transclude the binary data tiddler warning message\n\tvar warn = {\n\t\ttype: \"element\",\n\t\ttag: \"p\",\n\t\tchildren: [{\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: BINARY_WARNING_MESSAGE}\n\t\t\t}\n\t\t}]\n\t};\n\t// Create download link based on draft tiddler title\n\tvar link = {\n\t\ttype: \"element\",\n\t\ttag: \"a\",\n\t\tattributes: {\n\t\t\ttitle: {type: \"indirect\", textReference: \"!!draft.title\"},\n\t\t\tdownload: {type: \"indirect\", textReference: \"!!draft.title\"}\n\t\t},\n\t\tchildren: [{\n\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\ttiddler: {type: \"string\", value: EXPORT_BUTTON_IMAGE}\n\t\t\t}\n\t\t}]\n\t};\n\t// Set the link href to internal data URI (no external)\n\tif(text) {\n\t\tlink.attributes.href = {\n\t\t\ttype: \"string\", \n\t\t\tvalue: \"data:\" + type + \";base64,\" + text\n\t\t};\n\t}\n\t// Combine warning message and download link in a div\n\tvar element = {\n\t\ttype: \"element\",\n\t\ttag: \"div\",\n\t\tattributes: {\n\t\t\tclass: {type: \"string\", value: \"tc-binary-warning\"}\n\t\t},\n\t\tchildren: [warn, link]\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets([element]);\n};\n\n/*\nRefresh by refreshing our child widget\n*/\nEditBinaryWidget.prototype.refresh = function(changedTiddlers) {\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports[\"edit-binary\"] = EditBinaryWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/edit-bitmap.js":{"title":"$:/core/modules/widgets/edit-bitmap.js","text":"/*\\\ntitle: $:/core/modules/widgets/edit-bitmap.js\ntype: application/javascript\nmodule-type: widget\n\nEdit-bitmap widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Default image sizes\nvar DEFAULT_IMAGE_WIDTH = 600,\n\tDEFAULT_IMAGE_HEIGHT = 370,\n\tDEFAULT_IMAGE_TYPE = \"image/png\";\n\n// Configuration tiddlers\nvar LINE_WIDTH_TITLE = \"$:/config/BitmapEditor/LineWidth\",\n\tLINE_COLOUR_TITLE = \"$:/config/BitmapEditor/Colour\",\n\tLINE_OPACITY_TITLE = \"$:/config/BitmapEditor/Opacity\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EditBitmapWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEditBitmapWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEditBitmapWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Initialise the editor operations if they've not been done already\n\tif(!this.editorOperations) {\n\t\tEditBitmapWidget.prototype.editorOperations = {};\n\t\t$tw.modules.applyMethods(\"bitmapeditoroperation\",this.editorOperations);\n\t}\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Create the wrapper for the toolbar and render its content\n\tthis.toolbarNode = this.document.createElement(\"div\");\n\tthis.toolbarNode.className = \"tc-editor-toolbar\";\n\tparent.insertBefore(this.toolbarNode,nextSibling);\n\tthis.domNodes.push(this.toolbarNode);\n\t// Create the on-screen canvas\n\tthis.canvasDomNode = $tw.utils.domMaker(\"canvas\",{\n\t\tdocument: this.document,\n\t\t\"class\":\"tc-edit-bitmapeditor\",\n\t\teventListeners: [{\n\t\t\tname: \"touchstart\", handlerObject: this, handlerMethod: \"handleTouchStartEvent\"\n\t\t},{\n\t\t\tname: \"touchmove\", handlerObject: this, handlerMethod: \"handleTouchMoveEvent\"\n\t\t},{\n\t\t\tname: \"touchend\", handlerObject: this, handlerMethod: \"handleTouchEndEvent\"\n\t\t},{\n\t\t\tname: \"mousedown\", handlerObject: this, handlerMethod: \"handleMouseDownEvent\"\n\t\t},{\n\t\t\tname: \"mousemove\", handlerObject: this, handlerMethod: \"handleMouseMoveEvent\"\n\t\t},{\n\t\t\tname: \"mouseup\", handlerObject: this, handlerMethod: \"handleMouseUpEvent\"\n\t\t}]\n\t});\n\t// Set the width and height variables\n\tthis.setVariable(\"tv-bitmap-editor-width\",this.canvasDomNode.width + \"px\");\n\tthis.setVariable(\"tv-bitmap-editor-height\",this.canvasDomNode.height + \"px\");\n\t// Render toolbar child widgets\n\tthis.renderChildren(this.toolbarNode,null);\n\t// // Insert the elements into the DOM\n\tparent.insertBefore(this.canvasDomNode,nextSibling);\n\tthis.domNodes.push(this.canvasDomNode);\n\t// Load the image into the canvas\n\tif($tw.browser) {\n\t\tthis.loadCanvas();\n\t}\n\t// Add widget message listeners\n\tthis.addEventListeners([\n\t\t{type: \"tm-edit-bitmap-operation\", handler: \"handleEditBitmapOperationMessage\"}\n\t]);\n};\n\n/*\nHandle an edit bitmap operation message from the toolbar\n*/\nEditBitmapWidget.prototype.handleEditBitmapOperationMessage = function(event) {\n\t// Invoke the handler\n\tvar handler = this.editorOperations[event.param];\n\tif(handler) {\n\t\thandler.call(this,event);\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nEditBitmapWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.editTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nJust refresh the toolbar\n*/\nEditBitmapWidget.prototype.refresh = function(changedTiddlers) {\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nSet the bitmap size variables and refresh the toolbar\n*/\nEditBitmapWidget.prototype.refreshToolbar = function() {\n\t// Set the width and height variables\n\tthis.setVariable(\"tv-bitmap-editor-width\",this.canvasDomNode.width + \"px\");\n\tthis.setVariable(\"tv-bitmap-editor-height\",this.canvasDomNode.height + \"px\");\n\t// Refresh each of our child widgets\n\t$tw.utils.each(this.children,function(childWidget) {\n\t\tchildWidget.refreshSelf();\n\t});\n};\n\nEditBitmapWidget.prototype.loadCanvas = function() {\n\tvar tiddler = this.wiki.getTiddler(this.editTitle),\n\t\tcurrImage = new Image();\n\t// Set up event handlers for loading the image\n\tvar self = this;\n\tcurrImage.onload = function() {\n\t\t// Copy the image to the on-screen canvas\n\t\tself.initCanvas(self.canvasDomNode,currImage.width,currImage.height,currImage);\n\t\t// And also copy the current bitmap to the off-screen canvas\n\t\tself.currCanvas = self.document.createElement(\"canvas\");\n\t\tself.initCanvas(self.currCanvas,currImage.width,currImage.height,currImage);\n\t\t// Set the width and height input boxes\n\t\tself.refreshToolbar();\n\t};\n\tcurrImage.onerror = function() {\n\t\t// Set the on-screen canvas size and clear it\n\t\tself.initCanvas(self.canvasDomNode,DEFAULT_IMAGE_WIDTH,DEFAULT_IMAGE_HEIGHT);\n\t\t// Set the off-screen canvas size and clear it\n\t\tself.currCanvas = self.document.createElement(\"canvas\");\n\t\tself.initCanvas(self.currCanvas,DEFAULT_IMAGE_WIDTH,DEFAULT_IMAGE_HEIGHT);\n\t\t// Set the width and height input boxes\n\t\tself.refreshToolbar();\n\t};\n\t// Get the current bitmap into an image object\n\tif(tiddler &amp;&amp; tiddler.fields.type &amp;&amp; tiddler.fields.text) {\n\t\tcurrImage.src = \"data:\" + tiddler.fields.type + \";base64,\" + tiddler.fields.text;\n\t} else {\n\t\tcurrImage.width = DEFAULT_IMAGE_WIDTH;\n\t\tcurrImage.height = DEFAULT_IMAGE_HEIGHT;\n\t\tcurrImage.onerror();\n\t}\n};\n\nEditBitmapWidget.prototype.initCanvas = function(canvas,width,height,image) {\n\tcanvas.width = width;\n\tcanvas.height = height;\n\tvar ctx = canvas.getContext(\"2d\");\n\tif(image) {\n\t\tctx.drawImage(image,0,0);\n\t} else {\n\t\tctx.fillStyle = \"#fff\";\n\t\tctx.fillRect(0,0,canvas.width,canvas.height);\n\t}\n};\n\n/*\n** Change the size of the canvas, preserving the current image\n*/\nEditBitmapWidget.prototype.changeCanvasSize = function(newWidth,newHeight) {\n\t// Create and size a new canvas\n\tvar newCanvas = this.document.createElement(\"canvas\");\n\tthis.initCanvas(newCanvas,newWidth,newHeight);\n\t// Copy the old image\n\tvar ctx = newCanvas.getContext(\"2d\");\n\tctx.drawImage(this.currCanvas,0,0);\n\t// Set the new canvas as the current one\n\tthis.currCanvas = newCanvas;\n\t// Set the size of the onscreen canvas\n\tthis.canvasDomNode.width = newWidth;\n\tthis.canvasDomNode.height = newHeight;\n\t// Paint the onscreen canvas with the offscreen canvas\n\tctx = this.canvasDomNode.getContext(\"2d\");\n\tctx.drawImage(this.currCanvas,0,0);\n};\n\n/*\n** Rotate the canvas left by 90 degrees\n*/\nEditBitmapWidget.prototype.rotateCanvasLeft = function() {\n\t// Get the current size of the image\n\tvar origWidth = this.currCanvas.width,\n\t\torigHeight = this.currCanvas.height;\n\t// Create and size a new canvas\n\tvar newCanvas = this.document.createElement(\"canvas\"),\n\t\tnewWidth = origHeight,\n\t\tnewHeight = origWidth;\n\tthis.initCanvas(newCanvas,newWidth,newHeight);\n\t// Copy the old image\n\tvar ctx = newCanvas.getContext(\"2d\");\n\tctx.save();\n\tctx.translate(newWidth / 2,newHeight / 2);\n\tctx.rotate(-Math.PI / 2);\n\tctx.drawImage(this.currCanvas,-origWidth / 2,-origHeight / 2);\n\tctx.restore();\n\t// Set the new canvas as the current one\n\tthis.currCanvas = newCanvas;\n\t// Set the size of the onscreen canvas\n\tthis.canvasDomNode.width = newWidth;\n\tthis.canvasDomNode.height = newHeight;\n\t// Paint the onscreen canvas with the offscreen canvas\n\tctx = this.canvasDomNode.getContext(\"2d\");\n\tctx.drawImage(this.currCanvas,0,0);\n};\n\nEditBitmapWidget.prototype.handleTouchStartEvent = function(event) {\n\tthis.brushDown = true;\n\tthis.strokeStart(event.touches[0].clientX,event.touches[0].clientY);\n\tevent.preventDefault();\n\tevent.stopPropagation();\n\treturn false;\n};\n\nEditBitmapWidget.prototype.handleTouchMoveEvent = function(event) {\n\tif(this.brushDown) {\n\t\tthis.strokeMove(event.touches[0].clientX,event.touches[0].clientY);\n\t}\n\tevent.preventDefault();\n\tevent.stopPropagation();\n\treturn false;\n};\n\nEditBitmapWidget.prototype.handleTouchEndEvent = function(event) {\n\tif(this.brushDown) {\n\t\tthis.brushDown = false;\n\t\tthis.strokeEnd();\n\t}\n\tevent.preventDefault();\n\tevent.stopPropagation();\n\treturn false;\n};\n\nEditBitmapWidget.prototype.handleMouseDownEvent = function(event) {\n\tthis.strokeStart(event.clientX,event.clientY);\n\tthis.brushDown = true;\n\tevent.preventDefault();\n\tevent.stopPropagation();\n\treturn false;\n};\n\nEditBitmapWidget.prototype.handleMouseMoveEvent = function(event) {\n\tif(this.brushDown) {\n\t\tthis.strokeMove(event.clientX,event.clientY);\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nEditBitmapWidget.prototype.handleMouseUpEvent = function(event) {\n\tif(this.brushDown) {\n\t\tthis.brushDown = false;\n\t\tthis.strokeEnd();\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nEditBitmapWidget.prototype.adjustCoordinates = function(x,y) {\n\tvar canvasRect = this.canvasDomNode.getBoundingClientRect(),\n\t\tscale = this.canvasDomNode.width/canvasRect.width;\n\treturn {x: (x - canvasRect.left) * scale, y: (y - canvasRect.top) * scale};\n};\n\nEditBitmapWidget.prototype.strokeStart = function(x,y) {\n\t// Start off a new stroke\n\tthis.stroke = [this.adjustCoordinates(x,y)];\n};\n\nEditBitmapWidget.prototype.strokeMove = function(x,y) {\n\tvar ctx = this.canvasDomNode.getContext(\"2d\"),\n\t\tt;\n\t// Add the new position to the end of the stroke\n\tthis.stroke.push(this.adjustCoordinates(x,y));\n\t// Redraw the previous image\n\tctx.drawImage(this.currCanvas,0,0);\n\t// Render the stroke\n\tctx.globalAlpha = parseFloat(this.wiki.getTiddlerText(LINE_OPACITY_TITLE,\"1.0\"));\n\tctx.strokeStyle = this.wiki.getTiddlerText(LINE_COLOUR_TITLE,\"#ff0\");\n\tctx.lineWidth = parseFloat(this.wiki.getTiddlerText(LINE_WIDTH_TITLE,\"3\"));\n\tctx.lineCap = \"round\";\n\tctx.lineJoin = \"round\";\n\tctx.beginPath();\n\tctx.moveTo(this.stroke[0].x,this.stroke[0].y);\n\tfor(t=1; t&lt;this.stroke.length-1; t++) {\n\t\tvar s1 = this.stroke[t],\n\t\t\ts2 = this.stroke[t-1],\n\t\t\ttx = (s1.x + s2.x)/2,\n\t\t\tty = (s1.y + s2.y)/2;\n\t\tctx.quadraticCurveTo(s2.x,s2.y,tx,ty);\n\t}\n\tctx.stroke();\n};\n\nEditBitmapWidget.prototype.strokeEnd = function() {\n\t// Copy the bitmap to the off-screen canvas\n\tvar ctx = this.currCanvas.getContext(\"2d\");\n\tctx.drawImage(this.canvasDomNode,0,0);\n\t// Save the image into the tiddler\n\tthis.saveChanges();\n};\n\nEditBitmapWidget.prototype.saveChanges = function() {\n\tvar tiddler = this.wiki.getTiddler(this.editTitle) || new $tw.Tiddler({title: this.editTitle,type: DEFAULT_IMAGE_TYPE});\n\t// data URIs look like \"data:&lt;type&gt;;base64,&lt;text&gt;\"\n\tvar dataURL = this.canvasDomNode.toDataURL(tiddler.fields.type),\n\t\tposColon = dataURL.indexOf(\":\"),\n\t\tposSemiColon = dataURL.indexOf(\";\"),\n\t\tposComma = dataURL.indexOf(\",\"),\n\t\ttype = dataURL.substring(posColon+1,posSemiColon),\n\t\ttext = dataURL.substring(posComma+1);\n\tvar update = {type: type, text: text};\n\tthis.wiki.addTiddler(new $tw.Tiddler(this.wiki.getModificationFields(),tiddler,update,this.wiki.getCreationFields()));\n};\n\nexports[\"edit-bitmap\"] = EditBitmapWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/edit-shortcut.js":{"title":"$:/core/modules/widgets/edit-shortcut.js","text":"/*\\\ntitle: $:/core/modules/widgets/edit-shortcut.js\ntype: application/javascript\nmodule-type: widget\n\nWidget to display an editable keyboard shortcut\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EditShortcutWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEditShortcutWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEditShortcutWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.inputNode = this.document.createElement(\"input\");\n\t// Assign classes\n\tif(this.shortcutClass) {\n\t\tthis.inputNode.className = this.shortcutClass;\n\t}\n\t// Assign other attributes\n\tif(this.shortcutStyle) {\n\t\tthis.inputNode.setAttribute(\"style\",this.shortcutStyle);\n\t}\n\tif(this.shortcutTooltip) {\n\t\tthis.inputNode.setAttribute(\"title\",this.shortcutTooltip);\n\t}\n\tif(this.shortcutPlaceholder) {\n\t\tthis.inputNode.setAttribute(\"placeholder\",this.shortcutPlaceholder);\n\t}\n\tif(this.shortcutAriaLabel) {\n\t\tthis.inputNode.setAttribute(\"aria-label\",this.shortcutAriaLabel);\n\t}\n\t// Assign the current shortcut\n\tthis.updateInputNode();\n\t// Add event handlers\n\t$tw.utils.addEventListeners(this.inputNode,[\n\t\t{name: \"keydown\", handlerObject: this, handlerMethod: \"handleKeydownEvent\"}\n\t]);\n\t// Link into the DOM\n\tparent.insertBefore(this.inputNode,nextSibling);\n\tthis.domNodes.push(this.inputNode);\n\t// Focus the input Node if focus === \"yes\" or focus === \"true\"\n\tif(this.shortcutFocus === \"yes\" || this.shortcutFocus === \"true\") {\n\t\tthis.focus();\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nEditShortcutWidget.prototype.execute = function() {\n\tthis.shortcutTiddler = this.getAttribute(\"tiddler\");\n\tthis.shortcutField = this.getAttribute(\"field\");\n\tthis.shortcutIndex = this.getAttribute(\"index\");\n\tthis.shortcutPlaceholder = this.getAttribute(\"placeholder\");\n\tthis.shortcutDefault = this.getAttribute(\"default\",\"\");\n\tthis.shortcutClass = this.getAttribute(\"class\");\n\tthis.shortcutStyle = this.getAttribute(\"style\");\n\tthis.shortcutTooltip = this.getAttribute(\"tooltip\");\n\tthis.shortcutAriaLabel = this.getAttribute(\"aria-label\");\n\tthis.shortcutFocus = this.getAttribute(\"focus\");\n};\n\n/*\nUpdate the value of the input node\n*/\nEditShortcutWidget.prototype.updateInputNode = function() {\n\tif(this.shortcutField) {\n\t\tvar tiddler = this.wiki.getTiddler(this.shortcutTiddler);\n\t\tif(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,this.shortcutField)) {\n\t\t\tthis.inputNode.value = tiddler.getFieldString(this.shortcutField);\n\t\t} else {\n\t\t\tthis.inputNode.value = this.shortcutDefault;\n\t\t}\n\t} else if(this.shortcutIndex) {\n\t\tthis.inputNode.value = this.wiki.extractTiddlerDataItem(this.shortcutTiddler,this.shortcutIndex,this.shortcutDefault);\n\t} else {\n\t\tthis.inputNode.value = this.wiki.getTiddlerText(this.shortcutTiddler,this.shortcutDefault);\n\t}\n};\n\n/*\nHandle a dom \"keydown\" event\n*/\nEditShortcutWidget.prototype.handleKeydownEvent = function(event) {\n\t// Ignore shift, ctrl, meta, alt\n\tif(event.keyCode &amp;&amp; $tw.keyboardManager.getModifierKeys().indexOf(event.keyCode) === -1) {\n\t\t// Get the shortcut text representation\n\t\tvar value = $tw.keyboardManager.getPrintableShortcuts([{\n\t\t\tctrlKey: event.ctrlKey,\n\t\t\tshiftKey: event.shiftKey,\n\t\t\taltKey: event.altKey,\n\t\t\tmetaKey: event.metaKey,\n\t\t\tkeyCode: event.keyCode\n\t\t}]);\n\t\tif(value.length &gt; 0) {\n\t\t\tthis.wiki.setText(this.shortcutTiddler,this.shortcutField,this.shortcutIndex,value[0]);\n\t\t}\n\t\t// Ignore the keydown if it was already handled\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/*\nfocus the input node\n*/\nEditShortcutWidget.prototype.focus = function() {\n\tif(this.inputNode.focus &amp;&amp; this.inputNode.select) {\n\t\tthis.inputNode.focus();\n\t\tthis.inputNode.select();\n\t}\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget needed re-rendering\n*/\nEditShortcutWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index || changedAttributes.placeholder || changedAttributes[\"default\"] || changedAttributes[\"class\"] || changedAttributes.style || changedAttributes.tooltip || changedAttributes[\"aria-label\"] || changedAttributes.focus) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedTiddlers[this.shortcutTiddler]) {\n\t\tthis.updateInputNode();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports[\"edit-shortcut\"] = EditShortcutWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/edit-text.js":{"title":"$:/core/modules/widgets/edit-text.js","text":"/*\\\ntitle: $:/core/modules/widgets/edit-text.js\ntype: application/javascript\nmodule-type: widget\n\nEdit-text widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar editTextWidgetFactory = require(\"$:/core/modules/editor/factory.js\").editTextWidgetFactory,\n\tFramedEngine = require(\"$:/core/modules/editor/engines/framed.js\").FramedEngine,\n\tSimpleEngine = require(\"$:/core/modules/editor/engines/simple.js\").SimpleEngine;\n\nexports[\"edit-text\"] = editTextWidgetFactory(FramedEngine,SimpleEngine);\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/edit.js":{"title":"$:/core/modules/widgets/edit.js","text":"/*\\\ntitle: $:/core/modules/widgets/edit.js\ntype: application/javascript\nmodule-type: widget\n\nEdit widget is a meta-widget chooses the appropriate actual editting widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EditWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEditWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEditWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n// Mappings from content type to editor type are stored in tiddlers with this prefix\nvar EDITOR_MAPPING_PREFIX = \"$:/config/EditorTypeMappings/\";\n\n/*\nCompute the internal state of the widget\n*/\nEditWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.editTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.editField = this.getAttribute(\"field\",\"text\");\n\tthis.editIndex = this.getAttribute(\"index\");\n\tthis.editClass = this.getAttribute(\"class\");\n\tthis.editPlaceholder = this.getAttribute(\"placeholder\");\n\tthis.editTabIndex = this.getAttribute(\"tabindex\");\n\tthis.editFocus = this.getAttribute(\"focus\",\"\");\n\tthis.editCancelPopups = this.getAttribute(\"cancelPopups\",\"\");\n\tthis.editInputActions = this.getAttribute(\"inputActions\");\n\tthis.editRefreshTitle = this.getAttribute(\"refreshTitle\");\n\tthis.editAutoComplete = this.getAttribute(\"autocomplete\");\n\t// Choose the appropriate edit widget\n\tthis.editorType = this.getEditorType();\n\t// Make the child widgets\n\tthis.makeChildWidgets([{\n\t\ttype: \"edit-\" + this.editorType,\n\t\tattributes: this.parseTreeNode.attributes,\n\t\tchildren: this.parseTreeNode.children\n\t}]);\n};\n\nEditWidget.prototype.getEditorType = function() {\n\t// Get the content type of the thing we're editing\n\tvar type;\n\tif(this.editField === \"text\") {\n\t\tvar tiddler = this.wiki.getTiddler(this.editTitle);\n\t\tif(tiddler) {\n\t\t\ttype = tiddler.fields.type;\n\t\t}\n\t}\n\ttype = type || \"text/vnd.tiddlywiki\";\n\tvar editorType = this.wiki.getTiddlerText(EDITOR_MAPPING_PREFIX + type);\n\tif(!editorType) {\n\t\tvar typeInfo = $tw.config.contentTypeInfo[type];\n\t\tif(typeInfo &amp;&amp; typeInfo.encoding === \"base64\") {\n\t\t\teditorType = \"binary\";\n\t\t} else {\n\t\t\teditorType = \"text\";\n\t\t}\n\t}\n\treturn editorType;\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nEditWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\t// Refresh if an attribute has changed, or the type associated with the target tiddler has changed\n\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index || changedAttributes.tabindex || changedAttributes.cancelPopups || changedAttributes.inputActions || changedAttributes.refreshTitle || changedAttributes.autocomplete || (changedTiddlers[this.editTitle] &amp;&amp; this.getEditorType() !== this.editorType)) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.edit = EditWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/element.js":{"title":"$:/core/modules/widgets/element.js","text":"/*\\\ntitle: $:/core/modules/widgets/element.js\ntype: application/javascript\nmodule-type: widget\n\nElement widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ElementWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nElementWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nElementWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\t// Neuter blacklisted elements\n\tthis.tag = this.parseTreeNode.tag;\n\tif($tw.config.htmlUnsafeElements.indexOf(this.tag) !== -1) {\n\t\tthis.tag = \"safe-\" + this.tag;\n\t}\n\t// Adjust headings by the current base level\n\tvar headingLevel = [\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"].indexOf(this.tag);\n\tif(headingLevel !== -1) {\n\t\tvar baseLevel = parseInt(this.getVariable(\"tv-adjust-heading-level\",\"0\"),10) || 0;\n\t\theadingLevel = Math.min(Math.max(headingLevel + 1 + baseLevel,1),6);\n\t\tthis.tag = \"h\" + headingLevel;\n\t}\n\t// Select the namespace for the tag\n\tvar tagNamespaces = {\n\t\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\t\tmath: \"http://www.w3.org/1998/Math/MathML\",\n\t\t\tbody: \"http://www.w3.org/1999/xhtml\"\n\t\t};\n\tthis.namespace = tagNamespaces[this.tag];\n\tif(this.namespace) {\n\t\tthis.setVariable(\"namespace\",this.namespace);\n\t} else {\n\t\tthis.namespace = this.getVariable(\"namespace\",{defaultValue: \"http://www.w3.org/1999/xhtml\"});\n\t}\n\t// Invoke the th-rendering-element hook\n\tvar parseTreeNodes = $tw.hooks.invokeHook(\"th-rendering-element\",null,this);\n\tthis.isReplaced = !!parseTreeNodes;\n\tif(parseTreeNodes) {\n\t\t// Use the parse tree nodes provided by the hook\n\t\tthis.makeChildWidgets(parseTreeNodes);\n\t\tthis.renderChildren(this.parentDomNode,null);\n\t\treturn;\n\t}\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n\t// Create the DOM node and render children\n\tvar domNode = this.document.createElementNS(this.namespace,this.tag);\n\tthis.assignAttributes(domNode,{excludeEventAttributes: true});\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nElementWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes(),\n\t\thasChangedAttributes = $tw.utils.count(changedAttributes) &gt; 0;\n\tif(hasChangedAttributes) {\n\t\tif(!this.isReplaced) {\n\t\t\t// Update our attributes\n\t\t\tthis.assignAttributes(this.domNodes[0],{excludeEventAttributes: true});\n\t\t} else {\n\t\t\t// If we were replaced then completely refresh ourselves\n\t\t\treturn this.refreshSelf();\n\t\t}\n\t}\n\treturn this.refreshChildren(changedTiddlers) || hasChangedAttributes;\n};\n\nexports.element = ElementWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/encrypt.js":{"title":"$:/core/modules/widgets/encrypt.js","text":"/*\\\ntitle: $:/core/modules/widgets/encrypt.js\ntype: application/javascript\nmodule-type: widget\n\nEncrypt widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EncryptWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEncryptWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEncryptWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar textNode = this.document.createTextNode(this.encryptedText);\n\tparent.insertBefore(textNode,nextSibling);\n\tthis.domNodes.push(textNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nEncryptWidget.prototype.execute = function() {\n\t// Get parameters from our attributes\n\tthis.filter = this.getAttribute(\"filter\",\"[!is[system]]\");\n\t// Encrypt the filtered tiddlers\n\tvar tiddlers = this.wiki.filterTiddlers(this.filter),\n\t\tjson = {},\n\t\tself = this;\n\t$tw.utils.each(tiddlers,function(title) {\n\t\tvar tiddler = self.wiki.getTiddler(title),\n\t\t\tjsonTiddler = {};\n\t\tfor(var f in tiddler.fields) {\n\t\t\tjsonTiddler[f] = tiddler.getFieldString(f);\n\t\t}\n\t\tjson[title] = jsonTiddler;\n\t});\n\tthis.encryptedText = $tw.utils.htmlEncode($tw.crypto.encrypt(JSON.stringify(json)));\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nEncryptWidget.prototype.refresh = function(changedTiddlers) {\n\t// We don't need to worry about refreshing because the encrypt widget isn't for interactive use\n\treturn false;\n};\n\nexports.encrypt = EncryptWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/entity.js":{"title":"$:/core/modules/widgets/entity.js","text":"/*\\\ntitle: $:/core/modules/widgets/entity.js\ntype: application/javascript\nmodule-type: widget\n\nHTML entity widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EntityWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEntityWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEntityWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar entityString = this.getAttribute(\"entity\",this.parseTreeNode.entity || \"\"),\n\t\ttextNode = this.document.createTextNode($tw.utils.entityDecode(entityString));\n\tparent.insertBefore(textNode,nextSibling);\n\tthis.domNodes.push(textNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nEntityWidget.prototype.execute = function() {\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nEntityWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.entity) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports.entity = EntityWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/eventcatcher.js":{"title":"$:/core/modules/widgets/eventcatcher.js","text":"/*\\\ntitle: $:/core/modules/widgets/eventcatcher.js\ntype: application/javascript\nmodule-type: widget\n\nEvent handler widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar EventWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nEventWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEventWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create element\n\tvar tag = this.parseTreeNode.isBlock ? \"div\" : \"span\";\n\tif(this.elementTag &amp;&amp; $tw.config.htmlUnsafeElements.indexOf(this.elementTag) === -1) {\n\t\ttag = this.elementTag;\n\t}\n\tvar domNode = this.document.createElement(tag);\n\tthis.domNode = domNode;\n\t// Assign classes\n\tthis.assignDomNodeClasses();\n\t// Add our event handler\n\t$tw.utils.each(this.types,function(type) {\n\t\tdomNode.addEventListener(type,function(event) {\n\t\t\tvar selector = self.getAttribute(\"selector\"),\n\t\t\t\tactions = self.getAttribute(\"actions-\"+type),\n\t\t\t\tstopPropagation = self.getAttribute(\"stopPropagation\",\"onaction\"),\n\t\t\t\tselectedNode = event.target,\n\t\t\t\tselectedNodeRect,\n\t\t\t\tcatcherNodeRect,\n\t\t\t\tvariables = {};\n\t\t\t// Firefox can fire dragover and dragenter events on text nodes instead of their parents\n\t\t\tif(selectedNode.nodeType === 3) {\n\t\t\t\tselectedNode = selectedNode.parentNode;\n\t\t\t}\n\t\t\tif(selector) {\n\t\t\t\t// Search ancestors for a node that matches the selector\n\t\t\t\twhile(!$tw.utils.domMatchesSelector(selectedNode,selector) &amp;&amp; selectedNode !== domNode) {\n\t\t\t\t\tselectedNode = selectedNode.parentNode;\n\t\t\t\t}\n\t\t\t\t// If we found one, copy the attributes as variables, otherwise exit\n\t\t\t\tif($tw.utils.domMatchesSelector(selectedNode,selector)) {\n\t\t\t\t\t// Only set up variables if we have actions to invoke\n\t\t\t\t\tif(actions) {\n\t\t\t\t\t\t$tw.utils.each(selectedNode.attributes,function(attribute) {\n\t\t\t\t\t\t\tvariables[\"dom-\" + attribute.name] = attribute.value.toString();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//Add a variable with a popup coordinate string for the selected node\n\t\t\t\t\t\tvariables[\"tv-popup-coords\"] = \"(\" + selectedNode.offsetLeft + \",\" + selectedNode.offsetTop +\",\" + selectedNode.offsetWidth + \",\" + selectedNode.offsetHeight + \")\";\n\n\t\t\t\t\t\t//Add variables for offset of selected node\n\t\t\t\t\t\tvariables[\"tv-selectednode-posx\"] = selectedNode.offsetLeft.toString();\n\t\t\t\t\t\tvariables[\"tv-selectednode-posy\"] = selectedNode.offsetTop.toString();\n\t\t\t\t\t\tvariables[\"tv-selectednode-width\"] = selectedNode.offsetWidth.toString();\n\t\t\t\t\t\tvariables[\"tv-selectednode-height\"] = selectedNode.offsetHeight.toString();\n\n\t\t\t\t\t\t//Add variables for event X and Y position relative to selected node\n\t\t\t\t\t\tselectedNodeRect = selectedNode.getBoundingClientRect();\n\t\t\t\t\t\tvariables[\"event-fromselected-posx\"] = (event.clientX - selectedNodeRect.left).toString();\n\t\t\t\t\t\tvariables[\"event-fromselected-posy\"] = (event.clientY - selectedNodeRect.top).toString();\n\n\t\t\t\t\t\t//Add variables for event X and Y position relative to event catcher node\n\t\t\t\t\t\tcatcherNodeRect = self.domNode.getBoundingClientRect();\n\t\t\t\t\t\tvariables[\"event-fromcatcher-posx\"] = (event.clientX - catcherNodeRect.left).toString();\n\t\t\t\t\t\tvariables[\"event-fromcatcher-posy\"] = (event.clientY - catcherNodeRect.top).toString();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Execute our actions with the variables\n\t\t\tif(actions) {\n\t\t\t\t// Add a variable for the modifier key\n\t\t\t\tvariables.modifier = $tw.keyboardManager.getEventModifierKeyDescriptor(event);\n\t\t\t\t// Add a variable for the mouse button\n\t\t\t\tif(\"button\" in event) {\n\t\t\t\t\tif(event.button === 0) {\n\t\t\t\t\t\tvariables[\"event-mousebutton\"] = \"left\";\n\t\t\t\t\t} else if(event.button === 1) {\n\t\t\t\t\t\tvariables[\"event-mousebutton\"] = \"middle\";\n\t\t\t\t\t} else if(event.button === 2) {\n\t\t\t\t\t\tvariables[\"event-mousebutton\"] = \"right\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvariables[\"event-type\"] = event.type.toString();\n\t\t\t\tif(typeof event.detail === \"object\" &amp;&amp; !!event.detail) {\n\t\t\t\t\t$tw.utils.each(event.detail,function(detailValue,detail) {\n\t\t\t\t\t\tvariables[\"event-detail-\" + detail] = detailValue.toString();\n\t\t\t\t\t});\n\t\t\t\t} else if(!!event.detail) {\n\t\t\t\t\tvariables[\"event-detail\"] = event.detail.toString();\n\t\t\t\t}\n\t\t\t\tself.invokeActionString(actions,self,event,variables);\n\t\t\t}\n\t\t\tif((actions &amp;&amp; stopPropagation === \"onaction\") || stopPropagation === \"always\") {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},false);\n\t});\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nEventWidget.prototype.execute = function() {\n\tvar self = this;\n\t// Get attributes that require a refresh on change\n\tthis.types = this.getAttribute(\"events\",\"\").split(\" \");\n\tthis.elementTag = this.getAttribute(\"tag\");\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\nEventWidget.prototype.assignDomNodeClasses = function() {\n\tvar classes = this.getAttribute(\"class\",\"\").split(\" \");\n\tclasses.push(\"tc-eventcatcher\");\n\tthis.domNode.className = classes.join(\" \");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nEventWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"events\"] || changedAttributes[\"tag\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedAttributes[\"class\"]) {\n\t\tthis.assignDomNodeClasses();\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.eventcatcher = EventWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/fieldmangler.js":{"title":"$:/core/modules/widgets/fieldmangler.js","text":"/*\\\ntitle: $:/core/modules/widgets/fieldmangler.js\ntype: application/javascript\nmodule-type: widget\n\nField mangler widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar FieldManglerWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nFieldManglerWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nFieldManglerWidget.prototype.render = function(parent,nextSibling) {\n\tthis.addEventListeners([\n\t\t{type: \"tm-remove-field\", handler: \"handleRemoveFieldEvent\"},\n\t\t{type: \"tm-add-field\", handler: \"handleAddFieldEvent\"},\n\t\t{type: \"tm-remove-tag\", handler: \"handleRemoveTagEvent\"},\n\t\t{type: \"tm-add-tag\", handler: \"handleAddTagEvent\"}\n\t]);\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nFieldManglerWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.mangleTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nFieldManglerWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tiddler) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nFieldManglerWidget.prototype.handleRemoveFieldEvent = function(event) {\n\tvar tiddler = this.wiki.getTiddler(this.mangleTitle),\n\t\tdeletion = {};\n\tdeletion[event.param] = undefined;\n\tthis.wiki.addTiddler(new $tw.Tiddler(tiddler,deletion));\n\treturn false;\n};\n\nFieldManglerWidget.prototype.handleAddFieldEvent = function(event) {\n\tvar tiddler = this.wiki.getTiddler(this.mangleTitle),\n\t\taddition = this.wiki.getModificationFields(),\n\t\thadInvalidFieldName = false,\n\t\taddField = function(name,value) {\n\t\t\tvar trimmedName = name.toLowerCase().trim();\n\t\t\tif(!$tw.utils.isValidFieldName(trimmedName)) {\n\t\t\t\tif(!hadInvalidFieldName) {\n\t\t\t\t\talert($tw.language.getString(\n\t\t\t\t\t\t\"InvalidFieldName\",\n\t\t\t\t\t\t{variables:\n\t\t\t\t\t\t\t{fieldName: trimmedName}\n\t\t\t\t\t\t}\n\t\t\t\t\t));\n\t\t\t\t\thadInvalidFieldName = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(!value &amp;&amp; tiddler) {\n\t\t\t\t\tvalue = tiddler.fields[trimmedName];\n\t\t\t\t}\n\t\t\t\taddition[trimmedName] = value || \"\";\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\taddition.title = this.mangleTitle;\n\tif(typeof event.param === \"string\") {\n\t\taddField(event.param,\"\");\n\t}\n\tif(typeof event.paramObject === \"object\") {\n\t\tfor(var name in event.paramObject) {\n\t\t\taddField(name,event.paramObject[name]);\n\t\t}\n\t}\n\tthis.wiki.addTiddler(new $tw.Tiddler(tiddler,addition));\n\treturn false;\n};\n\nFieldManglerWidget.prototype.handleRemoveTagEvent = function(event) {\n\tvar tiddler = this.wiki.getTiddler(this.mangleTitle),\n\t\tmodification = this.wiki.getModificationFields();\n\tif(tiddler &amp;&amp; tiddler.fields.tags) {\n\t\tvar p = tiddler.fields.tags.indexOf(event.param);\n\t\tif(p !== -1) {\n\t\t\tmodification.tags = (tiddler.fields.tags || []).slice(0);\n\t\t\tmodification.tags.splice(p,1);\n\t\t\tif(modification.tags.length === 0) {\n\t\t\t\tmodification.tags = undefined;\n\t\t\t}\n\t\t\tthis.wiki.addTiddler(new $tw.Tiddler(tiddler,modification));\n\t\t}\n\t}\n\treturn false;\n};\n\nFieldManglerWidget.prototype.handleAddTagEvent = function(event) {\n\tvar tiddler = this.wiki.getTiddler(this.mangleTitle),\n\t\tmodification = this.wiki.getModificationFields();\n\tif(tiddler &amp;&amp; typeof event.param === \"string\") {\n\t\tvar tag = event.param.trim();\n\t\tif(tag !== \"\") {\n\t\t\tmodification.tags = (tiddler.fields.tags || []).slice(0);\n\t\t\t$tw.utils.pushTop(modification.tags,tag);\n\t\t\tthis.wiki.addTiddler(new $tw.Tiddler(tiddler,modification));\n\t\t}\n\t} else if(typeof event.param === \"string\" &amp;&amp; event.param.trim() !== \"\" &amp;&amp; this.mangleTitle.trim() !== \"\") {\n\t\tvar tag = [];\n\t\ttag.push(event.param.trim());\n\t\tthis.wiki.addTiddler(new $tw.Tiddler({title: this.mangleTitle, tags: tag},modification));\n\t}\n\treturn false;\n};\n\nexports.fieldmangler = FieldManglerWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/fields.js":{"title":"$:/core/modules/widgets/fields.js","text":"/*\\\ntitle: $:/core/modules/widgets/fields.js\ntype: application/javascript\nmodule-type: widget\n\nFields widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar FieldsWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nFieldsWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nFieldsWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar textNode = this.document.createTextNode(this.text);\n\tparent.insertBefore(textNode,nextSibling);\n\tthis.domNodes.push(textNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nFieldsWidget.prototype.execute = function() {\n\t// Get parameters from our attributes\n\tthis.tiddlerTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.template = this.getAttribute(\"template\");\n\tthis.sort = this.getAttribute(\"sort\",\"yes\") === \"yes\";\n\tthis.sortReverse = this.getAttribute(\"sortReverse\",\"no\") === \"yes\";\n\tthis.exclude = this.getAttribute(\"exclude\");\n\tthis.include = this.getAttribute(\"include\",null);\n\tthis.stripTitlePrefix = this.getAttribute(\"stripTitlePrefix\",\"no\") === \"yes\";\n\t// Get the value to display\n\tvar tiddler = this.wiki.getTiddler(this.tiddlerTitle);\n\n\t// Get the inclusion and exclusion list\n\tvar excludeArr = (this.exclude) ? this.exclude.split(\" \") : [\"text\"];\n\t// Include takes precedence\n\tvar includeArr = (this.include) ? this.include.split(\" \") : null;\n\n\t// Compose the template\n\tvar text = [];\n\tif(this.template &amp;&amp; tiddler) {\n\t\tvar fields = [];\n\t\tif (includeArr) { // Include takes precedence\n\t\t\tfor(var i=0; i&lt;includeArr.length; i++) {\n\t\t\t\tif(tiddler.fields[includeArr[i]]) {\n\t\t\t\t\tfields.push(includeArr[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor(var fieldName in tiddler.fields) {\n\t\t\t\tif(excludeArr.indexOf(fieldName) === -1) {\n\t\t\t\t\tfields.push(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.sort) fields.sort();\n\t\tif (this.sortReverse) fields.reverse();\n\t\tfor(var f=0, fmax=fields.length; f&lt;fmax; f++) {\n\t\t\tfieldName = fields[f];\n\t\t\tvar row = this.template,\n\t\t\t\tvalue = tiddler.getFieldString(fieldName);\n\t\t\tif(this.stripTitlePrefix &amp;&amp; fieldName === \"title\") {\n\t\t\t\tvar reStrip = /^\\{[^\\}]+\\}(.+)/mg,\n\t\t\t\t\treMatch = reStrip.exec(value);\n\t\t\t\tif(reMatch) {\n\t\t\t\t\tvalue = reMatch[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\trow = $tw.utils.replaceString(row,\"$name$\",fieldName);\n\t\t\trow = $tw.utils.replaceString(row,\"$value$\",value);\n\t\t\trow = $tw.utils.replaceString(row,\"$encoded_value$\",$tw.utils.htmlEncode(value));\n\t\t\ttext.push(row);\n\t\t}\n\t}\n\tthis.text = text.join(\"\");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nFieldsWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif( changedAttributes.tiddler || changedAttributes.template || changedAttributes.exclude ||\n\t\tchangedAttributes.include || changedAttributes.sort || changedAttributes.sortReverse ||\n\t\tchangedTiddlers[this.tiddlerTitle] || changedAttributes.stripTitlePrefix) {\n\t\t\tthis.refreshSelf();\n\t\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports.fields = FieldsWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/image.js":{"title":"$:/core/modules/widgets/image.js","text":"/*\\\ntitle: $:/core/modules/widgets/image.js\ntype: application/javascript\nmodule-type: widget\n\nThe image widget displays an image referenced with an external URI or with a local tiddler title.\n\n```\n&lt;$image src=\"TiddlerTitle\" width=\"320\" height=\"400\" class=\"classnames\"&gt;\n```\n\nThe image source can be the title of an existing tiddler or the URL of an external image.\n\nExternal images always generate an HTML `&lt;img&gt;` tag.\n\nTiddlers that have a _canonical_uri field generate an HTML `&lt;img&gt;` tag with the src attribute containing the URI.\n\nTiddlers that contain image data generate an HTML `&lt;img&gt;` tag with the src attribute containing a base64 representation of the image.\n\nTiddlers that contain wikitext could be rendered to a DIV of the usual size of a tiddler, and then transformed to the size requested.\n\nThe width and height attributes are interpreted as a number of pixels, and do not need to include the \"px\" suffix.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ImageWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nImageWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nImageWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create element\n\t// Determine what type of image it is\n\tvar tag = \"img\", src = \"\",\n\t\ttiddler = this.wiki.getTiddler(this.imageSource);\n\tif(!tiddler) {\n\t\t// The source isn't the title of a tiddler, so we'll assume it's a URL\n\t\tsrc = this.getVariable(\"tv-get-export-image-link\",{params: [{name: \"src\",value: this.imageSource}],defaultValue: this.imageSource});\n\t} else {\n\t\t// Check if it is an image tiddler\n\t\tif(this.wiki.isImageTiddler(this.imageSource)) {\n\t\t\tvar type = tiddler.fields.type,\n\t\t\t\ttext = tiddler.fields.text,\n\t\t\t\t_canonical_uri = tiddler.fields._canonical_uri;\n\t\t\t// If the tiddler has body text then it doesn't need to be lazily loaded\n\t\t\tif(text) {\n\t\t\t\t// Render the appropriate element for the image type\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase \"application/pdf\":\n\t\t\t\t\t\ttag = \"embed\";\n\t\t\t\t\t\tsrc = \"data:application/pdf;base64,\" + text;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"image/svg+xml\":\n\t\t\t\t\t\tsrc = \"data:image/svg+xml,\" + encodeURIComponent(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsrc = \"data:\" + type + \";base64,\" + text;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if(_canonical_uri) {\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase \"application/pdf\":\n\t\t\t\t\t\ttag = \"embed\";\n\t\t\t\t\t\tsrc = _canonical_uri;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"image/svg+xml\":\n\t\t\t\t\t\tsrc = _canonical_uri;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsrc = _canonical_uri;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Just trigger loading of the tiddler\n\t\t\t\tthis.wiki.getTiddlerText(this.imageSource);\n\t\t\t}\n\t\t}\n\t}\n\t// Create the element and assign the attributes\n\tvar domNode = this.document.createElement(tag);\n\tdomNode.setAttribute(\"src\",src);\n\tif(this.imageClass) {\n\t\tdomNode.setAttribute(\"class\",this.imageClass);\n\t}\n\tif(this.imageWidth) {\n\t\tdomNode.setAttribute(\"width\",this.imageWidth);\n\t}\n\tif(this.imageHeight) {\n\t\tdomNode.setAttribute(\"height\",this.imageHeight);\n\t}\n\tif(this.imageTooltip) {\n\t\tdomNode.setAttribute(\"title\",this.imageTooltip);\n\t}\n\tif(this.imageAlt) {\n\t\tdomNode.setAttribute(\"alt\",this.imageAlt);\n\t}\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.domNodes.push(domNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nImageWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.imageSource = this.getAttribute(\"source\");\n\tthis.imageWidth = this.getAttribute(\"width\");\n\tthis.imageHeight = this.getAttribute(\"height\");\n\tthis.imageClass = this.getAttribute(\"class\");\n\tthis.imageTooltip = this.getAttribute(\"tooltip\");\n\tthis.imageAlt = this.getAttribute(\"alt\");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nImageWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.source || changedAttributes.width || changedAttributes.height || changedAttributes[\"class\"] || changedAttributes.tooltip || changedTiddlers[this.imageSource]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports.image = ImageWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/importvariables.js":{"title":"$:/core/modules/widgets/importvariables.js","text":"/*\\\ntitle: $:/core/modules/widgets/importvariables.js\ntype: application/javascript\nmodule-type: widget\n\nImport variable definitions from other tiddlers\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ImportVariablesWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nImportVariablesWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nImportVariablesWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nImportVariablesWidget.prototype.execute = function(tiddlerList) {\n\tvar widgetPointer = this;\n\t// Got to flush all the accumulated variables\n\tthis.variables = new this.variablesConstructor();\n\t// Get our parameters\n\tthis.filter = this.getAttribute(\"filter\");\n\t// Compute the filter\n\tthis.tiddlerList = tiddlerList || this.wiki.filterTiddlers(this.filter,this);\n\t// Accumulate the &lt;$set&gt; widgets from each tiddler\n\t$tw.utils.each(this.tiddlerList,function(title) {\n\t\tvar parser = widgetPointer.wiki.parseTiddler(title);\n\t\tif(parser) {\n\t\t\tvar parseTreeNode = parser.tree[0];\n\t\t\twhile(parseTreeNode &amp;&amp; parseTreeNode.type === \"set\") {\n\t\t\t\tvar node = {\n\t\t\t\t\ttype: \"set\",\n\t\t\t\t\tattributes: parseTreeNode.attributes,\n\t\t\t\t\tparams: parseTreeNode.params,\n\t\t\t\t\tisMacroDefinition: parseTreeNode.isMacroDefinition\n\t\t\t\t};\n\t\t\t\tif (parseTreeNode.isMacroDefinition) {\n\t\t\t\t\t// Macro definitions can be folded into\n\t\t\t\t\t// current widget instead of adding\n\t\t\t\t\t// another link to the chain.\n\t\t\t\t\tvar widget = widgetPointer.makeChildWidget(node);\n\t\t\t\t\twidget.computeAttributes();\n\t\t\t\t\twidget.execute();\n\t\t\t\t\t// We SHALLOW copy over all variables\n\t\t\t\t\t// in widget. We can't use\n\t\t\t\t\t// $tw.utils.assign, because that copies\n\t\t\t\t\t// up the prototype chain, which we\n\t\t\t\t\t// don't want.\n\t\t\t\t\t$tw.utils.each(Object.keys(widget.variables), function(key) {\n\t\t\t\t\t\twidgetPointer.variables[key] = widget.variables[key];\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twidgetPointer.children = [widgetPointer.makeChildWidget(node)];\n\t\t\t\t\t// No more regenerating children for\n\t\t\t\t\t// this widget. If it needs to refresh,\n\t\t\t\t\t// it'll do so along with the the whole\n\t\t\t\t\t// importvariable tree.\n\t\t\t\t\tif (widgetPointer != this) {\n\t\t\t\t\t\twidgetPointer.makeChildWidgets = function(){};\n\t\t\t\t\t}\n\t\t\t\t\twidgetPointer = widgetPointer.children[0];\n\t\t\t\t}\n\t\t\t\tparseTreeNode = parseTreeNode.children &amp;&amp; parseTreeNode.children[0];\n\t\t\t}\n\t\t} \n\t});\n\n\tif (widgetPointer != this) {\n\t\twidgetPointer.parseTreeNode.children = this.parseTreeNode.children;\n\t} else {\n\t\twidgetPointer.makeChildWidgets();\n\t}\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nImportVariablesWidget.prototype.refresh = function(changedTiddlers) {\n\t// Recompute our attributes and the filter list\n\tvar changedAttributes = this.computeAttributes(),\n\t\ttiddlerList = this.wiki.filterTiddlers(this.getAttribute(\"filter\"),this);\n\t// Refresh if the filter has changed, or the list of tiddlers has changed, or any of the tiddlers in the list has changed\n\tfunction haveListedTiddlersChanged() {\n\t\tvar changed = false;\n\t\ttiddlerList.forEach(function(title) {\n\t\t\tif(changedTiddlers[title]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\treturn changed;\n\t}\n\tif(changedAttributes.filter || !$tw.utils.isArrayEqual(this.tiddlerList,tiddlerList) || haveListedTiddlersChanged()) {\n\t\t// Compute the filter\n\t\tthis.removeChildDomNodes();\n\t\tthis.execute(tiddlerList);\n\t\tthis.renderChildren(this.parentDomNode,this.findNextSiblingDomNode());\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.importvariables = ImportVariablesWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/keyboard.js":{"title":"$:/core/modules/widgets/keyboard.js","text":"/*\\\ntitle: $:/core/modules/widgets/keyboard.js\ntype: application/javascript\nmodule-type: widget\n\nKeyboard shortcut widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar KeyboardWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nKeyboardWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nKeyboardWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar tag = this.parseTreeNode.isBlock ? \"div\" : \"span\";\n\tif(this.tag &amp;&amp; $tw.config.htmlUnsafeElements.indexOf(this.tag) === -1) {\n\t\ttag = this.tag;\n\t}\n\t// Create element\n\tvar domNode = this.document.createElement(tag);\n\t// Assign classes\n\tthis.domNode = domNode;\n\tthis.assignDomNodeClasses();\n\t// Add a keyboard event handler\n\t$tw.utils.addEventListeners(domNode,[\n\t\t{name: \"keydown\", handlerObject: this, handlerMethod: \"handleChangeEvent\"}\n\t]);\n\t// Insert element\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\nKeyboardWidget.prototype.handleChangeEvent = function(event) {\n\tvar keyInfo = $tw.keyboardManager.getMatchingKeyDescriptor(event,this.keyInfoArray);\n\tif(keyInfo) {\n\t\tvar handled = this.invokeActions(this,event);\n\t\tif(this.actions) {\n\t\t\tvar variables = {\n\t\t\t\t\t\"event-key\": event.key,\n\t\t\t\t\t\"event-code\": event.code,\n\t\t\t\t\t\"modifier\": $tw.keyboardManager.getEventModifierKeyDescriptor(event)\n\t\t\t\t};\n\t\t\tif(keyInfo.keyDescriptor) {\n\t\t\t\tvariables[\"event-key-descriptor\"] = keyInfo.keyDescriptor;\n\t\t\t}\n\t\t\tthis.invokeActionString(this.actions,this,event,variables);\n\t\t}\n\t\tthis.dispatchMessage(event);\n\t\tif(handled || this.actions || this.message) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nKeyboardWidget.prototype.dispatchMessage = function(event) {\n\tthis.dispatchEvent({type: this.message, param: this.param, tiddlerTitle: this.getVariable(\"currentTiddler\")});\n};\n\n/*\nCompute the internal state of the widget\n*/\nKeyboardWidget.prototype.execute = function() {\n\tvar self = this;\n\t// Get attributes\n\tthis.actions = this.getAttribute(\"actions\",\"\");\n\tthis.message = this.getAttribute(\"message\",\"\");\n\tthis.param = this.getAttribute(\"param\",\"\");\n\tthis.key = this.getAttribute(\"key\",\"\");\n\tthis.tag = this.getAttribute(\"tag\",\"\");\n\tthis.keyInfoArray = $tw.keyboardManager.parseKeyDescriptors(this.key);\n\tif(this.key.substr(0,2) === \"((\" &amp;&amp; this.key.substr(-2,2) === \"))\") {\n\t\tthis.shortcutTiddlers = [];\n\t\tvar name = this.key.substring(2,this.key.length -2);\n\t\t$tw.utils.each($tw.keyboardManager.lookupNames,function(platformDescriptor) {\n\t\t\tself.shortcutTiddlers.push(\"$:/config/\" + platformDescriptor + \"/\" + name);\n\t\t});\n\t}\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\nKeyboardWidget.prototype.assignDomNodeClasses = function() {\n\tvar classes = this.getAttribute(\"class\",\"\").split(\" \");\n\tclasses.push(\"tc-keyboard\");\n\tthis.domNode.className = classes.join(\" \");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nKeyboardWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.message || changedAttributes.param || changedAttributes.key || changedAttributes.tag) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedAttributes[\"class\"]) {\n\t\tthis.assignDomNodeClasses();\n\t}\n\t// Update the keyInfoArray if one of its shortcut-config-tiddlers has changed\n\tif(this.shortcutTiddlers &amp;&amp; $tw.utils.hopArray(changedTiddlers,this.shortcutTiddlers)) {\n\t\tthis.keyInfoArray = $tw.keyboardManager.parseKeyDescriptors(this.key);\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.keyboard = KeyboardWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/link.js":{"title":"$:/core/modules/widgets/link.js","text":"/*\\\ntitle: $:/core/modules/widgets/link.js\ntype: application/javascript\nmodule-type: widget\n\nLink widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar LinkWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nLinkWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nLinkWidget.prototype.render = function(parent,nextSibling) {\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Get the value of the tv-wikilinks configuration macro\n\tvar wikiLinksMacro = this.getVariable(\"tv-wikilinks\"),\n\t\tuseWikiLinks = wikiLinksMacro ? (wikiLinksMacro.trim() !== \"no\") : true,\n\t\tmissingLinksEnabled = !(this.hideMissingLinks &amp;&amp; this.isMissing &amp;&amp; !this.isShadow);\n\t// Render the link if required\n\tif(useWikiLinks &amp;&amp; missingLinksEnabled) {\n\t\tthis.renderLink(parent,nextSibling);\n\t} else {\n\t\t// Just insert the link text\n\t\tvar domNode = this.document.createElement(\"span\");\n\t\tparent.insertBefore(domNode,nextSibling);\n\t\tthis.renderChildren(domNode,null);\n\t\tthis.domNodes.push(domNode);\n\t}\n};\n\n/*\nRender this widget into the DOM\n*/\nLinkWidget.prototype.renderLink = function(parent,nextSibling) {\n\tvar self = this;\n\t// Sanitise the specified tag\n\tvar tag = this.linkTag;\n\tif($tw.config.htmlUnsafeElements.indexOf(tag) !== -1) {\n\t\ttag = \"a\";\n\t}\n\t// Create our element\n\tvar namespace = this.getVariable(\"namespace\",{defaultValue: \"http://www.w3.org/1999/xhtml\"}),\n\t\tdomNode = this.document.createElementNS(namespace,tag);\n\t// Assign classes\n\tvar classes = [];\n\tif(this.overrideClasses === undefined) {\n\t\tclasses.push(\"tc-tiddlylink\");\n\t\tif(this.isShadow) {\n\t\t\tclasses.push(\"tc-tiddlylink-shadow\");\n\t\t}\n\t\tif(this.isMissing &amp;&amp; !this.isShadow) {\n\t\t\tclasses.push(\"tc-tiddlylink-missing\");\n\t\t} else {\n\t\t\tif(!this.isMissing) {\n\t\t\t\tclasses.push(\"tc-tiddlylink-resolves\");\n\t\t\t}\n\t\t}\n\t\tif(this.linkClasses) {\n\t\t\tclasses.push(this.linkClasses);\n\t\t}\n\t} else if(this.overrideClasses !== \"\") {\n\t\tclasses.push(this.overrideClasses)\n\t}\n\tif(classes.length &gt; 0) {\n\t\tdomNode.setAttribute(\"class\",classes.join(\" \"));\n\t}\n\t// Set an href\n\tvar wikilinkTransformFilter = this.getVariable(\"tv-filter-export-link\"),\n\t\twikiLinkText;\n\tif(wikilinkTransformFilter) {\n\t\t// Use the filter to construct the href\n\t\twikiLinkText = this.wiki.filterTiddlers(wikilinkTransformFilter,this,function(iterator) {\n\t\t\titerator(self.wiki.getTiddler(self.to),self.to)\n\t\t})[0];\n\t} else {\n\t\t// Expand the tv-wikilink-template variable to construct the href\n\t\tvar wikiLinkTemplateMacro = this.getVariable(\"tv-wikilink-template\"),\n\t\t\twikiLinkTemplate = wikiLinkTemplateMacro ? wikiLinkTemplateMacro.trim() : \"#$uri_encoded$\";\n\t\twikiLinkText = $tw.utils.replaceString(wikiLinkTemplate,\"$uri_encoded$\",encodeURIComponent(this.to));\n\t\twikiLinkText = $tw.utils.replaceString(wikiLinkText,\"$uri_doubleencoded$\",encodeURIComponent(encodeURIComponent(this.to)));\n\t}\n\t// Override with the value of tv-get-export-link if defined\n\twikiLinkText = this.getVariable(\"tv-get-export-link\",{params: [{name: \"to\",value: this.to}],defaultValue: wikiLinkText});\n\tif(tag === \"a\") {\n\t\tvar namespaceHref = (namespace === \"http://www.w3.org/2000/svg\") ? \"http://www.w3.org/1999/xlink\" : undefined;\n\t\tdomNode.setAttributeNS(namespaceHref,\"href\",wikiLinkText);\n\t}\n\t// Set the tabindex\n\tif(this.tabIndex) {\n\t\tdomNode.setAttribute(\"tabindex\",this.tabIndex);\n\t}\n\t// Set the tooltip\n\t// HACK: Performance issues with re-parsing the tooltip prevent us defaulting the tooltip to \"&lt;$transclude field='tooltip'&gt;&lt;$transclude field='title'/&gt;&lt;/$transclude&gt;\"\n\tvar tooltipWikiText = this.tooltip || this.getVariable(\"tv-wikilink-tooltip\");\n\tif(tooltipWikiText) {\n\t\tvar tooltipText = this.wiki.renderText(\"text/plain\",\"text/vnd.tiddlywiki\",tooltipWikiText,{\n\t\t\t\tparseAsInline: true,\n\t\t\t\tvariables: {\n\t\t\t\t\tcurrentTiddler: this.to\n\t\t\t\t},\n\t\t\t\tparentWidget: this\n\t\t\t});\n\t\tdomNode.setAttribute(\"title\",tooltipText);\n\t}\n\tif(this[\"aria-label\"]) {\n\t\tdomNode.setAttribute(\"aria-label\",this[\"aria-label\"]);\n\t}\n\t// Add a click event handler\n\t$tw.utils.addEventListeners(domNode,[\n\t\t{name: \"click\", handlerObject: this, handlerMethod: \"handleClickEvent\"},\n\t]);\n\t// Make the link draggable if required\n\tif(this.draggable === \"yes\") {\n\t\t$tw.utils.makeDraggable({\n\t\t\tdomNode: domNode,\n\t\t\tdragTiddlerFn: function() {return self.to;},\n\t\t\twidget: this\n\t\t});\n\t}\n\t// Insert the link into the DOM and render any children\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\nLinkWidget.prototype.handleClickEvent = function(event) {\n\t// Send the click on its way as a navigate event\n\tvar bounds = this.domNodes[0].getBoundingClientRect();\n\tthis.dispatchEvent({\n\t\ttype: \"tm-navigate\",\n\t\tnavigateTo: this.to,\n\t\tnavigateFromTitle: this.getVariable(\"storyTiddler\"),\n\t\tnavigateFromNode: this,\n\t\tnavigateFromClientRect: { top: bounds.top, left: bounds.left, width: bounds.width, right: bounds.right, bottom: bounds.bottom, height: bounds.height\n\t\t},\n\t\tnavigateSuppressNavigation: event.metaKey || event.ctrlKey || (event.button === 1),\n\t\tmetaKey: event.metaKey,\n\t\tctrlKey: event.ctrlKey,\n\t\taltKey: event.altKey,\n\t\tshiftKey: event.shiftKey,\n\t\tevent: event\n\t});\n\tif(this.domNodes[0].hasAttribute(\"href\")) {\n\t\tevent.preventDefault();\n\t}\n\tevent.stopPropagation();\n\treturn false;\n};\n\n/*\nCompute the internal state of the widget\n*/\nLinkWidget.prototype.execute = function() {\n\t// Pick up our attributes\n\tthis.to = this.getAttribute(\"to\",this.getVariable(\"currentTiddler\"));\n\tthis.tooltip = this.getAttribute(\"tooltip\");\n\tthis[\"aria-label\"] = this.getAttribute(\"aria-label\");\n\tthis.linkClasses = this.getAttribute(\"class\");\n\tthis.overrideClasses = this.getAttribute(\"overrideClass\");\n\tthis.tabIndex = this.getAttribute(\"tabindex\");\n\tthis.draggable = this.getAttribute(\"draggable\",\"yes\");\n\tthis.linkTag = this.getAttribute(\"tag\",\"a\");\n\t// Determine the link characteristics\n\tthis.isMissing = !this.wiki.tiddlerExists(this.to);\n\tthis.isShadow = this.wiki.isShadowTiddler(this.to);\n\tthis.hideMissingLinks = (this.getVariable(\"tv-show-missing-links\") || \"yes\") === \"no\";\n\t// Make the child widgets\n\tvar templateTree;\n\tif(this.parseTreeNode.children &amp;&amp; this.parseTreeNode.children.length &gt; 0) {\n\t\ttemplateTree = this.parseTreeNode.children;\n\t} else {\n\t\t// Default template is a link to the title\n\t\ttemplateTree = [{type: \"text\", text: this.to}];\n\t}\n\tthis.makeChildWidgets(templateTree);\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nLinkWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.to || changedTiddlers[this.to] || changedAttributes[\"aria-label\"] || changedAttributes.tooltip) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.link = LinkWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/linkcatcher.js":{"title":"$:/core/modules/widgets/linkcatcher.js","text":"/*\\\ntitle: $:/core/modules/widgets/linkcatcher.js\ntype: application/javascript\nmodule-type: widget\n\nLinkcatcher widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar LinkCatcherWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nLinkCatcherWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nLinkCatcherWidget.prototype.render = function(parent,nextSibling) {\n\tthis.addEventListeners([\n\t\t{type: \"tm-navigate\", handler: \"handleNavigateEvent\"}\n\t]);\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nLinkCatcherWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.catchTo = this.getAttribute(\"to\");\n\tthis.catchMessage = this.getAttribute(\"message\");\n\tthis.catchSet = this.getAttribute(\"set\");\n\tthis.catchSetTo = this.getAttribute(\"setTo\");\n\tthis.catchActions = this.getAttribute(\"actions\");\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n\t// When executing actions we avoid trapping navigate events, so that we don't trigger ourselves recursively\n\tthis.executingActions = false;\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nLinkCatcherWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.to || changedAttributes.message || changedAttributes.set || changedAttributes.setTo) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\n/*\nHandle a tm-navigate event\n*/\nLinkCatcherWidget.prototype.handleNavigateEvent = function(event) {\n\tif(!this.executingActions) {\n\t\t// Execute the actions\n\t\tif(this.catchTo) {\n\t\t\tthis.wiki.setTextReference(this.catchTo,event.navigateTo,this.getVariable(\"currentTiddler\"));\n\t\t}\n\t\tif(this.catchMessage &amp;&amp; this.parentWidget) {\n\t\t\tthis.parentWidget.dispatchEvent({\n\t\t\t\ttype: this.catchMessage,\n\t\t\t\tparam: event.navigateTo,\n\t\t\t\tnavigateTo: event.navigateTo\n\t\t\t});\n\t\t}\n\t\tif(this.catchSet) {\n\t\t\tvar tiddler = this.wiki.getTiddler(this.catchSet);\n\t\t\tthis.wiki.addTiddler(new $tw.Tiddler(tiddler,{title: this.catchSet, text: this.catchSetTo}));\n\t\t}\n\t\tif(this.catchActions) {\n\t\t\tthis.executingActions = true;\n\t\t\tvar modifierKey = $tw.keyboardManager.getEventModifierKeyDescriptor(event);\n\t\t\tthis.invokeActionString(this.catchActions,this,event,{navigateTo: event.navigateTo, modifier: modifierKey});\n\t\t\tthis.executingActions = false;\n\t\t}\n\t} else {\n\t\t// This is a navigate event generated by the actions of this linkcatcher, so we don't trap it again, but just pass it to the parent\n\t\tthis.parentWidget.dispatchEvent({\n\t\t\ttype: \"tm-navigate\",\n\t\t\tparam: event.navigateTo,\n\t\t\tnavigateTo: event.navigateTo\n\t\t});\n\t}\n\treturn false;\n};\n\nexports.linkcatcher = LinkCatcherWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/list.js":{"title":"$:/core/modules/widgets/list.js","text":"/*\\\ntitle: $:/core/modules/widgets/list.js\ntype: application/javascript\nmodule-type: widget\n\nList and list item widgets\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\n/*\nThe list widget creates list element sub-widgets that reach back into the list widget for their configuration\n*/\n\nvar ListWidget = function(parseTreeNode,options) {\n\t// Main initialisation inherited from widget.js\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nListWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nListWidget.prototype.render = function(parent,nextSibling) {\n\t// Initialise the storyviews if they've not been done already\n\tif(!this.storyViews) {\n\t\tListWidget.prototype.storyViews = {};\n\t\t$tw.modules.applyMethods(\"storyview\",this.storyViews);\n\t}\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n\t// Construct the storyview\n\tvar StoryView = this.storyViews[this.storyViewName];\n\tif(this.storyViewName &amp;&amp; !StoryView) {\n\t\tStoryView = this.storyViews[\"classic\"];\n\t}\n\tif(StoryView &amp;&amp; !this.document.isTiddlyWikiFakeDom) {\n\t\tthis.storyview = new StoryView(this);\n\t} else {\n\t\tthis.storyview = null;\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nListWidget.prototype.execute = function() {\n\t// Get our attributes\n\tthis.template = this.getAttribute(\"template\");\n\tthis.editTemplate = this.getAttribute(\"editTemplate\");\n\tthis.variableName = this.getAttribute(\"variable\",\"currentTiddler\");\n\tthis.counterName = this.getAttribute(\"counter\");\n\tthis.storyViewName = this.getAttribute(\"storyview\");\n\tthis.historyTitle = this.getAttribute(\"history\");\n\t// Compose the list elements\n\tthis.list = this.getTiddlerList();\n\tvar members = [],\n\t\tself = this;\n\t// Check for an empty list\n\tif(this.list.length === 0) {\n\t\tmembers = this.getEmptyMessage();\n\t} else {\n\t\t$tw.utils.each(this.list,function(title,index) {\n\t\t\tmembers.push(self.makeItemTemplate(title,index));\n\t\t});\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets(members);\n\t// Clear the last history\n\tthis.history = [];\n};\n\nListWidget.prototype.getTiddlerList = function() {\n\tvar defaultFilter = \"[!is[system]sort[title]]\";\n\treturn this.wiki.filterTiddlers(this.getAttribute(\"filter\",defaultFilter),this);\n};\n\nListWidget.prototype.getEmptyMessage = function() {\n\tvar parser,\n\t\temptyMessage = this.getAttribute(\"emptyMessage\",\"\");\n\t// this.wiki.parseText() calls \n\t// new Parser(..), which should only be done, if needed, because it's heavy!\n\tif (emptyMessage === \"\") {\n\t\treturn [];\n\t}\n\tparser = this.wiki.parseText(\"text/vnd.tiddlywiki\",emptyMessage,{parseAsInline: true});\n\tif(parser) {\n\t\treturn parser.tree;\n\t} else {\n\t\treturn [];\n\t}\n};\n\n/*\nCompose the template for a list item\n*/\nListWidget.prototype.makeItemTemplate = function(title,index) {\n\t// Check if the tiddler is a draft\n\tvar tiddler = this.wiki.getTiddler(title),\n\t\tisDraft = tiddler &amp;&amp; tiddler.hasField(\"draft.of\"),\n\t\ttemplate = this.template,\n\t\ttemplateTree;\n\tif(isDraft &amp;&amp; this.editTemplate) {\n\t\ttemplate = this.editTemplate;\n\t}\n\t// Compose the transclusion of the template\n\tif(template) {\n\t\ttemplateTree = [{type: \"transclude\", attributes: {tiddler: {type: \"string\", value: template}}}];\n\t} else {\n\t\tif(this.parseTreeNode.children &amp;&amp; this.parseTreeNode.children.length &gt; 0) {\n\t\t\ttemplateTree = this.parseTreeNode.children;\n\t\t} else {\n\t\t\t// Default template is a link to the title\n\t\t\ttemplateTree = [{type: \"element\", tag: this.parseTreeNode.isBlock ? \"div\" : \"span\", children: [{type: \"link\", attributes: {to: {type: \"string\", value: title}}, children: [\n\t\t\t\t\t{type: \"text\", text: title}\n\t\t\t]}]}];\n\t\t}\n\t}\n\t// Return the list item\n\tvar parseTreeNode = {type: \"listitem\", itemTitle: title, variableName: this.variableName, children: templateTree};\n\tif(this.counterName) {\n\t\tparseTreeNode.counter = (index + 1).toString();\n\t\tparseTreeNode.counterName = this.counterName;\n\t\tparseTreeNode.isFirst = index === 0;\n\t\tparseTreeNode.isLast = index === this.list.length - 1;\n\t}\n\treturn parseTreeNode;\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nListWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes(),\n\t\tresult;\n\t// Call the storyview\n\tif(this.storyview &amp;&amp; this.storyview.refreshStart) {\n\t\tthis.storyview.refreshStart(changedTiddlers,changedAttributes);\n\t}\n\t// Completely refresh if any of our attributes have changed\n\tif(changedAttributes.filter || changedAttributes.variable || changedAttributes.counter || changedAttributes.template || changedAttributes.editTemplate || changedAttributes.emptyMessage || changedAttributes.storyview || changedAttributes.history) {\n\t\tthis.refreshSelf();\n\t\tresult = true;\n\t} else {\n\t\t// Handle any changes to the list\n\t\tresult = this.handleListChanges(changedTiddlers);\n\t\t// Handle any changes to the history stack\n\t\tif(this.historyTitle &amp;&amp; changedTiddlers[this.historyTitle]) {\n\t\t\tthis.handleHistoryChanges();\n\t\t}\n\t}\n\t// Call the storyview\n\tif(this.storyview &amp;&amp; this.storyview.refreshEnd) {\n\t\tthis.storyview.refreshEnd(changedTiddlers,changedAttributes);\n\t}\n\treturn result;\n};\n\n/*\nHandle any changes to the history list\n*/\nListWidget.prototype.handleHistoryChanges = function() {\n\t// Get the history data\n\tvar newHistory = this.wiki.getTiddlerDataCached(this.historyTitle,[]);\n\t// Ignore any entries of the history that match the previous history\n\tvar entry = 0;\n\twhile(entry &lt; newHistory.length &amp;&amp; entry &lt; this.history.length &amp;&amp; newHistory[entry].title === this.history[entry].title) {\n\t\tentry++;\n\t}\n\t// Navigate forwards to each of the new tiddlers\n\twhile(entry &lt; newHistory.length) {\n\t\tif(this.storyview &amp;&amp; this.storyview.navigateTo) {\n\t\t\tthis.storyview.navigateTo(newHistory[entry]);\n\t\t}\n\t\tentry++;\n\t}\n\t// Update the history\n\tthis.history = newHistory;\n};\n\n/*\nProcess any changes to the list\n*/\nListWidget.prototype.handleListChanges = function(changedTiddlers) {\n\t// Get the new list\n\tvar prevList = this.list;\n\tthis.list = this.getTiddlerList();\n\t// Check for an empty list\n\tif(this.list.length === 0) {\n\t\t// Check if it was empty before\n\t\tif(prevList.length === 0) {\n\t\t\t// If so, just refresh the empty message\n\t\t\treturn this.refreshChildren(changedTiddlers);\n\t\t} else {\n\t\t\t// Replace the previous content with the empty message\n\t\t\tfor(t=this.children.length-1; t&gt;=0; t--) {\n\t\t\t\tthis.removeListItem(t);\n\t\t\t}\n\t\t\tvar nextSibling = this.findNextSiblingDomNode();\n\t\t\tthis.makeChildWidgets(this.getEmptyMessage());\n\t\t\tthis.renderChildren(this.parentDomNode,nextSibling);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\t// If the list was empty then we need to remove the empty message\n\t\tif(prevList.length === 0) {\n\t\t\tthis.removeChildDomNodes();\n\t\t\tthis.children = [];\n\t\t}\n\t\t// If we are providing an counter variable then we must refresh the items, otherwise we can rearrange them\n\t\tvar hasRefreshed = false,t;\n\t\tif(this.counterName) {\n\t\t\t// Cycle through the list and remove and re-insert the first item that has changed, and all the remaining items\n\t\t\tfor(t=0; t&lt;this.list.length; t++) {\n\t\t\t\tif(hasRefreshed || !this.children[t] || this.children[t].parseTreeNode.itemTitle !== this.list[t]) {\n\t\t\t\t\tif(this.children[t]) {\n\t\t\t\t\t\tthis.removeListItem(t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.insertListItem(t,this.list[t]);\n\t\t\t\t\thasRefreshed = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Refresh the item we're reusing\n\t\t\t\t\tvar refreshed = this.children[t].refresh(changedTiddlers);\n\t\t\t\t\thasRefreshed = hasRefreshed || refreshed;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Cycle through the list, inserting and removing list items as needed\n\t\t\tfor(t=0; t&lt;this.list.length; t++) {\n\t\t\t\tvar index = this.findListItem(t,this.list[t]);\n\t\t\t\tif(index === undefined) {\n\t\t\t\t\t// The list item must be inserted\n\t\t\t\t\tthis.insertListItem(t,this.list[t]);\n\t\t\t\t\thasRefreshed = true;\n\t\t\t\t} else {\n\t\t\t\t\t// There are intervening list items that must be removed\n\t\t\t\t\tfor(var n=index-1; n&gt;=t; n--) {\n\t\t\t\t\t\tthis.removeListItem(n);\n\t\t\t\t\t\thasRefreshed = true;\n\t\t\t\t\t}\n\t\t\t\t\t// Refresh the item we're reusing\n\t\t\t\t\tvar refreshed = this.children[t].refresh(changedTiddlers);\n\t\t\t\t\thasRefreshed = hasRefreshed || refreshed;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Remove any left over items\n\t\tfor(t=this.children.length-1; t&gt;=this.list.length; t--) {\n\t\t\tthis.removeListItem(t);\n\t\t\thasRefreshed = true;\n\t\t}\n\t\treturn hasRefreshed;\n\t}\n};\n\n/*\nFind the list item with a given title, starting from a specified position\n*/\nListWidget.prototype.findListItem = function(startIndex,title) {\n\twhile(startIndex &lt; this.children.length) {\n\t\tif(this.children[startIndex].parseTreeNode.itemTitle === title) {\n\t\t\treturn startIndex;\n\t\t}\n\t\tstartIndex++;\n\t}\n\treturn undefined;\n};\n\n/*\nInsert a new list item at the specified index\n*/\nListWidget.prototype.insertListItem = function(index,title) {\n\t// Create, insert and render the new child widgets\n\tvar widget = this.makeChildWidget(this.makeItemTemplate(title,index));\n\twidget.parentDomNode = this.parentDomNode; // Hack to enable findNextSiblingDomNode() to work\n\tthis.children.splice(index,0,widget);\n\tvar nextSibling = widget.findNextSiblingDomNode();\n\twidget.render(this.parentDomNode,nextSibling);\n\t// Animate the insertion if required\n\tif(this.storyview &amp;&amp; this.storyview.insert) {\n\t\tthis.storyview.insert(widget);\n\t}\n\treturn true;\n};\n\n/*\nRemove the specified list item\n*/\nListWidget.prototype.removeListItem = function(index) {\n\tvar widget = this.children[index];\n\t// Animate the removal if required\n\tif(this.storyview &amp;&amp; this.storyview.remove) {\n\t\tthis.storyview.remove(widget);\n\t} else {\n\t\twidget.removeChildDomNodes();\n\t}\n\t// Remove the child widget\n\tthis.children.splice(index,1);\n};\n\nexports.list = ListWidget;\n\nvar ListItemWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nListItemWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nListItemWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nListItemWidget.prototype.execute = function() {\n\t// Set the current list item title\n\tthis.setVariable(this.parseTreeNode.variableName,this.parseTreeNode.itemTitle);\n\tif(this.parseTreeNode.counterName) {\n\t\tthis.setVariable(this.parseTreeNode.counterName,this.parseTreeNode.counter);\n\t\tthis.setVariable(this.parseTreeNode.counterName + \"-first\",this.parseTreeNode.isFirst ? \"yes\" : \"no\");\n\t\tthis.setVariable(this.parseTreeNode.counterName + \"-last\",this.parseTreeNode.isLast ? \"yes\" : \"no\");\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nListItemWidget.prototype.refresh = function(changedTiddlers) {\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.listitem = ListItemWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/log.js":{"title":"$:/core/modules/widgets/log.js","text":"/*\\\ntitle: $:/core/modules/widgets/log.js\ntype: application/javascript\nmodule-type: widget-subclass\n\nWidget to log debug messages\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nexports.baseClass = \"action-log\";\n\nexports.name = \"log\";\n\nexports.constructor = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n}\n\nexports.prototype = {};\n\nexports.prototype.render = function(event) {\n\tObject.getPrototypeOf(Object.getPrototypeOf(this)).render.call(this,event);\n\tObject.getPrototypeOf(Object.getPrototypeOf(this)).log.call(this);\n}\n\n})();","type":"application/javascript","module-type":"widget-subclass"},"$:/core/modules/widgets/macrocall.js":{"title":"$:/core/modules/widgets/macrocall.js","text":"/*\\\ntitle: $:/core/modules/widgets/macrocall.js\ntype: application/javascript\nmodule-type: widget\n\nMacrocall widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar MacroCallWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nMacroCallWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nMacroCallWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nMacroCallWidget.prototype.execute = function() {\n\t// Get the parse type if specified\n\tthis.parseType = this.getAttribute(\"$type\",\"text/vnd.tiddlywiki\");\n\tthis.renderOutput = this.getAttribute(\"$output\",\"text/html\");\n\t// Merge together the parameters specified in the parse tree with the specified attributes\n\tvar params = this.parseTreeNode.params ? this.parseTreeNode.params.slice(0) : [];\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.charAt(0) !== \"$\") {\n\t\t\tparams.push({name: name, value: attribute});\n\t\t}\n\t});\n\t// Get the macro value\n\tvar macroName = this.parseTreeNode.name || this.getAttribute(\"$name\"),\n\t\tvariableInfo = this.getVariableInfo(macroName,{params: params}),\n\t\ttext = variableInfo.text,\n\t\tparseTreeNodes;\n\t// Are we rendering to HTML?\n\tif(this.renderOutput === \"text/html\") {\n\t\t// If so we'll return the parsed macro\n\t\t// Check if we've already cached parsing this macro\n\t\tvar mode = this.parseTreeNode.isBlock ? \"blockParser\" : \"inlineParser\",\n\t\t\tparser;\n\t\tif(variableInfo.srcVariable &amp;&amp; variableInfo.srcVariable[mode]) {\n\t\t\tparser = variableInfo.srcVariable[mode];\n\t\t} else {\n\t\t\tparser = this.wiki.parseText(this.parseType,text,\n\t\t\t\t\t\t\t\t{parseAsInline: !this.parseTreeNode.isBlock});\n\t\t\tif(variableInfo.isCacheable &amp;&amp; variableInfo.srcVariable) {\n\t\t\t\tvariableInfo.srcVariable[mode] = parser;\n\t\t\t}\n\t\t}\n\t\tvar parseTreeNodes = parser ? parser.tree : [];\n\t\t// Wrap the parse tree in a vars widget assigning the parameters to variables named \"__paramname__\"\n\t\tvar attributes = {};\n\t\t$tw.utils.each(variableInfo.params,function(param) {\n\t\t\tvar name = \"__\" + param.name + \"__\";\n\t\t\tattributes[name] = {\n\t\t\t\tname: name,\n\t\t\t\ttype: \"string\",\n\t\t\t\tvalue: param.value\n\t\t\t};\n\t\t});\n\t\tparseTreeNodes = [{\n\t\t\ttype: \"vars\",\n\t\t\tattributes: attributes,\n\t\t\tchildren: parseTreeNodes\n\t\t}];\n\t} else if(this.renderOutput === \"text/raw\") {\n\t\tparseTreeNodes = [{type: \"text\", text: text}];\n\t} else {\n\t\t// Otherwise, we'll render the text\n\t\tvar plainText = this.wiki.renderText(\"text/plain\",this.parseType,text,{parentWidget: this});\n\t\tparseTreeNodes = [{type: \"text\", text: plainText}];\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets(parseTreeNodes);\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nMacroCallWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\t// Rerender ourselves\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.macrocall = MacroCallWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/messagecatcher.js":{"title":"$:/core/modules/widgets/messagecatcher.js","text":"/*\\\ntitle: $:/core/modules/widgets/messagecatcher.js\ntype: application/javascript\nmodule-type: widget\n\nMessage catcher widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar MessageCatcherWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nMessageCatcherWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nMessageCatcherWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Helper to add an event handler\n\tvar addEventHandler = function(type,actions) {\n\t\tif(type &amp;&amp; actions) {\n\t\t\tself.addEventListener(\n\t\t\t\ttype,\n\t\t\t\tfunction(event) {\n\t\t\t\t\t// Collect all the event properties into variables\n\t\t\t\t\tvar collectProps = function(obj,prefix) {\n\t\t\t\t\t\tprefix = prefix || \"\";\n\t\t\t\t\t\tvar props = {};\n\t\t\t\t\t\t$tw.utils.each(obj,function(value,name) {\n\t\t\t\t\t\t\tif([\"string\",\"boolean\",\"number\"].indexOf(typeof value) !== -1) {\n\t\t\t\t\t\t\t\tprops[prefix + name] = value.toString();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn props;\n\t\t\t\t\t};\n\t\t\t\t\tvar variables = $tw.utils.extend(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tcollectProps(event.paramObject,\"event-paramObject-\"),\n\t\t\t\t\t\tcollectProps(event,\"event-\"),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodifier: $tw.keyboardManager.getEventModifierKeyDescriptor(event)\n\t\t\t\t\t\t});\n\t\t\t\t\tself.invokeActionString(actions,self,event,variables);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\t// Add the main event handler\n\taddEventHandler(this.getAttribute(\"type\"),this.getAttribute(\"actions\"));\n\t// Add any other event handlers\n\t$tw.utils.each(this.attributes,function(value,key) {\n\t\tif(key.charAt(0) === \"$\") {\n\t\t\taddEventHandler(key.slice(1),value);\n\t\t}\n\t});\n\t// Render children\n\tthis.renderChildren(parent,null);\n};\n\n/*\nCompute the internal state of the widget\n*/\nMessageCatcherWidget.prototype.execute = function() {\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nMessageCatcherWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.messagecatcher = MessageCatcherWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/navigator.js":{"title":"$:/core/modules/widgets/navigator.js","text":"/*\\\ntitle: $:/core/modules/widgets/navigator.js\ntype: application/javascript\nmodule-type: widget\n\nNavigator widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar IMPORT_TITLE = \"$:/Import\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar NavigatorWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nNavigatorWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nNavigatorWidget.prototype.render = function(parent,nextSibling) {\n\tthis.addEventListeners([\n\t\t{type: \"tm-navigate\", handler: \"handleNavigateEvent\"},\n\t\t{type: \"tm-edit-tiddler\", handler: \"handleEditTiddlerEvent\"},\n\t\t{type: \"tm-delete-tiddler\", handler: \"handleDeleteTiddlerEvent\"},\n\t\t{type: \"tm-save-tiddler\", handler: \"handleSaveTiddlerEvent\"},\n\t\t{type: \"tm-cancel-tiddler\", handler: \"handleCancelTiddlerEvent\"},\n\t\t{type: \"tm-close-tiddler\", handler: \"handleCloseTiddlerEvent\"},\n\t\t{type: \"tm-close-all-tiddlers\", handler: \"handleCloseAllTiddlersEvent\"},\n\t\t{type: \"tm-close-other-tiddlers\", handler: \"handleCloseOtherTiddlersEvent\"},\n\t\t{type: \"tm-new-tiddler\", handler: \"handleNewTiddlerEvent\"},\n\t\t{type: \"tm-import-tiddlers\", handler: \"handleImportTiddlersEvent\"},\n\t\t{type: \"tm-perform-import\", handler: \"handlePerformImportEvent\"},\n\t\t{type: \"tm-fold-tiddler\", handler: \"handleFoldTiddlerEvent\"},\n\t\t{type: \"tm-fold-other-tiddlers\", handler: \"handleFoldOtherTiddlersEvent\"},\n\t\t{type: \"tm-fold-all-tiddlers\", handler: \"handleFoldAllTiddlersEvent\"},\n\t\t{type: \"tm-unfold-all-tiddlers\", handler: \"handleUnfoldAllTiddlersEvent\"},\n\t\t{type: \"tm-rename-tiddler\", handler: \"handleRenameTiddlerEvent\"}\n\t]);\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nNavigatorWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.storyTitle = this.getAttribute(\"story\");\n\tthis.historyTitle = this.getAttribute(\"history\");\n\tthis.setVariable(\"tv-story-list\",this.storyTitle);\n\tthis.setVariable(\"tv-history-list\",this.historyTitle);\n\tthis.story = new $tw.Story({\n\t\twiki: this.wiki,\n\t\tstoryTitle: this.storyTitle,\n\t\thistoryTitle: this.historyTitle\n\t});\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nNavigatorWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.story || changedAttributes.history) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nNavigatorWidget.prototype.getStoryList = function() {\n\treturn this.storyTitle ? this.wiki.getTiddlerList(this.storyTitle) : null;\n};\n\nNavigatorWidget.prototype.saveStoryList = function(storyList) {\n\tif(this.storyTitle) {\n\t\tvar storyTiddler = this.wiki.getTiddler(this.storyTitle);\n\t\tthis.wiki.addTiddler(new $tw.Tiddler(\n\t\t\t{title: this.storyTitle},\n\t\t\tstoryTiddler,\n\t\t\t{list: storyList}\n\t\t));\n\t}\n};\n\nNavigatorWidget.prototype.removeTitleFromStory = function(storyList,title) {\n\tif(storyList) {\n\t\tvar p = storyList.indexOf(title);\n\t\twhile(p !== -1) {\n\t\t\tstoryList.splice(p,1);\n\t\t\tp = storyList.indexOf(title);\n\t\t}\n\t}\n};\n\nNavigatorWidget.prototype.replaceFirstTitleInStory = function(storyList,oldTitle,newTitle) {\n\tif(storyList) {\n\t\tvar pos = storyList.indexOf(oldTitle);\n\t\tif(pos !== -1) {\n\t\t\tstoryList[pos] = newTitle;\n\t\t\tdo {\n\t\t\t\tpos = storyList.indexOf(oldTitle,pos + 1);\n\t\t\t\tif(pos !== -1) {\n\t\t\t\t\tstoryList.splice(pos,1);\n\t\t\t\t}\n\t\t\t} while(pos !== -1);\n\t\t} else {\n\t\t\tstoryList.splice(0,0,newTitle);\n\t\t}\n\t}\n};\n\nNavigatorWidget.prototype.addToStory = function(title,fromTitle) {\n\tif(this.storyTitle) {\n\t\tthis.story.addToStory(title,fromTitle,{\n\t\t\topenLinkFromInsideRiver: this.getAttribute(\"openLinkFromInsideRiver\",\"top\"),\n\t\t\topenLinkFromOutsideRiver: this.getAttribute(\"openLinkFromOutsideRiver\",\"top\")\n\t\t});\n\t}\n};\n\n/*\nAdd a new record to the top of the history stack\ntitle: a title string or an array of title strings\nfromPageRect: page coordinates of the origin of the navigation\n*/\nNavigatorWidget.prototype.addToHistory = function(title,fromPageRect) {\n\tthis.story.addToHistory(title,fromPageRect,this.historyTitle);\n};\n\n/*\nHandle a tm-navigate event\n*/\nNavigatorWidget.prototype.handleNavigateEvent = function(event) {\n\tevent = $tw.hooks.invokeHook(\"th-navigating\",event);\n\tif(event.navigateTo) {\n\t\tthis.addToStory(event.navigateTo,event.navigateFromTitle);\n\t\tif(!event.navigateSuppressNavigation) {\n\t\t\tthis.addToHistory(event.navigateTo,event.navigateFromClientRect);\n\t\t}\n\t}\n\treturn false;\n};\n\n// Close a specified tiddler\nNavigatorWidget.prototype.handleCloseTiddlerEvent = function(event) {\n\tevent = $tw.hooks.invokeHook(\"th-closing-tiddler\",event);\n\tvar title = event.param || event.tiddlerTitle,\n\t\tstoryList = this.getStoryList();\n\t// Look for tiddlers with this title to close\n\tthis.removeTitleFromStory(storyList,title);\n\tthis.saveStoryList(storyList);\n\treturn false;\n};\n\n// Close all tiddlers\nNavigatorWidget.prototype.handleCloseAllTiddlersEvent = function(event) {\n\tthis.saveStoryList([]);\n\treturn false;\n};\n\n// Close other tiddlers\nNavigatorWidget.prototype.handleCloseOtherTiddlersEvent = function(event) {\n\tvar title = event.param || event.tiddlerTitle;\n\tthis.saveStoryList([title]);\n\treturn false;\n};\n\n// Place a tiddler in edit mode\nNavigatorWidget.prototype.handleEditTiddlerEvent = function(event) {\n\tvar editTiddler = $tw.hooks.invokeHook(\"th-editing-tiddler\",event),\n\t    win = event.event &amp;&amp; event.event.view ? event.event.view : window;\n\tif(!editTiddler) {\n\t\treturn false;\n\t}\n\tvar self = this;\n\tfunction isUnmodifiedShadow(title) {\n\t\treturn self.wiki.isShadowTiddler(title) &amp;&amp; !self.wiki.tiddlerExists(title);\n\t}\n\tfunction confirmEditShadow(title) {\n\t\treturn win.confirm($tw.language.getString(\n\t\t\t\"ConfirmEditShadowTiddler\",\n\t\t\t{variables:\n\t\t\t\t{title: title}\n\t\t\t}\n\t\t));\n\t}\n\tvar title = event.param || event.tiddlerTitle;\n\tif(isUnmodifiedShadow(title) &amp;&amp; !confirmEditShadow(title)) {\n\t\treturn false;\n\t}\n\t// Replace the specified tiddler with a draft in edit mode\n\tvar draftTiddler = this.makeDraftTiddler(title);\n\t// Update the story and history if required\n\tif(!event.paramObject || event.paramObject.suppressNavigation !== \"yes\") {\n\t\tvar draftTitle = draftTiddler.fields.title,\n\t\t\tstoryList = this.getStoryList();\n\t\tthis.removeTitleFromStory(storyList,draftTitle);\n\t\tthis.replaceFirstTitleInStory(storyList,title,draftTitle);\n\t\tthis.addToHistory(draftTitle,event.navigateFromClientRect);\n\t\tthis.saveStoryList(storyList);\n\t\treturn false;\n\t}\n};\n\n// Delete a tiddler\nNavigatorWidget.prototype.handleDeleteTiddlerEvent = function(event) {\n\t// Get the tiddler we're deleting\n\tvar title = event.param || event.tiddlerTitle,\n\t\ttiddler = this.wiki.getTiddler(title),\n\t\tstoryList = this.getStoryList(),\n\t\toriginalTitle = tiddler ? tiddler.fields[\"draft.of\"] : \"\",\n\t\toriginalTiddler = originalTitle ? this.wiki.getTiddler(originalTitle) : undefined,\n\t\tconfirmationTitle,\n\t    \twin = event.event &amp;&amp; event.event.view ? event.event.view : window;\n\tif(!tiddler) {\n\t\treturn false;\n\t}\n\t// Check if the tiddler we're deleting is in draft mode\n\tif(originalTitle) {\n\t\t// If so, we'll prompt for confirmation referencing the original tiddler\n\t\tconfirmationTitle = originalTitle;\n\t} else {\n\t\t// If not a draft, then prompt for confirmation referencing the specified tiddler\n\t\tconfirmationTitle = title;\n\t}\n\t// Seek confirmation\n\tif((this.wiki.getTiddler(originalTitle) || (tiddler.fields.text || \"\") !== \"\") &amp;&amp; !win.confirm($tw.language.getString(\n\t\t\t\t\"ConfirmDeleteTiddler\",\n\t\t\t\t{variables:\n\t\t\t\t\t{title: confirmationTitle}\n\t\t\t\t}\n\t\t\t))) {\n\t\treturn false;\n\t}\n\t// Delete the original tiddler\n\tif(originalTitle) {\n\t\tif(originalTiddler) {\n\t\t\t$tw.hooks.invokeHook(\"th-deleting-tiddler\",originalTiddler);\n\t\t}\n\t\tthis.wiki.deleteTiddler(originalTitle);\n\t\tthis.removeTitleFromStory(storyList,originalTitle);\n\t}\n\t// Invoke the hook function and delete this tiddler\n\t$tw.hooks.invokeHook(\"th-deleting-tiddler\",tiddler);\n\tthis.wiki.deleteTiddler(title);\n\t// Remove the closed tiddler from the story\n\tthis.removeTitleFromStory(storyList,title);\n\tthis.saveStoryList(storyList);\n\t// Trigger an autosave\n\t$tw.rootWidget.dispatchEvent({type: \"tm-auto-save-wiki\"});\n\treturn false;\n};\n\n/*\nCreate/reuse the draft tiddler for a given title\n*/\nNavigatorWidget.prototype.makeDraftTiddler = function(targetTitle) {\n\t// See if there is already a draft tiddler for this tiddler\n\tvar draftTitle = this.wiki.findDraft(targetTitle);\n\tif(draftTitle) {\n\t\treturn this.wiki.getTiddler(draftTitle);\n\t}\n\t// Get the current value of the tiddler we're editing\n\tvar tiddler = this.wiki.getTiddler(targetTitle);\n\t// Save the initial value of the draft tiddler\n\tdraftTitle = this.generateDraftTitle(targetTitle);\n\tvar draftTiddler = new $tw.Tiddler({\n\t\t\t\ttext: \"\",\n\t\t\t},\n\t\t\ttiddler,\n\t\t\t{\n\t\t\t\ttitle: draftTitle,\n\t\t\t\t\"draft.title\": targetTitle,\n\t\t\t\t\"draft.of\": targetTitle\n\t\t\t},\n\t\t\tthis.wiki.getModificationFields()\n\t\t);\n\tthis.wiki.addTiddler(draftTiddler);\n\treturn draftTiddler;\n};\n\n/*\nGenerate a title for the draft of a given tiddler\n*/\nNavigatorWidget.prototype.generateDraftTitle = function(title) {\n\treturn this.wiki.generateDraftTitle(title);\n};\n\n// Take a tiddler out of edit mode, saving the changes\nNavigatorWidget.prototype.handleSaveTiddlerEvent = function(event) {\n\tvar title = event.param || event.tiddlerTitle,\n\t\ttiddler = this.wiki.getTiddler(title),\n\t\tstoryList = this.getStoryList(),\n\t    \twin = event.event &amp;&amp; event.event.view ? event.event.view : window;\n\t// Replace the original tiddler with the draft\n\tif(tiddler) {\n\t\tvar draftTitle = (tiddler.fields[\"draft.title\"] || \"\").trim(),\n\t\t\tdraftOf = (tiddler.fields[\"draft.of\"] || \"\").trim();\n\t\tif(draftTitle) {\n\t\t\tvar isRename = draftOf !== draftTitle,\n\t\t\t\tisConfirmed = true;\n\t\t\tif(isRename &amp;&amp; this.wiki.tiddlerExists(draftTitle)) {\n\t\t\t\tisConfirmed = win.confirm($tw.language.getString(\n\t\t\t\t\t\"ConfirmOverwriteTiddler\",\n\t\t\t\t\t{variables:\n\t\t\t\t\t\t{title: draftTitle}\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t}\n\t\t\tif(isConfirmed) {\n\t\t\t\t// Create the new tiddler and pass it through the th-saving-tiddler hook\n\t\t\t\tvar newTiddler = new $tw.Tiddler(this.wiki.getCreationFields(),tiddler,{\n\t\t\t\t\ttitle: draftTitle,\n\t\t\t\t\t\"draft.title\": undefined,\n\t\t\t\t\t\"draft.of\": undefined\n\t\t\t\t},this.wiki.getModificationFields());\n\t\t\t\tnewTiddler = $tw.hooks.invokeHook(\"th-saving-tiddler\",newTiddler,tiddler);\n\t\t\t\tthis.wiki.addTiddler(newTiddler);\n\t\t\t\t// If enabled, relink references to renamed tiddler\n\t\t\t\tvar shouldRelink = this.getAttribute(\"relinkOnRename\",\"no\").toLowerCase().trim() === \"yes\";\n\t\t\t\tif(isRename &amp;&amp; shouldRelink &amp;&amp; this.wiki.tiddlerExists(draftOf)) {\n\t\t\t\t\tthis.wiki.relinkTiddler(draftOf,draftTitle);\n\t\t\t\t}\n\t\t\t\t// Remove the draft tiddler\n\t\t\t\tthis.wiki.deleteTiddler(title);\n\t\t\t\t// Remove the original tiddler if we're renaming it\n\t\t\t\tif(isRename) {\n\t\t\t\t\tthis.wiki.deleteTiddler(draftOf);\n\t\t\t\t}\n\t\t\t\t// #2381 always remove new title &amp; old\n\t\t\t\tthis.removeTitleFromStory(storyList,draftTitle);\n\t\t\t\tthis.removeTitleFromStory(storyList,draftOf);\n\t\t\t\tif(!event.paramObject || event.paramObject.suppressNavigation !== \"yes\") {\n\t\t\t\t\t// Replace the draft in the story with the original\n\t\t\t\t\tthis.replaceFirstTitleInStory(storyList,title,draftTitle);\n\t\t\t\t\tthis.addToHistory(draftTitle,event.navigateFromClientRect);\n\t\t\t\t\tif(draftTitle !== this.storyTitle) {\n\t\t\t\t\t\tthis.saveStoryList(storyList);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Trigger an autosave\n\t\t\t\t$tw.rootWidget.dispatchEvent({type: \"tm-auto-save-wiki\"});\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\n// Take a tiddler out of edit mode without saving the changes\nNavigatorWidget.prototype.handleCancelTiddlerEvent = function(event) {\n\tevent = $tw.hooks.invokeHook(\"th-cancelling-tiddler\", event);\n\tvar win = event.event &amp;&amp; event.event.view ? event.event.view : window;\n\t// Flip the specified tiddler from draft back to the original\n\tvar draftTitle = event.param || event.tiddlerTitle,\n\t\tdraftTiddler = this.wiki.getTiddler(draftTitle),\n\t\toriginalTitle = draftTiddler &amp;&amp; draftTiddler.fields[\"draft.of\"];\n\tif(draftTiddler &amp;&amp; originalTitle) {\n\t\t// Ask for confirmation if the tiddler text has changed\n\t\tvar isConfirmed = true,\n\t\t\toriginalTiddler = this.wiki.getTiddler(originalTitle),\n\t\t\tstoryList = this.getStoryList();\n\t\tif(this.wiki.isDraftModified(draftTitle)) {\n\t\t\tisConfirmed = win.confirm($tw.language.getString(\n\t\t\t\t\"ConfirmCancelTiddler\",\n\t\t\t\t{variables:\n\t\t\t\t\t{title: draftTitle}\n\t\t\t\t}\n\t\t\t));\n\t\t}\n\t\t// Remove the draft tiddler\n\t\tif(isConfirmed) {\n\t\t\tthis.wiki.deleteTiddler(draftTitle);\n\t\t\tif(!event.paramObject || event.paramObject.suppressNavigation !== \"yes\") {\n\t\t\t\tif(originalTiddler) {\n\t\t\t\t\tthis.replaceFirstTitleInStory(storyList,draftTitle,originalTitle);\n\t\t\t\t\tthis.addToHistory(originalTitle,event.navigateFromClientRect);\n\t\t\t\t} else {\n\t\t\t\t\tthis.removeTitleFromStory(storyList,draftTitle);\n\t\t\t\t}\n\t\t\t\tthis.saveStoryList(storyList);\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\n// Create a new draft tiddler\n// event.param can either be the title of a template tiddler, or a hashmap of fields.\n//\n// The title of the newly created tiddler follows these rules:\n// * If a hashmap was used and a title field was specified, use that title\n// * If a hashmap was used without a title field, use a default title, if necessary making it unique with a numeric suffix\n// * If a template tiddler was used, use the title of the template, if necessary making it unique with a numeric suffix\n//\n// If a draft of the target tiddler already exists then it is reused\nNavigatorWidget.prototype.handleNewTiddlerEvent = function(event) {\n\tevent = $tw.hooks.invokeHook(\"th-new-tiddler\", event);\n\t// Get the story details\n\tvar storyList = this.getStoryList(),\n\t\ttemplateTiddler, additionalFields, title, draftTitle, existingTiddler;\n\t// Get the template tiddler (if any)\n\tif(typeof event.param === \"string\") {\n\t\t// Get the template tiddler\n\t\ttemplateTiddler = this.wiki.getTiddler(event.param);\n\t\t// Generate a new title\n\t\ttitle = this.wiki.generateNewTitle(event.param || $tw.language.getString(\"DefaultNewTiddlerTitle\"));\n\t}\n\t// Get the specified additional fields\n\tif(typeof event.paramObject === \"object\") {\n\t\tadditionalFields = event.paramObject;\n\t}\n\tif(typeof event.param === \"object\") { // Backwards compatibility with 5.1.3\n\t\tadditionalFields = event.param;\n\t}\n\tif(additionalFields &amp;&amp; additionalFields.title) {\n\t\ttitle = additionalFields.title;\n\t}\n\t// Make a copy of the additional fields excluding any blank ones\n\tvar filteredAdditionalFields = $tw.utils.extend({},additionalFields);\n\tObject.keys(filteredAdditionalFields).forEach(function(fieldName) {\n\t\tif(filteredAdditionalFields[fieldName] === \"\") {\n\t\t\tdelete filteredAdditionalFields[fieldName];\n\t\t}\n\t});\n\t// Generate a title if we don't have one\n\ttitle = title || this.wiki.generateNewTitle($tw.language.getString(\"DefaultNewTiddlerTitle\"));\n\t// Find any existing draft for this tiddler\n\tdraftTitle = this.wiki.findDraft(title);\n\t// Pull in any existing tiddler\n\tif(draftTitle) {\n\t\texistingTiddler = this.wiki.getTiddler(draftTitle);\n\t} else {\n\t\tdraftTitle = this.generateDraftTitle(title);\n\t\texistingTiddler = this.wiki.getTiddler(title);\n\t}\n\t// Merge the tags\n\tvar mergedTags = [];\n\tif(existingTiddler &amp;&amp; existingTiddler.fields.tags) {\n\t\t$tw.utils.pushTop(mergedTags,existingTiddler.fields.tags);\n\t}\n\tif(additionalFields &amp;&amp; additionalFields.tags) {\n\t\t// Merge tags\n\t\tmergedTags = $tw.utils.pushTop(mergedTags,$tw.utils.parseStringArray(additionalFields.tags));\n\t}\n\tif(templateTiddler &amp;&amp; templateTiddler.fields.tags) {\n\t\t// Merge tags\n\t\tmergedTags = $tw.utils.pushTop(mergedTags,templateTiddler.fields.tags);\n\t}\n\t// Save the draft tiddler\n\tvar draftTiddler = new $tw.Tiddler({\n\t\t\ttext: \"\",\n\t\t\t\"draft.title\": title\n\t\t},\n\t\ttemplateTiddler,\n\t\tadditionalFields,\n\t\tthis.wiki.getCreationFields(),\n\t\texistingTiddler,\n\t\tfilteredAdditionalFields,\n\t\t{\n\t\t\ttitle: draftTitle,\n\t\t\t\"draft.of\": title,\n\t\t\ttags: mergedTags\n\t\t},this.wiki.getModificationFields());\n\tthis.wiki.addTiddler(draftTiddler);\n\t// Update the story to insert the new draft at the top and remove any existing tiddler\n\tif(storyList &amp;&amp; storyList.indexOf(draftTitle) === -1) {\n\t\tvar slot = storyList.indexOf(event.navigateFromTitle);\n\t\tif(slot === -1) {\n\t\t\tslot = this.getAttribute(\"openLinkFromOutsideRiver\",\"top\") === \"bottom\" ? storyList.length - 1 : slot;\n\t\t}\n\t\tstoryList.splice(slot + 1,0,draftTitle);\n\t}\n\tif(storyList &amp;&amp; storyList.indexOf(title) !== -1) {\n\t\tstoryList.splice(storyList.indexOf(title),1);\n\t}\n\tthis.saveStoryList(storyList);\n\t// Add a new record to the top of the history stack\n\tthis.addToHistory(draftTitle);\n\treturn false;\n};\n\n// Import JSON tiddlers into a pending import tiddler\nNavigatorWidget.prototype.handleImportTiddlersEvent = function(event) {\n\t// Get the tiddlers\n\tvar tiddlers = [];\n\ttry {\n\t\ttiddlers = JSON.parse(event.param);\n\t} catch(e) {\n\t}\n\t// Get the current $:/Import tiddler\n\tvar importTitle = event.importTitle ? event.importTitle : IMPORT_TITLE,\n\t\timportTiddler = this.wiki.getTiddler(importTitle),\n\t\timportData = this.wiki.getTiddlerData(importTitle,{}),\n\t\tnewFields = new Object({\n\t\t\ttitle: importTitle,\n\t\t\ttype: \"application/json\",\n\t\t\t\"plugin-type\": \"import\",\n\t\t\t\"status\": \"pending\"\n\t\t}),\n\t\tincomingTiddlers = [];\n\t// Process each tiddler\n\timportData.tiddlers = importData.tiddlers || {};\n\t$tw.utils.each(tiddlers,function(tiddlerFields) {\n\t\ttiddlerFields.title = $tw.utils.trim(tiddlerFields.title);\n\t\tvar title = tiddlerFields.title;\n\t\tif(title) {\n\t\t\tincomingTiddlers.push(title);\n\t\t\timportData.tiddlers[title] = tiddlerFields;\n\t\t}\n\t});\n\t// Give the active upgrader modules a chance to process the incoming tiddlers\n\tvar messages = this.wiki.invokeUpgraders(incomingTiddlers,importData.tiddlers);\n\t// Deselect any disabled, but _not_ suppressed tiddlers\n\tvar systemMessage = $tw.language.getString(\"Import/Upgrader/Tiddler/Unselected\");\n\t$tw.utils.each(messages,function(message,title) {\n\t\tnewFields[\"message-\" + title] = message;\n\t\tif (message.indexOf(systemMessage) !== -1) {\n\t\t\tnewFields[\"selection-\" + title] = \"unchecked\";\n\t\t}\n\t});\n\t// Deselect suppressed tiddlers ... they have been removed and can't be selected anymore\n\t$tw.utils.each(importData.tiddlers,function(tiddler,title) {\n\t\tif($tw.utils.count(tiddler) === 0) {\n\t\t\tnewFields[\"selection-\" + title] = \"unchecked\";\n\t\t\tnewFields[\"suppressed-\" + title] = \"yes\";\n\t\t}\n\t});\n\t// Save the $:/Import tiddler\n\tnewFields.text = JSON.stringify(importData,null,$tw.config.preferences.jsonSpaces);\n\tthis.wiki.addTiddler(new $tw.Tiddler(importTiddler,newFields));\n\t// Update the story and history details\n\tvar autoOpenOnImport = event.autoOpenOnImport ? event.autoOpenOnImport : this.getVariable(\"tv-auto-open-on-import\");  \n\tif(autoOpenOnImport !== \"no\") {\n\t\tvar storyList = this.getStoryList(),\n\t\t\thistory = [];\n\t\t// Add it to the story\n\t\tif(storyList &amp;&amp; storyList.indexOf(importTitle) === -1) {\n\t\t\tstoryList.unshift(importTitle);\n\t\t}\n\t\t// And to history\n\t\thistory.push(importTitle);\n\t\t// Save the updated story and history\n\t\tthis.saveStoryList(storyList);\n\t\tthis.addToHistory(history);\n\t}\n\treturn false;\n};\n\n//\nNavigatorWidget.prototype.handlePerformImportEvent = function(event) {\n\tvar self = this,\n\t\timportTiddler = this.wiki.getTiddler(event.param),\n\t\timportData,\n\t\timportReport = [];\n\timportReport.push($tw.language.getString(\"Import/Imported/Hint\") + \"\\n\");\n\t// If you need to modify the import tiddler payload then consider th-importing-tiddler instead\n\timportTiddler = $tw.hooks.invokeHook(\"th-before-importing\",importTiddler);\n\timportData = this.wiki.getTiddlerDataCached(event.param,{tiddlers: {}}),\n\t$tw.utils.each(importData.tiddlers,function(tiddlerFields) {\n\t\tvar title = tiddlerFields.title;\n\t\tif(title &amp;&amp; importTiddler &amp;&amp; importTiddler.fields[\"selection-\" + title] !== \"unchecked\") {\n\t\t\tif($tw.utils.hop(importTiddler.fields,[\"rename-\" + title])) {\n\t\t\t\tvar tiddler = new $tw.Tiddler(tiddlerFields,{title : importTiddler.fields[\"rename-\" + title]});\n\t\t\t} else {\n\t\t\t\tvar tiddler = new $tw.Tiddler(tiddlerFields);\n\t\t\t}\n\t\t\t// th-importing-tiddler doesn't allow user interaction by default\n\t\t\t// If you want to use the default UI then use: $:/core/modules/upgraders/ instead\n\t\t\ttiddler = $tw.hooks.invokeHook(\"th-importing-tiddler\",tiddler);\n\t\t\t// Add the tiddlers to the store\n\t\t\tself.wiki.addTiddler(tiddler);\n\t\t\timportReport.push(\"# [[\" + tiddler.fields.title + \"]]\");\n\t\t}\n\t});\n\t// Replace the $:/Import tiddler with an import report\n\tthis.wiki.addTiddler(new $tw.Tiddler({\n\t\ttitle: event.param,\n\t\ttext: importReport.join(\"\\n\"),\n\t\t\"status\": \"complete\"\n\t}));\n\t// Navigate to the $:/Import tiddler\n\tthis.addToHistory([event.param]);\n\t// Trigger an autosave\n\t$tw.rootWidget.dispatchEvent({type: \"tm-auto-save-wiki\"});\n};\n\nNavigatorWidget.prototype.handleFoldTiddlerEvent = function(event) {\n\tvar paramObject = event.paramObject || {};\n\tif(paramObject.foldedState) {\n\t\tvar foldedState = this.wiki.getTiddlerText(paramObject.foldedState,\"show\") === \"show\" ? \"hide\" : \"show\";\n\t\tthis.wiki.setText(paramObject.foldedState,\"text\",null,foldedState);\n\t}\n};\n\nNavigatorWidget.prototype.handleFoldOtherTiddlersEvent = function(event) {\n\tvar self = this,\n\t\tparamObject = event.paramObject || {},\n\t\tprefix = paramObject.foldedStatePrefix;\n\t$tw.utils.each(this.getStoryList(),function(title) {\n\t\tself.wiki.setText(prefix + title,\"text\",null,event.param === title ? \"show\" : \"hide\");\n\t});\n};\n\nNavigatorWidget.prototype.handleFoldAllTiddlersEvent = function(event) {\n\tvar self = this,\n\t\tparamObject = event.paramObject || {},\n\t\tprefix = paramObject.foldedStatePrefix || \"$:/state/folded/\";\n\t$tw.utils.each(this.getStoryList(),function(title) {\n\t\tself.wiki.setText(prefix + title,\"text\",null,\"hide\");\n\t});\n};\n\nNavigatorWidget.prototype.handleUnfoldAllTiddlersEvent = function(event) {\n\tvar self = this,\n\t\tparamObject = event.paramObject || {},\n\t\tprefix = paramObject.foldedStatePrefix;\n\t$tw.utils.each(this.getStoryList(),function(title) {\n\t\tself.wiki.setText(prefix + title,\"text\",null,\"show\");\n\t});\n};\n\nNavigatorWidget.prototype.handleRenameTiddlerEvent = function(event) {\n\tvar options = {},\n\t\tparamObject = event.paramObject || {},\n\t\tfrom = paramObject.from || event.tiddlerTitle,\n\t\tto = paramObject.to;\n\toptions.dontRenameInTags = (paramObject.renameInTags === \"false\" || paramObject.renameInTags === \"no\") ? true : false;\n\toptions.dontRenameInLists = (paramObject.renameInLists === \"false\" || paramObject.renameInLists === \"no\") ? true : false;\n\tthis.wiki.renameTiddler(from,to,options);\n};\n\nexports.navigator = NavigatorWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/password.js":{"title":"$:/core/modules/widgets/password.js","text":"/*\\\ntitle: $:/core/modules/widgets/password.js\ntype: application/javascript\nmodule-type: widget\n\nPassword widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar PasswordWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nPasswordWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nPasswordWidget.prototype.render = function(parent,nextSibling) {\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Get the current password\n\tvar password = $tw.browser ? $tw.utils.getPassword(this.passwordName) || \"\" : \"\";\n\t// Create our element\n\tvar domNode = this.document.createElement(\"input\");\n\tdomNode.setAttribute(\"type\",\"password\");\n\tdomNode.setAttribute(\"value\",password);\n\t// Add a click event handler\n\t$tw.utils.addEventListeners(domNode,[\n\t\t{name: \"change\", handlerObject: this, handlerMethod: \"handleChangeEvent\"}\n\t]);\n\t// Insert the label into the DOM and render any children\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tthis.domNodes.push(domNode);\n};\n\nPasswordWidget.prototype.handleChangeEvent = function(event) {\n\tvar password = this.domNodes[0].value;\n\treturn $tw.utils.savePassword(this.passwordName,password);\n};\n\n/*\nCompute the internal state of the widget\n*/\nPasswordWidget.prototype.execute = function() {\n\t// Get the parameters from the attributes\n\tthis.passwordName = this.getAttribute(\"name\",\"\");\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nPasswordWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.name) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.password = PasswordWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/qualify.js":{"title":"$:/core/modules/widgets/qualify.js","text":"/*\\\ntitle: $:/core/modules/widgets/qualify.js\ntype: application/javascript\nmodule-type: widget\n\nQualify text to a variable \n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar QualifyWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nQualifyWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nQualifyWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nQualifyWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.qualifyName = this.getAttribute(\"name\");\n\tthis.qualifyTitle = this.getAttribute(\"title\");\n\t// Set context variable\n\tif(this.qualifyName) {\n\t\tthis.setVariable(this.qualifyName,this.qualifyTitle + \"-\" + this.getStateQualifier());\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nQualifyWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.name || changedAttributes.title) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.qualify = QualifyWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/radio.js":{"title":"$:/core/modules/widgets/radio.js","text":"/*\\\ntitle: $:/core/modules/widgets/radio.js\ntype: application/javascript\nmodule-type: widget\n\nSet a field or index at a given tiddler via radio buttons\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\nvar RadioWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nRadioWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nRadioWidget.prototype.render = function(parent,nextSibling) {\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\tvar isChecked = this.getValue() === this.radioValue;\n\t// Create our elements\n\tthis.labelDomNode = this.document.createElement(\"label\");\n\tthis.labelDomNode.setAttribute(\"class\",\n\t\t\"tc-radio \" + this.radioClass + (isChecked ? \" tc-radio-selected\" : \"\")\n\t);\n\tthis.inputDomNode = this.document.createElement(\"input\");\n\tthis.inputDomNode.setAttribute(\"type\",\"radio\");\n\tif(isChecked) {\n\t\tthis.inputDomNode.checked = true;\n\t}\n\tif(this.isDisabled === \"yes\") {\n\t\tthis.inputDomNode.setAttribute(\"disabled\",true);\n\t}\n\tthis.labelDomNode.appendChild(this.inputDomNode);\n\tthis.spanDomNode = this.document.createElement(\"span\");\n\tthis.labelDomNode.appendChild(this.spanDomNode);\n\t// Add a click event handler\n\t$tw.utils.addEventListeners(this.inputDomNode,[\n\t\t{name: \"change\", handlerObject: this, handlerMethod: \"handleChangeEvent\"}\n\t]);\n\t// Insert the label into the DOM and render any children\n\tparent.insertBefore(this.labelDomNode,nextSibling);\n\tthis.renderChildren(this.spanDomNode,null);\n\tthis.domNodes.push(this.labelDomNode);\n};\n\nRadioWidget.prototype.getValue = function() {\n\tvar value,\n\t\ttiddler = this.wiki.getTiddler(this.radioTitle);\n\tif(tiddler) {\n\t\tif(this.radioIndex) {\n\t\t\tvalue = this.wiki.extractTiddlerDataItem(this.radioTitle,this.radioIndex);\n\t\t} else {\n\t\t\tvalue = tiddler.getFieldString(this.radioField);\n\t\t}\n\t} else {\n\t\tvalue = this.radioDefault;\n\t}\n\treturn value;\n};\n\nRadioWidget.prototype.setValue = function() {\n\tif(this.radioIndex) {\n\t\tthis.wiki.setText(this.radioTitle,\"\",this.radioIndex,this.radioValue);\n\t} else {\n\t\tvar tiddler = this.wiki.getTiddler(this.radioTitle),\n\t\t\taddition = {};\n\t\taddition[this.radioField] = this.radioValue;\n\t\tthis.wiki.addTiddler(new $tw.Tiddler(this.wiki.getCreationFields(),{title: this.radioTitle},tiddler,addition,this.wiki.getModificationFields()));\n\t}\n};\n\nRadioWidget.prototype.handleChangeEvent = function(event) {\n\tif(this.inputDomNode.checked) {\n\t\tthis.setValue();\n\t}\n\t// Trigger actions\n\tif(this.radioActions) {\n\t\tthis.invokeActionString(this.radioActions,this,event,{\"actionValue\": this.radioValue});\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nRadioWidget.prototype.execute = function() {\n\t// Get the parameters from the attributes\n\tthis.radioTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.radioField = this.getAttribute(\"field\",\"text\");\n\tthis.radioIndex = this.getAttribute(\"index\");\n\tthis.radioValue = this.getAttribute(\"value\");\n\tthis.radioClass = this.getAttribute(\"class\",\"\");\n\tthis.radioDefault = this.getAttribute(\"default\");\n\tthis.isDisabled = this.getAttribute(\"disabled\",\"no\");\n\tthis.radioActions = this.getAttribute(\"actions\",\"\");\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nRadioWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(($tw.utils.count(changedAttributes) &gt; 0)) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedTiddlers[this.radioTitle]) {\n\t\tthis.inputDomNode.checked = this.getValue() === this.radioValue;\n\t\treturn this.refreshChildren(changedTiddlers);\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.radio = RadioWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/range.js":{"title":"$:/core/modules/widgets/range.js","text":"/*\\\ntitle: $:/core/modules/widgets/range.js\ntype: application/javascript\nmodule-type: widget\n\nRange widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar RangeWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nRangeWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nRangeWidget.prototype.render = function(parent,nextSibling) {\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Create our elements\n\tthis.inputDomNode = this.document.createElement(\"input\");\n\tthis.inputDomNode.setAttribute(\"type\",\"range\");\n\tthis.inputDomNode.setAttribute(\"class\",this.elementClass);\n\tif(this.minValue){\n\t\tthis.inputDomNode.setAttribute(\"min\", this.minValue);\n\t}\n\tif(this.maxValue){\n\t\tthis.inputDomNode.setAttribute(\"max\", this.maxValue);\n\t}\n\tif(this.increment){\n\t\tthis.inputDomNode.setAttribute(\"step\", this.increment);\n\t}\n\tif(this.isDisabled === \"yes\") {\n\t\tthis.inputDomNode.setAttribute(\"disabled\",true);\n\t}\n\tthis.inputDomNode.value = this.getValue();\n\t// Add a click event handler\n\t$tw.utils.addEventListeners(this.inputDomNode,[\n\t\t{name:\"mousedown\", handlerObject:this, handlerMethod:\"handleMouseDownEvent\"},\n\t\t{name:\"mouseup\",   handlerObject:this, handlerMethod:\"handleMouseUpEvent\"},\n\t\t{name:\"change\",    handlerObject:this, handlerMethod:\"handleChangeEvent\"},\n\t\t{name:\"input\",     handlerObject:this, handlerMethod:\"handleInputEvent\"},\n\t]);\n\t// Insert the label into the DOM and render any children\n\tparent.insertBefore(this.inputDomNode,nextSibling);\n\tthis.domNodes.push(this.inputDomNode);\n};\n\nRangeWidget.prototype.getValue = function() {\n\tvar tiddler = this.wiki.getTiddler(this.tiddlerTitle),\n\t\tfieldName = this.tiddlerField,\n\t\tvalue = this.defaultValue;\n\tif(tiddler) {\n\t\tif(this.tiddlerIndex) {\n\t\t\tvalue = this.wiki.extractTiddlerDataItem(tiddler,this.tiddlerIndex,this.defaultValue);\n\t\t} else {\n\t\t\tif($tw.utils.hop(tiddler.fields,fieldName)) {\n\t\t\t\tvalue = tiddler.fields[fieldName] || \"\";\n\t\t\t} else {\n\t\t\t\tvalue = this.defaultValue;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n\nRangeWidget.prototype.getActionVariables = function(options) {\n\toptions = options || {};\n\tvar hasChanged = (this.startValue !== this.inputDomNode.value) ? \"yes\" : \"no\";\n\t// Trigger actions. Use variables = {key:value, key:value ...}\n\t// the \"value\" is needed.\n\treturn $tw.utils.extend({\"actionValue\": this.inputDomNode.value, \"actionValueHasChanged\": hasChanged}, options);\n}\n\n// actionsStart\nRangeWidget.prototype.handleMouseDownEvent = function(event) {\n\tthis.mouseDown = true; // TODO remove once IE is gone.\n\tthis.startValue = this.inputDomNode.value; // TODO remove this line once IE is gone!\n\tthis.handleEvent(event);\n\t// Trigger actions\n\tif(this.actionsMouseDown) {\n\t\tvar variables = this.getActionVariables() // TODO this line will go into the function call below.\n\t\tthis.invokeActionString(this.actionsMouseDown,this,event,variables);\n\t}\n}\n\n// actionsStop\nRangeWidget.prototype.handleMouseUpEvent = function(event) {\n\tthis.mouseDown = false; // TODO remove once IE is gone.\n\tthis.handleEvent(event);\n\t// Trigger actions\n\tif(this.actionsMouseUp) {\n\t\tvar variables = this.getActionVariables()\n\t\tthis.invokeActionString(this.actionsMouseUp,this,event,variables);\n\t}\n\t// TODO remove the following if() once IE is gone!\n\tif ($tw.browser.isIE) {\n\t\tif (this.startValue !== this.inputDomNode.value) {\n\t\t\tthis.handleChangeEvent(event);\n\t\t\tthis.startValue = this.inputDomNode.value;\n\t\t}\n\t}\n}\n\nRangeWidget.prototype.handleChangeEvent = function(event) {\n\tif (this.mouseDown) {  // TODO refactor this function once IE is gone.\n\t\tthis.handleInputEvent(event);\n\t}\n};\n\nRangeWidget.prototype.handleInputEvent = function(event) {\n\tthis.handleEvent(event);\n\t// Trigger actions\n\tif(this.actionsInput) {\n\t\t// \"tiddler\" parameter may be missing. See .execute() below\n\t\tvar variables = this.getActionVariables({\"actionValueHasChanged\": \"yes\"}) // TODO this line will go into the function call below.\n\t\tthis.invokeActionString(this.actionsInput,this,event,variables);\n\t}\n};\n\nRangeWidget.prototype.handleEvent = function(event) {\n\tif(this.getValue() !== this.inputDomNode.value) {\n\t\tif(this.tiddlerIndex) {\n\t\t\tthis.wiki.setText(this.tiddlerTitle,\"\",this.tiddlerIndex,this.inputDomNode.value);\n\t\t} else {\n\t\t\tthis.wiki.setText(this.tiddlerTitle,this.tiddlerField,null,this.inputDomNode.value);\n\t\t}\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nRangeWidget.prototype.execute = function() {\n\t// TODO remove the next 1 lines once IE is gone!\n\tthis.mouseUp = true; // Needed for IE10\n\t// Get the parameters from the attributes\n\tthis.tiddlerTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.tiddlerField = this.getAttribute(\"field\",\"text\");\n\tthis.tiddlerIndex = this.getAttribute(\"index\");\n\tthis.minValue = this.getAttribute(\"min\");\n\tthis.maxValue = this.getAttribute(\"max\");\n\tthis.increment = this.getAttribute(\"increment\");\n\tthis.defaultValue = this.getAttribute(\"default\",\"\");\n\tthis.elementClass = this.getAttribute(\"class\",\"\");\n\tthis.isDisabled = this.getAttribute(\"disabled\",\"no\");\n\t// Actions since 5.1.23\n\t// Next 2 only fire once!\n\tthis.actionsMouseDown = this.getAttribute(\"actionsStart\",\"\");\n\tthis.actionsMouseUp = this.getAttribute(\"actionsStop\",\"\");\n\t// Input fires very often!\n\tthis.actionsInput = this.getAttribute(\"actions\",\"\");\n\t// Make the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nRangeWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes) &gt; 0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\tvar refreshed = false;\n\t\tif(changedTiddlers[this.tiddlerTitle]) {\n\t\t\tvar value = this.getValue();\n\t\t\tif(this.inputDomNode.value !== value) {\n\t\t\t\tthis.inputDomNode.value = value;\n\t\t\t}\n\t\t\trefreshed = true;\n\t\t}\n\t\treturn this.refreshChildren(changedTiddlers) || refreshed;\n\t}\n};\n\nexports.range = RangeWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/raw.js":{"title":"$:/core/modules/widgets/raw.js","text":"/*\\\ntitle: $:/core/modules/widgets/raw.js\ntype: application/javascript\nmodule-type: widget\n\nRaw widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar RawWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nRawWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nRawWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.execute();\n\tvar div = this.document.createElement(\"div\");\n\tdiv.innerHTML=this.parseTreeNode.html;\n\tparent.insertBefore(div,nextSibling);\n\tthis.domNodes.push(div);\n};\n\n/*\nCompute the internal state of the widget\n*/\nRawWidget.prototype.execute = function() {\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nRawWidget.prototype.refresh = function(changedTiddlers) {\n\treturn false;\n};\n\nexports.raw = RawWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/reveal.js":{"title":"$:/core/modules/widgets/reveal.js","text":"/*\\\ntitle: $:/core/modules/widgets/reveal.js\ntype: application/javascript\nmodule-type: widget\n\nReveal widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar RevealWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nRevealWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nRevealWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar tag = this.parseTreeNode.isBlock ? \"div\" : \"span\";\n\tif(this.revealTag &amp;&amp; $tw.config.htmlUnsafeElements.indexOf(this.revealTag) === -1) {\n\t\ttag = this.revealTag;\n\t}\n\tvar domNode = this.document.createElement(tag);\n\tthis.domNode = domNode;\n\tthis.assignDomNodeClasses();\n\tif(this.style) {\n\t\tdomNode.setAttribute(\"style\",this.style);\n\t}\n\tparent.insertBefore(domNode,nextSibling);\n\tthis.renderChildren(domNode,null);\n\tif(!domNode.isTiddlyWikiFakeDom &amp;&amp; this.type === \"popup\" &amp;&amp; this.isOpen) {\n\t\tthis.positionPopup(domNode);\n\t\t$tw.utils.addClass(domNode,\"tc-popup\"); // Make sure that clicks don't dismiss popups within the revealed content\n\t}\n\tif(!this.isOpen) {\n\t\tdomNode.setAttribute(\"hidden\",\"true\");\n\t}\n\tthis.domNodes.push(domNode);\n};\n\nRevealWidget.prototype.positionPopup = function(domNode) {\n\tdomNode.style.position = \"absolute\";\n\tdomNode.style.zIndex = \"1000\";\n\tvar left,top;\n\tswitch(this.position) {\n\t\tcase \"left\":\n\t\t\tleft = this.popup.left - domNode.offsetWidth;\n\t\t\ttop = this.popup.top;\n\t\t\tbreak;\n\t\tcase \"above\":\n\t\t\tleft = this.popup.left;\n\t\t\ttop = this.popup.top - domNode.offsetHeight;\n\t\t\tbreak;\n\t\tcase \"aboveright\":\n\t\t\tleft = this.popup.left + this.popup.width;\n\t\t\ttop = this.popup.top + this.popup.height - domNode.offsetHeight;\n\t\t\tbreak;\n\t\tcase \"belowright\":\n\t\t\tleft = this.popup.left + this.popup.width;\n\t\t\ttop = this.popup.top + this.popup.height;\n\t\t\tbreak;\n\t\tcase \"right\":\n\t\t\tleft = this.popup.left + this.popup.width;\n\t\t\ttop = this.popup.top;\n\t\t\tbreak;\n\t\tcase \"belowleft\":\n\t\t\tleft = this.popup.left + this.popup.width - domNode.offsetWidth;\n\t\t\ttop = this.popup.top + this.popup.height;\n\t\t\tbreak;\n\t\tcase \"aboveleft\":\n\t\t\tleft = this.popup.left - domNode.offsetWidth;\n\t\t\ttop = this.popup.top - domNode.offsetHeight;\n\t\t\tbreak;\n\t\tdefault: // Below\n\t\t\tleft = this.popup.left;\n\t\t\ttop = this.popup.top + this.popup.height;\n\t\t\tbreak;\n\t}\n\tif(!this.positionAllowNegative) {\n\t\tleft = Math.max(0,left);\n\t\ttop = Math.max(0,top);\n\t}\n\tdomNode.style.left = left + \"px\";\n\tdomNode.style.top = top + \"px\";\n};\n\n/*\nCompute the internal state of the widget\n*/\nRevealWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.state = this.getAttribute(\"state\");\n\tthis.revealTag = this.getAttribute(\"tag\");\n\tthis.type = this.getAttribute(\"type\");\n\tthis.text = this.getAttribute(\"text\");\n\tthis.position = this.getAttribute(\"position\");\n\tthis.positionAllowNegative = this.getAttribute(\"positionAllowNegative\") === \"yes\";\n\t// class attribute handled in assignDomNodeClasses()\n\tthis.style = this.getAttribute(\"style\",\"\");\n\tthis[\"default\"] = this.getAttribute(\"default\",\"\");\n\tthis.animate = this.getAttribute(\"animate\",\"no\");\n\tthis.retain = this.getAttribute(\"retain\",\"no\");\n\tthis.openAnimation = this.animate === \"no\" ? undefined : \"open\";\n\tthis.closeAnimation = this.animate === \"no\" ? undefined : \"close\";\n\tthis.updatePopupPosition = this.getAttribute(\"updatePopupPosition\",\"no\") === \"yes\";\n\t// Compute the title of the state tiddler and read it\n\tthis.stateTiddlerTitle = this.state;\n\tthis.stateTitle = this.getAttribute(\"stateTitle\");\n\tthis.stateField = this.getAttribute(\"stateField\");\n\tthis.stateIndex = this.getAttribute(\"stateIndex\");\n\tthis.readState();\n\t// Construct the child widgets\n\tvar childNodes = this.isOpen ? this.parseTreeNode.children : [];\n\tthis.hasChildNodes = this.isOpen;\n\tthis.makeChildWidgets(childNodes);\n};\n\n/*\nRead the state tiddler\n*/\nRevealWidget.prototype.readState = function() {\n\t// Read the information from the state tiddler\n\tvar state,\n\t    defaultState = this[\"default\"];\n\tif(this.stateTitle) {\n\t\tvar stateTitleTiddler = this.wiki.getTiddler(this.stateTitle);\n\t\tif(this.stateField) {\n\t\t\tstate = stateTitleTiddler ? stateTitleTiddler.getFieldString(this.stateField) || defaultState : defaultState;\n\t\t} else if(this.stateIndex) {\n\t\t\tstate = stateTitleTiddler ? this.wiki.extractTiddlerDataItem(this.stateTitle,this.stateIndex) || defaultState : defaultState;\n\t\t} else if(stateTitleTiddler) {\n\t\t\tstate = this.wiki.getTiddlerText(this.stateTitle) || defaultState;\n\t\t} else {\n\t\t\tstate = defaultState;\n\t\t}\n\t} else {\n\t\tstate = this.stateTiddlerTitle ? this.wiki.getTextReference(this.state,this[\"default\"],this.getVariable(\"currentTiddler\")) : this[\"default\"];\n\t}\n\tif(state === null) {\n\t\tstate = this[\"default\"];\n\t}\n\tswitch(this.type) {\n\t\tcase \"popup\":\n\t\t\tthis.readPopupState(state);\n\t\t\tbreak;\n\t\tcase \"match\":\n\t\t\tthis.isOpen = this.text === state;\n\t\t\tbreak;\n\t\tcase \"nomatch\":\n\t\t\tthis.isOpen = this.text !== state;\n\t\t\tbreak;\n\t\tcase \"lt\":\n\t\t\tthis.isOpen = !!(this.compareStateText(state) &lt; 0);\n\t\t\tbreak;\n\t\tcase \"gt\":\n\t\t\tthis.isOpen = !!(this.compareStateText(state) &gt; 0);\n\t\t\tbreak;\n\t\tcase \"lteq\":\n\t\t\tthis.isOpen = !(this.compareStateText(state) &gt; 0);\n\t\t\tbreak;\n\t\tcase \"gteq\":\n\t\t\tthis.isOpen = !(this.compareStateText(state) &lt; 0);\n\t\t\tbreak;\n\t}\n};\n\nRevealWidget.prototype.compareStateText = function(state) {\n\treturn state.localeCompare(this.text,undefined,{numeric: true,sensitivity: \"case\"});\n};\n\nRevealWidget.prototype.readPopupState = function(state) {\n\tvar popupLocationRegExp = /^\\((-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+),(-?[0-9\\.E]+)\\)$/,\n\t\tmatch = popupLocationRegExp.exec(state);\n\t// Check if the state matches the location regexp\n\tif(match) {\n\t\t// If so, we're open\n\t\tthis.isOpen = true;\n\t\t// Get the location\n\t\tthis.popup = {\n\t\t\tleft: parseFloat(match[1]),\n\t\t\ttop: parseFloat(match[2]),\n\t\t\twidth: parseFloat(match[3]),\n\t\t\theight: parseFloat(match[4])\n\t\t};\n\t} else {\n\t\t// If not, we're closed\n\t\tthis.isOpen = false;\n\t}\n};\n\nRevealWidget.prototype.assignDomNodeClasses = function() {\n\tvar classes = this.getAttribute(\"class\",\"\").split(\" \");\n\tclasses.push(\"tc-reveal\");\n\tthis.domNode.className = classes.join(\" \");\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nRevealWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.state || changedAttributes.type || changedAttributes.text || changedAttributes.position || changedAttributes.positionAllowNegative || changedAttributes[\"default\"] || changedAttributes.animate || changedAttributes.stateTitle || changedAttributes.stateField || changedAttributes.stateIndex) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\tvar currentlyOpen = this.isOpen;\n\t\tthis.readState();\n\t\tif(this.isOpen !== currentlyOpen) {\n\t\t\tif(this.retain === \"yes\") {\n\t\t\t\tthis.updateState();\n\t\t\t} else {\n\t\t\t\tthis.refreshSelf();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if(this.type === \"popup\" &amp;&amp; this.updatePopupPosition &amp;&amp; (changedTiddlers[this.state] || changedTiddlers[this.stateTitle])) {\n\t\t\tthis.positionPopup(this.domNode);\n\t\t}\n\t\tif(changedAttributes.style) {\n\t\t\tthis.domNode.style = this.getAttribute(\"style\",\"\");\n\t\t}\n\t\tif(changedAttributes[\"class\"]) {\n\t\t\tthis.assignDomNodeClasses();\n\t\t}\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\n/*\nCalled by refresh() to dynamically show or hide the content\n*/\nRevealWidget.prototype.updateState = function() {\n\tvar self = this;\n\t// Read the current state\n\tthis.readState();\n\t// Construct the child nodes if needed\n\tvar domNode = this.domNodes[0];\n\tif(this.isOpen &amp;&amp; !this.hasChildNodes) {\n\t\tthis.hasChildNodes = true;\n\t\tthis.makeChildWidgets(this.parseTreeNode.children);\n\t\tthis.renderChildren(domNode,null);\n\t}\n\t// Animate our DOM node\n\tif(!domNode.isTiddlyWikiFakeDom &amp;&amp; this.type === \"popup\" &amp;&amp; this.isOpen) {\n\t\tthis.positionPopup(domNode);\n\t\t$tw.utils.addClass(domNode,\"tc-popup\"); // Make sure that clicks don't dismiss popups within the revealed content\n\n\t}\n\tif(this.isOpen) {\n\t\tdomNode.removeAttribute(\"hidden\");\n        $tw.anim.perform(this.openAnimation,domNode);\n\t} else {\n\t\t$tw.anim.perform(this.closeAnimation,domNode,{callback: function() {\n\t\t\t//make sure that the state hasn't changed during the close animation\n\t\t\tself.readState()\n\t\t\tif(!self.isOpen) {\n\t\t\t\tdomNode.setAttribute(\"hidden\",\"true\");\n\t\t\t}\n\t\t}});\n\t}\n};\n\nexports.reveal = RevealWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/scrollable.js":{"title":"$:/core/modules/widgets/scrollable.js","text":"/*\\\ntitle: $:/core/modules/widgets/scrollable.js\ntype: application/javascript\nmodule-type: widget\n\nScrollable widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ScrollableWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nScrollableWidget.prototype = new Widget();\n\nScrollableWidget.prototype.cancelScroll = function() {\n\tif(this.idRequestFrame) {\n\t\tthis.cancelAnimationFrame.call(window,this.idRequestFrame);\n\t\tthis.idRequestFrame = null;\n\t}\n};\n\n/*\nHandle a scroll event\n*/\nScrollableWidget.prototype.handleScrollEvent = function(event) {\n\t// Pass the scroll event through if our offsetsize is larger than our scrollsize\n\tif(this.outerDomNode.scrollWidth &lt;= this.outerDomNode.offsetWidth &amp;&amp; this.outerDomNode.scrollHeight &lt;= this.outerDomNode.offsetHeight &amp;&amp; this.fallthrough === \"yes\") {\n\t\treturn true;\n\t}\n\tif(event.paramObject &amp;&amp; event.paramObject.selector) {\n\t\tthis.scrollSelectorIntoView(null,event.paramObject.selector);\n\t} else {\n\t\tthis.scrollIntoView(event.target);\n\t}\n\treturn false; // Handled event\n};\n\n/*\nScroll an element into view\n*/\nScrollableWidget.prototype.scrollIntoView = function(element) {\n\tvar duration = $tw.utils.getAnimationDuration(),\n\tsrcWindow = element ? element.ownerDocument.defaultView : window;\n\tthis.cancelScroll();\n\tthis.startTime = Date.now();\n\tvar scrollPosition = {\n\t\tx: this.outerDomNode.scrollLeft,\n\t\ty: this.outerDomNode.scrollTop\n\t};\n\t// Get the client bounds of the element and adjust by the scroll position\n\tvar scrollableBounds = this.outerDomNode.getBoundingClientRect(),\n\t\tclientTargetBounds = element.getBoundingClientRect(),\n\t\tbounds = {\n\t\t\tleft: clientTargetBounds.left + scrollPosition.x - scrollableBounds.left,\n\t\t\ttop: clientTargetBounds.top + scrollPosition.y - scrollableBounds.top,\n\t\t\twidth: clientTargetBounds.width,\n\t\t\theight: clientTargetBounds.height\n\t\t};\n\t// We'll consider the horizontal and vertical scroll directions separately via this function\n\tvar getEndPos = function(targetPos,targetSize,currentPos,currentSize) {\n\t\t\t// If the target is already visible then stay where we are\n\t\t\tif(targetPos &gt;= currentPos &amp;&amp; (targetPos + targetSize) &lt;= (currentPos + currentSize)) {\n\t\t\t\treturn currentPos;\n\t\t\t// If the target is above/left of the current view, then scroll to its top/left\n\t\t\t} else if(targetPos &lt;= currentPos) {\n\t\t\t\treturn targetPos;\n\t\t\t// If the target is smaller than the window and the scroll position is too far up, then scroll till the target is at the bottom of the window\n\t\t\t} else if(targetSize &lt; currentSize &amp;&amp; currentPos &lt; (targetPos + targetSize - currentSize)) {\n\t\t\t\treturn targetPos + targetSize - currentSize;\n\t\t\t// If the target is big, then just scroll to the top\n\t\t\t} else if(currentPos &lt; targetPos) {\n\t\t\t\treturn targetPos;\n\t\t\t// Otherwise, stay where we are\n\t\t\t} else {\n\t\t\t\treturn currentPos;\n\t\t\t}\n\t\t},\n\t\tendX = getEndPos(bounds.left,bounds.width,scrollPosition.x,this.outerDomNode.offsetWidth),\n\t\tendY = getEndPos(bounds.top,bounds.height,scrollPosition.y,this.outerDomNode.offsetHeight);\n\t// Only scroll if necessary\n\tif(endX !== scrollPosition.x || endY !== scrollPosition.y) {\n\t\tvar self = this,\n\t\t\tdrawFrame;\n\t\tdrawFrame = function () {\n\t\t\tvar t;\n\t\t\tif(duration &lt;= 0) {\n\t\t\t\tt = 1;\n\t\t\t} else {\n\t\t\t\tt = ((Date.now()) - self.startTime) / duration;\n\t\t\t}\n\t\t\tif(t &gt;= 1) {\n\t\t\t\tself.cancelScroll();\n\t\t\t\tt = 1;\n\t\t\t}\n\t\t\tt = $tw.utils.slowInSlowOut(t);\n\t\t\tself.outerDomNode.scrollLeft = scrollPosition.x + (endX - scrollPosition.x) * t;\n\t\t\tself.outerDomNode.scrollTop = scrollPosition.y + (endY - scrollPosition.y) * t;\n\t\t\tif(t &lt; 1) {\n\t\t\t\tself.idRequestFrame = self.requestAnimationFrame.call(srcWindow,drawFrame);\n\t\t\t}\n\t\t};\n\t\tdrawFrame();\n\t}\n};\n\nScrollableWidget.prototype.scrollSelectorIntoView = function(baseElement,selector,callback) {\n\tbaseElement = baseElement || document.body;\n\tvar element = baseElement.querySelector(selector);\n\tif(element) {\n\t\tthis.scrollIntoView(element,callback);\n\t}\n};\n\n/*\nRender this widget into the DOM\n*/\nScrollableWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\tthis.scaleFactor = 1;\n\tthis.addEventListeners([\n\t\t{type: \"tm-scroll\", handler: \"handleScrollEvent\"}\n\t]);\n\tif($tw.browser) {\n\t\tthis.requestAnimationFrame = window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.setTimeout(callback, 1000/60);\n\t\t\t};\n\t\tthis.cancelAnimationFrame = window.cancelAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\twindow.webkitCancelRequestAnimationFrame ||\n\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\twindow.mozCancelRequestAnimationFrame ||\n\t\t\tfunction(id) {\n\t\t\t\twindow.clearTimeout(id);\n\t\t\t};\n\t}\n\t// Remember parent\n\tthis.parentDomNode = parent;\n\t// Compute attributes and execute state\n\tthis.computeAttributes();\n\tthis.execute();\n\t// Create elements\n\tthis.outerDomNode = this.document.createElement(\"div\");\n\t$tw.utils.setStyle(this.outerDomNode,[\n\t\t{overflowY: \"auto\"},\n\t\t{overflowX: \"auto\"},\n\t\t{webkitOverflowScrolling: \"touch\"}\n\t]);\n\tthis.innerDomNode = this.document.createElement(\"div\");\n\tthis.outerDomNode.appendChild(this.innerDomNode);\n\t// Assign classes\n\tthis.outerDomNode.className = this[\"class\"] || \"\";\n\t// Insert element\n\tparent.insertBefore(this.outerDomNode,nextSibling);\n\tthis.renderChildren(this.innerDomNode,null);\n\tthis.domNodes.push(this.outerDomNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nScrollableWidget.prototype.execute = function() {\n\t// Get attributes\n\tthis.fallthrough = this.getAttribute(\"fallthrough\",\"yes\");\n\tthis[\"class\"] = this.getAttribute(\"class\");\n\t// Make child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nScrollableWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes[\"class\"]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports.scrollable = ScrollableWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/select.js":{"title":"$:/core/modules/widgets/select.js","text":"/*\\\ntitle: $:/core/modules/widgets/select.js\ntype: application/javascript\nmodule-type: widget\n\nSelect widget:\n\n```\n&lt;$select tiddler=\"MyTiddler\" field=\"text\"&gt;\n&lt;$list filter=\"[tag[chapter]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$view field=\"description\"/&gt;\n&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar SelectWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nSelectWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nSelectWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n\tthis.setSelectValue();\n\t$tw.utils.addEventListeners(this.getSelectDomNode(),[\n\t\t{name: \"change\", handlerObject: this, handlerMethod: \"handleChangeEvent\"}\n\t]);\n};\n\n/*\nHandle a change event\n*/\nSelectWidget.prototype.handleChangeEvent = function(event) {\n\t// Get the new value and assign it to the tiddler\n\tif(this.selectMultiple == false) {\n\t\tvar value = this.getSelectDomNode().value;\n\t} else {\n\t\tvar value = this.getSelectValues()\n\t\t\t\tvalue = $tw.utils.stringifyList(value);\n\t}\n\tthis.wiki.setText(this.selectTitle,this.selectField,this.selectIndex,value);\n\t// Trigger actions\n\tif(this.selectActions) {\n\t\tthis.invokeActionString(this.selectActions,this,event);\n\t}\n};\n\n/*\nIf necessary, set the value of the select element to the current value\n*/\nSelectWidget.prototype.setSelectValue = function() {\n\tvar value = this.selectDefault;\n\t// Get the value\n\tif(this.selectIndex) {\n\t\tvalue = this.wiki.extractTiddlerDataItem(this.selectTitle,this.selectIndex,value);\n\t} else {\n\t\tvar tiddler = this.wiki.getTiddler(this.selectTitle);\n\t\tif(tiddler) {\n\t\t\tif(this.selectField === \"text\") {\n\t\t\t\t// Calling getTiddlerText() triggers lazy loading of skinny tiddlers\n\t\t\t\tvalue = this.wiki.getTiddlerText(this.selectTitle);\n\t\t\t} else {\n\t\t\t\tif($tw.utils.hop(tiddler.fields,this.selectField)) {\n\t\t\t\t\tvalue = tiddler.getFieldString(this.selectField);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(this.selectField === \"title\") {\n\t\t\t\tvalue = this.selectTitle;\n\t\t\t}\n\t\t}\n\t}\n\t// Assign it to the select element if it's different than the current value\n\tif (this.selectMultiple) {\n\t\tvalue = value === undefined ? \"\" : value;\n\t\tvar select = this.getSelectDomNode();\n\t\tvar values = Array.isArray(value) ? value : $tw.utils.parseStringArray(value);\n\t\tfor(var i=0; i &lt; select.children.length; i++){\n\t\t\tselect.children[i].selected = values.indexOf(select.children[i].value) !== -1\n\t\t}\n\t} else {\n\t\tvar domNode = this.getSelectDomNode();\n\t\tif(domNode.value !== value) {\n\t\t\tdomNode.value = value;\n\t\t}\n\t}\n};\n\n/*\nGet the DOM node of the select element\n*/\nSelectWidget.prototype.getSelectDomNode = function() {\n\treturn this.children[0].domNodes[0];\n};\n\n// Return an array of the selected opion values\n// select is an HTML select element\nSelectWidget.prototype.getSelectValues = function() {\n\tvar select, result, options, opt;\n\tselect = this.getSelectDomNode();\n\tresult = [];\n\toptions = select &amp;&amp; select.options;\n\tfor (var i=0; i&lt;options.length; i++) {\n\t\topt = options[i];\n\t\tif (opt.selected) {\n\t\t\tresult.push(opt.value || opt.text);\n\t\t}\n\t}\n\treturn result;\n}\n\n/*\nCompute the internal state of the widget\n*/\nSelectWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.selectActions = this.getAttribute(\"actions\");\n\tthis.selectTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.selectField = this.getAttribute(\"field\",\"text\");\n\tthis.selectIndex = this.getAttribute(\"index\");\n\tthis.selectClass = this.getAttribute(\"class\");\n\tthis.selectDefault = this.getAttribute(\"default\");\n\tthis.selectMultiple = this.getAttribute(\"multiple\", false);\n\tthis.selectSize = this.getAttribute(\"size\");\n\tthis.selectTooltip = this.getAttribute(\"tooltip\");\n\t// Make the child widgets\n\tvar selectNode = {\n\t\ttype: \"element\",\n\t\ttag: \"select\",\n\t\tchildren: this.parseTreeNode.children\n\t};\n\tif(this.selectClass) {\n\t\t$tw.utils.addAttributeToParseTreeNode(selectNode,\"class\",this.selectClass);\n\t}\n\tif(this.selectMultiple) {\n\t\t$tw.utils.addAttributeToParseTreeNode(selectNode,\"multiple\",\"multiple\");\n\t}\n\tif(this.selectSize) {\n\t\t$tw.utils.addAttributeToParseTreeNode(selectNode,\"size\",this.selectSize);\n\t}\n\tif(this.selectTooltip) {\n\t\t$tw.utils.addAttributeToParseTreeNode(selectNode,\"title\",this.selectTooltip);\n\t}\n\tthis.makeChildWidgets([selectNode]);\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nSelectWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\t// If we're using a different tiddler/field/index then completely refresh ourselves\n\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index || changedAttributes.tooltip) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t// If the target tiddler value has changed, just update setting and refresh the children\n\t} else {\n\t\tvar childrenRefreshed = this.refreshChildren(changedTiddlers);\n\t\tif(changedTiddlers[this.selectTitle] || childrenRefreshed) {\n\t\t\tthis.setSelectValue();\n\t\t} \n\t\treturn childrenRefreshed;\n\t}\n};\n\nexports.select = SelectWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/set.js":{"title":"$:/core/modules/widgets/set.js","text":"/*\\\ntitle: $:/core/modules/widgets/set.js\ntype: application/javascript\nmodule-type: widget\n\nSet variable widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar SetWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nSetWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nSetWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nSetWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.setName = this.getAttribute(\"name\",\"currentTiddler\");\n\tthis.setFilter = this.getAttribute(\"filter\");\n\tthis.setSelect = this.getAttribute(\"select\");\n\tthis.setTiddler = this.getAttribute(\"tiddler\");\n\tthis.setSubTiddler = this.getAttribute(\"subtiddler\");\n\tthis.setField = this.getAttribute(\"field\");\n\tthis.setIndex = this.getAttribute(\"index\");\n\tthis.setValue = this.getAttribute(\"value\");\n\tthis.setEmptyValue = this.getAttribute(\"emptyValue\");\n\t// Set context variable\n\tthis.setVariable(this.setName,this.getValue(),this.parseTreeNode.params,!!this.parseTreeNode.isMacroDefinition);\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nGet the value to be assigned\n*/\nSetWidget.prototype.getValue = function() {\n\tvar value = this.setValue;\n\tif(this.setTiddler) {\n\t\tvar tiddler;\n\t\tif(this.setSubTiddler) {\n\t\t\ttiddler = this.wiki.getSubTiddler(this.setTiddler,this.setSubTiddler);\n\t\t} else {\n\t\t\ttiddler = this.wiki.getTiddler(this.setTiddler);\n\t\t}\n\t\tif(!tiddler) {\n\t\t\tvalue = this.setEmptyValue;\n\t\t} else if(this.setField) {\n\t\t\tvalue = tiddler.getFieldString(this.setField) || this.setEmptyValue;\n\t\t} else if(this.setIndex) {\n\t\t\tvalue = this.wiki.extractTiddlerDataItem(this.setTiddler,this.setIndex,this.setEmptyValue);\n\t\t} else {\n\t\t\tvalue = tiddler.fields.text || this.setEmptyValue ;\n\t\t}\n\t} else if(this.setFilter) {\n\t\tvar results = this.wiki.filterTiddlers(this.setFilter,this);\n\t\tif(this.setValue == null) {\n\t\t\tvar select;\n\t\t\tif(this.setSelect) {\n\t\t\t\tselect = parseInt(this.setSelect,10);\n\t\t\t}\n\t\t\tif(select !== undefined) {\n\t\t\t\tvalue = results[select] || \"\";\n\t\t\t} else {\n\t\t\t\tvalue = $tw.utils.stringifyList(results);\n\t\t\t}\n\t\t}\n\t\tif(results.length === 0 &amp;&amp; this.setEmptyValue !== undefined) {\n\t\t\tvalue = this.setEmptyValue;\n\t\t}\n\t} else if(!value &amp;&amp; this.setEmptyValue) {\n\t\tvalue = this.setEmptyValue;\n\t}\n\treturn value || \"\";\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nSetWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.name || changedAttributes.filter || changedAttributes.select || changedAttributes.tiddler || (this.setTiddler &amp;&amp; changedTiddlers[this.setTiddler]) || changedAttributes.field || changedAttributes.index || changedAttributes.value || changedAttributes.emptyValue ||\n\t   (this.setFilter &amp;&amp; this.getValue() != this.variables[this.setName].value)) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.setvariable = SetWidget;\nexports.set = SetWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/text.js":{"title":"$:/core/modules/widgets/text.js","text":"/*\\\ntitle: $:/core/modules/widgets/text.js\ntype: application/javascript\nmodule-type: widget\n\nText node widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar TextNodeWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nTextNodeWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nTextNodeWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tvar text = this.getAttribute(\"text\",this.parseTreeNode.text || \"\");\n\ttext = text.replace(/\\r/mg,\"\");\n\tvar textNode = this.document.createTextNode(text);\n\tparent.insertBefore(textNode,nextSibling);\n\tthis.domNodes.push(textNode);\n};\n\n/*\nCompute the internal state of the widget\n*/\nTextNodeWidget.prototype.execute = function() {\n\t// Nothing to do for a text node\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nTextNodeWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.text) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports.text = TextNodeWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/tiddler.js":{"title":"$:/core/modules/widgets/tiddler.js","text":"/*\\\ntitle: $:/core/modules/widgets/tiddler.js\ntype: application/javascript\nmodule-type: widget\n\nTiddler widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar TiddlerWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nTiddlerWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nTiddlerWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nTiddlerWidget.prototype.execute = function() {\n\tthis.tiddlerState = this.computeTiddlerState();\n\tthis.setVariable(\"currentTiddler\",this.tiddlerState.currentTiddler);\n\tthis.setVariable(\"missingTiddlerClass\",this.tiddlerState.missingTiddlerClass);\n\tthis.setVariable(\"shadowTiddlerClass\",this.tiddlerState.shadowTiddlerClass);\n\tthis.setVariable(\"systemTiddlerClass\",this.tiddlerState.systemTiddlerClass);\n\tthis.setVariable(\"tiddlerTagClasses\",this.tiddlerState.tiddlerTagClasses);\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nCompute the tiddler state flags\n*/\nTiddlerWidget.prototype.computeTiddlerState = function() {\n\t// Get our parameters\n\tthis.tiddlerTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\t// Compute the state\n\tvar state = {\n\t\tcurrentTiddler: this.tiddlerTitle || \"\",\n\t\tmissingTiddlerClass: (this.wiki.tiddlerExists(this.tiddlerTitle) || this.wiki.isShadowTiddler(this.tiddlerTitle)) ? \"tc-tiddler-exists\" : \"tc-tiddler-missing\",\n\t\tshadowTiddlerClass: this.wiki.isShadowTiddler(this.tiddlerTitle) ? \"tc-tiddler-shadow\" : \"\",\n\t\tsystemTiddlerClass: this.wiki.isSystemTiddler(this.tiddlerTitle) ? \"tc-tiddler-system\" : \"\",\n\t\ttiddlerTagClasses: this.getTagClasses()\n\t};\n\t// Compute a simple hash to make it easier to detect changes\n\tstate.hash = state.currentTiddler + state.missingTiddlerClass + state.shadowTiddlerClass + state.systemTiddlerClass + state.tiddlerTagClasses;\n\treturn state;\n};\n\n/*\nCreate a string of CSS classes derived from the tags of the current tiddler\n*/\nTiddlerWidget.prototype.getTagClasses = function() {\n\tvar tiddler = this.wiki.getTiddler(this.tiddlerTitle);\n\tif(tiddler) {\n\t\tvar tags = [];\n\t\t$tw.utils.each(tiddler.fields.tags,function(tag) {\n\t\t\ttags.push(\"tc-tagged-\" + encodeURIComponent(tag));\n\t\t});\n\t\treturn tags.join(\" \");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nTiddlerWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes(),\n\t\tnewTiddlerState = this.computeTiddlerState();\n\tif(changedAttributes.tiddler || newTiddlerState.hash !== this.tiddlerState.hash) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.tiddler = TiddlerWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/transclude.js":{"title":"$:/core/modules/widgets/transclude.js","text":"/*\\\ntitle: $:/core/modules/widgets/transclude.js\ntype: application/javascript\nmodule-type: widget\n\nTransclude widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar TranscludeWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nTranscludeWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nTranscludeWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nTranscludeWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.transcludeTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.transcludeSubTiddler = this.getAttribute(\"subtiddler\");\n\tthis.transcludeField = this.getAttribute(\"field\");\n\tthis.transcludeIndex = this.getAttribute(\"index\");\n\tthis.transcludeMode = this.getAttribute(\"mode\");\n\tthis.recursionMarker = this.getAttribute(\"recursionMarker\",\"yes\");\n\t// Parse the text reference\n\tvar parseAsInline = !this.parseTreeNode.isBlock;\n\tif(this.transcludeMode === \"inline\") {\n\t\tparseAsInline = true;\n\t} else if(this.transcludeMode === \"block\") {\n\t\tparseAsInline = false;\n\t}\n\tvar parser = this.wiki.parseTextReference(\n\t\t\t\t\t\tthis.transcludeTitle,\n\t\t\t\t\t\tthis.transcludeField,\n\t\t\t\t\t\tthis.transcludeIndex,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparseAsInline: parseAsInline,\n\t\t\t\t\t\t\tsubTiddler: this.transcludeSubTiddler\n\t\t\t\t\t\t}),\n\t\tparseTreeNodes = parser ? parser.tree : this.parseTreeNode.children;\n\tthis.sourceText = parser ? parser.source : null;\n\tthis.parserType = parser? parser.type : null;\n\t// Set context variables for recursion detection\n\tvar recursionMarker = this.makeRecursionMarker();\n\tif(this.recursionMarker === \"yes\") {\n\t\tthis.setVariable(\"transclusion\",recursionMarker);\n\t}\n\t// Check for recursion\n\tif(parser) {\n\t\tif(this.parentWidget &amp;&amp; this.parentWidget.hasVariable(\"transclusion\",recursionMarker)) {\n\t\t\tparseTreeNodes = [{type: \"element\", tag: \"span\", attributes: {\n\t\t\t\t\"class\": {type: \"string\", value: \"tc-error\"}\n\t\t\t}, children: [\n\t\t\t\t{type: \"text\", text: $tw.language.getString(\"Error/RecursiveTransclusion\")}\n\t\t\t]}];\n\t\t}\n\t}\n\t// Construct the child widgets\n\tthis.makeChildWidgets(parseTreeNodes);\n};\n\n/*\nCompose a string comprising the title, field and/or index to identify this transclusion for recursion detection\n*/\nTranscludeWidget.prototype.makeRecursionMarker = function() {\n\tvar output = [];\n\toutput.push(\"{\");\n\toutput.push(this.getVariable(\"currentTiddler\",{defaultValue: \"\"}));\n\toutput.push(\"|\");\n\toutput.push(this.transcludeTitle || \"\");\n\toutput.push(\"|\");\n\toutput.push(this.transcludeField || \"\");\n\toutput.push(\"|\");\n\toutput.push(this.transcludeIndex || \"\");\n\toutput.push(\"|\");\n\toutput.push(this.transcludeSubTiddler || \"\");\n\toutput.push(\"}\");\n\treturn output.join(\"\");\n};\n\nTranscludeWidget.prototype.parserNeedsRefresh = function() {\n\tvar parserInfo = this.wiki.getTextReferenceParserInfo(this.transcludeTitle,this.transcludeField,this.transcludeIndex,{subTiddler:this.transcludeSubTiddler});\n\treturn (this.sourceText === undefined || parserInfo.sourceText !== this.sourceText || parserInfo.parserType !== this.parserType)\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nTranscludeWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(($tw.utils.count(changedAttributes) &gt; 0) || (changedTiddlers[this.transcludeTitle] &amp;&amp; this.parserNeedsRefresh())) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.transclude = TranscludeWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/vars.js":{"title":"$:/core/modules/widgets/vars.js","text":"/*\\\ntitle: $:/core/modules/widgets/vars.js\ntype: application/javascript\nmodule-type: widget\n\nThis widget allows multiple variables to be set in one go:\n\n```\n\\define helloworld() Hello world!\n&lt;$vars greeting=\"Hi\" me={{!!title}} sentence=&lt;&lt;helloworld&gt;&gt;&gt;\n  &lt;&lt;greeting&gt;&gt;! I am &lt;&lt;me&gt;&gt; and I say: &lt;&lt;sentence&gt;&gt;\n&lt;/$vars&gt;\n```\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar VarsWidget = function(parseTreeNode,options) {\n\t// Initialise\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nVarsWidget.prototype = Object.create(Widget.prototype);\n\n/*\nRender this widget into the DOM\n*/\nVarsWidget.prototype.render = function(parent,nextSibling) {\n\t// Call the constructor\n\tWidget.call(this);\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nVarsWidget.prototype.execute = function() {\n\t// Parse variables\n\tvar self = this;\n\t$tw.utils.each(this.attributes,function(val,key) {\n\t\tif(key.charAt(0) !== \"$\") {\n\t\t\tself.setVariable(key,val);\n\t\t}\n\t});\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nRefresh the widget by ensuring our attributes are up to date\n*/\nVarsWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(Object.keys(changedAttributes).length) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t}\n\treturn this.refreshChildren(changedTiddlers);\n};\n\nexports[\"vars\"] = VarsWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/view.js":{"title":"$:/core/modules/widgets/view.js","text":"/*\\\ntitle: $:/core/modules/widgets/view.js\ntype: application/javascript\nmodule-type: widget\n\nView widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar ViewWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nViewWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nViewWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tif(this.text) {\n\t\tvar textNode = this.document.createTextNode(this.text);\n\t\tparent.insertBefore(textNode,nextSibling);\n\t\tthis.domNodes.push(textNode);\n\t} else {\n\t\tthis.makeChildWidgets();\n\t\tthis.renderChildren(parent,nextSibling);\n\t}\n};\n\n/*\nCompute the internal state of the widget\n*/\nViewWidget.prototype.execute = function() {\n\t// Get parameters from our attributes\n\tthis.viewTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.viewSubtiddler = this.getAttribute(\"subtiddler\");\n\tthis.viewField = this.getAttribute(\"field\",\"text\");\n\tthis.viewIndex = this.getAttribute(\"index\");\n\tthis.viewFormat = this.getAttribute(\"format\",\"text\");\n\tthis.viewTemplate = this.getAttribute(\"template\",\"\");\n\tthis.viewMode = this.getAttribute(\"mode\",\"block\");\n\tswitch(this.viewFormat) {\n\t\tcase \"htmlwikified\":\n\t\t\tthis.text = this.getValueAsHtmlWikified(this.viewMode);\n\t\t\tbreak;\n\t\tcase \"plainwikified\":\n\t\t\tthis.text = this.getValueAsPlainWikified(this.viewMode);\n\t\t\tbreak;\n\t\tcase \"htmlencodedplainwikified\":\n\t\t\tthis.text = this.getValueAsHtmlEncodedPlainWikified(this.viewMode);\n\t\t\tbreak;\n\t\tcase \"htmlencoded\":\n\t\t\tthis.text = this.getValueAsHtmlEncoded();\n\t\t\tbreak;\n\t\tcase \"htmltextencoded\":\n\t\t\tthis.text = this.getValueAsHtmlTextEncoded();\n\t\t\tbreak;\n\t\tcase \"urlencoded\":\n\t\t\tthis.text = this.getValueAsUrlEncoded();\n\t\t\tbreak;\n\t\tcase \"doubleurlencoded\":\n\t\t\tthis.text = this.getValueAsDoubleUrlEncoded();\n\t\t\tbreak;\n\t\tcase \"date\":\n\t\t\tthis.text = this.getValueAsDate(this.viewTemplate);\n\t\t\tbreak;\n\t\tcase \"relativedate\":\n\t\t\tthis.text = this.getValueAsRelativeDate();\n\t\t\tbreak;\n\t\tcase \"stripcomments\":\n\t\t\tthis.text = this.getValueAsStrippedComments();\n\t\t\tbreak;\n\t\tcase \"jsencoded\":\n\t\t\tthis.text = this.getValueAsJsEncoded();\n\t\t\tbreak;\n\t\tdefault: // \"text\"\n\t\t\tthis.text = this.getValueAsText();\n\t\t\tbreak;\n\t}\n};\n\n/*\nThe various formatter functions are baked into this widget for the moment. Eventually they will be replaced by macro functions\n*/\n\n/*\nRetrieve the value of the widget. Options are:\nasString: Optionally return the value as a string\n*/\nViewWidget.prototype.getValue = function(options) {\n\toptions = options || {};\n\tvar value = options.asString ? \"\" : undefined;\n\tif(this.viewIndex) {\n\t\tvalue = this.wiki.extractTiddlerDataItem(this.viewTitle,this.viewIndex);\n\t} else {\n\t\tvar tiddler;\n\t\tif(this.viewSubtiddler) {\n\t\t\ttiddler = this.wiki.getSubTiddler(this.viewTitle,this.viewSubtiddler);\n\t\t} else {\n\t\t\ttiddler = this.wiki.getTiddler(this.viewTitle);\n\t\t}\n\t\tif(tiddler) {\n\t\t\tif(this.viewField === \"text\" &amp;&amp; !this.viewSubtiddler) {\n\t\t\t\t// Calling getTiddlerText() triggers lazy loading of skinny tiddlers\n\t\t\t\tvalue = this.wiki.getTiddlerText(this.viewTitle);\n\t\t\t} else {\n\t\t\t\tif($tw.utils.hop(tiddler.fields,this.viewField)) {\n\t\t\t\t\tif(options.asString) {\n\t\t\t\t\t\tvalue = tiddler.getFieldString(this.viewField);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = tiddler.fields[this.viewField];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(this.viewField === \"title\") {\n\t\t\t\tvalue = this.viewTitle;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n\nViewWidget.prototype.getValueAsText = function() {\n\treturn this.getValue({asString: true});\n};\n\nViewWidget.prototype.getValueAsHtmlWikified = function(mode) {\n\treturn this.wiki.renderText(\"text/html\",\"text/vnd.tiddlywiki\",this.getValueAsText(),{\n\t\tparseAsInline: mode !== \"block\",\n\t\tparentWidget: this\n\t});\n};\n\nViewWidget.prototype.getValueAsPlainWikified = function(mode) {\n\treturn this.wiki.renderText(\"text/plain\",\"text/vnd.tiddlywiki\",this.getValueAsText(),{\n\t\tparseAsInline: mode !== \"block\",\n\t\tparentWidget: this\n\t});\n};\n\nViewWidget.prototype.getValueAsHtmlEncodedPlainWikified = function(mode) {\n\treturn $tw.utils.htmlEncode(this.wiki.renderText(\"text/plain\",\"text/vnd.tiddlywiki\",this.getValueAsText(),{\n\t\tparseAsInline: mode !== \"block\",\n\t\tparentWidget: this\n\t}));\n};\n\nViewWidget.prototype.getValueAsHtmlEncoded = function() {\n\treturn $tw.utils.htmlEncode(this.getValueAsText());\n};\n\nViewWidget.prototype.getValueAsHtmlTextEncoded = function() {\n\treturn $tw.utils.htmlTextEncode(this.getValueAsText());\n};\n\nViewWidget.prototype.getValueAsUrlEncoded = function() {\n\treturn encodeURIComponent(this.getValueAsText());\n};\n\nViewWidget.prototype.getValueAsDoubleUrlEncoded = function() {\n\treturn encodeURIComponent(encodeURIComponent(this.getValueAsText()));\n};\n\nViewWidget.prototype.getValueAsDate = function(format) {\n\tformat = format || \"YYYY MM DD 0hh:0mm\";\n\tvar value = $tw.utils.parseDate(this.getValue());\n\tif(value &amp;&amp; $tw.utils.isDate(value) &amp;&amp; value.toString() !== \"Invalid Date\") {\n\t\treturn $tw.utils.formatDateString(value,format);\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\nViewWidget.prototype.getValueAsRelativeDate = function(format) {\n\tvar value = $tw.utils.parseDate(this.getValue());\n\tif(value &amp;&amp; $tw.utils.isDate(value) &amp;&amp; value.toString() !== \"Invalid Date\") {\n\t\treturn $tw.utils.getRelativeDate((new Date()) - (new Date(value))).description;\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\nViewWidget.prototype.getValueAsStrippedComments = function() {\n\tvar lines = this.getValueAsText().split(\"\\n\"),\n\t\tout = [];\n\tfor(var line=0; line&lt;lines.length; line++) {\n\t\tvar text = lines[line];\n\t\tif(!/^\\s*\\/\\/#/.test(text)) {\n\t\t\tout.push(text);\n\t\t}\n\t}\n\treturn out.join(\"\\n\");\n};\n\nViewWidget.prototype.getValueAsJsEncoded = function() {\n\treturn $tw.utils.stringify(this.getValueAsText());\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nViewWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index || changedAttributes.template || changedAttributes.format || changedTiddlers[this.viewTitle]) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexports.view = ViewWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/widget.js":{"title":"$:/core/modules/widgets/widget.js","text":"/*\\\ntitle: $:/core/modules/widgets/widget.js\ntype: application/javascript\nmodule-type: widget\n\nWidget base class\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nCreate a widget object for a parse tree node\n\tparseTreeNode: reference to the parse tree node to be rendered\n\toptions: see below\nOptions include:\n\twiki: mandatory reference to wiki associated with this render tree\n\tparentWidget: optional reference to a parent renderer node for the context chain\n\tdocument: optional document object to use instead of global document\n*/\nvar Widget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInitialise widget properties. These steps are pulled out of the constructor so that we can reuse them in subclasses\n*/\nWidget.prototype.initialise = function(parseTreeNode,options) {\n\t// Bail if parseTreeNode is undefined, meaning  that the widget constructor was called without any arguments so that it can be subclassed\n\tif(parseTreeNode === undefined) {\n\t\treturn;\n\t}\n\toptions = options || {};\n\t// Save widget info\n\tthis.parseTreeNode = parseTreeNode;\n\tthis.wiki = options.wiki;\n\tthis.parentWidget = options.parentWidget;\n\tthis.variablesConstructor = function() {};\n\tthis.variablesConstructor.prototype = this.parentWidget ? this.parentWidget.variables : {};\n\tthis.variables = new this.variablesConstructor();\n\tthis.document = options.document;\n\tthis.attributes = {};\n\tthis.children = [];\n\tthis.domNodes = [];\n\tthis.eventListeners = {};\n\t// Hashmap of the widget classes\n\tif(!this.widgetClasses) {\n\t\t// Get widget classes\n\t\tWidget.prototype.widgetClasses = $tw.modules.applyMethods(\"widget\");\n\t\t// Process any subclasses\n\t\t$tw.modules.forEachModuleOfType(\"widget-subclass\",function(title,module) {\n\t\t\tif(module.baseClass) {\n\t\t\t\tvar baseClass = Widget.prototype.widgetClasses[module.baseClass];\n\t\t\t\tif(!baseClass) {\n\t\t\t\t\tthrow \"Module '\" + title + \"' is attemping to extend a non-existent base class '\" + module.baseClass + \"'\";\n\t\t\t\t}\n\t\t\t\tvar subClass = module.constructor;\n\t\t\t\tsubClass.prototype = new baseClass();\n\t\t\t\t$tw.utils.extend(subClass.prototype,module.prototype);\n\t\t\t\tWidget.prototype.widgetClasses[module.name || module.baseClass] = subClass;\n\t\t\t}\n\t\t});\n\t}\n};\n\n/*\nRender this widget into the DOM\n*/\nWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nWidget.prototype.execute = function() {\n\tthis.makeChildWidgets();\n};\n\n/*\nSet the value of a context variable\nname: name of the variable\nvalue: value of the variable\nparams: array of {name:, default:} for each parameter\nisMacroDefinition: true if the variable is set via a \\define macro pragma (and hence should have variable substitution performed)\n*/\nWidget.prototype.setVariable = function(name,value,params,isMacroDefinition) {\n\tthis.variables[name] = {value: value, params: params, isMacroDefinition: !!isMacroDefinition};\n};\n\n/*\nGet the prevailing value of a context variable\nname: name of variable\noptions: see below\nOptions include\nparams: array of {name:, value:} for each parameter\ndefaultValue: default value if the variable is not defined\n\nReturns an object with the following fields:\n\nparams: array of {name:,value:} of parameters passed to wikitext variables\ntext: text of variable, with parameters properly substituted\n*/\nWidget.prototype.getVariableInfo = function(name,options) {\n\toptions = options || {};\n\tvar actualParams = options.params || [],\n\t\tparentWidget = this.parentWidget;\n\t// Check for the variable defined in the parent widget (or an ancestor in the prototype chain)\n\tif(parentWidget &amp;&amp; name in parentWidget.variables) {\n\t\tvar variable = parentWidget.variables[name],\n\t\t\toriginalValue = variable.value,\n\t\t\tvalue = originalValue,\n\t\t\tparams = this.resolveVariableParameters(variable.params,actualParams);\n\t\t// Substitute any parameters specified in the definition\n\t\t$tw.utils.each(params,function(param) {\n\t\t\tvalue = $tw.utils.replaceString(value,new RegExp(\"\\\\$\" + $tw.utils.escapeRegExp(param.name) + \"\\\\$\",\"mg\"),param.value);\n\t\t});\n\t\t// Only substitute variable references if this variable was defined with the \\define pragma\n\t\tif(variable.isMacroDefinition) {\n\t\t\tvalue = this.substituteVariableReferences(value);\n\t\t}\n\t\treturn {\n\t\t\ttext: value,\n\t\t\tparams: params,\n\t\t\tsrcVariable: variable,\n\t\t\tisCacheable: originalValue === value\n\t\t};\n\t}\n\t// If the variable doesn't exist in the parent widget then look for a macro module\n\treturn {\n\t\ttext: this.evaluateMacroModule(name,actualParams,options.defaultValue)\n\t};\n};\n\n/*\nSimplified version of getVariableInfo() that just returns the text\n*/\nWidget.prototype.getVariable = function(name,options) {\n\treturn this.getVariableInfo(name,options).text;\n};\n\nWidget.prototype.resolveVariableParameters = function(formalParams,actualParams) {\n\tformalParams = formalParams || [];\n\tactualParams = actualParams || [];\n\tvar nextAnonParameter = 0, // Next candidate anonymous parameter in macro call\n\t\tparamInfo, paramValue,\n\t\tresults = [];\n\t// Step through each of the parameters in the macro definition\n\tfor(var p=0; p&lt;formalParams.length; p++) {\n\t\t// Check if we've got a macro call parameter with the same name\n\t\tparamInfo = formalParams[p];\n\t\tparamValue = undefined;\n\t\tfor(var m=0; m&lt;actualParams.length; m++) {\n\t\t\tif(actualParams[m].name === paramInfo.name) {\n\t\t\t\tparamValue = actualParams[m].value;\n\t\t\t}\n\t\t}\n\t\t// If not, use the next available anonymous macro call parameter\n\t\twhile(nextAnonParameter &lt; actualParams.length &amp;&amp; actualParams[nextAnonParameter].name) {\n\t\t\tnextAnonParameter++;\n\t\t}\n\t\tif(paramValue === undefined &amp;&amp; nextAnonParameter &lt; actualParams.length) {\n\t\t\tparamValue = actualParams[nextAnonParameter++].value;\n\t\t}\n\t\t// If we've still not got a value, use the default, if any\n\t\tparamValue = paramValue || paramInfo[\"default\"] || \"\";\n\t\t// Store the parameter name and value\n\t\tresults.push({name: paramInfo.name, value: paramValue});\n\t}\n\treturn results;\n};\n\nWidget.prototype.substituteVariableReferences = function(text) {\n\tvar self = this;\n\treturn (text || \"\").replace(/\\$\\(([^\\)\\$]+)\\)\\$/g,function(match,p1,offset,string) {\n\t\treturn self.getVariable(p1,{defaultValue: \"\"});\n\t});\n};\n\nWidget.prototype.evaluateMacroModule = function(name,actualParams,defaultValue) {\n\tif($tw.utils.hop($tw.macros,name)) {\n\t\tvar macro = $tw.macros[name],\n\t\t\targs = [];\n\t\tif(macro.params.length &gt; 0) {\n\t\t\tvar nextAnonParameter = 0, // Next candidate anonymous parameter in macro call\n\t\t\t\tparamInfo, paramValue;\n\t\t\t// Step through each of the parameters in the macro definition\n\t\t\tfor(var p=0; p&lt;macro.params.length; p++) {\n\t\t\t\t// Check if we've got a macro call parameter with the same name\n\t\t\t\tparamInfo = macro.params[p];\n\t\t\t\tparamValue = undefined;\n\t\t\t\tfor(var m=0; m&lt;actualParams.length; m++) {\n\t\t\t\t\tif(actualParams[m].name === paramInfo.name) {\n\t\t\t\t\t\tparamValue = actualParams[m].value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If not, use the next available anonymous macro call parameter\n\t\t\t\twhile(nextAnonParameter &lt; actualParams.length &amp;&amp; actualParams[nextAnonParameter].name) {\n\t\t\t\t\tnextAnonParameter++;\n\t\t\t\t}\n\t\t\t\tif(paramValue === undefined &amp;&amp; nextAnonParameter &lt; actualParams.length) {\n\t\t\t\t\tparamValue = actualParams[nextAnonParameter++].value;\n\t\t\t\t}\n\t\t\t\t// If we've still not got a value, use the default, if any\n\t\t\t\tparamValue = paramValue || paramInfo[\"default\"] || \"\";\n\t\t\t\t// Save the parameter\n\t\t\t\targs.push(paramValue);\n\t\t\t}\n\t\t}\n\t\telse for(var i=0; i&lt;actualParams.length; ++i) {\n\t\t\targs.push(actualParams[i].value);\n\t\t}\n\t\treturn (macro.run.apply(this,args) || \"\").toString();\n\t} else {\n\t\treturn defaultValue;\n\t}\n};\n\n/*\nCheck whether a given context variable value exists in the parent chain\n*/\nWidget.prototype.hasVariable = function(name,value) {\n\tvar node = this;\n\twhile(node) {\n\t\tif($tw.utils.hop(node.variables,name) &amp;&amp; node.variables[name].value === value) {\n\t\t\treturn true;\n\t\t}\n\t\tnode = node.parentWidget;\n\t}\n\treturn false;\n};\n\n/*\nConstruct a qualifying string based on a hash of concatenating the values of a given variable in the parent chain\n*/\nWidget.prototype.getStateQualifier = function(name) {\n\tthis.qualifiers = this.qualifiers || Object.create(null);\n\tname = name || \"transclusion\";\n\tif(this.qualifiers[name]) {\n\t\treturn this.qualifiers[name];\n\t} else {\n\t\tvar output = [],\n\t\t\tnode = this;\n\t\twhile(node &amp;&amp; node.parentWidget) {\n\t\t\tif($tw.utils.hop(node.parentWidget.variables,name)) {\n\t\t\t\toutput.push(node.getVariable(name));\n\t\t\t}\n\t\t\tnode = node.parentWidget;\n\t\t}\n\t\tvar value = $tw.utils.hashString(output.join(\"\"));\n\t\tthis.qualifiers[name] = value;\n\t\treturn value;\n\t}\n};\n\n/*\nCompute the current values of the attributes of the widget. Returns a hashmap of the names of the attributes that have changed\n*/\nWidget.prototype.computeAttributes = function() {\n\tvar changedAttributes = {},\n\t\tself = this,\n\t\tvalue;\n\t$tw.utils.each(this.parseTreeNode.attributes,function(attribute,name) {\n\t\tif(attribute.type === \"filtered\") {\n\t\t\tvalue = self.wiki.filterTiddlers(attribute.filter,self)[0] || \"\";\n\t\t} else if(attribute.type === \"indirect\") {\n\t\t\tvalue = self.wiki.getTextReference(attribute.textReference,\"\",self.getVariable(\"currentTiddler\"));\n\t\t} else if(attribute.type === \"macro\") {\n\t\t\tvalue = self.getVariable(attribute.value.name,{params: attribute.value.params});\n\t\t} else { // String attribute\n\t\t\tvalue = attribute.value;\n\t\t}\n\t\t// Check whether the attribute has changed\n\t\tif(self.attributes[name] !== value) {\n\t\t\tself.attributes[name] = value;\n\t\t\tchangedAttributes[name] = true;\n\t\t}\n\t});\n\treturn changedAttributes;\n};\n\n/*\nCheck for the presence of an attribute\n*/\nWidget.prototype.hasAttribute = function(name) {\n\treturn $tw.utils.hop(this.attributes,name);\n};\n\n/*\nGet the value of an attribute\n*/\nWidget.prototype.getAttribute = function(name,defaultText) {\n\tif($tw.utils.hop(this.attributes,name)) {\n\t\treturn this.attributes[name];\n\t} else {\n\t\treturn defaultText;\n\t}\n};\n\n/*\nAssign the computed attributes of the widget to a domNode\noptions include:\nexcludeEventAttributes: ignores attributes whose name begins with \"on\"\n*/\nWidget.prototype.assignAttributes = function(domNode,options) {\n\toptions = options || {};\n\tvar self = this;\n\t$tw.utils.each(this.attributes,function(v,a) {\n\t\t// Check exclusions\n\t\tif(options.excludeEventAttributes &amp;&amp; a.substr(0,2) === \"on\") {\n\t\t\tv = undefined;\n\t\t}\n\t\tif(v !== undefined) {\n\t\t\tvar b = a.split(\":\");\n\t\t\t// Setting certain attributes can cause a DOM error (eg xmlns on the svg element)\n\t\t\ttry {\n\t\t\t\tif (b.length == 2 &amp;&amp; b[0] == \"xlink\"){\n\t\t\t\t\tdomNode.setAttributeNS(\"http://www.w3.org/1999/xlink\",b[1],v);\n\t\t\t\t} else {\n\t\t\t\t\tdomNode.setAttributeNS(null,a,v);\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t}\n\t\t}\n\t});\n};\n\n/*\nMake child widgets correspondng to specified parseTreeNodes\n*/\nWidget.prototype.makeChildWidgets = function(parseTreeNodes,options) {\n\toptions = options || {};\n\tthis.children = [];\n\tvar self = this;\n\t// Create set variable widgets for each variable\n\t$tw.utils.each(options.variables,function(value,name) {\n\t\tvar setVariableWidget = {\n\t\t\ttype: \"set\",\n\t\t\tattributes: {\n\t\t\t\tname: {type: \"string\", value: name},\n\t\t\t\tvalue: {type: \"string\", value: value}\n\t\t\t},\n\t\t\tchildren: parseTreeNodes\n\t\t};\n\t\tparseTreeNodes = [setVariableWidget];\n\t});\n\t$tw.utils.each(parseTreeNodes || (this.parseTreeNode &amp;&amp; this.parseTreeNode.children),function(childNode) {\n\t\tself.children.push(self.makeChildWidget(childNode));\n\t});\n};\n\n/*\nConstruct the widget object for a parse tree node\noptions include:\n\tvariables: optional hashmap of variables to wrap around the widget\n*/\nWidget.prototype.makeChildWidget = function(parseTreeNode,options) {\n\toptions = options || {};\n\tvar WidgetClass = this.widgetClasses[parseTreeNode.type];\n\tif(!WidgetClass) {\n\t\tWidgetClass = this.widgetClasses.text;\n\t\tparseTreeNode = {type: \"text\", text: \"Undefined widget '\" + parseTreeNode.type + \"'\"};\n\t}\n\t// Create set variable widgets for each variable\n\t$tw.utils.each(options.variables,function(value,name) {\n\t\tvar setVariableWidget = {\n\t\t\ttype: \"set\",\n\t\t\tattributes: {\n\t\t\t\tname: {type: \"string\", value: name},\n\t\t\t\tvalue: {type: \"string\", value: value}\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tparseTreeNode\n\t\t\t]\n\t\t};\n\t\tparseTreeNode = setVariableWidget;\n\t});\n\treturn new WidgetClass(parseTreeNode,{\n\t\twiki: this.wiki,\n\t\tparentWidget: this,\n\t\tdocument: this.document\n\t});\n};\n\n/*\nGet the next sibling of this widget\n*/\nWidget.prototype.nextSibling = function() {\n\tif(this.parentWidget) {\n\t\tvar index = this.parentWidget.children.indexOf(this);\n\t\tif(index !== -1 &amp;&amp; index &lt; this.parentWidget.children.length-1) {\n\t\t\treturn this.parentWidget.children[index+1];\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nGet the previous sibling of this widget\n*/\nWidget.prototype.previousSibling = function() {\n\tif(this.parentWidget) {\n\t\tvar index = this.parentWidget.children.indexOf(this);\n\t\tif(index !== -1 &amp;&amp; index &gt; 0) {\n\t\t\treturn this.parentWidget.children[index-1];\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nRender the children of this widget into the DOM\n*/\nWidget.prototype.renderChildren = function(parent,nextSibling) {\n\tvar children = this.children;\n\tfor(var i = 0; i &lt; children.length; i++) {\n\t\tchildren[i].render(parent,nextSibling);\n\t};\n};\n\n/*\nAdd a list of event listeners from an array [{type:,handler:},...]\n*/\nWidget.prototype.addEventListeners = function(listeners) {\n\tvar self = this;\n\t$tw.utils.each(listeners,function(listenerInfo) {\n\t\tself.addEventListener(listenerInfo.type,listenerInfo.handler);\n\t});\n};\n\n/*\nAdd an event listener\n*/\nWidget.prototype.addEventListener = function(type,handler) {\n\tvar self = this;\n\tif(typeof handler === \"string\") { // The handler is a method name on this widget\n\t\tthis.eventListeners[type] = function(event) {\n\t\t\treturn self[handler].call(self,event);\n\t\t};\n\t} else { // The handler is a function\n\t\tthis.eventListeners[type] = function(event) {\n\t\t\treturn handler.call(self,event);\n\t\t};\n\t}\n};\n\n/*\nDispatch an event to a widget. If the widget doesn't handle the event then it is also dispatched to the parent widget\n*/\nWidget.prototype.dispatchEvent = function(event) {\n\tevent.widget = event.widget || this;\n\t// Dispatch the event if this widget handles it\n\tvar listener = this.eventListeners[event.type];\n\tif(listener) {\n\t\t// Don't propagate the event if the listener returned false\n\t\tif(!listener(event)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t// Dispatch the event to the parent widget\n\tif(this.parentWidget) {\n\t\treturn this.parentWidget.dispatchEvent(event);\n\t}\n\treturn true;\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nWidget.prototype.refresh = function(changedTiddlers) {\n\treturn this.refreshChildren(changedTiddlers);\n};\n\n/*\nRebuild a previously rendered widget\n*/\nWidget.prototype.refreshSelf = function() {\n\tvar nextSibling = this.findNextSiblingDomNode();\n\tthis.removeChildDomNodes();\n\tthis.render(this.parentDomNode,nextSibling);\n};\n\n/*\nRefresh all the children of a widget\n*/\nWidget.prototype.refreshChildren = function(changedTiddlers) {\n\tvar children = this.children,\n\t\trefreshed = false;\n\tfor (var i = 0; i &lt; children.length; i++) {\n\t\trefreshed = children[i].refresh(changedTiddlers) || refreshed;\n\t}\n\treturn refreshed;\n};\n\n/*\nFind the next sibling in the DOM to this widget. This is done by scanning the widget tree through all next siblings and their descendents that share the same parent DOM node\n*/\nWidget.prototype.findNextSiblingDomNode = function(startIndex) {\n\t// Refer to this widget by its index within its parents children\n\tvar parent = this.parentWidget,\n\t\tindex = startIndex !== undefined ? startIndex : parent.children.indexOf(this);\nif(index === -1) {\n\tthrow \"node not found in parents children\";\n}\n\t// Look for a DOM node in the later siblings\n\twhile(++index &lt; parent.children.length) {\n\t\tvar domNode = parent.children[index].findFirstDomNode();\n\t\tif(domNode) {\n\t\t\treturn domNode;\n\t\t}\n\t}\n\t// Go back and look for later siblings of our parent if it has the same parent dom node\n\tvar grandParent = parent.parentWidget;\n\tif(grandParent &amp;&amp; parent.parentDomNode === this.parentDomNode) {\n\t\tindex = grandParent.children.indexOf(parent);\n\t\tif(index !== -1) {\n\t\t\treturn parent.findNextSiblingDomNode(index);\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nFind the first DOM node generated by a widget or its children\n*/\nWidget.prototype.findFirstDomNode = function() {\n\t// Return the first dom node of this widget, if we've got one\n\tif(this.domNodes.length &gt; 0) {\n\t\treturn this.domNodes[0];\n\t}\n\t// Otherwise, recursively call our children\n\tfor(var t=0; t&lt;this.children.length; t++) {\n\t\tvar domNode = this.children[t].findFirstDomNode();\n\t\tif(domNode) {\n\t\t\treturn domNode;\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nRemove any DOM nodes created by this widget or its children\n*/\nWidget.prototype.removeChildDomNodes = function() {\n\t// If this widget has directly created DOM nodes, delete them and exit. This assumes that any child widgets are contained within the created DOM nodes, which would normally be the case\n\tif(this.domNodes.length &gt; 0) {\n\t\t$tw.utils.each(this.domNodes,function(domNode) {\n\t\t\tdomNode.parentNode.removeChild(domNode);\n\t\t});\n\t\tthis.domNodes = [];\n\t} else {\n\t\t// Otherwise, ask the child widgets to delete their DOM nodes\n\t\t$tw.utils.each(this.children,function(childWidget) {\n\t\t\tchildWidget.removeChildDomNodes();\n\t\t});\n\t}\n};\n\n/*\nInvoke the action widgets that are descendents of the current widget.\n*/\nWidget.prototype.invokeActions = function(triggeringWidget,event) {\n\tvar handled = false;\n\t// For each child widget\n\tfor(var t=0; t&lt;this.children.length; t++) {\n\t\tvar child = this.children[t],\n\t\t\tchildIsActionWidget = !!child.invokeAction,\n\t\t\tactionRefreshPolicy = child.getVariable(\"tv-action-refresh-policy\");\n\t\t// Refresh the child if required\n\t\tif(childIsActionWidget || actionRefreshPolicy === \"always\") {\n\t\t\tchild.refreshSelf();\n\t\t}\n\t\t// Invoke the child if it is an action widget\n\t\tif(childIsActionWidget) {\n\t\t\tif(child.invokeAction(triggeringWidget,event)) {\n\t\t\t\thandled = true;\n\t\t\t}\n\t\t}\n\t\t// Propagate through through the child if it permits it\n\t\tif(child.allowActionPropagation() &amp;&amp; child.invokeActions(triggeringWidget,event)) {\n\t\t\thandled = true;\n\t\t}\n\t}\n\treturn handled;\n};\n\n/*\nInvoke the action widgets defined in a string\n*/\nWidget.prototype.invokeActionString = function(actions,triggeringWidget,event,variables) {\n\tactions = actions || \"\";\n\tvar parser = this.wiki.parseText(\"text/vnd.tiddlywiki\",actions,{\n\t\t\tparentWidget: this,\n\t\t\tdocument: this.document\n\t\t}),\n\t\twidgetNode = this.wiki.makeWidget(parser,{\n\t\t\tparentWidget: this,\n\t\t\tdocument: this.document,\n\t\t\tvariables: variables\n\t\t});\n\tvar container = this.document.createElement(\"div\");\n\twidgetNode.render(container,null);\n\treturn widgetNode.invokeActions(this,event);\n};\n\n/*\nExecute action tiddlers by tag\n*/\nWidget.prototype.invokeActionsByTag = function(tag,event,variables) {\n\tvar self = this;\n\t$tw.utils.each(self.wiki.filterTiddlers(\"[all[shadows+tiddlers]tag[\" + tag + \"]!has[draft.of]]\"),function(title) {\n\t\tself.invokeActionString(self.wiki.getTiddlerText(title),self,event,variables);\n\t});\n};\n\nWidget.prototype.allowActionPropagation = function() {\n\treturn true;\n};\n\nexports.widget = Widget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/widgets/wikify.js":{"title":"$:/core/modules/widgets/wikify.js","text":"/*\\\ntitle: $:/core/modules/widgets/wikify.js\ntype: application/javascript\nmodule-type: widget\n\nWidget to wikify text into a variable\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\nvar WikifyWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nWikifyWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nWikifyWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\n/*\nCompute the internal state of the widget\n*/\nWikifyWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.wikifyName = this.getAttribute(\"name\");\n\tthis.wikifyText = this.getAttribute(\"text\");\n\tthis.wikifyType = this.getAttribute(\"type\");\n\tthis.wikifyMode = this.getAttribute(\"mode\",\"block\");\n\tthis.wikifyOutput = this.getAttribute(\"output\",\"text\");\n\t// Create the parse tree\n\tthis.wikifyParser = this.wiki.parseText(this.wikifyType,this.wikifyText,{\n\t\t\tparseAsInline: this.wikifyMode === \"inline\"\n\t\t});\n\t// Create the widget tree \n\tthis.wikifyWidgetNode = this.wiki.makeWidget(this.wikifyParser,{\n\t\t\tdocument: $tw.fakeDocument,\n\t\t\tparentWidget: this\n\t\t});\n\t// Render the widget tree to the container\n\tthis.wikifyContainer = $tw.fakeDocument.createElement(\"div\");\n\tthis.wikifyWidgetNode.render(this.wikifyContainer,null);\n\tthis.wikifyResult = this.getResult();\n\t// Set context variable\n\tthis.setVariable(this.wikifyName,this.wikifyResult);\n\t// Construct the child widgets\n\tthis.makeChildWidgets();\n};\n\n/*\nReturn the result string\n*/\nWikifyWidget.prototype.getResult = function() {\n\tvar result;\n\tswitch(this.wikifyOutput) {\n\t\tcase \"text\":\n\t\t\tresult = this.wikifyContainer.textContent;\n\t\t\tbreak;\n\t\tcase \"formattedtext\":\n\t\t\tresult = this.wikifyContainer.formattedTextContent;\n\t\t\tbreak;\n\t\tcase \"html\":\n\t\t\tresult = this.wikifyContainer.innerHTML;\n\t\t\tbreak;\n\t\tcase \"parsetree\":\n\t\t\tresult = JSON.stringify(this.wikifyParser.tree,0,$tw.config.preferences.jsonSpaces);\n\t\t\tbreak;\n\t\tcase \"widgettree\":\n\t\t\tresult = JSON.stringify(this.getWidgetTree(),0,$tw.config.preferences.jsonSpaces);\n\t\t\tbreak;\n\t}\n\treturn result;\n};\n\n/*\nReturn a string of the widget tree\n*/\nWikifyWidget.prototype.getWidgetTree = function() {\n\tvar copyNode = function(widgetNode,resultNode) {\n\t\t\tvar type = widgetNode.parseTreeNode.type;\n\t\t\tresultNode.type = type;\n\t\t\tswitch(type) {\n\t\t\t\tcase \"element\":\n\t\t\t\t\tresultNode.tag = widgetNode.parseTreeNode.tag;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text\":\n\t\t\t\t\tresultNode.text = widgetNode.parseTreeNode.text;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(Object.keys(widgetNode.attributes || {}).length &gt; 0) {\n\t\t\t\tresultNode.attributes = {};\n\t\t\t\t$tw.utils.each(widgetNode.attributes,function(attr,attrName) {\n\t\t\t\t\tresultNode.attributes[attrName] = widgetNode.getAttribute(attrName);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(Object.keys(widgetNode.children || {}).length &gt; 0) {\n\t\t\t\tresultNode.children = [];\n\t\t\t\t$tw.utils.each(widgetNode.children,function(widgetChildNode) {\n\t\t\t\t\tvar node = {};\n\t\t\t\t\tresultNode.children.push(node);\n\t\t\t\t\tcopyNode(widgetChildNode,node);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tresults = {};\n\tcopyNode(this.wikifyWidgetNode,results);\n\treturn results;\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nWikifyWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\t// Refresh ourselves entirely if any of our attributes have changed\n\tif(changedAttributes.name || changedAttributes.text || changedAttributes.type || changedAttributes.mode || changedAttributes.output) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\t// Refresh the widget tree\n\t\tif(this.wikifyWidgetNode.refresh(changedTiddlers)) {\n\t\t\t// Check if there was any change\n\t\t\tvar result = this.getResult();\n\t\t\tif(result !== this.wikifyResult) {\n\t\t\t\t// If so, save the change\n\t\t\t\tthis.wikifyResult = result;\n\t\t\t\tthis.setVariable(this.wikifyName,this.wikifyResult);\n\t\t\t\t// Refresh each of our child widgets\n\t\t\t\t$tw.utils.each(this.children,function(childWidget) {\n\t\t\t\t\tchildWidget.refreshSelf();\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t// Just refresh the children\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports.wikify = WikifyWidget;\n\n})();\n","type":"application/javascript","module-type":"widget"},"$:/core/modules/wiki-bulkops.js":{"title":"$:/core/modules/wiki-bulkops.js","text":"/*\\\ntitle: $:/core/modules/wiki-bulkops.js\ntype: application/javascript\nmodule-type: wikimethod\n\nBulk tiddler operations such as rename.\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nRename a tiddler, and relink any tags or lists that reference it.\n*/\nfunction renameTiddler(fromTitle,toTitle,options) {\n\tfromTitle = (fromTitle || \"\").trim();\n\ttoTitle = (toTitle || \"\").trim();\n\toptions = options || {};\n\tif(fromTitle &amp;&amp; toTitle &amp;&amp; fromTitle !== toTitle) {\n\t\t// Rename the tiddler itself\n\t\tvar oldTiddler = this.getTiddler(fromTitle),\n\t\t\tnewTiddler = new $tw.Tiddler(oldTiddler,{title: toTitle},this.getModificationFields());\n\t\tnewTiddler = $tw.hooks.invokeHook(\"th-renaming-tiddler\",newTiddler,oldTiddler);\n\t\tthis.addTiddler(newTiddler);\n\t\tthis.deleteTiddler(fromTitle);\n\t\t// Rename any tags or lists that reference it\n\t\tthis.relinkTiddler(fromTitle,toTitle,options)\n\t}\n}\n\n/*\nRelink any tags or lists that reference a given tiddler\n*/\nfunction relinkTiddler(fromTitle,toTitle,options) {\n\tvar self = this;\n\tfromTitle = (fromTitle || \"\").trim();\n\ttoTitle = (toTitle || \"\").trim();\n\toptions = options || {};\n\tif(fromTitle &amp;&amp; toTitle &amp;&amp; fromTitle !== toTitle) {\n\t\tthis.each(function(tiddler,title) {\n\t\t\tvar type = tiddler.fields.type || \"\";\n\t\t\t// Don't touch plugins or JavaScript modules\n\t\t\tif(!tiddler.fields[\"plugin-type\"] &amp;&amp; type !== \"application/javascript\") {\n\t\t\t\tvar tags = tiddler.fields.tags ? tiddler.fields.tags.slice(0) : undefined,\n\t\t\t\t\tlist = tiddler.fields.list ? tiddler.fields.list.slice(0) : undefined,\n\t\t\t\t\tisModified = false;\n\t\t\t\tif(!options.dontRenameInTags) {\n\t\t\t\t\t// Rename tags\n\t\t\t\t\t$tw.utils.each(tags,function (title,index) {\n\t\t\t\t\t\tif(title === fromTitle) {\nconsole.log(\"Renaming tag '\" + tags[index] + \"' to '\" + toTitle + \"' of tiddler '\" + tiddler.fields.title + \"'\");\n\t\t\t\t\t\t\ttags[index] = toTitle;\n\t\t\t\t\t\t\tisModified = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(!options.dontRenameInLists) {\n\t\t\t\t\t// Rename lists\n\t\t\t\t\t$tw.utils.each(list,function (title,index) {\n\t\t\t\t\t\tif(title === fromTitle) {\nconsole.log(\"Renaming list item '\" + list[index] + \"' to '\" + toTitle + \"' of tiddler '\" + tiddler.fields.title + \"'\");\n\t\t\t\t\t\t\tlist[index] = toTitle;\n\t\t\t\t\t\t\tisModified = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(isModified) {\n\t\t\t\t\tvar newTiddler = new $tw.Tiddler(tiddler,{tags: tags, list: list},self.getModificationFields())\n\t\t\t\t\tnewTiddler = $tw.hooks.invokeHook(\"th-relinking-tiddler\",newTiddler,tiddler);\n\t\t\t\t\tself.addTiddler(newTiddler);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\nexports.renameTiddler = renameTiddler;\nexports.relinkTiddler = relinkTiddler;\n\n})();\n","type":"application/javascript","module-type":"wikimethod"},"$:/core/modules/wiki.js":{"title":"$:/core/modules/wiki.js","text":"/*\\\ntitle: $:/core/modules/wiki.js\ntype: application/javascript\nmodule-type: wikimethod\n\nExtension methods for the $tw.Wiki object\n\nAdds the following properties to the wiki object:\n\n* `eventListeners` is a hashmap by type of arrays of listener functions\n* `changedTiddlers` is a hashmap describing changes to named tiddlers since wiki change events were last dispatched. Each entry is a hashmap containing two fields:\n\tmodified: true/false\n\tdeleted: true/false\n* `changeCount` is a hashmap by tiddler title containing a numerical index that starts at zero and is incremented each time a tiddler is created changed or deleted\n* `caches` is a hashmap by tiddler title containing a further hashmap of named cache objects. Caches are automatically cleared when a tiddler is modified or deleted\n* `globalCache` is a hashmap by cache name of cache objects that are cleared whenever any tiddler change occurs\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar widget = require(\"$:/core/modules/widgets/widget.js\");\n\nvar USER_NAME_TITLE = \"$:/status/UserName\",\n\tTIMESTAMP_DISABLE_TITLE = \"$:/config/TimestampDisable\";\n\n/*\nAdd available indexers to this wiki\n*/\nexports.addIndexersToWiki = function() {\n\tvar self = this;\n\t$tw.utils.each($tw.modules.applyMethods(\"indexer\"),function(Indexer,name) {\n\t\tself.addIndexer(new Indexer(self),name);\n\t});\n};\n\n/*\nGet the value of a text reference. Text references can have any of these forms:\n\t&lt;tiddlertitle&gt;\n\t&lt;tiddlertitle&gt;!!&lt;fieldname&gt;\n\t!!&lt;fieldname&gt; - specifies a field of the current tiddlers\n\t&lt;tiddlertitle&gt;##&lt;index&gt;\n*/\nexports.getTextReference = function(textRef,defaultText,currTiddlerTitle) {\n\tvar tr = $tw.utils.parseTextReference(textRef),\n\t\ttitle = tr.title || currTiddlerTitle;\n\tif(tr.field) {\n\t\tvar tiddler = this.getTiddler(title);\n\t\tif(tr.field === \"title\") { // Special case so we can return the title of a non-existent tiddler\n\t\t\treturn title;\n\t\t} else if(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,tr.field)) {\n\t\t\treturn tiddler.getFieldString(tr.field);\n\t\t} else {\n\t\t\treturn defaultText;\n\t\t}\n\t} else if(tr.index) {\n\t\treturn this.extractTiddlerDataItem(title,tr.index,defaultText);\n\t} else {\n\t\treturn this.getTiddlerText(title,defaultText);\n\t}\n};\n\nexports.setTextReference = function(textRef,value,currTiddlerTitle) {\n\tvar tr = $tw.utils.parseTextReference(textRef),\n\t\ttitle = tr.title || currTiddlerTitle;\n\tthis.setText(title,tr.field,tr.index,value);\n};\n\nexports.setText = function(title,field,index,value,options) {\n\toptions = options || {};\n\tvar creationFields = options.suppressTimestamp ? {} : this.getCreationFields(),\n\t\tmodificationFields = options.suppressTimestamp ? {} : this.getModificationFields();\n\t// Check if it is a reference to a tiddler field\n\tif(index) {\n\t\tvar data = this.getTiddlerData(title,Object.create(null));\n\t\tif(value !== undefined) {\n\t\t\tdata[index] = value;\n\t\t} else {\n\t\t\tdelete data[index];\n\t\t}\n\t\tthis.setTiddlerData(title,data,modificationFields);\n\t} else {\n\t\tvar tiddler = this.getTiddler(title),\n\t\t\tfields = {title: title};\n\t\tfields[field || \"text\"] = value;\n\t\tthis.addTiddler(new $tw.Tiddler(creationFields,tiddler,fields,modificationFields));\n\t}\n};\n\nexports.deleteTextReference = function(textRef,currTiddlerTitle) {\n\tvar tr = $tw.utils.parseTextReference(textRef),\n\t\ttitle,tiddler,fields;\n\t// Check if it is a reference to a tiddler\n\tif(tr.title &amp;&amp; !tr.field) {\n\t\tthis.deleteTiddler(tr.title);\n\t// Else check for a field reference\n\t} else if(tr.field) {\n\t\ttitle = tr.title || currTiddlerTitle;\n\t\ttiddler = this.getTiddler(title);\n\t\tif(tiddler &amp;&amp; $tw.utils.hop(tiddler.fields,tr.field)) {\n\t\t\tfields = Object.create(null);\n\t\t\tfields[tr.field] = undefined;\n\t\t\tthis.addTiddler(new $tw.Tiddler(tiddler,fields,this.getModificationFields()));\n\t\t}\n\t}\n};\n\nexports.addEventListener = function(type,listener) {\n\tthis.eventListeners = this.eventListeners || {};\n\tthis.eventListeners[type] = this.eventListeners[type]  || [];\n\tthis.eventListeners[type].push(listener);\n};\n\nexports.removeEventListener = function(type,listener) {\n\tvar listeners = this.eventListeners[type];\n\tif(listeners) {\n\t\tvar p = listeners.indexOf(listener);\n\t\tif(p !== -1) {\n\t\t\tlisteners.splice(p,1);\n\t\t}\n\t}\n};\n\nexports.dispatchEvent = function(type /*, args */) {\n\tvar args = Array.prototype.slice.call(arguments,1),\n\t\tlisteners = this.eventListeners[type];\n\tif(listeners) {\n\t\tfor(var p=0; p&lt;listeners.length; p++) {\n\t\t\tvar listener = listeners[p];\n\t\t\tlistener.apply(listener,args);\n\t\t}\n\t}\n};\n\n/*\nCauses a tiddler to be marked as changed, incrementing the change count, and triggers event handlers.\nThis method should be called after the changes it describes have been made to the wiki.tiddlers[] array.\n\ttitle: Title of tiddler\n\tisDeleted: defaults to false (meaning the tiddler has been created or modified),\n\t\ttrue if the tiddler has been deleted\n*/\nexports.enqueueTiddlerEvent = function(title,isDeleted) {\n\t// Record the touch in the list of changed tiddlers\n\tthis.changedTiddlers = this.changedTiddlers || Object.create(null);\n\tthis.changedTiddlers[title] = this.changedTiddlers[title] || Object.create(null);\n\tthis.changedTiddlers[title][isDeleted ? \"deleted\" : \"modified\"] = true;\n\t// Increment the change count\n\tthis.changeCount = this.changeCount || Object.create(null);\n\tif($tw.utils.hop(this.changeCount,title)) {\n\t\tthis.changeCount[title]++;\n\t} else {\n\t\tthis.changeCount[title] = 1;\n\t}\n\t// Trigger events\n\tthis.eventListeners = this.eventListeners || {};\n\tif(!this.eventsTriggered) {\n\t\tvar self = this;\n\t\t$tw.utils.nextTick(function() {\n\t\t\tvar changes = self.changedTiddlers;\n\t\t\tself.changedTiddlers = Object.create(null);\n\t\t\tself.eventsTriggered = false;\n\t\t\tif($tw.utils.count(changes) &gt; 0) {\n\t\t\t\tself.dispatchEvent(\"change\",changes);\n\t\t\t}\n\t\t});\n\t\tthis.eventsTriggered = true;\n\t}\n};\n\nexports.getSizeOfTiddlerEventQueue = function() {\n\treturn $tw.utils.count(this.changedTiddlers);\n};\n\nexports.clearTiddlerEventQueue = function() {\n\tthis.changedTiddlers = Object.create(null);\n\tthis.changeCount = Object.create(null);\n};\n\nexports.getChangeCount = function(title) {\n\tthis.changeCount = this.changeCount || Object.create(null);\n\tif($tw.utils.hop(this.changeCount,title)) {\n\t\treturn this.changeCount[title];\n\t} else {\n\t\treturn 0;\n\t}\n};\n\n/*\nGenerate an unused title from the specified base\noptions.prefix must be a string\n*/\nexports.generateNewTitle = function(baseTitle,options) {\n\toptions = options || {};\n\tvar c = 0,\n\t\ttitle = baseTitle,\n\t\ttemplate = options.template,\n\t\tprefix = (typeof(options.prefix) === \"string\") ? options.prefix : \" \";\n\tif (template) {\n\t\t// \"count\" is important to avoid an endless loop in while(...)!!\n\t\ttemplate = (/\\$count:?(\\d+)?\\$/i.test(template)) ? template : template + \"$count$\";\n\t\ttitle = $tw.utils.formatTitleString(template,{\"base\":baseTitle,\"separator\":prefix,\"counter\":c});\n\t\twhile(this.tiddlerExists(title) || this.isShadowTiddler(title) || this.findDraft(title)) {\n\t\t\ttitle = $tw.utils.formatTitleString(template,{\"base\":baseTitle,\"separator\":prefix,\"counter\":(++c)});\n\t\t}\n\t} else {\n\t\twhile(this.tiddlerExists(title) || this.isShadowTiddler(title) || this.findDraft(title)) {\n\t\t\ttitle = baseTitle + prefix + (++c);\n\t\t}\n\t}\n\treturn title;\n};\n\nexports.isSystemTiddler = function(title) {\n\treturn title &amp;&amp; title.indexOf(\"$:/\") === 0;\n};\n\nexports.isTemporaryTiddler = function(title) {\n\treturn title &amp;&amp; title.indexOf(\"$:/temp/\") === 0;\n};\n\nexports.isVolatileTiddler = function(title) {\n\treturn title &amp;&amp; title.indexOf(\"$:/temp/volatile/\") === 0;\n};\n\nexports.isImageTiddler = function(title) {\n\tvar tiddler = this.getTiddler(title);\n\tif(tiddler) {\n\t\tvar contentTypeInfo = $tw.config.contentTypeInfo[tiddler.fields.type || \"text/vnd.tiddlywiki\"];\n\t\treturn !!contentTypeInfo &amp;&amp; contentTypeInfo.flags.indexOf(\"image\") !== -1;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexports.isBinaryTiddler = function(title) {\n\tvar tiddler = this.getTiddler(title);\n\tif(tiddler) {\n\t\tvar contentTypeInfo = $tw.config.contentTypeInfo[tiddler.fields.type || \"text/vnd.tiddlywiki\"];\n\t\treturn !!contentTypeInfo &amp;&amp; contentTypeInfo.encoding === \"base64\";\n\t} else {\n\t\treturn null;\n\t}\n};\n\n/*\nLike addTiddler() except it will silently reject any plugin tiddlers that are older than the currently loaded version. Returns true if the tiddler was imported\n*/\nexports.importTiddler = function(tiddler) {\n\tvar existingTiddler = this.getTiddler(tiddler.fields.title);\n\t// Check if we're dealing with a plugin\n\tif(tiddler &amp;&amp; tiddler.hasField(\"plugin-type\") &amp;&amp; tiddler.hasField(\"version\") &amp;&amp; existingTiddler &amp;&amp; existingTiddler.hasField(\"plugin-type\") &amp;&amp; existingTiddler.hasField(\"version\")) {\n\t\t// Reject the incoming plugin if it is older\n\t\tif(!$tw.utils.checkVersions(tiddler.fields.version,existingTiddler.fields.version)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t// Fall through to adding the tiddler\n\tthis.addTiddler(tiddler);\n\treturn true;\n};\n\n/*\nReturn a hashmap of the fields that should be set when a tiddler is created\n*/\nexports.getCreationFields = function() {\n\tif(this.getTiddlerText(TIMESTAMP_DISABLE_TITLE,\"\").toLowerCase() !== \"yes\") {\n\t\tvar fields = {\n\t\t\t\tcreated: new Date()\n\t\t\t},\n\t\t\tcreator = this.getTiddlerText(USER_NAME_TITLE);\n\t\tif(creator) {\n\t\t\tfields.creator = creator;\n\t\t}\n\t\treturn fields;\n\t} else {\n\t\treturn {};\n\t}\n};\n\n/*\nReturn a hashmap of the fields that should be set when a tiddler is modified\n*/\nexports.getModificationFields = function() {\n\tif(this.getTiddlerText(TIMESTAMP_DISABLE_TITLE,\"\").toLowerCase() !== \"yes\") {\n\t\tvar fields = Object.create(null),\n\t\t\tmodifier = this.getTiddlerText(USER_NAME_TITLE);\n\t\tfields.modified = new Date();\n\t\tif(modifier) {\n\t\t\tfields.modifier = modifier;\n\t\t}\n\t\treturn fields;\n\t} else {\n\t\treturn {};\n\t}\n};\n\n/*\nReturn a sorted array of tiddler titles.  Options include:\nsortField: field to sort by\nexcludeTag: tag to exclude\nincludeSystem: whether to include system tiddlers (defaults to false)\n*/\nexports.getTiddlers = function(options) {\n\toptions = options || Object.create(null);\n\tvar self = this,\n\t\tsortField = options.sortField || \"title\",\n\t\ttiddlers = [], t, titles = [];\n\tthis.each(function(tiddler,title) {\n\t\tif(options.includeSystem || !self.isSystemTiddler(title)) {\n\t\t\tif(!options.excludeTag || !tiddler.hasTag(options.excludeTag)) {\n\t\t\t\ttiddlers.push(tiddler);\n\t\t\t}\n\t\t}\n\t});\n\ttiddlers.sort(function(a,b) {\n\t\tvar aa = a.fields[sortField].toLowerCase() || \"\",\n\t\t\tbb = b.fields[sortField].toLowerCase() || \"\";\n\t\tif(aa &lt; bb) {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\tif(aa &gt; bb) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t});\n\tfor(t=0; t&lt;tiddlers.length; t++) {\n\t\ttitles.push(tiddlers[t].fields.title);\n\t}\n\treturn titles;\n};\n\nexports.countTiddlers = function(excludeTag) {\n\tvar tiddlers = this.getTiddlers({excludeTag: excludeTag});\n\treturn $tw.utils.count(tiddlers);\n};\n\n/*\nReturns a function iterator(callback) that iterates through the specified titles, and invokes the callback with callback(tiddler,title)\n*/\nexports.makeTiddlerIterator = function(titles) {\n\tvar self = this;\n\tif(!$tw.utils.isArray(titles)) {\n\t\ttitles = Object.keys(titles);\n\t} else {\n\t\ttitles = titles.slice(0);\n\t}\n\treturn function(callback) {\n\t\ttitles.forEach(function(title) {\n\t\t\tcallback(self.getTiddler(title),title);\n\t\t});\n\t};\n};\n\n/*\nSort an array of tiddler titles by a specified field\n\ttitles: array of titles (sorted in place)\n\tsortField: name of field to sort by\n\tisDescending: true if the sort should be descending\n\tisCaseSensitive: true if the sort should consider upper and lower case letters to be different\n*/\nexports.sortTiddlers = function(titles,sortField,isDescending,isCaseSensitive,isNumeric,isAlphaNumeric) {\n\tvar self = this;\n\ttitles.sort(function(a,b) {\n\t\tvar x,y,\n\t\t\tcompareNumbers = function(x,y) {\n\t\t\t\tvar result = \n\t\t\t\t\tisNaN(x) &amp;&amp; !isNaN(y) ? (isDescending ? -1 : 1) :\n\t\t\t\t\t!isNaN(x) &amp;&amp; isNaN(y) ? (isDescending ? 1 : -1) :\n\t\t\t\t\t\t\t\t\t\t\t(isDescending ? y - x :  x - y);\n\t\t\t\treturn result;\n\t\t\t};\n\t\tif(sortField !== \"title\") {\n\t\t\tvar tiddlerA = self.getTiddler(a),\n\t\t\t\ttiddlerB = self.getTiddler(b);\n\t\t\tif(tiddlerA) {\n\t\t\t\ta = tiddlerA.getFieldString(sortField) || \"\";\n\t\t\t} else {\n\t\t\t\ta = \"\";\n\t\t\t}\n\t\t\tif(tiddlerB) {\n\t\t\t\tb = tiddlerB.getFieldString(sortField) || \"\";\n\t\t\t} else {\n\t\t\t\tb = \"\";\n\t\t\t}\n\t\t}\n\t\tx = Number(a);\n\t\ty = Number(b);\n\t\tif(isNumeric &amp;&amp; (!isNaN(x) || !isNaN(y))) {\n\t\t\treturn compareNumbers(x,y);\n\t\t} else if($tw.utils.isDate(a) &amp;&amp; $tw.utils.isDate(b)) {\n\t\t\treturn isDescending ? b - a : a - b;\n\t\t} else if(isAlphaNumeric) {\n\t\t\treturn isDescending ? b.localeCompare(a,undefined,{numeric: true,sensitivity: \"base\"}) : a.localeCompare(b,undefined,{numeric: true,sensitivity: \"base\"});\n\t\t} else {\n\t\t\ta = String(a);\n\t\t\tb = String(b);\n\t\t\tif(!isCaseSensitive) {\n\t\t\t\ta = a.toLowerCase();\n\t\t\t\tb = b.toLowerCase();\n\t\t\t}\n\t\t\treturn isDescending ? b.localeCompare(a) : a.localeCompare(b);\n\t\t}\n\t});\n};\n\n/*\nFor every tiddler invoke a callback(title,tiddler) with `this` set to the wiki object. Options include:\nsortField: field to sort by\nexcludeTag: tag to exclude\nincludeSystem: whether to include system tiddlers (defaults to false)\n*/\nexports.forEachTiddler = function(/* [options,]callback */) {\n\tvar arg = 0,\n\t\toptions = arguments.length &gt;= 2 ? arguments[arg++] : {},\n\t\tcallback = arguments[arg++],\n\t\ttitles = this.getTiddlers(options),\n\t\tt, tiddler;\n\tfor(t=0; t&lt;titles.length; t++) {\n\t\ttiddler = this.getTiddler(titles[t]);\n\t\tif(tiddler) {\n\t\t\tcallback.call(this,tiddler.fields.title,tiddler);\n\t\t}\n\t}\n};\n\n/*\nReturn an array of tiddler titles that are directly linked within the given parse tree\n */\nexports.extractLinks = function(parseTreeRoot) {\n\t// Count up the links\n\tvar links = [],\n\t\tcheckParseTree = function(parseTree) {\n\t\t\tfor(var t=0; t&lt;parseTree.length; t++) {\n\t\t\t\tvar parseTreeNode = parseTree[t];\n\t\t\t\tif(parseTreeNode.type === \"link\" &amp;&amp; parseTreeNode.attributes.to &amp;&amp; parseTreeNode.attributes.to.type === \"string\") {\n\t\t\t\t\tvar value = parseTreeNode.attributes.to.value;\n\t\t\t\t\tif(links.indexOf(value) === -1) {\n\t\t\t\t\t\tlinks.push(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(parseTreeNode.children) {\n\t\t\t\t\tcheckParseTree(parseTreeNode.children);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\tcheckParseTree(parseTreeRoot);\n\treturn links;\n};\n\n/*\nReturn an array of tiddler titles that are directly linked from the specified tiddler\n*/\nexports.getTiddlerLinks = function(title) {\n\tvar self = this;\n\t// We'll cache the links so they only get computed if the tiddler changes\n\treturn this.getCacheForTiddler(title,\"links\",function() {\n\t\t// Parse the tiddler\n\t\tvar parser = self.parseTiddler(title);\n\t\tif(parser) {\n\t\t\treturn self.extractLinks(parser.tree);\n\t\t}\n\t\treturn [];\n\t});\n};\n\n/*\nReturn an array of tiddler titles that link to the specified tiddler\n*/\nexports.getTiddlerBacklinks = function(targetTitle) {\n\tvar self = this,\n\t\tbacklinksIndexer = this.getIndexer(\"BacklinksIndexer\"),\n\t\tbacklinks = backlinksIndexer &amp;&amp; backlinksIndexer.lookup(targetTitle);\n\n\tif(!backlinks) {\n\t\tbacklinks = [];\n\t\tthis.forEachTiddler(function(title,tiddler) {\n\t\t\tvar links = self.getTiddlerLinks(title);\n\t\t\tif(links.indexOf(targetTitle) !== -1) {\n\t\t\t\tbacklinks.push(title);\n\t\t\t}\n\t\t});\n\t}\n\treturn backlinks;\n};\n\n/*\nReturn a hashmap of tiddler titles that are referenced but not defined. Each value is the number of times the missing tiddler is referenced\n*/\nexports.getMissingTitles = function() {\n\tvar self = this,\n\t\tmissing = [];\n// We should cache the missing tiddler list, even if we recreate it every time any tiddler is modified\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tvar links = self.getTiddlerLinks(title);\n\t\t$tw.utils.each(links,function(link) {\n\t\t\tif((!self.tiddlerExists(link) &amp;&amp; !self.isShadowTiddler(link)) &amp;&amp; missing.indexOf(link) === -1) {\n\t\t\t\tmissing.push(link);\n\t\t\t}\n\t\t});\n\t});\n\treturn missing;\n};\n\nexports.getOrphanTitles = function() {\n\tvar self = this,\n\t\torphans = this.getTiddlers();\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tvar links = self.getTiddlerLinks(title);\n\t\t$tw.utils.each(links,function(link) {\n\t\t\tvar p = orphans.indexOf(link);\n\t\t\tif(p !== -1) {\n\t\t\t\torphans.splice(p,1);\n\t\t\t}\n\t\t});\n\t});\n\treturn orphans; // Todo\n};\n\n/*\nRetrieves a list of the tiddler titles that are tagged with a given tag\n*/\nexports.getTiddlersWithTag = function(tag) {\n\t// Try to use the indexer\n\tvar self = this,\n\t\ttagIndexer = this.getIndexer(\"TagIndexer\"),\n\t\tresults = tagIndexer &amp;&amp; tagIndexer.subIndexers[3].lookup(tag);\n\tif(!results) {\n\t\t// If not available, perform a manual scan\n\t\tresults = this.getGlobalCache(\"taglist-\" + tag,function() {\n\t\t\tvar tagmap = self.getTagMap();\n\t\t\treturn self.sortByList(tagmap[tag],tag);\n\t\t});\n\t}\n\treturn results;\n};\n\n/*\nGet a hashmap by tag of arrays of tiddler titles\n*/\nexports.getTagMap = function() {\n\tvar self = this;\n\treturn this.getGlobalCache(\"tagmap\",function() {\n\t\tvar tags = Object.create(null),\n\t\t\tstoreTags = function(tagArray,title) {\n\t\t\t\tif(tagArray) {\n\t\t\t\t\tfor(var index=0; index&lt;tagArray.length; index++) {\n\t\t\t\t\t\tvar tag = tagArray[index];\n\t\t\t\t\t\tif($tw.utils.hop(tags,tag)) {\n\t\t\t\t\t\t\ttags[tag].push(title);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttags[tag] = [title];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle, tiddler;\n\t\t// Collect up all the tags\n\t\tself.eachShadow(function(tiddler,title) {\n\t\t\tif(!self.tiddlerExists(title)) {\n\t\t\t\ttiddler = self.getTiddler(title);\n\t\t\t\tstoreTags(tiddler.fields.tags,title);\n\t\t\t}\n\t\t});\n\t\tself.each(function(tiddler,title) {\n\t\t\tstoreTags(tiddler.fields.tags,title);\n\t\t});\n\t\treturn tags;\n\t});\n};\n\n/*\nLookup a given tiddler and return a list of all the tiddlers that include it in the specified list field\n*/\nexports.findListingsOfTiddler = function(targetTitle,fieldName) {\n\tfieldName = fieldName || \"list\";\n\tvar titles = [];\n\tthis.each(function(tiddler,title) {\n\t\tvar list = $tw.utils.parseStringArray(tiddler.fields[fieldName]);\n\t\tif(list &amp;&amp; list.indexOf(targetTitle) !== -1) {\n\t\t\ttitles.push(title);\n\t\t}\n\t});\n\treturn titles;\n};\n\n/*\nSorts an array of tiddler titles according to an ordered list\n*/\nexports.sortByList = function(array,listTitle) {\n\tvar self = this,\n\t\treplacedTitles = Object.create(null);\n\t// Given a title, this function will place it in the correct location\n\t// within titles.\n\tfunction moveItemInList(title) {\n\t\tif(!$tw.utils.hop(replacedTitles, title)) {\n\t\t\treplacedTitles[title] = true;\n\t\t\tvar newPos = -1,\n\t\t\t\ttiddler = self.getTiddler(title);\n\t\t\tif(tiddler) {\n\t\t\t\tvar beforeTitle = tiddler.fields[\"list-before\"],\n\t\t\t\t\tafterTitle = tiddler.fields[\"list-after\"];\n\t\t\t\tif(beforeTitle === \"\") {\n\t\t\t\t\tnewPos = 0;\n\t\t\t\t} else if(afterTitle === \"\") {\n\t\t\t\t\tnewPos = titles.length;\n\t\t\t\t} else if(beforeTitle) {\n\t\t\t\t\t// if this title is placed relative\n\t\t\t\t\t// to another title, make sure that\n\t\t\t\t\t// title is placed before we place\n\t\t\t\t\t// this one.\n\t\t\t\t\tmoveItemInList(beforeTitle);\n\t\t\t\t\tnewPos = titles.indexOf(beforeTitle);\n\t\t\t\t} else if(afterTitle) {\n\t\t\t\t\t// Same deal\n\t\t\t\t\tmoveItemInList(afterTitle);\n\t\t\t\t\tnewPos = titles.indexOf(afterTitle);\n\t\t\t\t\tif(newPos &gt;= 0) {\n\t\t\t\t\t\t++newPos;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If a new position is specified, let's move it\n\t\t\t\tif (newPos !== -1) {\n\t\t\t\t\t// get its current Pos, and make sure\n\t\t\t\t\t// sure that it's _actually_ in the list\n\t\t\t\t\t// and that it would _actually_ move\n\t\t\t\t\t// (#4275) We don't bother calling\n\t\t\t\t\t//         indexOf unless we have a new\n\t\t\t\t\t//         position to work with\n\t\t\t\t\tvar currPos = titles.indexOf(title);\n\t\t\t\t\tif(currPos &gt;= 0 &amp;&amp; newPos !== currPos) {\n\t\t\t\t\t\t// move it!\n\t\t\t\t\t\ttitles.splice(currPos,1);\n\t\t\t\t\t\tif(newPos &gt;= currPos) {\n\t\t\t\t\t\t\tnewPos--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitles.splice(newPos,0,title);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tvar list = this.getTiddlerList(listTitle);\n\tif(!array || array.length === 0) {\n\t\treturn [];\n\t} else {\n\t\tvar titles = [], t, title;\n\t\t// First place any entries that are present in the list\n\t\tfor(t=0; t&lt;list.length; t++) {\n\t\t\ttitle = list[t];\n\t\t\tif(array.indexOf(title) !== -1) {\n\t\t\t\ttitles.push(title);\n\t\t\t}\n\t\t}\n\t\t// Then place any remaining entries\n\t\tfor(t=0; t&lt;array.length; t++) {\n\t\t\ttitle = array[t];\n\t\t\tif(list.indexOf(title) === -1) {\n\t\t\t\ttitles.push(title);\n\t\t\t}\n\t\t}\n\t\t// Finally obey the list-before and list-after fields of each tiddler in turn\n\t\tvar sortedTitles = titles.slice(0);\n\t\tfor(t=0; t&lt;sortedTitles.length; t++) {\n\t\t\ttitle = sortedTitles[t];\n\t\t\tmoveItemInList(title);\n\t\t}\n\t\treturn titles;\n\t}\n};\n\nexports.getSubTiddler = function(title,subTiddlerTitle) {\n\tvar bundleInfo = this.getPluginInfo(title) || this.getTiddlerDataCached(title);\n\tif(bundleInfo &amp;&amp; bundleInfo.tiddlers) {\n\t\tvar subTiddler = bundleInfo.tiddlers[subTiddlerTitle];\n\t\tif(subTiddler) {\n\t\t\treturn new $tw.Tiddler(subTiddler);\n\t\t}\n\t}\n\treturn null;\n};\n\n/*\nRetrieve a tiddler as a JSON string of the fields\n*/\nexports.getTiddlerAsJson = function(title) {\n\tvar tiddler = this.getTiddler(title);\n\tif(tiddler) {\n\t\tvar fields = Object.create(null);\n\t\t$tw.utils.each(tiddler.fields,function(value,name) {\n\t\t\tfields[name] = tiddler.getFieldString(name);\n\t\t});\n\t\treturn JSON.stringify(fields);\n\t} else {\n\t\treturn JSON.stringify({title: title});\n\t}\n};\n\nexports.getTiddlersAsJson = function(filter,spaces) {\n\tvar tiddlers = this.filterTiddlers(filter),\n\t\tspaces = (spaces === undefined) ? $tw.config.preferences.jsonSpaces : spaces,\n\t\tdata = [];\n\tfor(var t=0;t&lt;tiddlers.length; t++) {\n\t\tvar tiddler = this.getTiddler(tiddlers[t]);\n\t\tif(tiddler) {\n\t\t\tvar fields = new Object();\n\t\t\tfor(var field in tiddler.fields) {\n\t\t\t\tfields[field] = tiddler.getFieldString(field);\n\t\t\t}\n\t\t\tdata.push(fields);\n\t\t}\n\t}\n\treturn JSON.stringify(data,null,spaces);\n};\n\n/*\nGet the content of a tiddler as a JavaScript object. How this is done depends on the type of the tiddler:\n\napplication/json: the tiddler JSON is parsed into an object\napplication/x-tiddler-dictionary: the tiddler is parsed as sequence of name:value pairs\n\nOther types currently just return null.\n\ntitleOrTiddler: string tiddler title or a tiddler object\ndefaultData: default data to be returned if the tiddler is missing or doesn't contain data\n\nNote that the same value is returned for repeated calls for the same tiddler data. The value is frozen to prevent modification; otherwise modifications would be visible to all callers\n*/\nexports.getTiddlerDataCached = function(titleOrTiddler,defaultData) {\n\tvar self = this,\n\t\ttiddler = titleOrTiddler;\n\tif(!(tiddler instanceof $tw.Tiddler)) {\n\t\ttiddler = this.getTiddler(tiddler);\n\t}\n\tif(tiddler) {\n\t\treturn this.getCacheForTiddler(tiddler.fields.title,\"data\",function() {\n\t\t\t// Return the frozen value\n\t\t\tvar value = self.getTiddlerData(tiddler.fields.title,undefined);\n\t\t\t$tw.utils.deepFreeze(value);\n\t\t\treturn value;\n\t\t}) || defaultData;\n\t} else {\n\t\treturn defaultData;\n\t}\n};\n\n/*\nAlternative, uncached version of getTiddlerDataCached(). The return value can be mutated freely and reused\n*/\nexports.getTiddlerData = function(titleOrTiddler,defaultData) {\n\tvar tiddler = titleOrTiddler,\n\t\tdata;\n\tif(!(tiddler instanceof $tw.Tiddler)) {\n\t\ttiddler = this.getTiddler(tiddler);\n\t}\n\tif(tiddler &amp;&amp; tiddler.fields.text) {\n\t\tswitch(tiddler.fields.type) {\n\t\t\tcase \"application/json\":\n\t\t\t\t// JSON tiddler\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(tiddler.fields.text);\n\t\t\t\t} catch(ex) {\n\t\t\t\t\treturn defaultData;\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\tcase \"application/x-tiddler-dictionary\":\n\t\t\t\treturn $tw.utils.parseFields(tiddler.fields.text);\n\t\t}\n\t}\n\treturn defaultData;\n};\n\n/*\nExtract an indexed field from within a data tiddler\n*/\nexports.extractTiddlerDataItem = function(titleOrTiddler,index,defaultText) {\n\tvar data = this.getTiddlerDataCached(titleOrTiddler,Object.create(null)),\n\t\ttext;\n\tif(data &amp;&amp; $tw.utils.hop(data,index)) {\n\t\ttext = data[index];\n\t}\n\tif(typeof text === \"string\" || typeof text === \"number\") {\n\t\treturn text.toString();\n\t} else {\n\t\treturn defaultText;\n\t}\n};\n\n/*\nSet a tiddlers content to a JavaScript object. Currently this is done by setting the tiddler's type to \"application/json\" and setting the text to the JSON text of the data.\ntitle: title of tiddler\ndata: object that can be serialised to JSON\nfields: optional hashmap of additional tiddler fields to be set\n*/\nexports.setTiddlerData = function(title,data,fields) {\n\tvar existingTiddler = this.getTiddler(title),\n\t\tnewFields = {\n\t\t\ttitle: title\n\t};\n\tif(existingTiddler &amp;&amp; existingTiddler.fields.type === \"application/x-tiddler-dictionary\") {\n\t\tnewFields.text = $tw.utils.makeTiddlerDictionary(data);\n\t} else {\n\t\tnewFields.type = \"application/json\";\n\t\tnewFields.text = JSON.stringify(data,null,$tw.config.preferences.jsonSpaces);\n\t}\n\tthis.addTiddler(new $tw.Tiddler(this.getCreationFields(),existingTiddler,fields,newFields,this.getModificationFields()));\n};\n\n/*\nReturn the content of a tiddler as an array containing each line\n*/\nexports.getTiddlerList = function(title,field,index) {\n\tif(index) {\n\t\treturn $tw.utils.parseStringArray(this.extractTiddlerDataItem(title,index,\"\"));\n\t}\n\tfield = field || \"list\";\n\tvar tiddler = this.getTiddler(title);\n\tif(tiddler) {\n\t\treturn ($tw.utils.parseStringArray(tiddler.fields[field]) || []).slice(0);\n\t}\n\treturn [];\n};\n\n// Return a named global cache object. Global cache objects are cleared whenever a tiddler change occurs\nexports.getGlobalCache = function(cacheName,initializer) {\n\tthis.globalCache = this.globalCache || Object.create(null);\n\tif($tw.utils.hop(this.globalCache,cacheName)) {\n\t\treturn this.globalCache[cacheName];\n\t} else {\n\t\tthis.globalCache[cacheName] = initializer();\n\t\treturn this.globalCache[cacheName];\n\t}\n};\n\nexports.clearGlobalCache = function() {\n\tthis.globalCache = Object.create(null);\n};\n\n// Return the named cache object for a tiddler. If the cache doesn't exist then the initializer function is invoked to create it\nexports.getCacheForTiddler = function(title,cacheName,initializer) {\n\tthis.caches = this.caches || Object.create(null);\n\tvar caches = this.caches[title];\n\tif(caches &amp;&amp; caches[cacheName]) {\n\t\treturn caches[cacheName];\n\t} else {\n\t\tif(!caches) {\n\t\t\tcaches = Object.create(null);\n\t\t\tthis.caches[title] = caches;\n\t\t}\n\t\tcaches[cacheName] = initializer();\n\t\treturn caches[cacheName];\n\t}\n};\n\n// Clear all caches associated with a particular tiddler, or, if the title is null, clear all the caches for all the tiddlers\nexports.clearCache = function(title) {\n\tif(title) {\n\t\tthis.caches = this.caches || Object.create(null);\n\t\tif($tw.utils.hop(this.caches,title)) {\n\t\t\tdelete this.caches[title];\n\t\t}\n\t} else {\n\t\tthis.caches = Object.create(null);\n\t}\n};\n\nexports.initParsers = function(moduleType) {\n\t// Install the parser modules\n\t$tw.Wiki.parsers = {};\n\tvar self = this;\n\t$tw.modules.forEachModuleOfType(\"parser\",function(title,module) {\n\t\tfor(var f in module) {\n\t\t\tif($tw.utils.hop(module,f)) {\n\t\t\t\t$tw.Wiki.parsers[f] = module[f]; // Store the parser class\n\t\t\t}\n\t\t}\n\t});\n\t// Use the generic binary parser for any binary types not registered so far\n\tif($tw.Wiki.parsers[\"application/octet-stream\"]) {\n\t\tObject.keys($tw.config.contentTypeInfo).forEach(function(type) {\n\t\t\tif(!$tw.utils.hop($tw.Wiki.parsers,type) &amp;&amp; $tw.config.contentTypeInfo[type].encoding === \"base64\") {\n\t\t\t\t$tw.Wiki.parsers[type] = $tw.Wiki.parsers[\"application/octet-stream\"];\n\t\t\t}\n\t\t});\n\t}\n};\n\n/*\nParse a block of text of a specified MIME type\n\ttype: content type of text to be parsed\n\ttext: text\n\toptions: see below\nOptions include:\n\tparseAsInline: if true, the text of the tiddler will be parsed as an inline run\n\t_canonical_uri: optional string of the canonical URI of this content\n*/\nexports.parseText = function(type,text,options) {\n\ttext = text || \"\";\n\toptions = options || {};\n\t// Select a parser\n\tvar Parser = $tw.Wiki.parsers[type];\n\tif(!Parser &amp;&amp; $tw.utils.getFileExtensionInfo(type)) {\n\t\tParser = $tw.Wiki.parsers[$tw.utils.getFileExtensionInfo(type).type];\n\t}\n\tif(!Parser) {\n\t\tParser = $tw.Wiki.parsers[options.defaultType || \"text/vnd.tiddlywiki\"];\n\t}\n\tif(!Parser) {\n\t\treturn null;\n\t}\n\t// Return the parser instance\n\treturn new Parser(type,text,{\n\t\tparseAsInline: options.parseAsInline,\n\t\twiki: this,\n\t\t_canonical_uri: options._canonical_uri\n\t});\n};\n\n/*\nParse a tiddler according to its MIME type\n*/\nexports.parseTiddler = function(title,options) {\n\toptions = $tw.utils.extend({},options);\n\tvar cacheType = options.parseAsInline ? \"inlineParseTree\" : \"blockParseTree\",\n\t\ttiddler = this.getTiddler(title),\n\t\tself = this;\n\treturn tiddler ? this.getCacheForTiddler(title,cacheType,function() {\n\t\t\tif(tiddler.hasField(\"_canonical_uri\")) {\n\t\t\t\toptions._canonical_uri = tiddler.fields._canonical_uri;\n\t\t\t}\n\t\t\treturn self.parseText(tiddler.fields.type,tiddler.fields.text,options);\n\t\t}) : null;\n};\n\nexports.parseTextReference = function(title,field,index,options) {\n\tvar tiddler,\n\t\ttext,\n\t\tparserInfo;\n\tif(!options.subTiddler) {\n\t\ttiddler = this.getTiddler(title);\n\t\tif(field === \"text\" || (!field &amp;&amp; !index)) {\n\t\t\tthis.getTiddlerText(title); // Force the tiddler to be lazily loaded\n\t\t\treturn this.parseTiddler(title,options);\n\t\t}\n\t} \n\tparserInfo = this.getTextReferenceParserInfo(title,field,index,options);\n\tif(parserInfo.sourceText !== null) {\n\t\treturn this.parseText(parserInfo.parserType,parserInfo.sourceText,options);\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexports.getTextReferenceParserInfo = function(title,field,index,options) {\n\tvar tiddler,\n\t\tparserInfo = {\n\t\t\tsourceText : null,\n\t\t\tparserType : \"text/vnd.tiddlywiki\"\n\t\t};\n\tif(options.subTiddler) {\n\t\ttiddler = this.getSubTiddler(title,options.subTiddler);\n\t} else {\n\t\ttiddler = this.getTiddler(title);\n\t}\n\tif(field === \"text\" || (!field &amp;&amp; !index)) {\n\t\tif(tiddler &amp;&amp; tiddler.fields) {\n\t\t\tparserInfo.sourceText = tiddler.fields.text || \"\";\n\t\t\tif(tiddler.fields.type) {\n\t\t\t\tparserInfo.parserType = tiddler.fields.type;\n\t\t\t}\n\t\t}\n\t} else if(field) {\n\t\tif(field === \"title\") {\n\t\t\tparserInfo.sourceText = title;\n\t\t} else if(tiddler &amp;&amp; tiddler.fields) {\n\t\t\tparserInfo.sourceText = tiddler.hasField(field) ? tiddler.fields[field].toString() : null;\n\t\t}\n\t} else if(index) {\n\t\tthis.getTiddlerText(title); // Force the tiddler to be lazily loaded\n\t\tparserInfo.sourceText = this.extractTiddlerDataItem(tiddler,index,null);\n\t}\n\tif(parserInfo.sourceText === null) {\n\t\tparserInfo.parserType = null;\n\t}\n\treturn parserInfo;\n}\n\n/*\nMake a widget tree for a parse tree\nparser: parser object\noptions: see below\nOptions include:\ndocument: optional document to use\nvariables: hashmap of variables to set\nparentWidget: optional parent widget for the root node\n*/\nexports.makeWidget = function(parser,options) {\n\toptions = options || {};\n\tvar widgetNode = {\n\t\t\ttype: \"widget\",\n\t\t\tchildren: []\n\t\t},\n\t\tcurrWidgetNode = widgetNode;\n\t// Create set variable widgets for each variable\n\t$tw.utils.each(options.variables,function(value,name) {\n\t\tvar setVariableWidget = {\n\t\t\ttype: \"set\",\n\t\t\tattributes: {\n\t\t\t\tname: {type: \"string\", value: name},\n\t\t\t\tvalue: {type: \"string\", value: value}\n\t\t\t},\n\t\t\tchildren: []\n\t\t};\n\t\tcurrWidgetNode.children = [setVariableWidget];\n\t\tcurrWidgetNode = setVariableWidget;\n\t});\n\t// Add in the supplied parse tree nodes\n\tcurrWidgetNode.children = parser ? parser.tree : [];\n\t// Create the widget\n\treturn new widget.widget(widgetNode,{\n\t\twiki: this,\n\t\tdocument: options.document || $tw.fakeDocument,\n\t\tparentWidget: options.parentWidget\n\t});\n};\n\n/*\nMake a widget tree for transclusion\ntitle: target tiddler title\noptions: as for wiki.makeWidget() plus:\noptions.field: optional field to transclude (defaults to \"text\")\noptions.mode: transclusion mode \"inline\" or \"block\"\noptions.recursionMarker : optional flag to set a recursion marker, defaults to \"yes\"\noptions.children: optional array of children for the transclude widget\noptions.importVariables: optional importvariables filter string for macros to be included\noptions.importPageMacros: optional boolean; if true, equivalent to passing \"[[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\" to options.importVariables\n*/\nexports.makeTranscludeWidget = function(title,options) {\n\toptions = options || {};\n\tvar parseTreeDiv = {tree: [{\n\t\t\ttype: \"element\",\n\t\t\ttag: \"div\",\n\t\t\tchildren: []}]},\n\t\tparseTreeImportVariables = {\n\t\t\ttype: \"importvariables\",\n\t\t\tattributes: {\n\t\t\t\tfilter: {\n\t\t\t\t\tname: \"filter\",\n\t\t\t\t\ttype: \"string\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tisBlock: false,\n\t\t\tchildren: []},\n\t\tparseTreeTransclude = {\n\t\t\ttype: \"transclude\",\n\t\t\tattributes: {\n\t\t\t\trecursionMarker: {\n\t\t\t\t\tname: \"recursionMarker\",\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tvalue: options.recursionMarker || \"yes\"\n\t\t\t\t\t},\n\t\t\t\ttiddler: {\n\t\t\t\t\tname: \"tiddler\",\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tvalue: title\n\t\t\t\t}\n\t\t\t},\n\t\t\tisBlock: !options.parseAsInline};\n\tif(options.importVariables || options.importPageMacros) {\n\t\tif(options.importVariables) {\n\t\t\tparseTreeImportVariables.attributes.filter.value = options.importVariables;\n\t\t} else if(options.importPageMacros) {\n\t\t\tparseTreeImportVariables.attributes.filter.value = \"[[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\";\n\t\t}\n\t\tparseTreeDiv.tree[0].children.push(parseTreeImportVariables);\n\t\tparseTreeImportVariables.children.push(parseTreeTransclude);\n\t} else {\n\t\tparseTreeDiv.tree[0].children.push(parseTreeTransclude);\n\t}\n\tif(options.field) {\n\t\tparseTreeTransclude.attributes.field = {type: \"string\", value: options.field};\n\t}\n\tif(options.mode) {\n\t\tparseTreeTransclude.attributes.mode = {type: \"string\", value: options.mode};\n\t}\n\tif(options.children) {\n\t\tparseTreeTransclude.children = options.children;\n\t}\n\treturn this.makeWidget(parseTreeDiv,options);\n};\n\n/*\nParse text in a specified format and render it into another format\n\toutputType: content type for the output\n\ttextType: content type of the input text\n\ttext: input text\n\toptions: see below\nOptions include:\nvariables: hashmap of variables to set\nparentWidget: optional parent widget for the root node\n*/\nexports.renderText = function(outputType,textType,text,options) {\n\toptions = options || {};\n\tvar parser = this.parseText(textType,text,options),\n\t\twidgetNode = this.makeWidget(parser,options);\n\tvar container = $tw.fakeDocument.createElement(\"div\");\n\twidgetNode.render(container,null);\n\treturn outputType === \"text/html\" ? container.innerHTML : container.textContent;\n};\n\n/*\nParse text from a tiddler and render it into another format\n\toutputType: content type for the output\n\ttitle: title of the tiddler to be rendered\n\toptions: see below\nOptions include:\nvariables: hashmap of variables to set\nparentWidget: optional parent widget for the root node\n*/\nexports.renderTiddler = function(outputType,title,options) {\n\toptions = options || {};\n\tvar parser = this.parseTiddler(title,options),\n\t\twidgetNode = this.makeWidget(parser,options);\n\tvar container = $tw.fakeDocument.createElement(\"div\");\n\twidgetNode.render(container,null);\n\treturn outputType === \"text/html\" ? container.innerHTML : (outputType === \"text/plain-formatted\" ? container.formattedTextContent : container.textContent);\n};\n\n/*\nReturn an array of tiddler titles that match a search string\n\ttext: The text string to search for\n\toptions: see below\nOptions available:\n\tsource: an iterator function for the source tiddlers, called source(iterator), where iterator is called as iterator(tiddler,title)\n\texclude: An array of tiddler titles to exclude from the search\n\tinvert: If true returns tiddlers that do not contain the specified string\n\tcaseSensitive: If true forces a case sensitive search\n\tfield: If specified, restricts the search to the specified field, or an array of field names\n\tanchored: If true, forces all but regexp searches to be anchored to the start of text\n\texcludeField: If true, the field options are inverted to specify the fields that are not to be searched\n\tThe search mode is determined by the first of these boolean flags to be true\n\t\tliteral: searches for literal string\n\t\twhitespace: same as literal except runs of whitespace are treated as a single space\n\t\tregexp: treats the search term as a regular expression\n\t\twords: (default) treats search string as a list of tokens, and matches if all tokens are found, regardless of adjacency or ordering\n*/\nexports.search = function(text,options) {\n\toptions = options || {};\n\tvar self = this,\n\t\tt,\n\t\tinvert = !!options.invert;\n\t// Convert the search string into a regexp for each term\n\tvar terms, searchTermsRegExps,\n\t\tflags = options.caseSensitive ? \"\" : \"i\",\n\t\tanchor = options.anchored ? \"^\" : \"\";\n\tif(options.literal) {\n\t\tif(text.length === 0) {\n\t\t\tsearchTermsRegExps = null;\n\t\t} else {\n\t\t\tsearchTermsRegExps = [new RegExp(\"(\" + anchor + $tw.utils.escapeRegExp(text) + \")\",flags)];\n\t\t}\n\t} else if(options.whitespace) {\n\t\tterms = [];\n\t\t$tw.utils.each(text.split(/\\s+/g),function(term) {\n\t\t\tif(term) {\n\t\t\t\tterms.push($tw.utils.escapeRegExp(term));\n\t\t\t}\n\t\t});\n\t\tsearchTermsRegExps = [new RegExp(\"(\" + anchor + terms.join(\"\\\\s+\") + \")\",flags)];\n\t} else if(options.regexp) {\n\t\ttry {\n\t\t\tsearchTermsRegExps = [new RegExp(\"(\" + text + \")\",flags)];\n\t\t} catch(e) {\n\t\t\tsearchTermsRegExps = null;\n\t\t\tconsole.log(\"Regexp error parsing /(\" + text + \")/\" + flags + \": \",e);\n\t\t}\n\t} else {\n\t\tterms = text.split(/ +/);\n\t\tif(terms.length === 1 &amp;&amp; terms[0] === \"\") {\n\t\t\tsearchTermsRegExps = null;\n\t\t} else {\n\t\t\tsearchTermsRegExps = [];\n\t\t\tfor(t=0; t&lt;terms.length; t++) {\n\t\t\t\tsearchTermsRegExps.push(new RegExp(\"(\" + anchor + $tw.utils.escapeRegExp(terms[t]) + \")\",flags));\n\t\t\t}\n\t\t}\n\t}\n\t// Accumulate the array of fields to be searched or excluded from the search\n\tvar fields = [];\n\tif(options.field) {\n\t\tif($tw.utils.isArray(options.field)) {\n\t\t\t$tw.utils.each(options.field,function(fieldName) {\n\t\t\t\tif(fieldName) {\n\t\t\t\t\tfields.push(fieldName);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfields.push(options.field);\n\t\t}\n\t}\n\t// Use default fields if none specified and we're not excluding fields (excluding fields with an empty field array is the same as searching all fields)\n\tif(fields.length === 0 &amp;&amp; !options.excludeField) {\n\t\tfields.push(\"title\");\n\t\tfields.push(\"tags\");\n\t\tfields.push(\"text\");\n\t}\n\t// Function to check a given tiddler for the search term\n\tvar searchTiddler = function(title) {\n\t\tif(!searchTermsRegExps) {\n\t\t\treturn true;\n\t\t}\n\t\tvar notYetFound = searchTermsRegExps.slice();\n\n\t\tvar tiddler = self.getTiddler(title);\n\t\tif(!tiddler) {\n\t\t\ttiddler = new $tw.Tiddler({title: title, text: \"\", type: \"text/vnd.tiddlywiki\"});\n\t\t}\n\t\tvar contentTypeInfo = $tw.config.contentTypeInfo[tiddler.fields.type] || $tw.config.contentTypeInfo[\"text/vnd.tiddlywiki\"],\n\t\t\tsearchFields;\n\t\t// Get the list of fields we're searching\n\t\tif(options.excludeField) {\n\t\t\tsearchFields = Object.keys(tiddler.fields);\n\t\t\t$tw.utils.each(fields,function(fieldName) {\n\t\t\t\tvar p = searchFields.indexOf(fieldName);\n\t\t\t\tif(p !== -1) {\n\t\t\t\t\tsearchFields.splice(p,1);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsearchFields = fields;\n\t\t}\n\t\tfor(var fieldIndex=0; notYetFound.length&gt;0 &amp;&amp; fieldIndex&lt;searchFields.length; fieldIndex++) {\n\t\t\t// Don't search the text field if the content type is binary\n\t\t\tvar fieldName = searchFields[fieldIndex];\n\t\t\tif(fieldName === \"text\" &amp;&amp; contentTypeInfo.encoding !== \"utf8\") {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar str = tiddler.fields[fieldName],\n\t\t\t\tt;\n\t\t\tif(str) {\n\t\t\t\tif($tw.utils.isArray(str)) {\n\t\t\t\t\t// If the field value is an array, test each regexp against each field array entry and fail if each regexp doesn't match at least one field array entry\n\t\t\t\t\tfor(var s=0; s&lt;str.length; s++) {\n\t\t\t\t\t\tfor(t=0; t&lt;notYetFound.length;) {\n\t\t\t\t\t\t\tif(notYetFound[t].test(str[s])) {\n\t\t\t\t\t\t\t\tnotYetFound.splice(t, 1);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tt++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// If the field isn't an array, force it to a string and test each regexp against it and fail if any do not match\n\t\t\t\t\tstr = tiddler.getFieldString(fieldName);\n\t\t\t\t\tfor(t=0; t&lt;notYetFound.length;) {\n\t\t\t\t\t\tif(notYetFound[t].test(str)) {\n\t\t\t\t\t\t\tnotYetFound.splice(t, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn notYetFound.length == 0;\n\t};\n\t// Loop through all the tiddlers doing the search\n\tvar results = [],\n\t\tsource = options.source || this.each;\n\tsource(function(tiddler,title) {\n\t\tif(searchTiddler(title) !== invert) {\n\t\t\tresults.push(title);\n\t\t}\n\t});\n\t// Remove any of the results we have to exclude\n\tif(options.exclude) {\n\t\tfor(t=0; t&lt;options.exclude.length; t++) {\n\t\t\tvar p = results.indexOf(options.exclude[t]);\n\t\t\tif(p !== -1) {\n\t\t\t\tresults.splice(p,1);\n\t\t\t}\n\t\t}\n\t}\n\treturn results;\n};\n\n/*\nTrigger a load for a tiddler if it is skinny. Returns the text, or undefined if the tiddler is missing, null if the tiddler is being lazily loaded.\n*/\nexports.getTiddlerText = function(title,defaultText) {\n\tvar tiddler = this.getTiddler(title);\n\t// Return undefined if the tiddler isn't found\n\tif(!tiddler) {\n\t\treturn defaultText;\n\t}\n\tif(!tiddler.hasField(\"_is_skinny\")) {\n\t\t// Just return the text if we've got it\n\t\treturn tiddler.fields.text || \"\";\n\t} else {\n\t\t// Tell any listeners about the need to lazily load this tiddler\n\t\tthis.dispatchEvent(\"lazyLoad\",title);\n\t\t// Indicate that the text is being loaded\n\t\treturn null;\n\t}\n};\n\n/*\nCheck whether the text of a tiddler matches a given value. By default, the comparison is case insensitive, and any spaces at either end of the tiddler text is trimmed\n*/\nexports.checkTiddlerText = function(title,targetText,options) {\n\toptions = options || {};\n\tvar text = this.getTiddlerText(title,\"\");\n\tif(!options.noTrim) {\n\t\ttext = text.trim();\n\t}\n\tif(!options.caseSensitive) {\n\t\ttext = text.toLowerCase();\n\t\ttargetText = targetText.toLowerCase();\n\t}\n\treturn text === targetText;\n}\n\n/*\nRead an array of browser File objects, invoking callback(tiddlerFieldsArray) once they're all read\n*/\nexports.readFiles = function(files,options) {\n\tvar callback;\n\tif(typeof options === \"function\") {\n\t\tcallback = options;\n\t\toptions = {};\n\t} else {\n\t\tcallback = options.callback;\n\t}\n\tvar result = [],\n\t\toutstanding = files.length,\n\t\treadFileCallback = function(tiddlerFieldsArray) {\n\t\t\tresult.push.apply(result,tiddlerFieldsArray);\n\t\t\tif(--outstanding === 0) {\n\t\t\t\tcallback(result);\n\t\t\t}\n\t\t};\n\tfor(var f=0; f&lt;files.length; f++) {\n\t\tthis.readFile(files[f],$tw.utils.extend({},options,{callback: readFileCallback}));\n\t}\n\treturn files.length;\n};\n\n/*\nRead a browser File object, invoking callback(tiddlerFieldsArray) with an array of tiddler fields objects\n*/\nexports.readFile = function(file,options) {\n\tvar callback;\n\tif(typeof options === \"function\") {\n\t\tcallback = options;\n\t\toptions = {};\n\t} else {\n\t\tcallback = options.callback;\n\t}\n\t// Get the type, falling back to the filename extension\n\tvar self = this,\n\t\ttype = file.type;\n\tif(type === \"\" || !type) {\n\t\tvar dotPos = file.name.lastIndexOf(\".\");\n\t\tif(dotPos !== -1) {\n\t\t\tvar fileExtensionInfo = $tw.utils.getFileExtensionInfo(file.name.substr(dotPos));\n\t\t\tif(fileExtensionInfo) {\n\t\t\t\ttype = fileExtensionInfo.type;\n\t\t\t}\n\t\t}\n\t}\n\t// Figure out if we're reading a binary file\n\tvar contentTypeInfo = $tw.config.contentTypeInfo[type],\n\t\tisBinary = contentTypeInfo ? contentTypeInfo.encoding === \"base64\" : false;\n\t// Log some debugging information\n\tif($tw.log.IMPORT) {\n\t\tconsole.log(\"Importing file '\" + file.name + \"', type: '\" + type + \"', isBinary: \" + isBinary);\n\t}\n\t// Give the hook a chance to process the drag\n\tif($tw.hooks.invokeHook(\"th-importing-file\",{\n\t\tfile: file,\n\t\ttype: type,\n\t\tisBinary: isBinary,\n\t\tcallback: callback\n\t}) !== true) {\n\t\tthis.readFileContent(file,type,isBinary,options.deserializer,callback);\n\t}\n};\n\n/*\nLower level utility to read the content of a browser File object, invoking callback(tiddlerFieldsArray) with an array of tiddler fields objects\n*/\nexports.readFileContent = function(file,type,isBinary,deserializer,callback) {\n\tvar self = this;\n\t// Create the FileReader\n\tvar reader = new FileReader();\n\t// Onload\n\treader.onload = function(event) {\n\t\tvar text = event.target.result,\n\t\t\ttiddlerFields = {title: file.name || \"Untitled\"};\n\t\tif(isBinary) {\n\t\t\tvar commaPos = text.indexOf(\",\");\n\t\t\tif(commaPos !== -1) {\n\t\t\t\ttext = text.substr(commaPos + 1);\n\t\t\t}\n\t\t}\n\t\t// Check whether this is an encrypted TiddlyWiki file\n\t\tvar encryptedJson = $tw.utils.extractEncryptedStoreArea(text);\n\t\tif(encryptedJson) {\n\t\t\t// If so, attempt to decrypt it with the current password\n\t\t\t$tw.utils.decryptStoreAreaInteractive(encryptedJson,function(tiddlers) {\n\t\t\t\tcallback(tiddlers);\n\t\t\t});\n\t\t} else {\n\t\t\t// Otherwise, just try to deserialise any tiddlers in the file\n\t\t\tcallback(self.deserializeTiddlers(type,text,tiddlerFields,{deserializer: deserializer}));\n\t\t}\n\t};\n\t// Kick off the read\n\tif(isBinary) {\n\t\treader.readAsDataURL(file);\n\t} else {\n\t\treader.readAsText(file);\n\t}\n};\n\n/*\nFind any existing draft of a specified tiddler\n*/\nexports.findDraft = function(targetTitle) {\n\tvar draftTitle = undefined;\n\tthis.forEachTiddler({includeSystem: true},function(title,tiddler) {\n\t\tif(tiddler.fields[\"draft.title\"] &amp;&amp; tiddler.fields[\"draft.of\"] === targetTitle) {\n\t\t\tdraftTitle = title;\n\t\t}\n\t});\n\treturn draftTitle;\n}\n\n/*\nCheck whether the specified draft tiddler has been modified.\nIf the original tiddler doesn't exist, create  a vanilla tiddler variable,\nto check if additional fields have been added.\n*/\nexports.isDraftModified = function(title) {\n\tvar tiddler = this.getTiddler(title);\n\tif(!tiddler.isDraft()) {\n\t\treturn false;\n\t}\n\tvar ignoredFields = [\"created\", \"modified\", \"title\", \"draft.title\", \"draft.of\"],\n\t\torigTiddler = this.getTiddler(tiddler.fields[\"draft.of\"]) || new $tw.Tiddler({text:\"\", tags:[]}),\n\t\ttitleModified = tiddler.fields[\"draft.title\"] !== tiddler.fields[\"draft.of\"];\n\treturn titleModified || !tiddler.isEqual(origTiddler,ignoredFields);\n};\n\n/*\nAdd a new record to the top of the history stack\ntitle: a title string or an array of title strings\nfromPageRect: page coordinates of the origin of the navigation\nhistoryTitle: title of history tiddler (defaults to $:/HistoryList)\n*/\nexports.addToHistory = function(title,fromPageRect,historyTitle) {\n\tvar story = new $tw.Story({wiki: this, historyTitle: historyTitle});\n\tstory.addToHistory(title,fromPageRect);\n\tconsole.log(\"$tw.wiki.addToHistory() is deprecated since V5.1.23! Use the this.story.addToHistory() from the story-object!\")\n};\n\n/*\nAdd a new tiddler to the story river\ntitle: a title string or an array of title strings\nfromTitle: the title of the tiddler from which the navigation originated\nstoryTitle: title of story tiddler (defaults to $:/StoryList)\noptions: see story.js\n*/\nexports.addToStory = function(title,fromTitle,storyTitle,options) {\n\tvar story = new $tw.Story({wiki: this, storyTitle: storyTitle});\n\tstory.addToStory(title,fromTitle,options);\n\tconsole.log(\"$tw.wiki.addToStory() is deprecated since V5.1.23! Use the this.story.addToStory() from the story-object!\")\n};\n\n/*\nGenerate a title for the draft of a given tiddler\n*/\nexports.generateDraftTitle = function(title) {\n\tvar c = 0,\n\t\tdraftTitle,\n\t\tusername = this.getTiddlerText(\"$:/status/UserName\"),\n\t\tattribution = username ? \" by \" + username : \"\";\n\tdo {\n\t\tdraftTitle = \"Draft \" + (c ? (c + 1) + \" \" : \"\") + \"of '\" + title + \"'\" + attribution;\n\t\tc++;\n\t} while(this.tiddlerExists(draftTitle));\n\treturn draftTitle;\n};\n\n/*\nInvoke the available upgrader modules\ntitles: array of tiddler titles to be processed\ntiddlers: hashmap by title of tiddler fields of pending import tiddlers. These can be modified by the upgraders. An entry with no fields indicates a tiddler that was pending import has been suppressed. When entries are added to the pending import the tiddlers hashmap may have entries that are not present in the titles array\nReturns a hashmap of messages keyed by tiddler title.\n*/\nexports.invokeUpgraders = function(titles,tiddlers) {\n\t// Collect up the available upgrader modules\n\tvar self = this;\n\tif(!this.upgraderModules) {\n\t\tthis.upgraderModules = [];\n\t\t$tw.modules.forEachModuleOfType(\"upgrader\",function(title,module) {\n\t\t\tif(module.upgrade) {\n\t\t\t\tself.upgraderModules.push(module);\n\t\t\t}\n\t\t});\n\t}\n\t// Invoke each upgrader in turn\n\tvar messages = {};\n\tfor(var t=0; t&lt;this.upgraderModules.length; t++) {\n\t\tvar upgrader = this.upgraderModules[t],\n\t\t\tupgraderMessages = upgrader.upgrade(this,titles,tiddlers);\n\t\t$tw.utils.extend(messages,upgraderMessages);\n\t}\n\treturn messages;\n};\n\n// Determine whether a plugin by title is dynamically loadable\nexports.doesPluginRequireReload = function(title) {\n\tvar tiddler = this.getTiddler(title);\n\tif(tiddler &amp;&amp; tiddler.fields.type === \"application/json\" &amp;&amp; tiddler.fields[\"plugin-type\"]) {\n\t\tif(tiddler.fields[\"plugin-type\"] === \"import\") {\n\t\t\t// The import plugin never requires reloading\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn this.doesPluginInfoRequireReload(this.getPluginInfo(title) || this.getTiddlerDataCached(title));\n};\n\n// Determine whether a plugin info structure is dynamically loadable\nexports.doesPluginInfoRequireReload = function(pluginInfo) {\n\tif(pluginInfo) {\n\t\tvar foundModule = false;\n\t\t$tw.utils.each(pluginInfo.tiddlers,function(tiddler) {\n\t\t\tif(tiddler.type === \"application/javascript\" &amp;&amp; $tw.utils.hop(tiddler,\"module-type\")) {\n\t\t\t\tfoundModule = true;\n\t\t\t}\n\t\t});\n\t\treturn foundModule;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexports.slugify = function(title,options) {\n\tvar tiddler = this.getTiddler(title),\n\t\tslug;\n\tif(tiddler &amp;&amp; tiddler.fields.slug) {\n\t\tslug = tiddler.fields.slug;\n\t} else {\n\t\tslug = $tw.utils.transliterate(title.toString().toLowerCase()) // Replace diacritics with basic lowercase ASCII\n\t\t\t.replace(/\\s+/g,\"-\")                                       // Replace spaces with -\n\t\t\t.replace(/[^\\w\\-\\.]+/g,\"\")                                 // Remove all non-word chars except dash and dot\n\t\t\t.replace(/\\-\\-+/g,\"-\")                                     // Replace multiple - with single -\n\t\t\t.replace(/^-+/,\"\")                                         // Trim - from start of text\n\t\t\t.replace(/-+$/,\"\");                                        // Trim - from end of text\n\t}\n\t// If the resulting slug is blank (eg because the title is just punctuation characters)\n\tif(!slug) {\n\t\t// ...then just use the character codes of the title\n\t\tvar result = [];\n\t\t$tw.utils.each(title.split(\"\"),function(char) {\n\t\t\tresult.push(char.charCodeAt(0).toString());\n\t\t});\n\t\tslug = result.join(\"-\");\n\t}\n\treturn slug;\n};\n\n})();\n","type":"application/javascript","module-type":"wikimethod"},"$:/palettes/Blanca":{"title":"$:/palettes/Blanca","name":"Blanca","color-scheme":"light","description":"A clean white palette to let you focus","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #ffffff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background:\nbutton-foreground:\nbutton-border:\ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndirty-indicator: #ff0000\ndownload-background: #66cccc\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333333\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #999999\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #ffffff\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #7897f3\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #000000\nsidebar-controls-foreground: #ccc\nsidebar-foreground-shadow: rgba(255,255,255, 0.8)\nsidebar-foreground: #acacac\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #c0c0c0\nsidebar-tab-background-selected: #ffffff\nsidebar-tab-background: &lt;&lt;colour tab-background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #444444\nsidebar-tiddler-link-foreground: #7897f3\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: #ffffff\ntab-background: #eeeeee\ntab-border-selected: #cccccc\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #ffeedd\ntag-foreground: #000\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: #eee\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #f8f8f8\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #f8f8f8\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #ff9900\ntoolbar-new-button:\ntoolbar-options-button:\ntoolbar-save-button:\ntoolbar-info-button:\ntoolbar-edit-button:\ntoolbar-close-button:\ntoolbar-delete-button:\ntoolbar-cancel-button:\ntoolbar-done-button:\nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/Blue":{"title":"$:/palettes/Blue","name":"Blue","color-scheme":"light","description":"A blue theme","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #fff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background:\nbutton-foreground:\nbutton-border:\ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndirty-indicator: #ff0000\ndownload-background: #34c734\ndownload-foreground: &lt;&lt;colour foreground&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333353\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #999999\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #ddddff\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #5778d8\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #000000\nsidebar-controls-foreground: #ffffff\nsidebar-foreground-shadow: rgba(255,255,255, 0.8)\nsidebar-foreground: #acacac\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #c0c0c0\nsidebar-tab-background-selected: &lt;&lt;colour page-background&gt;&gt;\nsidebar-tab-background: &lt;&lt;colour tab-background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #444444\nsidebar-tiddler-link-foreground: #5959c0\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: &lt;&lt;colour background&gt;&gt;\ntab-background: #ccccdd\ntab-border-selected: #ccccdd\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #eeeeff\ntag-foreground: #000\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #666666\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #ffffff\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #ffffff\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #5959c0\ntoolbar-new-button: #5eb95e\ntoolbar-options-button: rgb(128, 88, 165)\ntoolbar-save-button: #0e90d2\ntoolbar-info-button: #0e90d2\ntoolbar-edit-button: rgb(243, 123, 29)\ntoolbar-close-button: #dd514c\ntoolbar-delete-button: #dd514c\ntoolbar-cancel-button: rgb(243, 123, 29)\ntoolbar-done-button: #5eb95e\nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/Muted":{"title":"$:/palettes/Muted","name":"Muted","color-scheme":"light","description":"Bright tiddlers on a muted background","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #ffffff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background:\nbutton-foreground:\nbutton-border:\ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndirty-indicator: #ff0000\ndownload-background: #34c734\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333333\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #bbb\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #6f6f70\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #29a6ee\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #000000\nsidebar-controls-foreground: #c2c1c2\nsidebar-foreground-shadow: rgba(255,255,255,0)\nsidebar-foreground: #d3d2d4\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #c0c0c0\nsidebar-tab-background-selected: #6f6f70\nsidebar-tab-background: #666667\nsidebar-tab-border-selected: #999\nsidebar-tab-border: #515151\nsidebar-tab-divider: #999\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: #999\nsidebar-tiddler-link-foreground-hover: #444444\nsidebar-tiddler-link-foreground: #d1d0d2\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: #ffffff\ntab-background: #d8d8d8\ntab-border-selected: #d8d8d8\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #d5ad34\ntag-foreground: #ffffff\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #f8f8f8\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #f8f8f8\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #182955\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/ContrastLight":{"title":"$:/palettes/ContrastLight","name":"Contrast (Light)","color-scheme":"light","description":"High contrast and unambiguous (light version)","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #f00\nalert-border: &lt;&lt;colour background&gt;&gt;\nalert-highlight: &lt;&lt;colour foreground&gt;&gt;\nalert-muted-foreground: #800\nbackground: #fff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background: &lt;&lt;colour background&gt;&gt;\nbutton-foreground: &lt;&lt;colour foreground&gt;&gt;\nbutton-border: &lt;&lt;colour foreground&gt;&gt;\ncode-background: &lt;&lt;colour background&gt;&gt;\ncode-border: &lt;&lt;colour foreground&gt;&gt;\ncode-foreground: &lt;&lt;colour foreground&gt;&gt;\ndirty-indicator: #f00\ndownload-background: #080\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: &lt;&lt;colour foreground&gt;&gt;\ndropdown-tab-background: &lt;&lt;colour foreground&gt;&gt;\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #00a\nexternal-link-foreground: #00e\nforeground: #000\nmessage-background: &lt;&lt;colour foreground&gt;&gt;\nmessage-border: &lt;&lt;colour background&gt;&gt;\nmessage-foreground: &lt;&lt;colour background&gt;&gt;\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: &lt;&lt;colour foreground&gt;&gt;\nmodal-footer-background: &lt;&lt;colour background&gt;&gt;\nmodal-footer-border: &lt;&lt;colour foreground&gt;&gt;\nmodal-header-border: &lt;&lt;colour foreground&gt;&gt;\nmuted-foreground: &lt;&lt;colour foreground&gt;&gt;\nnotification-background: &lt;&lt;colour background&gt;&gt;\nnotification-border: &lt;&lt;colour foreground&gt;&gt;\npage-background: &lt;&lt;colour background&gt;&gt;\npre-background: &lt;&lt;colour background&gt;&gt;\npre-border: &lt;&lt;colour foreground&gt;&gt;\nprimary: #00f\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: &lt;&lt;colour background&gt;&gt;\nsidebar-controls-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-foreground-shadow: rgba(0,0,0, 0)\nsidebar-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tab-background-selected: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-background: &lt;&lt;colour tab-background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\nsidebar-tab-foreground-selected: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: &lt;&lt;colour background&gt;&gt;\ntab-background: &lt;&lt;colour foreground&gt;&gt;\ntab-border-selected: &lt;&lt;colour foreground&gt;&gt;\ntab-border: &lt;&lt;colour foreground&gt;&gt;\ntab-divider: &lt;&lt;colour foreground&gt;&gt;\ntab-foreground-selected: &lt;&lt;colour foreground&gt;&gt;\ntab-foreground: &lt;&lt;colour background&gt;&gt;\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #000\ntag-foreground: #fff\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour foreground&gt;&gt;\ntiddler-controls-foreground-hover: #ddd\ntiddler-controls-foreground-selected: #fdd\ntiddler-controls-foreground: &lt;&lt;colour foreground&gt;&gt;\ntiddler-editor-background: &lt;&lt;colour background&gt;&gt;\ntiddler-editor-border-image: &lt;&lt;colour foreground&gt;&gt;\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: &lt;&lt;colour background&gt;&gt;\ntiddler-editor-fields-odd: &lt;&lt;colour background&gt;&gt;\ntiddler-info-background: &lt;&lt;colour background&gt;&gt;\ntiddler-info-border: &lt;&lt;colour foreground&gt;&gt;\ntiddler-info-tab-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: &lt;&lt;colour foreground&gt;&gt;\ntiddler-title-foreground: &lt;&lt;colour foreground&gt;&gt;\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: &lt;&lt;colour foreground&gt;&gt;\nvery-muted-foreground: #888888\n"},"$:/palettes/ContrastDark":{"title":"$:/palettes/ContrastDark","name":"Contrast (Dark)","color-scheme":"dark","description":"High contrast and unambiguous (dark version)","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #f00\nalert-border: &lt;&lt;colour background&gt;&gt;\nalert-highlight: &lt;&lt;colour foreground&gt;&gt;\nalert-muted-foreground: #800\nbackground: #000\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background: &lt;&lt;colour background&gt;&gt;\nbutton-foreground: &lt;&lt;colour foreground&gt;&gt;\nbutton-border: &lt;&lt;colour foreground&gt;&gt;\ncode-background: &lt;&lt;colour background&gt;&gt;\ncode-border: &lt;&lt;colour foreground&gt;&gt;\ncode-foreground: &lt;&lt;colour foreground&gt;&gt;\ndirty-indicator: #f00\ndownload-background: #080\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: &lt;&lt;colour foreground&gt;&gt;\ndropdown-tab-background: &lt;&lt;colour foreground&gt;&gt;\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #00a\nexternal-link-foreground: #00e\nforeground: #fff\nmessage-background: &lt;&lt;colour foreground&gt;&gt;\nmessage-border: &lt;&lt;colour background&gt;&gt;\nmessage-foreground: &lt;&lt;colour background&gt;&gt;\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: &lt;&lt;colour foreground&gt;&gt;\nmodal-footer-background: &lt;&lt;colour background&gt;&gt;\nmodal-footer-border: &lt;&lt;colour foreground&gt;&gt;\nmodal-header-border: &lt;&lt;colour foreground&gt;&gt;\nmuted-foreground: &lt;&lt;colour foreground&gt;&gt;\nnotification-background: &lt;&lt;colour background&gt;&gt;\nnotification-border: &lt;&lt;colour foreground&gt;&gt;\npage-background: &lt;&lt;colour background&gt;&gt;\npre-background: &lt;&lt;colour background&gt;&gt;\npre-border: &lt;&lt;colour foreground&gt;&gt;\nprimary: #00f\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: &lt;&lt;colour background&gt;&gt;\nsidebar-controls-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-foreground-shadow: rgba(0,0,0, 0)\nsidebar-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tab-background-selected: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-background: &lt;&lt;colour tab-background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\nsidebar-tab-foreground-selected: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: &lt;&lt;colour foreground&gt;&gt;\nsidebar-tiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: &lt;&lt;colour background&gt;&gt;\ntab-background: &lt;&lt;colour foreground&gt;&gt;\ntab-border-selected: &lt;&lt;colour foreground&gt;&gt;\ntab-border: &lt;&lt;colour foreground&gt;&gt;\ntab-divider: &lt;&lt;colour foreground&gt;&gt;\ntab-foreground-selected: &lt;&lt;colour foreground&gt;&gt;\ntab-foreground: &lt;&lt;colour background&gt;&gt;\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #fff\ntag-foreground: #000\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour foreground&gt;&gt;\ntiddler-controls-foreground-hover: #ddd\ntiddler-controls-foreground-selected: #fdd\ntiddler-controls-foreground: &lt;&lt;colour foreground&gt;&gt;\ntiddler-editor-background: &lt;&lt;colour background&gt;&gt;\ntiddler-editor-border-image: &lt;&lt;colour foreground&gt;&gt;\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: &lt;&lt;colour background&gt;&gt;\ntiddler-editor-fields-odd: &lt;&lt;colour background&gt;&gt;\ntiddler-info-background: &lt;&lt;colour background&gt;&gt;\ntiddler-info-border: &lt;&lt;colour foreground&gt;&gt;\ntiddler-info-tab-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: &lt;&lt;colour foreground&gt;&gt;\ntiddler-title-foreground: &lt;&lt;colour foreground&gt;&gt;\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: &lt;&lt;colour foreground&gt;&gt;\nvery-muted-foreground: #888888\n"},"$:/palettes/CupertinoDark":{"title":"$:/palettes/CupertinoDark","tags":"$:/tags/Palette","color-scheme":"dark","name":"Cupertino Dark","description":"A macOS inspired dark palette","type":"application/x-tiddler-dictionary","text":"alert-background: #FF453A\nalert-border: #FF453A\nalert-highlight: #FFD60A\nalert-muted-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\nbackground: #282828\nblockquote-bar: &lt;&lt;colour page-background&gt;&gt;\nbutton-foreground: &lt;&lt;colour background&gt;&gt;\ncode-background: &lt;&lt;colour pre-background&gt;&gt;\ncode-border: &lt;&lt;colour pre-border&gt;&gt;\ncode-foreground: rgba(255, 255, 255, 0.54)\ndirty-indicator: #FF453A\ndownload-background: &lt;&lt;colour primary&gt;&gt;\ndownload-foreground: &lt;&lt;colour foreground&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour tiddler-info-background&gt;&gt;\ndropdown-border: &lt;&lt;colour dropdown-background&gt;&gt;\ndropdown-tab-background-selected: #3F638B\ndropdown-tab-background: #323232\ndropzone-background: #30D158\nexternal-link-background-hover: transparent\nexternal-link-background-visited: transparent\nexternal-link-background: transparent\nexternal-link-foreground-hover: \nexternal-link-foreground-visited: #BF5AF2\nexternal-link-foreground: #32D74B\nforeground: #FFFFFF\nmenubar-background: #464646\nmenubar-foreground: #ffffff\nmessage-background: &lt;&lt;colour background&gt;&gt;\nmessage-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmessage-foreground: rgba(255, 255, 255, 0.54)\nmodal-backdrop: &lt;&lt;colour page-background&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmodal-footer-background: &lt;&lt;colour background&gt;&gt;\nmodal-footer-border: &lt;&lt;colour background&gt;&gt;\nmodal-header-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmuted-foreground: #98989D\nnotification-background: &lt;&lt;colour dropdown-background&gt;&gt;\nnotification-border: &lt;&lt;colour dropdown-background&gt;&gt;\npage-background: #323232\npre-background: #464646\npre-border: transparent\nprimary: #0A84FF\nselect-tag-background: &lt;&lt;colour background&gt;&gt;\nselect-tag-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-button-foreground: &lt;&lt;colour background&gt;&gt;\nsidebar-controls-foreground-hover: #FF9F0A\nsidebar-controls-foreground: #8E8E93\nsidebar-foreground-shadow: transparent\nsidebar-foreground: rgba(255, 255, 255, 0.54)\nsidebar-muted-foreground-hover: rgba(255, 255, 255, 0.54)\nsidebar-muted-foreground: rgba(255, 255, 255, 0.38)\nsidebar-tab-background-selected: #3F638B\nsidebar-tab-background: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour background&gt;&gt;\nsidebar-tab-foreground-selected: rgba(255, 255, 255, 0.87)\nsidebar-tab-foreground: rgba(255, 255, 255, 0.54)\nsidebar-tiddler-link-foreground-hover: rgba(255, 255, 255, 0.7)\nsidebar-tiddler-link-foreground: rgba(255, 255, 255, 0.54)\nsite-title-foreground: #ffffff\nstatic-alert-foreground: #B4B4B4\ntab-background-selected: #3F638B\ntab-background: &lt;&lt;colour page-background&gt;&gt;\ntab-border-selected: &lt;&lt;colour page-background&gt;&gt;\ntab-border: &lt;&lt;colour page-background&gt;&gt;\ntab-divider: &lt;&lt;colour page-background&gt;&gt;\ntab-foreground-selected: rgba(255, 255, 255, 0.87)\ntab-foreground: rgba(255, 255, 255, 0.54)\ntable-border: #464646\ntable-footer-background: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;\ntable-header-background: &lt;&lt;colour tiddler-editor-fields-even&gt;&gt;\ntag-background: #48484A\ntag-foreground: #323232\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: transparent\ntiddler-controls-foreground-hover: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground-selected: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground: #48484A\ntiddler-editor-background: transparent\ntiddler-editor-border-image: \ntiddler-editor-border: rgba(255, 255, 255, 0.08)\ntiddler-editor-fields-even: rgba(255, 255, 255, 0.1)\ntiddler-editor-fields-odd: rgba(255, 255, 255, 0.04)\ntiddler-info-background: #1E1E1E\ntiddler-info-border: #1E1E1E\ntiddler-info-tab-background: #3F638B\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ntiddler-title-foreground: #FFFFFF\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: &lt;&lt;colour very-muted-foreground&gt;&gt;\nvery-muted-foreground: #464646\nselection-background: #3F638B\nselection-foreground: #ffffff\nwikilist-background: &lt;&lt;colour page-background&gt;&gt;\nwikilist-button-background: #3F638B\nwikilist-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nwikilist-button-open: #32D74B\nwikilist-button-open-hover: #32D74B\nwikilist-button-reveal: #0A84FF\nwikilist-button-reveal-hover: #0A84FF\nwikilist-button-remove: #FF453A\nwikilist-button-remove-hover: #FF453A\nwikilist-droplink-dragover: #32D74B\nwikilist-item: &lt;&lt;colour background&gt;&gt;\nwikilist-toolbar-background: &lt;&lt;colour background&gt;&gt;\nwikilist-title: &lt;&lt;colour foreground&gt;&gt;\nwikilist-title-svg: &lt;&lt;colour foreground&gt;&gt;\nwikilist-toolbar-foreground: &lt;&lt;colour foreground&gt;&gt;\nwikilist-url: &lt;&lt;colour muted-foreground&gt;&gt;\n"},"$:/palettes/DarkPhotos":{"title":"$:/palettes/DarkPhotos","created":"20150402111612188","description":"Good with dark photo backgrounds","modified":"20150402112344080","name":"DarkPhotos","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","color-scheme":"light","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #ffffff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background: \nbutton-foreground: \nbutton-border: \ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndirty-indicator: #ff0000\ndownload-background: #34c734\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333333\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #ddd\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #336438\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #5778d8\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #ccf\nsidebar-controls-foreground: #fff\nsidebar-foreground-shadow: rgba(0,0,0, 0.5)\nsidebar-foreground: #fff\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #eee\nsidebar-tab-background-selected: rgba(255,255,255, 0.8)\nsidebar-tab-background: rgba(255,255,255, 0.4)\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: rgba(255,255,255, 0.2)\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #aaf\nsidebar-tiddler-link-foreground: #ddf\nsite-title-foreground: #fff\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: #ffffff\ntab-background: #d8d8d8\ntab-border-selected: #d8d8d8\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #ec6\ntag-foreground: #ffffff\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #f8f8f8\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #f8f8f8\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #182955\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/DesertSand":{"title":"$:/palettes/DesertSand","tags":"$:/tags/Palette","color-scheme":"light","name":"Desert Sand","description":"A desert sand palette","type":"application/x-tiddler-dictionary","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #E9E0C7\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-foreground: &lt;&lt;colour foreground&gt;&gt;\ncode-background: #F3EDDF\ncode-border: #C3BAA1\ncode-foreground: #ab3250\ndiff-delete-background: #bd8b8b\ndiff-delete-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-equal-background: \ndiff-equal-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-insert-background: #91c093\ndiff-insert-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-invisible-background: \ndiff-invisible-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ndirty-indicator: #ad3434\ndownload-background: #6ca16c\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #E9E0C7\ndropdown-tab-background: #BAB29C\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #313163\nexternal-link-foreground: #555592\nforeground: #2D2A23\nmenubar-background: #CDC2A6\nmenubar-foreground: #5A5446\nmessage-background: #ECE5CF\nmessage-border: #D6CBAA\nmessage-foreground: #5f6e7d\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #8A8885\nmodal-footer-background: #CDC2A6\nmodal-footer-border: #9D998E\nmodal-header-border: #9D998E\nmuted-foreground: #9D998E\nnotification-background: #F0E9D7\nnotification-border: #939189\npage-background: #e0d3af\npre-background: #D6CBAA\npre-border: #CDC2A6\nprimary: #5B6F55\nselection-background: #9D947B\nselection-foreground: &lt;&lt;colour foreground&gt;&gt;\nselect-tag-background: #F0E9D7\nselect-tag-foreground: #2D2A23\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #2D2A23\nsidebar-controls-foreground: #867F69\nsidebar-foreground-shadow: transparent\nsidebar-foreground: #867F69\nsidebar-muted-foreground-hover: #706A58\nsidebar-muted-foreground: #B3A98C\nsidebar-tab-background-selected: #e0d3af\nsidebar-tab-background: #A6A193\nsidebar-tab-border-selected: #C3BAA1\nsidebar-tab-border: #C3BAA1\nsidebar-tab-divider: #CDC2A6\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: #2D2A23\nsidebar-tiddler-link-foreground-hover: #433F35\nsidebar-tiddler-link-foreground: #706A58\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #A6A193\ntab-background-selected: #E9E0C7\ntab-background: #A6A193\ntab-border-selected: #C3BAA1\ntab-border: #C3BAA1\ntab-divider: #CDC2A6\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #2D2A23\ntable-border: #9D998E\ntable-footer-background: #8A8885\ntable-header-background: #B0AA98\ntag-background: #706A58\ntag-foreground: #E3D7B7\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #9D947B\ntiddler-controls-foreground-selected: #706A58\ntiddler-controls-foreground: #C3BAA1\ntiddler-editor-background: #E9E0C7\ntiddler-editor-border-image: #A6A193\ntiddler-editor-border: #A6A193\ntiddler-editor-fields-even: #D6CBAA\ntiddler-editor-fields-odd: #C3BAA1\ntiddler-info-background: #E3D7B7\ntiddler-info-border: #BAB29C\ntiddler-info-tab-background: #E9E0C7\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #867F69\ntiddler-title-foreground: #374464\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: #8A8885\nvery-muted-foreground: #CDC2A6\nwikilist-background: &lt;&lt;colour page-background&gt;&gt;\nwikilist-item: #CDC2A6\nwikilist-info: #161512\nwikilist-title: #433F35\nwikilist-title-svg: &lt;&lt;colour wikilist-title&gt;&gt;\nwikilist-url: #706A58\nwikilist-button-open: #7db66a\nwikilist-button-open-hover: #56a556\nwikilist-button-reveal: #5a6c9e\nwikilist-button-reveal-hover: #454591\nwikilist-button-remove: #bc5972\nwikilist-button-remove-hover: #814040\nwikilist-toolbar-background: #CDC2A6\nwikilist-toolbar-foreground: #2D2A23\nwikilist-droplink-dragover: rgba(255,192,192,0.5)\nwikilist-button-background: #A6A193\nwikilist-button-foreground: #161512\n"},"$:/palettes/GruvboxDark":{"title":"$:/palettes/GruvboxDark","name":"Gruvbox Dark","color-scheme":"dark","description":"Retro groove color scheme","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","license":"https://github.com/morhetz/gruvbox","text":"alert-background: #cc241d\nalert-border: #cc241d\nalert-highlight: #d79921\nalert-muted-foreground: #504945\nbackground: #3c3836\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-foreground: &lt;&lt;colour page-background&gt;&gt;\ncode-background: #504945\ncode-border: #504945\ncode-foreground: #fb4934\ndiff-delete-background: #fb4934\ndiff-delete-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-equal-background: \ndiff-equal-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-insert-background: #b8bb26\ndiff-insert-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-invisible-background: \ndiff-invisible-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ndirty-indicator: #fb4934\ndownload-background: #b8bb26\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: #665c54\ndropdown-border: &lt;&lt;colour background&gt;&gt;\ndropdown-tab-background-selected: #ebdbb2\ndropdown-tab-background: #665c54\ndropzone-background: #98971a\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #d3869b\nexternal-link-foreground: #8ec07c\nforeground: #fbf1c7\nmenubar-background: #504945\nmenubar-foreground: &lt;&lt;colour foreground&gt;&gt;\nmessage-background: #83a598\nmessage-border: #83a598\nmessage-foreground: #3c3836\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #504945\nmodal-footer-background: #3c3836\nmodal-footer-border: #3c3836\nmodal-header-border: #3c3836\nmuted-foreground: #d5c4a1\nnotification-background: &lt;&lt;colour primary&gt;&gt;\nnotification-border: &lt;&lt;colour primary&gt;&gt;\npage-background: #282828\npre-background: #504945\npre-border: #504945\nprimary: #d79921\nselect-tag-background: #665c54\nselect-tag-foreground: &lt;&lt;colour foreground&gt;&gt;\nselection-background: #458588\nselection-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-button-foreground: &lt;&lt;colour page-background&gt;&gt;\nsidebar-controls-foreground-hover: #7c6f64\nsidebar-controls-foreground: #504945\nsidebar-foreground-shadow: transparent\nsidebar-foreground: #fbf1c7\nsidebar-muted-foreground-hover: #7c6f64\nsidebar-muted-foreground: #504945\nsidebar-tab-background-selected: #bdae93\nsidebar-tab-background: #3c3836\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: #bdae93\nsidebar-tab-divider: &lt;&lt;colour page-background&gt;&gt;\nsidebar-tab-foreground-selected: #282828\nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #458588\nsidebar-tiddler-link-foreground: #98971a\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #B48EAD\ntab-background-selected: #ebdbb2\ntab-background: #665c54\ntab-border-selected: #665c54\ntab-border: #665c54\ntab-divider: #bdae93\ntab-foreground-selected: #282828\ntab-foreground: #ebdbb2\ntable-border: #7c6f64\ntable-footer-background: #665c54\ntable-header-background: #504945\ntag-background: #d3869b\ntag-foreground: #282828\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #7c6f64\ntiddler-controls-foreground-selected: &lt;&lt;colour primary&gt;&gt;\ntiddler-controls-foreground: #665c54\ntiddler-editor-background: #32302f\ntiddler-editor-border-image: #282828\ntiddler-editor-border: #282828\ntiddler-editor-fields-even: #504945\ntiddler-editor-fields-odd: #7c6f64\ntiddler-info-background: #32302f\ntiddler-info-border: #ebdbb2\ntiddler-info-tab-background: #ebdbb2\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #7c6f64\ntiddler-title-foreground: #a89984\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: #504945\nvery-muted-foreground: #bdae93\nwikilist-background: &lt;&lt;colour page-background&gt;&gt;\nwikilist-button-background: #acacac\nwikilist-button-foreground: &lt;&lt;colour button-foreground&gt;&gt;\nwikilist-item: &lt;&lt;colour background&gt;&gt;\nwikilist-toolbar-background: &lt;&lt;colour background&gt;&gt;\nwikilist-toolbar-foreground: &lt;&lt;colour foreground&gt;&gt;\nwikilist-title: &lt;&lt;colour foreground&gt;&gt;\nwikilist-title-svg: &lt;&lt;colour wikilist-title&gt;&gt;\nwikilist-url: &lt;&lt;colour muted-foreground&gt;&gt;\nwikilist-button-open-hover: &lt;&lt;colour primary&gt;&gt;\nwikilist-button-open: &lt;&lt;colour dropzone-background&gt;&gt;\nwikilist-button-remove: &lt;&lt;colour dirty-indicator&gt;&gt;\nwikilist-button-remove-hover: &lt;&lt;colour alert-background&gt;&gt;\nwikilist-droplink-dragover: &lt;&lt;colour dropzone-background&gt;&gt;\nwikilist-button-reveal: &lt;&lt;colour sidebar-tiddler-link-foreground-hover&gt;&gt;\nwikilist-button-reveal-hover: &lt;&lt;colour message-background&gt;&gt;\n"},"$:/palettes/Nord":{"title":"$:/palettes/Nord","name":"Nord","color-scheme":"dark","description":"An arctic, north-bluish color palette.","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","license":"MIT, arcticicestudio, https://github.com/arcticicestudio/nord/blob/develop/LICENSE.md","text":"alert-background: #D08770\nalert-border: #D08770\nalert-highlight: #B48EAD\nalert-muted-foreground: #4C566A\nbackground: #3b4252\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-foreground: &lt;&lt;colour page-background&gt;&gt;\ncode-background: #2E3440\ncode-border: #2E3440\ncode-foreground: #BF616A\ndiff-delete-background: #BF616A\ndiff-delete-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-equal-background: \ndiff-equal-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-insert-background: #A3BE8C\ndiff-insert-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-invisible-background: \ndiff-invisible-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ndirty-indicator: #BF616A\ndownload-background: #A3BE8C\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour background&gt;&gt;\ndropdown-tab-background-selected: #ECEFF4\ndropdown-tab-background: #4C566A\ndropzone-background: #A3BE8C\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #5E81AC\nexternal-link-foreground: #8FBCBB\nforeground: #d8dee9\nmenubar-background: #2E3440\nmenubar-foreground: #d8dee9\nmessage-background: #2E3440\nmessage-border: #2E3440\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #3b4252\nmodal-footer-background: #3b4252\nmodal-footer-border: #3b4252\nmodal-header-border: #3b4252\nmuted-foreground: #4C566A\nnotification-background: &lt;&lt;colour primary&gt;&gt;\nnotification-border: #EBCB8B\npage-background: #2e3440\npre-background: #2E3440\npre-border: #2E3440\nprimary: #5E81AC\nselect-tag-background: #3b4252\nselect-tag-foreground: &lt;&lt;colour foreground&gt;&gt;\nselection-background: #5E81AC\nselection-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-button-foreground: &lt;&lt;colour page-background&gt;&gt;\nsidebar-controls-foreground-hover: #D8DEE9\nsidebar-controls-foreground: #4C566A\nsidebar-foreground-shadow: transparent\nsidebar-foreground: #D8DEE9\nsidebar-muted-foreground-hover: #4C566A\nsidebar-muted-foreground: #4C566A\nsidebar-tab-background-selected: #ECEFF4\nsidebar-tab-background: #4C566A\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: #4C566A\nsidebar-tab-divider: &lt;&lt;colour page-background&gt;&gt;\nsidebar-tab-foreground-selected: #4C566A\nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #A3BE8C\nsidebar-tiddler-link-foreground: #81A1C1\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #B48EAD\ntab-background-selected: #ECEFF4\ntab-background: #4C566A\ntab-border-selected: #4C566A\ntab-border: #4C566A\ntab-divider: #4C566A\ntab-foreground-selected: #4C566A\ntab-foreground: #D8DEE9\ntable-border: #4C566A\ntable-footer-background: #2e3440\ntable-header-background: #2e3440\ntag-background: #A3BE8C\ntag-foreground: #4C566A\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: \ntiddler-controls-foreground-selected: #EBCB8B\ntiddler-controls-foreground: #4C566A\ntiddler-editor-background: #2e3440\ntiddler-editor-border-image: #2e3440\ntiddler-editor-border: #3b4252\ntiddler-editor-fields-even: #2e3440\ntiddler-editor-fields-odd: #2e3440\ntiddler-info-background: #2e3440\ntiddler-info-border: #2e3440\ntiddler-info-tab-background: #2e3440\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #4C566A\ntiddler-title-foreground: #81A1C1\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: #2d3038\nvery-muted-foreground: #2d3038\nwikilist-background: &lt;&lt;colour page-background&gt;&gt;\nwikilist-toolbar-background: &lt;&lt;colour background&gt;&gt;\nwikilist-item: &lt;&lt;colour background&gt;&gt;\nwikilist-title: &lt;&lt;colour foreground&gt;&gt;\nwikilist-info: &lt;&lt;colour muted-foreground&gt;&gt;\nwikilist-button-open: #A3BE8C\nwikilist-button-open-hover: #A3BE8C\nwikilist-button-reveal: #81A1C1\nwikilist-button-reveal-hover: #81A1C1\nwikilist-button-remove: #B48EAD\nwikilist-button-remove-hover: #B48EAD\n"},"$:/palettes/Rocker":{"title":"$:/palettes/Rocker","name":"Rocker","color-scheme":"dark","description":"A dark theme","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #ffffff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background:\nbutton-foreground:\nbutton-border:\ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndirty-indicator: #ff0000\ndownload-background: #34c734\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333333\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #999999\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #000\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #cc0000\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #000000\nsidebar-controls-foreground: #ffffff\nsidebar-foreground-shadow: rgba(255,255,255, 0.0)\nsidebar-foreground: #acacac\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #c0c0c0\nsidebar-tab-background-selected: #000\nsidebar-tab-background: &lt;&lt;colour tab-background&gt;&gt;\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\nsidebar-tab-foreground-selected: \nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #ffbb99\nsidebar-tiddler-link-foreground: #cc0000\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: #ffffff\ntab-background: #d8d8d8\ntab-border-selected: #d8d8d8\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #ffbb99\ntag-foreground: #000\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #f8f8f8\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #f8f8f8\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #cc0000\ntoolbar-new-button:\ntoolbar-options-button:\ntoolbar-save-button:\ntoolbar-info-button:\ntoolbar-edit-button:\ntoolbar-close-button:\ntoolbar-delete-button:\ntoolbar-cancel-button:\ntoolbar-done-button:\nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/SolarFlare":{"title":"$:/palettes/SolarFlare","name":"Solar Flare","color-scheme":"light","description":"Warm, relaxing earth colours","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","text":": Background Tones\n\nbase03: #002b36\nbase02: #073642\n\n: Content Tones\n\nbase01: #586e75\nbase00: #657b83\nbase0: #839496\nbase1: #93a1a1\n\n: Background Tones\n\nbase2: #eee8d5\nbase3: #fdf6e3\n\n: Accent Colors\n\nyellow: #b58900\norange: #cb4b16\nred: #dc322f\nmagenta: #d33682\nviolet: #6c71c4\nblue: #268bd2\ncyan: #2aa198\ngreen: #859900\n\n: Additional Tones (RA)\n\nbase10: #c0c4bb\nviolet-muted: #7c81b0\nblue-muted: #4e7baa\n\nyellow-hot: #ffcc44\norange-hot: #eb6d20\nred-hot: #ff2222\nblue-hot: #2298ee\ngreen-hot: #98ee22\n\n: Palette\n\n: Do not use colour macro for background and foreground\nbackground: #fdf6e3\n    download-foreground: &lt;&lt;colour background&gt;&gt;\n    dragger-foreground: &lt;&lt;colour background&gt;&gt;\n    dropdown-background: &lt;&lt;colour background&gt;&gt;\n    modal-background: &lt;&lt;colour background&gt;&gt;\n    sidebar-foreground-shadow: &lt;&lt;colour background&gt;&gt;\n    tiddler-background: &lt;&lt;colour background&gt;&gt;\n    tiddler-border: &lt;&lt;colour background&gt;&gt;\n    tiddler-link-background: &lt;&lt;colour background&gt;&gt;\n    tab-background-selected: &lt;&lt;colour background&gt;&gt;\n        dropdown-tab-background-selected: &lt;&lt;colour tab-background-selected&gt;&gt;\nforeground: #657b83\n    dragger-background: &lt;&lt;colour foreground&gt;&gt;\n    tab-foreground: &lt;&lt;colour foreground&gt;&gt;\n        tab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\n            sidebar-tab-foreground-selected: &lt;&lt;colour tab-foreground-selected&gt;&gt;\n        sidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\n    sidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\n    sidebar-controls-foreground: &lt;&lt;colour foreground&gt;&gt;\n    sidebar-foreground: &lt;&lt;colour foreground&gt;&gt;\n: base03\n: base02\n: base01\n    alert-muted-foreground: &lt;&lt;colour base01&gt;&gt;\n: base00\n    code-foreground: &lt;&lt;colour base00&gt;&gt;\n    message-foreground: &lt;&lt;colour base00&gt;&gt;\n    tag-foreground: &lt;&lt;colour base00&gt;&gt;\n: base0\n    sidebar-tiddler-link-foreground: &lt;&lt;colour base0&gt;&gt;\n: base1\n    muted-foreground: &lt;&lt;colour base1&gt;&gt;\n        blockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\n        dropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\n        sidebar-muted-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\n        tiddler-title-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\n            site-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\n: base2\n    modal-footer-background: &lt;&lt;colour base2&gt;&gt;\n    page-background: &lt;&lt;colour base2&gt;&gt;\n        modal-backdrop: &lt;&lt;colour page-background&gt;&gt;\n        notification-background: &lt;&lt;colour page-background&gt;&gt;\n        code-background: &lt;&lt;colour page-background&gt;&gt;\n            code-border: &lt;&lt;colour code-background&gt;&gt;\n        pre-background: &lt;&lt;colour page-background&gt;&gt;\n            pre-border: &lt;&lt;colour pre-background&gt;&gt;\n        sidebar-tab-background-selected: &lt;&lt;colour page-background&gt;&gt;\n    table-header-background: &lt;&lt;colour base2&gt;&gt;\n    tag-background: &lt;&lt;colour base2&gt;&gt;\n    tiddler-editor-background: &lt;&lt;colour base2&gt;&gt;\n    tiddler-info-background: &lt;&lt;colour base2&gt;&gt;\n    tiddler-info-tab-background: &lt;&lt;colour base2&gt;&gt;\n    tab-background: &lt;&lt;colour base2&gt;&gt;\n        dropdown-tab-background: &lt;&lt;colour tab-background&gt;&gt;\n: base3\n    alert-background: &lt;&lt;colour base3&gt;&gt;\n    message-background: &lt;&lt;colour base3&gt;&gt;\n: yellow\n: orange\n: red\n: magenta\n    alert-highlight: &lt;&lt;colour magenta&gt;&gt;\n: violet\n    external-link-foreground: &lt;&lt;colour violet&gt;&gt;\n: blue\n: cyan\n: green\n: base10\n    tiddler-controls-foreground: &lt;&lt;colour base10&gt;&gt;\n: violet-muted\n    external-link-foreground-visited: &lt;&lt;colour violet-muted&gt;&gt;\n: blue-muted\n    primary: &lt;&lt;colour blue-muted&gt;&gt;\n        download-background: &lt;&lt;colour primary&gt;&gt;\n        tiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\n\nalert-border: #b99e2f\ndirty-indicator: #ff0000\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nmessage-border: #cfd6e6\nmodal-border: #999999\nselect-tag-background:\nselect-tag-foreground:\nsidebar-controls-foreground-hover:\nsidebar-muted-foreground-hover:\nsidebar-tab-background: #ded8c5\nsidebar-tiddler-link-foreground-hover:\nstatic-alert-foreground: #aaaaaa\ntab-border: #cccccc\n    modal-footer-border: &lt;&lt;colour tab-border&gt;&gt;\n    modal-header-border: &lt;&lt;colour tab-border&gt;&gt;\n    notification-border: &lt;&lt;colour tab-border&gt;&gt;\n    sidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\n    tab-border-selected: &lt;&lt;colour tab-border&gt;&gt;\n        sidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\ntab-divider: #d8d8d8\n    sidebar-tab-divider: &lt;&lt;colour tab-divider&gt;&gt;\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-border: #dddddd\ntiddler-subtitle-foreground: #c0c0c0\ntoolbar-new-button:\ntoolbar-options-button:\ntoolbar-save-button:\ntoolbar-info-button:\ntoolbar-edit-button:\ntoolbar-close-button:\ntoolbar-delete-button:\ntoolbar-cancel-button:\ntoolbar-done-button:\nuntagged-background: #999999\nvery-muted-foreground: #888888\n"},"$:/palettes/SolarizedDark":{"title":"$:/palettes/SolarizedDark","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","description":"Precision dark colors for machines and people","license":"MIT, Ethan Schoonover, https://github.com/altercation/solarized/blob/master/LICENSE","name":"SolarizedDark","color-scheme":"dark","text":"alert-background: #073642\nalert-border: #93a1a1\nalert-highlight: #d33682\nalert-muted-foreground: #d33682\nbackground: #073642\nblockquote-bar: #d33682\nbutton-background: #073642\nbutton-border: #586e75\nbutton-foreground: #93a1a1\ncode-background: #073642\ncode-border: #586e75\ncode-foreground: #93a1a1\ndirty-indicator: inherit\ndownload-background: #859900\ndownload-foreground: #073642\ndragger-background: #073642\ndragger-foreground: #839496\ndropdown-background: #073642\ndropdown-border: #93a1a1\ndropdown-tab-background: #002b36\ndropdown-tab-background-selected: #073642\ndropzone-background: #859900\nexternal-link-background: inherit\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-foreground: #268bd2\nexternal-link-foreground-hover:\nexternal-link-foreground-visited: #268bd2\nforeground: #839496\nmessage-background: #002b36\nmessage-border: #586e75\nmessage-foreground: #839496\nmodal-backdrop: #657b83\nmodal-background: #002b36\nmodal-border: #586e75\nmodal-footer-background: #073642\nmodal-footer-border: #586e75\nmodal-header-border: #586e75\nmuted-foreground: #93a1a1\nnotification-background: #002b36\nnotification-border: #586e75\npage-background: #073642\npre-background: inherit\npre-border: #657b83\nprimary: #859900\nselect-tag-background: #002b36\nselect-tag-foreground: #839496\nsidebar-button-foreground: #93a1a1\nsidebar-controls-foreground: #93a1a1\nsidebar-controls-foreground-hover: #eee8d5\nsidebar-foreground: #93a1a1\nsidebar-foreground-shadow: transparent\nsidebar-muted-foreground: #839496\nsidebar-muted-foreground-hover: #93a1a1\nsidebar-tab-background: #002b36\nsidebar-tab-background-selected: #073642\nsidebar-tab-border: #073642\nsidebar-tab-border-selected: #839496\nsidebar-tab-divider: #002b36\nsidebar-tab-foreground: #657b83\nsidebar-tab-foreground-selected: #93a1a1\nsidebar-tiddler-link-foreground: #2aa198\nsidebar-tiddler-link-foreground-hover: #eee8d5\nsite-title-foreground: #d33682\nstatic-alert-foreground: #93a1a1\ntab-background: #073642\ntab-background-selected: #002b36\ntab-border: #586e75\ntab-border-selected: #93a1a1\ntab-divider: #93a1a1\ntab-foreground: #839496\ntab-foreground-selected: #93a1a1\ntable-border: #586e75\ntable-footer-background: #073642\ntable-header-background: #073642\ntag-background: #b58900\ntag-foreground: #002b36\ntiddler-background: #002b36\ntiddler-border: #586e75\ntiddler-controls-foreground: inherit\ntiddler-controls-foreground-hover: #d33682\ntiddler-controls-foreground-selected: #2aa198\ntiddler-editor-background: #002b36\ntiddler-editor-border: #073642\ntiddler-editor-border-image: #002b36\ntiddler-editor-fields-even: #002b36\ntiddler-editor-fields-odd: #073642\ntiddler-info-background: #073642\ntiddler-info-border: #657b83\ntiddler-info-tab-background: #002b36\ntiddler-link-background: #002b36\ntiddler-link-foreground: #2aa198\ntiddler-subtitle-foreground: #839496\ntiddler-title-foreground: #d33682\ntoolbar-cancel-button: #839496\ntoolbar-close-button: #839496\ntoolbar-delete-button: #dc322f\ntoolbar-done-button: #839496\ntoolbar-edit-button: #839496\ntoolbar-info-button: #839496\ntoolbar-new-button: #839496\ntoolbar-options-button: #839496\ntoolbar-save-button: inherit\nuntagged-background: #586e75\nvery-muted-foreground: #586e75\n"},"$:/palettes/SolarizedLight":{"title":"$:/palettes/SolarizedLight","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","description":"Precision colors for machines and people","license":"MIT, Ethan Schoonover, https://github.com/altercation/solarized/blob/master/LICENSE","name":"SolarizedLight","color-scheme":"light","text":"alert-background: #eee8d5\nalert-border: #586e75\nalert-highlight: #d33682\nalert-muted-foreground: #d33682\nbackground: #eee8d5\nblockquote-bar: #d33682\nbutton-background: #eee8d5\nbutton-border: #93a1a1\nbutton-foreground: #586e75\ncode-background: #eee8d5\ncode-border: #93a1a1\ncode-foreground: #586e75\ndirty-indicator: inherit\ndownload-background: #859900\ndownload-foreground: #eee8d5\ndragger-background: #eee8d5\ndragger-foreground: #657b83\ndropdown-background: #eee8d5\ndropdown-border: #586e75\ndropdown-tab-background: #fdf6e3\ndropdown-tab-background-selected: #eee8d5\ndropzone-background: #859900\nexternal-link-background: inherit\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-foreground: #268bd2\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #268bd2\nforeground: #657b83\nmessage-background: #fdf6e3\nmessage-border: #93a1a1\nmessage-foreground: #657b83\nmodal-backdrop: #839496\nmodal-background: #fdf6e3\nmodal-border: #93a1a1\nmodal-footer-background: #eee8d5\nmodal-footer-border: #93a1a1\nmodal-header-border: #93a1a1\nmuted-foreground: #586e75\nnotification-background: #fdf6e3\nnotification-border: #93a1a1\npage-background: #eee8d5\npre-background: #eee8d5\npre-border: #839496\nprimary: #859900\nselect-tag-background: #fdf6e3\nselect-tag-foreground: #657b83\nsidebar-button-foreground: #586e75\nsidebar-controls-foreground: #586e75\nsidebar-controls-foreground-hover: #d33682\nsidebar-foreground: #586e75\nsidebar-foreground-shadow: transparent\nsidebar-muted-foreground: #657b83\nsidebar-muted-foreground-hover: #586e75\nsidebar-tab-background: #fdf6e3\nsidebar-tab-background-selected: #eee8d5\nsidebar-tab-border: #eee8d5\nsidebar-tab-border-selected: #657b83\nsidebar-tab-divider: #fdf6e3\nsidebar-tab-foreground: #839496\nsidebar-tab-foreground-selected: #586e75\nsidebar-tiddler-link-foreground: #2aa198\nsidebar-tiddler-link-foreground-hover: #002b36\nsite-title-foreground: #d33682\nstatic-alert-foreground: #586e75\ntab-background: #eee8d5\ntab-background-selected: #fdf6e3\ntab-border: #93a1a1\ntab-border-selected: #586e75\ntab-divider: #586e75\ntab-foreground: #657b83\ntab-foreground-selected: #586e75\ntable-border: #93a1a1\ntable-footer-background: #eee8d5\ntable-header-background: #eee8d5\ntag-background: #b58900\ntag-foreground: #fdf6e3\ntiddler-background: #fdf6e3\ntiddler-border: #93a1a1\ntiddler-controls-foreground: inherit\ntiddler-controls-foreground-hover: #d33682\ntiddler-controls-foreground-selected: #2aa198\ntiddler-editor-background: #fdf6e3\ntiddler-editor-border: #eee8d5\ntiddler-editor-border-image: #fdf6e3\ntiddler-editor-fields-even: #fdf6e3\ntiddler-editor-fields-odd: #eee8d5\ntiddler-info-background: #eee8d5\ntiddler-info-border: #839496\ntiddler-info-tab-background: #fdf6e3\ntiddler-link-background: #fdf6e3\ntiddler-link-foreground: #2aa198\ntiddler-subtitle-foreground: #657b83\ntiddler-title-foreground: #d33682\ntoolbar-cancel-button: #657b83\ntoolbar-close-button: #657b83\ntoolbar-delete-button: #dc322f\ntoolbar-done-button: #657b83\ntoolbar-edit-button: #657b83\ntoolbar-info-button: #657b83\ntoolbar-new-button: #657b83\ntoolbar-options-button: #657b83\ntoolbar-save-button: inherit\nuntagged-background: #586e75\nvery-muted-foreground: #93a1a1\n"},"$:/palettes/SpartanDay":{"title":"$:/palettes/SpartanDay","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","description":"Cold, spartan day colors","name":"Spartan Day","color-scheme":"light","text":"alert-background: &lt;&lt;colour background&gt;&gt;\nalert-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nalert-highlight: &lt;&lt;colour very-muted-foreground&gt;&gt;\nalert-muted-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\nbackground: #FAFAFA\nblockquote-bar: &lt;&lt;colour page-background&gt;&gt;\nbutton-background: transparent\nbutton-foreground: inherit\nbutton-border: &lt;&lt;colour tag-background&gt;&gt;\ncode-background: #ececec\ncode-border: #ececec\ncode-foreground: \ndirty-indicator: #c80000\ndownload-background: &lt;&lt;colour primary&gt;&gt;\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: #FFFFFF\ndropdown-border: &lt;&lt;colour dropdown-background&gt;&gt;\ndropdown-tab-background-selected: &lt;&lt;colour dropdown-background&gt;&gt;\ndropdown-tab-background: #F5F5F5\ndropzone-background: &lt;&lt;colour tag-background&gt;&gt;\nexternal-link-background-hover: transparent\nexternal-link-background-visited: transparent\nexternal-link-background: transparent\nexternal-link-foreground-hover: \nexternal-link-foreground-visited: \nexternal-link-foreground: \nforeground: rgba(0, 0, 0, 0.87)\nmessage-background: &lt;&lt;colour background&gt;&gt;\nmessage-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmessage-foreground: rgba(0, 0, 0, 0.54)\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmodal-footer-background: &lt;&lt;colour background&gt;&gt;\nmodal-footer-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmodal-header-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmuted-foreground: rgba(0, 0, 0, 0.54)\nnotification-background: &lt;&lt;colour dropdown-background&gt;&gt;\nnotification-border: &lt;&lt;colour dropdown-background&gt;&gt;\npage-background: #f4f4f4\npre-background: #ececec\npre-border: #ececec\nprimary: #3949ab\nselect-tag-background: &lt;&lt;colour background&gt;&gt;\nselect-tag-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #aeaeae\nsidebar-controls-foreground: #c6c6c6\nsidebar-foreground-shadow: transparent\nsidebar-foreground: rgba(0, 0, 0, 0.54)\nsidebar-muted-foreground-hover: rgba(0, 0, 0, 0.54)\nsidebar-muted-foreground: rgba(0, 0, 0, 0.38)\nsidebar-tab-background-selected: &lt;&lt;colour page-background&gt;&gt;\nsidebar-tab-background: transparent\nsidebar-tab-border-selected: &lt;&lt;colour table-border&gt;&gt;\nsidebar-tab-border: transparent\nsidebar-tab-divider: &lt;&lt;colour table-border&gt;&gt;\nsidebar-tab-foreground-selected: rgba(0, 0, 0, 0.87)\nsidebar-tab-foreground: rgba(0, 0, 0, 0.54)\nsidebar-tiddler-link-foreground-hover: rgba(0, 0, 0, 0.87)\nsidebar-tiddler-link-foreground: rgba(0, 0, 0, 0.54)\nsite-title-foreground: rgba(0, 0, 0, 0.87)\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: &lt;&lt;colour background&gt;&gt;\ntab-background: transparent\ntab-border-selected: &lt;&lt;colour table-border&gt;&gt;\ntab-border: transparent\ntab-divider: &lt;&lt;colour table-border&gt;&gt;\ntab-foreground-selected: rgba(0, 0, 0, 0.87)\ntab-foreground: rgba(0, 0, 0, 0.54)\ntable-border: #d8d8d8\ntable-footer-background: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;\ntable-header-background: &lt;&lt;colour tiddler-editor-fields-even&gt;&gt;\ntag-background: #ec6\ntag-foreground: &lt;&lt;colour button-foreground&gt;&gt;\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: #f9f9f9\ntiddler-controls-foreground-hover: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground-selected: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground: &lt;&lt;colour sidebar-controls-foreground&gt;&gt;\ntiddler-editor-background: transparent\ntiddler-editor-border-image: \ntiddler-editor-border: #e8e7e7\ntiddler-editor-fields-even: rgba(0, 0, 0, 0.1)\ntiddler-editor-fields-odd: rgba(0, 0, 0, 0.04)\ntiddler-info-background: #F5F5F5\ntiddler-info-border: #F5F5F5\ntiddler-info-tab-background: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ntiddler-title-foreground: #000000\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: &lt;&lt;colour very-muted-foreground&gt;&gt;\nvery-muted-foreground: rgba(0, 0, 0, 0.12)\n"},"$:/palettes/SpartanNight":{"title":"$:/palettes/SpartanNight","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","description":"Dark spartan colors","name":"Spartan Night","color-scheme":"dark","text":"alert-background: &lt;&lt;colour background&gt;&gt;\nalert-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nalert-highlight: &lt;&lt;colour very-muted-foreground&gt;&gt;\nalert-muted-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\nbackground: #303030\nblockquote-bar: &lt;&lt;colour page-background&gt;&gt;\nbutton-background: transparent\nbutton-foreground: inherit\nbutton-border: &lt;&lt;colour tag-background&gt;&gt;\ncode-background: &lt;&lt;colour pre-background&gt;&gt;\ncode-border: &lt;&lt;colour pre-border&gt;&gt;\ncode-foreground: rgba(255, 255, 255, 0.54)\ndirty-indicator: #c80000\ndownload-background: &lt;&lt;colour primary&gt;&gt;\ndownload-foreground: &lt;&lt;colour foreground&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: #424242\ndropdown-border: &lt;&lt;colour dropdown-background&gt;&gt;\ndropdown-tab-background-selected: &lt;&lt;colour dropdown-background&gt;&gt;\ndropdown-tab-background: #050505\ndropzone-background: &lt;&lt;colour tag-background&gt;&gt;\nexternal-link-background-hover: transparent\nexternal-link-background-visited: transparent\nexternal-link-background: transparent\nexternal-link-foreground-hover: \nexternal-link-foreground-visited: #7c318c\nexternal-link-foreground: #9e3eb3\nforeground: rgba(255, 255, 255, 0.7)\nmessage-background: &lt;&lt;colour background&gt;&gt;\nmessage-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmessage-foreground: rgba(255, 255, 255, 0.54)\nmodal-backdrop: &lt;&lt;colour page-background&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmodal-footer-background: &lt;&lt;colour background&gt;&gt;\nmodal-footer-border: &lt;&lt;colour background&gt;&gt;\nmodal-header-border: &lt;&lt;colour very-muted-foreground&gt;&gt;\nmuted-foreground: rgba(255, 255, 255, 0.54)\nnotification-background: &lt;&lt;colour dropdown-background&gt;&gt;\nnotification-border: &lt;&lt;colour dropdown-background&gt;&gt;\npage-background: #212121\npre-background: #2a2a2a\npre-border: transparent\nprimary: #5656f3\nselect-tag-background: &lt;&lt;colour background&gt;&gt;\nselect-tag-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #494949\nsidebar-controls-foreground: #5d5d5d\nsidebar-foreground-shadow: transparent\nsidebar-foreground: rgba(255, 255, 255, 0.54)\nsidebar-muted-foreground-hover: rgba(255, 255, 255, 0.54)\nsidebar-muted-foreground: rgba(255, 255, 255, 0.38)\nsidebar-tab-background-selected: &lt;&lt;colour page-background&gt;&gt;\nsidebar-tab-background: transparent\nsidebar-tab-border-selected: &lt;&lt;colour table-border&gt;&gt;\nsidebar-tab-border: transparent\nsidebar-tab-divider: &lt;&lt;colour table-border&gt;&gt;\nsidebar-tab-foreground-selected: rgba(255, 255, 255, 0.87)\nsidebar-tab-foreground: rgba(255, 255, 255, 0.54)\nsidebar-tiddler-link-foreground-hover: rgba(255, 255, 255, 0.7)\nsidebar-tiddler-link-foreground: rgba(255, 255, 255, 0.54)\nsite-title-foreground: rgba(255, 255, 255, 0.7)\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: &lt;&lt;colour background&gt;&gt;\ntab-background: transparent\ntab-border-selected: &lt;&lt;colour table-border&gt;&gt;\ntab-border: transparent\ntab-divider: &lt;&lt;colour table-border&gt;&gt;\ntab-foreground-selected: rgba(255, 255, 255, 0.87)\ntab-foreground: rgba(255, 255, 255, 0.54)\ntable-border: #3a3a3a\ntable-footer-background: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;\ntable-header-background: &lt;&lt;colour tiddler-editor-fields-even&gt;&gt;\ntag-background: #ec6\ntag-foreground: &lt;&lt;colour button-foreground&gt;&gt;\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: rgb(55,55,55)\ntiddler-controls-foreground-hover: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground-selected: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;\ntiddler-controls-foreground: &lt;&lt;colour sidebar-controls-foreground&gt;&gt;\ntiddler-editor-background: transparent\ntiddler-editor-border-image: \ntiddler-editor-border: rgba(255, 255, 255, 0.08)\ntiddler-editor-fields-even: rgba(255, 255, 255, 0.1)\ntiddler-editor-fields-odd: rgba(255, 255, 255, 0.04)\ntiddler-info-background: #454545\ntiddler-info-border: #454545\ntiddler-info-tab-background: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ntiddler-title-foreground: #FFFFFF\ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \ntoolbar-info-button: \ntoolbar-edit-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-cancel-button: \ntoolbar-done-button: \nuntagged-background: &lt;&lt;colour very-muted-foreground&gt;&gt;\nvery-muted-foreground: rgba(255, 255, 255, 0.12)\n"},"$:/palettes/Twilight":{"title":"$:/palettes/Twilight","tags":"$:/tags/Palette","author":"Thomas Elmiger","type":"application/x-tiddler-dictionary","name":"Twilight","description":"Delightful, soft darkness.","color-scheme":"dark","text":"alert-background: rgb(255, 255, 102)\nalert-border: rgb(232, 232, 125)\nalert-highlight: rgb(255, 51, 51)\nalert-muted-foreground: rgb(224, 82, 82)\nbackground: rgb(38, 38, 38)\nblockquote-bar: rgba(240, 196, 117, 0.7)\nbutton-background: rgb(63, 63, 63)\nbutton-border: rgb(127, 127, 127)\nbutton-foreground: rgb(179, 179, 179)\ncode-background: rgba(0,0,0,0.03)\ncode-border: rgba(0,0,0,0.08)\ncode-foreground: rgb(255, 94, 94)\ndiff-delete-background: #ffc9c9\ndiff-delete-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-equal-background: \ndiff-equal-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-insert-background: #aaefad\ndiff-insert-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-invisible-background: \ndiff-invisible-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ndirty-indicator: rgb(255, 94, 94)\ndownload-background: #19a974\ndownload-foreground: rgb(38, 38, 38)\ndragger-background: rgb(179, 179, 179)\ndragger-foreground: rgb(38, 38, 38)\ndropdown-background: rgb(38, 38, 38)\ndropdown-border: rgb(255, 255, 255)\ndropdown-tab-background: rgba(0,0,0,.1)\ndropdown-tab-background-selected: rgba(255,255,255,1)\ndropzone-background: #9eebcf\nexternal-link-background: inherit\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-foreground: rgb(179, 179, 255)\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: rgb(153, 153, 255)\nforeground: rgb(179, 179, 179)\nmessage-background: &lt;&lt;colour tag-foreground&gt;&gt;\nmessage-border: #96ccff\nmessage-foreground: &lt;&lt;colour tag-background&gt;&gt;\nmodal-backdrop: rgb(179, 179, 179)\nmodal-background: rgb(38, 38, 38)\nmodal-border: rgba(0,0,0,.5)\nmodal-footer-background: #f4f4f4\nmodal-footer-border: rgba(0,0,0,.1)\nmodal-header-border: rgba(0,0,0,.2)\nmuted-foreground: rgb(255, 255, 255)\nnotification-background: &lt;&lt;colour tag-foreground&gt;&gt;\nnotification-border: &lt;&lt;colour tag-background&gt;&gt;\npage-background: rgb(26, 26, 26)\npre-background: rgb(25, 25, 25)\npre-border: rgba(0,0,0,.2)\nprimary: rgb(255, 201, 102)\nselect-tag-background: \nselect-tag-foreground: \nsidebar-button-foreground: rgb(179, 179, 179)\nsidebar-controls-foreground: rgb(153, 153, 153)\nsidebar-controls-foreground-hover: &lt;&lt;colour tiddler-controls-foreground-hover&gt;&gt;\nsidebar-foreground: rgb(141, 141, 141)\nsidebar-foreground-shadow: transparent\nsidebar-muted-foreground: rgba(0, 0, 0, 0.5)\nsidebar-muted-foreground-hover: rgb(141, 141, 141)\nsidebar-tab-background: rgba(141, 141, 141, 0.2)\nsidebar-tab-background-selected: rgb(26, 26, 26)\nsidebar-tab-border: rgb(127, 127, 127)\nsidebar-tab-border-selected: rgb(127, 127, 127)\nsidebar-tab-divider: rgb(127, 127, 127)\nsidebar-tab-foreground: rgb(179, 179, 179)\nsidebar-tab-foreground-selected: rgb(179, 179, 179)\nsidebar-tiddler-link-foreground: rgb(179, 179, 179)\nsidebar-tiddler-link-foreground-hover: rgb(115, 115, 115)\nsite-title-foreground: rgb(255, 201, 102)\nstatic-alert-foreground: rgba(0,0,0,.3)\ntab-background: rgba(0,0,0,0.125)\ntab-background-selected: rgb(38, 38, 38)\ntab-border: rgb(255, 201, 102)\ntab-border-selected: rgb(255, 201, 102)\ntab-divider: rgb(255, 201, 102)\ntab-foreground: rgb(179, 179, 179)\ntab-foreground-selected: rgb(179, 179, 179)\ntable-border: rgba(255,255,255,.3)\ntable-footer-background: rgba(0,0,0,.4)\ntable-header-background: rgba(0,0,0,.1)\ntag-background: rgb(255, 201, 102)\ntag-foreground: rgb(25, 25, 25)\ntiddler-background: rgb(38, 38, 38)\ntiddler-border: rgba(240, 196, 117, 0.7)\ntiddler-controls-foreground: rgb(128, 128, 128)\ntiddler-controls-foreground-hover: rgba(255, 255, 255, 0.8)\ntiddler-controls-foreground-selected: rgba(255, 255, 255, 0.9)\ntiddler-editor-background: rgb(33, 33, 33)\ntiddler-editor-border: rgb(63, 63, 63)\ntiddler-editor-border-image: rgb(25, 25, 25)\ntiddler-editor-fields-even: rgb(33, 33, 33)\ntiddler-editor-fields-odd: rgb(28, 28, 28)\ntiddler-info-background: rgb(43, 43, 43)\ntiddler-info-border: rgb(25, 25, 25)\ntiddler-info-tab-background: rgb(43, 43, 43)\ntiddler-link-background: rgb(38, 38, 38)\ntiddler-link-foreground: rgb(204, 204, 255)\ntiddler-subtitle-foreground: rgb(255, 255, 255)\ntiddler-title-foreground: rgb(255, 192, 76)\ntoolbar-cancel-button: \ntoolbar-close-button: \ntoolbar-delete-button: \ntoolbar-done-button: \ntoolbar-edit-button: \ntoolbar-info-button: \ntoolbar-new-button: \ntoolbar-options-button: \ntoolbar-save-button: \nuntagged-background: rgb(255, 255, 255)\nvery-muted-foreground: rgba(240, 196, 117, 0.7)\n"},"$:/palettes/Vanilla":{"title":"$:/palettes/Vanilla","name":"Vanilla","description":"Pale and unobtrusive","tags":"$:/tags/Palette","type":"application/x-tiddler-dictionary","color-scheme":"light","text":"alert-background: #ffe476\nalert-border: #b99e2f\nalert-highlight: #881122\nalert-muted-foreground: #b99e2f\nbackground: #ffffff\nblockquote-bar: &lt;&lt;colour muted-foreground&gt;&gt;\nbutton-background:\nbutton-foreground:\nbutton-border:\ncode-background: #f7f7f9\ncode-border: #e1e1e8\ncode-foreground: #dd1144\ndiff-delete-background: #ffc9c9\ndiff-delete-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-equal-background: \ndiff-equal-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-insert-background: #aaefad\ndiff-insert-foreground: &lt;&lt;colour foreground&gt;&gt;\ndiff-invisible-background: \ndiff-invisible-foreground: &lt;&lt;colour muted-foreground&gt;&gt;\ndirty-indicator: #ff0000\ndownload-background: #34c734\ndownload-foreground: &lt;&lt;colour background&gt;&gt;\ndragger-background: &lt;&lt;colour foreground&gt;&gt;\ndragger-foreground: &lt;&lt;colour background&gt;&gt;\ndropdown-background: &lt;&lt;colour background&gt;&gt;\ndropdown-border: &lt;&lt;colour muted-foreground&gt;&gt;\ndropdown-tab-background-selected: #fff\ndropdown-tab-background: #ececec\ndropzone-background: rgba(0,200,0,0.7)\nexternal-link-background-hover: inherit\nexternal-link-background-visited: inherit\nexternal-link-background: inherit\nexternal-link-foreground-hover: inherit\nexternal-link-foreground-visited: #0000aa\nexternal-link-foreground: #0000ee\nforeground: #333333\nmessage-background: #ecf2ff\nmessage-border: #cfd6e6\nmessage-foreground: #547599\nmodal-backdrop: &lt;&lt;colour foreground&gt;&gt;\nmodal-background: &lt;&lt;colour background&gt;&gt;\nmodal-border: #999999\nmodal-footer-background: #f5f5f5\nmodal-footer-border: #dddddd\nmodal-header-border: #eeeeee\nmuted-foreground: #bbb\nnotification-background: #ffffdd\nnotification-border: #999999\npage-background: #f4f4f4\npre-background: #f5f5f5\npre-border: #cccccc\nprimary: #5778d8\nselection-background:\nselection-foreground:\nselect-tag-background:\nselect-tag-foreground:\nsidebar-button-foreground: &lt;&lt;colour foreground&gt;&gt;\nsidebar-controls-foreground-hover: #000000\nsidebar-controls-foreground: #aaaaaa\nsidebar-foreground-shadow: rgba(255,255,255, 0.8)\nsidebar-foreground: #acacac\nsidebar-muted-foreground-hover: #444444\nsidebar-muted-foreground: #c0c0c0\nsidebar-tab-background-selected: #f4f4f4\nsidebar-tab-background: #e0e0e0\nsidebar-tab-border-selected: &lt;&lt;colour tab-border-selected&gt;&gt;\nsidebar-tab-border: &lt;&lt;colour tab-border&gt;&gt;\nsidebar-tab-divider: #e4e4e4\nsidebar-tab-foreground-selected:\nsidebar-tab-foreground: &lt;&lt;colour tab-foreground&gt;&gt;\nsidebar-tiddler-link-foreground-hover: #444444\nsidebar-tiddler-link-foreground: #999999\nsite-title-foreground: &lt;&lt;colour tiddler-title-foreground&gt;&gt;\nstatic-alert-foreground: #aaaaaa\ntab-background-selected: #ffffff\ntab-background: #d8d8d8\ntab-border-selected: #d8d8d8\ntab-border: #cccccc\ntab-divider: #d8d8d8\ntab-foreground-selected: &lt;&lt;colour tab-foreground&gt;&gt;\ntab-foreground: #666666\ntable-border: #dddddd\ntable-footer-background: #a8a8a8\ntable-header-background: #f0f0f0\ntag-background: #ec6\ntag-foreground: #ffffff\ntiddler-background: &lt;&lt;colour background&gt;&gt;\ntiddler-border: &lt;&lt;colour background&gt;&gt;\ntiddler-controls-foreground-hover: #888888\ntiddler-controls-foreground-selected: #444444\ntiddler-controls-foreground: #cccccc\ntiddler-editor-background: #f8f8f8\ntiddler-editor-border-image: #ffffff\ntiddler-editor-border: #cccccc\ntiddler-editor-fields-even: #e0e8e0\ntiddler-editor-fields-odd: #f0f4f0\ntiddler-info-background: #f8f8f8\ntiddler-info-border: #dddddd\ntiddler-info-tab-background: #f8f8f8\ntiddler-link-background: &lt;&lt;colour background&gt;&gt;\ntiddler-link-foreground: &lt;&lt;colour primary&gt;&gt;\ntiddler-subtitle-foreground: #c0c0c0\ntiddler-title-foreground: #182955\ntoolbar-new-button:\ntoolbar-options-button:\ntoolbar-save-button:\ntoolbar-info-button:\ntoolbar-edit-button:\ntoolbar-close-button:\ntoolbar-delete-button:\ntoolbar-cancel-button:\ntoolbar-done-button:\nuntagged-background: #999999\nvery-muted-foreground: #888888\nwikilist-background: #e5e5e5\nwikilist-item: #fff\nwikilist-info: #000\nwikilist-title: #666\nwikilist-title-svg: &lt;&lt;colour wikilist-title&gt;&gt;\nwikilist-url: #aaa\nwikilist-button-open: #4fb82b\nwikilist-button-open-hover: green\nwikilist-button-reveal: #5778d8\nwikilist-button-reveal-hover: blue\nwikilist-button-remove: #d85778\nwikilist-button-remove-hover: red\nwikilist-toolbar-background: #d3d3d3\nwikilist-toolbar-foreground: #888\nwikilist-droplink-dragover: rgba(255,192,192,0.5)\nwikilist-button-background: #acacac\nwikilist-button-foreground: #000\n"},"$:/core/readme":{"title":"$:/core/readme","text":"This plugin contains TiddlyWiki's core components, comprising:\n\n* JavaScript code modules\n* Icons\n* Templates needed to create TiddlyWiki's user interface\n* British English (''en-GB'') translations of the localisable strings used by the core\n"},"$:/library/sjcl.js/license":{"title":"$:/library/sjcl.js/license","type":"text/plain","text":"SJCL is open. You can use, modify and redistribute it under a BSD\nlicense or under the GNU GPL, version 2.0.\n\n---------------------------------------------------------------------\n\nhttp://opensource.org/licenses/BSD-2-Clause\n\nCopyright (c) 2009-2015, Emily Stark, Mike Hamburg and Dan Boneh at\nStanford University. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n1. Redistributions of source code must retain the above copyright\nnotice, this list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright\nnotice, this list of conditions and the following disclaimer in the\ndocumentation and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\nIS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\nTO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\nPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nHOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\nTO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\nPROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\nLIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\nNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n---------------------------------------------------------------------\n\nhttp://opensource.org/licenses/GPL-2.0\n\nThe Stanford Javascript Crypto Library (hosted here on GitHub) is a\nproject by the Stanford Computer Security Lab to build a secure,\npowerful, fast, small, easy-to-use, cross-browser library for\ncryptography in Javascript.\n\nCopyright (c) 2009-2015, Emily Stark, Mike Hamburg and Dan Boneh at\nStanford University.\n\nThis program is free software; you can redistribute it and/or modify it\nunder the terms of the GNU General Public License as published by the\nFree Software Foundation; either version 2 of the License, or (at your\noption) any later version.\n\nThis program is distributed in the hope that it will be useful, but\nWITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\nPublic License for more details.\n\nYou should have received a copy of the GNU General Public License along\nwith this program; if not, write to the Free Software Foundation, Inc.,\n59 Temple Place, Suite 330, Boston, MA 02111-1307 USA"},"$:/core/templates/alltiddlers.template.html":{"title":"$:/core/templates/alltiddlers.template.html","type":"text/vnd.tiddlywiki-html","text":"&lt;!-- This template is provided for backwards compatibility with older versions of TiddlyWiki --&gt;\n\n&lt;$set name=\"exportFilter\" value=\"[!is[system]sort[title]]\"&gt;\n\n{{$:/core/templates/exporters/StaticRiver}}\n\n&lt;/$set&gt;\n"},"$:/core/templates/canonical-uri-external-image":{"title":"$:/core/templates/canonical-uri-external-image","text":"&lt;!--\n\nThis template is used to assign the ''_canonical_uri'' field to external images.\n\nChange the `./images/` part to a different base URI. The URI can be relative or absolute.\n\n--&gt;\n./images/&lt;$view field=\"title\" format=\"doubleurlencoded\"/&gt;"},"$:/core/templates/canonical-uri-external-raw":{"title":"$:/core/templates/canonical-uri-external-raw","text":"&lt;!--\n\nThis template is used to assign the ''_canonical_uri'' field to external raw files that are stored in the same directory\n\n--&gt;\n&lt;$view field=\"title\" format=\"doubleurlencoded\"/&gt;"},"$:/core/templates/canonical-uri-external-text":{"title":"$:/core/templates/canonical-uri-external-text","text":"&lt;!--\n\nThis template is used to assign the ''_canonical_uri'' field to external text files.\n\nChange the `./text/` part to a different base URI. The URI can be relative or absolute.\n\n--&gt;\n./text/&lt;$view field=\"title\" format=\"doubleurlencoded\"/&gt;.tid"},"$:/core/templates/css-tiddler":{"title":"$:/core/templates/css-tiddler","text":"&lt;!--\n\nThis template is used for saving CSS tiddlers as a style tag with data attributes representing the tiddler fields.\n\n--&gt;`&lt;style`&lt;$fields template=' data-tiddler-$name$=\"$encoded_value$\"'&gt;&lt;/$fields&gt;` type=\"text/css\"&gt;`&lt;$view field=\"text\" format=\"text\" /&gt;`&lt;/style&gt;`"},"$:/core/templates/exporters/CsvFile":{"title":"$:/core/templates/exporters/CsvFile","tags":"$:/tags/Exporter","description":"{{$:/language/Exporters/CsvFile}}","extension":".csv","text":"&lt;$macrocall $name=\"csvtiddlers\" filter=&lt;&lt;exportFilter&gt;&gt; format=\"quoted-comma-sep\" $output=\"text/raw\"/&gt;\n"},"$:/core/templates/exporters/JsonFile":{"title":"$:/core/templates/exporters/JsonFile","tags":"$:/tags/Exporter","description":"{{$:/language/Exporters/JsonFile}}","extension":".json","text":"&lt;$macrocall $name=\"jsontiddlers\" filter=&lt;&lt;exportFilter&gt;&gt; $output=\"text/raw\"/&gt;\n"},"$:/core/templates/exporters/StaticRiver":{"title":"$:/core/templates/exporters/StaticRiver","tags":"$:/tags/Exporter","description":"{{$:/language/Exporters/StaticRiver}}","extension":".html","text":"\\define tv-wikilink-template() #$uri_encoded$\n\\define tv-config-toolbar-icons() no\n\\define tv-config-toolbar-text() no\n\\define tv-config-toolbar-class() tc-btn-invisible\n\\rules only filteredtranscludeinline transcludeinline\n&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content=\"{{$:/core/templates/version}}\" /&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\"&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;title&gt;{{$:/core/wiki/title}}&lt;/title&gt;\n&lt;div id=\"styleArea\"&gt;\n{{$:/boot/boot.css||$:/core/templates/css-tiddler}}\n&lt;/div&gt;\n&lt;style type=\"text/css\"&gt;\n{{$:/core/ui/PageStylesheet||$:/core/templates/wikified-tiddler}}\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n{{$:/StaticBanner||$:/core/templates/html-tiddler}}\n&lt;section class=\"tc-story-river tc-static-story-river\"&gt;\n{{$:/core/templates/exporters/StaticRiver/Content||$:/core/templates/html-tiddler}}\n&lt;/section&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n"},"$:/core/templates/exporters/StaticRiver/Content":{"title":"$:/core/templates/exporters/StaticRiver/Content","text":"\\define renderContent()\n{{{ $(exportFilter)$ ||$:/core/templates/static-tiddler}}}\n\\end\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n&lt;&lt;renderContent&gt;&gt;\n"},"$:/core/templates/exporters/TidFile":{"title":"$:/core/templates/exporters/TidFile","tags":"$:/tags/Exporter","description":"{{$:/language/Exporters/TidFile}}","extension":".tid","condition":"[&lt;count&gt;compare:lte[1]]","text":"\\define renderContent()\n{{{ $(exportFilter)$ +[limit[1]] ||$:/core/templates/tid-tiddler}}}\n\\end\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n&lt;&lt;renderContent&gt;&gt;"},"$:/core/save/all-external-js":{"title":"$:/core/save/all-external-js","text":"\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\\define saveTiddlerFilter()\n[is[tiddler]] -[prefix[$:/state/popup/]] -[prefix[$:/temp/]] -[prefix[$:/HistoryList]] -[status[pending]plugin-type[import]] -[[$:/core]] -[[$:/boot/boot.css]] -[type[application/javascript]library[yes]] -[[$:/boot/boot.js]] -[[$:/boot/bootprefix.js]] +[sort[title]] $(publishFilter)$\n\\end\n{{$:/core/templates/tiddlywiki5-external-js.html}}\n"},"$:/core/templates/tiddlywiki5.js":{"title":"$:/core/templates/tiddlywiki5.js","text":"\\rules only filteredtranscludeinline transcludeinline codeinline\n\n/*\n{{ $:/core/copyright.txt ||$:/core/templates/plain-text-tiddler}}\n`*/\n`&lt;!--~~ Library modules ~~--&gt;\n{{{ [is[system]type[application/javascript]library[yes]] ||$:/core/templates/plain-text-tiddler}}}\n&lt;!--~~ Boot prefix ~~--&gt;\n{{ $:/boot/bootprefix.js ||$:/core/templates/plain-text-tiddler}}\n&lt;!--~~ Core plugin ~~--&gt;\n{{$:/core/templates/tiddlywiki5.js/tiddlers}}\n&lt;!--~~ Boot kernel ~~--&gt;\n{{ $:/boot/boot.js ||$:/core/templates/plain-text-tiddler}}\n"},"$:/core/templates/tiddlywiki5.js/tiddlers":{"title":"$:/core/templates/tiddlywiki5.js/tiddlers","text":"`\n$tw.preloadTiddlerArray(`&lt;$text text=&lt;&lt;jsontiddlers \"[[$:/core]]\"&gt;&gt;/&gt;`);\n`\n"},"$:/core/templates/tiddlywiki5-external-js.html":{"title":"$:/core/templates/tiddlywiki5-external-js.html","text":"\\rules only filteredtranscludeinline transcludeinline\n&lt;!doctype html&gt;\n{{$:/core/templates/MOTW.html}}&lt;html lang=\"`&lt;$text text={{{ [{$:/language}get[name]] }}}/&gt;`\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;!--~~ Raw markup for the top of the head section ~~--&gt;\n{{{ [all[shadows+tiddlers]tag[$:/tags/RawMarkupWikified/TopHead]] ||$:/core/templates/raw-static-tiddler}}}\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=Edge\"/&gt;\n&lt;meta name=\"application-name\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content=\"{{$:/core/templates/version}}\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" /&gt;\n&lt;meta name=\"mobile-web-app-capable\" content=\"yes\"/&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\" /&gt;\n&lt;meta name=\"copyright\" content=\"{{$:/core/copyright.txt}}\" /&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;title&gt;{{$:/core/wiki/title}}&lt;/title&gt;\n&lt;!--~~ This is a Tiddlywiki file. The points of interest in the file are marked with this pattern ~~--&gt;\n\n&lt;!--~~ Raw markup ~~--&gt;\n{{{ [all[shadows+tiddlers]tag[$:/core/wiki/rawmarkup]] [all[shadows+tiddlers]tag[$:/tags/RawMarkup]] ||$:/core/templates/plain-text-tiddler}}}\n{{{ [all[shadows+tiddlers]tag[$:/tags/RawMarkupWikified]] ||$:/core/templates/raw-static-tiddler}}}\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n&lt;!--~~ Raw markup for the top of the body section ~~--&gt;\n{{{ [all[shadows+tiddlers]tag[$:/tags/RawMarkupWikified/TopBody]] ||$:/core/templates/raw-static-tiddler}}}\n&lt;!--~~ Static styles ~~--&gt;\n&lt;div id=\"styleArea\"&gt;\n{{$:/boot/boot.css||$:/core/templates/css-tiddler}}\n&lt;/div&gt;\n&lt;!--~~ Static content for Google and browsers without JavaScript ~~--&gt;\n&lt;noscript&gt;\n&lt;div id=\"splashArea\"&gt;\n{{$:/core/templates/static.area}}\n&lt;/div&gt;\n&lt;/noscript&gt;\n&lt;!--~~ Ordinary tiddlers ~~--&gt;\n{{$:/core/templates/store.area.template.html}}\n&lt;!--~~ Raw markup for the bottom of the body section ~~--&gt;\n{{{ [all[shadows+tiddlers]tag[$:/tags/RawMarkupWikified/BottomBody]] ||$:/core/templates/raw-static-tiddler}}}\n&lt;/body&gt;\n&lt;script src=\"%24%3A%2Fcore%2Ftemplates%2Ftiddlywiki5.js\" onerror=\"alert('Error: Cannot load tiddlywiki.js');\"&gt;&lt;/script&gt;\n&lt;/html&gt;\n"},"$:/core/templates/html-div-skinny-tiddler":{"title":"$:/core/templates/html-div-skinny-tiddler","text":"&lt;!--\n\nThis template is a variant of $:/core/templates/html-div-tiddler used for saving skinny tiddlers (with no text field)\n\n--&gt;`&lt;div`&lt;$fields template=' $name$=\"$encoded_value$\"'&gt;&lt;/$fields&gt;`&gt;\n&lt;pre&gt;&lt;/pre&gt;\n&lt;/div&gt;`\n"},"$:/core/templates/html-div-tiddler":{"title":"$:/core/templates/html-div-tiddler","text":"&lt;!--\n\nThis template is used for saving tiddlers as an HTML DIV tag with attributes representing the tiddler fields.\n\n--&gt;`&lt;div`&lt;$fields template=' $name$=\"$encoded_value$\"'&gt;&lt;/$fields&gt;`&gt;\n&lt;pre&gt;`&lt;$view field=\"text\" format=\"htmltextencoded\" /&gt;`&lt;/pre&gt;\n&lt;/div&gt;`\n"},"$:/core/templates/html-tiddler":{"title":"$:/core/templates/html-tiddler","text":"&lt;!--\n\nThis template is used for saving tiddlers as raw HTML\n\n--&gt;&lt;$view field=\"text\" format=\"htmlwikified\" /&gt;"},"$:/core/templates/javascript-tiddler":{"title":"$:/core/templates/javascript-tiddler","text":"&lt;!--\n\nThis template is used for saving JavaScript tiddlers as a script tag with data attributes representing the tiddler fields.\n\n--&gt;`&lt;script`&lt;$fields template=' data-tiddler-$name$=\"$encoded_value$\"'&gt;&lt;/$fields&gt;` type=\"text/javascript\"&gt;`&lt;$view field=\"text\" format=\"text\" /&gt;`&lt;/script&gt;`"},"$:/core/templates/json-tiddler":{"title":"$:/core/templates/json-tiddler","text":"&lt;!--\n\nThis template is used for saving tiddlers as raw JSON\n\n--&gt;&lt;$text text=&lt;&lt;jsontiddler&gt;&gt;/&gt;"},"$:/core/templates/module-tiddler":{"title":"$:/core/templates/module-tiddler","text":"&lt;!--\n\nThis template is used for saving JavaScript tiddlers as a script tag with data attributes representing the tiddler fields. The body of the tiddler is wrapped in a call to the `$tw.modules.define` function in order to define the body of the tiddler as a module\n\n--&gt;`&lt;script`&lt;$fields template=' data-tiddler-$name$=\"$encoded_value$\"'&gt;&lt;/$fields&gt;` type=\"text/javascript\" data-module=\"yes\"&gt;$tw.modules.define(\"`&lt;$view field=\"title\" format=\"jsencoded\" /&gt;`\",\"`&lt;$view field=\"module-type\" format=\"jsencoded\" /&gt;`\",function(module,exports,require) {`&lt;$view field=\"text\" format=\"text\" /&gt;`});\n&lt;/script&gt;`"},"$:/core/templates/MOTW.html":{"title":"$:/core/templates/MOTW.html","text":"\\rules only filteredtranscludeinline transcludeinline entity\n&lt;!-- The following comment is called a MOTW comment and is necessary for the TiddlyIE Internet Explorer extension --&gt;\n&lt;!-- saved from url=(0021)https://tiddlywiki.com --&gt;&amp;#13;&amp;#10;"},"$:/core/templates/plain-text-tiddler":{"title":"$:/core/templates/plain-text-tiddler","text":"&lt;$view field=\"text\" format=\"text\" /&gt;"},"$:/core/templates/raw-static-tiddler":{"title":"$:/core/templates/raw-static-tiddler","text":"&lt;!--\n\nThis template is used for saving tiddlers as static HTML\n\n--&gt;&lt;$view field=\"text\" format=\"plainwikified\" /&gt;"},"$:/core/save/all":{"title":"$:/core/save/all","text":"\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\\define saveTiddlerFilter()\n[is[tiddler]] -[prefix[$:/state/popup/]] -[prefix[$:/temp/]] -[prefix[$:/HistoryList]] -[status[pending]plugin-type[import]] -[[$:/boot/boot.css]] -[type[application/javascript]library[yes]] -[[$:/boot/boot.js]] -[[$:/boot/bootprefix.js]] +[sort[title]] $(publishFilter)$\n\\end\n{{$:/core/templates/tiddlywiki5.html}}\n"},"$:/core/save/empty":{"title":"$:/core/save/empty","text":"\\define saveTiddlerFilter()\n[is[system]] -[prefix[$:/state/popup/]] -[[$:/boot/boot.css]] -[type[application/javascript]library[yes]] -[[$:/boot/boot.js]] -[[$:/boot/bootprefix.js]] +[sort[title]]\n\\end\n{{$:/core/templates/tiddlywiki5.html}}\n"},"$:/core/save/lazy-all":{"title":"$:/core/save/lazy-all","text":"\\define saveTiddlerFilter()\n[is[system]] -[prefix[$:/state/popup/]] -[[$:/HistoryList]] -[[$:/boot/boot.css]] -[type[application/javascript]library[yes]] -[[$:/boot/boot.js]] -[[$:/boot/bootprefix.js]] +[sort[title]] \n\\end\n\\define skinnySaveTiddlerFilter()\n[!is[system]]\n\\end\n{{$:/core/templates/tiddlywiki5.html}}\n"},"$:/core/save/lazy-images":{"title":"$:/core/save/lazy-images","text":"\\define saveTiddlerFilter()\n[is[tiddler]] -[prefix[$:/state/popup/]] -[[$:/HistoryList]] -[[$:/boot/boot.css]] -[type[application/javascript]library[yes]] -[[$:/boot/boot.js]] -[[$:/boot/bootprefix.js]] -[!is[system]is[image]] +[sort[title]] \n\\end\n\\define skinnySaveTiddlerFilter()\n[!is[system]is[image]]\n\\end\n{{$:/core/templates/tiddlywiki5.html}}\n"},"$:/core/templates/server/static.sidebar.wikitext":{"title":"$:/core/templates/server/static.sidebar.wikitext","text":"\\whitespace trim\n&lt;div class=\"tc-sidebar-scrollable\" style=\"overflow: auto;\"&gt;\n&lt;div class=\"tc-sidebar-header\"&gt;\n&lt;h1 class=\"tc-site-title\"&gt;\n&lt;$transclude tiddler=\"$:/SiteTitle\"/&gt;\n&lt;/h1&gt;\n&lt;div class=\"tc-site-subtitle\"&gt;\n&lt;$transclude tiddler=\"$:/SiteSubtitle\"/&gt;\n&lt;/div&gt;\n&lt;h2&gt;\n&lt;/h2&gt;\n&lt;div class=\"tc-sidebar-lists\"&gt;\n&lt;$list filter={{$:/DefaultTiddlers}}&gt;\n&lt;div class=\"tc-menu-list-subitem\"&gt;\n&lt;$link&gt;&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;&lt;/$link&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;!-- Currently disabled the recent list as it is unweildy when the responsive narrow view kicks in\n&lt;h2&gt;\n{{$:/language/SideBar/Recent/Caption}}\n&lt;/h2&gt;\n&lt;div class=\"tc-sidebar-lists\"&gt;\n&lt;$macrocall $name=\"timeline\" format={{$:/language/RecentChanges/DateFormat}}/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n--&gt;\n"},"$:/core/templates/server/static.tiddler.html":{"title":"$:/core/templates/server/static.tiddler.html","text":"\\whitespace trim\n\\define tv-wikilink-template() $uri_encoded$\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content={{$:/core/templates/version}} /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" /&gt;\n&lt;meta name=\"mobile-web-app-capable\" content=\"yes\"/&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\"&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;link rel=\"stylesheet\" href=\"%24%3A%2Fcore%2Ftemplates%2Fstatic.template.css\"&gt;\n&lt;title&gt;&lt;$view field=\"caption\" format=\"plainwikified\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt;: &lt;$view tiddler=\"$:/core/wiki/title\" format=\"plainwikified\"/&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n&lt;$transclude tiddler=\"$:/core/templates/server/static.sidebar.wikitext\" mode=\"inline\"/&gt;\n&lt;section class=\"tc-story-river\"&gt;\n&lt;div class=\"tc-tiddler-frame\"&gt;\n&lt;$transclude tiddler=\"$:/core/templates/server/static.tiddler.wikitext\" mode=\"inline\"/&gt;\n&lt;/div&gt;\n&lt;/section&gt;\n&lt;/body&gt;\n&lt;/html&gt;"},"$:/core/templates/server/static.tiddler.wikitext":{"title":"$:/core/templates/server/static.tiddler.wikitext","text":"\\whitespace trim\n&lt;div class=\"tc-tiddler-title\"&gt;\n&lt;div class=\"tc-titlebar\"&gt;\n&lt;h2&gt;&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;&lt;/h2&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-subtitle\"&gt;\n&lt;$link to={{!!modifier}}&gt;\n&lt;$view field=\"modifier\"/&gt;\n&lt;/$link&gt; &lt;$view field=\"modified\" format=\"date\" template={{$:/language/Tiddler/DateFormat}}/&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-tags-wrapper\"&gt;\n&lt;$list filter=\"[all[current]tags[]sort[title]]\"&gt;\n&lt;a href={{{ [&lt;currentTiddler&gt;encodeuricomponent[]] }}}&gt;\n&lt;$macrocall $name=\"tag-pill\" tag=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;/a&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-tiddler-body\"&gt;\n&lt;$transclude mode=\"block\"/&gt;\n&lt;/div&gt;\n"},"$:/core/templates/single.tiddler.window":{"title":"$:/core/templates/single.tiddler.window","text":"\\whitespace trim\n\\define containerClasses()\ntc-page-container tc-page-view-$(storyviewTitle)$ tc-language-$(languageTitle)$\n\\end\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\n&lt;$vars\n\ttv-config-toolbar-icons={{$:/config/Toolbar/Icons}}\n\ttv-config-toolbar-text={{$:/config/Toolbar/Text}}\n\ttv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}}\n\ttv-show-missing-links={{$:/config/MissingLinks}}\n\tstoryviewTitle={{$:/view}}\n\tlanguageTitle={{{ [{$:/language}get[name]] }}}&gt;\n\n&lt;div class=&lt;&lt;containerClasses&gt;&gt;&gt;\n\n&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\"&gt;\n\n&lt;$transclude mode=\"block\"/&gt;\n\n&lt;/$navigator&gt;\n\n&lt;/div&gt;\n\n&lt;/$vars&gt;\n"},"$:/core/templates/split-recipe":{"title":"$:/core/templates/split-recipe","text":"&lt;$list filter=\"[!is[system]]\"&gt;\ntiddler: &lt;$view field=\"title\" format=\"urlencoded\"/&gt;.tid\n&lt;/$list&gt;\n"},"$:/core/templates/static-tiddler":{"title":"$:/core/templates/static-tiddler","text":"&lt;a name=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ViewTemplate\"/&gt;\n&lt;/a&gt;"},"$:/core/templates/static.area":{"title":"$:/core/templates/static.area","text":"&lt;$reveal type=\"nomatch\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\n{{{ [all[shadows+tiddlers]tag[$:/tags/RawStaticContent]!has[draft.of]] ||$:/core/templates/raw-static-tiddler}}}\n{{$:/core/templates/static.content||$:/core/templates/html-tiddler}}\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\nThis file contains an encrypted ~TiddlyWiki. Enable ~JavaScript and enter the decryption password when prompted.\n&lt;/$reveal&gt;\n&lt;!-- ensure splash screen isn't shown when JS is disabled --&gt;\n`&lt;style&gt;\n.tc-remove-when-wiki-loaded {display: none;}\n&lt;/style&gt;`\n"},"$:/core/templates/static.content":{"title":"$:/core/templates/static.content","text":"&lt;!-- For Google, and people without JavaScript--&gt;\nThis [[TiddlyWiki|https://tiddlywiki.com]] contains the following tiddlers:\n\n&lt;ul&gt;\n&lt;$list filter=&lt;&lt;saveTiddlerFilter&gt;&gt;&gt;\n&lt;li&gt;&lt;$view field=\"title\" format=\"text\"&gt;&lt;/$view&gt;&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n"},"$:/core/templates/static.template.css":{"title":"$:/core/templates/static.template.css","text":"{{$:/boot/boot.css||$:/core/templates/plain-text-tiddler}}\n\n{{$:/core/ui/PageStylesheet||$:/core/templates/wikified-tiddler}}\n"},"$:/core/templates/static.template.html":{"title":"$:/core/templates/static.template.html","type":"text/vnd.tiddlywiki-html","text":"\\define tv-wikilink-template() static/$uri_doubleencoded$.html\n\\define tv-config-toolbar-icons() no\n\\define tv-config-toolbar-text() no\n\\define tv-config-toolbar-class() tc-btn-invisible\n\\rules only filteredtranscludeinline transcludeinline\n&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content=\"{{$:/core/templates/version}}\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" /&gt;\n&lt;meta name=\"mobile-web-app-capable\" content=\"yes\"/&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\"&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;title&gt;{{$:/core/wiki/title}}&lt;/title&gt;\n&lt;div id=\"styleArea\"&gt;\n{{$:/boot/boot.css||$:/core/templates/css-tiddler}}\n&lt;/div&gt;\n&lt;style type=\"text/css\"&gt;\n{{$:/core/ui/PageStylesheet||$:/core/templates/wikified-tiddler}}\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n{{$:/StaticBanner||$:/core/templates/html-tiddler}}\n{{$:/core/ui/PageTemplate||$:/core/templates/html-tiddler}}\n&lt;/body&gt;\n&lt;/html&gt;\n"},"$:/core/templates/static.tiddler.html":{"title":"$:/core/templates/static.tiddler.html","text":"\\define tv-wikilink-template() $uri_doubleencoded$.html\n\\define tv-config-toolbar-icons() no\n\\define tv-config-toolbar-text() no\n\\define tv-config-toolbar-class() tc-btn-invisible\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n`&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content=\"`{{$:/core/templates/version}}`\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" /&gt;\n&lt;meta name=\"mobile-web-app-capable\" content=\"yes\"/&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\"&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;link rel=\"stylesheet\" href=\"static.css\"&gt;\n&lt;title&gt;`&lt;$view field=\"caption\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt;: {{$:/core/wiki/title}}`&lt;/title&gt;\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n`{{$:/StaticBanner||$:/core/templates/html-tiddler}}`\n&lt;section class=\"tc-story-river tc-static-story-river\"&gt;\n`&lt;$view tiddler=\"$:/core/ui/ViewTemplate\" format=\"htmlwikified\"/&gt;`\n&lt;/section&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n`\n"},"$:/core/templates/store.area.template.html":{"title":"$:/core/templates/store.area.template.html","text":"&lt;$reveal type=\"nomatch\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\n`&lt;div id=\"storeArea\" style=\"display:none;\"&gt;`\n&lt;$list filter=&lt;&lt;saveTiddlerFilter&gt;&gt; template=\"$:/core/templates/html-div-tiddler\"/&gt;\n&lt;$list filter={{{ [&lt;skinnySaveTiddlerFilter&gt;] }}} template=\"$:/core/templates/html-div-skinny-tiddler\"/&gt;\n`&lt;/div&gt;`\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\n`&lt;!--~~ Encrypted tiddlers ~~--&gt;`\n`&lt;pre id=\"encryptedStoreArea\" type=\"text/plain\" style=\"display:none;\"&gt;`\n&lt;$encrypt filter=&lt;&lt;saveTiddlerFilter&gt;&gt;/&gt;\n`&lt;/pre&gt;`\n&lt;/$reveal&gt;"},"$:/core/templates/tid-tiddler":{"title":"$:/core/templates/tid-tiddler","text":"&lt;!--\n\nThis template is used for saving tiddlers in TiddlyWeb *.tid format\n\n--&gt;&lt;$fields exclude='text bag' template='$name$: $value$\n'&gt;&lt;/$fields&gt;`\n`&lt;$view field=\"text\" format=\"text\" /&gt;"},"$:/core/templates/tiddler-metadata":{"title":"$:/core/templates/tiddler-metadata","text":"&lt;!--\n\nThis template is used for saving tiddler metadata *.meta files\n\n--&gt;&lt;$fields exclude='text bag' template='$name$: $value$\n'&gt;&lt;/$fields&gt;"},"$:/core/templates/tiddlywiki5.html":{"title":"$:/core/templates/tiddlywiki5.html","text":"&lt;$set name=\"saveTiddlerAndShadowsFilter\" filter=\"[subfilter&lt;saveTiddlerFilter&gt;] [subfilter&lt;saveTiddlerFilter&gt;plugintiddlers[]]\"&gt;\n`&lt;!doctype html&gt;\n`{{$:/core/templates/MOTW.html}}`&lt;html lang=\"`&lt;$text text={{{ [{$:/language}get[name]] }}}/&gt;`\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;!--~~ Raw markup for the top of the head section ~~--&gt;\n`{{{ [&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/tags/RawMarkupWikified/TopHead]] ||$:/core/templates/raw-static-tiddler}}}`\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=Edge\"/&gt;\n&lt;meta name=\"application-name\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"generator\" content=\"TiddlyWiki\" /&gt;\n&lt;meta name=\"tiddlywiki-version\" content=\"`{{$:/core/templates/version}}`\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" /&gt;\n&lt;meta name=\"mobile-web-app-capable\" content=\"yes\"/&gt;\n&lt;meta name=\"format-detection\" content=\"telephone=no\" /&gt;\n&lt;meta name=\"copyright\" content=\"`{{$:/core/copyright.txt}}`\" /&gt;\n&lt;link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\"&gt;\n&lt;title&gt;`{{$:/core/wiki/title}}`&lt;/title&gt;\n&lt;!--~~ This is a Tiddlywiki file. The points of interest in the file are marked with this pattern ~~--&gt;\n\n&lt;!--~~ Raw markup ~~--&gt;\n`{{{ [enlist&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/core/wiki/rawmarkup]] ||$:/core/templates/plain-text-tiddler}}}\n{{{ [enlist&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/tags/RawMarkup]] ||$:/core/templates/plain-text-tiddler}}}\n{{{ [enlist&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/tags/RawMarkupWikified]] ||$:/core/templates/raw-static-tiddler}}}`\n&lt;/head&gt;\n&lt;body class=\"tc-body\"&gt;\n&lt;!--~~ Raw markup for the top of the body section ~~--&gt;\n`{{{ [enlist&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/tags/RawMarkupWikified/TopBody]] ||$:/core/templates/raw-static-tiddler}}}`\n&lt;!--~~ Static styles ~~--&gt;\n&lt;div id=\"styleArea\"&gt;\n`{{$:/boot/boot.css||$:/core/templates/css-tiddler}}`\n&lt;/div&gt;\n&lt;!--~~ Static content for Google and browsers without JavaScript ~~--&gt;\n&lt;noscript&gt;\n&lt;div id=\"splashArea\"&gt;\n`{{$:/core/templates/static.area}}`\n&lt;/div&gt;\n&lt;/noscript&gt;\n&lt;!--~~ Ordinary tiddlers ~~--&gt;\n`{{$:/core/templates/store.area.template.html}}`\n&lt;!--~~ Library modules ~~--&gt;\n&lt;div id=\"libraryModules\" style=\"display:none;\"&gt;\n`{{{ [is[system]type[application/javascript]library[yes]] ||$:/core/templates/javascript-tiddler}}}`\n&lt;/div&gt;\n&lt;!--~~ Boot kernel prologue ~~--&gt;\n&lt;div id=\"bootKernelPrefix\" style=\"display:none;\"&gt;\n`{{ $:/boot/bootprefix.js ||$:/core/templates/javascript-tiddler}}`\n&lt;/div&gt;\n&lt;!--~~ Boot kernel ~~--&gt;\n&lt;div id=\"bootKernel\" style=\"display:none;\"&gt;\n`{{ $:/boot/boot.js ||$:/core/templates/javascript-tiddler}}`\n&lt;/div&gt;\n&lt;!--~~ Raw markup for the bottom of the body section ~~--&gt;\n`{{{ [enlist&lt;saveTiddlerAndShadowsFilter&gt;tag[$:/tags/RawMarkupWikified/BottomBody]] ||$:/core/templates/raw-static-tiddler}}}`\n&lt;/body&gt;\n&lt;/html&gt;`\n"},"$:/core/templates/version":{"title":"$:/core/templates/version","text":"&lt;&lt;version&gt;&gt;"},"$:/core/templates/wikified-tiddler":{"title":"$:/core/templates/wikified-tiddler","text":"&lt;$transclude /&gt;"},"$:/core/ui/AboveStory/tw2-plugin-check":{"title":"$:/core/ui/AboveStory/tw2-plugin-check","tags":"$:/tags/AboveStory","text":"\\define lingo-base() $:/language/AboveStory/ClassicPlugin/\n&lt;$list filter=\"[all[system+tiddlers]tag[systemConfig]limit[1]]\"&gt;\n\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo Warning&gt;&gt;\n\n&lt;ul&gt;\n\n&lt;$list filter=\"[all[system+tiddlers]tag[systemConfig]]\"&gt;\n\n&lt;li&gt;\n\n&lt;$link&gt;&lt;$view field=\"title\"/&gt;&lt;/$link&gt;\n\n&lt;/li&gt;\n\n&lt;/$list&gt;\n\n&lt;/ul&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/Actions/new-image":{"title":"$:/core/ui/Actions/new-image","tags":"$:/tags/Actions","description":"create a new image tiddler","text":"\\define get-type()\nimage/$(imageType)$\n\\end\n\\define get-tags() $(textFieldTags)$ $(tagsFieldTags)$\n&lt;$vars imageType={{$:/config/NewImageType}} textFieldTags={{$:/config/NewJournal/Tags}} tagsFieldTags={{$:/config/NewJournal/Tags!!tags}}&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" type=&lt;&lt;get-type&gt;&gt; tags=&lt;&lt;get-tags&gt;&gt;/&gt;\n&lt;/$vars&gt;\n"},"$:/core/ui/Actions/new-journal":{"title":"$:/core/ui/Actions/new-journal","tags":"$:/tags/Actions","description":"create a new journal tiddler","text":"\\define get-tags() $(textFieldTags)$ $(tagsFieldTags)$\n&lt;$vars journalTitleTemplate={{$:/config/NewJournal/Title}} textFieldTags={{$:/config/NewJournal/Tags}} tagsFieldTags={{$:/config/NewJournal/Tags!!tags}} journalText={{$:/config/NewJournal/Text}}&gt;\n&lt;$wikify name=\"journalTitle\" text=\"\"\"&lt;$macrocall $name=\"now\" format=&lt;&lt;journalTitleTemplate&gt;&gt;/&gt;\"\"\"&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;journalTitle&gt;&gt; text=\"\"&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" title=&lt;&lt;journalTitle&gt;&gt; tags=&lt;&lt;get-tags&gt;&gt; text={{{ [&lt;journalTitle&gt;get[]] }}}/&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;journalTitle&gt;&gt; text=\"\"&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" title=&lt;&lt;journalTitle&gt;&gt; tags=&lt;&lt;get-tags&gt;&gt; text=&lt;&lt;journalText&gt;&gt;/&gt;\n&lt;/$reveal&gt;\n&lt;/$wikify&gt;\n&lt;/$vars&gt;\n"},"$:/core/ui/Actions/new-tiddler":{"title":"$:/core/ui/Actions/new-tiddler","tags":"$:/tags/Actions","description":"create a new empty tiddler","text":"\\define get-tags() $(textFieldTags)$ $(tagsFieldTags)$\n&lt;$vars textFieldTags={{$:/config/NewTiddler/Tags}} tagsFieldTags={{$:/config/NewTiddler/Tags!!tags}}&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" tags=&lt;&lt;get-tags&gt;&gt;/&gt;\n&lt;/$vars&gt;\n"},"$:/core/ui/AdvancedSearch/Filter":{"title":"$:/core/ui/AdvancedSearch/Filter","tags":"$:/tags/AdvancedSearch","caption":"{{$:/language/Search/Filter/Caption}}","text":"\\define lingo-base() $:/language/Search/\n\\define set-next-input-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab--1498284803\" tag=\"$:/tags/AdvancedSearch\" beforeafter=\"$beforeafter$\" defaultState=\"$:/core/ui/AdvancedSearch/System\" actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define cancel-search-actions() &lt;$list filter=\"[{$:/temp/advancedsearch/input}!match{$:/temp/advancedsearch}]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[[$:/temp/advancedsearch]] [[$:/temp/advancedsearch/input]] [[$:/temp/advancedsearch/selected-item]]\" /&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text={{$:/temp/advancedsearch}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;/$list&gt;\n\n\\define input-accept-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\n\n\\define input-accept-variant-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\n\n&lt;&lt;lingo Filter/Hint&gt;&gt;\n\n&lt;div class=\"tc-search tc-advanced-search\"&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt;&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=\"$:/temp/advancedsearch/input\" storeTitle=\"$:/temp/advancedsearch\" \n\t\trefreshTitle=\"$:/temp/advancedsearch/refresh\" selectionStateTitle=\"$:/temp/advancedsearch/selected-item\" type=\"search\" \n\t\ttag=\"input\" focus={{$:/config/Search/AutoFocus}} configTiddlerFilter=\"[[$:/temp/advancedsearch]]\" firstSearchFilterField=\"text\" \n\t\tinputAcceptActions=&lt;&lt;input-accept-actions&gt;&gt; inputAcceptVariantActions=&lt;&lt;input-accept-variant-actions&gt;&gt; \n\t\tinputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt;/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/AdvancedSearch/FilterButton]!has[draft.of]]\"&gt;&lt;$transclude/&gt;&lt;/$list&gt;\n&lt;/div&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$set name=\"resultCount\" value=\"\"\"&lt;$count filter={{$:/temp/advancedsearch}}/&gt;\"\"\"&gt;\n&lt;div class=\"tc-search-results\"&gt;\n&lt;&lt;lingo Filter/Matches&gt;&gt;\n&lt;$list filter={{$:/temp/advancedsearch}}&gt;\n&lt;span class={{{[&lt;currentTiddler&gt;addsuffix[-primaryList]] -[[$:/temp/advancedsearch/selected-item]get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Filter/FilterButtons/clear":{"title":"$:/core/ui/AdvancedSearch/Filter/FilterButtons/clear","tags":"$:/tags/AdvancedSearch/FilterButton","text":"&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\".tc-advanced-search input\"\"\" /&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Filter/FilterButtons/delete":{"title":"$:/core/ui/AdvancedSearch/Filter/FilterButtons/delete","tags":"$:/tags/AdvancedSearch/FilterButton","text":"&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/filterDeleteDropdown\"&gt;&gt; class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/delete-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/filterDeleteDropdown\"&gt;&gt; type=\"popup\" position=\"belowleft\" animate=\"yes\"&gt;\n&lt;div class=\"tc-block-dropdown-wrapper\"&gt;\n&lt;div class=\"tc-block-dropdown tc-edit-type-dropdown\"&gt;\n&lt;div class=\"tc-dropdown-item-plain\"&gt;\n&lt;$set name=\"resultCount\" value=\"\"\"&lt;$count filter={{$:/temp/advancedsearch}}/&gt;\"\"\"&gt;\nAre you sure you wish to delete &lt;&lt;resultCount&gt;&gt; tiddler(s)?\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-dropdown-item-plain\"&gt;\n&lt;$button class=\"tc-btn\"&gt;\n&lt;$action-deletetiddler $filter={{$:/temp/advancedsearch}}/&gt;\nDelete these tiddlers\n&lt;/$button&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Filter/FilterButtons/dropdown":{"title":"$:/core/ui/AdvancedSearch/Filter/FilterButtons/dropdown","tags":"$:/tags/AdvancedSearch/FilterButton","text":"&lt;span class=\"tc-popup-keep\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/filterDropdown\"&gt;&gt; class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$button&gt;\n&lt;/span&gt;\n\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/filterDropdown\"&gt;&gt; type=\"popup\" position=\"belowleft\" animate=\"yes\"&gt;\n&lt;$set name=\"tv-show-missing-links\" value=\"yes\"&gt;\n&lt;$linkcatcher actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch\" text=&lt;&lt;navigateTo&gt;&gt;/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text=&lt;&lt;navigateTo&gt;&gt;/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param='.tc-advanced-search input' /&gt;\"\"\"&gt;\n&lt;div class=\"tc-block-dropdown-wrapper\"&gt;\n&lt;div class=\"tc-block-dropdown tc-edit-type-dropdown\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Filter]]\"&gt;&lt;$link to={{!!filter}}&gt;&lt;$transclude field=\"description\"/&gt;&lt;/$link&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;\n&lt;/$set&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Filter/FilterButtons/export":{"title":"$:/core/ui/AdvancedSearch/Filter/FilterButtons/export","tags":"$:/tags/AdvancedSearch/FilterButton","text":"&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$macrocall $name=\"exportButton\" exportFilter={{$:/temp/advancedsearch}} lingoBase=\"$:/language/Buttons/ExportTiddlers/\"/&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Shadows":{"title":"$:/core/ui/AdvancedSearch/Shadows","tags":"$:/tags/AdvancedSearch","caption":"{{$:/language/Search/Shadows/Caption}}","first-search-filter":"[all[shadows]search&lt;userInput&gt;sort[title]limit[250]] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]]","text":"\\define lingo-base() $:/language/Search/\n\n\\define set-next-input-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab--1498284803\" tag=\"$:/tags/AdvancedSearch\" beforeafter=\"$beforeafter$\" defaultState=\"$:/core/ui/AdvancedSearch/System\" actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define cancel-search-actions() &lt;$list filter=\"[{$:/temp/advancedsearch}!match{$:/temp/advancedsearch/input}]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[[$:/temp/advancedsearch]] [[$:/temp/advancedsearch/input]] [[$:/temp/advancedsearch/selected-item]]\" /&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text={{$:/temp/advancedsearch}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;/$list&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\".tc-advanced-search input\"\"\"/&gt;\n\n\\define input-accept-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\n\n\\define input-accept-variant-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\n\n&lt;&lt;lingo Shadows/Hint&gt;&gt;\n\n&lt;div class=\"tc-search\"&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt;&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=\"$:/temp/advancedsearch/input\" storeTitle=\"$:/temp/advancedsearch\"\n\t\trefreshTitle=\"$:/temp/advancedsearch/refresh\" selectionStateTitle=\"$:/temp/advancedsearch/selected-item\" type=\"search\"\n\t\ttag=\"input\" focus={{$:/config/Search/AutoFocus}} configTiddlerFilter=\"[[$:/core/ui/AdvancedSearch/Shadows]]\"\n\t\tinputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; inputAcceptActions=&lt;&lt;input-accept-actions&gt;&gt; \n\t\tinputAcceptVariantActions=&lt;&lt;input-accept-variant-actions&gt;&gt;  filterMinLength={{$:/config/Search/MinLength}}/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n\n&lt;$list filter=\"[{$:/temp/advancedsearch}minlength{$:/config/Search/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n\n&lt;$set name=\"resultCount\" value=\"\"\"&lt;$count filter=\"[all[shadows]search{$:/temp/advancedsearch}] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]]\"/&gt;\"\"\"&gt;\n\n&lt;div class=\"tc-search-results\"&gt;\n\n&lt;&lt;lingo Shadows/Matches&gt;&gt;\n\n&lt;$list filter=\"[all[shadows]search{$:/temp/advancedsearch}sort[title]limit[250]] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]]\"&gt;\n&lt;span class={{{[&lt;currentTiddler&gt;addsuffix[-primaryList]] -[[$:/temp/advancedsearch/selected-item]get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n\n&lt;/div&gt;\n\n&lt;/$set&gt;\n\n&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"match\" text=\"\"&gt;\n\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/Standard":{"title":"$:/core/ui/AdvancedSearch/Standard","tags":"$:/tags/AdvancedSearch","caption":"{{$:/language/Search/Standard/Caption}}","text":"\\define lingo-base() $:/language/Search/\n\\define set-next-input-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab--1498284803\" tag=\"$:/tags/AdvancedSearch\" beforeafter=\"$beforeafter$\" defaultState=\"$:/core/ui/AdvancedSearch/System\" actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define next-search-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab/search-results/advancedsearch\" tag=\"$:/tags/SearchResults\" beforeafter=\"$beforeafter$\" defaultState={{$:/config/SearchResults/Default}} actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/standard/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define cancel-search-actions() &lt;$list filter=\"[{$:/temp/advancedsearch}!match{$:/temp/advancedsearch/input}]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[[$:/temp/advancedsearch]] [[$:/temp/advancedsearch/input]] [[$:/temp/advancedsearch/selected-item]]\" /&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text={{$:/temp/advancedsearch}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;/$list&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\".tc-advanced-search input\"\"\"/&gt;\n\n\\define input-accept-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\n\n\\define input-accept-variant-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\n\n&lt;&lt;lingo Standard/Hint&gt;&gt;\n\n&lt;div class=\"tc-search\"&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt;&gt;\n&lt;$keyboard key=\"shift-alt-Right\" actions=&lt;&lt;next-search-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"shift-alt-Left\" actions=&lt;&lt;next-search-tab \"before\"&gt;&gt;&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=\"$:/temp/advancedsearch/input\" storeTitle=\"$:/temp/advancedsearch\"\n\t\trefreshTitle=\"$:/temp/advancedsearch/refresh\" selectionStateTitle=\"$:/temp/advancedsearch/selected-item\" type=\"search\"\n\t\ttag=\"input\" focus={{$:/config/Search/AutoFocus}} inputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; \n\t\tinputAcceptActions=&lt;&lt;input-accept-actions&gt;&gt; inputAcceptVariantActions=&lt;&lt;input-accept-variant-actions&gt;&gt; \n\t\tconfigTiddlerFilter=\"[[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}]\"\n\t\tfilterMinLength={{$:/config/Search/MinLength}}/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$list filter=\"[{$:/temp/advancedsearch}minlength{$:/config/Search/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n&lt;$vars userInput={{{ [[$:/temp/advancedsearch]get[text]] }}} configTiddler={{{ [[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}] }}} searchListState=\"$:/temp/advancedsearch/selected-item\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]butfirst[]limit[1]]\" emptyMessage=\"\"\"\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]]\"&gt;\n&lt;$transclude/&gt;\n&lt;/$list&gt;\n\"\"\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]]\" default={{$:/config/SearchResults/Default}} actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/standard/currentTab\" text=&lt;&lt;currentTab&gt;&gt;/&gt;\"\"\" explicitState=\"$:/state/tab/search-results/advancedsearch\" /&gt;\n&lt;/$list&gt;\n&lt;/$vars&gt;\n&lt;/$list&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/AdvancedSearch/System":{"title":"$:/core/ui/AdvancedSearch/System","tags":"$:/tags/AdvancedSearch","caption":"{{$:/language/Search/System/Caption}}","first-search-filter":"[is[system]search&lt;userInput&gt;sort[title]limit[250]] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]] -[[$:/temp/advancedsearch/selected-item]]","text":"\\define lingo-base() $:/language/Search/\n\\define set-next-input-tab(beforeafter:\"after\",stateTitle,tag,defaultState,currentTabTiddler) &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab--1498284803\" tag=\"$:/tags/AdvancedSearch\" beforeafter=\"$beforeafter$\" defaultState=\"$:/core/ui/AdvancedSearch/System\" actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define cancel-search-actions() &lt;$list filter=\"[{$:/temp/advancedsearch}!match{$:/temp/advancedsearch/input}]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[[$:/temp/advancedsearch]] [[$:/temp/advancedsearch/input]] [[$:/temp/advancedsearch/selected-item]]\" /&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text={{$:/temp/advancedsearch}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;/$list&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\".tc-advanced-search input\"\"\"/&gt;\n\n\\define input-accept-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\n\n\\define input-accept-variant-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\n\n&lt;&lt;lingo System/Hint&gt;&gt;\n\n&lt;div class=\"tc-search\"&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt;&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=\"$:/temp/advancedsearch/input\" storeTitle=\"$:/temp/advancedsearch\"\n\t\trefreshTitle=\"$:/temp/advancedsearch/refresh\" selectionStateTitle=\"$:/temp/advancedsearch/selected-item\"\n\t\ttype=\"search\" tag=\"input\" focus={{$:/config/Search/AutoFocus}} configTiddlerFilter=\"[[$:/core/ui/AdvancedSearch/System]]\"\n\t\tinputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; inputAcceptActions=&lt;&lt;input-accept-actions&gt;&gt; \n\t\tinputAcceptVariantActions=&lt;&lt;input-accept-variant-actions&gt;&gt; filterMinLength={{$:/config/Search/MinLength}}/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\"&gt;\n\n&lt;$list filter=\"[{$:/temp/advancedsearch}minlength{$:/config/Search/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n\n&lt;$set name=\"resultCount\" value=\"\"\"&lt;$count filter=\"[is[system]search{$:/temp/advancedsearch}] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]] -[[$:/temp/advancedsearch/selected-item]]\"/&gt;\"\"\"&gt;\n\n&lt;div class=\"tc-search-results\"&gt;\n\n&lt;&lt;lingo System/Matches&gt;&gt;\n\n&lt;$list filter=\"[is[system]search{$:/temp/advancedsearch}sort[title]limit[250]] -[[$:/temp/advancedsearch]] -[[$:/temp/advancedsearch/input]] -[[$:/temp/advancedsearch/selected-item]]\"&gt;\n&lt;span class={{{[&lt;currentTiddler&gt;addsuffix[-primaryList]] -[[$:/temp/advancedsearch/selected-item]get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n\n&lt;/div&gt;\n\n&lt;/$set&gt;\n\n&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n\n&lt;$reveal state=\"$:/temp/advancedsearch\" type=\"match\" text=\"\"&gt;\n\n&lt;/$reveal&gt;\n"},"$:/AdvancedSearch":{"title":"$:/AdvancedSearch","icon":"$:/core/images/advanced-search-button","color":"#bbb","text":"&lt;div class=\"tc-advanced-search\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/AdvancedSearch]!has[draft.of]]\" default=\"$:/core/ui/AdvancedSearch/System\" actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/advancedsearch/currentTab\" text=&lt;&lt;currentTab&gt;&gt;/&gt;\"\"\" explicitState=\"$:/state/tab--1498284803\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/AlertTemplate":{"title":"$:/core/ui/AlertTemplate","text":"&lt;div class=\"tc-alert\"&gt;\n&lt;div class=\"tc-alert-toolbar\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;&lt;$action-deletetiddler $tiddler=&lt;&lt;currentTiddler&gt;&gt;/&gt;{{$:/core/images/cancel-button}}&lt;/$button&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-alert-subtitle\"&gt;\n&lt;$wikify name=\"format\" text=&lt;&lt;lingo Tiddler/DateFormat&gt;&gt;&gt;\n&lt;$view field=\"component\"/&gt; - &lt;$view field=\"modified\" format=\"date\" template=&lt;&lt;format&gt;&gt;/&gt; &lt;$reveal type=\"nomatch\" state=\"!!count\" text=\"\"&gt;&lt;span class=\"tc-alert-highlight\"&gt;({{$:/language/Count}}: &lt;$view field=\"count\"/&gt;)&lt;/span&gt;&lt;/$reveal&gt;\n&lt;/$wikify&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-alert-body\"&gt;\n\n&lt;$transclude/&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;\n"},"$:/core/ui/BinaryWarning":{"title":"$:/core/ui/BinaryWarning","text":"\\define lingo-base() $:/language/BinaryWarning/\n&lt;&lt;lingo Prompt&gt;&gt;\n"},"$:/core/ui/Components/plugin-info":{"title":"$:/core/ui/Components/plugin-info","text":"\\define lingo-base() $:/language/ControlPanel/Plugins/\n\n\\define popup-state-macro()\n$(qualified-state)$-$(currentTiddler)$\n\\end\n\n\\define tabs-state-macro()\n$(popup-state)$-$(pluginInfoType)$\n\\end\n\n\\define plugin-icon-title()\n$(currentTiddler)$/icon\n\\end\n\n\\define plugin-disable-title()\n$:/config/Plugins/Disabled/$(currentTiddler)$\n\\end\n\n\\define plugin-table-body(type,disabledMessage,default-popup-state)\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-toggle\"&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;popup-state&gt;&gt; text=\"yes\" default=\"\"\"$default-popup-state$\"\"\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown\" set=&lt;&lt;popup-state&gt;&gt; setTo=\"yes\"&gt;\n{{$:/core/images/chevron-right}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;popup-state&gt;&gt; text=\"yes\" default=\"\"\"$default-popup-state$\"\"\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown\" set=&lt;&lt;popup-state&gt;&gt; setTo=\"no\"&gt;\n{{$:/core/images/chevron-down}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-icon\"&gt;\n&lt;$transclude tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;plugin-icon-title&gt;&gt;&gt;\n&lt;$transclude tiddler=\"$:/core/images/plugin-generic-$type$\"/&gt;\n&lt;/$transclude&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-description\"&gt;\n&lt;h1&gt;\n''&lt;$text text={{{ [&lt;currentTiddler&gt;get[name]] ~[&lt;currentTiddler&gt;split[/]last[1]] }}}/&gt;'': &lt;$view field=\"description\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt; $disabledMessage$\n&lt;/h1&gt;\n&lt;h2&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/h2&gt;\n&lt;h2&gt;\n&lt;div&gt;&lt;em&gt;&lt;$view field=\"version\"/&gt;&lt;/em&gt;&lt;/div&gt;\n&lt;/h2&gt;\n&lt;/div&gt;\n\\end\n\n\\define plugin-info(type,default-popup-state)\n&lt;$set name=\"popup-state\" value=&lt;&lt;popup-state-macro&gt;&gt;&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;plugin-disable-title&gt;&gt; text=\"yes\"&gt;\n&lt;$link to={{!!title}} class=\"tc-plugin-info\"&gt;\n&lt;&lt;plugin-table-body type:\"$type$\" default-popup-state:\"\"\"$default-popup-state$\"\"\"&gt;&gt;\n&lt;/$link&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;plugin-disable-title&gt;&gt; text=\"yes\"&gt;\n&lt;$link to={{!!title}} class=\"tc-plugin-info tc-plugin-info-disabled\"&gt;\n&lt;&lt;plugin-table-body type:\"$type$\" default-popup-state:\"\"\"$default-popup-state$\"\"\" disabledMessage:\"&lt;$macrocall $name='lingo' title='Disabled/Status'/&gt;\"&gt;&gt;\n&lt;/$link&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" text=\"yes\" state=&lt;&lt;popup-state&gt;&gt; default=\"\"\"$default-popup-state$\"\"\"&gt;\n&lt;div class=\"tc-plugin-info-dropdown\"&gt;\n&lt;div class=\"tc-plugin-info-dropdown-body\"&gt;\n&lt;$list filter=\"[all[current]] -[[$:/core]]\"&gt;\n&lt;div style=\"float:right;\"&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;plugin-disable-title&gt;&gt; text=\"yes\"&gt;\n&lt;$button set=&lt;&lt;plugin-disable-title&gt;&gt; setTo=\"yes\" tooltip={{$:/language/ControlPanel/Plugins/Disable/Hint}} aria-label={{$:/language/ControlPanel/Plugins/Disable/Caption}}&gt;\n&lt;&lt;lingo Disable/Caption&gt;&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;plugin-disable-title&gt;&gt; text=\"yes\"&gt;\n&lt;$button set=&lt;&lt;plugin-disable-title&gt;&gt; setTo=\"no\" tooltip={{$:/language/ControlPanel/Plugins/Enable/Hint}} aria-label={{$:/language/ControlPanel/Plugins/Enable/Caption}}&gt;\n&lt;&lt;lingo Enable/Caption&gt;&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;$set name=\"tabsList\" filter=\"[&lt;currentTiddler&gt;list[]] contents\"&gt;\n&lt;$macrocall $name=\"tabs\" state=&lt;&lt;tabs-state-macro&gt;&gt; tabsList=&lt;&lt;tabsList&gt;&gt; default={{{ [enlist&lt;tabsList&gt;] }}} template=\"$:/core/ui/PluginInfo\"/&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/$set&gt;\n\\end\n\n&lt;$macrocall $name=\"plugin-info\" type=&lt;&lt;plugin-type&gt;&gt; default-popup-state=&lt;&lt;default-popup-state&gt;&gt;/&gt;\n"},"$:/core/ui/Components/tag-link":{"title":"$:/core/ui/Components/tag-link","text":"&lt;$link&gt;\n&lt;$set name=\"backgroundColor\" value={{!!color}}&gt;\n&lt;span style=&lt;&lt;tag-styles&gt;&gt; class=\"tc-tag-label\"&gt;\n&lt;$view field=\"title\" format=\"text\"/&gt;\n&lt;/span&gt;\n&lt;/$set&gt;\n&lt;/$link&gt;"},"$:/core/ui/ControlPanel/Advanced":{"title":"$:/core/ui/ControlPanel/Advanced","tags":"$:/tags/ControlPanel/Info","caption":"{{$:/language/ControlPanel/Advanced/Caption}}","text":"{{$:/language/ControlPanel/Advanced/Hint}}\n\n&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Advanced]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/TiddlerFields\" explicitState=\"$:/state/tab--959111941\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/ControlPanel/Appearance":{"title":"$:/core/ui/ControlPanel/Appearance","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/Appearance/Caption}}","text":"{{$:/language/ControlPanel/Appearance/Hint}}\n\n&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Appearance]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/Theme\" explicitState=\"$:/state/tab--1963855381\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/ControlPanel/Basics":{"title":"$:/core/ui/ControlPanel/Basics","tags":"$:/tags/ControlPanel/Info","caption":"{{$:/language/ControlPanel/Basics/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Basics/\n\n\\define show-filter-count(filter)\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch\" $value=\"\"\"$filter$\"\"\"/&gt;\n&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" $value=\"\"\"$filter$\"\"\"/&gt;\n&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;\n&lt;$action-setfield $tiddler=\"$:/state/tab--1498284803\" $value=\"$:/core/ui/AdvancedSearch/Filter\"/&gt;\n&lt;$action-navigate $to=\"$:/AdvancedSearch\"/&gt;\n&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\".tc-advanced-search input\"/&gt;\n''&lt;$count filter=\"\"\"$filter$\"\"\"/&gt;''\n{{$:/core/images/advanced-search-button}}\n&lt;/$button&gt;\n\\end\n\n|&lt;&lt;lingo Version/Prompt&gt;&gt; |''&lt;&lt;version&gt;&gt;'' |\n|&lt;$link to=\"$:/SiteTitle\"&gt;&lt;&lt;lingo Title/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteTitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/SiteSubtitle\"&gt;&lt;&lt;lingo Subtitle/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteSubtitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/status/UserName\"&gt;&lt;&lt;lingo Username/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/status/UserName\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/config/AnimationDuration\"&gt;&lt;&lt;lingo AnimDuration/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/config/AnimationDuration\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/DefaultTiddlers\"&gt;&lt;&lt;lingo DefaultTiddlers/Prompt&gt;&gt;&lt;/$link&gt; |&lt;&lt;lingo DefaultTiddlers/TopHint&gt;&gt;&lt;br&gt; &lt;$edit tag=\"textarea\" tiddler=\"$:/DefaultTiddlers\" class=\"tc-edit-texteditor\"/&gt;&lt;br&gt;//&lt;&lt;lingo DefaultTiddlers/BottomHint&gt;&gt;// |\n|&lt;$link to=\"$:/language/DefaultNewTiddlerTitle\"&gt;&lt;&lt;lingo NewTiddler/Title/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/language/DefaultNewTiddlerTitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/config/NewJournal/Title\"&gt;&lt;&lt;lingo NewJournal/Title/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/config/NewJournal/Title\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/config/NewJournal/Text\"&gt;&lt;&lt;lingo NewJournal/Text/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit tiddler=\"$:/config/NewJournal/Text\" tag=\"textarea\" class=\"tc-edit-texteditor\" default=\"\"/&gt; |\n|&lt;$link to=\"$:/config/NewTiddler/Tags\"&gt;&lt;&lt;lingo NewTiddler/Tags/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$vars currentTiddler=\"$:/config/NewTiddler/Tags\" tagField=\"text\"&gt;{{||$:/core/ui/EditTemplate/tags}}&lt;$list filter=\"[&lt;currentTiddler&gt;tags[]] +[limit[1]]\" variable=\"ignore\"&gt;&lt;$button tooltip={{$:/language/ControlPanel/Basics/RemoveTags/Hint}}&gt;&lt;&lt;lingo RemoveTags&gt;&gt;&lt;$action-listops $tiddler=&lt;&lt;currentTiddler&gt;&gt; $field=\"text\" $subfilter={{{ [&lt;currentTiddler&gt;get[tags]] }}}/&gt;&lt;$action-setfield $tiddler=&lt;&lt;currentTiddler&gt;&gt; tags=\"\"/&gt;&lt;/$button&gt;&lt;/$list&gt;&lt;/$vars&gt; |\n|&lt;$link to=\"$:/config/NewJournal/Tags\"&gt;&lt;&lt;lingo NewJournal/Tags/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$vars currentTiddler=\"$:/config/NewJournal/Tags\" tagField=\"text\"&gt;{{||$:/core/ui/EditTemplate/tags}}&lt;$list filter=\"[&lt;currentTiddler&gt;tags[]] +[limit[1]]\" variable=\"ignore\"&gt;&lt;$button tooltip={{$:/language/ControlPanel/Basics/RemoveTags/Hint}}&gt;&lt;&lt;lingo RemoveTags&gt;&gt;&lt;$action-listops $tiddler=&lt;&lt;currentTiddler&gt;&gt; $field=\"text\" $subfilter={{{ [&lt;currentTiddler&gt;get[tags]] }}}/&gt;&lt;$action-setfield $tiddler=&lt;&lt;currentTiddler&gt;&gt; tags=\"\"/&gt;&lt;/$button&gt;&lt;/$list&gt;&lt;/$vars&gt; |\n|&lt;$link to=\"$:/config/AutoFocus\"&gt;&lt;&lt;lingo AutoFocus/Prompt&gt;&gt;&lt;/$link&gt; |{{$:/snippets/minifocusswitcher}} |\n|&lt;&lt;lingo Language/Prompt&gt;&gt; |{{$:/snippets/minilanguageswitcher}} |\n|&lt;&lt;lingo Tiddlers/Prompt&gt;&gt; |&lt;&lt;show-filter-count \"[!is[system]sort[title]]\"&gt;&gt; |\n|&lt;&lt;lingo Tags/Prompt&gt;&gt; |&lt;&lt;show-filter-count \"[tags[]sort[title]]\"&gt;&gt; |\n|&lt;&lt;lingo SystemTiddlers/Prompt&gt;&gt; |&lt;&lt;show-filter-count \"[is[system]sort[title]]\"&gt;&gt; |\n|&lt;&lt;lingo ShadowTiddlers/Prompt&gt;&gt; |&lt;&lt;show-filter-count \"[all[shadows]sort[title]]\"&gt;&gt; |\n|&lt;&lt;lingo OverriddenShadowTiddlers/Prompt&gt;&gt; |&lt;&lt;show-filter-count \"[is[tiddler]is[shadow]sort[title]]\"&gt;&gt; |\n"},"$:/core/ui/ControlPanel/EditorTypes":{"title":"$:/core/ui/ControlPanel/EditorTypes","tags":"$:/tags/ControlPanel/Advanced","caption":"{{$:/language/ControlPanel/EditorTypes/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/EditorTypes/\n\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;table&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;&lt;&lt;lingo Type/Caption&gt;&gt;&lt;/th&gt;\n&lt;th&gt;&lt;&lt;lingo Editor/Caption&gt;&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]prefix[$:/config/EditorTypeMappings/]sort[title]]\"&gt;\n&lt;tr&gt;\n&lt;td&gt;\n&lt;$link&gt;\n&lt;$list filter=\"[all[current]removeprefix[$:/config/EditorTypeMappings/]]\"&gt;\n&lt;$text text={{!!title}}/&gt;\n&lt;/$list&gt;\n&lt;/$link&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;$view field=\"text\"/&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/ControlPanel/Info":{"title":"$:/core/ui/ControlPanel/Info","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/Info/Caption}}","text":"{{$:/language/ControlPanel/Info/Hint}}\n\n&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Info]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/Basics\" explicitState=\"$:/state/tab--2112689675\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/ControlPanel/KeyboardShortcuts":{"title":"$:/core/ui/ControlPanel/KeyboardShortcuts","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/KeyboardShortcuts/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/KeyboardShortcuts/\n\n\\define new-shortcut(title)\n&lt;div class=\"tc-dropdown-item-plain\"&gt;\n&lt;$edit-shortcut tiddler=\"$title$\" placeholder={{$:/language/ControlPanel/KeyboardShortcuts/Add/Prompt}} focus=\"true\" style=\"width:auto;\"/&gt; &lt;$button&gt;\n&lt;&lt;lingo Add/Caption&gt;&gt;\n&lt;$action-listops\n\t$tiddler=\"$(shortcutTitle)$\"\n\t$field=\"text\"\n\t$subfilter=\"[{$title$}]\"\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=\"$title$\"\n/&gt;\n&lt;/$button&gt;\n&lt;/div&gt;\n\\end\n\n\\define shortcut-list-item(caption)\n&lt;td&gt;\n&lt;/td&gt;\n&lt;td style=\"text-align:right;font-size:0.7em;\"&gt;\n&lt;&lt;lingo Platform/$caption$&gt;&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;div style=\"position:relative;\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/dropdown/$(shortcutTitle)$\"&gt;&gt; class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/edit-button}}\n&lt;/$button&gt;\n&lt;$macrocall $name=\"displayshortcuts\" $output=\"text/html\" shortcuts={{$(shortcutTitle)$}} prefix=\"&lt;kbd&gt;\" separator=\"&lt;/kbd&gt; &lt;kbd&gt;\" suffix=\"&lt;/kbd&gt;\"/&gt;\n\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/dropdown/$(shortcutTitle)$\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-block-dropdown-wrapper\"&gt;\n&lt;div class=\"tc-block-dropdown tc-edit-type-dropdown tc-popup-keep\"&gt;\n&lt;$list filter=\"[list[$(shortcutTitle)$!!text]sort[title]]\" variable=\"shortcut\" emptyMessage=\"\"\"\n&lt;div class=\"tc-dropdown-item-plain\"&gt;\n//&lt;&lt;lingo NoShortcuts/Caption&gt;&gt;//\n&lt;/div&gt;\n\"\"\"&gt;\n&lt;div class=\"tc-dropdown-item-plain\"&gt;\n&lt;$button class=\"tc-btn-invisible\" tooltip={{$:/language/ControlPanel/KeyboardShortcuts/Remove/Hint}}&gt;\n&lt;$action-listops\n\t$tiddler=\"$(shortcutTitle)$\"\n\t$field=\"text\"\n\t$subfilter=\"+[remove&lt;shortcut&gt;]\"\n/&gt;\n&lt;small&gt;{{$:/core/images/close-button}}&lt;/small&gt;\n&lt;/$button&gt;\n&lt;kbd&gt;\n&lt;$macrocall $name=\"displayshortcuts\" $output=\"text/html\" shortcuts=&lt;&lt;shortcut&gt;&gt;/&gt;\n&lt;/kbd&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;hr/&gt;\n&lt;$macrocall $name=\"new-shortcut\" title=&lt;&lt;qualify \"$:/state/new-shortcut/$(shortcutTitle)$\"&gt;&gt;/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n\\end\n\n\\define shortcut-list(caption,prefix)\n&lt;tr&gt;\n&lt;$list filter=\"[[$prefix$$(shortcutName)$]]\" variable=\"shortcutTitle\"&gt;\n&lt;&lt;shortcut-list-item \"$caption$\"&gt;&gt;\n&lt;/$list&gt;\n&lt;/tr&gt;\n\\end\n\n\\define shortcut-editor()\n&lt;&lt;shortcut-list \"All\" \"$:/config/shortcuts/\"&gt;&gt;\n&lt;&lt;shortcut-list \"Mac\" \"$:/config/shortcuts-mac/\"&gt;&gt;\n&lt;&lt;shortcut-list \"NonMac\" \"$:/config/shortcuts-not-mac/\"&gt;&gt;\n&lt;&lt;shortcut-list \"Linux\" \"$:/config/shortcuts-linux/\"&gt;&gt;\n&lt;&lt;shortcut-list \"NonLinux\" \"$:/config/shortcuts-not-linux/\"&gt;&gt;\n&lt;&lt;shortcut-list \"Windows\" \"$:/config/shortcuts-windows/\"&gt;&gt;\n&lt;&lt;shortcut-list \"NonWindows\" \"$:/config/shortcuts-not-windows/\"&gt;&gt;\n\\end\n\n\\define shortcut-preview()\n&lt;$macrocall $name=\"displayshortcuts\" $output=\"text/html\" shortcuts={{$(shortcutPrefix)$$(shortcutName)$}} prefix=\"&lt;kbd&gt;\" separator=\"&lt;/kbd&gt; &lt;kbd&gt;\" suffix=\"&lt;/kbd&gt;\"/&gt;\n\\end\n\n\\define shortcut-item-inner()\n&lt;tr&gt;\n&lt;td&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;dropdownStateTitle&gt;&gt; text=\"open\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;$action-setfield\n\t$tiddler=&lt;&lt;dropdownStateTitle&gt;&gt;\n\t$value=\"open\"\n/&gt;\n{{$:/core/images/right-arrow}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;dropdownStateTitle&gt;&gt; text=\"open\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;$action-setfield\n\t$tiddler=&lt;&lt;dropdownStateTitle&gt;&gt;\n\t$value=\"close\"\n/&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n''&lt;$text text=&lt;&lt;shortcutName&gt;&gt;/&gt;''\n&lt;/td&gt;\n&lt;td&gt;\n&lt;$transclude tiddler=\"$:/config/ShortcutInfo/$(shortcutName)$\"/&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;$list filter=\"$:/config/shortcuts/ $:/config/shortcuts-mac/ $:/config/shortcuts-not-mac/ $:/config/shortcuts-linux/ $:/config/shortcuts-not-linux/ $:/config/shortcuts-windows/ $:/config/shortcuts-not-windows/\" variable=\"shortcutPrefix\"&gt;\n&lt;&lt;shortcut-preview&gt;&gt;\n&lt;/$list&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;$set name=\"dropdownState\" value={{$(dropdownStateTitle)$}}&gt;\n&lt;$list filter=\"[&lt;dropdownState&gt;match[open]]\" variable=\"listItem\"&gt;\n&lt;&lt;shortcut-editor&gt;&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define shortcut-item()\n&lt;$set name=\"dropdownStateTitle\" value=&lt;&lt;qualify \"$:/state/dropdown/keyboardshortcut/$(shortcutName)$\"&gt;&gt;&gt;\n&lt;&lt;shortcut-item-inner&gt;&gt;\n&lt;/$set&gt;\n\\end\n\n&lt;table&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]removeprefix[$:/config/ShortcutInfo/]]\" variable=\"shortcutName\"&gt;\n&lt;&lt;shortcut-item&gt;&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/ControlPanel/LoadedModules":{"title":"$:/core/ui/ControlPanel/LoadedModules","tags":"$:/tags/ControlPanel/Advanced","caption":"{{$:/language/ControlPanel/LoadedModules/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/\n&lt;&lt;lingo LoadedModules/Hint&gt;&gt;\n\n{{$:/snippets/modules}}\n"},"$:/core/ui/ControlPanel/Modals/AddPlugins":{"title":"$:/core/ui/ControlPanel/Modals/AddPlugins","subtitle":"{{$:/core/images/download-button}} {{$:/language/ControlPanel/Plugins/Add/Caption}}","text":"\\define install-plugin-actions()\n&lt;$action-sendmessage $message=\"tm-load-plugin-from-library\" url={{!!url}} title={{$(assetInfo)$!!original-title}}/&gt;\n&lt;$set name=\"url\" value={{!!url}}&gt;\n&lt;$set name=\"currentTiddler\" value=&lt;&lt;assetInfo&gt;&gt;&gt;\n&lt;$list filter=\"[enlist{!!dependents}] [{!!parent-plugin}] +[sort[name]]\" variable=\"dependency\"&gt;\n&lt;$action-sendmessage $message=\"tm-load-plugin-from-library\" url=&lt;&lt;url&gt;&gt; title=&lt;&lt;dependency&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n\\end\n\n\\define install-plugin-button()\n&lt;div&gt;\n&lt;$set name=\"libraryVersion\" value={{{ [&lt;assetInfo&gt;get[version]] }}}&gt;\n&lt;$set name=\"installedVersion\" value={{{ [&lt;assetInfo&gt;get[original-title]get[version]] }}}&gt;\n&lt;$set name=\"reinstall-type\" value={{{ [&lt;libraryVersion&gt;compare:version:eq&lt;installedVersion&gt;then[tc-reinstall]] [&lt;libraryVersion&gt;compare:version:gt&lt;installedVersion&gt;then[tc-reinstall-upgrade]] [&lt;libraryVersion&gt;compare:version:lt&lt;installedVersion&gt;then[tc-reinstall-downgrade]] }}}&gt;\n&lt;$button actions=&lt;&lt;install-plugin-actions&gt;&gt; class={{{ [&lt;assetInfo&gt;get[original-title]has[version]then&lt;reinstall-type&gt;] tc-btn-invisible tc-install-plugin +[join[ ]] }}}&gt;\n{{$:/core/images/download-button}}\n&lt;$list filter=\"[&lt;assetInfo&gt;get[original-title]get[version]]\" variable=\"ignore\" emptyMessage=\"{{$:/language/ControlPanel/Plugins/Install/Caption}}\"&gt;\n&lt;$list filter=\"[&lt;libraryVersion&gt;compare:version:gt&lt;installedVersion&gt;]\" variable=\"ignore\" emptyMessage=\"\"\"\n&lt;$list filter=\"[&lt;libraryVersion&gt;compare:version:lt&lt;installedVersion&gt;]\" variable=\"ignore\" emptyMessage=\"{{$:/language/ControlPanel/Plugins/Reinstall/Caption}}\"&gt;\n{{$:/language/ControlPanel/Plugins/Downgrade/Caption}}\n&lt;/$list&gt;\n\"\"\"&gt;\n{{$:/language/ControlPanel/Plugins/Update/Caption}}\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;div&gt;\n&lt;/div&gt;\n&lt;$reveal stateTitle=&lt;&lt;assetInfo&gt;&gt; stateField=\"requires-reload\" type=\"match\" text=\"yes\"&gt;{{$:/language/ControlPanel/Plugins/PluginWillRequireReload}}&lt;/$reveal&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n\\end\n\n\\define popup-state-macro()\n$:/state/add-plugin-info/$(connectionTiddler)$/$(assetInfo)$\n\\end\n\n\\define display-plugin-info(type)\n&lt;$set name=\"popup-state\" value=&lt;&lt;popup-state-macro&gt;&gt;&gt;\n&lt;div class=\"tc-plugin-info\"&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-toggle\"&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;popup-state&gt;&gt; text=\"yes\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown\" set=&lt;&lt;popup-state&gt;&gt; setTo=\"yes\"&gt;\n{{$:/core/images/chevron-right}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;popup-state&gt;&gt; text=\"yes\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown\" set=&lt;&lt;popup-state&gt;&gt; setTo=\"no\"&gt;\n{{$:/core/images/chevron-down}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-icon\"&gt;\n&lt;$list filter=\"[&lt;assetInfo&gt;has[icon]]\" emptyMessage=\"\"\"&lt;$transclude tiddler=\"$:/core/images/plugin-generic-$type$\"/&gt;\"\"\"&gt;\n&lt;img src={{$(assetInfo)$!!icon}}/&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-description\"&gt;\n&lt;h1&gt;&lt;strong&gt;&lt;$text text={{{ [&lt;assetInfo&gt;get[name]] ~[&lt;assetInfo&gt;get[original-title]split[/]last[1]] }}}/&gt;&lt;/strong&gt;: &lt;$view tiddler=&lt;&lt;assetInfo&gt;&gt; field=\"description\"/&gt;&lt;/h1&gt;\n&lt;h2&gt;&lt;$view tiddler=&lt;&lt;assetInfo&gt;&gt; field=\"original-title\"/&gt;&lt;/h2&gt;\n&lt;div&gt;&lt;em&gt;&lt;$view tiddler=&lt;&lt;assetInfo&gt;&gt; field=\"version\"/&gt;&lt;/em&gt;&lt;/div&gt;\n&lt;$list filter=\"[&lt;assetInfo&gt;get[original-title]get[version]]\" variable=\"installedVersion\"&gt;&lt;div&gt;&lt;em&gt;{{$:/language/ControlPanel/Plugins/AlreadyInstalled/Hint}}&lt;/em&gt;&lt;/div&gt;&lt;/$list&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-plugin-info-chunk tc-plugin-info-buttons\"&gt;\n&lt;&lt;install-plugin-button&gt;&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;$set name=\"original-title\" value={{{ [&lt;assetInfo&gt;get[original-title]] }}}&gt;\n&lt;$reveal type=\"match\" text=\"yes\" state=&lt;&lt;popup-state&gt;&gt;&gt;\n&lt;div class=\"tc-plugin-info-dropdown\"&gt;\n&lt;$list filter=\"[enlist{!!dependents}] [&lt;currentTiddler&gt;get[parent-plugin]] +[limit[1]] ~[&lt;assetInfo&gt;get[original-title]!is[tiddler]]\" variable=\"ignore\"&gt;\n&lt;div class=\"tc-plugin-info-dropdown-message\"&gt;\n&lt;$list filter=\"[&lt;assetInfo&gt;get[original-title]!is[tiddler]]\"&gt;\n{{$:/language/ControlPanel/Plugins/NotInstalled/Hint}}\n&lt;/$list&gt;\n&lt;$set name=\"currentTiddler\" value=&lt;&lt;assetInfo&gt;&gt;&gt;\n&lt;$list filter=\"[enlist{!!dependents}] [&lt;currentTiddler&gt;get[parent-plugin]] +[limit[1]]\" variable=\"ignore\"&gt;\n&lt;div&gt;\n{{$:/language/ControlPanel/Plugins/AlsoRequires}}\n&lt;$list filter=\"[enlist{!!dependents}] [{!!parent-plugin}] +[sort[name]]\" variable=\"dependency\"&gt;\n&lt;$text text=&lt;&lt;dependency&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;div class=\"tc-plugin-info-dropdown-body\"&gt;\n&lt;$transclude tiddler=&lt;&lt;assetInfo&gt;&gt; field=\"readme\" mode=\"block\"/&gt;\n&lt;/div&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[$type$]has[parent-plugin]parent-plugin&lt;original-title&gt;limit[1]]\" variable=\"ignore\"&gt;\n&lt;div class=\"tc-plugin-info-sub-plugins\"&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[$type$]has[parent-plugin]parent-plugin&lt;original-title&gt;sort[name]]\" variable=\"assetInfo\"&gt;\n&lt;&lt;display-plugin-info \"$type$\"&gt;&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[$type$]has[parent-plugin]parent-plugin&lt;original-title&gt;limit[1]]\" variable=\"ignore\"&gt;\n&lt;$reveal type=\"nomatch\" text=\"yes\" state=&lt;&lt;popup-state&gt;&gt; tag=\"div\" class=\"tc-plugin-info-sub-plugin-indicator\"&gt;\n&lt;$wikify name=\"count\" text=\"\"\"&lt;$count filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[$type$]has[parent-plugin]parent-plugin&lt;original-title&gt;]\"/&gt;\"\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\" set=&lt;&lt;popup-state&gt;&gt; setTo=\"yes\"&gt;\n{{$:/language/ControlPanel/Plugins/SubPluginPrompt}}\n&lt;/$button&gt;\n&lt;/$wikify&gt;\n&lt;/$reveal&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n\\end\n\n\\define load-plugin-library-button()\n&lt;$list filter=\"[&lt;currentTiddler&gt;get[enabled]else[yes]match[yes]]\" variable=\"ignore\"&gt;\n&lt;$button class=\"tc-btn-big-green\"&gt;\n&lt;$action-sendmessage $message=\"tm-load-plugin-library\" url={{!!url}} infoTitlePrefix=\"$:/temp/RemoteAssetInfo/\"/&gt;\n{{$:/core/images/chevron-right}} {{$:/language/ControlPanel/Plugins/OpenPluginLibrary}}\n&lt;/$button&gt;\n&lt;/$list&gt;\n\\end\n\n\\define display-server-assets(type)\n{{$:/language/Search/Search}}: &lt;$edit-text tiddler=\"\"\"$:/temp/RemoteAssetSearch/$(currentTiddler)$\"\"\" default=\"\" type=\"search\" tag=\"input\"/&gt;\n&lt;$reveal state=\"\"\"$:/temp/RemoteAssetSearch/$(currentTiddler)$\"\"\" type=\"nomatch\" text=\"\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;$action-setfield $tiddler=\"\"\"$:/temp/RemoteAssetSearch/$(currentTiddler)$\"\"\" $field=\"text\" $value=\"\"/&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;div class=\"tc-plugin-library-listing\"&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[$type$]search:author,description,original-title,readme,title{$:/temp/RemoteAssetSearch/$(currentTiddler)$}sort[name]]\" variable=\"assetInfo\"&gt;\n&lt;$list filter=\"[[$:/temp/RemoteAssetSearch/$(currentTiddler)$]has[text]] ~[&lt;assetInfo&gt;!has[parent-plugin]]\" variable=\"ignore\"&gt;&lt;!-- Hide sub-plugins if we're not searching --&gt;\n&lt;&lt;display-plugin-info \"$type$\"&gt;&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n\\end\n\n\\define display-server-connection()\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/ServerConnection]suffix{!!url}]\" variable=\"connectionTiddler\" emptyMessage=&lt;&lt;load-plugin-library-button&gt;&gt;&gt;\n\n&lt;$set name=\"transclusion\" value=&lt;&lt;connectionTiddler&gt;&gt;&gt;\n\n&lt;&lt;tabs \"[[$:/core/ui/ControlPanel/Plugins/Add/Updates]] [[$:/core/ui/ControlPanel/Plugins/Add/Plugins]] [[$:/core/ui/ControlPanel/Plugins/Add/Themes]] [[$:/core/ui/ControlPanel/Plugins/Add/Languages]]\" \"$:/core/ui/ControlPanel/Plugins/Add/Plugins\"&gt;&gt;\n\n&lt;/$set&gt;\n\n&lt;/$list&gt;\n\\end\n\n\\define close-library-button()\n&lt;$reveal type='nomatch' state='$:/temp/ServerConnection/$(PluginLibraryURL)$' text=''&gt;\n&lt;$button class='tc-btn-big-green'&gt;\n&lt;$action-sendmessage $message=\"tm-unload-plugin-library\" url={{!!url}}/&gt;\n{{$:/core/images/chevron-left}} {{$:/language/ControlPanel/Plugins/ClosePluginLibrary}}\n&lt;$action-deletetiddler $filter=\"[prefix[$:/temp/ServerConnection/$(PluginLibraryURL)$]][prefix[$:/temp/RemoteAssetInfo/$(PluginLibraryURL)$]]\"/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n\\end\n\n\\define plugin-library-listing()\n&lt;div class=\"tc-tab-set\"&gt;\n&lt;$set name=\"defaultTab\" value={{{ [all[tiddlers+shadows]tag[$:/tags/PluginLibrary]] }}}&gt;\n&lt;div class=\"tc-tab-buttons\"&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/PluginLibrary]]\"&gt;\n&lt;$button set=&lt;&lt;qualify \"$:/state/addplugins/tab\"&gt;&gt; setTo=&lt;&lt;currentTiddler&gt;&gt; default=&lt;&lt;defaultTab&gt;&gt; selectedClass=\"tc-tab-selected\"&gt;\n&lt;$set name=\"tv-wikilinks\" value=\"no\"&gt;\n&lt;$transclude field=\"caption\"/&gt;\n&lt;/$set&gt;\n&lt;/$button&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-tab-divider\"/&gt;\n&lt;div class=\"tc-tab-content\"&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/PluginLibrary]]\"&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;qualify \"$:/state/addplugins/tab\"&gt;&gt; text=&lt;&lt;currentTiddler&gt;&gt; default=&lt;&lt;defaultTab&gt;&gt;&gt;\n&lt;h2&gt;&lt;$link&gt;&lt;$transclude field=\"caption\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$transclude&gt;&lt;/$link&gt;&lt;/h2&gt;\n//&lt;$view field=\"url\"/&gt;//\n&lt;$transclude mode=\"block\"/&gt;\n&lt;$set name=PluginLibraryURL value={{!!url}}&gt;\n&lt;&lt;close-library-button&gt;&gt;\n&lt;/$set&gt;\n&lt;&lt;display-server-connection&gt;&gt;\n&lt;/$reveal&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n\\end\n\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\n&lt;div&gt;\n&lt;&lt;plugin-library-listing&gt;&gt;\n&lt;/div&gt;\n"},"$:/core/ui/ControlPanel/Palette":{"title":"$:/core/ui/ControlPanel/Palette","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ControlPanel/Palette/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Palette/\n\n{{$:/snippets/paletteswitcher}}\n\n&lt;$reveal type=\"nomatch\" state=\"$:/state/ShowPaletteEditor\" text=\"yes\"&gt;\n\n&lt;$button set=\"$:/state/ShowPaletteEditor\" setTo=\"yes\"&gt;&lt;&lt;lingo ShowEditor/Caption&gt;&gt;&lt;/$button&gt;\n\n&lt;/$reveal&gt;\n\n&lt;$reveal type=\"match\" state=\"$:/state/ShowPaletteEditor\" text=\"yes\"&gt;\n\n&lt;$button set=\"$:/state/ShowPaletteEditor\" setTo=\"no\"&gt;&lt;&lt;lingo HideEditor/Caption&gt;&gt;&lt;/$button&gt;\n{{$:/PaletteManager}}\n\n&lt;/$reveal&gt;\n\n"},"$:/core/ui/ControlPanel/Parsing":{"title":"$:/core/ui/ControlPanel/Parsing","tags":"$:/tags/ControlPanel/Advanced","caption":"{{$:/language/ControlPanel/Parsing/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Parsing/\n\n\\define toggle(Type)\n&lt;$checkbox\ntiddler=\"\"\"$:/config/WikiParserRules/$Type$/$(rule)$\"\"\"\nfield=\"text\"\nchecked=\"enable\"\nunchecked=\"disable\"\ndefault=\"enable\"&gt;\n&lt;&lt;rule&gt;&gt;\n&lt;/$checkbox&gt;\n\\end\n\n\\define rules(type,Type)\n&lt;$list filter=\"[wikiparserrules[$type$]]\" variable=\"rule\"&gt;\n&lt;dd&gt;&lt;&lt;toggle $Type$&gt;&gt;&lt;/dd&gt;\n&lt;/$list&gt;\n\\end\n\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;dl&gt;\n&lt;dt&gt;&lt;&lt;lingo Pragma/Caption&gt;&gt;&lt;/dt&gt;\n&lt;&lt;rules pragma Pragma&gt;&gt;\n&lt;dt&gt;&lt;&lt;lingo Inline/Caption&gt;&gt;&lt;/dt&gt;\n&lt;&lt;rules inline Inline&gt;&gt;\n&lt;dt&gt;&lt;&lt;lingo Block/Caption&gt;&gt;&lt;/dt&gt;\n&lt;&lt;rules block Block&gt;&gt;\n&lt;/dl&gt;"},"$:/core/ui/ControlPanel/Plugins/Add/Languages":{"title":"$:/core/ui/ControlPanel/Plugins/Add/Languages","caption":"{{$:/language/ControlPanel/Plugins/Languages/Caption}} (&lt;$count filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[language]]\"/&gt;)","text":"&lt;&lt;display-server-assets language&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Add/Plugins":{"title":"$:/core/ui/ControlPanel/Plugins/Add/Plugins","caption":"{{$:/language/ControlPanel/Plugins/Plugins/Caption}}  (&lt;$count filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[plugin]]\"/&gt;)","text":"&lt;&lt;display-server-assets plugin&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Add/Themes":{"title":"$:/core/ui/ControlPanel/Plugins/Add/Themes","caption":"{{$:/language/ControlPanel/Plugins/Themes/Caption}}  (&lt;$count filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}original-plugin-type[theme]]\"/&gt;)","text":"&lt;&lt;display-server-assets theme&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Add/Updates":{"title":"$:/core/ui/ControlPanel/Plugins/Add/Updates","caption":"&lt;$importvariables filter=\"$:/core/ui/ControlPanel/Plugins/Add/Updates\"&gt;{{$:/language/ControlPanel/Plugins/Updates/Caption}} (&lt;&lt;update-count&gt;&gt;)&lt;/$importvariables&gt;","text":"\\define each-updateable-plugin(body)\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/RemoteAssetInfo]server-url{!!url}sort[title]]\" variable=\"assetInfo\"&gt;\n&lt;$set name=\"libraryVersion\" value={{{ [&lt;assetInfo&gt;get[version]] }}}&gt;\n&lt;$list filter=\"[&lt;assetInfo&gt;get[original-title]has[version]!version&lt;libraryVersion&gt;]\" variable=\"ignore\"&gt;\n&lt;$set name=\"installedVersion\" value={{{ [&lt;assetInfo&gt;get[original-title]get[version]] }}}&gt;\n&lt;$list filter=\"[&lt;installedversion&gt;!match&lt;libraryVersion&gt;]\" variable=\"ignore\"&gt;\n$body$\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n\\end\n\n\\define update-all-actions()\n&lt;$macrocall $name=\"each-updateable-plugin\" body=\"\"\"\n&lt;&lt;install-plugin-actions&gt;&gt;\n\"\"\"/&gt;\n\\end\n\n\\define update-count()\n&lt;$wikify name=\"count-filter\" text=&lt;&lt;each-updateable-plugin \"&amp;#91;&amp;#91;&lt;$text text=&lt;&lt;assetInfo&gt;&gt;/&gt;]]\"&gt;&gt;&gt;&lt;$count filter=&lt;&lt;count-filter&gt;&gt;/&gt;&lt;/$wikify&gt;\n\\end\n\n&lt;$button actions=&lt;&lt;update-all-actions&gt;&gt; class=\"tc-btn-invisible tc-install-plugin tc-reinstall-upgrade\"&gt;\n{{$:/core/images/download-button}} {{||$:/language/ControlPanel/Plugins/Updates/UpdateAll/Caption}}\n&lt;/$button&gt;\n\n&lt;div class=\"tc-plugin-library-listing\"&gt;\n&lt;$macrocall $name=\"each-updateable-plugin\" body=\"\"\"\n&lt;$macrocall $name=\"display-plugin-info\" type={{{ [&lt;assetInfo&gt;get[original-plugin-type]] }}}/&gt;\n\"\"\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/ControlPanel/Plugins/AddPlugins":{"title":"$:/core/ui/ControlPanel/Plugins/AddPlugins","text":"\\define lingo-base() $:/language/ControlPanel/Plugins/\n\n&lt;$button message=\"tm-modal\" param=\"$:/core/ui/ControlPanel/Modals/AddPlugins\" tooltip={{$:/language/ControlPanel/Plugins/Add/Hint}} class=\"tc-btn-big-green tc-primary-btn\"&gt;\n{{$:/core/images/download-button}} &lt;&lt;lingo Add/Caption&gt;&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Installed/Languages":{"title":"$:/core/ui/ControlPanel/Plugins/Installed/Languages","caption":"{{$:/language/ControlPanel/Plugins/Languages/Caption}} (&lt;$count filter=\"[!has[draft.of]plugin-type[language]]\"/&gt;)","text":"&lt;&lt;plugin-table language&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Installed/Plugins":{"title":"$:/core/ui/ControlPanel/Plugins/Installed/Plugins","caption":"{{$:/language/ControlPanel/Plugins/Plugins/Caption}} (&lt;$count filter=\"[!has[draft.of]plugin-type[plugin]]\"/&gt;)","text":"&lt;&lt;plugin-table plugin&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins/Installed/Themes":{"title":"$:/core/ui/ControlPanel/Plugins/Installed/Themes","caption":"{{$:/language/ControlPanel/Plugins/Themes/Caption}} (&lt;$count filter=\"[!has[draft.of]plugin-type[theme]]\"/&gt;)","text":"&lt;&lt;plugin-table theme&gt;&gt;\n"},"$:/core/ui/ControlPanel/Plugins":{"title":"$:/core/ui/ControlPanel/Plugins","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/Plugins/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Plugins/\n\n\\define plugin-table(type)\n&lt;$set name=\"plugin-type\" value=\"\"\"$type$\"\"\"&gt;\n&lt;$set name=\"qualified-state\" value=&lt;&lt;qualify \"$:/state/plugin-info\"&gt;&gt;&gt;\n&lt;$list filter=\"[!has[draft.of]plugin-type[$type$]sort[name]]\" emptyMessage=&lt;&lt;lingo \"Empty/Hint\"&gt;&gt; template=\"$:/core/ui/Components/plugin-info\"/&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n\\end\n\n{{$:/core/ui/ControlPanel/Plugins/AddPlugins}}\n\n&lt;&lt;lingo Installed/Hint&gt;&gt;\n\n&lt;$macrocall $name=\"tabs\" tabsList=\"[[$:/core/ui/ControlPanel/Plugins/Installed/Plugins]] [[$:/core/ui/ControlPanel/Plugins/Installed/Themes]] [[$:/core/ui/ControlPanel/Plugins/Installed/Languages]]\" default=\"$:/core/ui/ControlPanel/Plugins/Installed/Plugins\" explicitState=\"$:/state/tab--86143343\"/&gt;\n"},"$:/core/ui/ControlPanel/Saving/DownloadSaver":{"title":"$:/core/ui/ControlPanel/Saving/DownloadSaver","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/DownloadSaver/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Saving/DownloadSaver/\n\n&lt;&lt;lingo Hint&gt;&gt;\n\n!! &lt;$link to=\"$:/config/DownloadSaver/AutoSave\"&gt;&lt;&lt;lingo AutoSave/Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$checkbox tiddler=\"$:/config/DownloadSaver/AutoSave\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"&gt; &lt;&lt;lingo AutoSave/Description&gt;&gt; &lt;/$checkbox&gt;\n"},"$:/core/ui/ControlPanel/Saving/General":{"title":"$:/core/ui/ControlPanel/Saving/General","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/General/Caption}}","list-before":"","text":"\\define lingo-base() $:/language/ControlPanel/Settings/\n\n{{$:/language/ControlPanel/Saving/General/Hint}}\n\n!! &lt;$link to=\"$:/config/AutoSave\"&gt;&lt;&lt;lingo AutoSave/Caption&gt;&gt;&lt;/$link&gt;\n\n&lt;&lt;lingo AutoSave/Hint&gt;&gt;\n\n&lt;$radio tiddler=\"$:/config/AutoSave\" value=\"yes\"&gt; &lt;&lt;lingo AutoSave/Enabled/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/AutoSave\" value=\"no\"&gt; &lt;&lt;lingo AutoSave/Disabled/Description&gt;&gt; &lt;/$radio&gt;\n"},"$:/core/ui/ControlPanel/Saving/Gitea":{"title":"$:/core/ui/ControlPanel/Saving/Gitea","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/GitService/Gitea/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Saving/GitService/\n\\define service-name() ~Gitea\n\n&lt;&lt;lingo Description&gt;&gt;\n\n|&lt;&lt;lingo UserName&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/Username\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Gitea/Password&gt;&gt; |&lt;$password name=\"Gitea\"/&gt; |\n|&lt;&lt;lingo Repo&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/Repo\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Branch&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/Branch\" default=\"master\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Path&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/Path\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Filename&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/Filename\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo ServerURL&gt;&gt; |&lt;$edit-text tiddler=\"$:/Gitea/ServerURL\" default=\"https://gitea/api/v1\" tag=\"input\"/&gt; |\n"},"$:/core/ui/ControlPanel/Saving/GitHub":{"title":"$:/core/ui/ControlPanel/Saving/GitHub","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/GitService/GitHub/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Saving/GitService/\n\\define service-name() ~GitHub\n\n&lt;&lt;lingo Description&gt;&gt;\n\n|&lt;&lt;lingo UserName&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/Username\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo GitHub/Password&gt;&gt; |&lt;$password name=\"github\"/&gt; |\n|&lt;&lt;lingo Repo&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/Repo\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Branch&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/Branch\" default=\"main\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Path&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/Path\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Filename&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/Filename\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo ServerURL&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitHub/ServerURL\" default=\"https://api.github.com\" tag=\"input\"/&gt; |"},"$:/core/ui/ControlPanel/Saving/GitLab":{"title":"$:/core/ui/ControlPanel/Saving/GitLab","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/GitService/GitLab/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Saving/GitService/\n\\define service-name() ~GitLab\n\n&lt;&lt;lingo Description&gt;&gt;\n\n|&lt;&lt;lingo UserName&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/Username\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo GitLab/Password&gt;&gt; |&lt;$password name=\"gitlab\"/&gt; |\n|&lt;&lt;lingo Repo&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/Repo\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Branch&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/Branch\" default=\"master\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Path&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/Path\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Filename&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/Filename\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo ServerURL&gt;&gt; |&lt;$edit-text tiddler=\"$:/GitLab/ServerURL\" default=\"https://gitlab.com/api/v4\" tag=\"input\"/&gt; |"},"$:/core/ui/ControlPanel/Saving/TiddlySpot":{"title":"$:/core/ui/ControlPanel/Saving/TiddlySpot","tags":"$:/tags/ControlPanel/Saving","caption":"{{$:/language/ControlPanel/Saving/TiddlySpot/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Saving/TiddlySpot/\n\n\\define siteURL(path)\nhttp://$(userName)$.tiddlyspot.com/$path$/\n\\end\n\\define siteLink(path)\n&lt;$reveal type=\"nomatch\" state=\"$:/UploadName\" text=\"\"&gt;\n&lt;$set name=\"userName\" value={{$:/UploadName}}&gt;\n&lt;$reveal type=\"match\" state=\"$:/UploadURL\" text=\"\"&gt;\n&lt;&lt;siteURL $path$&gt;&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"nomatch\" state=\"$:/UploadURL\" text=\"\"&gt;\n&lt;$macrocall $name=resolvePath source={{$:/UploadBackupDir}} root={{$:/UploadURL}}&gt;&gt;\n&lt;/$reveal&gt;\n&lt;/$set&gt;\n&lt;/$reveal&gt;\n\\end\n\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo ReadOnly&gt;&gt;\n\n&lt;/div&gt;\n\n&lt;&lt;lingo Description&gt;&gt;\n\n|&lt;&lt;lingo UserName&gt;&gt; |&lt;$edit-text tiddler=\"$:/UploadName\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Password&gt;&gt; |&lt;$password name=\"upload\"/&gt; |\n\n''&lt;&lt;lingo Advanced/Heading&gt;&gt;''\n\n|&lt;&lt;lingo ServerURL&gt;&gt;  |&lt;$edit-text tiddler=\"$:/UploadURL\" default=\"\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo Filename&gt;&gt; |&lt;$edit-text tiddler=\"$:/UploadFilename\" default=\"index.html\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo UploadDir&gt;&gt; |&lt;$edit-text tiddler=\"$:/UploadDir\" default=\".\" tag=\"input\"/&gt; |\n|&lt;&lt;lingo BackupDir&gt;&gt; |&lt;$edit-text tiddler=\"$:/UploadBackupDir\" default=\".\" tag=\"input\"/&gt; |\n\n&lt;&lt;lingo TiddlySpot/Hint&gt;&gt;\n"},"$:/core/ui/ControlPanel/Saving":{"title":"$:/core/ui/ControlPanel/Saving","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/Saving/Caption}}","text":"{{$:/language/ControlPanel/Saving/Hint}}\n\n&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Saving]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/Saving/General\" explicitState=\"$:/state/tab-2065006209\"/&gt;\n&lt;/div&gt;\n"},"$:/core/buttonstyles/Borderless":{"title":"$:/core/buttonstyles/Borderless","tags":"$:/tags/ToolbarButtonStyle","caption":"{{$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Borderless}}","text":"tc-btn-invisible"},"$:/core/buttonstyles/Boxed":{"title":"$:/core/buttonstyles/Boxed","tags":"$:/tags/ToolbarButtonStyle","caption":"{{$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Boxed}}","text":"tc-btn-boxed"},"$:/core/buttonstyles/Rounded":{"title":"$:/core/buttonstyles/Rounded","tags":"$:/tags/ToolbarButtonStyle","caption":"{{$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Rounded}}","text":"tc-btn-rounded"},"$:/core/ui/ControlPanel/Settings/CamelCase":{"title":"$:/core/ui/ControlPanel/Settings/CamelCase","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/CamelCase/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/CamelCase/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/WikiParserRules/Inline/wikilink\" field=\"text\" checked=\"enable\" unchecked=\"disable\" default=\"enable\"&gt; &lt;$link to=\"$:/config/WikiParserRules/Inline/wikilink\"&gt;&lt;&lt;lingo Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n"},"$:/core/ui/ControlPanel/Settings/DefaultMoreSidebarTab":{"title":"$:/core/ui/ControlPanel/Settings/DefaultMoreSidebarTab","caption":"{{$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Caption}}","tags":"$:/tags/ControlPanel/Settings","text":"\\define lingo-base() $:/language/ControlPanel/Settings/DefaultMoreSidebarTab/\n\n&lt;$link to=\"$:/config/DefaultMoreSidebarTab\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$select tiddler=\"$:/config/DefaultMoreSidebarTab\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/MoreSideBar]!has[draft.of]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;$transclude field=\"caption\"&gt;&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;&lt;/$transclude&gt;&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n"},"$:/core/ui/ControlPanel/Settings/DefaultSidebarTab":{"title":"$:/core/ui/ControlPanel/Settings/DefaultSidebarTab","caption":"{{$:/language/ControlPanel/Settings/DefaultSidebarTab/Caption}}","tags":"$:/tags/ControlPanel/Settings","text":"\\define lingo-base() $:/language/ControlPanel/Settings/DefaultSidebarTab/\n\n&lt;$link to=\"$:/config/DefaultSidebarTab\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$select tiddler=\"$:/config/DefaultSidebarTab\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SideBar]!has[draft.of]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;$transclude field=\"caption\"&gt;&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;&lt;/$transclude&gt;&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n"},"$:/core/ui/ControlPanel/Settings/EditorToolbar":{"title":"$:/core/ui/ControlPanel/Settings/EditorToolbar","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/EditorToolbar/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/EditorToolbar/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/TextEditor/EnableToolbar\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"&gt; &lt;$link to=\"$:/config/TextEditor/EnableToolbar\"&gt;&lt;&lt;lingo Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n\n"},"$:/core/ui/ControlPanel/Settings/InfoPanelMode":{"title":"$:/core/ui/ControlPanel/Settings/InfoPanelMode","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/InfoPanelMode/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/InfoPanelMode/\n&lt;$link to=\"$:/config/TiddlerInfo/Mode\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$radio tiddler=\"$:/config/TiddlerInfo/Mode\" value=\"popup\"&gt; &lt;&lt;lingo Popup/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/TiddlerInfo/Mode\" value=\"sticky\"&gt; &lt;&lt;lingo Sticky/Description&gt;&gt; &lt;/$radio&gt;\n"},"$:/core/ui/ControlPanel/Settings/LinkToBehaviour":{"title":"$:/core/ui/ControlPanel/Settings/LinkToBehaviour","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/LinkToBehaviour/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/LinkToBehaviour/\n\n&lt;$link to=\"$:/config/Navigation/openLinkFromInsideRiver\"&gt;&lt;&lt;lingo \"InsideRiver/Hint\"&gt;&gt;&lt;/$link&gt;\n\n&lt;$select tiddler=\"$:/config/Navigation/openLinkFromInsideRiver\"&gt;\n  &lt;option value=\"above\"&gt;&lt;&lt;lingo \"OpenAbove\"&gt;&gt;&lt;/option&gt;\n  &lt;option value=\"below\"&gt;&lt;&lt;lingo \"OpenBelow\"&gt;&gt;&lt;/option&gt;\n  &lt;option value=\"top\"&gt;&lt;&lt;lingo \"OpenAtTop\"&gt;&gt;&lt;/option&gt;\n  &lt;option value=\"bottom\"&gt;&lt;&lt;lingo \"OpenAtBottom\"&gt;&gt;&lt;/option&gt;\n&lt;/$select&gt;\n\n&lt;$link to=\"$:/config/Navigation/openLinkFromOutsideRiver\"&gt;&lt;&lt;lingo \"OutsideRiver/Hint\"&gt;&gt;&lt;/$link&gt;\n\n&lt;$select tiddler=\"$:/config/Navigation/openLinkFromOutsideRiver\"&gt;\n  &lt;option value=\"top\"&gt;&lt;&lt;lingo \"OpenAtTop\"&gt;&gt;&lt;/option&gt;\n  &lt;option value=\"bottom\"&gt;&lt;&lt;lingo \"OpenAtBottom\"&gt;&gt;&lt;/option&gt;\n&lt;/$select&gt;\n"},"$:/core/ui/ControlPanel/Settings/MissingLinks":{"title":"$:/core/ui/ControlPanel/Settings/MissingLinks","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/MissingLinks/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/MissingLinks/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/MissingLinks\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"&gt; &lt;$link to=\"$:/config/MissingLinks\"&gt;&lt;&lt;lingo Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n\n"},"$:/core/ui/ControlPanel/Settings/NavigationAddressBar":{"title":"$:/core/ui/ControlPanel/Settings/NavigationAddressBar","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/NavigationAddressBar/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/NavigationAddressBar/\n\n&lt;$link to=\"$:/config/Navigation/UpdateAddressBar\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$radio tiddler=\"$:/config/Navigation/UpdateAddressBar\" value=\"permaview\"&gt; &lt;&lt;lingo Permaview/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/Navigation/UpdateAddressBar\" value=\"permalink\"&gt; &lt;&lt;lingo Permalink/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/Navigation/UpdateAddressBar\" value=\"no\"&gt; &lt;&lt;lingo No/Description&gt;&gt; &lt;/$radio&gt;\n"},"$:/core/ui/ControlPanel/Settings/NavigationHistory":{"title":"$:/core/ui/ControlPanel/Settings/NavigationHistory","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/NavigationHistory/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/NavigationHistory/\n&lt;$link to=\"$:/config/Navigation/UpdateHistory\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$radio tiddler=\"$:/config/Navigation/UpdateHistory\" value=\"yes\"&gt; &lt;&lt;lingo Yes/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/Navigation/UpdateHistory\" value=\"no\"&gt; &lt;&lt;lingo No/Description&gt;&gt; &lt;/$radio&gt;\n"},"$:/core/ui/ControlPanel/Settings/NavigationPermalinkviewMode":{"title":"$:/core/ui/ControlPanel/Settings/NavigationPermalinkviewMode","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/NavigationPermalinkviewMode/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/Navigation/Permalinkview/CopyToClipboard\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"&gt; &lt;$link to=\"$:/config/Navigation/Permalinkview/CopyToClipboard\"&gt;&lt;&lt;lingo CopyToClipboard/Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n\n&lt;$checkbox tiddler=\"$:/config/Navigation/Permalinkview/UpdateAddressBar\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"&gt; &lt;$link to=\"$:/config/Navigation/Permalinkview/UpdateAddressBar\"&gt;&lt;&lt;lingo UpdateAddressBar/Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n"},"$:/core/ui/ControlPanel/Settings/PerformanceInstrumentation":{"title":"$:/core/ui/ControlPanel/Settings/PerformanceInstrumentation","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/PerformanceInstrumentation/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/PerformanceInstrumentation/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/Performance/Instrumentation\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"&gt; &lt;$link to=\"$:/config/Performance/Instrumentation\"&gt;&lt;&lt;lingo Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n"},"$:/core/ui/ControlPanel/Settings/TitleLinks":{"title":"$:/core/ui/ControlPanel/Settings/TitleLinks","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/TitleLinks/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/TitleLinks/\n&lt;$link to=\"$:/config/Tiddlers/TitleLinks\"&gt;&lt;&lt;lingo Hint&gt;&gt;&lt;/$link&gt;\n\n&lt;$radio tiddler=\"$:/config/Tiddlers/TitleLinks\" value=\"yes\"&gt; &lt;&lt;lingo Yes/Description&gt;&gt; &lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/Tiddlers/TitleLinks\" value=\"no\"&gt; &lt;&lt;lingo No/Description&gt;&gt; &lt;/$radio&gt;\n"},"$:/core/ui/ControlPanel/Settings/ToolbarButtons":{"title":"$:/core/ui/ControlPanel/Settings/ToolbarButtons","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/ToolbarButtons/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/ToolbarButtons/\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$checkbox tiddler=\"$:/config/Toolbar/Icons\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"&gt; &lt;$link to=\"$:/config/Toolbar/Icons\"&gt;&lt;&lt;lingo Icons/Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n\n&lt;$checkbox tiddler=\"$:/config/Toolbar/Text\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"&gt; &lt;$link to=\"$:/config/Toolbar/Text\"&gt;&lt;&lt;lingo Text/Description&gt;&gt;&lt;/$link&gt; &lt;/$checkbox&gt;\n"},"$:/core/ui/ControlPanel/Settings/ToolbarButtonStyle":{"title":"$:/core/ui/ControlPanel/Settings/ToolbarButtonStyle","tags":"$:/tags/ControlPanel/Settings","caption":"{{$:/language/ControlPanel/Settings/ToolbarButtonStyle/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/ToolbarButtonStyle/\n&lt;$link to=\"$:/config/Toolbar/ButtonClass\"&gt;&lt;&lt;lingo \"Hint\"&gt;&gt;&lt;/$link&gt;\n\n&lt;$select tiddler=\"$:/config/Toolbar/ButtonClass\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ToolbarButtonStyle]]\"&gt;\n&lt;option value={{!!text}}&gt;{{!!caption}}&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n"},"$:/core/ui/ControlPanel/Settings":{"title":"$:/core/ui/ControlPanel/Settings","tags":"$:/tags/ControlPanel","caption":"{{$:/language/ControlPanel/Settings/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/Settings/\n\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Settings]]\"&gt;\n\n&lt;div style=\"border-top:1px solid #eee;\"&gt;\n\n!! &lt;$link&gt;&lt;$transclude field=\"caption\"/&gt;&lt;/$link&gt;\n\n&lt;$transclude/&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/ControlPanel/StoryView":{"title":"$:/core/ui/ControlPanel/StoryView","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ControlPanel/StoryView/Caption}}","text":"{{$:/snippets/viewswitcher}}\n"},"$:/core/ui/ControlPanel/Stylesheets":{"title":"$:/core/ui/ControlPanel/Stylesheets","tags":"$:/tags/ControlPanel/Advanced","caption":"{{$:/language/ControlPanel/Stylesheets/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/\n\n&lt;&lt;lingo Stylesheets/Hint&gt;&gt;\n\n{{$:/snippets/peek-stylesheets}}\n"},"$:/core/ui/ControlPanel/Theme":{"title":"$:/core/ui/ControlPanel/Theme","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ControlPanel/Theme/Caption}}","text":"{{$:/snippets/themeswitcher}}\n"},"$:/core/ui/ControlPanel/TiddlerFields":{"title":"$:/core/ui/ControlPanel/TiddlerFields","tags":"$:/tags/ControlPanel/Advanced","caption":"{{$:/language/ControlPanel/TiddlerFields/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/\n\n&lt;&lt;lingo TiddlerFields/Hint&gt;&gt;\n\n{{$:/snippets/allfields}}"},"$:/core/ui/ControlPanel/Toolbars/EditorItemTemplate":{"title":"$:/core/ui/ControlPanel/Toolbars/EditorItemTemplate","text":"\\define config-title()\n$(config-base)$$(currentTiddler)$\n\\end\n\n&lt;$draggable tiddler=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$checkbox tiddler=&lt;&lt;config-title&gt;&gt; field=\"text\" checked=\"show\" unchecked=\"hide\" default=\"show\"/&gt; &lt;span class=\"tc-icon-wrapper\"&gt;&lt;$transclude tiddler={{!!icon}}/&gt;&lt;/span&gt; &lt;$transclude field=\"caption\"/&gt; -- &lt;i class=\"tc-muted\"&gt;&lt;$transclude field=\"description\"/&gt;&lt;/i&gt;\n&lt;/$draggable&gt;\n"},"$:/core/ui/ControlPanel/Toolbars/EditorToolbar":{"title":"$:/core/ui/ControlPanel/Toolbars/EditorToolbar","tags":"$:/tags/ControlPanel/Toolbars","caption":"{{$:/language/ControlPanel/Toolbars/EditorToolbar/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n\n\\define config-base() $:/config/EditorToolbarButtons/Visibility/\n\n{{$:/language/ControlPanel/Toolbars/EditorToolbar/Hint}}\n\n&lt;$macrocall $name=\"list-tagged-draggable\" tag=\"$:/tags/EditorToolbar\" itemTemplate=\"$:/core/ui/ControlPanel/Toolbars/EditorItemTemplate\"/&gt;\n"},"$:/core/ui/ControlPanel/Toolbars/EditToolbar":{"title":"$:/core/ui/ControlPanel/Toolbars/EditToolbar","tags":"$:/tags/ControlPanel/Toolbars","caption":"{{$:/language/ControlPanel/Toolbars/EditToolbar/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n\n\\define config-base() $:/config/EditToolbarButtons/Visibility/\n\n{{$:/language/ControlPanel/Toolbars/EditToolbar/Hint}}\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$macrocall $name=\"list-tagged-draggable\" tag=\"$:/tags/EditToolbar\" itemTemplate=\"$:/core/ui/ControlPanel/Toolbars/ItemTemplate\"/&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;"},"$:/core/ui/ControlPanel/Toolbars/ItemTemplate":{"title":"$:/core/ui/ControlPanel/Toolbars/ItemTemplate","text":"\\define config-title()\n$(config-base)$$(currentTiddler)$\n\\end\n\n&lt;$draggable tiddler=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$checkbox tiddler=&lt;&lt;config-title&gt;&gt; field=\"text\" checked=\"show\" unchecked=\"hide\" default=\"show\"/&gt; &lt;span class=\"tc-icon-wrapper\"&gt; &lt;$transclude field=\"caption\"/&gt; &lt;i class=\"tc-muted\"&gt;-- &lt;$transclude field=\"description\"/&gt;&lt;/i&gt;&lt;/span&gt;\n&lt;/$draggable&gt;\n"},"$:/core/ui/ControlPanel/Toolbars/PageControls":{"title":"$:/core/ui/ControlPanel/Toolbars/PageControls","tags":"$:/tags/ControlPanel/Toolbars","caption":"{{$:/language/ControlPanel/Toolbars/PageControls/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n\n\\define config-base() $:/config/PageControlButtons/Visibility/\n\n{{$:/language/ControlPanel/Toolbars/PageControls/Hint}}\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$macrocall $name=\"list-tagged-draggable\" tag=\"$:/tags/PageControls\" itemTemplate=\"$:/core/ui/ControlPanel/Toolbars/ItemTemplate\"/&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/ControlPanel/Toolbars/ViewToolbar":{"title":"$:/core/ui/ControlPanel/Toolbars/ViewToolbar","tags":"$:/tags/ControlPanel/Toolbars","caption":"{{$:/language/ControlPanel/Toolbars/ViewToolbar/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n\n\\define config-base() $:/config/ViewToolbarButtons/Visibility/\n\n{{$:/language/ControlPanel/Toolbars/ViewToolbar/Hint}}\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$macrocall $name=\"list-tagged-draggable\" tag=\"$:/tags/ViewToolbar\" itemTemplate=\"$:/core/ui/ControlPanel/Toolbars/ItemTemplate\"/&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/ControlPanel/Toolbars":{"title":"$:/core/ui/ControlPanel/Toolbars","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ControlPanel/Toolbars/Caption}}","text":"{{$:/language/ControlPanel/Toolbars/Hint}}\n\n&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/Toolbars]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/Toolbars/ViewToolbar\" class=\"tc-vertical\" explicitState=\"$:/state/tabs/controlpanel/toolbars-1345989671\"/&gt;\n&lt;/div&gt;\n"},"$:/ControlPanel":{"title":"$:/ControlPanel","icon":"$:/core/images/options-button","color":"#bbb","text":"&lt;div class=\"tc-control-panel\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel]!has[draft.of]]\" default=\"$:/core/ui/ControlPanel/Info\" explicitState=\"$:/state/tab-1749438307\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/DefaultSearchResultList":{"title":"$:/core/ui/DefaultSearchResultList","tags":"$:/tags/SearchResults","caption":"{{$:/language/Search/DefaultResults/Caption}}","first-search-filter":"[!is[system]search:title&lt;userInput&gt;sort[title]limit[250]]","second-search-filter":"[!is[system]search&lt;userInput&gt;sort[title]limit[250]]","text":"\\define searchResultList()\n//&lt;small&gt;{{$:/language/Search/Matches/Title}}&lt;/small&gt;//\n\n&lt;$list filter=\"[&lt;userInput&gt;minlength[1]]\" variable=\"ignore\"&gt;\n&lt;$list filter={{{ [&lt;configTiddler&gt;get[first-search-filter]] }}}&gt;\n&lt;span class={{{[&lt;currentTiddler&gt;addsuffix[-primaryList]] -[&lt;searchListState&gt;get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n\n//&lt;small&gt;{{$:/language/Search/Matches/All}}&lt;/small&gt;//\n\n&lt;$list filter=\"[&lt;userInput&gt;minlength[1]]\" variable=\"ignore\"&gt;\n&lt;$list filter={{{ [&lt;configTiddler&gt;get[second-search-filter]] }}}&gt;\n&lt;span class={{{[&lt;currentTiddler&gt;addsuffix[-secondaryList]] -[&lt;searchListState&gt;get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n\n\\end\n&lt;&lt;searchResultList&gt;&gt;\n"},"$:/core/ui/EditorToolbar/bold":{"title":"$:/core/ui/EditorToolbar/bold","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/bold","caption":"{{$:/language/Buttons/Bold/Caption}}","description":"{{$:/language/Buttons/Bold/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((bold))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"''\"\n\tsuffix=\"''\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/clear-dropdown":{"title":"$:/core/ui/EditorToolbar/clear-dropdown","text":"''{{$:/language/Buttons/Clear/Hint}}''\n\n&lt;div class=\"tc-colour-chooser\"&gt;\n\n&lt;$macrocall $name=\"colour-picker\" actions=\"\"\"\n\n&lt;$action-sendmessage\n\t$message=\"tm-edit-bitmap-operation\"\n\t$param=\"clear\"\n\tcolour=&lt;&lt;colour-picker-value&gt;&gt;\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n\"\"\"/&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/EditorToolbar/clear":{"title":"$:/core/ui/EditorToolbar/clear","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/erase","caption":"{{$:/language/Buttons/Clear/Caption}}","description":"{{$:/language/Buttons/Clear/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","dropdown":"$:/core/ui/EditorToolbar/clear-dropdown","text":""},"$:/core/ui/EditorToolbar/editor-height-dropdown":{"title":"$:/core/ui/EditorToolbar/editor-height-dropdown","text":"\\define lingo-base() $:/language/Buttons/EditorHeight/\n''&lt;&lt;lingo Hint&gt;&gt;''\n\n&lt;$radio tiddler=\"$:/config/TextEditor/EditorHeight/Mode\" value=\"auto\"&gt; {{$:/core/images/auto-height}} &lt;&lt;lingo Caption/Auto&gt;&gt;&lt;/$radio&gt;\n\n&lt;$radio tiddler=\"$:/config/TextEditor/EditorHeight/Mode\" value=\"fixed\"&gt; {{$:/core/images/fixed-height}} &lt;&lt;lingo Caption/Fixed&gt;&gt; &lt;$edit-text tag=\"input\" tiddler=\"$:/config/TextEditor/EditorHeight/Height\" default=\"100px\"/&gt;&lt;/$radio&gt;\n"},"$:/core/ui/EditorToolbar/editor-height":{"title":"$:/core/ui/EditorToolbar/editor-height","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/fixed-height","custom-icon":"yes","caption":"{{$:/language/Buttons/EditorHeight/Caption}}","description":"{{$:/language/Buttons/EditorHeight/Hint}}","condition":"[&lt;targetTiddler&gt;type[]] [&lt;targetTiddler&gt;get[type]prefix[text/]] [&lt;targetTiddler&gt;get[type]match[application/javascript]] [&lt;targetTiddler&gt;get[type]match[application/json]] [&lt;targetTiddler&gt;get[type]match[application/x-tiddler-dictionary]] [&lt;targetTiddler&gt;get[type]match[image/svg+xml]] +[first[]]","dropdown":"$:/core/ui/EditorToolbar/editor-height-dropdown","text":"&lt;$reveal tag=\"span\" state=\"$:/config/TextEditor/EditorHeight/Mode\" type=\"match\" text=\"fixed\"&gt;\n{{$:/core/images/fixed-height}}\n&lt;/$reveal&gt;\n&lt;$reveal tag=\"span\" state=\"$:/config/TextEditor/EditorHeight/Mode\" type=\"match\" text=\"auto\"&gt;\n{{$:/core/images/auto-height}}\n&lt;/$reveal&gt;\n"},"$:/core/ui/EditorToolbar/excise-dropdown":{"title":"$:/core/ui/EditorToolbar/excise-dropdown","text":"\\define lingo-base() $:/language/Buttons/Excise/\n\n\\define body(config-title)\n''&lt;&lt;lingo Hint&gt;&gt;''\n\n&lt;&lt;lingo Caption/NewTitle&gt;&gt; &lt;$edit-text tag=\"input\" tiddler=\"$config-title$/new-title\" default=\"\" focus=\"true\"/&gt;\n\n&lt;$set name=\"new-title\" value={{$config-title$/new-title}}&gt;\n&lt;$list filter=\"\"\"[&lt;new-title&gt;is[tiddler]]\"\"\"&gt;\n&lt;div class=\"tc-error\"&gt;\n&lt;&lt;lingo Caption/TiddlerExists&gt;&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\n&lt;$checkbox tiddler=\"\"\"$config-title$/tagnew\"\"\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"false\"&gt; &lt;&lt;lingo Caption/Tag&gt;&gt;&lt;/$checkbox&gt;\n\n&lt;&lt;lingo Caption/Replace&gt;&gt; &lt;$select tiddler=\"\"\"$config-title$/type\"\"\" default=\"transclude\"&gt;\n&lt;option value=\"link\"&gt;&lt;&lt;lingo Caption/Replace/Link&gt;&gt;&lt;/option&gt;\n&lt;option value=\"transclude\"&gt;&lt;&lt;lingo Caption/Replace/Transclusion&gt;&gt;&lt;/option&gt;\n&lt;option value=\"macro\"&gt;&lt;&lt;lingo Caption/Replace/Macro&gt;&gt;&lt;/option&gt;\n&lt;/$select&gt;\n\n&lt;$reveal state=\"\"\"$config-title$/type\"\"\" type=\"match\" text=\"macro\"&gt;\n&lt;&lt;lingo Caption/MacroName&gt;&gt; &lt;$edit-text tag=\"input\" tiddler=\"\"\"$config-title$/macro-title\"\"\" default=\"translink\"/&gt;\n&lt;/$reveal&gt;\n\n&lt;$button&gt;\n&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"excise\"\n\ttitle={{$config-title$/new-title}}\n\ttype={{$config-title$/type}}\n\tmacro={{$config-title$/macro-title}}\n\ttagnew={{$config-title$/tagnew}}\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=\"$config-title$/new-title\"\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n&lt;&lt;lingo Caption/Excise&gt;&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$macrocall $name=\"body\" config-title=&lt;&lt;qualify \"$:/state/Excise/\"&gt;&gt;/&gt;\n"},"$:/core/ui/EditorToolbar/excise":{"title":"$:/core/ui/EditorToolbar/excise","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/excise","caption":"{{$:/language/Buttons/Excise/Caption}}","description":"{{$:/language/Buttons/Excise/Hint}}","condition":"[&lt;targetTiddler&gt;type[]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]] +[first[]]","shortcuts":"((excise))","dropdown":"$:/core/ui/EditorToolbar/excise-dropdown","text":""},"$:/core/ui/EditorToolbar/file-import":{"title":"$:/core/ui/EditorToolbar/file-import","tags":"$:/tags/EditorTools","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","text":"\\define lingo-base() $:/language/Import/\n\n\\define closePopupActions()\n&lt;$action-deletetiddler $filter=\"[title&lt;importState&gt;] [title&lt;importTitle&gt;]\"/&gt;\n\\end\n\n\\define replacement-text-image() [img[$title$]]\n\n\\define replacement-text-file() [[$title$]]\n\n\\define postImportActions()\n&lt;$list filter=\"[&lt;importTitle&gt;links[]] :reduce[get[type]prefix[image]then&lt;replacement-text-image&gt;else&lt;replacement-text-file&gt;search-replace[$title$],&lt;currentTiddler&gt;addprefix&lt;accumulator&gt;]\" variable=\"imageTitle\"&gt;\n&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"insert-text\"\n\ttext=&lt;&lt;imageTitle&gt;&gt;\n/&gt;\n&lt;/$list&gt;\n&lt;&lt;closePopupActions&gt;&gt;\n\\end\n\n\\define buttons()\n&lt;$button class=\"tc-btn-invisible\" actions=&lt;&lt;closePopupActions&gt;&gt; &gt;&lt;&lt;lingo Listing/Cancel/Caption&gt;&gt;&lt;/$button&gt;\n&lt;$button class=\"tc-btn-invisible\" message=\"tm-perform-import\" param=&lt;&lt;importTitle&gt;&gt; actions=&lt;&lt;postImportActions&gt;&gt; &gt;&lt;&lt;lingo Listing/Import/Caption&gt;&gt;&lt;/$button&gt;\n\\end\n\n&lt;$reveal type=\"popup\" state=&lt;&lt;importState&gt;&gt; tag=\"div\" class=\"tc-editor-importpopup\"&gt;\n&lt;div class=\"tc-editor-import\"&gt;\n&lt;$list filter=\"[&lt;importTitle&gt;field:plugin-type[import]]\"&gt;\n&lt;h2&gt;&lt;&lt;lingo Editor/Import/Heading&gt;&gt;&lt;/h2&gt;\n&lt;$tiddler tiddler=&lt;&lt;importTitle&gt;&gt;&gt;\n{{||$:/core/ui/ImportListing}}\n&lt;&lt;buttons&gt;&gt;\n&lt;/$tiddler&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/EditorToolbar/heading-1":{"title":"$:/core/ui/EditorToolbar/heading-1","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-1","caption":"{{$:/language/Buttons/Heading1/Caption}}","description":"{{$:/language/Buttons/Heading1/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","button-classes":"tc-text-editor-toolbar-item-start-group","shortcuts":"((heading-1))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"1\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/heading-2":{"title":"$:/core/ui/EditorToolbar/heading-2","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-2","caption":"{{$:/language/Buttons/Heading2/Caption}}","description":"{{$:/language/Buttons/Heading2/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((heading-2))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"2\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/heading-3":{"title":"$:/core/ui/EditorToolbar/heading-3","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-3","caption":"{{$:/language/Buttons/Heading3/Caption}}","description":"{{$:/language/Buttons/Heading3/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((heading-3))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"3\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/heading-4":{"title":"$:/core/ui/EditorToolbar/heading-4","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-4","caption":"{{$:/language/Buttons/Heading4/Caption}}","description":"{{$:/language/Buttons/Heading4/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((heading-4))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"4\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/heading-5":{"title":"$:/core/ui/EditorToolbar/heading-5","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-5","caption":"{{$:/language/Buttons/Heading5/Caption}}","description":"{{$:/language/Buttons/Heading5/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((heading-5))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"5\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/heading-6":{"title":"$:/core/ui/EditorToolbar/heading-6","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/heading-6","caption":"{{$:/language/Buttons/Heading6/Caption}}","description":"{{$:/language/Buttons/Heading6/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((heading-6))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"!\"\n\tcount=\"6\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/italic":{"title":"$:/core/ui/EditorToolbar/italic","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/italic","caption":"{{$:/language/Buttons/Italic/Caption}}","description":"{{$:/language/Buttons/Italic/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((italic))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"//\"\n\tsuffix=\"//\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/line-width-dropdown":{"title":"$:/core/ui/EditorToolbar/line-width-dropdown","text":"\\define lingo-base() $:/language/Buttons/LineWidth/\n\n\\define toolbar-line-width-inner()\n&lt;$button tag=\"a\" tooltip=\"\"\"$(line-width)$\"\"\"&gt;\n\n&lt;$action-setfield\n\t$tiddler=\"$:/config/BitmapEditor/LineWidth\"\n\t$value=\"$(line-width)$\"\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n&lt;div style=\"display: inline-block; margin: 4px calc(80px - $(line-width)$); background-color: #000; width: calc(100px + $(line-width)$ * 2); height: $(line-width)$; border-radius: 120px; vertical-align: middle;\"/&gt;\n\n&lt;span style=\"margin-left: 8px;\"&gt;\n\n&lt;$text text=\"\"\"$(line-width)$\"\"\"/&gt;\n\n&lt;$reveal state=\"$:/config/BitmapEditor/LineWidth\" type=\"match\" text=\"\"\"$(line-width)$\"\"\" tag=\"span\"&gt;\n\n&lt;$entity entity=\"&amp;nbsp;\"/&gt;\n\n&lt;$entity entity=\"&amp;#x2713;\"/&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/span&gt;\n\n&lt;/$button&gt;\n\\end\n\n''&lt;&lt;lingo Hint&gt;&gt;''\n\n&lt;$list filter={{$:/config/BitmapEditor/LineWidths}} variable=\"line-width\"&gt;\n\n&lt;&lt;toolbar-line-width-inner&gt;&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/EditorToolbar/line-width":{"title":"$:/core/ui/EditorToolbar/line-width","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/line-width","caption":"{{$:/language/Buttons/LineWidth/Caption}}","description":"{{$:/language/Buttons/LineWidth/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","dropdown":"$:/core/ui/EditorToolbar/line-width-dropdown","text":"&lt;$text text={{$:/config/BitmapEditor/LineWidth}}/&gt;\n"},"$:/core/ui/EditorToolbar/link-dropdown":{"title":"$:/core/ui/EditorToolbar/link-dropdown","text":"\\define lingo-base() $:/language/Buttons/Link/\n\n\\define add-link-actions()\n&lt;$action-sendmessage $message=\"tm-edit-text-operation\" $param=\"make-link\" text={{$(linkTiddler)$}} /&gt;\n&lt;$action-deletetiddler $filter=\"[&lt;dropdown-state&gt;] [&lt;searchTiddler&gt;] [&lt;linkTiddler&gt;] [&lt;storeTitle&gt;] [&lt;searchListState&gt;]\"/&gt;\n\\end\n\n\\define get-focus-selector() [data-tiddler-title=\"$(cssEscapedTitle)$\"] .tc-create-wikitext-link input\n\n\\define cancel-search-actions-inner()\n&lt;$set name=\"userInput\" value={{{ [&lt;storeTitle&gt;get[text]] }}}&gt;&lt;$list filter=\"[&lt;searchTiddler&gt;get[text]!match&lt;userInput&gt;]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[&lt;searchTiddler&gt;] [&lt;linkTiddler&gt;] [&lt;storeTitle&gt;] [&lt;searchListState&gt;]\"/&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=&lt;&lt;searchTiddler&gt;&gt; text=&lt;&lt;userInput&gt;&gt;/&gt;&lt;$action-setfield $tiddler=&lt;&lt;refreshTitle&gt;&gt; text=\"yes\"/&gt;&lt;/$list&gt;&lt;/$set&gt;\n\\end\n\n\\define cancel-search-actions() &lt;$list filter=\"[&lt;storeTitle&gt;!has[text]] +[&lt;searchTiddler&gt;!has[text]]\" emptyMessage=\"\"\"&lt;&lt;cancel-search-actions-inner&gt;&gt;\"\"\"&gt;&lt;$action-sendmessage $message=\"tm-edit-text-operation\" $param=\"wrap-selection\" prefix=\"\" suffix=\"\"/&gt;&lt;/$list&gt;\n\n\\define external-link()\n&lt;$button class=\"tc-btn-invisible\" style=\"width: auto; display: inline-block; background-colour: inherit;\" actions=&lt;&lt;add-link-actions&gt;&gt;&gt;\n{{$:/core/images/chevron-right}}\n&lt;/$button&gt;\n\\end\n\n\\define set-next-input-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab/search-results/sidebar\" tag=\"$:/tags/SearchResults\" beforeafter=\"$beforeafter$\" defaultState={{$:/config/SearchResults/Default}} actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/search/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define body(config-title)\n''&lt;&lt;lingo Hint&gt;&gt;''\n\n&lt;$vars searchTiddler=\"\"\"$config-title$/search\"\"\" linkTiddler=\"\"\"$config-title$/link\"\"\" linktext=\"\" searchListState=&lt;&lt;qualify \"$:/temp/link-search/selected-item\"&gt;&gt; refreshTitle=&lt;&lt;qualify \"$:/temp/link-search/refresh\"&gt;&gt; storeTitle=&lt;&lt;qualify \"$:/temp/link-search/input\"&gt;&gt;&gt;\n\n&lt;$vars linkTiddler=&lt;&lt;searchTiddler&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt; class=\"tc-create-wikitext-link\"&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=&lt;&lt;searchTiddler&gt;&gt; storeTitle=&lt;&lt;storeTitle&gt;&gt;\n\t\tselectionStateTitle=&lt;&lt;searchListState&gt;&gt; refreshTitle=&lt;&lt;refreshTitle&gt;&gt; type=\"search\" filterMinLength=\"1\"\n\t\ttag=\"input\" focus=\"true\" class=\"tc-popup-handle\" inputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; \n\t\tinputAcceptActions=&lt;&lt;add-link-actions&gt;&gt; placeholder={{$:/language/Search/Search}} default=\"\" \n\t\tconfigTiddlerFilter=\"[[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}]\" /&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$reveal tag=\"span\" state=&lt;&lt;storeTitle&gt;&gt; type=\"nomatch\" text=\"\"&gt;\n&lt;&lt;external-link&gt;&gt;\n&lt;$button class=\"tc-btn-invisible\" style=\"width: auto; display: inline-block; background-colour: inherit;\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;&lt;$set name=\"cssEscapedTitle\" value={{{ [&lt;storyTiddler&gt;escapecss[]] }}}&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;get-focus-selector&gt;&gt;/&gt;&lt;/$set&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/$vars&gt;\n\n&lt;$reveal tag=\"div\" state=&lt;&lt;storeTitle&gt;&gt; type=\"nomatch\" text=\"\"&gt;\n\n&lt;$linkcatcher actions=&lt;&lt;add-link-actions&gt;&gt; to=&lt;&lt;linkTiddler&gt;&gt;&gt;\n\n&lt;$vars userInput={{{ [&lt;storeTitle&gt;get[text]] }}} configTiddler={{{ [[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}] }}}&gt;\n\n{{$:/core/ui/SearchResults}}\n\n&lt;/$vars&gt;\n\n&lt;/$linkcatcher&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$vars&gt;\n\n\\end\n\n&lt;$macrocall $name=\"body\" config-title=&lt;&lt;qualify \"$:/state/Link/\"&gt;&gt;/&gt;\n"},"$:/core/ui/EditorToolbar/link":{"title":"$:/core/ui/EditorToolbar/link","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/link","caption":"{{$:/language/Buttons/Link/Caption}}","description":"{{$:/language/Buttons/Link/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","button-classes":"tc-text-editor-toolbar-item-start-group","shortcuts":"((link))","dropdown":"$:/core/ui/EditorToolbar/link-dropdown","text":""},"$:/core/ui/EditorToolbar/linkify":{"title":"$:/core/ui/EditorToolbar/linkify","caption":"{{$:/language/Buttons/Linkify/Caption}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","description":"{{$:/language/Buttons/Linkify/Hint}}","icon":"$:/core/images/linkify","list-before":"$:/core/ui/EditorToolbar/mono-block","shortcuts":"((linkify))","tags":"$:/tags/EditorToolbar","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"[[\"\n\tsuffix=\"]]\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/list-bullet":{"title":"$:/core/ui/EditorToolbar/list-bullet","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/list-bullet","caption":"{{$:/language/Buttons/ListBullet/Caption}}","description":"{{$:/language/Buttons/ListBullet/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((list-bullet))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"*\"\n\tcount=\"1\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/list-number":{"title":"$:/core/ui/EditorToolbar/list-number","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/list-number","caption":"{{$:/language/Buttons/ListNumber/Caption}}","description":"{{$:/language/Buttons/ListNumber/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((list-number))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"prefix-lines\"\n\tcharacter=\"#\"\n\tcount=\"1\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/mono-block":{"title":"$:/core/ui/EditorToolbar/mono-block","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/mono-block","caption":"{{$:/language/Buttons/MonoBlock/Caption}}","description":"{{$:/language/Buttons/MonoBlock/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","button-classes":"tc-text-editor-toolbar-item-start-group","shortcuts":"((mono-block))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-lines\"\n\tprefix=\"\n```\"\n\tsuffix=\"```\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/mono-line":{"title":"$:/core/ui/EditorToolbar/mono-line","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/mono-line","caption":"{{$:/language/Buttons/MonoLine/Caption}}","description":"{{$:/language/Buttons/MonoLine/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((mono-line))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"`\"\n\tsuffix=\"`\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/more-dropdown":{"title":"$:/core/ui/EditorToolbar/more-dropdown","text":"\\define config-title()\n$:/config/EditorToolbarButtons/Visibility/$(toolbarItem)$\n\\end\n\n\\define conditional-button()\n&lt;$list filter={{$(toolbarItem)$!!condition}} variable=\"condition\"&gt;\n&lt;$transclude tiddler=\"$:/core/ui/EditTemplate/body/toolbar/button\" mode=\"inline\"/&gt; &lt;$transclude tiddler=&lt;&lt;toolbarItem&gt;&gt; field=\"description\"/&gt;\n&lt;/$list&gt;\n\\end\n\n&lt;div class=\"tc-text-editor-toolbar-more\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/EditorToolbar]!has[draft.of]] -[[$:/core/ui/EditorToolbar/more]]\"&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;config-visibility-title&gt;&gt; text=\"hide\" tag=\"div\"&gt;\n&lt;&lt;conditional-button&gt;&gt;\n&lt;/$reveal&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n"},"$:/core/ui/EditorToolbar/more":{"title":"$:/core/ui/EditorToolbar/more","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/down-arrow","caption":"{{$:/language/Buttons/More/Caption}}","description":"{{$:/language/Buttons/More/Hint}}","condition":"[&lt;targetTiddler&gt;]","dropdown":"$:/core/ui/EditorToolbar/more-dropdown","text":""},"$:/core/ui/EditorToolbar/opacity-dropdown":{"title":"$:/core/ui/EditorToolbar/opacity-dropdown","text":"\\define lingo-base() $:/language/Buttons/Opacity/\n\n\\define toolbar-opacity-inner()\n&lt;$button tag=\"a\" tooltip=\"\"\"$(opacity)$\"\"\"&gt;\n\n&lt;$action-setfield\n\t$tiddler=\"$:/config/BitmapEditor/Opacity\"\n\t$value=\"$(opacity)$\"\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n&lt;div style=\"display: inline-block; vertical-align: middle; background-color: $(current-paint-colour)$; opacity: $(opacity)$; width: 1em; height: 1em; border-radius: 50%;\"/&gt;\n\n&lt;span style=\"margin-left: 8px;\"&gt;\n\n&lt;$text text=\"\"\"$(opacity)$\"\"\"/&gt;\n\n&lt;$reveal state=\"$:/config/BitmapEditor/Opacity\" type=\"match\" text=\"\"\"$(opacity)$\"\"\" tag=\"span\"&gt;\n\n&lt;$entity entity=\"&amp;nbsp;\"/&gt;\n\n&lt;$entity entity=\"&amp;#x2713;\"/&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/span&gt;\n\n&lt;/$button&gt;\n\\end\n\n\\define toolbar-opacity()\n''&lt;&lt;lingo Hint&gt;&gt;''\n\n&lt;$list filter={{$:/config/BitmapEditor/Opacities}} variable=\"opacity\"&gt;\n\n&lt;&lt;toolbar-opacity-inner&gt;&gt;\n\n&lt;/$list&gt;\n\\end\n\n&lt;$set name=\"current-paint-colour\" value={{$:/config/BitmapEditor/Colour}}&gt;\n\n&lt;$set name=\"current-opacity\" value={{$:/config/BitmapEditor/Opacity}}&gt;\n\n&lt;&lt;toolbar-opacity&gt;&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/EditorToolbar/opacity":{"title":"$:/core/ui/EditorToolbar/opacity","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/opacity","caption":"{{$:/language/Buttons/Opacity/Caption}}","description":"{{$:/language/Buttons/Opacity/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","dropdown":"$:/core/ui/EditorToolbar/opacity-dropdown","text":"&lt;$text text={{$:/config/BitmapEditor/Opacity}}/&gt;\n"},"$:/core/ui/EditorToolbar/paint-dropdown":{"title":"$:/core/ui/EditorToolbar/paint-dropdown","text":"''{{$:/language/Buttons/Paint/Hint}}''\n\n&lt;$macrocall $name=\"colour-picker\" actions=\"\"\"\n\n&lt;$action-setfield\n\t$tiddler=\"$:/config/BitmapEditor/Colour\"\n\t$value=&lt;&lt;colour-picker-value&gt;&gt;\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n\"\"\"/&gt;\n"},"$:/core/ui/EditorToolbar/paint":{"title":"$:/core/ui/EditorToolbar/paint","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/paint","caption":"{{$:/language/Buttons/Paint/Caption}}","description":"{{$:/language/Buttons/Paint/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","dropdown":"$:/core/ui/EditorToolbar/paint-dropdown","text":"\\define toolbar-paint()\n&lt;div style=\"display: inline-block; vertical-align: middle; background-color: $(colour-picker-value)$; width: 1em; height: 1em; border-radius: 50%;\"/&gt;\n\\end\n&lt;$set name=\"colour-picker-value\" value={{$:/config/BitmapEditor/Colour}}&gt;\n&lt;&lt;toolbar-paint&gt;&gt;\n&lt;/$set&gt;\n"},"$:/core/ui/EditorToolbar/picture-dropdown":{"title":"$:/core/ui/EditorToolbar/picture-dropdown","text":"\\define replacement-text()\n[img[$(imageTitle)$]]\n\\end\n\n''{{$:/language/Buttons/Picture/Hint}}''\n\n&lt;$macrocall $name=\"image-picker\" actions=\"\"\"\n\n&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"replace-selection\"\n\ttext=&lt;&lt;replacement-text&gt;&gt;\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n\"\"\"/&gt;\n"},"$:/core/ui/EditorToolbar/picture":{"title":"$:/core/ui/EditorToolbar/picture","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/picture","caption":"{{$:/language/Buttons/Picture/Caption}}","description":"{{$:/language/Buttons/Picture/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((picture))","dropdown":"$:/core/ui/EditorToolbar/picture-dropdown","text":""},"$:/core/ui/EditorToolbar/preview-type-dropdown":{"title":"$:/core/ui/EditorToolbar/preview-type-dropdown","text":"\\define preview-type-button()\n&lt;$button tag=\"a\"&gt;\n\n&lt;$action-setfield $tiddler=\"$:/state/editpreviewtype\" $value=\"$(previewType)$\"/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n&lt;$transclude tiddler=&lt;&lt;previewType&gt;&gt; field=\"caption\" mode=\"inline\"&gt;\n\n&lt;$view tiddler=&lt;&lt;previewType&gt;&gt; field=\"title\" mode=\"inline\"/&gt;\n\n&lt;/$transclude&gt; \n\n&lt;$reveal tag=\"span\" state=\"$:/state/editpreviewtype\" type=\"match\" text=&lt;&lt;previewType&gt;&gt; default=\"$:/core/ui/EditTemplate/body/preview/output\"&gt;\n\n&lt;$entity entity=\"&amp;nbsp;\"/&gt;\n\n&lt;$entity entity=\"&amp;#x2713;\"/&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/EditPreview]!has[draft.of]]\" variable=\"previewType\"&gt;\n\n&lt;&lt;preview-type-button&gt;&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/EditorToolbar/preview-type":{"title":"$:/core/ui/EditorToolbar/preview-type","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/chevron-down","caption":"{{$:/language/Buttons/PreviewType/Caption}}","description":"{{$:/language/Buttons/PreviewType/Hint}}","condition":"[all[shadows+tiddlers]tag[$:/tags/EditPreview]!has[draft.of]butfirst[]limit[1]]","button-classes":"tc-text-editor-toolbar-item-adjunct","dropdown":"$:/core/ui/EditorToolbar/preview-type-dropdown"},"$:/core/ui/EditorToolbar/preview":{"title":"$:/core/ui/EditorToolbar/preview","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/preview-open","custom-icon":"yes","caption":"{{$:/language/Buttons/Preview/Caption}}","description":"{{$:/language/Buttons/Preview/Hint}}","condition":"[&lt;targetTiddler&gt;]","button-classes":"tc-text-editor-toolbar-item-start-group","shortcuts":"((preview))","text":"&lt;$reveal state=\"$:/state/showeditpreview\" type=\"match\" text=\"yes\" tag=\"span\"&gt;\n{{$:/core/images/preview-open}}\n&lt;$action-setfield $tiddler=\"$:/state/showeditpreview\" $value=\"no\"/&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=\"$:/state/showeditpreview\" type=\"nomatch\" text=\"yes\" tag=\"span\"&gt;\n{{$:/core/images/preview-closed}}\n&lt;$action-setfield $tiddler=\"$:/state/showeditpreview\" $value=\"yes\"/&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/EditorToolbar/quote":{"title":"$:/core/ui/EditorToolbar/quote","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/quote","caption":"{{$:/language/Buttons/Quote/Caption}}","description":"{{$:/language/Buttons/Quote/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((quote))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-lines\"\n\tprefix=\"\n&lt;&lt;&lt;\"\n\tsuffix=\"&lt;&lt;&lt;\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/rotate-left":{"title":"$:/core/ui/EditorToolbar/rotate-left","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/rotate-left","caption":"{{$:/language/Buttons/RotateLeft/Caption}}","description":"{{$:/language/Buttons/RotateLeft/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-bitmap-operation\"\n\t$param=\"rotate-left\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/size-dropdown":{"title":"$:/core/ui/EditorToolbar/size-dropdown","text":"\\define lingo-base() $:/language/Buttons/Size/\n\n\\define toolbar-button-size-preset(config-title)\n&lt;$set name=\"width\" filter=\"$(sizePair)$ +[first[]]\"&gt;\n\n&lt;$set name=\"height\" filter=\"$(sizePair)$ +[last[]]\"&gt;\n\n&lt;$button tag=\"a\"&gt;\n\n&lt;$action-setfield\n\t$tiddler=\"\"\"$config-title$/new-width\"\"\"\n\t$value=&lt;&lt;width&gt;&gt;\n/&gt;\n\n&lt;$action-setfield\n\t$tiddler=\"\"\"$config-title$/new-height\"\"\"\n\t$value=&lt;&lt;height&gt;&gt;\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=\"\"\"$config-title$/presets-popup\"\"\"\n/&gt;\n\n&lt;$text text=&lt;&lt;width&gt;&gt;/&gt; &amp;times; &lt;$text text=&lt;&lt;height&gt;&gt;/&gt;\n\n&lt;/$button&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\\end\n\n\\define toolbar-button-size(config-title)\n''{{$:/language/Buttons/Size/Hint}}''\n\n&lt;&lt;lingo Caption/Width&gt;&gt; &lt;$edit-text tag=\"input\" tiddler=\"\"\"$config-title$/new-width\"\"\" default=&lt;&lt;tv-bitmap-editor-width&gt;&gt; focus=\"true\" size=\"8\"/&gt; &lt;&lt;lingo Caption/Height&gt;&gt; &lt;$edit-text tag=\"input\" tiddler=\"\"\"$config-title$/new-height\"\"\" default=&lt;&lt;tv-bitmap-editor-height&gt;&gt; size=\"8\"/&gt; &lt;$button popup=\"\"\"$config-title$/presets-popup\"\"\" class=\"tc-btn-invisible tc-popup-keep\" style=\"width: auto; display: inline-block; background-colour: inherit;\" selectedClass=\"tc-selected\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$button&gt;\n\n&lt;$reveal tag=\"span\" state=\"\"\"$config-title$/presets-popup\"\"\" type=\"popup\" position=\"belowleft\" animate=\"yes\"&gt;\n\n&lt;div class=\"tc-drop-down tc-popup-keep\"&gt;\n\n&lt;$list filter={{$:/config/BitmapEditor/ImageSizes}} variable=\"sizePair\"&gt;\n\n&lt;$macrocall $name=\"toolbar-button-size-preset\" config-title=\"$config-title$\"/&gt;\n\n&lt;/$list&gt;\n\n&lt;/div&gt;\n\n&lt;/$reveal&gt;\n\n&lt;$button&gt;\n&lt;$action-sendmessage\n\t$message=\"tm-edit-bitmap-operation\"\n\t$param=\"resize\"\n\twidth={{$config-title$/new-width}}\n\theight={{$config-title$/new-height}}\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=\"\"\"$config-title$/new-width\"\"\"\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=\"\"\"$config-title$/new-height\"\"\"\n/&gt;\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n&lt;&lt;lingo Caption/Resize&gt;&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$macrocall $name=\"toolbar-button-size\" config-title=&lt;&lt;qualify \"$:/state/Size/\"&gt;&gt;/&gt;\n"},"$:/core/ui/EditorToolbar/size":{"title":"$:/core/ui/EditorToolbar/size","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/size","caption":"{{$:/language/Buttons/Size/Caption}}","description":"{{$:/language/Buttons/Size/Hint}}","condition":"[&lt;targetTiddler&gt;is[image]] -[&lt;targetTiddler&gt;type[image/svg+xml]]","dropdown":"$:/core/ui/EditorToolbar/size-dropdown","text":""},"$:/core/ui/EditorToolbar/stamp-dropdown":{"title":"$:/core/ui/EditorToolbar/stamp-dropdown","text":"\\define toolbar-button-stamp-inner()\n&lt;$button tag=\"a\"&gt;\n\n&lt;$list filter=\"[[$(snippetTitle)$]addsuffix[/prefix]is[missing]removesuffix[/prefix]addsuffix[/suffix]is[missing]]\"&gt;\n\n&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"replace-selection\"\n\ttext={{$(snippetTitle)$}}\n/&gt;\n\n&lt;/$list&gt;\n\n\n&lt;$list filter=\"[[$(snippetTitle)$]addsuffix[/prefix]is[missing]removesuffix[/prefix]addsuffix[/suffix]!is[missing]] [[$(snippetTitle)$]addsuffix[/prefix]!is[missing]removesuffix[/prefix]addsuffix[/suffix]is[missing]] [[$(snippetTitle)$]addsuffix[/prefix]!is[missing]removesuffix[/prefix]addsuffix[/suffix]!is[missing]]\"&gt;\n\n&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix={{{ [[$(snippetTitle)$]addsuffix[/prefix]get[text]] }}}\nsuffix={{{ [[$(snippetTitle)$]addsuffix[/suffix]get[text]] }}}\n/&gt;\n\n&lt;/$list&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n&lt;$transclude tiddler=&lt;&lt;snippetTitle&gt;&gt; field=\"caption\" mode=\"inline\"&gt;\n\n&lt;$view tiddler=&lt;&lt;snippetTitle&gt;&gt; field=\"title\" /&gt;\n\n&lt;/$transclude&gt;\n\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TextEditor/Snippet]!has[draft.of]sort[caption]]\" variable=\"snippetTitle\"&gt;\n\n&lt;&lt;toolbar-button-stamp-inner&gt;&gt;\n\n&lt;/$list&gt;\n\n----\n\n&lt;$button tag=\"a\"&gt;\n\n&lt;$action-sendmessage\n\t$message=\"tm-new-tiddler\"\n\ttags=\"$:/tags/TextEditor/Snippet\"\n\tcaption={{$:/language/Buttons/Stamp/New/Title}}\n\ttext={{$:/language/Buttons/Stamp/New/Text}}\n/&gt;\n\n&lt;$action-deletetiddler\n\t$tiddler=&lt;&lt;dropdown-state&gt;&gt;\n/&gt;\n\n&lt;em&gt;\n\n&lt;$text text={{$:/language/Buttons/Stamp/Caption/New}}/&gt;\n\n&lt;/em&gt;\n\n&lt;/$button&gt;\n"},"$:/core/ui/EditorToolbar/stamp":{"title":"$:/core/ui/EditorToolbar/stamp","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/stamp","caption":"{{$:/language/Buttons/Stamp/Caption}}","description":"{{$:/language/Buttons/Stamp/Hint}}","condition":"[&lt;targetTiddler&gt;type[]] [&lt;targetTiddler&gt;get[type]prefix[text/]] [&lt;targetTiddler&gt;get[type]match[application/javascript]] [&lt;targetTiddler&gt;get[type]match[application/json]] [&lt;targetTiddler&gt;get[type]match[application/x-tiddler-dictionary]] [&lt;targetTiddler&gt;get[type]match[image/svg+xml]] +[first[]]","shortcuts":"((stamp))","dropdown":"$:/core/ui/EditorToolbar/stamp-dropdown","text":""},"$:/core/ui/EditorToolbar/strikethrough":{"title":"$:/core/ui/EditorToolbar/strikethrough","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/strikethrough","caption":"{{$:/language/Buttons/Strikethrough/Caption}}","description":"{{$:/language/Buttons/Strikethrough/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((strikethrough))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"~~\"\n\tsuffix=\"~~\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/subscript":{"title":"$:/core/ui/EditorToolbar/subscript","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/subscript","caption":"{{$:/language/Buttons/Subscript/Caption}}","description":"{{$:/language/Buttons/Subscript/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((subscript))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\",,\"\n\tsuffix=\",,\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/superscript":{"title":"$:/core/ui/EditorToolbar/superscript","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/superscript","caption":"{{$:/language/Buttons/Superscript/Caption}}","description":"{{$:/language/Buttons/Superscript/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((superscript))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"^^\"\n\tsuffix=\"^^\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/transcludify":{"title":"$:/core/ui/EditorToolbar/transcludify","caption":"{{$:/language/Buttons/Transcludify/Caption}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","description":"{{$:/language/Buttons/Transcludify/Hint}}","icon":"$:/core/images/transcludify","list-before":"$:/core/ui/EditorToolbar/mono-block","shortcuts":"((transcludify))","tags":"$:/tags/EditorToolbar","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"{{\"\n\tsuffix=\"}}\"\n/&gt;\n"},"$:/core/ui/EditorToolbar/underline":{"title":"$:/core/ui/EditorToolbar/underline","tags":"$:/tags/EditorToolbar","icon":"$:/core/images/underline","caption":"{{$:/language/Buttons/Underline/Caption}}","description":"{{$:/language/Buttons/Underline/Hint}}","condition":"[&lt;targetTiddler&gt;!has[type]] [&lt;targetTiddler&gt;type[text/vnd.tiddlywiki]]","shortcuts":"((underline))","text":"&lt;$action-sendmessage\n\t$message=\"tm-edit-text-operation\"\n\t$param=\"wrap-selection\"\n\tprefix=\"__\"\n\tsuffix=\"__\"\n/&gt;\n"},"$:/core/ui/EditTemplate/body/editor":{"title":"$:/core/ui/EditTemplate/body/editor","text":"&lt;$edit\n\n  field=\"text\"\n  class=\"tc-edit-texteditor tc-edit-texteditor-body\"\n  placeholder={{$:/language/EditTemplate/Body/Placeholder}}\n  tabindex={{$:/config/EditTabIndex}}\n  focus={{{ [{$:/config/AutoFocus}match[text]then[true]] ~[[false]] }}}\n  cancelPopups=\"yes\"\n  fileDrop={{{ [{$:/config/DragAndDrop/Enable}match[no]] :else[subfilter{$:/config/Editor/EnableImportFilter}then[yes]else[no]] }}}\n\n&gt;&lt;$set\n\n  name=\"targetTiddler\"\n  value=&lt;&lt;currentTiddler&gt;&gt;\n\n&gt;&lt;$list\n\n  filter=\"[all[shadows+tiddlers]tag[$:/tags/EditorToolbar]!has[draft.of]]\"\n\n&gt;&lt;$reveal\n\n  type=\"nomatch\"\n  state=&lt;&lt;config-visibility-title&gt;&gt;\n  text=\"hide\"\n  class=\"tc-text-editor-toolbar-item-wrapper\"\n\n&gt;&lt;$transclude\n\n  tiddler=\"$:/core/ui/EditTemplate/body/toolbar/button\"\n  mode=\"inline\"\n\n/&gt;&lt;/$reveal&gt;&lt;/$list&gt;&lt;$list\n\n  filter=\"[all[shadows+tiddlers]tag[$:/tags/EditorTools]!has[draft.of]]\"\n\n&gt;&lt;$list\n\tfilter={{!!condition}}\n\tvariable=\"list-condition\"\n&gt;&lt;$transclude/&gt;\n&lt;/$list&gt;&lt;/$list&gt;&lt;/$set&gt;&lt;/$edit&gt;\n"},"$:/core/ui/EditTemplate/body/toolbar/button":{"title":"$:/core/ui/EditTemplate/body/toolbar/button","text":"\\define toolbar-button-icon()\n&lt;$list\n\n  filter=\"[all[current]!has[custom-icon]]\"\n  variable=\"no-custom-icon\"\n\n&gt;&lt;$transclude\n\n  tiddler={{!!icon}}\n\n/&gt;&lt;/$list&gt;\n\\end\n\n\\define toolbar-button-tooltip()\n{{!!description}}&lt;$macrocall $name=\"displayshortcuts\" $output=\"text/plain\" shortcuts={{!!shortcuts}} prefix=\"` - [\" separator=\"] [\" suffix=\"]`\"/&gt;\n\\end\n\n\\define toolbar-button()\n&lt;$list\n\n  filter={{!!condition}}\n  variable=\"list-condition\"\n\n&gt;&lt;$wikify\n\n  name=\"tooltip-text\"\n  text=&lt;&lt;toolbar-button-tooltip&gt;&gt;\n  mode=\"inline\"\n  output=\"text\"\n\n&gt;&lt;$list\n\n  filter=\"[all[current]!has[dropdown]]\"\n  variable=\"no-dropdown\"\n\n&gt;&lt;$set name=disabled filter={{!!condition-disabled}}&gt;&lt;$button\n\n  class=\"tc-btn-invisible $(buttonClasses)$\"\n  tooltip=&lt;&lt;tooltip-text&gt;&gt;\n  actions={{!!actions}}\n  disabled=&lt;&lt;disabled&gt;&gt;\n\n&gt;&lt;span\n\n  data-tw-keyboard-shortcut={{{ [&lt;disabled&gt;match[yes]then[]else{!!shortcuts}] }}}\n\n/&gt;&lt;&lt;toolbar-button-icon&gt;&gt;&lt;$transclude\n\n  tiddler=&lt;&lt;currentTiddler&gt;&gt;\n  field=\"text\"\n\n/&gt;&lt;/$button&gt;&lt;/$set&gt;&lt;/$list&gt;&lt;$list\n\n  filter=\"[all[current]has[dropdown]]\"\n  variable=\"dropdown\"\n\n&gt;&lt;$set\n\n  name=\"dropdown-state\"\n  value=&lt;&lt;qualify \"$:/state/EditorToolbarDropdown\"&gt;&gt;\n\n&gt;&lt;$set name=disabled filter={{!!condition-disabled}}&gt;&lt;$button\n\n  popup=&lt;&lt;dropdown-state&gt;&gt;\n  class=\"tc-popup-keep tc-btn-invisible $(buttonClasses)$\"\n  selectedClass=\"tc-selected\"\n  tooltip=&lt;&lt;tooltip-text&gt;&gt;\n  actions={{!!actions}}\n  disabled=&lt;&lt;disabled&gt;&gt;\n\n&gt;&lt;span\n\n  data-tw-keyboard-shortcut={{{ [&lt;disabled&gt;match[yes]then[]else{!!shortcuts}] }}}\n\n/&gt;&lt;&lt;toolbar-button-icon&gt;&gt;&lt;$transclude\n\n  tiddler=&lt;&lt;currentTiddler&gt;&gt;\n  field=\"text\"\n\n/&gt;&lt;/$button&gt;&lt;/$set&gt;&lt;$reveal\n\n  state=&lt;&lt;dropdown-state&gt;&gt;\n  type=\"popup\"\n  position=\"below\"\n  animate=\"yes\"\n  tag=\"span\"\n\n&gt;&lt;div\n\n  class=\"tc-drop-down tc-popup-keep\"\n\n&gt;&lt;$transclude\n\n  tiddler={{!!dropdown}}\n  mode=\"block\"\n\n/&gt;&lt;/div&gt;&lt;/$reveal&gt;&lt;/$set&gt;&lt;/$list&gt;&lt;/$wikify&gt;&lt;/$list&gt;\n\\end\n\n\\define toolbar-button-outer()\n&lt;$set\n\n  name=\"buttonClasses\"\n  value={{!!button-classes}}\n\n&gt;&lt;&lt;toolbar-button&gt;&gt;&lt;/$set&gt;\n\\end\n\n&lt;&lt;toolbar-button-outer&gt;&gt;"},"$:/core/ui/EditTemplate/body":{"title":"$:/core/ui/EditTemplate/body","tags":"$:/tags/EditTemplate","text":"\\define lingo-base() $:/language/EditTemplate/Body/\n\\define config-visibility-title()\n$:/config/EditorToolbarButtons/Visibility/$(currentTiddler)$\n\\end\n\n\\define importFileActions()\n&lt;$action-popup $state=&lt;&lt;importState&gt;&gt; $coords=\"(0,0,0,0)\" $floating=\"yes\"/&gt;\n\\end\n\n&lt;$list filter=\"[all[current]has[_canonical_uri]]\"&gt;\n\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo External/Hint&gt;&gt;\n\n&lt;a href={{!!_canonical_uri}}&gt;&lt;$text text={{!!_canonical_uri}}/&gt;&lt;/a&gt;\n\n&lt;$edit-text field=\"_canonical_uri\" class=\"tc-edit-fields\" tabindex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"&gt;&lt;/$edit-text&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n\n&lt;$list filter=\"[all[current]!has[_canonical_uri]]\"&gt;\n&lt;$vars importTitle=&lt;&lt;qualify $:/ImportImage&gt;&gt; importState=&lt;&lt;qualify $:/state/ImportImage&gt;&gt; &gt;\n&lt;$dropzone importTitle=&lt;&lt;importTitle&gt;&gt; autoOpenOnImport=\"no\" contentTypesFilter={{$:/config/Editor/ImportContentTypesFilter}} class=\"tc-dropzone-editor\" enable={{{ [{$:/config/DragAndDrop/Enable}match[no]] :else[subfilter{$:/config/Editor/EnableImportFilter}then[yes]else[no]] }}} filesOnly=\"yes\" actions=&lt;&lt;importFileActions&gt;&gt; &gt;&lt;$reveal state=\"$:/state/showeditpreview\" type=\"match\" text=\"yes\"&gt;\n&lt;div class=\"tc-tiddler-preview\"&gt;\n\n&lt;$transclude tiddler=\"$:/core/ui/EditTemplate/body/editor\" mode=\"inline\"/&gt;\n\n&lt;div class=\"tc-tiddler-preview-preview\"&gt;\n\n&lt;$transclude tiddler={{$:/state/editpreviewtype}} mode=\"inline\"&gt;\n\n&lt;$transclude tiddler=\"$:/core/ui/EditTemplate/body/preview/output\" mode=\"inline\"/&gt;\n\n&lt;/$transclude&gt;\n\n&lt;/div&gt;\n\n&lt;/div&gt;\n&lt;/$reveal&gt;\n\n&lt;$reveal state=\"$:/state/showeditpreview\" type=\"nomatch\" text=\"yes\"&gt;\n\n&lt;$transclude tiddler=\"$:/core/ui/EditTemplate/body/editor\" mode=\"inline\"/&gt;\n\n&lt;/$reveal&gt;\n&lt;/$dropzone&gt;\n&lt;/$vars&gt;\n&lt;/$list&gt;"},"$:/core/ui/EditTemplate/controls":{"title":"$:/core/ui/EditTemplate/controls","tags":"$:/tags/EditTemplate","text":"\\define config-title()\n$:/config/EditToolbarButtons/Visibility/$(listItem)$\n\\end\n&lt;div class=\"tc-tiddler-title tc-tiddler-edit-title\"&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;span class=\"tc-tiddler-controls tc-titlebar\"&gt;&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/EditToolbar]!has[draft.of]]\" variable=\"listItem\"&gt;&lt;$reveal type=\"nomatch\" state=&lt;&lt;config-title&gt;&gt; text=\"hide\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;&lt;/$reveal&gt;&lt;/$list&gt;&lt;/span&gt;\n&lt;div style=\"clear: both;\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n"},"$:/core/ui/EditTemplate/fields":{"title":"$:/core/ui/EditTemplate/fields","tags":"$:/tags/EditTemplate","text":"\\define lingo-base() $:/language/EditTemplate/\n\\define config-title()\n$:/config/EditTemplateFields/Visibility/$(currentField)$\n\\end\n\n\\define config-filter()\n[[hide]] -[title{$(config-title)$}]\n\\end\n\n\\define current-tiddler-new-field-selector()\n[data-tiddler-title=\"$(currentTiddlerCSSescaped)$\"] .tc-edit-field-add-name-wrapper input\n\\end\n\n\\define new-field-actions()\n&lt;$action-sendmessage $message=\"tm-add-field\" $name={{{ [&lt;newFieldNameTiddler&gt;get[text]] }}} $value={{{ [&lt;newFieldValueTiddler&gt;get[text]] }}}/&gt;\n&lt;$action-deletetiddler $filter=\"[&lt;newFieldNameTiddler&gt;] [&lt;newFieldValueTiddler&gt;] [&lt;storeTitle&gt;] [&lt;searchListState&gt;]\"/&gt;\n&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;current-tiddler-new-field-selector&gt;&gt;/&gt;\n\\end\n\n\\define delete-state-tiddlers() &lt;$action-deletetiddler $filter=\"[&lt;newFieldNameTiddler&gt;] [&lt;storeTitle&gt;] [&lt;searchListState&gt;]\"/&gt;\n\n\\define cancel-search-actions-inner()\n&lt;$list filter=\"[&lt;storeTitle&gt;has[text]] [&lt;newFieldNameTiddler&gt;has[text]]\" variable=\"ignore\" emptyMessage=\"\"\"&lt;&lt;cancel-delete-tiddler-actions \"cancel\"&gt;&gt;\"\"\"&gt;\n&lt;&lt;delete-state-tiddlers&gt;&gt;\n&lt;/$list&gt;\n\\end\n\n\\define cancel-search-actions()\n&lt;$set name=\"userInput\" value={{{ [&lt;storeTitle&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[&lt;newFieldNameTiddler&gt;get[text]!match&lt;userInput&gt;]\" emptyMessage=\"\"\"&lt;&lt;cancel-search-actions-inner&gt;&gt;\"\"\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;newFieldNameTiddler&gt;&gt; text=&lt;&lt;userInput&gt;&gt;/&gt;&lt;$action-setfield $tiddler=&lt;&lt;refreshTitle&gt;&gt; text=\"yes\"/&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define new-field()\n&lt;$vars name={{{ [&lt;newFieldNameTiddler&gt;get[text]] }}}&gt;\n&lt;$reveal type=\"nomatch\" text=\"\" default=&lt;&lt;name&gt;&gt;&gt;\n&lt;$button tooltip=&lt;&lt;lingo Fields/Add/Button/Hint&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-add-field\"\n$name=&lt;&lt;name&gt;&gt;\n$value={{{ [&lt;newFieldValueTiddler&gt;get[text]] }}}/&gt;\n&lt;$action-deletetiddler $filter=\"[&lt;newFieldNameTiddler&gt;] [&lt;newFieldValueTiddler&gt;] [&lt;storeTitle&gt;] [&lt;searchListState&gt;]\"/&gt;\n&lt;&lt;lingo Fields/Add/Button&gt;&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" text=\"\" default=&lt;&lt;name&gt;&gt;&gt;\n&lt;$button&gt;\n&lt;&lt;lingo Fields/Add/Button&gt;&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/$vars&gt;\n\\end\n\\whitespace trim\n\n&lt;div class=\"tc-edit-fields\"&gt;\n&lt;table class={{{ [all[current]fields[]] :filter[lookup[$:/config/EditTemplateFields/Visibility/]!match[hide]] +[count[]!match[0]] +[then[tc-edit-fields]] ~[[tc-edit-fields tc-edit-fields-small]] }}}&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[all[current]fields[]] +[sort[title]]\" variable=\"currentField\" storyview=\"pop\"&gt;\n&lt;$list filter=&lt;&lt;config-filter&gt;&gt; variable=\"temp\"&gt;\n&lt;tr class=\"tc-edit-field\"&gt;\n&lt;td class=\"tc-edit-field-name\"&gt;\n&lt;$text text=&lt;&lt;currentField&gt;&gt;/&gt;:&lt;/td&gt;\n&lt;td class=\"tc-edit-field-value\"&gt;\n&lt;$keyboard key=\"((delete-field))\" actions=\"\"\"&lt;$action-deletefield $field=&lt;&lt;currentField&gt;&gt;/&gt;&lt;$set name=\"currentTiddlerCSSescaped\" value={{{ [&lt;currentTiddler&gt;escapecss[]] }}}&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;current-tiddler-new-field-selector&gt;&gt;/&gt;&lt;/$set&gt;\"\"\"&gt;\n&lt;$edit-text tiddler=&lt;&lt;currentTiddler&gt;&gt; field=&lt;&lt;currentField&gt;&gt; placeholder={{$:/language/EditTemplate/Fields/Add/Value/Placeholder}} tabindex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"/&gt;\n&lt;/$keyboard&gt;\n&lt;/td&gt;\n&lt;td class=\"tc-edit-field-remove\"&gt;\n&lt;$button class=\"tc-btn-invisible\" tooltip={{$:/language/EditTemplate/Field/Remove/Hint}} aria-label={{$:/language/EditTemplate/Field/Remove/Caption}}&gt;\n&lt;$action-deletefield $field=&lt;&lt;currentField&gt;&gt;/&gt;&lt;$set name=\"currentTiddlerCSSescaped\" value={{{ [&lt;currentTiddler&gt;escapecss[]] }}}&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;current-tiddler-new-field-selector&gt;&gt;/&gt;&lt;/$set&gt;\n{{$:/core/images/delete-button}}\n&lt;/$button&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n\n&lt;$fieldmangler&gt;\n&lt;div class=\"tc-edit-field-add\"&gt;\n&lt;em class=\"tc-edit tc-small-gap-right\"&gt;\n&lt;&lt;lingo Fields/Add/Prompt&gt;&gt;\n&lt;/em&gt;\n&lt;$vars refreshTitle=&lt;&lt;qualify \"$:/temp/fieldname/refresh\"&gt;&gt; storeTitle=&lt;&lt;newFieldNameInputTiddler&gt;&gt; searchListState=&lt;&lt;newFieldNameSelectionTiddler&gt;&gt;&gt;\n&lt;div class=\"tc-edit-field-add-name-wrapper\"&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=&lt;&lt;newFieldNameTiddler&gt;&gt; storeTitle=&lt;&lt;storeTitle&gt;&gt; refreshTitle=&lt;&lt;refreshTitle&gt;&gt;\n\t\tselectionStateTitle=&lt;&lt;searchListState&gt;&gt; tag=\"input\" default=\"\" placeholder={{$:/language/EditTemplate/Fields/Add/Name/Placeholder}}\n\t\tfocusPopup=&lt;&lt;qualify \"$:/state/popup/field-dropdown\"&gt;&gt; class=\"tc-edit-texteditor tc-popup-handle\" tabindex={{$:/config/EditTabIndex}}\n\t\tfocus={{{ [{$:/config/AutoFocus}match[fields]then[true]] ~[[false]] }}} cancelPopups=\"yes\"\n\t\tconfigTiddlerFilter=\"[[$:/config/EditMode/fieldname-filter]]\" inputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; /&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/field-dropdown\"&gt;&gt; class=\"tc-btn-invisible tc-btn-dropdown tc-small-gap\" tooltip={{$:/language/EditTemplate/Field/Dropdown/Hint}} aria-label={{$:/language/EditTemplate/Field/Dropdown/Caption}}&gt;{{$:/core/images/down-arrow}}&lt;/$button&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/field-dropdown\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\"&gt;\n&lt;div class=\"tc-block-dropdown tc-edit-type-dropdown\"&gt;\n&lt;$set name=\"tv-show-missing-links\" value=\"yes\"&gt;\n&lt;$linkcatcher to=&lt;&lt;newFieldNameTiddler&gt;&gt;&gt;\n&lt;div class=\"tc-dropdown-item\"&gt;\n&lt;&lt;lingo Fields/Add/Dropdown/User&gt;&gt;\n&lt;/div&gt;\n&lt;$set name=\"newFieldName\" value={{{ [&lt;storeTitle&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[!is[shadow]!is[system]fields[]search:title&lt;newFieldName&gt;sort[]] -created -creator -draft.of -draft.title -modified -modifier -tags -text -title -type\"  variable=\"currentField\"&gt;\n&lt;$list filter=\"[&lt;currentField&gt;addsuffix[-primaryList]] -[&lt;searchListState&gt;get[text]]\" emptyMessage=\"\"\"&lt;$link to=&lt;&lt;currentField&gt;&gt; class=\"tc-list-item-selected\"&gt;&lt;$text text=&lt;&lt;currentField&gt;&gt;/&gt;&lt;/$link&gt;\"\"\"&gt;\n&lt;$link to=&lt;&lt;currentField&gt;&gt;&gt;\n&lt;$text text=&lt;&lt;currentField&gt;&gt;/&gt;\n&lt;/$link&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;div class=\"tc-dropdown-item\"&gt;\n&lt;&lt;lingo Fields/Add/Dropdown/System&gt;&gt;\n&lt;/div&gt;\n&lt;$list filter=\"[fields[]search:title&lt;newFieldName&gt;sort[]] -[!is[shadow]!is[system]fields[]]\" variable=\"currentField\"&gt;\n&lt;$list filter=\"[&lt;currentField&gt;addsuffix[-secondaryList]] -[&lt;searchListState&gt;get[text]]\" emptyMessage=\"\"\"&lt;$link to=&lt;&lt;currentField&gt;&gt; class=\"tc-list-item-selected\"&gt;&lt;$text text=&lt;&lt;currentField&gt;&gt;/&gt;&lt;/$link&gt;\"\"\"&gt;\n&lt;$link to=&lt;&lt;currentField&gt;&gt;&gt;\n&lt;$text text=&lt;&lt;currentField&gt;&gt;/&gt;\n&lt;/$link&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$linkcatcher&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;span class=\"tc-edit-field-add-value tc-small-gap-right\"&gt;\n&lt;$set name=\"currentTiddlerCSSescaped\" value={{{ [&lt;currentTiddler&gt;escapecss[]] }}}&gt;\n&lt;$keyboard key=\"((add-field))\" actions=&lt;&lt;new-field-actions&gt;&gt;&gt;\n&lt;$edit-text tiddler=&lt;&lt;newFieldValueTiddler&gt;&gt; tag=\"input\" default=\"\" placeholder={{$:/language/EditTemplate/Fields/Add/Value/Placeholder}} class=\"tc-edit-texteditor\" tabindex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"/&gt;\n&lt;/$keyboard&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n&lt;span class=\"tc-edit-field-add-button\"&gt;\n&lt;$macrocall $name=\"new-field\"/&gt;\n&lt;/span&gt;\n&lt;/$vars&gt;\n&lt;/div&gt;\n&lt;/$fieldmangler&gt;\n"},"$:/core/ui/EditTemplate/body/preview/diffs-current":{"title":"$:/core/ui/EditTemplate/body/preview/diffs-current","tags":"$:/tags/EditPreview","caption":"{{$:/language/EditTemplate/Body/Preview/Type/DiffCurrent}}","list-after":"$:/core/ui/EditTemplate/body/preview/output","text":"&lt;$list filter=\"[&lt;currentTiddler&gt;!is[image]]\" emptyMessage={{$:/core/ui/EditTemplate/body/preview/output}}&gt;\n\n&lt;$macrocall $name=\"compareTiddlerText\" sourceTiddlerTitle={{!!draft.of}} destTiddlerTitle=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n\n&lt;/$list&gt;\n\n"},"$:/core/ui/EditTemplate/body/preview/diffs-shadow":{"title":"$:/core/ui/EditTemplate/body/preview/diffs-shadow","tags":"$:/tags/EditPreview","caption":"{{$:/language/EditTemplate/Body/Preview/Type/DiffShadow}}","list-after":"$:/core/ui/EditTemplate/body/preview/output","text":"&lt;$list filter=\"[&lt;currentTiddler&gt;!is[image]]\" emptyMessage={{$:/core/ui/EditTemplate/body/preview/output}}&gt;\n\n&lt;$macrocall $name=\"compareTiddlerText\" sourceTiddlerTitle={{{ [{!!draft.of}shadowsource[]] }}} sourceSubTiddlerTitle={{!!draft.of}} destTiddlerTitle=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n\n&lt;/$list&gt;\n\n"},"$:/core/ui/EditTemplate/body/preview/output":{"title":"$:/core/ui/EditTemplate/body/preview/output","tags":"$:/tags/EditPreview","caption":"{{$:/language/EditTemplate/Body/Preview/Type/Output}}","text":"\\import [all[shadows+tiddlers]tag[$:/tags/Macro/View]!has[draft.of]]\n&lt;$set name=\"tv-tiddler-preview\" value=\"yes\"&gt;\n\n&lt;$transclude /&gt;\n\n&lt;/$set&gt;\n"},"$:/state/showeditpreview":{"title":"$:/state/showeditpreview","text":"no"},"$:/core/ui/EditTemplate/shadow":{"title":"$:/core/ui/EditTemplate/shadow","tags":"$:/tags/EditTemplate","text":"\\define lingo-base() $:/language/EditTemplate/Shadow/\n\\define pluginLinkBody()\n&lt;$link to=\"\"\"$(pluginTitle)$\"\"\"&gt;\n&lt;$text text=\"\"\"$(pluginTitle)$\"\"\"/&gt;\n&lt;/$link&gt;\n\\end\n&lt;$list filter=\"[all[current]get[draft.of]is[shadow]!is[tiddler]]\"&gt;\n\n&lt;$list filter=\"[all[current]shadowsource[]]\" variable=\"pluginTitle\"&gt;\n\n&lt;$set name=\"pluginLink\" value=&lt;&lt;pluginLinkBody&gt;&gt;&gt;\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo Warning&gt;&gt;\n\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n\n&lt;/$list&gt;\n\n&lt;$list filter=\"[all[current]get[draft.of]is[shadow]is[tiddler]]\"&gt;\n\n&lt;$list filter=\"[all[current]shadowsource[]]\" variable=\"pluginTitle\"&gt;\n\n&lt;$set name=\"pluginLink\" value=&lt;&lt;pluginLinkBody&gt;&gt;&gt;\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo OverriddenWarning&gt;&gt;\n\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n\n&lt;/$list&gt;"},"$:/core/ui/EditTemplate/tags":{"title":"$:/core/ui/EditTemplate/tags","tags":"$:/tags/EditTemplate","text":"\\whitespace trim\n\n\\define lingo-base() $:/language/EditTemplate/\n\n\\define tag-styles()\nbackground-color:$(backgroundColor)$;\nfill:$(foregroundColor)$;\ncolor:$(foregroundColor)$;\n\\end\n\n\\define tag-body-inner(colour,fallbackTarget,colourA,colourB,icon,tagField:\"tags\")\n\\whitespace trim\n&lt;$vars foregroundColor=&lt;&lt;contrastcolour target:\"\"\"$colour$\"\"\" fallbackTarget:\"\"\"$fallbackTarget$\"\"\" colourA:\"\"\"$colourA$\"\"\" colourB:\"\"\"$colourB$\"\"\"&gt;&gt; backgroundColor=\"\"\"$colour$\"\"\"&gt;\n&lt;span style=&lt;&lt;tag-styles&gt;&gt; class=\"tc-tag-label tc-tag-list-item tc-small-gap-right\"&gt;\n&lt;$transclude tiddler=\"\"\"$icon$\"\"\"/&gt;&lt;$view field=\"title\" format=\"text\" /&gt;\n&lt;$button class=\"tc-btn-invisible tc-remove-tag-button\" style=&lt;&lt;tag-styles&gt;&gt;&gt;&lt;$action-listops $tiddler=&lt;&lt;saveTiddler&gt;&gt; $field=&lt;&lt;__tagField__&gt;&gt; $subfilter=\"-[{!!title}]\"/&gt;{{$:/core/images/close-button}}&lt;/$button&gt;\n&lt;/span&gt;\n&lt;/$vars&gt;\n\\end\n\n\\define tag-body(colour,palette,icon,tagField:\"tags\")\n&lt;$macrocall $name=\"tag-body-inner\" colour=\"\"\"$colour$\"\"\" fallbackTarget={{$palette$##tag-background}} colourA={{$palette$##foreground}} colourB={{$palette$##background}} icon=\"\"\"$icon$\"\"\" tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\n\\end\n\n\\define edit-tags-template(tagField:\"tags\")\n\\whitespace trim\n&lt;div class=\"tc-edit-tags\"&gt;\n&lt;$list filter=\"[list[!!$tagField$]sort[title]]\" storyview=\"pop\"&gt;\n&lt;$macrocall $name=\"tag-body\" colour={{!!color}} palette={{$:/palette}} icon={{!!icon}} tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;$vars tabIndex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"&gt;\n&lt;$macrocall $name=\"tag-picker\" tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\n&lt;/$vars&gt;\n&lt;/div&gt;\n\\end\n&lt;$set name=\"saveTiddler\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$macrocall $name=\"edit-tags-template\" tagField=&lt;&lt;tagField&gt;&gt;/&gt;\n&lt;/$set&gt;\n"},"$:/core/ui/EditTemplate/title":{"title":"$:/core/ui/EditTemplate/title","tags":"$:/tags/EditTemplate","text":"&lt;$edit-text field=\"draft.title\" class=\"tc-titlebar tc-edit-texteditor\" focus={{{ [{$:/config/AutoFocus}match[title]then[true]] ~[[false]] }}} tabindex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"/&gt;\n\n&lt;$vars pattern=\"\"\"[\\|\\[\\]{}]\"\"\" bad-chars=\"\"\"`| [ ] { }`\"\"\"&gt;\n\n&lt;$list filter=\"[all[current]regexp:draft.title&lt;pattern&gt;]\" variable=\"listItem\"&gt;\n\n&lt;div class=\"tc-message-box\"&gt;\n\n{{$:/core/images/warning}} {{$:/language/EditTemplate/Title/BadCharacterWarning}}\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n\n&lt;/$vars&gt;\n\n&lt;$reveal state=\"!!draft.title\" type=\"nomatch\" text={{!!draft.of}} tag=\"div\"&gt;\n\n&lt;$list filter=\"[{!!draft.title}!is[missing]]\" variable=\"listItem\"&gt;\n\n&lt;div class=\"tc-message-box\"&gt;\n\n{{$:/core/images/warning}} {{$:/language/EditTemplate/Title/Exists/Prompt}}: &lt;$link to={{!!draft.title}} /&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n\n&lt;$list filter=\"[{!!draft.of}!is[missing]]\" variable=\"listItem\"&gt;\n\n&lt;$vars fromTitle={{!!draft.of}} toTitle={{!!draft.title}}&gt;\n\n&lt;$checkbox tiddler=\"$:/config/RelinkOnRename\" field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"&gt; {{$:/language/EditTemplate/Title/Relink/Prompt}}&lt;/$checkbox&gt;\n\n&lt;$list filter=\"[title&lt;fromTitle&gt;backlinks[]limit[1]]\" variable=\"listItem\"&gt;\n\n&lt;$vars stateTiddler=&lt;&lt;qualify \"$:/state/edit/references\"&gt;&gt; &gt;\n\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;stateTiddler&gt;&gt; text=\"show\"&gt;\n&lt;$button set=&lt;&lt;stateTiddler&gt;&gt; setTo=\"show\" class=\"tc-btn-invisible\"&gt;{{$:/core/images/right-arrow}} \n&lt;&lt;lingo EditTemplate/Title/References/Prompt&gt;&gt;&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;stateTiddler&gt;&gt; text=\"show\"&gt;\n&lt;$button set=&lt;&lt;stateTiddler&gt;&gt; setTo=\"hide\" class=\"tc-btn-invisible\"&gt;{{$:/core/images/down-arrow}} \n&lt;&lt;lingo EditTemplate/Title/References/Prompt&gt;&gt;&lt;/$button&gt;\n&lt;/$reveal&gt;\n\n&lt;$reveal type=\"match\" state=&lt;&lt;stateTiddler&gt;&gt; text=\"show\"&gt;\n&lt;$tiddler tiddler=&lt;&lt;fromTitle&gt;&gt; &gt;\n&lt;$transclude tiddler=\"$:/core/ui/TiddlerInfo/References\"/&gt;\n&lt;/$tiddler&gt;\n&lt;/$reveal&gt;\n\n&lt;/$vars&gt;\n\n&lt;/$list&gt;\n\n&lt;/$vars&gt;\n\n&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n"},"$:/core/ui/EditTemplate/type":{"title":"$:/core/ui/EditTemplate/type","tags":"$:/tags/EditTemplate","first-search-filter":"[all[shadows+tiddlers]prefix[$:/language/Docs/Types/]sort[description]sort[group-sort]removeprefix[$:/language/Docs/Types/]search&lt;userInput&gt;]","text":"\\define lingo-base() $:/language/EditTemplate/\n\\define input-cancel-actions() &lt;$list filter=\"[&lt;storeTitle&gt;get[text]] [&lt;currentTiddler&gt;get[type]] +[limit[1]]\" emptyMessage=\"\"\"&lt;&lt;cancel-delete-tiddler-actions \"cancel\"&gt;&gt;\"\"\"&gt;&lt;$action-sendmessage $message=\"tm-remove-field\" $param=\"type\"/&gt;&lt;$action-deletetiddler $filter=\"[&lt;typeInputTiddler&gt;] [&lt;refreshTitle&gt;] [&lt;typeSelectionTiddler&gt;]\"/&gt;&lt;/$list&gt;\n\\whitespace trim\n&lt;$set name=\"refreshTitle\" value=&lt;&lt;qualify \"$:/temp/type-search/refresh\"&gt;&gt;&gt;\n&lt;div class=\"tc-edit-type-selector-wrapper\"&gt;\n&lt;em class=\"tc-edit tc-small-gap-right\"&gt;&lt;&lt;lingo Type/Prompt&gt;&gt;&lt;/em&gt;\n&lt;div class=\"tc-type-selector-dropdown-wrapper\"&gt;\n&lt;div class=\"tc-type-selector\"&gt;&lt;$fieldmangler&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=&lt;&lt;currentTiddler&gt;&gt; storeTitle=&lt;&lt;typeInputTiddler&gt;&gt; refreshTitle=&lt;&lt;refreshTitle&gt;&gt; selectionStateTitle=&lt;&lt;typeSelectionTiddler&gt;&gt; field=\"type\" tag=\"input\" default=\"\" placeholder={{$:/language/EditTemplate/Type/Placeholder}} focusPopup=&lt;&lt;qualify \"$:/state/popup/type-dropdown\"&gt;&gt; class=\"tc-edit-typeeditor tc-edit-texteditor tc-popup-handle\" tabindex={{$:/config/EditTabIndex}} focus={{{ [{$:/config/AutoFocus}match[type]then[true]] ~[[false]] }}} cancelPopups=\"yes\" configTiddlerFilter=\"[[$:/core/ui/EditTemplate/type]]\" inputCancelActions=&lt;&lt;input-cancel-actions&gt;&gt;/&gt;&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/type-dropdown\"&gt;&gt; class=\"tc-btn-invisible tc-btn-dropdown tc-small-gap\" tooltip={{$:/language/EditTemplate/Type/Dropdown/Hint}} aria-label={{$:/language/EditTemplate/Type/Dropdown/Caption}}&gt;{{$:/core/images/down-arrow}}&lt;/$button&gt;&lt;$button message=\"tm-remove-field\" param=\"type\" class=\"tc-btn-invisible tc-btn-icon\" tooltip={{$:/language/EditTemplate/Type/Delete/Hint}} aria-label={{$:/language/EditTemplate/Type/Delete/Caption}}&gt;{{$:/core/images/delete-button}}&lt;$action-deletetiddler $filter=\"[&lt;storeTitle&gt;] [&lt;refreshTitle&gt;] [&lt;selectionStateTitle&gt;]\"/&gt;&lt;/$button&gt;\n&lt;/$fieldmangler&gt;&lt;/div&gt;\n\n&lt;div class=\"tc-block-dropdown-wrapper\"&gt;\n&lt;$set name=\"tv-show-missing-links\" value=\"yes\"&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/type-dropdown\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\"&gt;\n&lt;div class=\"tc-block-dropdown tc-edit-type-dropdown\"&gt;\n&lt;$linkcatcher to=\"!!type\"&gt;\n&lt;$list filter='[all[shadows+tiddlers]prefix[$:/language/Docs/Types/]each[group]sort[group-sort]]'&gt;\n&lt;div class=\"tc-dropdown-item\"&gt;\n&lt;$text text={{!!group}}/&gt;\n&lt;/div&gt;\n&lt;$set name=\"userInput\" value={{{ [&lt;typeInputTiddler&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]prefix[$:/language/Docs/Types/]group{!!group}] +[sort[description]] +[removeprefix[$:/language/Docs/Types/]] +[search&lt;userInput&gt;]\"&gt;&lt;span class={{{ [&lt;currentTiddler&gt;addsuffix[-primaryList]] -[&lt;typeSelectionTiddler&gt;get[text]] +[then[]else[tc-list-item-selected]] }}}&gt;&lt;$link to={{{ [&lt;currentTiddler&gt;addprefix[$:/language/Docs/Types/]get[name]] }}}&gt;&lt;$view tiddler={{{ [&lt;currentTiddler&gt;addprefix[$:/language/Docs/Types/]] }}} field=\"description\"/&gt; (&lt;$view tiddler={{{ [&lt;currentTiddler&gt;addprefix[$:/language/Docs/Types/]] }}} field=\"name\"/&gt;)&lt;/$link&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$linkcatcher&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$set&gt;\n"},"$:/core/ui/EditTemplate":{"title":"$:/core/ui/EditTemplate","text":"\\define delete-edittemplate-state-tiddlers() &lt;$action-deletetiddler $filter=\"[&lt;newFieldNameTiddler&gt;] [&lt;newFieldValueTiddler&gt;] [&lt;newFieldNameInputTiddler&gt;] [&lt;newFieldNameSelectionTiddler&gt;] [&lt;newTagNameTiddler&gt;] [&lt;newTagNameInputTiddler&gt;] [&lt;newTagNameSelectionTiddler&gt;] [&lt;typeInputTiddler&gt;] [&lt;typeSelectionTiddler&gt;]\"/&gt;\n\\define save-tiddler-actions()\n&lt;$action-sendmessage $message=\"tm-add-tag\" $param={{{ [&lt;newTagNameTiddler&gt;get[text]] }}}/&gt;\n&lt;$action-sendmessage $message=\"tm-add-field\" $name={{{ [&lt;newFieldNameTiddler&gt;get[text]] }}} $value={{{ [&lt;newFieldValueTiddler&gt;get[text]] }}}/&gt;\n&lt;&lt;delete-edittemplate-state-tiddlers&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-save-tiddler\"/&gt;\n\\end\n\\define cancel-delete-tiddler-actions(message)\n&lt;&lt;delete-edittemplate-state-tiddlers&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-$message$-tiddler\"/&gt;\n\\end\n&lt;div data-tiddler-title=&lt;&lt;currentTiddler&gt;&gt; data-tags={{!!tags}} class={{{ tc-tiddler-frame tc-tiddler-edit-frame [&lt;currentTiddler&gt;is[tiddler]then[tc-tiddler-exists]] [&lt;currentTiddler&gt;is[missing]!is[shadow]then[tc-tiddler-missing]] [&lt;currentTiddler&gt;is[shadow]then[tc-tiddler-exists tc-tiddler-shadow]] [&lt;currentTiddler&gt;is[system]then[tc-tiddler-system]] [{!!class}] [&lt;currentTiddler&gt;tags[]encodeuricomponent[]addprefix[tc-tagged-]] +[join[ ]] }}}&gt;\n&lt;$fieldmangler&gt;\n&lt;$vars storyTiddler=&lt;&lt;currentTiddler&gt;&gt; newTagNameTiddler=&lt;&lt;qualify \"$:/temp/NewTagName\"&gt;&gt; newFieldNameTiddler=&lt;&lt;qualify \"$:/temp/NewFieldName\"&gt;&gt; newFieldValueTiddler=&lt;&lt;qualify \"$:/temp/NewFieldValue\"&gt;&gt; newFieldNameInputTiddler=&lt;&lt;qualify \"$:/temp/NewFieldName/input\"&gt;&gt; newFieldNameSelectionTiddler=&lt;&lt;qualify \"$:/temp/NewFieldName/selected-item\"&gt;&gt; newTagNameInputTiddler=&lt;&lt;qualify \"$:/temp/NewTagName/input\"&gt;&gt; newTagNameSelectionTiddler=&lt;&lt;qualify \"$:/temp/NewTagName/selected-item\"&gt;&gt; typeInputTiddler=&lt;&lt;qualify \"$:/temp/Type/input\"&gt;&gt; typeSelectionTiddler=&lt;&lt;qualify \"$:/temp/Type/selected-item\"&gt;&gt;&gt;\n&lt;$keyboard key=\"((cancel-edit-tiddler))\" actions=&lt;&lt;cancel-delete-tiddler-actions \"cancel\"&gt;&gt;&gt;\n&lt;$keyboard key=\"((save-tiddler))\" actions=&lt;&lt;save-tiddler-actions&gt;&gt;&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/EditTemplate]!has[draft.of]]\" variable=\"listItem\"&gt;\n&lt;$set name=\"tv-config-toolbar-class\" filter=\"[&lt;tv-config-toolbar-class&gt;] [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]]\"&gt;\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$vars&gt;\n&lt;/$fieldmangler&gt;\n&lt;/div&gt;\n"},"$:/core/ui/Buttons/cancel":{"title":"$:/core/ui/Buttons/cancel","tags":"$:/tags/EditToolbar","caption":"{{$:/core/images/cancel-button}} {{$:/language/Buttons/Cancel/Caption}}","description":"{{$:/language/Buttons/Cancel/Hint}}","text":"\\whitespace trim\n&lt;$button actions=&lt;&lt;cancel-delete-tiddler-actions \"cancel\"&gt;&gt; tooltip={{$:/language/Buttons/Cancel/Hint}} aria-label={{$:/language/Buttons/Cancel/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/cancel-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Cancel/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/Buttons/delete":{"title":"$:/core/ui/Buttons/delete","tags":"$:/tags/EditToolbar $:/tags/ViewToolbar","caption":"{{$:/core/images/delete-button}} {{$:/language/Buttons/Delete/Caption}}","description":"{{$:/language/Buttons/Delete/Hint}}","text":"\\whitespace trim\n&lt;$button actions=&lt;&lt;cancel-delete-tiddler-actions \"delete\"&gt;&gt; tooltip={{$:/language/Buttons/Delete/Hint}} aria-label={{$:/language/Buttons/Delete/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/delete-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Delete/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/Buttons/save":{"title":"$:/core/ui/Buttons/save","tags":"$:/tags/EditToolbar","caption":"{{$:/core/images/done-button}} {{$:/language/Buttons/Save/Caption}}","description":"{{$:/language/Buttons/Save/Hint}}","text":"\\define save-tiddler-button()\n\\whitespace trim\n&lt;$fieldmangler&gt;&lt;$button tooltip={{$:/language/Buttons/Save/Hint}} aria-label={{$:/language/Buttons/Save/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;&lt;save-tiddler-actions&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/done-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Save/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;&lt;/$fieldmangler&gt;\n\\end\n&lt;&lt;save-tiddler-button&gt;&gt;\n"},"$:/core/Filters/AllTags":{"title":"$:/core/Filters/AllTags","tags":"$:/tags/Filter","filter":"[tags[]!is[system]sort[title]]","description":"{{$:/language/Filters/AllTags}}","text":""},"$:/core/Filters/AllTiddlers":{"title":"$:/core/Filters/AllTiddlers","tags":"$:/tags/Filter","filter":"[!is[system]sort[title]]","description":"{{$:/language/Filters/AllTiddlers}}","text":""},"$:/core/Filters/Drafts":{"title":"$:/core/Filters/Drafts","tags":"$:/tags/Filter","filter":"[has[draft.of]sort[title]]","description":"{{$:/language/Filters/Drafts}}","text":""},"$:/core/Filters/Missing":{"title":"$:/core/Filters/Missing","tags":"$:/tags/Filter","filter":"[all[missing]sort[title]]","description":"{{$:/language/Filters/Missing}}","text":""},"$:/core/Filters/Orphans":{"title":"$:/core/Filters/Orphans","tags":"$:/tags/Filter","filter":"[all[orphans]sort[title]]","description":"{{$:/language/Filters/Orphans}}","text":""},"$:/core/Filters/OverriddenShadowTiddlers":{"title":"$:/core/Filters/OverriddenShadowTiddlers","tags":"$:/tags/Filter","filter":"[is[shadow]]","description":"{{$:/language/Filters/OverriddenShadowTiddlers}}","text":""},"$:/core/Filters/RecentSystemTiddlers":{"title":"$:/core/Filters/RecentSystemTiddlers","tags":"$:/tags/Filter","filter":"[has[modified]!sort[modified]limit[50]]","description":"{{$:/language/Filters/RecentSystemTiddlers}}","text":""},"$:/core/Filters/RecentTiddlers":{"title":"$:/core/Filters/RecentTiddlers","tags":"$:/tags/Filter","filter":"[!is[system]has[modified]!sort[modified]limit[50]]","description":"{{$:/language/Filters/RecentTiddlers}}","text":""},"$:/core/Filters/SessionTiddlers":{"title":"$:/core/Filters/SessionTiddlers","tags":"$:/tags/Filter","filter":"[haschanged[]]","description":"{{$:/language/Filters/SessionTiddlers}}","text":""},"$:/core/Filters/ShadowTiddlers":{"title":"$:/core/Filters/ShadowTiddlers","tags":"$:/tags/Filter","filter":"[all[shadows]sort[title]]","description":"{{$:/language/Filters/ShadowTiddlers}}","text":""},"$:/core/Filters/StoryList":{"title":"$:/core/Filters/StoryList","tags":"$:/tags/Filter","filter":"[list[$:/StoryList]] -$:/AdvancedSearch","description":"{{$:/language/Filters/StoryList}}","text":""},"$:/core/Filters/SystemTags":{"title":"$:/core/Filters/SystemTags","tags":"$:/tags/Filter","filter":"[all[shadows+tiddlers]tags[]is[system]sort[title]]","description":"{{$:/language/Filters/SystemTags}}","text":""},"$:/core/Filters/SystemTiddlers":{"title":"$:/core/Filters/SystemTiddlers","tags":"$:/tags/Filter","filter":"[is[system]sort[title]]","description":"{{$:/language/Filters/SystemTiddlers}}","text":""},"$:/core/Filters/TypedTiddlers":{"title":"$:/core/Filters/TypedTiddlers","tags":"$:/tags/Filter","filter":"[!is[system]has[type]each[type]sort[type]] -[type[text/vnd.tiddlywiki]]","description":"{{$:/language/Filters/TypedTiddlers}}","text":""},"$:/core/ui/ImportListing":{"title":"$:/core/ui/ImportListing","text":"\\define lingo-base() $:/language/Import/\n\n\\define messageField() message-$(payloadTiddler)$\n\n\\define payloadTitleFilter() [&lt;currentTiddler&gt;get&lt;renameField&gt;minlength[1]else&lt;payloadTiddler&gt;]\n\n\\define overWriteWarning()\n&lt;$list filter=\"[&lt;currentTiddler&gt;!has&lt;suppressedField&gt;]\"&gt;\n&lt;$text text={{{[subfilter&lt;payloadTitleFilter&gt;!is[tiddler]then[]] ~[&lt;lingo-base&gt;addsuffix[Listing/Rename/OverwriteWarning]get[text]]}}}/&gt;\n&lt;/$list&gt;\n\\end\n\n\\define selectionInfo()\n\\whitespace trim\n&lt;$set name=\"escUnselected\" value={{{[{$:/language/Import/Upgrader/Tiddler/Unselected}escaperegexp[]addprefix[(?g)]]}}}&gt;\n\t&lt;$list filter=\"[all[current]get&lt;messageField&gt;regexp&lt;escUnselected&gt;]\" variable=\"ignore\"&gt;\n\t\t&lt;$text text={{{[all[current]get&lt;selectionField&gt;match[checked]then{$:/language/Import/Upgrader/Tiddler/Selected}else[]]}}}/&gt;\n\t&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define libraryInfo()\n\\whitespace trim\n&lt;$set name=\"escUnselected\" value={{{[{$:/language/Import/Upgrader/Tiddler/Unselected}escaperegexp[]addprefix[(?g)]]}}}&gt;\n\t&lt;$list filter=\"[all[current]get&lt;messageField&gt;!regexp&lt;escUnselected&gt;]\" variable=\"ignore\"&gt;\n\t\t&lt;$text text={{{[all[current]get&lt;messageField&gt;]}}}/&gt;\n\t&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define selectionField() selection-$(payloadTiddler)$\n\n\\define renameField() rename-$(payloadTiddler)$\n\n\\define suppressedField() suppressed-$(payloadTiddler)$\n\n\\define newImportTitleTiddler() $:/temp/NewImportTitle-$(payloadTiddler)$\n\n\\define previewPopupState() $(currentTiddler)$!!popup-$(payloadTiddler)$\n\n\\define renameFieldState() $(currentTiddler)$!!state-rename-$(payloadTiddler)$\n\n\\define select-all-actions()\n&lt;$list filter=\"[all[current]plugintiddlers[]sort[title]]\" variable=\"payloadTiddler\"&gt;\n&lt;$action-setfield $field={{{ [&lt;payloadTiddler&gt;addprefix[selection-]] }}} $value={{$:/state/import/select-all}}/&gt;\n&lt;/$list&gt;\n\\end\n\n&lt;table class=\"tc-import-table\"&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th align=\"left\"&gt;\n&lt;$checkbox tiddler=\"$:/state/import/select-all\" field=\"text\" checked=\"checked\" unchecked=\"unchecked\" default=\"checked\" actions=&lt;&lt;select-all-actions&gt;&gt;&gt;\n&lt;&lt;lingo Listing/Select/Caption&gt;&gt;\n&lt;/$checkbox&gt;\n&lt;/th&gt;\n&lt;th&gt;\n&lt;&lt;lingo Listing/Title/Caption&gt;&gt;\n&lt;/th&gt;\n&lt;th&gt;\n&lt;&lt;lingo Listing/Status/Caption&gt;&gt;\n&lt;/th&gt;\n&lt;/tr&gt;\n&lt;$list filter=\"[all[current]plugintiddlers[]sort[title]]\" variable=\"payloadTiddler\"&gt;\n&lt;tr class={{{[&lt;currentTiddler&gt;has&lt;suppressedField&gt;then[tc-row-disabled]] ~[subfilter&lt;payloadTitleFilter&gt;is[tiddler]then[tc-row-warning]] }}}&gt;\n&lt;td&gt;\n&lt;$checkbox field=&lt;&lt;selectionField&gt;&gt; checked=\"checked\" unchecked=\"unchecked\" default=\"checked\" disabled={{{[&lt;currentTiddler&gt;has&lt;suppressedField&gt;then[yes]else[no]]}}}/&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;renameFieldState&gt;&gt; text=\"yes\" tag=\"div\"&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;previewPopupState&gt;&gt; text=\"yes\" tag=\"div\" class=\"tc-flex\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown tc-flex-grow-1 tc-word-break\" set=&lt;&lt;previewPopupState&gt;&gt; setTo=\"yes\" disabled={{{[&lt;currentTiddler&gt;has&lt;suppressedField&gt;then[yes]else[no]]}}}&gt;\n&lt;span class=\"tc-small-gap-right\"&gt;{{$:/core/images/right-arrow}}&lt;/span&gt;&lt;$text text={{{[subfilter&lt;payloadTitleFilter&gt;]}}}/&gt;\n&lt;/$button&gt;\n&lt;$list filter=\"[&lt;currentTiddler&gt;!has&lt;suppressedField&gt;]\"&gt;&lt;$button class=\"tc-btn-invisible\" set=&lt;&lt;renameFieldState&gt;&gt; setTo=\"yes\" tooltip={{{[&lt;lingo-base&gt;addsuffix[Listing/Rename/Tooltip]get[text]]}}}&gt;{{$:/core/images/edit-button}}&lt;/$button&gt;&lt;/$list&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;previewPopupState&gt;&gt; text=\"yes\" tag=\"div\"&gt;\n&lt;$button class=\"tc-btn-invisible tc-btn-dropdown\" set=&lt;&lt;previewPopupState&gt;&gt; setTo=\"no\"&gt;\n&lt;span class=\"tc-small-gap-right\"&gt;{{$:/core/images/down-arrow}}&lt;/span&gt;&lt;$text text={{{[subfilter&lt;payloadTitleFilter&gt;]}}}/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;renameFieldState&gt;&gt; text=\"yes\" tag=\"div\"&gt;\n&lt;$text text={{{[&lt;lingo-base&gt;addsuffix[Listing/Rename/Prompt]get[text]]}}}/&gt;\n&lt;/$reveal&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;&lt;selectionInfo&gt;&gt;\n&lt;&lt;libraryInfo&gt;&gt;\n&lt;&lt;overWriteWarning&gt;&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;renameFieldState&gt;&gt; text=\"yes\" tag=\"tr\"&gt;\n&lt;td colspan=\"3\"&gt;\n&lt;div class=\"tc-flex\"&gt;\n&lt;$edit-text tiddler=&lt;&lt;newImportTitleTiddler&gt;&gt;  default={{{[subfilter&lt;payloadTitleFilter&gt;]}}} tag=\"input\" class=\"tc-import-rename tc-flex-grow-1\"/&gt;&lt;span class=\"tc-small-gap-left\"&gt;&lt;$button  class=\"tc-btn-invisible\" set=&lt;&lt;renameFieldState&gt;&gt; setTo=\"no\" tooltip={{{[&lt;lingo-base&gt;addsuffix[Listing/Rename/CancelRename]get[text]]}}}&gt;{{$:/core/images/close-button}}&lt;$action-deletetiddler $tiddler=&lt;&lt;newImportTitleTiddler&gt;&gt;/&gt;&lt;/$button&gt;&lt;span class=\"tc-small-gap-right\"/&gt;&lt;/span&gt;&lt;$button  class=\"tc-btn-invisible\" set=&lt;&lt;renameFieldState&gt;&gt; setTo=\"no\" tooltip={{{[&lt;lingo-base&gt;addsuffix[Listing/Rename/ConfirmRename]get[text]]}}}&gt;{{$:/core/images/done-button}}&lt;$action-setfield $field=&lt;&lt;renameField&gt;&gt; $value={{{[&lt;newImportTitleTiddler&gt;get[text]minlength[1]else&lt;payloadTiddler&gt;]}}} /&gt;&lt;$action-deletetiddler $tiddler=&lt;&lt;newImportTitleTiddler&gt;&gt;/&gt;&lt;/$button&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;/$reveal&gt;\n&lt;tr&gt;\n&lt;td colspan=\"3\"&gt;\n&lt;$reveal type=\"match\" text=\"yes\" state=&lt;&lt;previewPopupState&gt;&gt; tag=\"div\"&gt;\n&lt;$list filter=\"[{$:/state/importpreviewtype}has[text]]\" variable=\"listItem\" emptyMessage={{$:/core/ui/ImportPreviews/Text}}&gt;\n&lt;$transclude tiddler={{$:/state/importpreviewtype}}/&gt;\n&lt;/$list&gt;\n&lt;/$reveal&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/ImportPreviews/Diff":{"title":"$:/core/ui/ImportPreviews/Diff","tags":"$:/tags/ImportPreview","caption":"{{$:/language/Import/Listing/Preview/Diff}}","text":"&lt;$macrocall $name=\"compareTiddlerText\" sourceTiddlerTitle=&lt;&lt;payloadTiddler&gt;&gt; destTiddlerTitle=&lt;&lt;currentTiddler&gt;&gt; destSubTiddlerTitle=&lt;&lt;payloadTiddler&gt;&gt;/&gt;\n"},"$:/core/ui/ImportPreviews/DiffFields":{"title":"$:/core/ui/ImportPreviews/DiffFields","tags":"$:/tags/ImportPreview","caption":"{{$:/language/Import/Listing/Preview/DiffFields}}","text":"&lt;$macrocall $name=\"compareTiddlers\" sourceTiddlerTitle=&lt;&lt;payloadTiddler&gt;&gt; destTiddlerTitle=&lt;&lt;currentTiddler&gt;&gt; destSubTiddlerTitle=&lt;&lt;payloadTiddler&gt;&gt; exclude=\"text\"/&gt;\n"},"$:/core/ui/ImportPreviews/Fields":{"title":"$:/core/ui/ImportPreviews/Fields","tags":"$:/tags/ImportPreview","caption":"{{$:/language/Import/Listing/Preview/Fields}}","text":"&lt;table class=\"tc-view-field-table\"&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[&lt;payloadTiddler&gt;subtiddlerfields&lt;currentTiddler&gt;sort[]] -text\" variable=\"fieldName\"&gt;\n&lt;tr class=\"tc-view-field\"&gt;\n&lt;td class=\"tc-view-field-name\"&gt;\n&lt;$text text=&lt;&lt;fieldName&gt;&gt;/&gt;\n&lt;/td&gt;\n&lt;td class=\"tc-view-field-value\"&gt;\n&lt;$view field=&lt;&lt;fieldName&gt;&gt; tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;payloadTiddler&gt;&gt;/&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/ImportPreviews/Text":{"title":"$:/core/ui/ImportPreviews/Text","tags":"$:/tags/ImportPreview","caption":"{{$:/language/Import/Listing/Preview/Text}}","text":"&lt;$transclude tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;payloadTiddler&gt;&gt; mode=\"block\"/&gt;\n"},"$:/core/ui/ImportPreviews/TextRaw":{"title":"$:/core/ui/ImportPreviews/TextRaw","tags":"$:/tags/ImportPreview","caption":"{{$:/language/Import/Listing/Preview/TextRaw}}","text":"&lt;pre&gt;&lt;code&gt;&lt;$view tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;payloadTiddler&gt;&gt; /&gt;&lt;/code&gt;&lt;/pre&gt;"},"$:/core/ui/KeyboardShortcuts/advanced-search":{"title":"$:/core/ui/KeyboardShortcuts/advanced-search","tags":"$:/tags/KeyboardShortcut","key":"((advanced-search))","text":"&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\"&gt;\n&lt;$action-navigate $to=\"$:/AdvancedSearch\"/&gt;\n&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\"[data-tiddler-title=\"$:/AdvancedSearch\"] .tc-search input\"\"\" preventScroll=\"true\"/&gt;\n&lt;/$navigator&gt;\n"},"$:/core/ui/KeyboardShortcuts/change-sidebar-layout":{"title":"$:/core/ui/KeyboardShortcuts/change-sidebar-layout","tags":"$:/tags/KeyboardShortcut","key":"((change-sidebar-layout))","text":"&lt;$list filter=\"[{$:/themes/tiddlywiki/vanilla/options/sidebarlayout}match[fixed-fluid]]\" \nemptyMessage=\"\"\"&lt;$action-setfield $tiddler=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" text=\"fixed-fluid\"/&gt;\"\"\"&gt;\n&lt;$action-setfield $tiddler=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" text=\"fluid-fixed\"/&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/KeyboardShortcuts/new-image":{"title":"$:/core/ui/KeyboardShortcuts/new-image","tags":"$:/tags/KeyboardShortcut","key":"((new-image))","text":"&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\" openLinkFromInsideRiver={{$:/config/Navigation/openLinkFromInsideRiver}} openLinkFromOutsideRiver={{$:/config/Navigation/openLinkFromOutsideRiver}} relinkOnRename={{$:/config/RelinkOnRename}}&gt;\n{{$:/core/ui/Actions/new-image}}\n&lt;/$navigator&gt;\n"},"$:/core/ui/KeyboardShortcuts/new-journal":{"title":"$:/core/ui/KeyboardShortcuts/new-journal","tags":"$:/tags/KeyboardShortcut","key":"((new-journal))","text":"&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\" openLinkFromInsideRiver={{$:/config/Navigation/openLinkFromInsideRiver}} openLinkFromOutsideRiver={{$:/config/Navigation/openLinkFromOutsideRiver}} relinkOnRename={{$:/config/RelinkOnRename}}&gt;\n{{$:/core/ui/Actions/new-journal}}\n&lt;/$navigator&gt;\n"},"$:/core/ui/KeyboardShortcuts/new-tiddler":{"title":"$:/core/ui/KeyboardShortcuts/new-tiddler","tags":"$:/tags/KeyboardShortcut","key":"((new-tiddler))","text":"&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\" openLinkFromInsideRiver={{$:/config/Navigation/openLinkFromInsideRiver}} openLinkFromOutsideRiver={{$:/config/Navigation/openLinkFromOutsideRiver}} relinkOnRename={{$:/config/RelinkOnRename}}&gt;\n{{$:/core/ui/Actions/new-tiddler}}\n&lt;/$navigator&gt;\n"},"$:/core/ui/KeyboardShortcuts/save-wiki":{"title":"$:/core/ui/KeyboardShortcuts/save-wiki","tags":"$:/tags/KeyboardShortcut","key":"((save-wiki))","text":"&lt;$wikify name=\"site-title\" text={{$:/config/SaveWikiButton/Filename}}&gt;\n&lt;$action-sendmessage $message=\"tm-save-wiki\" $param={{$:/config/SaveWikiButton/Template}} filename=&lt;&lt;site-title&gt;&gt;/&gt;\n&lt;/$wikify&gt;\n"},"$:/core/ui/KeyboardShortcuts/sidebar-search":{"title":"$:/core/ui/KeyboardShortcuts/sidebar-search","tags":"$:/tags/KeyboardShortcut","key":"((sidebar-search))","text":"&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\".tc-search input\"/&gt;\n"},"$:/core/ui/KeyboardShortcuts/switcher":{"title":"$:/core/ui/KeyboardShortcuts/switcher","tags":"$:/tags/KeyboardShortcut","key":"((layout-switcher))","text":"&lt;$action-sendmessage $message=\"tm-show-switcher\" switch=\"layout\"/&gt;"},"$:/core/ui/KeyboardShortcuts/toggle-sidebar":{"title":"$:/core/ui/KeyboardShortcuts/toggle-sidebar","tags":"$:/tags/KeyboardShortcut","key":"((toggle-sidebar))","text":"&lt;$list filter=\"[[$:/state/sidebar]is[missing]] [{$:/state/sidebar}removeprefix[yes]]\" emptyMessage=\"\"\"\n&lt;$action-setfield $tiddler=\"$:/state/sidebar\" text=\"yes\"/&gt;\n\"\"\"&gt;\n&lt;$action-setfield $tiddler=\"$:/state/sidebar\" text=\"no\"/&gt;\n&lt;/$list&gt;\n"},"$:/snippets/LayoutSwitcher":{"title":"$:/snippets/LayoutSwitcher","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ControlPanel/LayoutSwitcher/Caption}}","text":"&lt;$linkcatcher to=\"$:/layout\"&gt;\n&lt;div class=\"tc-chooser\"&gt;\n&lt;$list filter=\"[all[tiddlers+shadows]tag[$:/tags/Layout]] [[$:/core/ui/PageTemplate]] +[!is[draft]sort[name]]\"&gt;\n&lt;$list filter=\"[{$:/layout}!has[text]]\" variable=\"ignore\" emptyMessage=\"\"\"\n&lt;$set name=\"cls\" filter=\"[all[current]field:title{$:/layout}]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;&lt;$link to={{!!title}}&gt;''&lt;$transclude field=\"name\"/&gt;'' - &lt;$transclude field=\"description\"/&gt;&lt;/$link&gt;&lt;/div&gt;\n&lt;/$set&gt;\n\"\"\"&gt;\n&lt;$set name=\"cls\" filter=\"[all[current]field:title[$:/core/ui/PageTemplate]]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;&lt;$link to={{!!title}}&gt;''&lt;$transclude field=\"name\"/&gt;'' - &lt;$transclude field=\"description\"/&gt;&lt;/$link&gt;&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;\n"},"$:/core/ui/ListItemTemplate":{"title":"$:/core/ui/ListItemTemplate","text":"&lt;div class=\"tc-menu-list-item\"&gt;\n&lt;$link /&gt;\n&lt;/div&gt;"},"$:/Manager/ItemMain/Fields":{"title":"$:/Manager/ItemMain/Fields","tags":"$:/tags/Manager/ItemMain","caption":"{{$:/language/Manager/Item/Fields}}","text":"&lt;table&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[all[current]fields[]sort[title]] -text\" template=\"$:/core/ui/TiddlerFieldTemplate\" variable=\"listItem\"/&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/Manager/ItemMain/RawText":{"title":"$:/Manager/ItemMain/RawText","tags":"$:/tags/Manager/ItemMain","caption":"{{$:/language/Manager/Item/RawText}}","text":"&lt;pre&gt;&lt;code&gt;&lt;$view/&gt;&lt;/code&gt;&lt;/pre&gt;\n"},"$:/Manager/ItemMain/WikifiedText":{"title":"$:/Manager/ItemMain/WikifiedText","tags":"$:/tags/Manager/ItemMain","caption":"{{$:/language/Manager/Item/WikifiedText}}","text":"&lt;$transclude mode=\"block\"/&gt;\n"},"$:/Manager/ItemSidebar/Colour":{"title":"$:/Manager/ItemSidebar/Colour","tags":"$:/tags/Manager/ItemSidebar","caption":"{{$:/language/Manager/Item/Colour}}","text":"\\define swatch-styles()\nheight: 1em;\nbackground-color: $(colour)$\n\\end\n\n&lt;$vars colour={{!!color}}&gt;\n&lt;p style=&lt;&lt;swatch-styles&gt;&gt;/&gt;\n&lt;/$vars&gt;\n&lt;p&gt;\n&lt;$edit-text field=\"color\" tag=\"input\" type=\"color\"/&gt; / &lt;$edit-text field=\"color\" tag=\"input\" type=\"text\" size=\"9\"/&gt;\n&lt;/p&gt;\n"},"$:/Manager/ItemSidebar/Icon":{"title":"$:/Manager/ItemSidebar/Icon","tags":"$:/tags/Manager/ItemSidebar","caption":"{{$:/language/Manager/Item/Icon}}","text":"&lt;p&gt;\n&lt;div class=\"tc-manager-icon-editor\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/image-picker\"&gt;&gt; class=\"tc-btn-invisible\"&gt;\n&lt;$transclude tiddler={{!!icon}}&gt;\n{{$:/language/Manager/Item/Icon/None}}\n&lt;/$transclude&gt;\n&lt;/$button&gt;\n&lt;div class=\"tc-block-dropdown-wrapper\" style=\"position: static;\"&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/image-picker\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\" tag=\"div\" class=\"tc-popup\"&gt;\n&lt;div class=\"tc-block-dropdown tc-popup-keep\" style=\"width: 80%; left: 10%; right: 10%; padding: 0.5em;\"&gt;\n&lt;$macrocall $name=\"image-picker-include-tagged-images\" actions=\"\"\"\n&lt;$action-setfield $field=\"icon\" $value=&lt;&lt;imageTitle&gt;&gt;/&gt;\n&lt;$action-deletetiddler $tiddler=&lt;&lt;qualify \"$:/state/popup/image-picker\"&gt;&gt;/&gt;\n\"\"\"/&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/p&gt;\n"},"$:/Manager/ItemSidebar/Tags":{"title":"$:/Manager/ItemSidebar/Tags","tags":"$:/tags/Manager/ItemSidebar","caption":"{{$:/language/Manager/Item/Tags}}","text":"\\whitespace trim\n\\define tag-checkbox-actions()\n&lt;$action-listops\n\t$tiddler=\"$:/config/Manager/RecentTags\"\n\t$subfilter=\"[&lt;tag&gt;] [list[$:/config/Manager/RecentTags]] +[limit[12]]\"\n/&gt;\n\\end\n\n\\define tag-picker-actions()\n&lt;&lt;tag-checkbox-actions&gt;&gt;\n\\end\n\n&lt;p&gt;\n&lt;$list filter=\"[all[current]tags[]] [list[$:/config/Manager/RecentTags]] +[sort[title]] \" variable=\"tag\" storyview=\"pop\"&gt;\n&lt;div&gt;\n&lt;$checkbox tiddler=&lt;&lt;currentTiddler&gt;&gt; tag=&lt;&lt;tag&gt;&gt; actions=&lt;&lt;tag-checkbox-actions&gt;&gt;&gt;\n&lt;$macrocall $name=\"tag-pill\" tag=&lt;&lt;tag&gt;&gt;/&gt;\n&lt;/$checkbox&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;$fieldmangler&gt;\n&lt;$macrocall $name=\"tag-picker\" actions=&lt;&lt;tag-picker-actions&gt;&gt;/&gt;\n&lt;/$fieldmangler&gt;\n&lt;/p&gt;\n"},"$:/Manager/ItemSidebar/Tools":{"title":"$:/Manager/ItemSidebar/Tools","tags":"$:/tags/Manager/ItemSidebar","caption":"{{$:/language/Manager/Item/Tools}}","text":"&lt;p&gt;\n&lt;$button to=&lt;&lt;currentTiddler&gt;&gt;&gt;{{$:/core/images/link}} open&lt;/$button&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;$button message=\"tm-edit-tiddler\" param=&lt;&lt;currentTiddler&gt;&gt;&gt;{{$:/core/images/edit-button}} edit&lt;/$button&gt;\n&lt;/p&gt;\n"},"$:/Manager":{"title":"$:/Manager","icon":"$:/core/images/list","color":"#bbb","text":"\\define lingo-base() $:/language/Manager/\n\n\\define list-item-content-item()\n&lt;div class=\"tc-manager-list-item-content-item\"&gt;\n\t&lt;$vars state-title=\"\"\"$:/state/popup/manager/item/$(listItem)$\"\"\"&gt;\n\t\t&lt;$reveal state=&lt;&lt;state-title&gt;&gt; type=\"match\" text=\"show\" default=\"show\" tag=\"div\"&gt;\n\t\t\t&lt;$button set=&lt;&lt;state-title&gt;&gt; setTo=\"hide\" class=\"tc-btn-invisible tc-manager-list-item-content-item-heading\"&gt;\n\t\t\t\t{{$:/core/images/down-arrow}} &lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; field=\"caption\"/&gt;\n\t\t\t&lt;/$button&gt;\n\t\t&lt;/$reveal&gt;\n\t\t&lt;$reveal state=&lt;&lt;state-title&gt;&gt; type=\"nomatch\" text=\"show\" default=\"show\" tag=\"div\"&gt;\n\t\t\t&lt;$button set=&lt;&lt;state-title&gt;&gt; setTo=\"show\" class=\"tc-btn-invisible tc-manager-list-item-content-item-heading\"&gt;\n\t\t\t\t{{$:/core/images/right-arrow}} &lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; field=\"caption\"/&gt;\n\t\t\t&lt;/$button&gt;\n\t\t&lt;/$reveal&gt;\n\t\t&lt;$reveal state=&lt;&lt;state-title&gt;&gt; type=\"match\" text=\"show\" default=\"show\" tag=\"div\" class=\"tc-manager-list-item-content-item-body\"&gt;\n\t\t\t&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;\n\t\t&lt;/$reveal&gt;\n\t&lt;/$vars&gt;\n&lt;/div&gt;\n\\end\n\n&lt;div class=\"tc-manager-wrapper\"&gt;\n\t&lt;div class=\"tc-manager-controls\"&gt;\n\t\t&lt;div class=\"tc-manager-control\"&gt;\n\t\t\t&lt;&lt;lingo Controls/Show/Prompt&gt;&gt; &lt;$select tiddler=\"$:/config/Manager/Show\" default=\"tiddlers\"&gt;\n\t\t\t\t&lt;option value=\"tiddlers\"&gt;&lt;&lt;lingo Controls/Show/Option/Tiddlers&gt;&gt;&lt;/option&gt;\n\t\t\t\t&lt;option value=\"tags\"&gt;&lt;&lt;lingo Controls/Show/Option/Tags&gt;&gt;&lt;/option&gt;\n\t\t\t&lt;/$select&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"tc-manager-control\"&gt;\n\t\t\t&lt;&lt;lingo Controls/Search/Prompt&gt;&gt; &lt;$edit-text tiddler=\"$:/config/Manager/Filter\" tag=\"input\" default=\"\" placeholder={{$:/language/Manager/Controls/Search/Placeholder}}/&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"tc-manager-control\"&gt;\n\t\t\t&lt;&lt;lingo Controls/FilterByTag/Prompt&gt;&gt; &lt;$select tiddler=\"$:/config/Manager/Tag\" default=\"\"&gt;\n\t\t\t\t&lt;option value=\"\"&gt;&lt;&lt;lingo Controls/FilterByTag/None&gt;&gt;&lt;/option&gt;\n\t\t\t\t&lt;$list filter=\"[!is{$:/config/Manager/System}tags[]!is[system]sort[title]]\" variable=\"tag\"&gt;\n\t\t\t\t\t&lt;option value=&lt;&lt;tag&gt;&gt;&gt;&lt;$text text=&lt;&lt;tag&gt;&gt;/&gt;&lt;/option&gt;\n\t\t\t\t&lt;/$list&gt;\n\t\t\t&lt;/$select&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"tc-manager-control\"&gt;\n\t\t\t&lt;&lt;lingo Controls/Sort/Prompt&gt;&gt; &lt;$select tiddler=\"$:/config/Manager/Sort\" default=\"title\"&gt;\n\t\t\t\t&lt;optgroup label=\"Common\"&gt;\n\t\t\t\t\t&lt;$list filter=\"title modified modifier created creator created\" variable=\"field\"&gt;\n\t\t\t\t\t\t&lt;option value=&lt;&lt;field&gt;&gt;&gt;&lt;$text text=&lt;&lt;field&gt;&gt;/&gt;&lt;/option&gt;\n\t\t\t\t\t&lt;/$list&gt;\n\t\t\t\t&lt;/optgroup&gt;\n\t\t\t\t&lt;optgroup label=\"All\"&gt;\n\t\t\t\t\t&lt;$list filter=\"[all{$:/config/Manager/Show}!is{$:/config/Manager/System}fields[]sort[title]] -title -modified -modifier -created -creator -created\" variable=\"field\"&gt;\n\t\t\t\t\t\t&lt;option value=&lt;&lt;field&gt;&gt;&gt;&lt;$text text=&lt;&lt;field&gt;&gt;/&gt;&lt;/option&gt;\n\t\t\t\t\t&lt;/$list&gt;\n\t\t\t\t&lt;/optgroup&gt;\n\t\t\t&lt;/$select&gt;\n\t\t\t&lt;$checkbox tiddler=\"$:/config/Manager/Order\" field=\"text\" checked=\"reverse\" unchecked=\"forward\" default=\"forward\"&gt;\n\t\t\t\t&lt;&lt;lingo Controls/Order/Prompt&gt;&gt;\n\t\t\t&lt;/$checkbox&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"tc-manager-control\"&gt;\n\t\t\t&lt;$checkbox tiddler=\"$:/config/Manager/System\" field=\"text\" checked=\"\" unchecked=\"system\" default=\"system\"&gt;\n\t\t\t\t{{$:/language/SystemTiddlers/Include/Prompt}}\n\t\t\t&lt;/$checkbox&gt;\n\t\t&lt;/div&gt;\n\t&lt;/div&gt;\n\t&lt;div class=\"tc-manager-list\"&gt;\n\t\t&lt;$list filter=\"[all{$:/config/Manager/Show}!is{$:/config/Manager/System}search{$:/config/Manager/Filter}tag:strict{$:/config/Manager/Tag}sort{$:/config/Manager/Sort}order{$:/config/Manager/Order}]\"&gt;\n\t\t\t&lt;$vars transclusion=&lt;&lt;currentTiddler&gt;&gt;&gt;\n\t\t\t\t&lt;div style=\"tc-manager-list-item\"&gt;\n\t\t\t\t\t&lt;$button popup=&lt;&lt;qualify \"$:/state/manager/popup\"&gt;&gt; class=\"tc-btn-invisible tc-manager-list-item-heading\" selectedClass=\"tc-manager-list-item-heading-selected\"&gt;\n\t\t\t\t\t\t&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n\t\t\t\t\t&lt;/$button&gt;\n\t\t\t\t\t&lt;$reveal state=&lt;&lt;qualify \"$:/state/manager/popup\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\" tag=\"div\" class=\"tc-manager-list-item-content tc-popup-handle\"&gt;\n\t\t\t\t\t\t&lt;div class=\"tc-manager-list-item-content-tiddler\"&gt;\n\t\t\t\t\t\t\t&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Manager/ItemMain]!has[draft.of]]\" variable=\"listItem\"&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;list-item-content-item&gt;&gt;\n\t\t\t\t\t\t\t&lt;/$list&gt;\n\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t&lt;div class=\"tc-manager-list-item-content-sidebar\"&gt;\n\t\t\t\t\t\t\t&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Manager/ItemSidebar]!has[draft.of]]\" variable=\"listItem\"&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;list-item-content-item&gt;&gt;\n\t\t\t\t\t\t\t&lt;/$list&gt;\n\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t&lt;/$reveal&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;/$vars&gt;\n\t\t&lt;/$list&gt;\n\t&lt;/div&gt;\n&lt;/div&gt;\n"},"$:/core/ui/MissingTemplate":{"title":"$:/core/ui/MissingTemplate","text":"&lt;div class=\"tc-tiddler-missing\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/missing\"&gt;&gt; class=\"tc-btn-invisible tc-missing-tiddler-label\"&gt;\n&lt;$view field=\"title\" format=\"text\" /&gt;\n&lt;/$button&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/missing\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;hr&gt;\n&lt;$list filter=\"[all[current]backlinks[]sort[title]]\" template=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n"},"$:/core/ui/MoreSideBar/All":{"title":"$:/core/ui/MoreSideBar/All","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/All/Caption}}","text":"&lt;$list filter={{$:/core/Filters/AllTiddlers!!filter}} template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/Drafts":{"title":"$:/core/ui/MoreSideBar/Drafts","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Drafts/Caption}}","text":"&lt;$list filter={{$:/core/Filters/Drafts!!filter}} template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/Explorer":{"title":"$:/core/ui/MoreSideBar/Explorer","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Explorer/Caption}}","text":"&lt;&lt;tree \"$:/\"&gt;&gt;\n"},"$:/core/ui/MoreSideBar/Missing":{"title":"$:/core/ui/MoreSideBar/Missing","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Missing/Caption}}","text":"&lt;$list filter={{$:/core/Filters/Missing!!filter}} template=\"$:/core/ui/MissingTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/Orphans":{"title":"$:/core/ui/MoreSideBar/Orphans","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Orphans/Caption}}","text":"&lt;$list filter={{$:/core/Filters/Orphans!!filter}} template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/Plugins/Languages":{"title":"$:/core/ui/MoreSideBar/Plugins/Languages","tags":"$:/tags/MoreSideBar/Plugins","caption":"{{$:/language/ControlPanel/Plugins/Languages/Caption}}","text":"&lt;$list filter=\"[!has[draft.of]plugin-type[language]sort[description]]\" template=\"$:/core/ui/PluginListItemTemplate\" emptyMessage={{$:/language/ControlPanel/Plugins/Empty/Hint}}/&gt;\n"},"$:/core/ui/MoreSideBar/Plugins/Plugins":{"title":"$:/core/ui/MoreSideBar/Plugins/Plugins","tags":"$:/tags/MoreSideBar/Plugins","caption":"{{$:/language/ControlPanel/Plugins/Plugins/Caption}}","text":"&lt;$list filter=\"[!has[draft.of]plugin-type[plugin]sort[description]]\" template=\"$:/core/ui/PluginListItemTemplate\" emptyMessage={{$:/language/ControlPanel/Plugins/Empty/Hint}}&gt;&gt;/&gt;\n"},"$:/core/ui/MoreSideBar/Plugins/Theme":{"title":"$:/core/ui/MoreSideBar/Plugins/Theme","tags":"$:/tags/MoreSideBar/Plugins","caption":"{{$:/language/ControlPanel/Plugins/Themes/Caption}}","text":"&lt;$list filter=\"[!has[draft.of]plugin-type[theme]sort[description]]\" template=\"$:/core/ui/PluginListItemTemplate\" emptyMessage={{$:/language/ControlPanel/Plugins/Empty/Hint}}/&gt;\n"},"$:/core/ui/MoreSideBar/Plugins":{"title":"$:/core/ui/MoreSideBar/Plugins","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/ControlPanel/Plugins/Caption}}","text":"\n{{$:/language/ControlPanel/Plugins/Installed/Hint}}\n\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/MoreSideBar/Plugins]!has[draft.of]]\" default=\"$:/core/ui/MoreSideBar/Plugins/Plugins\" explicitState=\"$:/state/tab-1163638994\"/&gt;\n"},"$:/core/ui/MoreSideBar/Recent":{"title":"$:/core/ui/MoreSideBar/Recent","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Recent/Caption}}","text":"&lt;$macrocall $name=\"timeline\" format={{$:/language/RecentChanges/DateFormat}}/&gt;\n"},"$:/core/ui/MoreSideBar/Shadows":{"title":"$:/core/ui/MoreSideBar/Shadows","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Shadows/Caption}}","text":"&lt;$list filter={{$:/core/Filters/ShadowTiddlers!!filter}} template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/System":{"title":"$:/core/ui/MoreSideBar/System","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/System/Caption}}","text":"&lt;$list filter={{$:/core/Filters/SystemTiddlers!!filter}} template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/MoreSideBar/Tags":{"title":"$:/core/ui/MoreSideBar/Tags","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Tags/Caption}}","text":"&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"\"&gt;\n\n{{$:/core/ui/Buttons/tag-manager}}\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;$list filter={{$:/core/Filters/AllTags!!filter}}&gt;\n\n&lt;$transclude tiddler=\"$:/core/ui/TagTemplate\"/&gt;\n\n&lt;/$list&gt;\n\n&lt;hr class=\"tc-untagged-separator\"&gt;\n\n{{$:/core/ui/UntaggedTemplate}}\n"},"$:/core/ui/MoreSideBar/Types":{"title":"$:/core/ui/MoreSideBar/Types","tags":"$:/tags/MoreSideBar","caption":"{{$:/language/SideBar/Types/Caption}}","text":"&lt;$list filter={{$:/core/Filters/TypedTiddlers!!filter}}&gt;\n&lt;div class=\"tc-menu-list-item\"&gt;\n&lt;$view field=\"type\"/&gt;\n&lt;$list filter=\"[type{!!type}!is[system]sort[title]]\"&gt;\n&lt;div class=\"tc-menu-list-subitem\"&gt;\n&lt;$link to={{!!title}}&gt;&lt;$view field=\"title\"/&gt;&lt;/$link&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/Buttons/advanced-search":{"title":"$:/core/ui/Buttons/advanced-search","tags":"$:/tags/PageControls","caption":"{{$:/core/images/advanced-search-button}} {{$:/language/Buttons/AdvancedSearch/Caption}}","description":"{{$:/language/Buttons/AdvancedSearch/Hint}}","text":"\\whitespace trim\n\\define advanced-search-button(class)\n\\whitespace trim\n&lt;$button to=\"$:/AdvancedSearch\" tooltip={{$:/language/Buttons/AdvancedSearch/Hint}} aria-label={{$:/language/Buttons/AdvancedSearch/Caption}} class=\"\"\"$(tv-config-toolbar-class)$ $class$\"\"\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/advanced-search-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/AdvancedSearch/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[list[$:/StoryList]] +[field:title[$:/AdvancedSearch]]\" emptyMessage=&lt;&lt;advanced-search-button&gt;&gt;&gt;\n&lt;&lt;advanced-search-button \"tc-selected\"&gt;&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/Buttons/close-all":{"title":"$:/core/ui/Buttons/close-all","tags":"$:/tags/PageControls","caption":"{{$:/core/images/close-all-button}} {{$:/language/Buttons/CloseAll/Caption}}","description":"{{$:/language/Buttons/CloseAll/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-close-all-tiddlers\" tooltip={{$:/language/Buttons/CloseAll/Hint}} aria-label={{$:/language/Buttons/CloseAll/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/close-all-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/CloseAll/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/control-panel":{"title":"$:/core/ui/Buttons/control-panel","tags":"$:/tags/PageControls","caption":"{{$:/core/images/options-button}} {{$:/language/Buttons/ControlPanel/Caption}}","description":"{{$:/language/Buttons/ControlPanel/Hint}}","text":"\\whitespace trim\n\\define control-panel-button(class)\n\\whitespace trim\n&lt;$button to=\"$:/ControlPanel\" tooltip={{$:/language/Buttons/ControlPanel/Hint}} aria-label={{$:/language/Buttons/ControlPanel/Caption}} class=\"\"\"$(tv-config-toolbar-class)$ $class$\"\"\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/options-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/ControlPanel/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[list[$:/StoryList]] +[field:title[$:/ControlPanel]]\" emptyMessage=&lt;&lt;control-panel-button&gt;&gt;&gt;\n&lt;&lt;control-panel-button \"tc-selected\"&gt;&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/Buttons/encryption":{"title":"$:/core/ui/Buttons/encryption","tags":"$:/tags/PageControls","caption":"{{$:/core/images/locked-padlock}} {{$:/language/Buttons/Encryption/Caption}}","description":"{{$:/language/Buttons/Encryption/Hint}}","text":"\\whitespace trim\n&lt;$reveal type=\"match\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\n&lt;$button message=\"tm-clear-password\" tooltip={{$:/language/Buttons/Encryption/ClearPassword/Hint}} aria-label={{$:/language/Buttons/Encryption/ClearPassword/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/locked-padlock}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Encryption/ClearPassword/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"nomatch\" state=\"$:/isEncrypted\" text=\"yes\"&gt;\n&lt;$button message=\"tm-set-password\" tooltip={{$:/language/Buttons/Encryption/SetPassword/Hint}} aria-label={{$:/language/Buttons/Encryption/SetPassword/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/unlocked-padlock}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Encryption/SetPassword/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/export-page":{"title":"$:/core/ui/Buttons/export-page","tags":"$:/tags/PageControls","caption":"{{$:/core/images/export-button}} {{$:/language/Buttons/ExportPage/Caption}}","description":"{{$:/language/Buttons/ExportPage/Hint}}","text":"&lt;$macrocall $name=\"exportButton\" exportFilter=\"[!is[system]sort[title]]\" lingoBase=\"$:/language/Buttons/ExportPage/\"/&gt;"},"$:/core/ui/Buttons/fold-all":{"title":"$:/core/ui/Buttons/fold-all","tags":"$:/tags/PageControls","caption":"{{$:/core/images/fold-all-button}} {{$:/language/Buttons/FoldAll/Caption}}","description":"{{$:/language/Buttons/FoldAll/Hint}}","text":"\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/FoldAll/Hint}} aria-label={{$:/language/Buttons/FoldAll/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-fold-all-tiddlers\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedStatePrefix=\"$:/state/folded/\"/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\" variable=\"listItem\"&gt;\n{{$:/core/images/fold-all-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/FoldAll/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/full-screen":{"title":"$:/core/ui/Buttons/full-screen","tags":"$:/tags/PageControls","caption":"{{$:/core/images/full-screen-button}} {{$:/language/Buttons/FullScreen/Caption}}","description":"{{$:/language/Buttons/FullScreen/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-full-screen\" tooltip={{$:/language/Buttons/FullScreen/Hint}} aria-label={{$:/language/Buttons/FullScreen/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/full-screen-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/FullScreen/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/home":{"title":"$:/core/ui/Buttons/home","tags":"$:/tags/PageControls","caption":"{{$:/core/images/home-button}} {{$:/language/Buttons/Home/Caption}}","description":"{{$:/language/Buttons/Home/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-home\" tooltip={{$:/language/Buttons/Home/Hint}} aria-label={{$:/language/Buttons/Home/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/home-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Home/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/import":{"title":"$:/core/ui/Buttons/import","tags":"$:/tags/PageControls","caption":"{{$:/core/images/import-button}} {{$:/language/Buttons/Import/Caption}}","description":"{{$:/language/Buttons/Import/Hint}}","text":"\\whitespace trim\n&lt;div class=\"tc-file-input-wrapper\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Import/Hint}} aria-label={{$:/language/Buttons/Import/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/import-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Import/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;$browse tooltip={{$:/language/Buttons/Import/Hint}}/&gt;\n&lt;/div&gt;"},"$:/core/ui/Buttons/language":{"title":"$:/core/ui/Buttons/language","tags":"$:/tags/PageControls","caption":"{{$:/core/images/globe}} {{$:/language/Buttons/Language/Caption}}","description":"{{$:/language/Buttons/Language/Hint}}","text":"\\whitespace trim\n\\define flag-title()\n$(languagePluginTitle)$/icon\n\\end\n&lt;span class=\"tc-popup-keep\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/language\"&gt;&gt; tooltip={{$:/language/Buttons/Language/Hint}} aria-label={{$:/language/Buttons/Language/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-image-button\"&gt;\n&lt;$set name=\"languagePluginTitle\" value={{$:/language}}&gt;\n&lt;$image source=&lt;&lt;flag-title&gt;&gt;/&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Language/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/span&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/language\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n{{$:/snippets/languageswitcher}}\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/manager":{"title":"$:/core/ui/Buttons/manager","tags":"$:/tags/PageControls","caption":"{{$:/core/images/list}} {{$:/language/Buttons/Manager/Caption}}","description":"{{$:/language/Buttons/Manager/Hint}}","text":"\\whitespace trim\n\\define manager-button(class)\n\\whitespace trim\n&lt;$button to=\"$:/Manager\" tooltip={{$:/language/Buttons/Manager/Hint}} aria-label={{$:/language/Buttons/Manager/Caption}} class=\"\"\"$(tv-config-toolbar-class)$ $class$\"\"\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/list}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Manager/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[list[$:/StoryList]] +[field:title[$:/Manager]]\" emptyMessage=&lt;&lt;manager-button&gt;&gt;&gt;\n&lt;&lt;manager-button \"tc-selected\"&gt;&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/Buttons/more-page-actions":{"title":"$:/core/ui/Buttons/more-page-actions","tags":"$:/tags/PageControls","caption":"{{$:/core/images/down-arrow}} {{$:/language/Buttons/More/Caption}}","description":"{{$:/language/Buttons/More/Hint}}","text":"\\whitespace trim\n\\define config-title()\n$:/config/PageControlButtons/Visibility/$(listItem)$\n\\end\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/more\"&gt;&gt; tooltip={{$:/language/Buttons/More/Hint}} aria-label={{$:/language/Buttons/More/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/More/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/more\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n\n&lt;div class=\"tc-drop-down\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"tc-btn-invisible\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/PageControls]!has[draft.of]] -[[$:/core/ui/Buttons/more-page-actions]]\" variable=\"listItem\"&gt;\n\n&lt;$reveal type=\"match\" state=&lt;&lt;config-title&gt;&gt; text=\"hide\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" filter=\"[&lt;tv-config-toolbar-class&gt;] [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]]\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"inline\"/&gt;\n\n&lt;/$set&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$list&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/div&gt;\n\n&lt;/$reveal&gt;"},"$:/core/ui/Buttons/new-image":{"title":"$:/core/ui/Buttons/new-image","tags":"$:/tags/PageControls","caption":"{{$:/core/images/new-image-button}} {{$:/language/Buttons/NewImage/Caption}}","description":"{{$:/language/Buttons/NewImage/Hint}}","text":"\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/NewImage/Hint}} aria-label={{$:/language/Buttons/NewImage/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; actions={{$:/core/ui/Actions/new-image}}&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/new-image-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/NewImage/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/Buttons/new-journal":{"title":"$:/core/ui/Buttons/new-journal","tags":"$:/tags/PageControls","caption":"{{$:/core/images/new-journal-button}} {{$:/language/Buttons/NewJournal/Caption}}","description":"{{$:/language/Buttons/NewJournal/Hint}}","text":"\\whitespace trim\n\\define journalButton()\n\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/NewJournal/Hint}} aria-label={{$:/language/Buttons/NewJournal/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; actions={{$:/core/ui/Actions/new-journal}}&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/new-journal-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/NewJournal/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n&lt;&lt;journalButton&gt;&gt;\n"},"$:/core/ui/Buttons/new-tiddler":{"title":"$:/core/ui/Buttons/new-tiddler","tags":"$:/tags/PageControls","caption":"{{$:/core/images/new-button}} {{$:/language/Buttons/NewTiddler/Caption}}","description":"{{$:/language/Buttons/NewTiddler/Hint}}","text":"\\whitespace trim\n&lt;$button actions={{$:/core/ui/Actions/new-tiddler}} tooltip={{$:/language/Buttons/NewTiddler/Hint}} aria-label={{$:/language/Buttons/NewTiddler/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/new-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/NewTiddler/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/Buttons/palette":{"title":"$:/core/ui/Buttons/palette","tags":"$:/tags/PageControls","caption":"{{$:/core/images/palette}} {{$:/language/Buttons/Palette/Caption}}","description":"{{$:/language/Buttons/Palette/Hint}}","text":"\\whitespace trim\n&lt;span class=\"tc-popup-keep\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/palette\"&gt;&gt; tooltip={{$:/language/Buttons/Palette/Hint}} aria-label={{$:/language/Buttons/Palette/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/palette}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Palette/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/span&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/palette\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\" style=\"font-size:0.7em;\"&gt;\n{{$:/snippets/paletteswitcher}}\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/print":{"title":"$:/core/ui/Buttons/print","tags":"$:/tags/PageControls","caption":"{{$:/core/images/print-button}} {{$:/language/Buttons/Print/Caption}}","description":"{{$:/language/Buttons/Print/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-print\" tooltip={{$:/language/Buttons/Print/Hint}} aria-label={{$:/language/Buttons/Print/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/print-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Print/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/refresh":{"title":"$:/core/ui/Buttons/refresh","tags":"$:/tags/PageControls","caption":"{{$:/core/images/refresh-button}} {{$:/language/Buttons/Refresh/Caption}}","description":"{{$:/language/Buttons/Refresh/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-browser-refresh\" tooltip={{$:/language/Buttons/Refresh/Hint}} aria-label={{$:/language/Buttons/Refresh/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/refresh-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Refresh/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/save-wiki":{"title":"$:/core/ui/Buttons/save-wiki","tags":"$:/tags/PageControls","caption":"{{$:/core/images/save-button}} {{$:/language/Buttons/SaveWiki/Caption}}","description":"{{$:/language/Buttons/SaveWiki/Hint}}","text":"\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/SaveWiki/Hint}} aria-label={{$:/language/Buttons/SaveWiki/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$wikify name=\"site-title\" text={{$:/config/SaveWikiButton/Filename}}&gt;\n&lt;$action-sendmessage $message=\"tm-save-wiki\" $param={{$:/config/SaveWikiButton/Template}} filename=&lt;&lt;site-title&gt;&gt;/&gt;\n&lt;/$wikify&gt;\n&lt;span class=\"tc-dirty-indicator\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/save-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/SaveWiki/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/span&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/storyview":{"title":"$:/core/ui/Buttons/storyview","tags":"$:/tags/PageControls","caption":"{{$:/core/images/storyview-classic}} {{$:/language/Buttons/StoryView/Caption}}","description":"{{$:/language/Buttons/StoryView/Hint}}","text":"\\whitespace trim\n\\define icon()\n$:/core/images/storyview-$(storyview)$\n\\end\n&lt;span class=\"tc-popup-keep\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/storyview\"&gt;&gt; tooltip={{$:/language/Buttons/StoryView/Hint}} aria-label={{$:/language/Buttons/StoryView/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n&lt;$set name=\"storyview\" value={{$:/view}}&gt;\n&lt;$transclude tiddler=&lt;&lt;icon&gt;&gt;/&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/StoryView/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/span&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/storyview\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n{{$:/snippets/viewswitcher}}\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/tag-manager":{"title":"$:/core/ui/Buttons/tag-manager","tags":"$:/tags/PageControls","caption":"{{$:/core/images/tag-button}} {{$:/language/Buttons/TagManager/Caption}}","description":"{{$:/language/Buttons/TagManager/Hint}}","text":"\\whitespace trim\n\\define control-panel-button(class)\n\\whitespace trim\n&lt;$button to=\"$:/TagManager\" tooltip={{$:/language/Buttons/TagManager/Hint}} aria-label={{$:/language/Buttons/TagManager/Caption}} class=\"\"\"$(tv-config-toolbar-class)$ $class$\"\"\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/tag-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/TagManager/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n\n&lt;$list filter=\"[list[$:/StoryList]] +[field:title[$:/TagManager]]\" emptyMessage=&lt;&lt;control-panel-button&gt;&gt;&gt;\n&lt;&lt;control-panel-button \"tc-selected\"&gt;&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/Buttons/theme":{"title":"$:/core/ui/Buttons/theme","tags":"$:/tags/PageControls","caption":"{{$:/core/images/theme-button}} {{$:/language/Buttons/Theme/Caption}}","description":"{{$:/language/Buttons/Theme/Hint}}","text":"\\whitespace trim\n&lt;span class=\"tc-popup-keep\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/theme\"&gt;&gt; tooltip={{$:/language/Buttons/Theme/Hint}} aria-label={{$:/language/Buttons/Theme/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/theme-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text={{$:/language/Buttons/Theme/Caption}}/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/span&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/theme\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$linkcatcher to=\"$:/theme\"&gt;\n{{$:/snippets/themeswitcher}}\n&lt;/$linkcatcher&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/timestamp":{"title":"$:/core/ui/Buttons/timestamp","tags":"$:/tags/PageControls","caption":"{{$:/core/images/timestamp-on}} {{$:/language/Buttons/Timestamp/Caption}}","description":"{{$:/language/Buttons/Timestamp/Hint}}","text":"\\whitespace trim\n&lt;$reveal type=\"nomatch\" state=\"$:/config/TimestampDisable\" text=\"yes\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Timestamp/On/Hint}} aria-label={{$:/language/Buttons/Timestamp/On/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-setfield $tiddler=\"$:/config/TimestampDisable\" $value=\"yes\"/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/timestamp-on}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Timestamp/On/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=\"$:/config/TimestampDisable\" text=\"yes\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Timestamp/Off/Hint}} aria-label={{$:/language/Buttons/Timestamp/Off/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-setfield $tiddler=\"$:/config/TimestampDisable\" $value=\"no\"/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/timestamp-off}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Timestamp/Off/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/unfold-all":{"title":"$:/core/ui/Buttons/unfold-all","tags":"$:/tags/PageControls","caption":"{{$:/core/images/unfold-all-button}} {{$:/language/Buttons/UnfoldAll/Caption}}","description":"{{$:/language/Buttons/UnfoldAll/Hint}}","text":"\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/UnfoldAll/Hint}} aria-label={{$:/language/Buttons/UnfoldAll/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-unfold-all-tiddlers\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedStatePrefix=\"$:/state/folded/\"/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\" variable=\"listItem\"&gt;\n{{$:/core/images/unfold-all-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/UnfoldAll/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/PageTemplate/pagecontrols":{"title":"$:/core/ui/PageTemplate/pagecontrols","text":"\\whitespace trim\n\\define config-title()\n$:/config/PageControlButtons/Visibility/$(listItem)$\n\\end\n&lt;div class=\"tc-page-controls\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/PageControls]!has[draft.of]]\" variable=\"listItem\"&gt;\n&lt;$set name=\"hidden\" value=&lt;&lt;config-title&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;hidden&gt;!text[hide]]\" storyview=\"pop\" variable=\"ignore\"&gt;\n&lt;$set name=\"tv-config-toolbar-class\" filter=\"[&lt;tv-config-toolbar-class&gt;] [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]]\"&gt;\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"inline\"/&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n"},"$:/core/ui/PageStylesheet":{"title":"$:/core/ui/PageStylesheet","text":"\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\n&lt;$set name=\"currentTiddler\" value={{$:/language}}&gt;\n\n&lt;$set name=\"languageTitle\" value={{!!name}}&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Stylesheet]!has[draft.of]]\"&gt;\n&lt;$transclude mode=\"block\"/&gt;\n&lt;/$list&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/PageTemplate/alerts":{"title":"$:/core/ui/PageTemplate/alerts","tags":"$:/tags/PageTemplate","text":"&lt;div class=\"tc-alerts\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Alert]!has[draft.of]]\" template=\"$:/core/ui/AlertTemplate\" storyview=\"pop\"/&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/PageTemplate/drafts":{"title":"$:/core/ui/PageTemplate/drafts","tags":"$:/tags/PageTemplate","text":"\\whitespace trim\n&lt;$reveal state=\"$:/status/IsReadOnly\" type=\"nomatch\" text=\"yes\" tag=\"div\" class=\"tc-drafts-list\"&gt;\n&lt;$list filter=\"[has[draft.of]!sort[modified]] -[list[$:/StoryList]]\"&gt;\n&lt;$link&gt;\n{{$:/core/images/edit-button}} &lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;/$link&gt;\n&lt;/$list&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/PageTemplate/pluginreloadwarning":{"title":"$:/core/ui/PageTemplate/pluginreloadwarning","tags":"$:/tags/PageTemplate","text":"\\define lingo-base() $:/language/\n\n&lt;$list filter=\"[{$:/status/RequireReloadDueToPluginChange}match[yes]]\"&gt;\n\n&lt;$reveal type=\"nomatch\" state=\"$:/temp/HidePluginWarning\" text=\"yes\"&gt;\n\n&lt;div class=\"tc-plugin-reload-warning\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"\"&gt;\n\n&lt;&lt;lingo PluginReloadWarning&gt;&gt; &lt;$button set=\"$:/temp/HidePluginWarning\" setTo=\"yes\" class=\"tc-btn-invisible\"&gt;{{$:/core/images/close-button}}&lt;/$button&gt;\n\n&lt;/$set&gt;\n\n&lt;/div&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/PageTemplate/sidebar":{"title":"$:/core/ui/PageTemplate/sidebar","tags":"$:/tags/PageTemplate","text":"\\whitespace trim\n\\define config-title()\n$:/config/SideBarSegments/Visibility/$(listItem)$\n\\end\n\n&lt;$scrollable fallthrough=\"no\" class=\"tc-sidebar-scrollable\"&gt;\n\n&lt;div class=\"tc-sidebar-header\"&gt;\n\n&lt;$reveal state=\"$:/state/sidebar\" type=\"match\" text=\"yes\" default=\"yes\" retain=\"yes\" animate=\"yes\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SideBarSegment]!has[draft.of]]\" variable=\"listItem\"&gt;\n\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;config-title&gt;&gt; text=\"hide\"  tag=\"div\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"block\"/&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/div&gt;\n\n&lt;/$scrollable&gt;\n"},"$:/core/ui/PageTemplate/story":{"title":"$:/core/ui/PageTemplate/story","tags":"$:/tags/PageTemplate","text":"\\whitespace trim\n&lt;section class=\"tc-story-river\"&gt;\n\n&lt;section class=\"story-backdrop\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/AboveStory]!has[draft.of]]\"&gt;\n\n&lt;$transclude/&gt;\n\n&lt;/$list&gt;\n\n&lt;/section&gt;\n\n&lt;$list filter=\"[list[$:/StoryList]]\" history=\"$:/HistoryList\" template={{$:/config/ui/ViewTemplate}} editTemplate={{$:/config/ui/EditTemplate}} storyview={{$:/view}} emptyMessage={{$:/config/EmptyStoryMessage}}/&gt;\n\n&lt;section class=\"story-frontdrop\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/BelowStory]!has[draft.of]]\"&gt;\n\n&lt;$transclude/&gt;\n\n&lt;/$list&gt;\n\n&lt;/section&gt;\n\n&lt;/section&gt;\n"},"$:/core/ui/PageTemplate/topleftbar":{"title":"$:/core/ui/PageTemplate/topleftbar","tags":"$:/tags/PageTemplate","text":"&lt;span class=\"tc-topbar tc-topbar-left\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TopLeftBar]!has[draft.of]]\" variable=\"listItem\" storyview=\"pop\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"inline\"/&gt;\n\n&lt;/$list&gt;\n\n&lt;/span&gt;\n"},"$:/core/ui/PageTemplate/toprightbar":{"title":"$:/core/ui/PageTemplate/toprightbar","tags":"$:/tags/PageTemplate","text":"&lt;span class=\"tc-topbar tc-topbar-right\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TopRightBar]!has[draft.of]]\" variable=\"listItem\" storyview=\"pop\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"inline\"/&gt;\n\n&lt;/$list&gt;\n\n&lt;/span&gt;\n"},"$:/core/ui/PageTemplate":{"title":"$:/core/ui/PageTemplate","name":"{{$:/language/PageTemplate/Name}}","description":"{{$:/language/PageTemplate/Description}}","text":"\\whitespace trim\n\\define containerClasses()\ntc-page-container tc-page-view-$(storyviewTitle)$ tc-language-$(languageTitle)$\n\\end\n\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\n\n&lt;$vars\n\ttv-config-toolbar-icons={{$:/config/Toolbar/Icons}}\n\ttv-config-toolbar-text={{$:/config/Toolbar/Text}}\n\ttv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}}\n\ttv-enable-drag-and-drop={{$:/config/DragAndDrop/Enable}}\n\ttv-show-missing-links={{$:/config/MissingLinks}}\n\tstoryviewTitle={{$:/view}}\n\tlanguageTitle={{{ [{$:/language}get[name]] }}}&gt;\n\n&lt;div class=&lt;&lt;containerClasses&gt;&gt;&gt;\n\n&lt;$navigator story=\"$:/StoryList\" history=\"$:/HistoryList\" openLinkFromInsideRiver={{$:/config/Navigation/openLinkFromInsideRiver}} openLinkFromOutsideRiver={{$:/config/Navigation/openLinkFromOutsideRiver}} relinkOnRename={{$:/config/RelinkOnRename}}&gt;\n\n&lt;$dropzone enable=&lt;&lt;tv-enable-drag-and-drop&gt;&gt;&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/PageTemplate]!has[draft.of]]\" variable=\"listItem\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;\n\n&lt;/$list&gt;\n\n&lt;/$dropzone&gt;\n\n&lt;/$navigator&gt;\n\n&lt;/div&gt;\n\n&lt;/$vars&gt;\n"},"$:/PaletteManager":{"title":"$:/PaletteManager","text":"\\define lingo-base() $:/language/ControlPanel/Palette/Editor/\n\\define describePaletteColour(colour)\n&lt;$transclude tiddler=\"$:/language/Docs/PaletteColours/$colour$\"&gt;&lt;$text text=\"$colour$\"/&gt;&lt;/$transclude&gt;\n\\end\n\\define edit-colour-placeholder()\n edit $(colourName)$\n\\end\n\\define colour-tooltip(showhide) $showhide$ editor for $(newColourName)$ \n\\define resolve-colour(macrocall)\n\\import $:/core/macros/utils\n\\whitespace trim\n&lt;$wikify name=\"name\" text=\"\"\"$macrocall$\"\"\"&gt;\n&lt;&lt;name&gt;&gt;\n&lt;/$wikify&gt;\n\\end\n\\define delete-colour-index-actions() &lt;$action-setfield $index=&lt;&lt;colourName&gt;&gt;/&gt;\n\\define palette-manager-colour-row-segment()\n\\whitespace trim\n&lt;$edit-text index=&lt;&lt;colourName&gt;&gt; tag=\"input\" placeholder=&lt;&lt;edit-colour-placeholder&gt;&gt; default=\"\"/&gt;\n&lt;br&gt;\n&lt;$edit-text index=&lt;&lt;colourName&gt;&gt; type=\"color\" tag=\"input\" class=\"tc-palette-manager-colour-input\"/&gt;\n&lt;$list filter=\"[&lt;currentTiddler&gt;getindex&lt;colourName&gt;removeprefix[&lt;&lt;]removesuffix[&gt;&gt;]] [&lt;currentTiddler&gt;getindex&lt;colourName&gt;removeprefix[&lt;$]removesuffix[/&gt;]]\" variable=\"ignore\"&gt;\n&lt;$set name=\"state\" value={{{ [[$:/state/palettemanager/]addsuffix&lt;currentTiddler&gt;addsuffix[/]addsuffix&lt;colourName&gt;] }}}&gt;\n&lt;$wikify name=\"newColourName\" text=\"\"\"&lt;$macrocall $name=\"resolve-colour\" macrocall={{{ [&lt;currentTiddler&gt;getindex&lt;colourName&gt;] }}}/&gt;\"\"\"&gt;\n&lt;$reveal state=&lt;&lt;state&gt;&gt; type=\"nomatch\" text=\"show\"&gt;\n&lt;$button tooltip=&lt;&lt;colour-tooltip show&gt;&gt; aria-label=&lt;&lt;colour-tooltip show&gt;&gt; class=\"tc-btn-invisible\" set=&lt;&lt;state&gt;&gt; setTo=\"show\"&gt;{{$:/core/images/down-arrow}}&lt;$text text=&lt;&lt;newColourName&gt;&gt; class=\"tc-small-gap-left\"/&gt;&lt;/$button&gt;&lt;br&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=&lt;&lt;state&gt;&gt; type=\"match\" text=\"show\"&gt;\n&lt;$button tooltip=&lt;&lt;colour-tooltip hide&gt;&gt; aria-label=&lt;&lt;colour-tooltip show&gt;&gt; class=\"tc-btn-invisible\" actions=\"\"\"&lt;$action-deletetiddler $tiddler=&lt;&lt;state&gt;&gt;/&gt;\"\"\"&gt;{{$:/core/images/up-arrow}}&lt;$text text=&lt;&lt;newColourName&gt;&gt; class=\"tc-small-gap-left\"/&gt;&lt;/$button&gt;&lt;br&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=&lt;&lt;state&gt;&gt; type=\"match\" text=\"show\"&gt;\n&lt;$set name=\"colourName\" value=&lt;&lt;newColourName&gt;&gt;&gt;\n&lt;br&gt;\n&lt;&lt;palette-manager-colour-row-segment&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;/$set&gt;\n&lt;/$reveal&gt;\n&lt;/$wikify&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n\\end\n\\define palette-manager-colour-row()\n\\whitespace trim\n&lt;tr&gt;\n&lt;td&gt;\n&lt;span style=\"float:right;\"&gt;\n&lt;$button tooltip={{$:/language/ControlPanel/Palette/Editor/Delete/Hint}} aria-label={{$:/language/ControlPanel/Palette/Editor/Delete/Hint}} class=\"tc-btn-invisible\" actions=&lt;&lt;delete-colour-index-actions&gt;&gt;&gt;\n{{$:/core/images/delete-button}}&lt;/$button&gt;\n&lt;/span&gt;\n''&lt;$macrocall $name=\"describePaletteColour\" colour=&lt;&lt;colourName&gt;&gt;/&gt;''&lt;br/&gt;\n&lt;$macrocall $name=\"colourName\" $output=\"text/plain\"/&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;&lt;palette-manager-colour-row-segment&gt;&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n\\end\n\\define palette-manager-table()\n\\whitespace trim\n&lt;table&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Palette]indexes[]]\" variable=\"colourName\"&gt;\n&lt;$list filter=\"[&lt;currentTiddler&gt;indexes[]removeprefix&lt;colourName&gt;suffix[]]\" variable=\"ignore\" emptyMessage=\"\"\"\n&lt;$list filter=\"[{$:/state/palettemanager/showexternal}removeprefix[yes]suffix[]]\" variable=\"ignore\"&gt;\n&lt;&lt;palette-manager-colour-row&gt;&gt;\n&lt;/$list&gt;\n\"\"\"&gt;\n&lt;&lt;palette-manager-colour-row&gt;&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n\\end\n&lt;$set name=\"currentTiddler\" value={{$:/palette}}&gt;\n\n&lt;&lt;lingo Prompt&gt;&gt; &lt;$link to={{$:/palette}}&gt;&lt;$macrocall $name=\"currentTiddler\" $output=\"text/plain\"/&gt;&lt;/$link&gt;\n\n&lt;$list filter=\"[all[current]is[shadow]is[tiddler]]\" variable=\"listItem\"&gt;\n&lt;&lt;lingo Prompt/Modified&gt;&gt;\n&lt;$button message=\"tm-delete-tiddler\" param={{$:/palette}}&gt;&lt;&lt;lingo Reset/Caption&gt;&gt;&lt;/$button&gt;\n&lt;/$list&gt;\n\n&lt;$list filter=\"[all[current]is[shadow]!is[tiddler]]\" variable=\"listItem\"&gt;\n&lt;&lt;lingo Clone/Prompt&gt;&gt;\n&lt;/$list&gt;\n\n&lt;$button message=\"tm-new-tiddler\" param={{$:/palette}}&gt;&lt;&lt;lingo Clone/Caption&gt;&gt;&lt;/$button&gt;\n\n&lt;$checkbox tiddler=\"$:/state/palettemanager/showexternal\" field=\"text\" checked=\"yes\" unchecked=\"no\"&gt;&lt;span class=\"tc-small-gap-left\"&gt;&lt;&lt;lingo Names/External/Show&gt;&gt;&lt;/span&gt;&lt;/$checkbox&gt;\n\n&lt;&lt;palette-manager-table&gt;&gt;\n"},"$:/core/ui/PluginInfo":{"title":"$:/core/ui/PluginInfo","text":"\\define localised-info-tiddler-title()\n$(currentTiddler)$/$(languageTitle)$/$(currentTab)$\n\\end\n\\define info-tiddler-title()\n$(currentTiddler)$/$(currentTab)$\n\\end\n\\define default-tiddler-title()\n$:/core/ui/PluginInfo/Default/$(currentTab)$\n\\end\n&lt;$transclude tiddler=&lt;&lt;localised-info-tiddler-title&gt;&gt; mode=\"block\"&gt;\n&lt;$transclude tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;localised-info-tiddler-title&gt;&gt; mode=\"block\"&gt;\n&lt;$transclude tiddler=&lt;&lt;currentTiddler&gt;&gt; subtiddler=&lt;&lt;info-tiddler-title&gt;&gt; mode=\"block\"&gt;\n&lt;$transclude tiddler=&lt;&lt;default-tiddler-title&gt;&gt; mode=\"block\"&gt;\n{{$:/language/ControlPanel/Plugin/NoInfoFound/Hint}}\n&lt;/$transclude&gt;\n&lt;/$transclude&gt;\n&lt;/$transclude&gt;\n&lt;/$transclude&gt;\n"},"$:/core/ui/PluginInfo/Default/contents":{"title":"$:/core/ui/PluginInfo/Default/contents","text":"\\define lingo-base() $:/language/TiddlerInfo/Advanced/PluginInfo/\n&lt;&lt;lingo Hint&gt;&gt;\n&lt;ul&gt;\n&lt;$list filter=\"[all[current]plugintiddlers[]sort[title]]\" emptyMessage=&lt;&lt;lingo Empty/Hint&gt;&gt;&gt;\n&lt;li&gt;\n&lt;$link /&gt;\n&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n"},"$:/core/ui/PluginListItemTemplate":{"title":"$:/core/ui/PluginListItemTemplate","text":"&lt;div class=\"tc-menu-list-item\"&gt;\n&lt;$link to={{!!title}}&gt;&lt;$view field=\"description\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt;&lt;/$link&gt;\n&lt;/div&gt;"},"$:/core/ui/RootTemplate":{"title":"$:/core/ui/RootTemplate","text":"&lt;$transclude tiddler={{{ [{$:/layout}has[text]] ~[[$:/core/ui/PageTemplate]] }}} mode=\"inline\"/&gt;\n\n"},"$:/core/ui/SearchResults":{"title":"$:/core/ui/SearchResults","text":"&lt;div class=\"tc-search-results\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]butfirst[]limit[1]]\" emptyMessage=\"\"\"\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]]\"&gt;\n&lt;$transclude mode=\"block\"/&gt;\n&lt;/$list&gt;\n\"\"\"&gt;\n\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/SearchResults]!has[draft.of]]\" default={{$:/config/SearchResults/Default}} actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/search/currentTab\" text=&lt;&lt;currentTab&gt;&gt;/&gt;\"\"\" explicitState=\"$:/state/tab/search-results/sidebar\"/&gt;\n\n&lt;/$list&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/SideBar/More":{"title":"$:/core/ui/SideBar/More","tags":"$:/tags/SideBar","caption":"{{$:/language/SideBar/More/Caption}}","text":"&lt;div class=\"tc-more-sidebar\"&gt;\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/MoreSideBar]!has[draft.of]]\" default={{$:/config/DefaultMoreSidebarTab}} state=\"$:/state/tab/moresidebar\" class=\"tc-vertical tc-sidebar-tabs-more\" explicitState=\"$:/state/tab/moresidebar-1850697562\"/&gt;\n&lt;/div&gt;\n"},"$:/core/ui/SideBar/Open":{"title":"$:/core/ui/SideBar/Open","tags":"$:/tags/SideBar","caption":"{{$:/language/SideBar/Open/Caption}}","text":"\\whitespace trim\n\\define lingo-base() $:/language/CloseAll/\n\n\\define drop-actions()\n&lt;$action-listops $tiddler=&lt;&lt;tv-story-list&gt;&gt; $subfilter=\"+[insertbefore:currentTiddler&lt;actionTiddler&gt;]\"/&gt;\n\\end\n\n\\define placeholder()\n&lt;div class=\"tc-droppable-placeholder\"/&gt;\n\\end\n\n\\define droppable-item(button)\n\\whitespace trim\n&lt;$droppable actions=&lt;&lt;drop-actions&gt;&gt; enable=&lt;&lt;tv-allow-drag-and-drop&gt;&gt;&gt;\n&lt;&lt;placeholder&gt;&gt;\n&lt;div&gt;\n$button$\n&lt;/div&gt;\n&lt;/$droppable&gt;\n\\end\n\n&lt;div class=\"tc-sidebar-tab-open\"&gt;\n&lt;$list filter=\"[list&lt;tv-story-list&gt;]\" history=&lt;&lt;tv-history-list&gt;&gt; storyview=\"pop\"&gt;\n&lt;div class=\"tc-sidebar-tab-open-item\"&gt;\n&lt;$macrocall $name=\"droppable-item\" button=\"\"\"&lt;$button message=\"tm-close-tiddler\" tooltip={{$:/language/Buttons/Close/Hint}} aria-label={{$:/language/Buttons/Close/Caption}} class=\"tc-btn-invisible tc-btn-mini tc-small-gap-right\"&gt;{{$:/core/images/close-button}}&lt;/$button&gt;&lt;$link to={{!!title}}&gt;&lt;$view field=\"title\"/&gt;&lt;/$link&gt;\"\"\"/&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;$tiddler tiddler=\"\"&gt;\n&lt;div&gt;\n&lt;$macrocall $name=\"droppable-item\" button=\"\"\"&lt;$button message=\"tm-close-all-tiddlers\" class=\"tc-btn-invisible tc-btn-mini\"&gt;&lt;&lt;lingo Button&gt;&gt;&lt;/$button&gt;\"\"\"/&gt;\n&lt;/div&gt;\n&lt;/$tiddler&gt;\n&lt;/div&gt;\n"},"$:/core/ui/SideBar/Recent":{"title":"$:/core/ui/SideBar/Recent","tags":"$:/tags/SideBar","caption":"{{$:/language/SideBar/Recent/Caption}}","text":"&lt;$macrocall $name=\"timeline\" format={{$:/language/RecentChanges/DateFormat}}/&gt;\n"},"$:/core/ui/SideBar/Tools":{"title":"$:/core/ui/SideBar/Tools","tags":"$:/tags/SideBar","caption":"{{$:/language/SideBar/Tools/Caption}}","text":"\\define lingo-base() $:/language/ControlPanel/\n\\define config-title()\n$:/config/PageControlButtons/Visibility/$(listItem)$\n\\end\n\n&lt;&lt;lingo Basics/Version/Prompt&gt;&gt; &lt;&lt;version&gt;&gt;\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/PageControls]!has[draft.of]]\" variable=\"listItem\"&gt;\n\n&lt;div style=\"position:relative;\" class={{{ [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]] }}}&gt;\n\n&lt;$checkbox tiddler=&lt;&lt;config-title&gt;&gt; field=\"text\" checked=\"show\" unchecked=\"hide\" default=\"show\"/&gt; &lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt; &lt;i class=\"tc-muted\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; field=\"description\"/&gt;&lt;/i&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/SideBarLists":{"title":"$:/core/ui/SideBarLists","text":"&lt;$transclude tiddler=\"$:/core/ui/SideBarSegments/search\"/&gt;\n\n&lt;$transclude tiddler=\"$:/core/ui/SideBarSegments/tabs\"/&gt;\n\n"},"$:/core/ui/SideBarSegments/page-controls":{"title":"$:/core/ui/SideBarSegments/page-controls","tags":"$:/tags/SideBarSegment","text":"{{||$:/core/ui/PageTemplate/pagecontrols}}\n"},"$:/core/ui/SideBarSegments/search":{"title":"$:/core/ui/SideBarSegments/search","tags":"$:/tags/SideBarSegment","text":"\\whitespace trim\n\n\\define count-popup-button()\n\\whitespace trim\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/search-dropdown\"&gt;&gt; class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;$list filter=\"[{$(searchTiddler)$}minlength{$:/config/Search/MinLength}limit[1]]\" variable=\"listItem\"&gt;\n&lt;$vars userInput={{{ [&lt;searchTiddler&gt;get[text]] }}} configTiddler={{{ [[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}] }}} replaceRegexp=\"limit\\[\\d+\\]\"&gt;\n&lt;$vars primaryListFilter={{{ [&lt;configTiddler&gt;get[first-search-filter]search-replace:g:regexp&lt;replaceRegexp&gt;,[]] }}} secondaryListFilter={{{ [&lt;configTiddler&gt;get[second-search-filter]search-replace:g:regexp&lt;replaceRegexp&gt;,[]] }}}&gt;\n&lt;$set name=\"resultCount\" value=\"\"\"&lt;$count filter=\"[subfilter&lt;primaryListFilter&gt;] [subfilter&lt;secondaryListFilter&gt;]\"/&gt;\"\"\"&gt;\n{{$:/language/Search/Matches}}\n&lt;/$set&gt;\n&lt;/$vars&gt;\n&lt;/$vars&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n\n\\define search-results-list()\n\\whitespace trim\n&lt;$vars userInput={{$(searchTiddler)$}} configTiddler={{{ [[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}] }}}&gt;\n&lt;$list filter=\"[&lt;userInput&gt;minlength{$:/config/Search/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n\n&lt;$tiddler tiddler=&lt;&lt;configTiddler&gt;&gt;&gt;\n\n{{$:/core/ui/SearchResults}}\n\n&lt;/$tiddler&gt;\n\n&lt;/$list&gt;\n&lt;/$vars&gt;\n\\end\n\n\\define cancel-search-actions() &lt;$list filter=\"[&lt;searchTiddler&gt;get[text]!match{$:/temp/search}]\" emptyMessage=\"\"\"&lt;$action-deletetiddler $filter=\"[[$:/temp/search]] [&lt;searchTiddler&gt;] [&lt;searchListState&gt;]\"/&gt;\"\"\"&gt;&lt;$action-setfield $tiddler=\"$:/temp/search\" text={{{ [&lt;searchTiddler&gt;get[text]] }}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/search/refresh\" text=\"yes\"/&gt;&lt;/$list&gt;\n\n\\define input-accept-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$action-navigate $to={{{ [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;\n\n\\define input-accept-variant-actions() &lt;$list filter=\"[{$:/config/Search/NavigateOnEnter/enable}match[yes]]\" emptyMessage=\"\"\"&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]!is[missing]] ~[&lt;__tiddler__&gt;get[text]is[shadow]]\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\"\"\"&gt;&lt;$list filter=\"[&lt;__tiddler__&gt;get[text]minlength[1]]\"&gt;&lt;$action-sendmessage $message=\"tm-edit-tiddler\" $param={{{  [&lt;__tiddler__&gt;get[text]] }}}/&gt;&lt;/$list&gt;&lt;/$list&gt;\n\n\\define set-next-input-tab(beforeafter:\"after\") &lt;$macrocall $name=\"change-input-tab\" stateTitle=\"$:/state/tab/search-results/sidebar\" tag=\"$:/tags/SearchResults\" beforeafter=\"$beforeafter$\" defaultState={{$:/config/SearchResults/Default}} actions=\"\"\"&lt;$action-setfield $tiddler=\"$:/state/search/currentTab\" text=&lt;&lt;nextTab&gt;&gt;/&gt;\"\"\"/&gt;\n\n\\define advanced-search-actions() &lt;$action-setfield $tiddler=\"$:/temp/advancedsearch\" text={{$:/temp/search/input}}/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/input\" text={{$:/temp/search/input}}/&gt;&lt;&lt;delete-state-tiddlers&gt;&gt;&lt;$action-navigate $to=\"$:/AdvancedSearch\"/&gt;&lt;$action-setfield $tiddler=\"$:/temp/advancedsearch/refresh\" text=\"yes\"/&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\"\"\"[data-tiddler-title=\"$:/AdvancedSearch\"] .tc-search input\"\"\" preventScroll=\"true\"/&gt;&lt;$action-deletetiddler $filter=\"$:/temp/search $:/temp/search/input $:/temp/search/refresh [&lt;searchListState&gt;]\"/&gt;\n\n&lt;div class=\"tc-sidebar-lists tc-sidebar-search\"&gt;\n\n&lt;$vars editTiddler=\"$:/temp/search\" searchTiddler=\"$:/temp/search/input\" searchListState=&lt;&lt;qualify \"$:/state/search-list/selected-item\"&gt;&gt;&gt;\n&lt;div class=\"tc-search\"&gt;\n&lt;$keyboard key=\"((input-tab-right))\" actions=&lt;&lt;set-next-input-tab&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-tab-left))\" actions=&lt;&lt;set-next-input-tab \"before\"&gt;&gt;&gt;\n&lt;$keyboard key=\"((advanced-search-sidebar))\" actions=&lt;&lt;advanced-search-actions&gt;&gt;&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=&lt;&lt;editTiddler&gt;&gt; storeTitle=&lt;&lt;searchTiddler&gt;&gt; \n\t\tselectionStateTitle=&lt;&lt;searchListState&gt;&gt; refreshTitle=\"$:/temp/search/refresh\" type=\"search\" \n\t\ttag=\"input\" focus={{$:/config/Search/AutoFocus}} focusPopup=&lt;&lt;qualify \"$:/state/popup/search-dropdown\"&gt;&gt; \n\t\tclass=\"tc-popup-handle\" filterMinLength={{$:/config/Search/MinLength}} inputCancelActions=&lt;&lt;cancel-search-actions&gt;&gt; \n\t\tinputAcceptActions=&lt;&lt;input-accept-actions&gt;&gt; inputAcceptVariantActions=&lt;&lt;input-accept-variant-actions&gt;&gt; cancelPopups=\"yes\" \n\t\tconfigTiddlerFilter=\"[[$:/state/search/currentTab]!is[missing]get[text]] ~[{$:/config/SearchResults/Default}]\"/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;$reveal state=&lt;&lt;searchTiddler&gt;&gt; type=\"nomatch\" text=\"\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/AdvancedSearch/Hint}} aria-label={{$:/language/Buttons/AdvancedSearch/Caption}} class=\"tc-btn-invisible\"&gt;\n&lt;&lt;advanced-search-actions&gt;&gt;\n{{$:/core/images/advanced-search-button}}\n&lt;/$button&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;&lt;cancel-search-actions&gt;&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=\".tc-search input\"/&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;&lt;count-popup-button&gt;&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=&lt;&lt;searchTiddler&gt;&gt; type=\"match\" text=\"\"&gt;\n&lt;$button to=\"$:/AdvancedSearch\" tooltip={{$:/language/Buttons/AdvancedSearch/Hint}} aria-label={{$:/language/Buttons/AdvancedSearch/Caption}} class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/advanced-search-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\n&lt;$reveal tag=\"div\" class=\"tc-block-dropdown-wrapper\" state=&lt;&lt;searchTiddler&gt;&gt; type=\"nomatch\" text=\"\"&gt;\n\n&lt;$reveal tag=\"div\" class=\"tc-block-dropdown tc-search-drop-down tc-popup-handle\" state=&lt;&lt;qualify \"$:/state/popup/search-dropdown\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\"&gt;\n\n&lt;&lt;search-results-list&gt;&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$vars&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/SideBarSegments/site-subtitle":{"title":"$:/core/ui/SideBarSegments/site-subtitle","tags":"$:/tags/SideBarSegment","text":"&lt;div class=\"tc-site-subtitle\"&gt;\n\n&lt;$transclude tiddler=\"$:/SiteSubtitle\" mode=\"inline\"/&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/SideBarSegments/site-title":{"title":"$:/core/ui/SideBarSegments/site-title","tags":"$:/tags/SideBarSegment","text":"&lt;h1 class=\"tc-site-title\"&gt;\n\n&lt;$transclude tiddler=\"$:/SiteTitle\" mode=\"inline\"/&gt;\n\n&lt;/h1&gt;\n"},"$:/core/ui/SideBarSegments/tabs":{"title":"$:/core/ui/SideBarSegments/tabs","tags":"$:/tags/SideBarSegment","text":"&lt;div class=\"tc-sidebar-lists tc-sidebar-tabs\"&gt;\n\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/SideBar]!has[draft.of]]\" default={{$:/config/DefaultSidebarTab}} state=\"$:/state/tab/sidebar\" class=\"tc-sidebar-tabs-main\" explicitState=\"$:/state/tab/sidebar--595412856\"/&gt;\n\n&lt;/div&gt;\n"},"$:/core/ui/SwitcherModal":{"title":"$:/core/ui/SwitcherModal","subtitle":"&lt;$text text={{{[&lt;switch&gt;lookup[$:/language/Switcher/Subtitle/]]}}}/&gt;","class":"tc-modal-centered","text":"&lt;$tiddler tiddler={{{[&lt;switch&gt;lookup[$:/config/SwitcherTargets/]]}}}&gt;\n\n\n&lt;$transclude/&gt;\n\n\n&lt;/$tiddler&gt;"},"$:/TagManager":{"title":"$:/TagManager","icon":"$:/core/images/tag-button","color":"#bbb","text":"\\define lingo-base() $:/language/TagManager/\n\\define iconEditorTab(type)\n\\whitespace trim\n&lt;$link to=\"\"&gt;&lt;&lt;lingo Icons/None&gt;&gt;&lt;/$link&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]is[image]] [all[shadows+tiddlers]tag[$:/tags/Image]] -[type[application/pdf]] +[sort[title]] +[$type$is[system]]\"&gt;\n&lt;$link to={{!!title}}&gt;\n&lt;$transclude/&gt; &lt;$view field=\"title\"/&gt;\n&lt;/$link&gt;\n&lt;/$list&gt;\n\\end\n\\define iconEditor(title)\n\\whitespace trim\n&lt;div class=\"tc-drop-down-wrapper\"&gt;\n&lt;$button popupTitle={{{ [[$:/state/popup/icon/]addsuffix&lt;__title__&gt;] }}} class=\"tc-btn-invisible tc-btn-dropdown\"&gt;{{$:/core/images/down-arrow}}&lt;/$button&gt;\n&lt;$reveal stateTitle={{{ [[$:/state/popup/icon/]addsuffix&lt;__title__&gt;] }}} type=\"popup\" position=\"belowleft\" text=\"\" default=\"\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$linkcatcher actions=\"\"\"&lt;$action-setfield $tiddler=&lt;&lt;__title__&gt;&gt; icon=&lt;&lt;navigateTo&gt;&gt;/&gt;\"\"\"&gt;\n&lt;&lt;iconEditorTab type:\"!\"&gt;&gt;\n&lt;hr/&gt;\n&lt;&lt;iconEditorTab type:\"\"&gt;&gt;\n&lt;/$linkcatcher&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\\end\n\\define toggleButton(state)\n\\whitespace trim\n&lt;$reveal stateTitle=&lt;&lt;__state__&gt;&gt; type=\"match\" text=\"closed\" default=\"closed\"&gt;\n&lt;$button setTitle=&lt;&lt;__state__&gt;&gt; setTo=\"open\" class=\"tc-btn-invisible tc-btn-dropdown\" selectedClass=\"tc-selected\"&gt;\n{{$:/core/images/info-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal stateTitle=&lt;&lt;__state__&gt;&gt; type=\"match\" text=\"open\" default=\"closed\"&gt;\n&lt;$button setTitle=&lt;&lt;__state__&gt;&gt; setTo=\"closed\" class=\"tc-btn-invisible tc-btn-dropdown\" selectedClass=\"tc-selected\"&gt;\n{{$:/core/images/info-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n\\end\n\\whitespace trim\n&lt;table class=\"tc-tag-manager-table\"&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;&lt;&lt;lingo Colour/Heading&gt;&gt;&lt;/th&gt;\n&lt;th class=\"tc-tag-manager-tag\"&gt;&lt;&lt;lingo Tag/Heading&gt;&gt;&lt;/th&gt;\n&lt;th&gt;&lt;&lt;lingo Count/Heading&gt;&gt;&lt;/th&gt;\n&lt;th&gt;&lt;&lt;lingo Icon/Heading&gt;&gt;&lt;/th&gt;\n&lt;th&gt;&lt;&lt;lingo Info/Heading&gt;&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;$list filter=\"[tags[]!is[system]sort[title]]\"&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;$edit-text field=\"color\" tag=\"input\" type=\"color\"/&gt;&lt;/td&gt;\n&lt;td&gt;{{||$:/core/ui/TagTemplate}}&lt;/td&gt;\n&lt;td&gt;&lt;$count filter=\"[all[current]tagging[]]\"/&gt;&lt;/td&gt;\n&lt;td&gt;\n&lt;$macrocall $name=\"iconEditor\" title={{!!title}}/&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;$macrocall $name=\"toggleButton\" state={{{ [[$:/state/tag-manager/]addsuffix&lt;currentTiddler&gt;] }}} /&gt; \n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;td colspan=\"4\"&gt;\n&lt;$reveal stateTitle={{{ [[$:/state/tag-manager/]addsuffix&lt;currentTiddler&gt;] }}} type=\"match\" text=\"open\" default=\"\"&gt;\n&lt;table&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td&gt;&lt;&lt;lingo Colour/Heading&gt;&gt;&lt;/td&gt;&lt;td&gt;&lt;$edit-text field=\"color\" tag=\"input\" type=\"text\" size=\"9\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;&lt;&lt;lingo Icon/Heading&gt;&gt;&lt;/td&gt;&lt;td&gt;&lt;$edit-text field=\"icon\" tag=\"input\" size=\"45\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/$reveal&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;td style=\"position:relative;\"&gt;\n{{$:/core/ui/UntaggedTemplate}}\n&lt;/td&gt;\n&lt;td&gt;\n&lt;small class=\"tc-menu-list-count\"&gt;&lt;$count filter=\"[untagged[]!is[system]] -[tags[]]\"/&gt;&lt;/small&gt;\n&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/TagPickerTagTemplate":{"title":"$:/core/ui/TagPickerTagTemplate","text":"\\whitespace trim\n&lt;$button class=&lt;&lt;button-classes&gt;&gt; tag=\"a\" tooltip={{$:/language/EditTemplate/Tags/Add/Button/Hint}}&gt;\n&lt;$list filter=\"[&lt;saveTiddler&gt;minlength[1]]\"&gt;\n&lt;$action-listops $tiddler=&lt;&lt;saveTiddler&gt;&gt; $field=&lt;&lt;tagField&gt;&gt; $subfilter=\"[&lt;tag&gt;]\"/&gt;\n&lt;/$list&gt;\n&lt;$set name=\"currentTiddlerCSSEscaped\" value={{{ [&lt;saveTiddler&gt;escapecss[]] }}}&gt;\n&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;get-tagpicker-focus-selector&gt;&gt; preventScroll=\"true\"/&gt;\n&lt;/$set&gt;\n&lt;&lt;delete-tag-state-tiddlers&gt;&gt;\n&lt;$list filter=\"[&lt;refreshTitle&gt;minlength[1]]\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;refreshTitle&gt;&gt; text=\"yes\"/&gt;\n&lt;/$list&gt;\n&lt;&lt;actions&gt;&gt;\n&lt;$set name=\"backgroundColor\" value={{!!color}}&gt;\n&lt;$wikify name=\"foregroundColor\" text=\"\"\"&lt;$macrocall $name=\"contrastcolour\" target={{!!color}} fallbackTarget=&lt;&lt;fallbackTarget&gt;&gt; colourA=&lt;&lt;colourA&gt;&gt; colourB=&lt;&lt;colourB&gt;&gt;/&gt;\"\"\"&gt;\n&lt;span class=\"tc-tag-label tc-btn-invisible\" style=&lt;&lt;tag-pill-styles&gt;&gt;&gt;\n&lt;$transclude tiddler={{!!icon}}/&gt;&lt;$view field=\"title\" format=\"text\"/&gt;\n&lt;/span&gt;\n&lt;/$wikify&gt;\n&lt;/$set&gt;\n&lt;/$button&gt;\n"},"$:/core/ui/TagTemplate":{"title":"$:/core/ui/TagTemplate","text":"\\whitespace trim\n&lt;span class=\"tc-tag-list-item\" data-tag-title=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$set name=\"transclusion\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$macrocall $name=\"tag-pill-body\" tag=&lt;&lt;currentTiddler&gt;&gt; icon={{!!icon}} colour={{!!color}} palette={{$:/palette}} element-tag=\"\"\"$button\"\"\" element-attributes=\"\"\"popup=&lt;&lt;qualify \"$:/state/popup/tag\"&gt;&gt; dragFilter='[all[current]tagging[]]' tag='span'\"\"\"/&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/tag\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\" class=\"tc-drop-down\"&gt;\n&lt;$set name=\"tv-show-missing-links\" value=\"yes\"&gt;\n&lt;$transclude tiddler=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/$set&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TagDropdown]!has[draft.of]]\" variable=\"listItem\"&gt; \n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt; \n&lt;/$list&gt;\n&lt;hr&gt;\n&lt;$macrocall $name=\"list-tagged-draggable\" tag=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;/$reveal&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n"},"$:/core/ui/TiddlerFields":{"title":"$:/core/ui/TiddlerFields","text":"&lt;table class=\"tc-view-field-table\"&gt;\n&lt;tbody&gt;\n&lt;$list filter=\"[all[current]fields[]sort[title]] -text\" template=\"$:/core/ui/TiddlerFieldTemplate\" variable=\"listItem\"/&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n"},"$:/core/ui/TiddlerFieldTemplate":{"title":"$:/core/ui/TiddlerFieldTemplate","text":"&lt;tr class=\"tc-view-field\"&gt;\n&lt;td class=\"tc-view-field-name\"&gt;\n&lt;$text text=&lt;&lt;listItem&gt;&gt;/&gt;\n&lt;/td&gt;\n&lt;td class=\"tc-view-field-value\"&gt;\n&lt;$view field=&lt;&lt;listItem&gt;&gt;/&gt;\n&lt;/td&gt;\n&lt;/tr&gt;"},"$:/core/ui/TiddlerInfo/Advanced/PluginInfo":{"title":"$:/core/ui/TiddlerInfo/Advanced/PluginInfo","tags":"$:/tags/TiddlerInfo/Advanced","text":"\\define lingo-base() $:/language/TiddlerInfo/Advanced/PluginInfo/\n&lt;$list filter=\"[all[current]has[plugin-type]]\"&gt;\n\n! &lt;&lt;lingo Heading&gt;&gt;\n\n&lt;&lt;lingo Hint&gt;&gt;\n&lt;ul&gt;\n&lt;$list filter=\"[all[current]plugintiddlers[]sort[title]]\" emptyMessage=&lt;&lt;lingo Empty/Hint&gt;&gt;&gt;\n&lt;li&gt;\n&lt;$link to={{!!title}}&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$link&gt;\n&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/TiddlerInfo/Advanced/ShadowInfo":{"title":"$:/core/ui/TiddlerInfo/Advanced/ShadowInfo","tags":"$:/tags/TiddlerInfo/Advanced","text":"\\define lingo-base() $:/language/TiddlerInfo/Advanced/ShadowInfo/\n&lt;$set name=\"infoTiddler\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n\n''&lt;&lt;lingo Heading&gt;&gt;''\n\n&lt;$list filter=\"[all[current]!is[shadow]]\"&gt;\n\n&lt;&lt;lingo NotShadow/Hint&gt;&gt;\n\n&lt;/$list&gt;\n\n&lt;$list filter=\"[all[current]is[shadow]]\"&gt;\n\n&lt;&lt;lingo Shadow/Hint&gt;&gt;\n\n&lt;$list filter=\"[all[current]shadowsource[]]\"&gt;\n\n&lt;$set name=\"pluginTiddler\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;&lt;lingo Shadow/Source&gt;&gt;\n&lt;/$set&gt;\n\n&lt;/$list&gt;\n\n&lt;$list filter=\"[all[current]is[shadow]is[tiddler]]\"&gt;\n\n&lt;&lt;lingo OverriddenShadow/Hint&gt;&gt;\n\n&lt;/$list&gt;\n\n\n&lt;/$list&gt;\n&lt;/$set&gt;\n"},"$:/core/ui/TiddlerInfo/Advanced":{"title":"$:/core/ui/TiddlerInfo/Advanced","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/Advanced/Caption}}","text":"&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TiddlerInfo/Advanced]!has[draft.of]]\" variable=\"listItem\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"block\"/&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/TiddlerInfo/Fields":{"title":"$:/core/ui/TiddlerInfo/Fields","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/Fields/Caption}}","text":"&lt;$transclude tiddler=\"$:/core/ui/TiddlerFields\"/&gt;\n"},"$:/core/ui/TiddlerInfo/List":{"title":"$:/core/ui/TiddlerInfo/List","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/List/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n&lt;$list filter=\"[list{!!title}]\" emptyMessage=&lt;&lt;lingo List/Empty&gt;&gt; template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/TiddlerInfo/Listed":{"title":"$:/core/ui/TiddlerInfo/Listed","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/Listed/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n&lt;$list filter=\"[all[current]listed[]!is[system]]\" emptyMessage=&lt;&lt;lingo Listed/Empty&gt;&gt; template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/TiddlerInfo/References":{"title":"$:/core/ui/TiddlerInfo/References","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/References/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n&lt;$list filter=\"[all[current]backlinks[]sort[title]]\" emptyMessage=&lt;&lt;lingo References/Empty&gt;&gt; template=\"$:/core/ui/ListItemTemplate\"&gt;\n&lt;/$list&gt;"},"$:/core/ui/TiddlerInfo/Tagging":{"title":"$:/core/ui/TiddlerInfo/Tagging","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/Tagging/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n&lt;$list filter=\"[all[current]tagging[]]\" emptyMessage=&lt;&lt;lingo Tagging/Empty&gt;&gt; template=\"$:/core/ui/ListItemTemplate\"/&gt;\n"},"$:/core/ui/TiddlerInfo/Tools":{"title":"$:/core/ui/TiddlerInfo/Tools","tags":"$:/tags/TiddlerInfo","caption":"{{$:/language/TiddlerInfo/Tools/Caption}}","text":"\\define lingo-base() $:/language/TiddlerInfo/\n\\define config-title()\n$:/config/ViewToolbarButtons/Visibility/$(listItem)$\n\\end\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ViewToolbar]!has[draft.of]]\" variable=\"listItem\"&gt;\n\n&lt;$checkbox tiddler=&lt;&lt;config-title&gt;&gt; field=\"text\" checked=\"show\" unchecked=\"hide\" default=\"show\"/&gt; &lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt; &lt;i class=\"tc-muted\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; field=\"description\"/&gt;&lt;/i&gt;\n\n&lt;/$list&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n"},"$:/core/ui/TiddlerInfo":{"title":"$:/core/ui/TiddlerInfo","text":"&lt;div style=\"position:relative;\"&gt;\n&lt;div class=\"tc-tiddler-controls\" style=\"position:absolute;right:0;\"&gt;\n&lt;$reveal state=\"$:/config/TiddlerInfo/Mode\" type=\"match\" text=\"sticky\"&gt;\n&lt;$button set=&lt;&lt;tiddlerInfoState&gt;&gt; setTo=\"\" tooltip={{$:/language/Buttons/Info/Hint}} aria-label={{$:/language/Buttons/Info/Caption}} class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/close-button}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;$macrocall $name=\"tabs\" tabsList=\"[all[shadows+tiddlers]tag[$:/tags/TiddlerInfo]!has[draft.of]]\" default={{$:/config/TiddlerInfo/Default}}/&gt;\n"},"$:/core/ui/TopBar/menu":{"title":"$:/core/ui/TopBar/menu","tags":"$:/tags/TopRightBar","text":"&lt;$list filter=\"[[$:/state/sidebar]get[text]] +[else[yes]!match[no]]\" variable=\"ignore\"&gt;\n&lt;$button set=\"$:/state/sidebar\" setTo=\"no\" tooltip={{$:/language/Buttons/HideSideBar/Hint}} aria-label={{$:/language/Buttons/HideSideBar/Caption}} class=\"tc-btn-invisible tc-hide-sidebar-btn\"&gt;{{$:/core/images/chevron-right}}&lt;/$button&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[[$:/state/sidebar]get[text]] +[else[yes]match[no]]\" variable=\"ignore\"&gt;\n&lt;$button set=\"$:/state/sidebar\" setTo=\"yes\" tooltip={{$:/language/Buttons/ShowSideBar/Hint}} aria-label={{$:/language/Buttons/ShowSideBar/Caption}} class=\"tc-btn-invisible tc-show-sidebar-btn\"&gt;{{$:/core/images/chevron-left}}&lt;/$button&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/UntaggedTemplate":{"title":"$:/core/ui/UntaggedTemplate","text":"\\define lingo-base() $:/language/SideBar/\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/tag\"&gt;&gt; class=\"tc-btn-invisible tc-untagged-label tc-tag-label\"&gt;\n&lt;&lt;lingo Tags/Untagged/Caption&gt;&gt;\n&lt;/$button&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/tag\"&gt;&gt; type=\"popup\" position=\"below\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$list filter=\"[untagged[]!is[system]] -[tags[]] +[sort[title]]\" template=\"$:/core/ui/ListItemTemplate\"/&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/ViewTemplate/body":{"title":"$:/core/ui/ViewTemplate/body","tags":"$:/tags/ViewTemplate","text":"&lt;$reveal tag=\"div\" class=\"tc-tiddler-body\" type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" retain=\"yes\" animate=\"yes\"&gt;\n\n&lt;$list filter=\"[all[current]!has[plugin-type]!field:hide-body[yes]]\"&gt;\n\n&lt;$transclude&gt;\n\n&lt;$transclude tiddler=\"$:/language/MissingTiddler/Hint\"/&gt;\n\n&lt;/$transclude&gt;\n\n&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n"},"$:/core/ui/ViewTemplate/classic":{"title":"$:/core/ui/ViewTemplate/classic","tags":"$:/tags/ViewTemplate $:/tags/EditTemplate","text":"\\define lingo-base() $:/language/ClassicWarning/\n&lt;$list filter=\"[all[current]type[text/x-tiddlywiki]]\"&gt;\n&lt;div class=\"tc-message-box\"&gt;\n\n&lt;&lt;lingo Hint&gt;&gt;\n\n&lt;$button set=\"!!type\" setTo=\"text/vnd.tiddlywiki\"&gt;&lt;&lt;lingo Upgrade/Caption&gt;&gt;&lt;/$button&gt;\n\n&lt;/div&gt;\n&lt;/$list&gt;\n"},"$:/core/ui/ViewTemplate/import":{"title":"$:/core/ui/ViewTemplate/import","tags":"$:/tags/ViewTemplate","text":"\\define lingo-base() $:/language/Import/\n\n\\define confirmCancel()\n&lt;$action-confirm $message={{$:/language/Import/Listing/Cancel/Warning}} &gt;\n&lt;$action-deletetiddler $tiddler=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;$action-sendmessage $message=\"tm-close-tiddler\" title=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;/$action-confirm&gt;\n\\end\n\n\\define buttons()\n&lt;$button actions=&lt;&lt;confirmCancel&gt;&gt; &gt;&lt;&lt;lingo Listing/Cancel/Caption&gt;&gt;&lt;/$button&gt;\n&lt;$button message=\"tm-perform-import\" param=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;&lt;lingo Listing/Import/Caption&gt;&gt;&lt;/$button&gt;\n&lt;&lt;lingo Listing/Preview&gt;&gt; &lt;$select tiddler=\"$:/state/importpreviewtype\" default=\"$:/core/ui/ImportPreviews/Text\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ImportPreview]!has[draft.of]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;{{!!caption}}&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n\\end\n\n&lt;$list filter=\"[all[current]field:plugin-type[import]]\"&gt;\n\n&lt;div class=\"tc-import\"&gt;\n\n&lt;&lt;lingo Listing/Hint&gt;&gt;\n\n&lt;&lt;buttons&gt;&gt;\n\n{{||$:/core/ui/ImportListing}}\n\n&lt;&lt;buttons&gt;&gt;\n\n&lt;/div&gt;\n\n&lt;/$list&gt;\n"},"$:/core/ui/ViewTemplate/plugin":{"title":"$:/core/ui/ViewTemplate/plugin","tags":"$:/tags/ViewTemplate","text":"&lt;$reveal tag=\"div\" class=\"tc-tiddler-plugin-info\" type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" retain=\"yes\" animate=\"yes\"&gt;\n\n&lt;$list filter=\"[all[current]has[plugin-type]] -[all[current]field:plugin-type[import]]\"&gt;\n&lt;$set name=\"plugin-type\" value={{!!plugin-type}}&gt;\n&lt;$set name=\"default-popup-state\" value=\"yes\"&gt;\n&lt;$set name=\"qualified-state\" value=&lt;&lt;qualify \"$:/state/plugin-info\"&gt;&gt;&gt;\n{{||$:/core/ui/Components/plugin-info}}\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$reveal&gt;"},"$:/core/ui/ViewTemplate/subtitle":{"title":"$:/core/ui/ViewTemplate/subtitle","tags":"$:/tags/ViewTemplate","text":"\\whitespace trim\n&lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" tag=\"div\" retain=\"yes\" animate=\"yes\"&gt;\n&lt;div class=\"tc-subtitle\"&gt;\n&lt;$link to={{!!modifier}} /&gt;\n&lt;$view field=\"modified\" format=\"date\" template={{$:/language/Tiddler/DateFormat}}/&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/ViewTemplate/tags":{"title":"$:/core/ui/ViewTemplate/tags","tags":"$:/tags/ViewTemplate","text":"&lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" tag=\"div\" retain=\"yes\" animate=\"yes\"&gt;\n&lt;div class=\"tc-tags-wrapper\"&gt;&lt;$list filter=\"[all[current]tags[]sort[title]]\" template=\"$:/core/ui/TagTemplate\" storyview=\"pop\"/&gt;&lt;/div&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/ViewTemplate/title":{"title":"$:/core/ui/ViewTemplate/title","tags":"$:/tags/ViewTemplate","text":"\\whitespace trim\n\\define title-styles()\nfill:$(foregroundColor)$;\n\\end\n\\define config-title()\n$:/config/ViewToolbarButtons/Visibility/$(listItem)$\n\\end\n&lt;div class=\"tc-tiddler-title\"&gt;\n&lt;div class=\"tc-titlebar\"&gt;\n&lt;span class=\"tc-tiddler-controls\"&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ViewToolbar]!has[draft.of]]\" variable=\"listItem\"&gt;&lt;$reveal type=\"nomatch\" state=&lt;&lt;config-title&gt;&gt; text=\"hide\"&gt;&lt;$set name=\"tv-config-toolbar-class\" filter=\"[&lt;tv-config-toolbar-class&gt;] [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]]\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;&lt;/$set&gt;&lt;/$reveal&gt;&lt;/$list&gt;\n&lt;/span&gt;\n&lt;$set name=\"tv-wikilinks\" value={{$:/config/Tiddlers/TitleLinks}}&gt;\n&lt;$link&gt;\n&lt;$set name=\"foregroundColor\" value={{!!color}}&gt;\n&lt;$list filter=\"[all[current]has[icon]]~[[$:/config/DefaultTiddlerIcon]has[text]]\"&gt;\n&lt;span class=\"tc-tiddler-title-icon\" style=&lt;&lt;title-styles&gt;&gt;&gt;\n&lt;$transclude tiddler={{!!icon}}&gt;\n&lt;$transclude tiddler={{$:/config/DefaultTiddlerIcon}}/&gt;\n&lt;/$transclude&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;$list filter=\"[all[current]removeprefix[$:/]]\"&gt;\n&lt;h2 class=\"tc-title\" title={{$:/language/SystemTiddler/Tooltip}}&gt;\n&lt;span class=\"tc-system-title-prefix\"&gt;$:/&lt;/span&gt;&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n&lt;/h2&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[all[current]!prefix[$:/]]\"&gt;\n&lt;h2 class=\"tc-title\"&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/h2&gt;\n&lt;/$list&gt;\n&lt;/$link&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n\n&lt;$reveal type=\"nomatch\" text=\"\" default=\"\" state=&lt;&lt;tiddlerInfoState&gt;&gt; class=\"tc-tiddler-info tc-popup-handle\" animate=\"yes\" retain=\"yes\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/TiddlerInfoSegment]!has[draft.of]] [[$:/core/ui/TiddlerInfo]]\" variable=\"listItem\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"block\"/&gt;&lt;/$list&gt;\n\n&lt;/$reveal&gt;\n&lt;/div&gt;"},"$:/core/ui/ViewTemplate/unfold":{"title":"$:/core/ui/ViewTemplate/unfold","tags":"$:/tags/ViewTemplate","text":"&lt;$reveal tag=\"div\" type=\"nomatch\" state=\"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold-bar\" text=\"hide\"&gt;\n&lt;$reveal tag=\"div\" type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" default=\"show\" retain=\"yes\" animate=\"yes\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Fold/Hint}} aria-label={{$:/language/Buttons/Fold/Caption}} class=\"tc-fold-banner\"&gt;\n&lt;$action-sendmessage $message=\"tm-fold-tiddler\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedState=&lt;&lt;folded-state&gt;&gt;/&gt;\n{{$:/core/images/chevron-up}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal tag=\"div\" type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"show\" default=\"show\" retain=\"yes\" animate=\"yes\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Unfold/Hint}} aria-label={{$:/language/Buttons/Unfold/Caption}} class=\"tc-unfold-banner\"&gt;\n&lt;$action-sendmessage $message=\"tm-fold-tiddler\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedState=&lt;&lt;folded-state&gt;&gt;/&gt;\n{{$:/core/images/chevron-down}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/ViewTemplate":{"title":"$:/core/ui/ViewTemplate","text":"\\define folded-state()\n$:/state/folded/$(currentTiddler)$\n\\end\n\\define cancel-delete-tiddler-actions(message) &lt;$action-sendmessage $message=\"tm-$message$-tiddler\"/&gt;\n\\import [all[shadows+tiddlers]tag[$:/tags/Macro/View]!has[draft.of]]\n&lt;$vars storyTiddler=&lt;&lt;currentTiddler&gt;&gt; tiddlerInfoState=&lt;&lt;qualify \"$:/state/popup/tiddler-info\"&gt;&gt;&gt;&lt;div data-tiddler-title=&lt;&lt;currentTiddler&gt;&gt; data-tags={{!!tags}} class={{{ tc-tiddler-frame tc-tiddler-view-frame [&lt;currentTiddler&gt;is[tiddler]then[tc-tiddler-exists]] [&lt;currentTiddler&gt;is[missing]!is[shadow]then[tc-tiddler-missing]] [&lt;currentTiddler&gt;is[shadow]then[tc-tiddler-exists tc-tiddler-shadow]] [&lt;currentTiddler&gt;is[shadow]is[tiddler]then[tc-tiddler-overridden-shadow]] [&lt;currentTiddler&gt;is[system]then[tc-tiddler-system]] [{!!class}] [&lt;currentTiddler&gt;tags[]encodeuricomponent[]addprefix[tc-tagged-]] +[join[ ]] }}}&gt;&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ViewTemplate]!has[draft.of]]\" variable=\"listItem\"&gt;&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt;/&gt;&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$vars&gt;\n"},"$:/core/ui/Buttons/clone":{"title":"$:/core/ui/Buttons/clone","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/clone-button}} {{$:/language/Buttons/Clone/Caption}}","description":"{{$:/language/Buttons/Clone/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-new-tiddler\" param=&lt;&lt;currentTiddler&gt;&gt; tooltip={{$:/language/Buttons/Clone/Hint}} aria-label={{$:/language/Buttons/Clone/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/clone-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Clone/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/close-others":{"title":"$:/core/ui/Buttons/close-others","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/close-others-button}} {{$:/language/Buttons/CloseOthers/Caption}}","description":"{{$:/language/Buttons/CloseOthers/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-close-other-tiddlers\" param=&lt;&lt;currentTiddler&gt;&gt; tooltip={{$:/language/Buttons/CloseOthers/Hint}} aria-label={{$:/language/Buttons/CloseOthers/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/close-others-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/CloseOthers/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/close":{"title":"$:/core/ui/Buttons/close","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/close-button}} {{$:/language/Buttons/Close/Caption}}","description":"{{$:/language/Buttons/Close/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-close-tiddler\" tooltip={{$:/language/Buttons/Close/Hint}} aria-label={{$:/language/Buttons/Close/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/close-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Close/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/edit":{"title":"$:/core/ui/Buttons/edit","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/edit-button}} {{$:/language/Buttons/Edit/Caption}}","description":"{{$:/language/Buttons/Edit/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-edit-tiddler\" tooltip={{$:/language/Buttons/Edit/Hint}} aria-label={{$:/language/Buttons/Edit/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/edit-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Edit/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/export-tiddler":{"title":"$:/core/ui/Buttons/export-tiddler","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/export-button}} {{$:/language/Buttons/ExportTiddler/Caption}}","description":"{{$:/language/Buttons/ExportTiddler/Hint}}","text":"\\define makeExportFilter()\n[[$(currentTiddler)$]]\n\\end\n&lt;$macrocall $name=\"exportButton\" exportFilter=&lt;&lt;makeExportFilter&gt;&gt; lingoBase=\"$:/language/Buttons/ExportTiddler/\" baseFilename=&lt;&lt;currentTiddler&gt;&gt;/&gt;"},"$:/core/ui/Buttons/fold-bar":{"title":"$:/core/ui/Buttons/fold-bar","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/chevron-up}} {{$:/language/Buttons/Fold/FoldBar/Caption}}","description":"{{$:/language/Buttons/Fold/FoldBar/Hint}}","text":"&lt;!-- This dummy toolbar button is here to allow visibility of the fold-bar to be controlled as if it were a toolbar button --&gt;"},"$:/core/ui/Buttons/fold-others":{"title":"$:/core/ui/Buttons/fold-others","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/fold-others-button}} {{$:/language/Buttons/FoldOthers/Caption}}","description":"{{$:/language/Buttons/FoldOthers/Hint}}","text":"\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/FoldOthers/Hint}} aria-label={{$:/language/Buttons/FoldOthers/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-fold-other-tiddlers\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedStatePrefix=\"$:/state/folded/\"/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\" variable=\"listItem\"&gt;\n{{$:/core/images/fold-others-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/FoldOthers/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/fold":{"title":"$:/core/ui/Buttons/fold","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/fold-button}} {{$:/language/Buttons/Fold/Caption}}","description":"{{$:/language/Buttons/Fold/Hint}}","text":"\\whitespace trim\n&lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" default=\"show\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Fold/Hint}} aria-label={{$:/language/Buttons/Fold/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-fold-tiddler\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedState=&lt;&lt;folded-state&gt;&gt;/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\" variable=\"listItem\"&gt;\n{{$:/core/images/fold-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Fold/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" stateTitle=&lt;&lt;folded-state&gt;&gt; text=\"hide\" default=\"show\"&gt;\n&lt;$button tooltip={{$:/language/Buttons/Unfold/Hint}} aria-label={{$:/language/Buttons/Unfold/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-fold-tiddler\" $param=&lt;&lt;currentTiddler&gt;&gt; foldedState=&lt;&lt;folded-state&gt;&gt;/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\" variable=\"listItem\"&gt;\n{{$:/core/images/unfold-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Unfold/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n"},"$:/core/ui/Buttons/info":{"title":"$:/core/ui/Buttons/info","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/info-button}} {{$:/language/Buttons/Info/Caption}}","description":"{{$:/language/Buttons/Info/Hint}}","text":"\\whitespace trim\n\\define button-content()\n\\whitespace trim\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/info-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Info/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n\\end\n&lt;$reveal state=\"$:/config/TiddlerInfo/Mode\" type=\"match\" text=\"popup\"&gt;\n&lt;$button popup=&lt;&lt;tiddlerInfoState&gt;&gt; tooltip={{$:/language/Buttons/Info/Hint}} aria-label={{$:/language/Buttons/Info/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$macrocall $name=\"button-content\" mode=\"inline\"/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=\"$:/config/TiddlerInfo/Mode\" type=\"match\" text=\"sticky\"&gt;\n&lt;$reveal state=&lt;&lt;tiddlerInfoState&gt;&gt; type=\"match\" text=\"\" default=\"\"&gt;\n&lt;$button set=&lt;&lt;tiddlerInfoState&gt;&gt; setTo=\"yes\" tooltip={{$:/language/Buttons/Info/Hint}} aria-label={{$:/language/Buttons/Info/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$macrocall $name=\"button-content\" mode=\"inline\"/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=&lt;&lt;tiddlerInfoState&gt;&gt; type=\"nomatch\" text=\"\" default=\"\"&gt;\n&lt;$button set=&lt;&lt;tiddlerInfoState&gt;&gt; setTo=\"\" tooltip={{$:/language/Buttons/Info/Hint}} aria-label={{$:/language/Buttons/Info/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$macrocall $name=\"button-content\" mode=\"inline\"/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;/$reveal&gt;"},"$:/core/ui/Buttons/more-tiddler-actions":{"title":"$:/core/ui/Buttons/more-tiddler-actions","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/down-arrow}} {{$:/language/Buttons/More/Caption}}","description":"{{$:/language/Buttons/More/Hint}}","text":"\\whitespace trim\n\\define config-title()\n$:/config/ViewToolbarButtons/Visibility/$(listItem)$\n\\end\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/more\"&gt;&gt; tooltip={{$:/language/Buttons/More/Hint}} aria-label={{$:/language/Buttons/More/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/More/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/more\"&gt;&gt; type=\"popup\" position=\"belowleft\" animate=\"yes\"&gt;\n\n&lt;div class=\"tc-drop-down\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-icons\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-text\" value=\"yes\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" value=\"tc-btn-invisible\"&gt;\n\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/ViewToolbar]!has[draft.of]] -[[$:/core/ui/Buttons/more-tiddler-actions]]\" variable=\"listItem\"&gt;\n\n&lt;$reveal type=\"match\" state=&lt;&lt;config-title&gt;&gt; text=\"hide\"&gt;\n\n&lt;$set name=\"tv-config-toolbar-class\" filter=\"[&lt;tv-config-toolbar-class&gt;] [&lt;listItem&gt;encodeuricomponent[]addprefix[tc-btn-]]\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;listItem&gt;&gt; mode=\"inline\"/&gt;\n\n&lt;/$set&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$list&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/$set&gt;\n\n&lt;/div&gt;\n\n&lt;/$reveal&gt;"},"$:/core/ui/Buttons/new-here":{"title":"$:/core/ui/Buttons/new-here","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/new-here-button}} {{$:/language/Buttons/NewHere/Caption}}","description":"{{$:/language/Buttons/NewHere/Hint}}","text":"\\whitespace trim\n\\define newHereActions()\n&lt;$set name=\"tags\" filter=\"[&lt;currentTiddler&gt;] [{$:/config/NewTiddler/Tags}]\"&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" tags=&lt;&lt;tags&gt;&gt;/&gt;\n&lt;/$set&gt;\n\\end\n\\define newHereButton()\n\\whitespace trim\n&lt;$button actions=&lt;&lt;newHereActions&gt;&gt; tooltip={{$:/language/Buttons/NewHere/Hint}} aria-label={{$:/language/Buttons/NewHere/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/new-here-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/NewHere/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;\n\\end\n&lt;&lt;newHereButton&gt;&gt;\n"},"$:/core/ui/Buttons/new-journal-here":{"title":"$:/core/ui/Buttons/new-journal-here","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/new-journal-button}} {{$:/language/Buttons/NewJournalHere/Caption}}","description":"{{$:/language/Buttons/NewJournalHere/Hint}}","text":"\\whitespace trim\n\\define journalButtonTags()\n[[$(currentTiddlerTag)$]] $(journalTags)$\n\\end\n\\define journalButton()\n\\whitespace trim\n&lt;$button tooltip={{$:/language/Buttons/NewJournalHere/Hint}} aria-label={{$:/language/Buttons/NewJournalHere/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$wikify name=\"journalTitle\" text=\"\"\"&lt;$macrocall $name=\"now\" format=&lt;&lt;journalTitleTemplate&gt;&gt;/&gt;\"\"\"&gt;\n&lt;$action-sendmessage $message=\"tm-new-tiddler\" title=&lt;&lt;journalTitle&gt;&gt; tags=&lt;&lt;journalButtonTags&gt;&gt;/&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/new-journal-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/NewJournalHere/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$wikify&gt;\n&lt;/$button&gt;\n\\end\n&lt;$set name=\"journalTitleTemplate\" value={{$:/config/NewJournal/Title}}&gt;\n&lt;$set name=\"journalTags\" value={{$:/config/NewJournal/Tags}}&gt;\n&lt;$set name=\"currentTiddlerTag\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;&lt;journalButton&gt;&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n"},"$:/core/ui/Buttons/open-window":{"title":"$:/core/ui/Buttons/open-window","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/open-window}} {{$:/language/Buttons/OpenWindow/Caption}}","description":"{{$:/language/Buttons/OpenWindow/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-open-window\" tooltip={{$:/language/Buttons/OpenWindow/Hint}} aria-label={{$:/language/Buttons/OpenWindow/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/open-window}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/OpenWindow/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/permalink":{"title":"$:/core/ui/Buttons/permalink","tags":"$:/tags/ViewToolbar","caption":"{{$:/core/images/permalink-button}} {{$:/language/Buttons/Permalink/Caption}}","description":"{{$:/language/Buttons/Permalink/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-permalink\" tooltip={{$:/language/Buttons/Permalink/Hint}} aria-label={{$:/language/Buttons/Permalink/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/permalink-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Permalink/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/core/ui/Buttons/permaview":{"title":"$:/core/ui/Buttons/permaview","tags":"$:/tags/ViewToolbar $:/tags/PageControls","caption":"{{$:/core/images/permaview-button}} {{$:/language/Buttons/Permaview/Caption}}","description":"{{$:/language/Buttons/Permaview/Hint}}","text":"\\whitespace trim\n&lt;$button message=\"tm-permaview\" tooltip={{$:/language/Buttons/Permaview/Hint}} aria-label={{$:/language/Buttons/Permaview/Caption}} class=&lt;&lt;tv-config-toolbar-class&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/permaview-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;\n&lt;$text text={{$:/language/Buttons/Permaview/Caption}}/&gt;\n&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;"},"$:/temp/advancedsearch":{"title":"$:/temp/advancedsearch","text":""},"$:/snippets/allfields":{"title":"$:/snippets/allfields","text":"\\define renderfield(title)\n&lt;tr class=\"tc-view-field\"&gt;&lt;td class=\"tc-view-field-name\"&gt;''$title$'':&lt;/td&gt;&lt;td class=\"tc-view-field-value\"&gt;//{{$:/language/Docs/Fields/$title$}}//&lt;/td&gt;&lt;/tr&gt;\n\\end\n&lt;table class=\"tc-view-field-table\"&gt;&lt;tbody&gt;&lt;$list filter=\"[fields[]sort[title]]\" variable=\"listItem\"&gt;&lt;$macrocall $name=\"renderfield\" title=&lt;&lt;listItem&gt;&gt;/&gt;&lt;/$list&gt;\n&lt;/tbody&gt;&lt;/table&gt;\n"},"$:/config/AnimationDuration":{"title":"$:/config/AnimationDuration","text":"400"},"$:/config/AutoFocus":{"title":"$:/config/AutoFocus","text":"title"},"$:/config/AutoSave":{"title":"$:/config/AutoSave","text":"yes"},"$:/config/BitmapEditor/Colour":{"title":"$:/config/BitmapEditor/Colour","text":"#444"},"$:/config/BitmapEditor/ImageSizes":{"title":"$:/config/BitmapEditor/ImageSizes","text":"[[62px 100px]] [[100px 62px]] [[124px 200px]] [[200px 124px]] [[248px 400px]] [[371px 600px]] [[400px 248px]] [[556px 900px]] [[600px 371px]] [[742px 1200px]] [[900px 556px]] [[1200px 742px]]"},"$:/config/BitmapEditor/LineWidth":{"title":"$:/config/BitmapEditor/LineWidth","text":"3px"},"$:/config/BitmapEditor/LineWidths":{"title":"$:/config/BitmapEditor/LineWidths","text":"0.25px 0.5px 1px 2px 3px 4px 6px 8px 10px 16px 20px 28px 40px 56px 80px"},"$:/config/BitmapEditor/Opacities":{"title":"$:/config/BitmapEditor/Opacities","text":"0.01 0.025 0.05 0.075 0.1 0.15 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0"},"$:/config/BitmapEditor/Opacity":{"title":"$:/config/BitmapEditor/Opacity","text":"1.0"},"$:/config/DefaultMoreSidebarTab":{"title":"$:/config/DefaultMoreSidebarTab","text":"$:/core/ui/MoreSideBar/Tags"},"$:/config/DefaultSidebarTab":{"title":"$:/config/DefaultSidebarTab","text":"$:/core/ui/SideBar/Open"},"$:/config/DownloadSaver/AutoSave":{"title":"$:/config/DownloadSaver/AutoSave","text":"no"},"$:/config/Drafts/TypingTimeout":{"title":"$:/config/Drafts/TypingTimeout","text":"400"},"$:/config/EditMode/fieldname-filter":{"title":"$:/config/EditMode/fieldname-filter","first-search-filter":"[!is[shadow]!is[system]fields[]search:title&lt;userInput&gt;sort[]] -created -creator -draft.of -draft.title -modified -modifier -tags -text -title -type","second-search-filter":"[fields[]search:title&lt;userInput&gt;sort[]] -[!is[shadow]!is[system]fields[]]"},"$:/config/Editor/EnableImportFilter":{"title":"$:/config/Editor/EnableImportFilter","type":"text/vnd.tiddlywiki","text":"[all[current]type[text/vnd.tiddlywiki]] [all[current]!has[type]]"},"$:/config/Editor/ImportContentTypesFilter":{"title":"$:/config/Editor/ImportContentTypesFilter","type":"text/vnd.tiddlywiki","text":"[prefix[image/]]"},"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-4":{"title":"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-4","text":"hide"},"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-5":{"title":"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-5","text":"hide"},"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-6":{"title":"$:/config/EditorToolbarButtons/Visibility/$:/core/ui/EditorToolbar/heading-6","text":"hide"},"$:/config/EditorTypeMappings/image/gif":{"title":"$:/config/EditorTypeMappings/image/gif","text":"bitmap"},"$:/config/EditorTypeMappings/image/webp":{"title":"$:/config/EditorTypeMappings/image/webp","text":"bitmap"},"$:/config/EditorTypeMappings/image/heic":{"title":"$:/config/EditorTypeMappings/image/heic","text":"bitmap"},"$:/config/EditorTypeMappings/image/heif":{"title":"$:/config/EditorTypeMappings/image/heif","text":"bitmap"},"$:/config/EditorTypeMappings/image/jpeg":{"title":"$:/config/EditorTypeMappings/image/jpeg","text":"bitmap"},"$:/config/EditorTypeMappings/image/jpg":{"title":"$:/config/EditorTypeMappings/image/jpg","text":"bitmap"},"$:/config/EditorTypeMappings/image/png":{"title":"$:/config/EditorTypeMappings/image/png","text":"bitmap"},"$:/config/EditorTypeMappings/image/x-icon":{"title":"$:/config/EditorTypeMappings/image/x-icon","text":"bitmap"},"$:/config/EditorTypeMappings/text/vnd.tiddlywiki":{"title":"$:/config/EditorTypeMappings/text/vnd.tiddlywiki","text":"text"},"$:/config/EditTabIndex":{"title":"$:/config/EditTabIndex","text":"1\n"},"$:/config/EditTemplateFields/Visibility/title":{"title":"$:/config/EditTemplateFields/Visibility/title","text":"hide"},"$:/config/EditTemplateFields/Visibility/tags":{"title":"$:/config/EditTemplateFields/Visibility/tags","text":"hide"},"$:/config/EditTemplateFields/Visibility/text":{"title":"$:/config/EditTemplateFields/Visibility/text","text":"hide"},"$:/config/EditTemplateFields/Visibility/creator":{"title":"$:/config/EditTemplateFields/Visibility/creator","text":"hide"},"$:/config/EditTemplateFields/Visibility/created":{"title":"$:/config/EditTemplateFields/Visibility/created","text":"hide"},"$:/config/EditTemplateFields/Visibility/modified":{"title":"$:/config/EditTemplateFields/Visibility/modified","text":"hide"},"$:/config/EditTemplateFields/Visibility/modifier":{"title":"$:/config/EditTemplateFields/Visibility/modifier","text":"hide"},"$:/config/EditTemplateFields/Visibility/type":{"title":"$:/config/EditTemplateFields/Visibility/type","text":"hide"},"$:/config/EditTemplateFields/Visibility/draft.title":{"title":"$:/config/EditTemplateFields/Visibility/draft.title","text":"hide"},"$:/config/EditTemplateFields/Visibility/draft.of":{"title":"$:/config/EditTemplateFields/Visibility/draft.of","text":"hide"},"$:/config/EditTemplateFields/Visibility/revision":{"title":"$:/config/EditTemplateFields/Visibility/revision","text":"hide"},"$:/config/EditTemplateFields/Visibility/bag":{"title":"$:/config/EditTemplateFields/Visibility/bag","text":"hide"},"$:/config/Manager/Show":{"title":"$:/config/Manager/Show","text":"tiddlers"},"$:/config/Manager/Filter":{"title":"$:/config/Manager/Filter","text":""},"$:/config/Manager/Order":{"title":"$:/config/Manager/Order","text":"forward"},"$:/config/Manager/Sort":{"title":"$:/config/Manager/Sort","text":"title"},"$:/config/Manager/System":{"title":"$:/config/Manager/System","text":"system"},"$:/config/Manager/Tag":{"title":"$:/config/Manager/Tag","text":""},"$:/state/popup/manager/item/$:/Manager/ItemMain/RawText":{"title":"$:/state/popup/manager/item/$:/Manager/ItemMain/RawText","text":"hide"},"$:/config/MissingLinks":{"title":"$:/config/MissingLinks","text":"yes"},"$:/config/Navigation/UpdateAddressBar":{"title":"$:/config/Navigation/UpdateAddressBar","text":"no"},"$:/config/Navigation/UpdateHistory":{"title":"$:/config/Navigation/UpdateHistory","text":"no"},"$:/config/NewImageType":{"title":"$:/config/NewImageType","text":"jpeg"},"$:/config/OfficialPluginLibrary":{"title":"$:/config/OfficialPluginLibrary","tags":"$:/tags/PluginLibrary","url":"https://tiddlywiki.com/library/v5.1.24/index.html","caption":"{{$:/language/OfficialPluginLibrary}}","text":"{{$:/language/OfficialPluginLibrary/Hint}}\n"},"$:/config/Navigation/openLinkFromInsideRiver":{"title":"$:/config/Navigation/openLinkFromInsideRiver","text":"below"},"$:/config/Navigation/openLinkFromOutsideRiver":{"title":"$:/config/Navigation/openLinkFromOutsideRiver","text":"top"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/advanced-search":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/advanced-search","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/close-all":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/close-all","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/encryption":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/encryption","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/export-page":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/export-page","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/fold-all":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/fold-all","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/full-screen":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/full-screen","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/home":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/home","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/refresh":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/refresh","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/import":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/import","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/language":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/language","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/tag-manager":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/tag-manager","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/manager":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/manager","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/more-page-actions":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/more-page-actions","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-journal":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-journal","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-image":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-image","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/palette":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/palette","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/permaview":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/permaview","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/print":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/print","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/storyview":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/storyview","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/timestamp":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/timestamp","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/theme":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/theme","text":"hide"},"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/unfold-all":{"title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/unfold-all","text":"hide"},"$:/config/Performance/Instrumentation":{"title":"$:/config/Performance/Instrumentation","text":"no"},"$:/config/RegisterPluginType/plugin":{"title":"$:/config/RegisterPluginType/plugin","text":"yes"},"$:/config/RegisterPluginType/theme":{"title":"$:/config/RegisterPluginType/theme","text":"no"},"$:/config/RegisterPluginType/language":{"title":"$:/config/RegisterPluginType/language","text":"no"},"$:/config/RegisterPluginType/info":{"title":"$:/config/RegisterPluginType/info","text":"yes"},"$:/config/RegisterPluginType/import":{"title":"$:/config/RegisterPluginType/import","text":"no"},"$:/config/SaverFilter":{"title":"$:/config/SaverFilter","text":"[all[]] -[prefix[$:/HistoryList]] -[prefix[$:/StoryList]] -[status[pending]plugin-type[import]] -[[$:/isEncrypted]] -[[$:/UploadName]] -[prefix[$:/state/]] -[prefix[$:/temp/]]\n"},"$:/config/SaveWikiButton/Template":{"title":"$:/config/SaveWikiButton/Template","text":"$:/core/save/all"},"$:/config/Search/AutoFocus":{"title":"$:/config/Search/AutoFocus","text":"true"},"$:/config/Search/MinLength":{"title":"$:/config/Search/MinLength","text":"3"},"$:/config/SearchResults/Default":{"title":"$:/config/SearchResults/Default","text":"$:/core/ui/DefaultSearchResultList"},"$:/config/Server/ExternalFilters/[all[tiddlers]!is[system]sort[title]]":{"title":"$:/config/Server/ExternalFilters/[all[tiddlers]!is[system]sort[title]]","text":"yes"},"$:/config/ShortcutInfo/add-field":{"title":"$:/config/ShortcutInfo/add-field","text":"{{$:/language/EditTemplate/Fields/Add/Button/Hint}}"},"$:/config/ShortcutInfo/advanced-search":{"title":"$:/config/ShortcutInfo/advanced-search","text":"{{$:/language/Buttons/AdvancedSearch/Hint}}"},"$:/config/ShortcutInfo/advanced-search-sidebar":{"title":"$:/config/ShortcutInfo/advanced-search-sidebar","text":"{{$:/language/Shortcuts/Input/AdvancedSearch/Hint}}"},"$:/config/ShortcutInfo/bold":{"title":"$:/config/ShortcutInfo/bold","text":"{{$:/language/Buttons/Bold/Hint}}"},"$:/config/ShortcutInfo/cancel-edit-tiddler":{"title":"$:/config/ShortcutInfo/cancel-edit-tiddler","text":"{{$:/language/Buttons/Cancel/Hint}}"},"$:/config/ShortcutInfo/change-sidebar-layout":{"title":"$:/config/ShortcutInfo/change-sidebar-layout","text":"{{$:/language/Shortcuts/SidebarLayout/Hint}}"},"$:/config/ShortcutInfo/delete-field":{"title":"$:/config/ShortcutInfo/delete-field","text":"{{$:/language/EditTemplate/Field/Remove/Hint}}"},"$:/config/ShortcutInfo/excise":{"title":"$:/config/ShortcutInfo/excise","text":"{{$:/language/Buttons/Excise/Hint}}"},"$:/config/ShortcutInfo/heading-1":{"title":"$:/config/ShortcutInfo/heading-1","text":"{{$:/language/Buttons/Heading1/Hint}}"},"$:/config/ShortcutInfo/heading-2":{"title":"$:/config/ShortcutInfo/heading-2","text":"{{$:/language/Buttons/Heading2/Hint}}"},"$:/config/ShortcutInfo/heading-3":{"title":"$:/config/ShortcutInfo/heading-3","text":"{{$:/language/Buttons/Heading3/Hint}}"},"$:/config/ShortcutInfo/heading-4":{"title":"$:/config/ShortcutInfo/heading-4","text":"{{$:/language/Buttons/Heading4/Hint}}"},"$:/config/ShortcutInfo/heading-5":{"title":"$:/config/ShortcutInfo/heading-5","text":"{{$:/language/Buttons/Heading5/Hint}}"},"$:/config/ShortcutInfo/heading-6":{"title":"$:/config/ShortcutInfo/heading-6","text":"{{$:/language/Buttons/Heading6/Hint}}"},"$:/config/ShortcutInfo/input-accept":{"title":"$:/config/ShortcutInfo/input-accept","text":"{{$:/language/Shortcuts/Input/Accept/Hint}}"},"$:/config/ShortcutInfo/input-accept-variant":{"title":"$:/config/ShortcutInfo/input-accept-variant","text":"{{$:/language/Shortcuts/Input/AcceptVariant/Hint}}"},"$:/config/ShortcutInfo/input-cancel":{"title":"$:/config/ShortcutInfo/input-cancel","text":"{{$:/language/Shortcuts/Input/Cancel/Hint}}"},"$:/config/ShortcutInfo/input-down":{"title":"$:/config/ShortcutInfo/input-down","text":"{{$:/language/Shortcuts/Input/Down/Hint}}"},"$:/config/ShortcutInfo/input-tab-left":{"title":"$:/config/ShortcutInfo/input-tab-left","text":"{{$:/language/Shortcuts/Input/Tab-Left/Hint}}"},"$:/config/ShortcutInfo/input-tab-right":{"title":"$:/config/ShortcutInfo/input-tab-right","text":"{{$:/language/Shortcuts/Input/Tab-Right/Hint}}"},"$:/config/ShortcutInfo/input-up":{"title":"$:/config/ShortcutInfo/input-up","text":"{{$:/language/Shortcuts/Input/Up/Hint}}"},"$:/config/ShortcutInfo/italic":{"title":"$:/config/ShortcutInfo/italic","text":"{{$:/language/Buttons/Italic/Hint}}"},"$:/config/ShortcutInfo/layout-switcher":{"title":"$:/config/ShortcutInfo/layout-switcher","text":"{{$:/language/LayoutSwitcher/Description}}"},"$:/config/ShortcutInfo/link":{"title":"$:/config/ShortcutInfo/link","text":"{{$:/language/Buttons/Link/Hint}}"},"$:/config/ShortcutInfo/linkify":{"title":"$:/config/ShortcutInfo/linkify","text":"{{$:/language/Buttons/Linkify/Hint}}"},"$:/config/ShortcutInfo/list-bullet":{"title":"$:/config/ShortcutInfo/list-bullet","text":"{{$:/language/Buttons/ListBullet/Hint}}"},"$:/config/ShortcutInfo/list-number":{"title":"$:/config/ShortcutInfo/list-number","text":"{{$:/language/Buttons/ListNumber/Hint}}"},"$:/config/ShortcutInfo/mono-block":{"title":"$:/config/ShortcutInfo/mono-block","text":"{{$:/language/Buttons/MonoBlock/Hint}}"},"$:/config/ShortcutInfo/mono-line":{"title":"$:/config/ShortcutInfo/mono-line","text":"{{$:/language/Buttons/MonoLine/Hint}}"},"$:/config/ShortcutInfo/new-image":{"title":"$:/config/ShortcutInfo/new-image","text":"{{$:/language/Buttons/NewImage/Hint}}"},"$:/config/ShortcutInfo/new-journal":{"title":"$:/config/ShortcutInfo/new-journal","text":"{{$:/language/Buttons/NewJournal/Hint}}"},"$:/config/ShortcutInfo/new-tiddler":{"title":"$:/config/ShortcutInfo/new-tiddler","text":"{{$:/language/Buttons/NewTiddler/Hint}}"},"$:/config/ShortcutInfo/picture":{"title":"$:/config/ShortcutInfo/picture","text":"{{$:/language/Buttons/Picture/Hint}}"},"$:/config/ShortcutInfo/preview":{"title":"$:/config/ShortcutInfo/preview","text":"{{$:/language/Buttons/Preview/Hint}}"},"$:/config/ShortcutInfo/quote":{"title":"$:/config/ShortcutInfo/quote","text":"{{$:/language/Buttons/Quote/Hint}}"},"$:/config/ShortcutInfo/save-tiddler":{"title":"$:/config/ShortcutInfo/save-tiddler","text":"{{$:/language/Buttons/Save/Hint}}"},"$:/config/ShortcutInfo/save-wiki":{"title":"$:/config/ShortcutInfo/save-wiki","text":"{{$:/language/Buttons/SaveWiki/Hint}}"},"$:/config/ShortcutInfo/sidebar-search":{"title":"$:/config/ShortcutInfo/sidebar-search","text":"{{$:/language/Buttons/SidebarSearch/Hint}}"},"$:/config/ShortcutInfo/stamp":{"title":"$:/config/ShortcutInfo/stamp","text":"{{$:/language/Buttons/Stamp/Hint}}"},"$:/config/ShortcutInfo/strikethrough":{"title":"$:/config/ShortcutInfo/strikethrough","text":"{{$:/language/Buttons/Strikethrough/Hint}}"},"$:/config/ShortcutInfo/subscript":{"title":"$:/config/ShortcutInfo/subscript","text":"{{$:/language/Buttons/Subscript/Hint}}"},"$:/config/ShortcutInfo/superscript":{"title":"$:/config/ShortcutInfo/superscript","text":"{{$:/language/Buttons/Superscript/Hint}}"},"$:/config/ShortcutInfo/toggle-sidebar":{"title":"$:/config/ShortcutInfo/toggle-sidebar","text":"{{$:/language/Buttons/ToggleSidebar/Hint}}"},"$:/config/ShortcutInfo/transcludify":{"title":"$:/config/ShortcutInfo/transcludify","text":"{{$:/language/Buttons/Transcludify/Hint}}"},"$:/config/ShortcutInfo/underline":{"title":"$:/config/ShortcutInfo/underline","text":"{{$:/language/Buttons/Underline/Hint}}"},"$:/config/shortcuts-mac/bold":{"title":"$:/config/shortcuts-mac/bold","text":"meta-B"},"$:/config/shortcuts-mac/input-tab-left":{"title":"$:/config/shortcuts-mac/input-tab-left","text":"ctrl-Left"},"$:/config/shortcuts-mac/input-tab-right":{"title":"$:/config/shortcuts-mac/input-tab-right","text":"ctrl-Right"},"$:/config/shortcuts-mac/italic":{"title":"$:/config/shortcuts-mac/italic","text":"meta-I"},"$:/config/shortcuts-mac/underline":{"title":"$:/config/shortcuts-mac/underline","text":"meta-U"},"$:/config/shortcuts-mac/new-image":{"title":"$:/config/shortcuts-mac/new-image","text":"ctrl-I"},"$:/config/shortcuts-mac/new-journal":{"title":"$:/config/shortcuts-mac/new-journal","text":"ctrl-J"},"$:/config/shortcuts-mac/new-tiddler":{"title":"$:/config/shortcuts-mac/new-tiddler","text":"ctrl-N"},"$:/config/shortcuts-mac/save-wiki":{"title":"$:/config/shortcuts-mac/save-wiki","text":"meta-S"},"$:/config/shortcuts-not-mac/bold":{"title":"$:/config/shortcuts-not-mac/bold","text":"ctrl-B"},"$:/config/shortcuts-not-mac/italic":{"title":"$:/config/shortcuts-not-mac/italic","text":"ctrl-I"},"$:/config/shortcuts-not-mac/underline":{"title":"$:/config/shortcuts-not-mac/underline","text":"ctrl-U"},"$:/config/shortcuts-not-mac/new-image":{"title":"$:/config/shortcuts-not-mac/new-image","text":"alt-I"},"$:/config/shortcuts-not-mac/new-journal":{"title":"$:/config/shortcuts-not-mac/new-journal","text":"alt-J"},"$:/config/shortcuts-not-mac/new-tiddler":{"title":"$:/config/shortcuts-not-mac/new-tiddler","text":"alt-N"},"$:/config/shortcuts/add-field":{"title":"$:/config/shortcuts/add-field","text":"enter"},"$:/config/shortcuts/advanced-search":{"title":"$:/config/shortcuts/advanced-search","text":"ctrl-shift-A"},"$:/config/shortcuts/advanced-search-sidebar":{"title":"$:/config/shortcuts/advanced-search-sidebar","text":"alt-Enter"},"$:/config/shortcuts/cancel-edit-tiddler":{"title":"$:/config/shortcuts/cancel-edit-tiddler","text":"escape"},"$:/config/shortcuts/change-sidebar-layout":{"title":"$:/config/shortcuts/change-sidebar-layout","text":"shift-alt-Down"},"$:/config/shortcuts/delete-field":{"title":"$:/config/shortcuts/delete-field","text":"shift-alt-D"},"$:/config/shortcuts/excise":{"title":"$:/config/shortcuts/excise","text":"ctrl-E"},"$:/config/shortcuts/sidebar-search":{"title":"$:/config/shortcuts/sidebar-search","text":"ctrl-shift-F"},"$:/config/shortcuts/heading-1":{"title":"$:/config/shortcuts/heading-1","text":"ctrl-1"},"$:/config/shortcuts/heading-2":{"title":"$:/config/shortcuts/heading-2","text":"ctrl-2"},"$:/config/shortcuts/heading-3":{"title":"$:/config/shortcuts/heading-3","text":"ctrl-3"},"$:/config/shortcuts/heading-4":{"title":"$:/config/shortcuts/heading-4","text":"ctrl-4"},"$:/config/shortcuts/heading-5":{"title":"$:/config/shortcuts/heading-5","text":"ctrl-5"},"$:/config/shortcuts/heading-6":{"title":"$:/config/shortcuts/heading-6","text":"ctrl-6"},"$:/config/shortcuts/input-accept":{"title":"$:/config/shortcuts/input-accept","text":"Enter"},"$:/config/shortcuts/input-accept-variant":{"title":"$:/config/shortcuts/input-accept-variant","text":"ctrl-Enter"},"$:/config/shortcuts/input-cancel":{"title":"$:/config/shortcuts/input-cancel","text":"Escape"},"$:/config/shortcuts/input-down":{"title":"$:/config/shortcuts/input-down","text":"Down"},"$:/config/shortcuts/input-tab-left":{"title":"$:/config/shortcuts/input-tab-left","text":"alt-Left"},"$:/config/shortcuts/input-tab-right":{"title":"$:/config/shortcuts/input-tab-right","text":"alt-Right"},"$:/config/shortcuts/input-up":{"title":"$:/config/shortcuts/input-up","text":"Up"},"$:/config/shortcuts/layout-switcher":{"title":"$:/config/shortcuts/layout-switcher","text":"ctrl-shift-L"},"$:/config/shortcuts/link":{"title":"$:/config/shortcuts/link","text":"ctrl-L"},"$:/config/shortcuts/linkify":{"title":"$:/config/shortcuts/linkify","text":"alt-shift-L"},"$:/config/shortcuts/list-bullet":{"title":"$:/config/shortcuts/list-bullet","text":"ctrl-shift-L"},"$:/config/shortcuts/list-number":{"title":"$:/config/shortcuts/list-number","text":"ctrl-shift-N"},"$:/config/shortcuts/mono-block":{"title":"$:/config/shortcuts/mono-block","text":"ctrl-shift-M"},"$:/config/shortcuts/mono-line":{"title":"$:/config/shortcuts/mono-line","text":"ctrl-M"},"$:/config/shortcuts/picture":{"title":"$:/config/shortcuts/picture","text":"ctrl-shift-I"},"$:/config/shortcuts/preview":{"title":"$:/config/shortcuts/preview","text":"alt-P"},"$:/config/shortcuts/quote":{"title":"$:/config/shortcuts/quote","text":"ctrl-Q"},"$:/config/shortcuts/save-tiddler":{"title":"$:/config/shortcuts/save-tiddler","text":"ctrl+enter"},"$:/config/shortcuts/save-wiki":{"title":"$:/config/shortcuts/save-wiki","text":"ctrl-S"},"$:/config/shortcuts/stamp":{"title":"$:/config/shortcuts/stamp","text":"ctrl-S"},"$:/config/shortcuts/strikethrough":{"title":"$:/config/shortcuts/strikethrough","text":"ctrl-T"},"$:/config/shortcuts/subscript":{"title":"$:/config/shortcuts/subscript","text":"ctrl-shift-B"},"$:/config/shortcuts/superscript":{"title":"$:/config/shortcuts/superscript","text":"ctrl-shift-P"},"$:/config/shortcuts/toggle-sidebar":{"title":"$:/config/shortcuts/toggle-sidebar","text":"alt-shift-S"},"$:/config/shortcuts/transcludify":{"title":"$:/config/shortcuts/transcludify","text":"alt-shift-T"},"$:/config/SwitcherTargets/layout":{"title":"$:/config/SwitcherTargets/layout","text":"$:/snippets/LayoutSwitcher"},"$:/config/SwitcherTargets/language":{"title":"$:/config/SwitcherTargets/language","text":"$:/snippets/languageswitcher"},"$:/config/SwitcherTargets/palette":{"title":"$:/config/SwitcherTargets/palette","text":"$:/core/ui/ControlPanel/Palette"},"$:/config/SwitcherTargets/theme":{"title":"$:/config/SwitcherTargets/theme","text":"$:/core/ui/ControlPanel/Theme"},"$:/config/SyncFilter":{"title":"$:/config/SyncFilter","text":"[is[tiddler]] -[[$:/core]] -[[$:/library/sjcl.js]] -[prefix[$:/boot/]] -[prefix[$:/HistoryList]] -[status[pending]plugin-type[import]] -[[$:/isEncrypted]] -[prefix[$:/status/]] -[prefix[$:/state/]] -[prefix[$:/temp/]]\n"},"$:/config/SyncSystemTiddlersFromServer":{"title":"$:/config/SyncSystemTiddlersFromServer","text":"no"},"$:/config/Tags/MinLength":{"title":"$:/config/Tags/MinLength","text":"0"},"$:/config/TextEditor/EditorHeight/Height":{"title":"$:/config/TextEditor/EditorHeight/Height","text":"400px"},"$:/config/TextEditor/EditorHeight/Mode":{"title":"$:/config/TextEditor/EditorHeight/Mode","text":"auto"},"$:/config/TiddlerInfo/Default":{"title":"$:/config/TiddlerInfo/Default","text":"$:/core/ui/TiddlerInfo/Fields"},"$:/config/TiddlerInfo/Mode":{"title":"$:/config/TiddlerInfo/Mode","text":"popup"},"$:/config/Tiddlers/TitleLinks":{"title":"$:/config/Tiddlers/TitleLinks","text":"no"},"$:/config/Toolbar/ButtonClass":{"title":"$:/config/Toolbar/ButtonClass","text":"tc-btn-invisible"},"$:/config/Toolbar/Icons":{"title":"$:/config/Toolbar/Icons","text":"yes"},"$:/config/Toolbar/Text":{"title":"$:/config/Toolbar/Text","text":"no"},"$:/config/ui/EditTemplate":{"title":"$:/config/ui/EditTemplate","text":"$:/core/ui/EditTemplate"},"$:/config/ui/ViewTemplate":{"title":"$:/config/ui/ViewTemplate","text":"$:/core/ui/ViewTemplate"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/clone":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/clone","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/close-others":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/close-others","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/export-tiddler":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/export-tiddler","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/info":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/info","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/more-tiddler-actions":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/more-tiddler-actions","text":"show"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/new-here":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/new-here","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/new-journal-here":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/new-journal-here","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/open-window":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/open-window","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/permalink":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/permalink","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/permaview":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/permaview","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/delete":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/delete","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold-bar":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold-bar","text":"hide"},"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold-others":{"title":"$:/config/ViewToolbarButtons/Visibility/$:/core/ui/Buttons/fold-others","text":"hide"},"$:/config/WikiParserRules/Inline/wikilink":{"title":"$:/config/WikiParserRules/Inline/wikilink","text":"enable"},"$:/snippets/currpalettepreview":{"title":"$:/snippets/currpalettepreview","text":"\\define resolve-colour(macrocall)\n\\import $:/core/macros/utils\n\\whitespace trim\n&lt;$wikify name=\"name\" text=\"\"\"$macrocall$\"\"\"&gt;\n&lt;&lt;name&gt;&gt;\n&lt;/$wikify&gt;\n\\end\n\\define swatchStyle()\nbackground-color: $(swatchColour)$;\n\\end\n\\define swatch-inner()\n&lt;$set name=\"swatchColour\" value={{##$(colourResolved)$}}&gt;\n&lt;$list filter=\"[&lt;swatchColour&gt;!prefix[&lt;&lt;colour ]!suffix[&gt;&gt;]]\" variable=\"ignore\"&gt;\n&lt;div class=\"tc-swatch\" style=&lt;&lt;swatchStyle&gt;&gt; title=&lt;&lt;swatchTitle&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;swatchColour&gt;prefix[&lt;&lt;colour ]suffix[&gt;&gt;]]\" variable=\"ignore\"&gt;\n&lt;$wikify name=\"colourResolved\" text=\"\"\"&lt;$macrocall $name=\"resolve-colour\" macrocall=&lt;&lt;swatchColour&gt;&gt;/&gt;\"\"\"&gt;\n&lt;&lt;swatch-inner&gt;&gt;\n&lt;/$wikify&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\\define swatch()\n&lt;$set name=\"swatchColour\" value={{##$(colour)$}}&gt;\n&lt;$set name=\"swatchTitle\" value=&lt;&lt;colour&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;swatchColour&gt;!prefix[&lt;&lt;colour ]!suffix[&gt;&gt;]]\" variable=\"ignore\"&gt;\n&lt;div class=\"tc-swatch\" style=&lt;&lt;swatchStyle&gt;&gt; title=&lt;&lt;swatchTitle&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;swatchColour&gt;prefix[&lt;&lt;colour ]suffix[&gt;&gt;]]\" variable=\"ignore\"&gt;\n&lt;$wikify name=\"colourResolved\" text=\"\"\"&lt;$macrocall $name=\"resolve-colour\" macrocall=&lt;&lt;swatchColour&gt;&gt;/&gt;\"\"\"&gt;\n&lt;&lt;swatch-inner&gt;&gt;\n&lt;/$wikify&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n\\end\n&lt;div class=\"tc-swatches-horiz\"&gt;&lt;$list filter=\"\nforeground\nbackground\nmuted-foreground\nprimary\npage-background\ntab-background\ntiddler-info-background\n\" variable=\"colour\"&gt;&lt;&lt;swatch&gt;&gt;&lt;/$list&gt;&lt;/div&gt;\n"},"$:/DefaultTiddlers":{"title":"$:/DefaultTiddlers","text":"GettingStarted\n"},"$:/snippets/download-wiki-button":{"title":"$:/snippets/download-wiki-button","text":"\\define lingo-base() $:/language/ControlPanel/Tools/Download/\n&lt;$button class=\"tc-btn-big-green\"&gt;\n&lt;$action-sendmessage $message=\"tm-download-file\" $param=\"$:/core/save/all\" filename=\"index.html\"/&gt;\n&lt;&lt;lingo Full/Caption&gt;&gt; {{$:/core/images/save-button}}\n&lt;/$button&gt;"},"$:/language":{"title":"$:/language","text":"$:/languages/en-GB"},"$:/snippets/languageswitcher":{"title":"$:/snippets/languageswitcher","text":"\\define flag-title()\n$(languagePluginTitle)$/icon\n\\end\n\n&lt;$linkcatcher to=\"$:/language\"&gt;\n&lt;div class=\"tc-chooser tc-language-chooser\"&gt;\n&lt;$list filter=\"[[$:/languages/en-GB]] [plugin-type[language]sort[description]]\"&gt;\n&lt;$set name=\"cls\" filter=\"[all[current]field:title{$:/language}]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;\n&lt;$link&gt;\n&lt;span class=\"tc-image-button\"&gt;\n&lt;$set name=\"languagePluginTitle\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$transclude subtiddler=&lt;&lt;flag-title&gt;&gt;&gt;\n&lt;$list filter=\"[all[current]field:title[$:/languages/en-GB]]\"&gt;\n&lt;$transclude tiddler=\"$:/languages/en-GB/icon\"/&gt;\n&lt;/$list&gt;\n&lt;/$transclude&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n&lt;$view field=\"description\"&gt;\n&lt;$view field=\"name\"&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$view&gt;\n&lt;/$view&gt;\n&lt;/$link&gt;\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;"},"$:/core/macros/colour-picker":{"title":"$:/core/macros/colour-picker","tags":"$:/tags/Macro","text":"\\define colour-picker-update-recent()\n&lt;$action-listops\n\t$tiddler=\"$:/config/ColourPicker/Recent\"\n\t$subfilter=\"$(colour-picker-value)$ [list[$:/config/ColourPicker/Recent]remove[$(colour-picker-value)$]] +[limit[8]]\"\n/&gt;\n\\end\n\n\\define colour-picker-inner(actions)\n&lt;$button tag=\"a\" tooltip=\"\"\"$(colour-picker-value)$\"\"\"&gt;\n\n$(colour-picker-update-recent)$\n\n$actions$\n\n&lt;span style=\"display:inline-block; background-color: $(colour-picker-value)$; width: 100%; height: 100%; border-radius: 50%;\"/&gt;\n\n&lt;/$button&gt;\n\\end\n\n\\define colour-picker-recent-inner(actions)\n&lt;$set name=\"colour-picker-value\" value=\"$(recentColour)$\"&gt;\n&lt;$macrocall $name=\"colour-picker-inner\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$set&gt;\n\\end\n\n\\define colour-picker-recent(actions)\n{{$:/language/ColourPicker/Recent}} &lt;$list filter=\"[list[$:/config/ColourPicker/Recent]]\" variable=\"recentColour\"&gt;\n&lt;$macrocall $name=\"colour-picker-recent-inner\" actions=\"\"\"$actions$\"\"\"/&gt;&lt;/$list&gt;\n\\end\n\n\\define colour-picker(actions)\n&lt;div class=\"tc-colour-chooser\"&gt;\n\n&lt;$macrocall $name=\"colour-picker-recent\" actions=\"\"\"$actions$\"\"\"/&gt;\n\n---\n\n&lt;$list filter=\"LightPink Pink Crimson LavenderBlush PaleVioletRed HotPink DeepPink MediumVioletRed Orchid Thistle Plum Violet Magenta Fuchsia DarkMagenta Purple MediumOrchid DarkViolet DarkOrchid Indigo BlueViolet MediumPurple MediumSlateBlue SlateBlue DarkSlateBlue Lavender GhostWhite Blue MediumBlue MidnightBlue DarkBlue Navy RoyalBlue CornflowerBlue LightSteelBlue LightSlateGrey SlateGrey DodgerBlue AliceBlue SteelBlue LightSkyBlue SkyBlue DeepSkyBlue LightBlue PowderBlue CadetBlue Azure LightCyan PaleTurquoise Cyan Aqua DarkTurquoise DarkSlateGrey DarkCyan Teal MediumTurquoise LightSeaGreen Turquoise Aquamarine MediumAquamarine MediumSpringGreen MintCream SpringGreen MediumSeaGreen SeaGreen Honeydew LightGreen PaleGreen DarkSeaGreen LimeGreen Lime ForestGreen Green DarkGreen Chartreuse LawnGreen GreenYellow DarkOliveGreen YellowGreen OliveDrab Beige LightGoldenrodYellow Ivory LightYellow Yellow Olive DarkKhaki LemonChiffon PaleGoldenrod Khaki Gold Cornsilk Goldenrod DarkGoldenrod FloralWhite OldLace Wheat Moccasin Orange PapayaWhip BlanchedAlmond NavajoWhite AntiqueWhite Tan BurlyWood Bisque DarkOrange Linen Peru PeachPuff SandyBrown Chocolate SaddleBrown Seashell Sienna LightSalmon Coral OrangeRed DarkSalmon Tomato MistyRose Salmon Snow LightCoral RosyBrown IndianRed Red Brown FireBrick DarkRed Maroon White WhiteSmoke Gainsboro LightGrey Silver DarkGrey Grey DimGrey Black\" variable=\"colour-picker-value\"&gt;\n&lt;$macrocall $name=\"colour-picker-inner\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$list&gt;\n\n---\n\n&lt;$edit-text tiddler=\"$:/config/ColourPicker/New\" tag=\"input\" default=\"\" placeholder=\"\"/&gt;\n&lt;$edit-text tiddler=\"$:/config/ColourPicker/New\" type=\"color\" tag=\"input\"/&gt;\n&lt;$set name=\"colour-picker-value\" value={{$:/config/ColourPicker/New}}&gt;\n&lt;$macrocall $name=\"colour-picker-inner\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$set&gt;\n\n&lt;/div&gt;\n\n\\end\n"},"$:/core/macros/copy-to-clipboard":{"title":"$:/core/macros/copy-to-clipboard","tags":"$:/tags/Macro","text":"\\define copy-to-clipboard(src,class:\"tc-btn-invisible\",style)\n&lt;$button class=&lt;&lt;__class__&gt;&gt; style=&lt;&lt;__style__&gt;&gt; message=\"tm-copy-to-clipboard\" param=&lt;&lt;__src__&gt;&gt; tooltip={{$:/language/Buttons/CopyToClipboard/Hint}}&gt;\n{{$:/core/images/copy-clipboard}} &lt;$text text={{$:/language/Buttons/CopyToClipboard/Caption}}/&gt;\n&lt;/$button&gt;\n\\end\n\n\\define copy-to-clipboard-above-right(src,class:\"tc-btn-invisible\",style)\n&lt;div style=\"position: relative;\"&gt;\n&lt;div style=\"position: absolute; bottom: 0; right: 0;\"&gt;\n&lt;$macrocall $name=\"copy-to-clipboard\" src=&lt;&lt;__src__&gt;&gt; class=&lt;&lt;__class__&gt;&gt; style=&lt;&lt;__style__&gt;&gt;/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\\end\n\n"},"$:/core/macros/CSS":{"title":"$:/core/macros/CSS","tags":"$:/tags/Macro","text":"\\define colour(name)\n&lt;$transclude tiddler={{$:/palette}} index=\"$name$\"&gt;&lt;$transclude tiddler=\"$:/palettes/Vanilla\" index=\"$name$\"&gt;&lt;$transclude tiddler=\"$:/config/DefaultColourMappings/$name$\"/&gt;&lt;/$transclude&gt;&lt;/$transclude&gt;\n\\end\n\n\\define color(name)\n&lt;&lt;colour $name$&gt;&gt;\n\\end\n\n\\define box-shadow(shadow)\n``\n  -webkit-box-shadow: $shadow$;\n     -moz-box-shadow: $shadow$;\n          box-shadow: $shadow$;\n``\n\\end\n\n\\define filter(filter)\n``\n  -webkit-filter: $filter$;\n     -moz-filter: $filter$;\n          filter: $filter$;\n``\n\\end\n\n\\define transition(transition)\n``\n  -webkit-transition: $transition$;\n     -moz-transition: $transition$;\n          transition: $transition$;\n``\n\\end\n\n\\define transform-origin(origin)\n``\n  -webkit-transform-origin: $origin$;\n     -moz-transform-origin: $origin$;\n          transform-origin: $origin$;\n``\n\\end\n\n\\define background-linear-gradient(gradient)\n``\nbackground-image: linear-gradient($gradient$);\nbackground-image: -o-linear-gradient($gradient$);\nbackground-image: -moz-linear-gradient($gradient$);\nbackground-image: -webkit-linear-gradient($gradient$);\nbackground-image: -ms-linear-gradient($gradient$);\n``\n\\end\n\n\\define column-count(columns)\n``\n-moz-column-count: $columns$;\n-webkit-column-count: $columns$;\ncolumn-count: $columns$;\n``\n\\end\n\n\\define datauri(title)\n&lt;$macrocall $name=\"makedatauri\" type={{$title$!!type}} text={{$title$}} _canonical_uri={{$title$!!_canonical_uri}}/&gt;\n\\end\n\n\\define if-sidebar(text)\n&lt;$reveal state=\"$:/state/sidebar\" type=\"match\" text=\"yes\" default=\"yes\"&gt;$text$&lt;/$reveal&gt;\n\\end\n\n\\define if-no-sidebar(text)\n&lt;$reveal state=\"$:/state/sidebar\" type=\"nomatch\" text=\"yes\" default=\"yes\"&gt;$text$&lt;/$reveal&gt;\n\\end\n\n\\define if-background-attachment(text)\n&lt;$reveal state=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimage\" type=\"nomatch\" text=\"\"&gt;$text$&lt;/$reveal&gt;\n\\end\n"},"$:/core/macros/diff":{"title":"$:/core/macros/diff","tags":"$:/tags/Macro","text":"\\define compareTiddlerText(sourceTiddlerTitle,sourceSubTiddlerTitle,destTiddlerTitle,destSubTiddlerTitle)\n&lt;$set name=\"source\" tiddler=&lt;&lt;__sourceTiddlerTitle__&gt;&gt; subtiddler=&lt;&lt;__sourceSubTiddlerTitle__&gt;&gt;&gt;\n&lt;$set name=\"dest\" tiddler=&lt;&lt;__destTiddlerTitle__&gt;&gt; subtiddler=&lt;&lt;__destSubTiddlerTitle__&gt;&gt;&gt;\n&lt;$diff-text source=&lt;&lt;source&gt;&gt; dest=&lt;&lt;dest&gt;&gt;/&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n\\end\n\n\\define compareTiddlers(sourceTiddlerTitle,sourceSubTiddlerTitle,destTiddlerTitle,destSubTiddlerTitle,exclude)\n&lt;table class=\"tc-diff-tiddlers\"&gt;\n&lt;tbody&gt;\n&lt;$set name=\"sourceFields\" filter=\"[&lt;__sourceTiddlerTitle__&gt;fields[]sort[]]\"&gt;\n&lt;$set name=\"destFields\" filter=\"[&lt;__destSubTiddlerTitle__&gt;subtiddlerfields&lt;__destTiddlerTitle__&gt;sort[]]\"&gt;\n&lt;$list filter=\"[enlist&lt;sourceFields&gt;] [enlist&lt;destFields&gt;] -[enlist&lt;__exclude__&gt;] +[sort[]]\" variable=\"fieldName\"&gt;\n&lt;tr&gt;\n&lt;th&gt;\n&lt;$text text=&lt;&lt;fieldName&gt;&gt;/&gt; \n&lt;/th&gt;\n&lt;td&gt;\n&lt;$set name=\"source\" tiddler=&lt;&lt;__sourceTiddlerTitle__&gt;&gt; subtiddler=&lt;&lt;__sourceSubTiddlerTitle__&gt;&gt; field=&lt;&lt;fieldName&gt;&gt;&gt;\n&lt;$set name=\"dest\" tiddler=&lt;&lt;__destTiddlerTitle__&gt;&gt; subtiddler=&lt;&lt;__destSubTiddlerTitle__&gt;&gt; field=&lt;&lt;fieldName&gt;&gt;&gt;\n&lt;$diff-text source=&lt;&lt;source&gt;&gt; dest=&lt;&lt;dest&gt;&gt;&gt;\n&lt;/$diff-text&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/$set&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n\\end\n"},"$:/core/macros/dumpvariables":{"title":"$:/core/macros/dumpvariables","tags":"$:/tags/Macro","text":"\\define dumpvariables()\n&lt;ul&gt;\n&lt;$list filter=\"[variables[]]\" variable=\"varname\"&gt;\n&lt;li&gt;\n&lt;strong&gt;&lt;code&gt;&lt;$text text=&lt;&lt;varname&gt;&gt;/&gt;&lt;/code&gt;&lt;/strong&gt;:&lt;br/&gt;\n&lt;$codeblock code={{{ [&lt;varname&gt;getvariable[]] }}}/&gt;\n&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n\\end\n"},"$:/core/macros/export":{"title":"$:/core/macros/export","tags":"$:/tags/Macro","text":"\\define exportButtonFilename(baseFilename)\n$baseFilename$$(extension)$\n\\end\n\n\\define exportButton(exportFilter:\"[!is[system]sort[title]]\",lingoBase,baseFilename:\"tiddlers\")\n\\whitespace trim\n&lt;$vars hint={{{ [&lt;__lingoBase__&gt;addsuffix[Hint]get[text]] }}} caption={{{  [&lt;__lingoBase__&gt;addsuffix[Caption]get[text]] }}}&gt;\n&lt;span class=\"tc-popup-keep\"&gt;&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/export\"&gt;&gt; tooltip=&lt;&lt;hint&gt;&gt; aria-label=&lt;&lt;caption&gt;&gt; class=&lt;&lt;tv-config-toolbar-class&gt;&gt; selectedClass=\"tc-selected\"&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-icons&gt;match[yes]]\"&gt;\n{{$:/core/images/export-button}}\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;tv-config-toolbar-text&gt;match[yes]]\"&gt;\n&lt;span class=\"tc-btn-text\"&gt;&lt;$text text=&lt;&lt;caption&gt;&gt;/&gt;&lt;/span&gt;\n&lt;/$list&gt;\n&lt;/$button&gt;&lt;/span&gt;&lt;/$vars&gt;&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/export\"&gt;&gt; type=\"popup\" position=\"below\" animate=\"yes\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$set name=\"count\" value={{{ [subfilter&lt;__exportFilter__&gt;count[]] }}}&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Exporter]]\"&gt;\n&lt;$list filter=\"[&lt;currentTiddler&gt;has[condition]subfilter{!!condition}limit[1]] ~[&lt;currentTiddler&gt;!has[condition]then[true]]\" variable=\"ignore\"&gt;\n&lt;$button class=\"tc-btn-invisible\"&gt;\n&lt;$action-sendmessage $message=\"tm-download-file\" $param=&lt;&lt;currentTiddler&gt;&gt; exportFilter=&lt;&lt;__exportFilter__&gt;&gt; filename={{{ [&lt;__baseFilename__&gt;addsuffix{!!extension}] }}}/&gt;\n&lt;$action-deletetiddler $tiddler=&lt;&lt;qualify \"$:/state/popup/export\"&gt;&gt;/&gt;\n&lt;$transclude field=\"description\"/&gt;\n&lt;/$button&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n\\end\n"},"$:/core/macros/image-picker":{"title":"$:/core/macros/image-picker","created":"20170715180840889","modified":"20170715180914005","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define image-picker-thumbnail(actions)\n&lt;$button tag=\"a\" tooltip=\"\"\"$(imageTitle)$\"\"\"&gt;\n$actions$\n&lt;$transclude tiddler=&lt;&lt;imageTitle&gt;&gt;/&gt;\n&lt;/$button&gt;\n\\end\n\n\\define image-picker-list(filter,actions)\n&lt;$list filter=\"\"\"$filter$\"\"\" variable=\"imageTitle\"&gt;\n&lt;$macrocall $name=\"image-picker-thumbnail\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$list&gt;\n\\end\n\n\\define image-picker(actions,filter:\"[all[shadows+tiddlers]is[image]] -[type[application/pdf]] +[!has[draft.of]$subfilter$sort[title]]\",subfilter:\"\")\n&lt;div class=\"tc-image-chooser\"&gt;\n&lt;$vars state-system=&lt;&lt;qualify \"$:/state/image-picker/system\"&gt;&gt;&gt;\n&lt;$checkbox tiddler=&lt;&lt;state-system&gt;&gt; field=\"text\" checked=\"show\" unchecked=\"hide\" default=\"hide\"&gt;\n{{$:/language/SystemTiddlers/Include/Prompt}}\n&lt;/$checkbox&gt;\n&lt;$reveal state=&lt;&lt;state-system&gt;&gt; type=\"match\" text=\"hide\" default=\"hide\" tag=\"div\"&gt;\n&lt;$macrocall $name=\"image-picker-list\" filter=\"\"\"$filter$ +[!is[system]]\"\"\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$reveal&gt;\n&lt;$reveal state=&lt;&lt;state-system&gt;&gt; type=\"nomatch\" text=\"hide\" default=\"hide\" tag=\"div\"&gt;\n&lt;$macrocall $name=\"image-picker-list\" filter=\"\"\"$filter$\"\"\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/$reveal&gt;\n&lt;/$vars&gt;\n&lt;/div&gt;\n\\end\n\n\\define image-picker-include-tagged-images(actions)\n&lt;$macrocall $name=\"image-picker\" filter=\"[all[shadows+tiddlers]is[image]] [all[shadows+tiddlers]tag[$:/tags/Image]] -[type[application/pdf]] +[!has[draft.of]sort[title]]\" actions=\"\"\"$actions$\"\"\"/&gt;\n\\end\n"},"$:/core/macros/keyboard-driven-input":{"title":"$:/core/macros/keyboard-driven-input","tags":"$:/tags/Macro","text":"\\define change-input-tab(stateTitle,tag,beforeafter,defaultState,actions)\n&lt;$set name=\"tabsList\" filter=\"[all[shadows+tiddlers]tag&lt;__tag__&gt;!has[draft.of]]\"&gt;\n&lt;$vars currentState={{{ [&lt;__stateTitle__&gt;!is[missing]get[text]] ~[&lt;__defaultState__&gt;] }}} firstTab={{{ [enlist&lt;tabsList&gt;nth[1]] }}} lastTab={{{ [enlist&lt;tabsList&gt;last[]] }}}&gt;\n&lt;$set name=\"nextTab\" value={{{ [all[shadows+tiddlers]tag&lt;__tag__&gt;!has[draft.of]$beforeafter$&lt;currentState&gt;] ~[[$beforeafter$]removeprefix[after]suffix[]addprefix&lt;firstTab&gt;] ~[[$beforeafter$]removeprefix[before]suffix[]addprefix&lt;lastTab&gt;] }}}&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__stateTitle__&gt;&gt; text=&lt;&lt;nextTab&gt;&gt;/&gt;\n$actions$\n&lt;/$set&gt;\n&lt;/$vars&gt;\n&lt;/$set&gt;\n\\end\n\n\\define keyboard-input-actions()\n&lt;$list filter=\"[&lt;__index__&gt;match[]]\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__storeTitle__&gt;&gt; text={{{ [&lt;__tiddler__&gt;get&lt;__field__&gt;] }}}/&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;__index__&gt;!match[]]\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__storeTitle__&gt;&gt; text={{{ [&lt;__tiddler__&gt;getindex&lt;__index__&gt;] }}}/&gt;\n&lt;/$list&gt;\n\\end\n\n\\define input-next-actions-inner()\n&lt;$list filter=\"[&lt;nextItem&gt;minlength[1]]\" variable=\"ignore\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__selectionStateTitle__&gt;&gt; text=&lt;&lt;nextItem&gt;&gt;/&gt;\n&lt;$list filter=\"[&lt;__index__&gt;match[]]\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__tiddler__&gt;&gt; $field=&lt;&lt;__field__&gt;&gt; $value={{{ [&lt;nextItem&gt;] +[splitregexp[(?:.(?!-))+$]] }}}/&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;__index__&gt;!match[]]\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__tiddler__&gt;&gt; $index=&lt;&lt;__index__&gt;&gt; $value={{{ [&lt;nextItem&gt;] +[splitregexp[(?:.(?!-))+$]] }}}/&gt;\n&lt;/$list&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;__refreshTitle__&gt;&gt; text=\"yes\"/&gt;\n&lt;/$list&gt;\n\\end\n\n\\define input-next-actions(afterOrBefore:\"after\",reverse:\"\")\n&lt;$list filter=\"[&lt;__storeTitle__&gt;get[text]minlength&lt;__filterMinLength__&gt;] [&lt;__filterMinLength__&gt;match[0]] +[limit[1]]\" variable=\"ignore\"&gt;\n&lt;$vars userInput={{{ [&lt;__storeTitle__&gt;get[text]] }}} selectedItem={{{ [&lt;__selectionStateTitle__&gt;get[text]] }}}&gt;\n&lt;$set name=\"configTiddler\" value={{{ [subfilter&lt;__configTiddlerFilter__&gt;] }}}&gt;\n&lt;$vars primaryListFilter={{{ [&lt;configTiddler&gt;get&lt;__firstSearchFilterField__&gt;] }}} secondaryListFilter={{{ [&lt;configTiddler&gt;get&lt;__secondSearchFilterField__&gt;] }}}&gt;\n&lt;$set name=\"filteredList\" filter=\"[subfilter&lt;primaryListFilter&gt;addsuffix[-primaryList]] =[subfilter&lt;secondaryListFilter&gt;addsuffix[-secondaryList]]\"&gt;\n&lt;$vars nextItem={{{ [enlist&lt;filteredList&gt;$afterOrBefore$&lt;selectedItem&gt;] ~[enlist&lt;filteredList&gt;$reverse$nth[1]] }}} firstItem={{{ [enlist&lt;filteredList&gt;nth[1]] }}} lastItem={{{ [enlist&lt;filteredList&gt;last[]] }}}&gt;\n&lt;$list filter=\"[&lt;selectedItem&gt;match&lt;firstItem&gt;!match&lt;lastItem&gt;]\" variable=\"ignore\"&gt;\n&lt;$set name=\"nextItem\" value={{{ [[$afterOrBefore$]match[before]then&lt;userInput&gt;addsuffix[-userInput]] ~[&lt;nextItem&gt;] }}}&gt;\n&lt;&lt;input-next-actions-inner&gt;&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;selectedItem&gt;match&lt;lastItem&gt;!match&lt;firstItem&gt;]\" variable=\"ignore\"&gt;\n&lt;$set name=\"nextItem\" value={{{ [[$afterOrBefore$]match[after]then&lt;userInput&gt;addsuffix[-userInput]] ~[&lt;nextItem&gt;] }}}&gt;\n&lt;&lt;input-next-actions-inner&gt;&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;selectedItem&gt;match&lt;firstItem&gt;match&lt;lastItem&gt;]\" variable=\"ignore\"&gt;\n&lt;$set name=\"nextItem\" value={{{ [&lt;userInput&gt;addsuffix[-userInput]] }}}&gt;\n&lt;&lt;input-next-actions-inner&gt;&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;selectedItem&gt;!match&lt;firstItem&gt;!match&lt;lastItem&gt;]\" variable=\"ignore\"&gt;\n&lt;&lt;input-next-actions-inner&gt;&gt;\n&lt;/$list&gt;\n&lt;/$vars&gt;\n&lt;/$set&gt;\n&lt;/$vars&gt;\n&lt;/$set&gt;\n&lt;/$vars&gt;\n&lt;/$list&gt;\n\\end\n\n\\define keyboard-driven-input(tiddler,storeTitle,field:\"text\",index:\"\",tag:\"input\",type,focus:\"\",inputAcceptActions,inputAcceptVariantActions,inputCancelActions,placeholder:\"\",default:\"\",class,focusPopup,rows,minHeight,tabindex,size,autoHeight,filterMinLength:\"0\",refreshTitle,selectionStateTitle,cancelPopups:\"\",configTiddlerFilter,firstSearchFilterField:\"first-search-filter\",secondSearchFilterField:\"second-search-filter\")\n\\whitespace trim\n&lt;$keyboard key=\"((input-accept))\" actions=&lt;&lt;__inputAcceptActions__&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-accept-variant))\" actions=&lt;&lt;__inputAcceptVariantActions__&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-up))\" actions=&lt;&lt;input-next-actions \"before\" \"reverse[]\"&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-down))\" actions=&lt;&lt;input-next-actions&gt;&gt;&gt;\n&lt;$keyboard key=\"((input-cancel))\" actions=&lt;&lt;__inputCancelActions__&gt;&gt;&gt;\n&lt;$edit-text tiddler=&lt;&lt;__tiddler__&gt;&gt; field=&lt;&lt;__field__&gt;&gt; index=&lt;&lt;__index__&gt;&gt; \n\t\tinputActions=&lt;&lt;keyboard-input-actions&gt;&gt; tag=&lt;&lt;__tag__&gt;&gt; class=&lt;&lt;__class__&gt;&gt; \n\t\tplaceholder=&lt;&lt;__placeholder__&gt;&gt; default=&lt;&lt;__default__&gt;&gt; focusPopup=&lt;&lt;__focusPopup__&gt;&gt; \n\t\tfocus=&lt;&lt;__focus__&gt;&gt; type=&lt;&lt;__type__&gt;&gt; rows=&lt;&lt;__rows__&gt;&gt; minHeight=&lt;&lt;__minHeight__&gt;&gt; \n\t\ttabindex=&lt;&lt;__tabindex__&gt;&gt; size=&lt;&lt;__size__&gt;&gt; autoHeight=&lt;&lt;__autoHeight__&gt;&gt; \n\t\trefreshTitle=&lt;&lt;__refreshTitle__&gt;&gt; cancelPopups=&lt;&lt;__cancelPopups__&gt;&gt;/&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n&lt;/$keyboard&gt;\n\\end\n"},"$:/core/macros/lingo":{"title":"$:/core/macros/lingo","tags":"$:/tags/Macro","text":"\\define lingo-base()\n$:/language/\n\\end\n\n\\define lingo(title)\n{{$(lingo-base)$$title$}}\n\\end\n"},"$:/core/macros/list":{"title":"$:/core/macros/list","tags":"$:/tags/Macro","text":"\\define list-links(filter,type:\"ul\",subtype:\"li\",class:\"\",emptyMessage)\n\\whitespace trim\n&lt;$type$ class=\"$class$\"&gt;\n&lt;$list filter=\"$filter$\" emptyMessage=&lt;&lt;__emptyMessage__&gt;&gt;&gt;\n&lt;$subtype$&gt;\n&lt;$link to={{!!title}}&gt;\n&lt;$transclude field=\"caption\"&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$transclude&gt;\n&lt;/$link&gt;\n&lt;/$subtype$&gt;\n&lt;/$list&gt;\n&lt;/$type$&gt;\n\\end\n\n\\define list-links-draggable-drop-actions()\n&lt;$action-listops $tiddler=&lt;&lt;targetTiddler&gt;&gt; $field=&lt;&lt;targetField&gt;&gt; $subfilter=\"+[insertbefore:currentTiddler&lt;actionTiddler&gt;]\"/&gt;\n\\end\n\n\\define list-links-draggable(tiddler,field:\"list\",type:\"ul\",subtype:\"li\",class:\"\",itemTemplate)\n\\whitespace trim\n&lt;span class=\"tc-links-draggable-list\"&gt;\n&lt;$vars targetTiddler=\"\"\"$tiddler$\"\"\" targetField=\"\"\"$field$\"\"\"&gt;\n&lt;$type$ class=\"$class$\"&gt;\n&lt;$list filter=\"[list[$tiddler$!!$field$]]\"&gt;\n&lt;$droppable actions=&lt;&lt;list-links-draggable-drop-actions&gt;&gt; tag=\"\"\"$subtype$\"\"\" enable=&lt;&lt;tv-enable-drag-and-drop&gt;&gt;&gt;\n&lt;div class=\"tc-droppable-placeholder\"/&gt;\n&lt;div&gt;\n&lt;$transclude tiddler=\"\"\"$itemTemplate$\"\"\"&gt;\n&lt;$link to={{!!title}}&gt;\n&lt;$transclude field=\"caption\"&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$transclude&gt;\n&lt;/$link&gt;\n&lt;/$transclude&gt;\n&lt;/div&gt;\n&lt;/$droppable&gt;\n&lt;/$list&gt;\n&lt;$tiddler tiddler=\"\"&gt;\n&lt;$droppable actions=&lt;&lt;list-links-draggable-drop-actions&gt;&gt; tag=\"div\" enable=&lt;&lt;tv-enable-drag-and-drop&gt;&gt;&gt;\n&lt;div class=\"tc-droppable-placeholder\"&gt;\n{{$:/core/images/blank}}\n&lt;/div&gt;\n&lt;div style=\"height:0.5em;\"/&gt;\n&lt;/$droppable&gt;\n&lt;/$tiddler&gt;\n&lt;/$type$&gt;\n&lt;/$vars&gt;\n&lt;/span&gt;\n\\end\n\n\\define list-tagged-draggable-drop-actions(tag)\n&lt;!-- Save the current ordering of the tiddlers with this tag --&gt;\n&lt;$set name=\"order\" filter=\"[&lt;__tag__&gt;tagging[]]\"&gt;\n&lt;!-- Remove any list-after or list-before fields from the tiddlers with this tag --&gt;\n&lt;$list filter=\"[&lt;__tag__&gt;tagging[]]\"&gt;\n&lt;$action-deletefield $field=\"list-before\"/&gt;\n&lt;$action-deletefield $field=\"list-after\"/&gt;\n&lt;/$list&gt;\n&lt;!-- Save the new order to the Tag Tiddler --&gt;\n&lt;$action-listops $tiddler=&lt;&lt;__tag__&gt;&gt; $field=\"list\" $filter=\"+[enlist&lt;order&gt;] +[insertbefore:currentTiddler&lt;actionTiddler&gt;]\"/&gt;\n&lt;!-- Make sure the newly added item has the right tag --&gt;\n&lt;!-- Removing this line makes dragging tags within the dropdown work as intended --&gt;\n&lt;!--&lt;$action-listops $tiddler=&lt;&lt;actionTiddler&gt;&gt; $tags=&lt;&lt;__tag__&gt;&gt;/&gt;--&gt;\n&lt;!-- Using the following 5 lines as replacement makes dragging titles from outside into the dropdown apply the tag --&gt;\n&lt;$list filter=\"[&lt;actionTiddler&gt;!contains:tags&lt;__tag__&gt;]\"&gt;\n&lt;$fieldmangler tiddler=&lt;&lt;actionTiddler&gt;&gt;&gt;\n&lt;$action-sendmessage $message=\"tm-add-tag\" $param=&lt;&lt;__tag__&gt;&gt;/&gt;\n&lt;/$fieldmangler&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define list-tagged-draggable(tag,subFilter,emptyMessage,itemTemplate,elementTag:\"div\",storyview:\"\")\n\\whitespace trim\n&lt;span class=\"tc-tagged-draggable-list\"&gt;\n&lt;$set name=\"tag\" value=&lt;&lt;__tag__&gt;&gt;&gt;\n&lt;$list filter=\"[&lt;__tag__&gt;tagging[]$subFilter$]\" emptyMessage=&lt;&lt;__emptyMessage__&gt;&gt; storyview=&lt;&lt;__storyview__&gt;&gt;&gt;\n&lt;$elementTag$ class=\"tc-menu-list-item\"&gt;\n&lt;$droppable actions=\"\"\"&lt;$macrocall $name=\"list-tagged-draggable-drop-actions\" tag=&lt;&lt;__tag__&gt;&gt;/&gt;\"\"\" enable=&lt;&lt;tv-enable-drag-and-drop&gt;&gt;&gt;\n&lt;$elementTag$ class=\"tc-droppable-placeholder\"/&gt;\n&lt;$elementTag$&gt;\n&lt;$transclude tiddler=\"\"\"$itemTemplate$\"\"\"&gt;\n&lt;$link to={{!!title}}&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$link&gt;\n&lt;/$transclude&gt;\n&lt;/$elementTag$&gt;\n&lt;/$droppable&gt;\n&lt;/$elementTag$&gt;\n&lt;/$list&gt;\n&lt;$tiddler tiddler=\"\"&gt;\n&lt;$droppable actions=\"\"\"&lt;$macrocall $name=\"list-tagged-draggable-drop-actions\" tag=&lt;&lt;__tag__&gt;&gt;/&gt;\"\"\" enable=&lt;&lt;tv-enable-drag-and-drop&gt;&gt;&gt;\n&lt;$elementTag$ class=\"tc-droppable-placeholder\"/&gt;\n&lt;$elementTag$ style=\"height:0.5em;\"&gt;\n&lt;/$elementTag$&gt;\n&lt;/$droppable&gt;\n&lt;/$tiddler&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n\\end\n"},"$:/core/macros/tabs":{"title":"$:/core/macros/tabs","tags":"$:/tags/Macro","text":"\\define tabs(tabsList,default,state:\"$:/state/tab\",class,template,buttonTemplate,retain,actions,explicitState)\n&lt;$set name=\"qualifiedState\" value=&lt;&lt;qualify \"$state$\"&gt;&gt;&gt;\n&lt;$vars tabsState={{{ [&lt;__explicitState__&gt;minlength[1]] ~[&lt;qualifiedState&gt;] }}}&gt;\n&lt;div class=\"tc-tab-set $class$\"&gt;\n&lt;div class=\"tc-tab-buttons $class$\"&gt;\n&lt;$list filter=\"$tabsList$\" variable=\"currentTab\" storyview=\"pop\"&gt;&lt;$set name=\"save-currentTiddler\" value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;$tiddler tiddler=&lt;&lt;currentTab&gt;&gt;&gt;&lt;$button set=&lt;&lt;tabsState&gt;&gt; setTo=&lt;&lt;currentTab&gt;&gt; default=\"$default$\" selectedClass=\"tc-tab-selected\" tooltip={{!!tooltip}}&gt;\n&lt;$tiddler tiddler=&lt;&lt;save-currentTiddler&gt;&gt;&gt;\n&lt;$set name=\"tv-wikilinks\" value=\"no\"&gt;\n&lt;$transclude tiddler=\"$buttonTemplate$\" mode=\"inline\"&gt;\n&lt;$transclude tiddler=&lt;&lt;currentTab&gt;&gt; field=\"caption\"&gt;\n&lt;$macrocall $name=\"currentTab\" $type=\"text/plain\" $output=\"text/plain\"/&gt;\n&lt;/$transclude&gt;\n&lt;/$transclude&gt;\n&lt;/$set&gt;&lt;/$tiddler&gt;$actions$&lt;/$button&gt;&lt;/$tiddler&gt;&lt;/$set&gt;&lt;/$list&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-tab-divider $class$\"/&gt;\n&lt;div class=\"tc-tab-content $class$\"&gt;\n&lt;$list filter=\"$tabsList$\" variable=\"currentTab\"&gt;\n\n&lt;$reveal type=\"match\" state=&lt;&lt;tabsState&gt;&gt; text=&lt;&lt;currentTab&gt;&gt; default=\"$default$\" retain=\"\"\"$retain$\"\"\"&gt;\n\n&lt;$transclude tiddler=\"$template$\" mode=\"block\"&gt;\n\n&lt;$transclude tiddler=&lt;&lt;currentTab&gt;&gt; mode=\"block\"/&gt;\n\n&lt;/$transclude&gt;\n\n&lt;/$reveal&gt;\n\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$vars&gt;\n&lt;/$set&gt;\n\\end\n"},"$:/core/macros/tag-picker":{"title":"$:/core/macros/tag-picker","tags":"$:/tags/Macro","first-search-filter":"[tags[]!is[system]search:title&lt;userInput&gt;sort[]]","second-search-filter":"[tags[]is[system]search:title&lt;userInput&gt;sort[]]","text":"\\define get-tagpicker-focus-selector() [data-tiddler-title=\"$(currentTiddlerCSSEscaped)$\"] .tc-add-tag-name input\n\n\\define delete-tag-state-tiddlers() &lt;$action-deletetiddler $filter=\"[&lt;newTagNameTiddler&gt;] [&lt;storeTitle&gt;] [&lt;tagSelectionState&gt;]\"/&gt;\n\n\\define add-tag-actions(actions,tagField:\"tags\")\n&lt;$set name=\"tag\" value={{{ [&lt;__tiddler__&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[&lt;saveTiddler&gt;!contains:$tagField$&lt;tag&gt;!match[]]\" variable=\"ignore\" emptyMessage=\"\"\"\n&lt;$action-listops $tiddler=&lt;&lt;saveTiddler&gt;&gt; $field=&lt;&lt;__tagField__&gt;&gt; $subfilter=\"-[&lt;tag&gt;]\"/&gt;\n\"\"\"&gt;\n&lt;$action-listops $tiddler=&lt;&lt;saveTiddler&gt;&gt; $field=&lt;&lt;__tagField__&gt;&gt; $subfilter=\"[&lt;tag&gt;]\"/&gt;\n$actions$\n&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;&lt;delete-tag-state-tiddlers&gt;&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;refreshTitle&gt;&gt; text=\"yes\"/&gt;\n\\end\n\n\\define clear-tags-actions-inner()\n&lt;$list filter=\"[&lt;storeTitle&gt;has[text]] [&lt;newTagNameTiddler&gt;has[text]]\" variable=\"ignore\" emptyMessage=\"\"\"&lt;&lt;cancel-delete-tiddler-actions \"cancel\"&gt;&gt;\"\"\"&gt;\n&lt;&lt;delete-tag-state-tiddlers&gt;&gt;\n&lt;/$list&gt;\n\\end\n\n\\define clear-tags-actions()\n&lt;$set name=\"userInput\" value={{{ [&lt;storeTitle&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[&lt;newTagNameTiddler&gt;get[text]!match&lt;userInput&gt;]\" emptyMessage=\"\"\"&lt;&lt;clear-tags-actions-inner&gt;&gt;\"\"\"&gt;\n&lt;$action-setfield $tiddler=&lt;&lt;newTagNameTiddler&gt;&gt; text=&lt;&lt;userInput&gt;&gt;/&gt;&lt;$action-setfield $tiddler=&lt;&lt;refreshTitle&gt;&gt; text=\"yes\"/&gt;\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define tag-picker-inner(actions,tagField:\"tags\")\n\\whitespace trim\n&lt;$vars newTagNameInputTiddlerQualified=&lt;&lt;qualify \"$:/temp/NewTagName/input\"&gt;&gt; newTagNameSelectionTiddlerQualified=&lt;&lt;qualify \"$:/temp/NewTagName/selected-item\"&gt;&gt; fallbackTarget={{$(palette)$##tag-background}} colourA={{$(palette)$##foreground}} colourB={{$(palette)$##background}}&gt;\n&lt;$vars storeTitle={{{ [&lt;newTagNameInputTiddler&gt;!match[]] ~[&lt;newTagNameInputTiddlerQualified&gt;] }}} tagSelectionState={{{ [&lt;newTagNameSelectionTiddler&gt;!match[]] ~[&lt;newTagNameSelectionTiddlerQualified&gt;] }}}&gt;\n&lt;$vars refreshTitle=&lt;&lt;qualify \"$:/temp/NewTagName/refresh\"&gt;&gt; nonSystemTagsFilter=\"[tags[]!is[system]search:title&lt;userInput&gt;sort[]]\" systemTagsFilter=\"[tags[]is[system]search:title&lt;userInput&gt;sort[]]\"&gt;\n&lt;div class=\"tc-edit-add-tag\"&gt;\n&lt;div&gt;\n&lt;span class=\"tc-add-tag-name tc-small-gap-right\"&gt;\n&lt;$macrocall $name=\"keyboard-driven-input\" tiddler=&lt;&lt;newTagNameTiddler&gt;&gt; storeTitle=&lt;&lt;storeTitle&gt;&gt; refreshTitle=&lt;&lt;refreshTitle&gt;&gt;\n\t\tselectionStateTitle=&lt;&lt;tagSelectionState&gt;&gt; inputAcceptActions=\"\"\"&lt;$macrocall $name=\"add-tag-actions\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\"\"\"\n\t\tinputCancelActions=&lt;&lt;clear-tags-actions&gt;&gt; tag=\"input\" placeholder={{$:/language/EditTemplate/Tags/Add/Placeholder}}\n\t\tfocusPopup=&lt;&lt;qualify \"$:/state/popup/tags-auto-complete\"&gt;&gt; class=\"tc-edit-texteditor tc-popup-handle\" tabindex=&lt;&lt;tabIndex&gt;&gt; \n\t\tfocus={{{ [{$:/config/AutoFocus}match[tags]then[true]] ~[[false]] }}} filterMinLength={{$:/config/Tags/MinLength}} \n\t\tcancelPopups=&lt;&lt;cancelPopups&gt;&gt; configTiddlerFilter=\"[[$:/core/macros/tag-picker]]\"/&gt;\n&lt;/span&gt;&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/tags-auto-complete\"&gt;&gt; class=\"tc-btn-invisible tc-btn-dropdown\" tooltip={{$:/language/EditTemplate/Tags/Dropdown/Hint}} aria-label={{$:/language/EditTemplate/Tags/Dropdown/Caption}}&gt;{{$:/core/images/down-arrow}}&lt;/$button&gt;&lt;$reveal state=&lt;&lt;storeTitle&gt;&gt; type=\"nomatch\" text=\"\"&gt;&lt;$button class=\"tc-btn-invisible tc-small-gap tc-btn-dropdown\" tooltip={{$:/language/EditTemplate/Tags/ClearInput/Hint}} aria-label={{$:/language/EditTemplate/Tags/ClearInput/Caption}}&gt;{{$:/core/images/close-button}}&lt;&lt;delete-tag-state-tiddlers&gt;&gt;&lt;/$button&gt;&lt;/$reveal&gt;&lt;span class=\"tc-add-tag-button tc-small-gap-left\"&gt;\n&lt;$set name=\"tag\" value={{{ [&lt;newTagNameTiddler&gt;get[text]] }}}&gt;\n&lt;$button set=&lt;&lt;newTagNameTiddler&gt;&gt; setTo=\"\" class=\"\"&gt;\n&lt;$action-listops $tiddler=&lt;&lt;saveTiddler&gt;&gt; $field=&lt;&lt;__tagField__&gt;&gt; $subfilter=\"[&lt;tag&gt;]\"/&gt;\n$actions$\n&lt;$set name=\"currentTiddlerCSSEscaped\" value={{{ [&lt;saveTiddler&gt;escapecss[]] }}}&gt;\n&lt;&lt;delete-tag-state-tiddlers&gt;&gt;&lt;$action-sendmessage $message=\"tm-focus-selector\" $param=&lt;&lt;get-tagpicker-focus-selector&gt;&gt;/&gt;\n&lt;/$set&gt;\n{{$:/language/EditTemplate/Tags/Add/Button}}\n&lt;/$button&gt;\n&lt;/$set&gt;\n&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=\"tc-block-dropdown-wrapper\"&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/tags-auto-complete\"&gt;&gt; type=\"nomatch\" text=\"\" default=\"\"&gt;\n&lt;div class=\"tc-block-dropdown tc-block-tags-dropdown\"&gt;\n&lt;$set name=\"userInput\" value={{{ [&lt;storeTitle&gt;get[text]] }}}&gt;\n&lt;$list filter=\"[&lt;userInput&gt;minlength{$:/config/Tags/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n&lt;$list filter=&lt;&lt;nonSystemTagsFilter&gt;&gt; variable=\"tag\"&gt;\n&lt;$list filter=\"[&lt;tag&gt;addsuffix[-primaryList]] -[&lt;tagSelectionState&gt;get[text]]\" emptyMessage=\"\"\"&lt;$vars button-classes=\"tc-btn-invisible tc-tag-button-selected\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt; currentTiddler=&lt;&lt;tag&gt;&gt;&gt;{{||$:/core/ui/TagPickerTagTemplate}}&lt;/$vars&gt;\"\"\"&gt;\n&lt;$vars button-classes=\"tc-btn-invisible\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt; currentTiddler=&lt;&lt;tag&gt;&gt;&gt;{{||$:/core/ui/TagPickerTagTemplate}}&lt;/$vars&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;&lt;/$list&gt;\n&lt;hr&gt;\n&lt;$list filter=\"[&lt;userInput&gt;minlength{$:/config/Tags/MinLength}limit[1]]\" emptyMessage=\"\"\"&lt;div class=\"tc-search-results\"&gt;{{$:/language/Search/Search/TooShort}}&lt;/div&gt;\"\"\" variable=\"listItem\"&gt;\n&lt;$list filter=&lt;&lt;systemTagsFilter&gt;&gt; variable=\"tag\"&gt;\n&lt;$list filter=\"[&lt;tag&gt;addsuffix[-secondaryList]] -[&lt;tagSelectionState&gt;get[text]]\" emptyMessage=\"\"\"&lt;$vars button-classes=\"tc-btn-invisible tc-tag-button-selected\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt; currentTiddler=&lt;&lt;tag&gt;&gt;&gt;{{||$:/core/ui/TagPickerTagTemplate}}&lt;/$vars&gt;\"\"\"&gt;\n&lt;$vars button-classes=\"tc-btn-invisible\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt; currentTiddler=&lt;&lt;tag&gt;&gt;&gt;{{||$:/core/ui/TagPickerTagTemplate}}&lt;/$vars&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;&lt;/$list&gt;\n&lt;/$set&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/$vars&gt;\n&lt;/$vars&gt;\n&lt;/$vars&gt;\n\\end\n\\define tag-picker(actions,tagField:\"tags\")\n\\whitespace trim\n&lt;$vars saveTiddler=&lt;&lt;currentTiddler&gt;&gt; palette={{$:/palette}}&gt;\n&lt;$list filter=\"[&lt;newTagNameTiddler&gt;match[]]\" emptyMessage=\"\"\"&lt;$macrocall $name=\"tag-picker-inner\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\"\"\"&gt;\n&lt;$set name=\"newTagNameTiddler\" value=&lt;&lt;qualify \"$:/temp/NewTagName\"&gt;&gt;&gt;\n&lt;$macrocall $name=\"tag-picker-inner\" actions=&lt;&lt;__actions__&gt;&gt; tagField=&lt;&lt;__tagField__&gt;&gt;/&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/$vars&gt;\n\\end\n"},"$:/core/macros/tag":{"title":"$:/core/macros/tag","tags":"$:/tags/Macro","text":"\\define tag-pill-styles()\nbackground-color:$(backgroundColor)$;\nfill:$(foregroundColor)$;\ncolor:$(foregroundColor)$;\n\\end\n\n\\define tag-pill-inner(tag,icon,colour,fallbackTarget,colourA,colourB,element-tag,element-attributes,actions)\n&lt;$vars foregroundColor=&lt;&lt;contrastcolour target:\"\"\"$colour$\"\"\" fallbackTarget:\"\"\"$fallbackTarget$\"\"\" colourA:\"\"\"$colourA$\"\"\" colourB:\"\"\"$colourB$\"\"\"&gt;&gt; backgroundColor=\"\"\"$colour$\"\"\"&gt;\n&lt;$element-tag$ $element-attributes$ class=\"tc-tag-label tc-btn-invisible\" style=&lt;&lt;tag-pill-styles&gt;&gt;&gt;\n$actions$&lt;$transclude tiddler=\"\"\"$icon$\"\"\"/&gt;&lt;$view tiddler=&lt;&lt;__tag__&gt;&gt; field=\"title\" format=\"text\" /&gt;\n&lt;/$element-tag$&gt;\n&lt;/$vars&gt;\n\\end\n\n\\define tag-pill-body(tag,icon,colour,palette,element-tag,element-attributes,actions)\n&lt;$macrocall $name=\"tag-pill-inner\" tag=&lt;&lt;__tag__&gt;&gt; icon=\"\"\"$icon$\"\"\" colour=\"\"\"$colour$\"\"\" fallbackTarget={{$palette$##tag-background}} colourA={{$palette$##foreground}} colourB={{$palette$##background}} element-tag=\"\"\"$element-tag$\"\"\" element-attributes=\"\"\"$element-attributes$\"\"\" actions=\"\"\"$actions$\"\"\"/&gt;\n\\end\n\n\\define tag-pill(tag,element-tag:\"span\",element-attributes:\"\",actions:\"\")\n&lt;span class=\"tc-tag-list-item\" data-tag-title=&lt;&lt;__tag__&gt;&gt;&gt;\n&lt;$macrocall $name=\"tag-pill-body\" tag=&lt;&lt;__tag__&gt;&gt; icon={{{ [&lt;__tag__&gt;get[icon]] }}} colour={{{ [&lt;__tag__&gt;get[color]] }}} palette={{$:/palette}} element-tag=\"\"\"$element-tag$\"\"\" element-attributes=\"\"\"$element-attributes$\"\"\" actions=\"\"\"$actions$\"\"\"/&gt;\n&lt;/span&gt;\n\\end\n\n\\define tag(tag)\n{{$tag$||$:/core/ui/TagTemplate}}\n\\end\n"},"$:/core/macros/thumbnails":{"title":"$:/core/macros/thumbnails","tags":"$:/tags/Macro","text":"\\define thumbnail(link,icon,color,background-color,image,caption,width:\"280\",height:\"157\")\n&lt;$link to=\"\"\"$link$\"\"\"&gt;&lt;div class=\"tc-thumbnail-wrapper\"&gt;\n&lt;div class=\"tc-thumbnail-image\" style=\"width:$width$px;height:$height$px;\"&gt;&lt;$reveal type=\"nomatch\" text=\"\" default=\"\"\"$image$\"\"\" tag=\"div\" style=\"width:$width$px;height:$height$px;\"&gt;\n[img[$image$]]\n&lt;/$reveal&gt;&lt;$reveal type=\"match\" text=\"\" default=\"\"\"$image$\"\"\" tag=\"div\" class=\"tc-thumbnail-background\" style=\"width:$width$px;height:$height$px;background-color:$background-color$;\"&gt;&lt;/$reveal&gt;&lt;/div&gt;&lt;div class=\"tc-thumbnail-icon\" style=\"fill:$color$;color:$color$;\"&gt;\n$icon$\n&lt;/div&gt;&lt;div class=\"tc-thumbnail-caption\"&gt;\n$caption$\n&lt;/div&gt;\n&lt;/div&gt;&lt;/$link&gt;\n\\end\n\n\\define thumbnail-right(link,icon,color,background-color,image,caption,width:\"280\",height:\"157\")\n&lt;div class=\"tc-thumbnail-right-wrapper\"&gt;&lt;&lt;thumbnail \"\"\"$link$\"\"\" \"\"\"$icon$\"\"\" \"\"\"$color$\"\"\" \"\"\"$background-color$\"\"\" \"\"\"$image$\"\"\" \"\"\"$caption$\"\"\" \"\"\"$width$\"\"\" \"\"\"$height$\"\"\"&gt;&gt;&lt;/div&gt;\n\\end\n\n\\define list-thumbnails(filter,width:\"280\",height:\"157\")\n&lt;$list filter=\"\"\"$filter$\"\"\"&gt;&lt;$macrocall $name=\"thumbnail\" link={{!!link}} icon={{!!icon}} color={{!!color}} background-color={{!!background-color}} image={{!!image}} caption={{!!caption}} width=\"\"\"$width$\"\"\" height=\"\"\"$height$\"\"\"/&gt;&lt;/$list&gt;\n\\end\n"},"$:/core/macros/timeline":{"title":"$:/core/macros/timeline","created":"20141212105914482","modified":"20141212110330815","tags":"$:/tags/Macro","text":"\\define timeline-title()\n\\whitespace trim\n&lt;!-- Override this macro with a global macro \n     of the same name if you need to change \n     how titles are displayed on the timeline \n     --&gt;\n&lt;$view field=\"title\"/&gt;\n\\end\n\\define timeline(limit:\"100\",format:\"DDth MMM YYYY\",subfilter:\"\",dateField:\"modified\")\n&lt;div class=\"tc-timeline\"&gt;\n&lt;$list filter=\"[!is[system]$subfilter$has[$dateField$]!sort[$dateField$]limit[$limit$]eachday[$dateField$]]\"&gt;\n&lt;div class=\"tc-menu-list-item\"&gt;\n&lt;$view field=\"$dateField$\" format=\"date\" template=\"$format$\"/&gt;\n&lt;$list filter=\"[sameday:$dateField${!!$dateField$}!is[system]$subfilter$!sort[$dateField$]]\"&gt;\n&lt;div class=\"tc-menu-list-subitem\"&gt;\n&lt;$link to={{!!title}}&gt;&lt;&lt;timeline-title&gt;&gt;&lt;/$link&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n\\end\n"},"$:/core/macros/toc":{"title":"$:/core/macros/toc","tags":"$:/tags/Macro","text":"\\define toc-caption()\n&lt;$set name=\"tv-wikilinks\" value=\"no\"&gt;\n  &lt;$transclude field=\"caption\"&gt;\n    &lt;$view field=\"title\"/&gt;\n  &lt;/$transclude&gt;\n&lt;/$set&gt;\n\\end\n\n\\define toc-body(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;ol class=\"tc-toc\"&gt;\n  &lt;$list filter=\"\"\"[all[shadows+tiddlers]tag&lt;__tag__&gt;!has[draft.of]$sort$] -[&lt;__tag__&gt;] -[enlist&lt;__exclude__&gt;]\"\"\"&gt;\n    &lt;$vars item=&lt;&lt;currentTiddler&gt;&gt; path={{{ [&lt;__path__&gt;addsuffix[/]addsuffix&lt;__tag__&gt;] }}}&gt;\n      &lt;$set name=\"excluded\" filter=\"\"\"[enlist&lt;__exclude__&gt;] [&lt;__tag__&gt;]\"\"\"&gt;\n        &lt;$set name=\"toc-item-class\" filter=&lt;&lt;__itemClassFilter__&gt;&gt; emptyValue=\"toc-item-selected\" value=\"toc-item\"&gt;\n          &lt;li class=&lt;&lt;toc-item-class&gt;&gt;&gt;\n            &lt;$list filter=\"[all[current]toc-link[no]]\" emptyMessage=\"&lt;$link to={{{ [&lt;currentTiddler&gt;get[target]else&lt;currentTiddler&gt;] }}}&gt;&lt;$view field='caption'&gt;&lt;$view field='title'/&gt;&lt;/$view&gt;&lt;/$link&gt;\"&gt;\n              &lt;&lt;toc-caption&gt;&gt;\n            &lt;/$list&gt;\n            &lt;$macrocall $name=\"toc-body\" tag=&lt;&lt;item&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;excluded&gt;&gt; path=&lt;&lt;path&gt;&gt;/&gt;\n          &lt;/li&gt;\n        &lt;/$set&gt;\n      &lt;/$set&gt;\n    &lt;/$vars&gt;\n  &lt;/$list&gt;\n&lt;/ol&gt;\n\\end\n\n\\define toc(tag,sort:\"\",itemClassFilter:\"\")\n&lt;$macrocall $name=\"toc-body\"  tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; /&gt;\n\\end\n\n\\define toc-linked-expandable-body(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;!-- helper function --&gt;\n&lt;$qualify name=\"toc-state\" title={{{ [[$:/state/toc]addsuffix&lt;__path__&gt;addsuffix[-]addsuffix&lt;currentTiddler&gt;] }}}&gt;\n  &lt;$set name=\"toc-item-class\" filter=&lt;&lt;__itemClassFilter__&gt;&gt; emptyValue=\"toc-item-selected\" value=\"toc-item\"&gt;\n    &lt;li class=&lt;&lt;toc-item-class&gt;&gt;&gt;\n    &lt;$link to={{{ [&lt;currentTiddler&gt;get[target]else&lt;currentTiddler&gt;] }}}&gt;\n      &lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"open\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n          {{$:/core/images/right-arrow}}\n        &lt;/$button&gt;\n      &lt;/$reveal&gt;\n      &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"close\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n          {{$:/core/images/down-arrow}}\n        &lt;/$button&gt;\n      &lt;/$reveal&gt;\n      &lt;&lt;toc-caption&gt;&gt;\n    &lt;/$link&gt;\n    &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n      &lt;$macrocall $name=\"toc-expandable\" tag=&lt;&lt;currentTiddler&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;__exclude__&gt;&gt; path=&lt;&lt;__path__&gt;&gt;/&gt;\n    &lt;/$reveal&gt;\n    &lt;/li&gt;\n  &lt;/$set&gt;\n&lt;/$qualify&gt;\n\\end\n\n\\define toc-unlinked-expandable-body(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;!-- helper function --&gt;\n&lt;$qualify name=\"toc-state\" title={{{ [[$:/state/toc]addsuffix&lt;__path__&gt;addsuffix[-]addsuffix&lt;currentTiddler&gt;] }}}&gt;\n  &lt;$set name=\"toc-item-class\" filter=&lt;&lt;__itemClassFilter__&gt;&gt; emptyValue=\"toc-item-selected\" value=\"toc-item\"&gt;\n    &lt;li class=&lt;&lt;toc-item-class&gt;&gt;&gt;\n      &lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"open\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n          {{$:/core/images/right-arrow}}\n          &lt;&lt;toc-caption&gt;&gt;\n        &lt;/$button&gt;\n      &lt;/$reveal&gt;\n      &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"close\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n          {{$:/core/images/down-arrow}}\n          &lt;&lt;toc-caption&gt;&gt;\n        &lt;/$button&gt;\n      &lt;/$reveal&gt;\n      &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$macrocall $name=\"toc-expandable\" tag=&lt;&lt;currentTiddler&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;__exclude__&gt;&gt; path=&lt;&lt;__path__&gt;&gt;/&gt;\n      &lt;/$reveal&gt;\n    &lt;/li&gt;\n  &lt;/$set&gt;\n&lt;/$qualify&gt;\n\\end\n\n\\define toc-expandable-empty-message()\n&lt;$macrocall $name=\"toc-linked-expandable-body\" tag=&lt;&lt;tag&gt;&gt; sort=&lt;&lt;sort&gt;&gt; itemClassFilter=&lt;&lt;itemClassFilter&gt;&gt; exclude=&lt;&lt;excluded&gt;&gt; path=&lt;&lt;path&gt;&gt;/&gt;\n\\end\n\n\\define toc-expandable(tag,sort:\"\",itemClassFilter:\"\",exclude,path)\n&lt;$vars tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; path={{{ [&lt;__path__&gt;addsuffix[/]addsuffix&lt;__tag__&gt;] }}}&gt;\n  &lt;$set name=\"excluded\" filter=\"\"\"[enlist&lt;__exclude__&gt;] [&lt;__tag__&gt;]\"\"\"&gt;\n    &lt;ol class=\"tc-toc toc-expandable\"&gt;\n      &lt;$list filter=\"\"\"[all[shadows+tiddlers]tag&lt;__tag__&gt;!has[draft.of]$sort$] -[&lt;__tag__&gt;] -[enlist&lt;__exclude__&gt;]\"\"\"&gt;\n        &lt;$list filter=\"[all[current]toc-link[no]]\" emptyMessage=&lt;&lt;toc-expandable-empty-message&gt;&gt; &gt;\n          &lt;$macrocall $name=\"toc-unlinked-expandable-body\" tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=\"\"\"itemClassFilter\"\"\" exclude=&lt;&lt;excluded&gt;&gt; path=&lt;&lt;path&gt;&gt; /&gt;\n        &lt;/$list&gt;\n      &lt;/$list&gt;\n    &lt;/ol&gt;\n  &lt;/$set&gt;\n&lt;/$vars&gt;\n\\end\n\n\\define toc-linked-selective-expandable-body(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;$qualify name=\"toc-state\" title={{{ [[$:/state/toc]addsuffix&lt;__path__&gt;addsuffix[-]addsuffix&lt;currentTiddler&gt;] }}}&gt;\n  &lt;$set name=\"toc-item-class\" filter=&lt;&lt;__itemClassFilter__&gt;&gt; emptyValue=\"toc-item-selected\" value=\"toc-item\" &gt;\n    &lt;li class=&lt;&lt;toc-item-class&gt;&gt;&gt;\n      &lt;$link to={{{ [&lt;currentTiddler&gt;get[target]else&lt;currentTiddler&gt;] }}}&gt;\n          &lt;$list filter=\"[all[current]tagging[]$sort$limit[1]]\" variable=\"ignore\" emptyMessage=\"&lt;$button class='tc-btn-invisible'&gt;{{$:/core/images/blank}}&lt;/$button&gt;\"&gt;\n          &lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n            &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"open\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n              {{$:/core/images/right-arrow}}\n            &lt;/$button&gt;\n          &lt;/$reveal&gt;\n          &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n            &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"close\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n              {{$:/core/images/down-arrow}}\n            &lt;/$button&gt;\n          &lt;/$reveal&gt;\n        &lt;/$list&gt;\n        &lt;&lt;toc-caption&gt;&gt;\n      &lt;/$link&gt;\n      &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$macrocall $name=\"toc-selective-expandable\" tag=&lt;&lt;currentTiddler&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;__exclude__&gt;&gt; path=&lt;&lt;__path__&gt;&gt;/&gt;\n      &lt;/$reveal&gt;\n    &lt;/li&gt;\n  &lt;/$set&gt;\n&lt;/$qualify&gt;\n\\end\n\n\\define toc-unlinked-selective-expandable-body(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;$qualify name=\"toc-state\" title={{{ [[$:/state/toc]addsuffix&lt;__path__&gt;addsuffix[-]addsuffix&lt;currentTiddler&gt;] }}}&gt;\n  &lt;$set name=\"toc-item-class\" filter=&lt;&lt;__itemClassFilter__&gt;&gt; emptyValue=\"toc-item-selected\" value=\"toc-item\"&gt;\n    &lt;li class=&lt;&lt;toc-item-class&gt;&gt;&gt;\n      &lt;$list filter=\"[all[current]tagging[]$sort$limit[1]]\" variable=\"ignore\" emptyMessage=\"&lt;$button class='tc-btn-invisible'&gt;{{$:/core/images/blank}}&lt;/$button&gt; &lt;$view field='caption'&gt;&lt;$view field='title'/&gt;&lt;/$view&gt;\"&gt;\n        &lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n          &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"open\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n            {{$:/core/images/right-arrow}}\n            &lt;&lt;toc-caption&gt;&gt;\n          &lt;/$button&gt;\n        &lt;/$reveal&gt;\n        &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n          &lt;$button setTitle=&lt;&lt;toc-state&gt;&gt; setTo=\"close\" class=\"tc-btn-invisible tc-popup-keep\"&gt;\n            {{$:/core/images/down-arrow}}\n            &lt;&lt;toc-caption&gt;&gt;\n          &lt;/$button&gt;\n        &lt;/$reveal&gt;\n      &lt;/$list&gt;\n      &lt;$reveal type=\"match\" stateTitle=&lt;&lt;toc-state&gt;&gt; text=\"open\"&gt;\n        &lt;$macrocall $name=\"toc-selective-expandable\" tag=&lt;&lt;currentTiddler&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;__exclude__&gt;&gt; path=&lt;&lt;__path__&gt;&gt;/&gt;\n      &lt;/$reveal&gt;\n    &lt;/li&gt;\n  &lt;/$set&gt;\n&lt;/$qualify&gt;\n\\end\n\n\\define toc-selective-expandable-empty-message()\n&lt;$macrocall $name=\"toc-linked-selective-expandable-body\" tag=&lt;&lt;tag&gt;&gt; sort=&lt;&lt;sort&gt;&gt; itemClassFilter=&lt;&lt;itemClassFilter&gt;&gt; exclude=&lt;&lt;excluded&gt;&gt; path=&lt;&lt;path&gt;&gt;/&gt;\n\\end\n\n\\define toc-selective-expandable(tag,sort:\"\",itemClassFilter,exclude,path)\n&lt;$vars tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; path={{{ [&lt;__path__&gt;addsuffix[/]addsuffix&lt;__tag__&gt;] }}}&gt;\n  &lt;$set name=\"excluded\" filter=\"\"\"[enlist&lt;__exclude__&gt;] [&lt;__tag__&gt;]\"\"\"&gt;\n    &lt;ol class=\"tc-toc toc-selective-expandable\"&gt;\n      &lt;$list filter=\"\"\"[all[shadows+tiddlers]tag&lt;__tag__&gt;!has[draft.of]$sort$] -[&lt;__tag__&gt;] -[enlist&lt;__exclude__&gt;]\"\"\"&gt;\n        &lt;$list filter=\"[all[current]toc-link[no]]\" variable=\"ignore\" emptyMessage=&lt;&lt;toc-selective-expandable-empty-message&gt;&gt; &gt;\n          &lt;$macrocall $name=\"toc-unlinked-selective-expandable-body\" tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=&lt;&lt;__itemClassFilter__&gt;&gt; exclude=&lt;&lt;excluded&gt;&gt; path=&lt;&lt;path&gt;&gt;/&gt;\n        &lt;/$list&gt;\n      &lt;/$list&gt;\n    &lt;/ol&gt;\n  &lt;/$set&gt;\n&lt;/$vars&gt;\n\\end\n\n\\define toc-tabbed-external-nav(tag,sort:\"\",selectedTiddler:\"$:/temp/toc/selectedTiddler\",unselectedText,missingText,template:\"\")\n&lt;$tiddler tiddler={{{ [&lt;__selectedTiddler__&gt;get[text]] }}}&gt;\n  &lt;div class=\"tc-tabbed-table-of-contents\"&gt;\n    &lt;$linkcatcher to=&lt;&lt;__selectedTiddler__&gt;&gt;&gt;\n      &lt;div class=\"tc-table-of-contents\"&gt;\n        &lt;$macrocall $name=\"toc-selective-expandable\" tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; itemClassFilter=\"[all[current]] -[&lt;__selectedTiddler__&gt;get[text]]\"/&gt;\n      &lt;/div&gt;\n    &lt;/$linkcatcher&gt;\n    &lt;div class=\"tc-tabbed-table-of-contents-content\"&gt;\n      &lt;$reveal stateTitle=&lt;&lt;__selectedTiddler__&gt;&gt; type=\"nomatch\" text=\"\"&gt;\n        &lt;$transclude mode=\"block\" tiddler=&lt;&lt;__template__&gt;&gt;&gt;\n          &lt;h1&gt;&lt;&lt;toc-caption&gt;&gt;&lt;/h1&gt;\n          &lt;$transclude mode=\"block\"&gt;$missingText$&lt;/$transclude&gt;\n        &lt;/$transclude&gt;\n      &lt;/$reveal&gt;\n      &lt;$reveal stateTitle=&lt;&lt;__selectedTiddler__&gt;&gt; type=\"match\" text=\"\"&gt;\n        $unselectedText$\n      &lt;/$reveal&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/$tiddler&gt;\n\\end\n\n\\define toc-tabbed-internal-nav(tag,sort:\"\",selectedTiddler:\"$:/temp/toc/selectedTiddler\",unselectedText,missingText,template:\"\")\n&lt;$linkcatcher to=&lt;&lt;__selectedTiddler__&gt;&gt;&gt;\n  &lt;$macrocall $name=\"toc-tabbed-external-nav\" tag=&lt;&lt;__tag__&gt;&gt; sort=&lt;&lt;__sort__&gt;&gt; selectedTiddler=&lt;&lt;__selectedTiddler__&gt;&gt; unselectedText=&lt;&lt;__unselectedText__&gt;&gt; missingText=&lt;&lt;__missingText__&gt;&gt; template=&lt;&lt;__template__&gt;&gt;/&gt;\n&lt;/$linkcatcher&gt;\n\\end\n\n"},"$:/core/macros/translink":{"title":"$:/core/macros/translink","tags":"$:/tags/Macro","text":"\\define translink(title,mode:\"block\")\n&lt;div style=\"border:1px solid #ccc; padding: 0.5em; background: black; foreground; white;\"&gt;\n&lt;$link to=\"\"\"$title$\"\"\"&gt;\n&lt;$text text=\"\"\"$title$\"\"\"/&gt;\n&lt;/$link&gt;\n&lt;div style=\"border:1px solid #ccc; padding: 0.5em; background: white; foreground; black;\"&gt;\n&lt;$transclude tiddler=\"\"\"$title$\"\"\" mode=\"$mode$\"&gt;\n\"&lt;$text text=\"\"\"$title$\"\"\"/&gt;\" is missing\n&lt;/$transclude&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\\end\n"},"$:/core/macros/tree":{"title":"$:/core/macros/tree","tags":"$:/tags/Macro","text":"\\define leaf-link(full-title,chunk,separator: \"/\")\n&lt;$link to=&lt;&lt;__full-title__&gt;&gt;&gt;&lt;$text text=&lt;&lt;__chunk__&gt;&gt;/&gt;&lt;/$link&gt;\n\\end\n\n\\define leaf-node(prefix,chunk)\n&lt;li&gt;\n&lt;$list filter=\"[&lt;__prefix__&gt;addsuffix&lt;__chunk__&gt;is[shadow]] [&lt;__prefix__&gt;addsuffix&lt;__chunk__&gt;is[tiddler]]\" variable=\"full-title\"&gt;\n&lt;$list filter=\"[&lt;full-title&gt;removeprefix&lt;__prefix__&gt;]\" variable=\"chunk\"&gt;\n&lt;span&gt;{{$:/core/images/file}}&lt;/span&gt; &lt;$macrocall $name=\"leaf-link\" full-title=&lt;&lt;full-title&gt;&gt; chunk=&lt;&lt;chunk&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;/$list&gt;\n&lt;/li&gt;\n\\end\n\n\\define branch-node(prefix,chunk,separator: \"/\")\n&lt;li&gt;\n&lt;$set name=\"reveal-state\" value={{{ [[$:/state/tree/]addsuffix&lt;__prefix__&gt;addsuffix&lt;__chunk__&gt;] }}}&gt;\n&lt;$reveal type=\"nomatch\" stateTitle=&lt;&lt;reveal-state&gt;&gt; text=\"show\"&gt;\n&lt;$button setTitle=&lt;&lt;reveal-state&gt;&gt; setTo=\"show\" class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/folder}} &lt;$text text=&lt;&lt;__chunk__&gt;&gt;/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" stateTitle=&lt;&lt;reveal-state&gt;&gt; text=\"show\"&gt;\n&lt;$button setTitle=&lt;&lt;reveal-state&gt;&gt; setTo=\"hide\" class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/folder}} &lt;$text text=&lt;&lt;__chunk__&gt;&gt;/&gt;\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;span&gt;(&lt;$count filter=\"[all[shadows+tiddlers]removeprefix&lt;__prefix__&gt;removeprefix&lt;__chunk__&gt;] -[&lt;__prefix__&gt;addsuffix&lt;__chunk__&gt;]\"/&gt;)&lt;/span&gt;\n&lt;$reveal type=\"match\" stateTitle=&lt;&lt;reveal-state&gt;&gt; text=\"show\"&gt;\n&lt;$macrocall $name=\"tree-node\" prefix={{{ [&lt;__prefix__&gt;addsuffix&lt;__chunk__&gt;] }}} separator=&lt;&lt;__separator__&gt;&gt;/&gt;\n&lt;/$reveal&gt;\n&lt;/$set&gt;\n&lt;/li&gt;\n\\end\n\n\\define tree-node(prefix,separator: \"/\")\n&lt;ol&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]removeprefix&lt;__prefix__&gt;splitbefore&lt;__separator__&gt;sort[]!suffix&lt;__separator__&gt;]\" variable=\"chunk\"&gt;\n&lt;$macrocall $name=\"leaf-node\" prefix=&lt;&lt;__prefix__&gt;&gt; chunk=&lt;&lt;chunk&gt;&gt; separator=&lt;&lt;__separator__&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]removeprefix&lt;__prefix__&gt;splitbefore&lt;__separator__&gt;sort[]suffix&lt;__separator__&gt;]\" variable=\"chunk\"&gt;\n&lt;$macrocall $name=\"branch-node\" prefix=&lt;&lt;__prefix__&gt;&gt; chunk=&lt;&lt;chunk&gt;&gt; separator=&lt;&lt;__separator__&gt;&gt;/&gt;\n&lt;/$list&gt;\n&lt;/ol&gt;\n\\end\n\n\\define tree(prefix: \"$:/\",separator: \"/\")\n&lt;div class=\"tc-tree\"&gt;\n&lt;span&gt;&lt;$text text=&lt;&lt;__prefix__&gt;&gt;/&gt;&lt;/span&gt;\n&lt;div&gt;\n&lt;$macrocall $name=\"tree-node\" prefix=&lt;&lt;__prefix__&gt;&gt; separator=&lt;&lt;__separator__&gt;&gt;/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\\end\n"},"$:/core/macros/utils":{"title":"$:/core/macros/utils","text":"\\define colour(colour)\n$colour$\n\\end\n"},"$:/snippets/minifocusswitcher":{"title":"$:/snippets/minifocusswitcher","text":"&lt;$select tiddler=\"$:/config/AutoFocus\"&gt;\n&lt;$list filter=\"title tags text type fields\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;&lt;currentTiddler&gt;&gt;&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;\n"},"$:/snippets/minilanguageswitcher":{"title":"$:/snippets/minilanguageswitcher","text":"&lt;$select tiddler=\"$:/language\"&gt;\n&lt;$list filter=\"[[$:/languages/en-GB]] [plugin-type[language]sort[title]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;$view field=\"description\"&gt;&lt;$view field=\"name\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt;&lt;/$view&gt;&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;"},"$:/snippets/minithemeswitcher":{"title":"$:/snippets/minithemeswitcher","text":"\\define lingo-base() $:/language/ControlPanel/Theme/\n&lt;&lt;lingo Prompt&gt;&gt; &lt;$select tiddler=\"$:/theme\"&gt;\n&lt;$list filter=\"[plugin-type[theme]sort[title]]\"&gt;\n&lt;option value=&lt;&lt;currentTiddler&gt;&gt;&gt;&lt;$view field=\"name\"&gt;&lt;$view field=\"title\"/&gt;&lt;/$view&gt;&lt;/option&gt;\n&lt;/$list&gt;\n&lt;/$select&gt;"},"$:/snippets/modules":{"title":"$:/snippets/modules","text":"\\define describeModuleType(type)\n{{$:/language/Docs/ModuleTypes/$type$}}\n\\end\n&lt;$list filter=\"[moduletypes[]]\"&gt;\n\n!! &lt;$macrocall $name=\"currentTiddler\" $type=\"text/plain\" $output=\"text/plain\"/&gt;\n\n&lt;$macrocall $name=\"describeModuleType\" type=&lt;&lt;currentTiddler&gt;&gt;/&gt;\n\n&lt;ul&gt;&lt;$list filter=\"[all[current]modules[]]\"&gt;&lt;li&gt;&lt;$link&gt;&lt;&lt;currentTiddler&gt;&gt;&lt;/$link&gt;\n&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n&lt;/$list&gt;\n"},"$:/palette":{"title":"$:/palette","text":"$:/palettes/Vanilla"},"$:/snippets/paletteeditor":{"title":"$:/snippets/paletteeditor","text":"&lt;$transclude tiddler=\"$:/PaletteManager\"/&gt;\n"},"$:/snippets/palettepreview":{"title":"$:/snippets/palettepreview","text":"&lt;$set name=\"currentTiddler\" value={{$:/palette}}&gt;\n{{||$:/snippets/currpalettepreview}}\n&lt;/$set&gt;\n"},"$:/snippets/paletteswitcher":{"title":"$:/snippets/paletteswitcher","text":"&lt;$linkcatcher to=\"$:/palette\"&gt;\n&lt;div class=\"tc-chooser\"&gt;&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Palette]sort[name]]\"&gt;&lt;$set name=\"cls\" filter=\"[all[current]prefix{$:/palette}]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;&lt;$link to={{!!title}}&gt;''&lt;$view field=\"name\" format=\"text\"/&gt;'' - &lt;$view field=\"description\" format=\"text\"/&gt;{{||$:/snippets/currpalettepreview}}&lt;/$link&gt;\n&lt;/div&gt;&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;\n"},"$:/snippets/peek-stylesheets":{"title":"$:/snippets/peek-stylesheets","text":"\\define expandable-stylesheets-list()\n&lt;ol&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Stylesheet]!has[draft.of]]\"&gt;\n&lt;$vars state=&lt;&lt;qualify \"$:/state/peek-stylesheets/open/\"&gt;&gt;&gt;\n&lt;$set name=\"state\" value={{{ [&lt;state&gt;addsuffix&lt;currentTiddler&gt;] }}}&gt;\n&lt;li&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;state&gt;&gt; text=\"yes\" tag=\"span\"&gt;\n&lt;$button set=&lt;&lt;state&gt;&gt; setTo=\"no\" class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/down-arrow}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;state&gt;&gt; text=\"yes\" tag=\"span\"&gt;\n&lt;$button set=&lt;&lt;state&gt;&gt; setTo=\"yes\" class=\"tc-btn-invisible\"&gt;\n{{$:/core/images/right-arrow}}\n&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$link&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$link&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;state&gt;&gt; text=\"yes\" tag=\"div\"&gt;\n&lt;$set name=\"source\" tiddler=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$wikify name=\"styles\" text=&lt;&lt;source&gt;&gt;&gt;\n&lt;pre&gt;\n&lt;code&gt;\n&lt;$text text=&lt;&lt;styles&gt;&gt;/&gt;\n&lt;/code&gt;\n&lt;/pre&gt;\n&lt;/$wikify&gt;\n&lt;/$set&gt;\n&lt;/$reveal&gt;\n&lt;/li&gt;\n&lt;/$set&gt;\n&lt;/$vars&gt;\n&lt;/$list&gt;\n&lt;/ol&gt;\n\\end\n\n\\define stylesheets-list()\n&lt;ol&gt;\n&lt;$list filter=\"[all[shadows+tiddlers]tag[$:/tags/Stylesheet]!has[draft.of]]\"&gt;\n&lt;li&gt;\n&lt;$link&gt;\n&lt;$view field=\"title\"/&gt;\n&lt;/$link&gt;\n&lt;$set name=\"source\" tiddler=&lt;&lt;currentTiddler&gt;&gt;&gt;\n&lt;$wikify name=\"styles\" text=&lt;&lt;source&gt;&gt;&gt;\n&lt;pre&gt;\n&lt;code&gt;\n&lt;$text text=&lt;&lt;styles&gt;&gt;/&gt;\n&lt;/code&gt;\n&lt;/pre&gt;\n&lt;/$wikify&gt;\n&lt;/$set&gt;\n&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ol&gt;\n\\end\n\n&lt;$vars modeState=&lt;&lt;qualify \"$:/state/peek-stylesheets/mode/\"&gt;&gt;&gt;\n\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;modeState&gt;&gt; text=\"expanded\" tag=\"div\"&gt;\n&lt;$button set=&lt;&lt;modeState&gt;&gt; setTo=\"expanded\" class=\"tc-btn-invisible\"&gt;{{$:/core/images/chevron-right}} {{$:/language/ControlPanel/Stylesheets/Expand/Caption}}&lt;/$button&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;modeState&gt;&gt; text=\"expanded\" tag=\"div\"&gt;\n&lt;$button set=&lt;&lt;modeState&gt;&gt; setTo=\"restored\" class=\"tc-btn-invisible\"&gt;{{$:/core/images/chevron-down}} {{$:/language/ControlPanel/Stylesheets/Restore/Caption}}&lt;/$button&gt;\n&lt;/$reveal&gt;\n\n&lt;$reveal type=\"nomatch\" state=&lt;&lt;modeState&gt;&gt; text=\"expanded\" tag=\"div\"&gt;\n&lt;&lt;expandable-stylesheets-list&gt;&gt;\n&lt;/$reveal&gt;\n&lt;$reveal type=\"match\" state=&lt;&lt;modeState&gt;&gt; text=\"expanded\" tag=\"div\"&gt;\n&lt;&lt;stylesheets-list&gt;&gt;\n&lt;/$reveal&gt;\n\n&lt;/$vars&gt;\n"},"$:/temp/search":{"title":"$:/temp/search","text":""},"$:/tags/AdvancedSearch":{"title":"$:/tags/AdvancedSearch","list":"[[$:/core/ui/AdvancedSearch/Standard]] [[$:/core/ui/AdvancedSearch/System]] [[$:/core/ui/AdvancedSearch/Shadows]] [[$:/core/ui/AdvancedSearch/Filter]]"},"$:/tags/AdvancedSearch/FilterButton":{"title":"$:/tags/AdvancedSearch/FilterButton","list":"$:/core/ui/AdvancedSearch/Filter/FilterButtons/dropdown $:/core/ui/AdvancedSearch/Filter/FilterButtons/clear $:/core/ui/AdvancedSearch/Filter/FilterButtons/export $:/core/ui/AdvancedSearch/Filter/FilterButtons/delete"},"$:/tags/ControlPanel":{"title":"$:/tags/ControlPanel","list":"$:/core/ui/ControlPanel/Info $:/core/ui/ControlPanel/Appearance $:/core/ui/ControlPanel/Settings $:/core/ui/ControlPanel/Saving $:/core/ui/ControlPanel/Plugins $:/core/ui/ControlPanel/Tools $:/core/ui/ControlPanel/Internals"},"$:/tags/ControlPanel/Info":{"title":"$:/tags/ControlPanel/Info","list":"$:/core/ui/ControlPanel/Basics $:/core/ui/ControlPanel/Advanced"},"$:/tags/ControlPanel/Plugins":{"title":"$:/tags/ControlPanel/Plugins","list":"[[$:/core/ui/ControlPanel/Plugins/Installed]] [[$:/core/ui/ControlPanel/Plugins/Add]]"},"$:/tags/EditorToolbar":{"title":"$:/tags/EditorToolbar","list":"$:/core/ui/EditorToolbar/paint $:/core/ui/EditorToolbar/opacity $:/core/ui/EditorToolbar/line-width $:/core/ui/EditorToolbar/rotate-left $:/core/ui/EditorToolbar/clear $:/core/ui/EditorToolbar/bold $:/core/ui/EditorToolbar/italic $:/core/ui/EditorToolbar/strikethrough $:/core/ui/EditorToolbar/underline $:/core/ui/EditorToolbar/superscript $:/core/ui/EditorToolbar/subscript $:/core/ui/EditorToolbar/mono-line $:/core/ui/EditorToolbar/mono-block $:/core/ui/EditorToolbar/quote $:/core/ui/EditorToolbar/list-bullet $:/core/ui/EditorToolbar/list-number $:/core/ui/EditorToolbar/heading-1 $:/core/ui/EditorToolbar/heading-2 $:/core/ui/EditorToolbar/heading-3 $:/core/ui/EditorToolbar/heading-4 $:/core/ui/EditorToolbar/heading-5 $:/core/ui/EditorToolbar/heading-6 $:/core/ui/EditorToolbar/link $:/core/ui/EditorToolbar/excise $:/core/ui/EditorToolbar/picture $:/core/ui/EditorToolbar/stamp $:/core/ui/EditorToolbar/size $:/core/ui/EditorToolbar/editor-height $:/core/ui/EditorToolbar/more $:/core/ui/EditorToolbar/preview $:/core/ui/EditorToolbar/preview-type"},"$:/tags/EditTemplate":{"title":"$:/tags/EditTemplate","list":"[[$:/core/ui/EditTemplate/controls]] [[$:/core/ui/EditTemplate/title]] [[$:/core/ui/EditTemplate/tags]] [[$:/core/ui/EditTemplate/shadow]] [[$:/core/ui/ViewTemplate/classic]] [[$:/core/ui/EditTemplate/body]] [[$:/core/ui/EditTemplate/type]] [[$:/core/ui/EditTemplate/fields]]"},"$:/tags/EditToolbar":{"title":"$:/tags/EditToolbar","list":"[[$:/core/ui/Buttons/delete]] [[$:/core/ui/Buttons/cancel]] [[$:/core/ui/Buttons/save]]"},"$:/tags/Manager/ItemMain":{"title":"$:/tags/Manager/ItemMain","list":"$:/Manager/ItemMain/WikifiedText $:/Manager/ItemMain/RawText $:/Manager/ItemMain/Fields"},"$:/tags/Manager/ItemSidebar":{"title":"$:/tags/Manager/ItemSidebar","list":"$:/Manager/ItemSidebar/Tags $:/Manager/ItemSidebar/Colour $:/Manager/ItemSidebar/Icon $:/Manager/ItemSidebar/Tools"},"$:/tags/MoreSideBar":{"title":"$:/tags/MoreSideBar","list":"[[$:/core/ui/MoreSideBar/All]] [[$:/core/ui/MoreSideBar/Recent]] [[$:/core/ui/MoreSideBar/Tags]] [[$:/core/ui/MoreSideBar/Missing]] [[$:/core/ui/MoreSideBar/Drafts]] [[$:/core/ui/MoreSideBar/Orphans]] [[$:/core/ui/MoreSideBar/Types]] [[$:/core/ui/MoreSideBar/System]] [[$:/core/ui/MoreSideBar/Shadows]] [[$:/core/ui/MoreSideBar/Explorer]] [[$:/core/ui/MoreSideBar/Plugins]]","text":""},"$:/tags/PageControls":{"title":"$:/tags/PageControls","list":"[[$:/core/ui/Buttons/home]] [[$:/core/ui/Buttons/close-all]] [[$:/core/ui/Buttons/fold-all]] [[$:/core/ui/Buttons/unfold-all]] [[$:/core/ui/Buttons/permaview]] [[$:/core/ui/Buttons/new-tiddler]] [[$:/core/ui/Buttons/new-journal]] [[$:/core/ui/Buttons/new-image]] [[$:/core/ui/Buttons/import]] [[$:/core/ui/Buttons/export-page]] [[$:/core/ui/Buttons/control-panel]] [[$:/core/ui/Buttons/advanced-search]] [[$:/core/ui/Buttons/manager]] [[$:/core/ui/Buttons/tag-manager]] [[$:/core/ui/Buttons/language]] [[$:/core/ui/Buttons/palette]] [[$:/core/ui/Buttons/theme]] [[$:/core/ui/Buttons/storyview]] [[$:/core/ui/Buttons/encryption]] [[$:/core/ui/Buttons/timestamp]] [[$:/core/ui/Buttons/full-screen]] [[$:/core/ui/Buttons/print]] [[$:/core/ui/Buttons/save-wiki]] [[$:/core/ui/Buttons/refresh]] [[$:/core/ui/Buttons/more-page-actions]]"},"$:/tags/PageTemplate":{"title":"$:/tags/PageTemplate","list":"[[$:/core/ui/PageTemplate/topleftbar]] [[$:/core/ui/PageTemplate/toprightbar]] [[$:/core/ui/PageTemplate/sidebar]] [[$:/core/ui/PageTemplate/story]] [[$:/core/ui/PageTemplate/alerts]]","text":""},"$:/tags/PluginLibrary":{"title":"$:/tags/PluginLibrary","list":"$:/config/OfficialPluginLibrary"},"$:/tags/SideBar":{"title":"$:/tags/SideBar","list":"[[$:/core/ui/SideBar/Open]] [[$:/core/ui/SideBar/Recent]] [[$:/core/ui/SideBar/Tools]] [[$:/core/ui/SideBar/More]]","text":""},"$:/tags/SideBarSegment":{"title":"$:/tags/SideBarSegment","list":"[[$:/core/ui/SideBarSegments/site-title]] [[$:/core/ui/SideBarSegments/site-subtitle]] [[$:/core/ui/SideBarSegments/page-controls]] [[$:/core/ui/SideBarSegments/search]] [[$:/core/ui/SideBarSegments/tabs]]"},"$:/tags/TiddlerInfo":{"title":"$:/tags/TiddlerInfo","list":"[[$:/core/ui/TiddlerInfo/Tools]] [[$:/core/ui/TiddlerInfo/References]] [[$:/core/ui/TiddlerInfo/Tagging]] [[$:/core/ui/TiddlerInfo/List]] [[$:/core/ui/TiddlerInfo/Listed]] [[$:/core/ui/TiddlerInfo/Fields]]","text":""},"$:/tags/TiddlerInfo/Advanced":{"title":"$:/tags/TiddlerInfo/Advanced","list":"[[$:/core/ui/TiddlerInfo/Advanced/ShadowInfo]] [[$:/core/ui/TiddlerInfo/Advanced/PluginInfo]]"},"$:/tags/ViewTemplate":{"title":"$:/tags/ViewTemplate","list":"[[$:/core/ui/ViewTemplate/title]] [[$:/core/ui/ViewTemplate/unfold]] [[$:/core/ui/ViewTemplate/subtitle]] [[$:/core/ui/ViewTemplate/tags]] [[$:/core/ui/ViewTemplate/classic]] [[$:/core/ui/ViewTemplate/body]]"},"$:/tags/ViewToolbar":{"title":"$:/tags/ViewToolbar","list":"[[$:/core/ui/Buttons/more-tiddler-actions]] [[$:/core/ui/Buttons/info]] [[$:/core/ui/Buttons/new-here]] [[$:/core/ui/Buttons/new-journal-here]] [[$:/core/ui/Buttons/clone]] [[$:/core/ui/Buttons/export-tiddler]] [[$:/core/ui/Buttons/edit]] [[$:/core/ui/Buttons/delete]] [[$:/core/ui/Buttons/permalink]] [[$:/core/ui/Buttons/permaview]] [[$:/core/ui/Buttons/open-window]] [[$:/core/ui/Buttons/close-others]] [[$:/core/ui/Buttons/close]] [[$:/core/ui/Buttons/fold-others]] [[$:/core/ui/Buttons/fold]]"},"$:/snippets/themeswitcher":{"title":"$:/snippets/themeswitcher","text":"&lt;$linkcatcher to=\"$:/theme\"&gt;\n&lt;div class=\"tc-chooser\"&gt;&lt;$list filter=\"[plugin-type[theme]sort[title]]\"&gt;&lt;$set name=\"cls\" filter=\"[all[current]field:title{$:/theme}] [[$:/theme]!has[text]addsuffix[s/tiddlywiki/vanilla]field:title&lt;currentTiddler&gt;] +[limit[1]]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;&lt;$link to={{!!title}}&gt;''&lt;$view field=\"name\" format=\"text\"/&gt;'' &lt;$view field=\"description\" format=\"text\"/&gt;&lt;/$link&gt;&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;"},"$:/core/wiki/title":{"title":"$:/core/wiki/title","text":"{{$:/SiteTitle}}\n&lt;$list filter=\"[{$:/SiteSubtitle}trim[]minlength[1]]\" variable=\"ignore\"&gt;\n--- {{$:/SiteSubtitle}}\n&lt;/$list&gt;"},"$:/view":{"title":"$:/view","text":"classic"},"$:/snippets/viewswitcher":{"title":"$:/snippets/viewswitcher","text":"\\define icon()\n$:/core/images/storyview-$(storyview)$\n\\end\n&lt;$linkcatcher to=\"$:/view\"&gt;\n&lt;div class=\"tc-chooser tc-viewswitcher\"&gt;\n&lt;$list filter=\"[storyviews[]]\" variable=\"storyview\"&gt;\n&lt;$set name=\"cls\" filter=\"[&lt;storyview&gt;prefix{$:/view}]\" value=\"tc-chooser-item tc-chosen\" emptyValue=\"tc-chooser-item\"&gt;&lt;div class=&lt;&lt;cls&gt;&gt;&gt;\n&lt;$button tag=\"a\" class=\"tc-tiddlylink tc-btn-invisible\" to=&lt;&lt;storyview&gt;&gt;&gt;&lt;$transclude tiddler=&lt;&lt;icon&gt;&gt;/&gt;&lt;$text text=&lt;&lt;storyview&gt;&gt;/&gt;&lt;/$button&gt;\n&lt;/div&gt;\n&lt;/$set&gt;\n&lt;/$list&gt;\n&lt;/div&gt;\n&lt;/$linkcatcher&gt;\n"}}}</pre>
</div>
<div title="$:/DefaultTiddlers">
<pre>[list[$:/StoryList]]</pre>
</div>
<div title="$:/Gitea/Branch">
<pre></pre>
</div>
<div title="$:/Gitea/Filename">
<pre></pre>
</div>
<div title="$:/Gitea/Path">
<pre></pre>
</div>
<div title="$:/Gitea/Repo">
<pre></pre>
</div>
<div title="$:/Gitea/Username">
<pre></pre>
</div>
<div created="20210705061223500" modified="20210705061223501" title="$:/GitHub/Filename">
<pre>index.html</pre>
</div>
<div created="20210705061953342" modified="20210705061956904" title="$:/GitHub/Path">
<pre>/</pre>
</div>
<div created="20210705061255021" modified="20210705061258837" title="$:/GitHub/Repo">
<pre>knownbit/knownbit.github.io</pre>
</div>
<div created="20210705061333607" modified="20210705061333607" title="$:/GitHub/Username">
<pre>knownbit</pre>
</div>
<div created="20210707083614036" modified="20210707083941845" status="complete" title="$:/Import">
<pre>下列条目已被导入：

# [[$:/plugins/telmiger/details/about]]
# [[$:/plugins/telmiger/details/colours.css]]
# [[$:/plugins/telmiger/details/details.css]]
# [[$:/plugins/telmiger/details/details.js]]
# [[$:/plugins/telmiger/details/icon]]
# [[$:/plugins/telmiger/details/license]]
# [[$:/plugins/telmiger/details/readme]]
# [[$:/plugins/telmiger/DetailsWidget/support]]
# [[$:/plugins/telmiger/support]]</pre>
</div>
<div title="$:/isEncrypted">
<pre>no</pre>
</div>
<div created="20210705024301481" creator="BramChen" modified="20210705024301481" modifier="BramChen" title="$:/language">
<pre>$:/languages/zh-Hans</pre>
</div>
<div created="20210705065028669" modified="20210705065029026" title="$:/language/DefaultNewTiddlerTitle">
<pre></pre>
</div>
<div author="BramChen" core-version="&gt;=5.0.8" dependents="" description="Chinese (Simplified)" name="zh-Hans" plugin-priority="100" plugin-type="language" title="$:/languages/zh-Hans" type="application/json" version="5.1.24-prerelease">
<pre>{"tiddlers":{"$:/language/Buttons/AdvancedSearch/Caption":{"title":"$:/language/Buttons/AdvancedSearch/Caption","text":"高级查找"},"$:/language/Buttons/AdvancedSearch/Hint":{"title":"$:/language/Buttons/AdvancedSearch/Hint","text":"高级查找"},"$:/language/Buttons/Cancel/Caption":{"title":"$:/language/Buttons/Cancel/Caption","text":"取消"},"$:/language/Buttons/Cancel/Hint":{"title":"$:/language/Buttons/Cancel/Hint","text":"放弃对此条目的更改"},"$:/language/Buttons/Clone/Caption":{"title":"$:/language/Buttons/Clone/Caption","text":"克隆"},"$:/language/Buttons/Clone/Hint":{"title":"$:/language/Buttons/Clone/Hint","text":"克隆此条目"},"$:/language/Buttons/Close/Caption":{"title":"$:/language/Buttons/Close/Caption","text":"关闭"},"$:/language/Buttons/Close/Hint":{"title":"$:/language/Buttons/Close/Hint","text":"关闭此条目"},"$:/language/Buttons/CloseAll/Caption":{"title":"$:/language/Buttons/CloseAll/Caption","text":"全部关闭"},"$:/language/Buttons/CloseAll/Hint":{"title":"$:/language/Buttons/CloseAll/Hint","text":"关闭所有条目"},"$:/language/Buttons/CloseOthers/Caption":{"title":"$:/language/Buttons/CloseOthers/Caption","text":"关闭其他"},"$:/language/Buttons/CloseOthers/Hint":{"title":"$:/language/Buttons/CloseOthers/Hint","text":"关闭其他条目"},"$:/language/Buttons/ControlPanel/Caption":{"title":"$:/language/Buttons/ControlPanel/Caption","text":"控制台"},"$:/language/Buttons/ControlPanel/Hint":{"title":"$:/language/Buttons/ControlPanel/Hint","text":"开启控制台"},"$:/language/Buttons/CopyToClipboard/Caption":{"title":"$:/language/Buttons/CopyToClipboard/Caption","text":"复制到剪贴板"},"$:/language/Buttons/CopyToClipboard/Hint":{"title":"$:/language/Buttons/CopyToClipboard/Hint","text":"将此文本复制到剪贴板"},"$:/language/Buttons/Delete/Caption":{"title":"$:/language/Buttons/Delete/Caption","text":"删除"},"$:/language/Buttons/Delete/Hint":{"title":"$:/language/Buttons/Delete/Hint","text":"删除此条目"},"$:/language/Buttons/Edit/Caption":{"title":"$:/language/Buttons/Edit/Caption","text":"编辑"},"$:/language/Buttons/Edit/Hint":{"title":"$:/language/Buttons/Edit/Hint","text":"编辑此条目"},"$:/language/Buttons/Encryption/Caption":{"title":"$:/language/Buttons/Encryption/Caption","text":"加密"},"$:/language/Buttons/Encryption/Hint":{"title":"$:/language/Buttons/Encryption/Hint","text":"设置或清除保存此维基的密码"},"$:/language/Buttons/Encryption/ClearPassword/Caption":{"title":"$:/language/Buttons/Encryption/ClearPassword/Caption","text":"清除密码"},"$:/language/Buttons/Encryption/ClearPassword/Hint":{"title":"$:/language/Buttons/Encryption/ClearPassword/Hint","text":"清除密码且不加密保存此维基"},"$:/language/Buttons/Encryption/SetPassword/Caption":{"title":"$:/language/Buttons/Encryption/SetPassword/Caption","text":"设置密码"},"$:/language/Buttons/Encryption/SetPassword/Hint":{"title":"$:/language/Buttons/Encryption/SetPassword/Hint","text":"设置加密保存此维基的密码"},"$:/language/Buttons/ExportPage/Caption":{"title":"$:/language/Buttons/ExportPage/Caption","text":"导出所有条目"},"$:/language/Buttons/ExportPage/Hint":{"title":"$:/language/Buttons/ExportPage/Hint","text":"导出所有条目"},"$:/language/Buttons/ExportTiddler/Caption":{"title":"$:/language/Buttons/ExportTiddler/Caption","text":"导出此条目"},"$:/language/Buttons/ExportTiddler/Hint":{"title":"$:/language/Buttons/ExportTiddler/Hint","text":"导出此条目"},"$:/language/Buttons/ExportTiddlers/Caption":{"title":"$:/language/Buttons/ExportTiddlers/Caption","text":"导出条目"},"$:/language/Buttons/ExportTiddlers/Hint":{"title":"$:/language/Buttons/ExportTiddlers/Hint","text":"导出条目"},"$:/language/Buttons/SidebarSearch/Hint":{"title":"$:/language/Buttons/SidebarSearch/Hint","text":"选择侧边栏的查找字段"},"$:/language/Buttons/Fold/Caption":{"title":"$:/language/Buttons/Fold/Caption","text":"收合条目"},"$:/language/Buttons/Fold/Hint":{"title":"$:/language/Buttons/Fold/Hint","text":"收合此条目的内容"},"$:/language/Buttons/Unfold/Caption":{"title":"$:/language/Buttons/Unfold/Caption","text":"展开条目"},"$:/language/Buttons/Unfold/Hint":{"title":"$:/language/Buttons/Unfold/Hint","text":"展开此条目的内容"},"$:/language/Buttons/FoldOthers/Caption":{"title":"$:/language/Buttons/FoldOthers/Caption","text":"收合其他条目"},"$:/language/Buttons/FoldOthers/Hint":{"title":"$:/language/Buttons/FoldOthers/Hint","text":"收合其他已开启条目的内容"},"$:/language/Buttons/FoldAll/Caption":{"title":"$:/language/Buttons/FoldAll/Caption","text":"收合所有条目"},"$:/language/Buttons/FoldAll/Hint":{"title":"$:/language/Buttons/FoldAll/Hint","text":"收合所有已开启条目的内容"},"$:/language/Buttons/Fold/FoldBar/Caption":{"title":"$:/language/Buttons/Fold/FoldBar/Caption","text":"收合栏"},"$:/language/Buttons/Fold/FoldBar/Hint":{"title":"$:/language/Buttons/Fold/FoldBar/Hint","text":"可选的收合与展开条目的长条按钮"},"$:/language/Buttons/UnfoldAll/Caption":{"title":"$:/language/Buttons/UnfoldAll/Caption","text":"展开所有条目"},"$:/language/Buttons/UnfoldAll/Hint":{"title":"$:/language/Buttons/UnfoldAll/Hint","text":"展开所有已开启条目的内容"},"$:/language/Buttons/FullScreen/Caption":{"title":"$:/language/Buttons/FullScreen/Caption","text":"全屏幕"},"$:/language/Buttons/FullScreen/Hint":{"title":"$:/language/Buttons/FullScreen/Hint","text":"进入或离开全屏模式"},"$:/language/Buttons/Help/Caption":{"title":"$:/language/Buttons/Help/Caption","text":"帮助"},"$:/language/Buttons/Help/Hint":{"title":"$:/language/Buttons/Help/Hint","text":"显示帮助面板"},"$:/language/Buttons/Home/Caption":{"title":"$:/language/Buttons/Home/Caption","text":"首页"},"$:/language/Buttons/Home/Hint":{"title":"$:/language/Buttons/Home/Hint","text":"开启首页条目"},"$:/language/Buttons/Import/Caption":{"title":"$:/language/Buttons/Import/Caption","text":"导入"},"$:/language/Buttons/Import/Hint":{"title":"$:/language/Buttons/Import/Hint","text":"导入许多类型的文件包括文本、图像、TiddlyWiki 或 JSON"},"$:/language/Buttons/Info/Caption":{"title":"$:/language/Buttons/Info/Caption","text":"信息"},"$:/language/Buttons/Info/Hint":{"title":"$:/language/Buttons/Info/Hint","text":"显示此条目的信息"},"$:/language/Buttons/Language/Caption":{"title":"$:/language/Buttons/Language/Caption","text":"语言"},"$:/language/Buttons/Language/Hint":{"title":"$:/language/Buttons/Language/Hint","text":"选择用户介面语言"},"$:/language/Buttons/Manager/Caption":{"title":"$:/language/Buttons/Manager/Caption","text":"条目管理器"},"$:/language/Buttons/Manager/Hint":{"title":"$:/language/Buttons/Manager/Hint","text":"开启条目管理器"},"$:/language/Buttons/More/Caption":{"title":"$:/language/Buttons/More/Caption","text":"更多"},"$:/language/Buttons/More/Hint":{"title":"$:/language/Buttons/More/Hint","text":"更多动作"},"$:/language/Buttons/NewHere/Caption":{"title":"$:/language/Buttons/NewHere/Caption","text":"添加子条目"},"$:/language/Buttons/NewHere/Hint":{"title":"$:/language/Buttons/NewHere/Hint","text":"创建一个标签为此条目名称的新条目"},"$:/language/Buttons/NewJournal/Caption":{"title":"$:/language/Buttons/NewJournal/Caption","text":"添加日志"},"$:/language/Buttons/NewJournal/Hint":{"title":"$:/language/Buttons/NewJournal/Hint","text":"创建一个新的日志条目"},"$:/language/Buttons/NewJournalHere/Caption":{"title":"$:/language/Buttons/NewJournalHere/Caption","text":"添加子日志"},"$:/language/Buttons/NewJournalHere/Hint":{"title":"$:/language/Buttons/NewJournalHere/Hint","text":"创建一个标签含此条目名称的新日志条目"},"$:/language/Buttons/NewImage/Caption":{"title":"$:/language/Buttons/NewImage/Caption","text":"添加图像"},"$:/language/Buttons/NewImage/Hint":{"title":"$:/language/Buttons/NewImage/Hint","text":"创建一个新的图像条目"},"$:/language/Buttons/NewMarkdown/Caption":{"title":"$:/language/Buttons/NewMarkdown/Caption","text":"添加 Markdown 条目"},"$:/language/Buttons/NewMarkdown/Hint":{"title":"$:/language/Buttons/NewMarkdown/Hint","text":"创建一个新的 Markdown 条目"},"$:/language/Buttons/NewTiddler/Caption":{"title":"$:/language/Buttons/NewTiddler/Caption","text":"添加条目"},"$:/language/Buttons/NewTiddler/Hint":{"title":"$:/language/Buttons/NewTiddler/Hint","text":"创建一个新的条目"},"$:/language/Buttons/OpenWindow/Caption":{"title":"$:/language/Buttons/OpenWindow/Caption","text":"开启于新窗口"},"$:/language/Buttons/OpenWindow/Hint":{"title":"$:/language/Buttons/OpenWindow/Hint","text":"在新窗口中开启条目"},"$:/language/Buttons/Palette/Caption":{"title":"$:/language/Buttons/Palette/Caption","text":"调色板"},"$:/language/Buttons/Palette/Hint":{"title":"$:/language/Buttons/Palette/Hint","text":"选择调色板"},"$:/language/Buttons/Permalink/Caption":{"title":"$:/language/Buttons/Permalink/Caption","text":"引用链接"},"$:/language/Buttons/Permalink/Hint":{"title":"$:/language/Buttons/Permalink/Hint","text":"设置浏览器网址栏为直接链接到此条目"},"$:/language/Buttons/Permaview/Caption":{"title":"$:/language/Buttons/Permaview/Caption","text":"永久链接"},"$:/language/Buttons/Permaview/Hint":{"title":"$:/language/Buttons/Permaview/Hint","text":"设置浏览器网址栏为直接链接到当前所有已开启条目"},"$:/language/Buttons/Print/Caption":{"title":"$:/language/Buttons/Print/Caption","text":"打印页面"},"$:/language/Buttons/Print/Hint":{"title":"$:/language/Buttons/Print/Hint","text":"打印当前页面"},"$:/language/Buttons/Refresh/Caption":{"title":"$:/language/Buttons/Refresh/Caption","text":"刷新"},"$:/language/Buttons/Refresh/Hint":{"title":"$:/language/Buttons/Refresh/Hint","text":"执行维基的完全刷新"},"$:/language/Buttons/Save/Caption":{"title":"$:/language/Buttons/Save/Caption","text":"确定"},"$:/language/Buttons/Save/Hint":{"title":"$:/language/Buttons/Save/Hint","text":"确定对此条目的更改"},"$:/language/Buttons/SaveWiki/Caption":{"title":"$:/language/Buttons/SaveWiki/Caption","text":"保存变更"},"$:/language/Buttons/SaveWiki/Hint":{"title":"$:/language/Buttons/SaveWiki/Hint","text":"保存变更"},"$:/language/Buttons/StoryView/Caption":{"title":"$:/language/Buttons/StoryView/Caption","text":"查看模式"},"$:/language/Buttons/StoryView/Hint":{"title":"$:/language/Buttons/StoryView/Hint","text":"选择查看条目的视觉效果"},"$:/language/Buttons/HideSideBar/Caption":{"title":"$:/language/Buttons/HideSideBar/Caption","text":"隐藏侧边栏"},"$:/language/Buttons/HideSideBar/Hint":{"title":"$:/language/Buttons/HideSideBar/Hint","text":"隐藏侧边栏"},"$:/language/Buttons/ShowSideBar/Caption":{"title":"$:/language/Buttons/ShowSideBar/Caption","text":"显示侧边栏"},"$:/language/Buttons/ShowSideBar/Hint":{"title":"$:/language/Buttons/ShowSideBar/Hint","text":"显示侧边栏"},"$:/language/Buttons/TagManager/Caption":{"title":"$:/language/Buttons/TagManager/Caption","text":"标签管理"},"$:/language/Buttons/TagManager/Hint":{"title":"$:/language/Buttons/TagManager/Hint","text":"标签管理"},"$:/language/Buttons/Timestamp/Caption":{"title":"$:/language/Buttons/Timestamp/Caption","text":"时间戳记"},"$:/language/Buttons/Timestamp/Hint":{"title":"$:/language/Buttons/Timestamp/Hint","text":"选择修改是否更新时间戳记"},"$:/language/Buttons/Timestamp/On/Caption":{"title":"$:/language/Buttons/Timestamp/On/Caption","text":"时间戳记开启"},"$:/language/Buttons/Timestamp/On/Hint":{"title":"$:/language/Buttons/Timestamp/On/Hint","text":"条目被修改时，更新时间戳记"},"$:/language/Buttons/Timestamp/Off/Caption":{"title":"$:/language/Buttons/Timestamp/Off/Caption","text":"时间戳记关闭"},"$:/language/Buttons/Timestamp/Off/Hint":{"title":"$:/language/Buttons/Timestamp/Off/Hint","text":"条目被修改时，不更新时间戳记"},"$:/language/Buttons/Theme/Caption":{"title":"$:/language/Buttons/Theme/Caption","text":"布景主题"},"$:/language/Buttons/Theme/Hint":{"title":"$:/language/Buttons/Theme/Hint","text":"选择布景主题"},"$:/language/Buttons/Bold/Caption":{"title":"$:/language/Buttons/Bold/Caption","text":"粗体"},"$:/language/Buttons/Bold/Hint":{"title":"$:/language/Buttons/Bold/Hint","text":"套用粗体格式于所选文本"},"$:/language/Buttons/Clear/Caption":{"title":"$:/language/Buttons/Clear/Caption","text":"清除"},"$:/language/Buttons/Clear/Hint":{"title":"$:/language/Buttons/Clear/Hint","text":"清除图像为纯色"},"$:/language/Buttons/EditorHeight/Caption":{"title":"$:/language/Buttons/EditorHeight/Caption","text":"编辑器高度"},"$:/language/Buttons/EditorHeight/Caption/Auto":{"title":"$:/language/Buttons/EditorHeight/Caption/Auto","text":"自动调整高度以适合内容"},"$:/language/Buttons/EditorHeight/Caption/Fixed":{"title":"$:/language/Buttons/EditorHeight/Caption/Fixed","text":"固定高度︰"},"$:/language/Buttons/EditorHeight/Hint":{"title":"$:/language/Buttons/EditorHeight/Hint","text":"选择文本编辑器的高度"},"$:/language/Buttons/Excise/Caption":{"title":"$:/language/Buttons/Excise/Caption","text":"剪切"},"$:/language/Buttons/Excise/Caption/Excise":{"title":"$:/language/Buttons/Excise/Caption/Excise","text":"执行剪切"},"$:/language/Buttons/Excise/Caption/MacroName":{"title":"$:/language/Buttons/Excise/Caption/MacroName","text":"宏的名称︰"},"$:/language/Buttons/Excise/Caption/NewTitle":{"title":"$:/language/Buttons/Excise/Caption/NewTitle","text":"新条目的名称︰"},"$:/language/Buttons/Excise/Caption/Replace":{"title":"$:/language/Buttons/Excise/Caption/Replace","text":"替换剪切的文本为："},"$:/language/Buttons/Excise/Caption/Replace/Macro":{"title":"$:/language/Buttons/Excise/Caption/Replace/Macro","text":"宏"},"$:/language/Buttons/Excise/Caption/Replace/Link":{"title":"$:/language/Buttons/Excise/Caption/Replace/Link","text":"链接"},"$:/language/Buttons/Excise/Caption/Replace/Transclusion":{"title":"$:/language/Buttons/Excise/Caption/Replace/Transclusion","text":"嵌入"},"$:/language/Buttons/Excise/Caption/Tag":{"title":"$:/language/Buttons/Excise/Caption/Tag","text":"将新条目的标签设为此条目的名称"},"$:/language/Buttons/Excise/Caption/TiddlerExists":{"title":"$:/language/Buttons/Excise/Caption/TiddlerExists","text":"警示：条目已经存在"},"$:/language/Buttons/Excise/Hint":{"title":"$:/language/Buttons/Excise/Hint","text":"剪切所选文本到一个新条目"},"$:/language/Buttons/Heading1/Caption":{"title":"$:/language/Buttons/Heading1/Caption","text":"标题 1"},"$:/language/Buttons/Heading1/Hint":{"title":"$:/language/Buttons/Heading1/Hint","text":"套用标题级别 1 的格式于包含所选文本的列"},"$:/language/Buttons/Heading2/Caption":{"title":"$:/language/Buttons/Heading2/Caption","text":"标题 2"},"$:/language/Buttons/Heading2/Hint":{"title":"$:/language/Buttons/Heading2/Hint","text":"套用标题级别 2 的格式于包含所选文本的列"},"$:/language/Buttons/Heading3/Caption":{"title":"$:/language/Buttons/Heading3/Caption","text":"标题 3"},"$:/language/Buttons/Heading3/Hint":{"title":"$:/language/Buttons/Heading3/Hint","text":"套用标题级别 3 的格式于包含所选文本的列"},"$:/language/Buttons/Heading4/Caption":{"title":"$:/language/Buttons/Heading4/Caption","text":"标题 4"},"$:/language/Buttons/Heading4/Hint":{"title":"$:/language/Buttons/Heading4/Hint","text":"套用标题级别 4 的格式于包含所选文本的列"},"$:/language/Buttons/Heading5/Caption":{"title":"$:/language/Buttons/Heading5/Caption","text":"标题 5"},"$:/language/Buttons/Heading5/Hint":{"title":"$:/language/Buttons/Heading5/Hint","text":"套用标题级别 5 的格式于包含所选文本的列"},"$:/language/Buttons/Heading6/Caption":{"title":"$:/language/Buttons/Heading6/Caption","text":"标题 6"},"$:/language/Buttons/Heading6/Hint":{"title":"$:/language/Buttons/Heading6/Hint","text":"套用标题级别 6 的格式于包含所选文本的列"},"$:/language/Buttons/Italic/Caption":{"title":"$:/language/Buttons/Italic/Caption","text":"斜体"},"$:/language/Buttons/Italic/Hint":{"title":"$:/language/Buttons/Italic/Hint","text":"套用斜体格式于所选文本"},"$:/language/Buttons/LineWidth/Caption":{"title":"$:/language/Buttons/LineWidth/Caption","text":"线宽"},"$:/language/Buttons/LineWidth/Hint":{"title":"$:/language/Buttons/LineWidth/Hint","text":"设置绘画的线条宽度"},"$:/language/Buttons/Link/Caption":{"title":"$:/language/Buttons/Link/Caption","text":"链接"},"$:/language/Buttons/Link/Hint":{"title":"$:/language/Buttons/Link/Hint","text":"创建维基文字链接"},"$:/language/Buttons/Linkify/Caption":{"title":"$:/language/Buttons/Linkify/Caption","text":"维基链接"},"$:/language/Buttons/Linkify/Hint":{"title":"$:/language/Buttons/Linkify/Hint","text":"套用维基链接于所选文字"},"$:/language/Buttons/ListBullet/Caption":{"title":"$:/language/Buttons/ListBullet/Caption","text":"符号清单"},"$:/language/Buttons/ListBullet/Hint":{"title":"$:/language/Buttons/ListBullet/Hint","text":"套用符号清单格式于包含所选文本的列"},"$:/language/Buttons/ListNumber/Caption":{"title":"$:/language/Buttons/ListNumber/Caption","text":"数字清单"},"$:/language/Buttons/ListNumber/Hint":{"title":"$:/language/Buttons/ListNumber/Hint","text":"套用数字清单格式于包含所选文本的列"},"$:/language/Buttons/MonoBlock/Caption":{"title":"$:/language/Buttons/MonoBlock/Caption","text":"等宽区块"},"$:/language/Buttons/MonoBlock/Hint":{"title":"$:/language/Buttons/MonoBlock/Hint","text":"套用等宽区块格式于包含所选文本的列"},"$:/language/Buttons/MonoLine/Caption":{"title":"$:/language/Buttons/MonoLine/Caption","text":"等宽"},"$:/language/Buttons/MonoLine/Hint":{"title":"$:/language/Buttons/MonoLine/Hint","text":"套用等宽字符格式于所选文本"},"$:/language/Buttons/Opacity/Caption":{"title":"$:/language/Buttons/Opacity/Caption","text":"不透明度"},"$:/language/Buttons/Opacity/Hint":{"title":"$:/language/Buttons/Opacity/Hint","text":"设置绘画的不透明度"},"$:/language/Buttons/Paint/Caption":{"title":"$:/language/Buttons/Paint/Caption","text":"绘画颜色"},"$:/language/Buttons/Paint/Hint":{"title":"$:/language/Buttons/Paint/Hint","text":"设置绘画的颜色"},"$:/language/Buttons/Picture/Caption":{"title":"$:/language/Buttons/Picture/Caption","text":"图片"},"$:/language/Buttons/Picture/Hint":{"title":"$:/language/Buttons/Picture/Hint","text":"插入图片"},"$:/language/Buttons/Preview/Caption":{"title":"$:/language/Buttons/Preview/Caption","text":"预览"},"$:/language/Buttons/Preview/Hint":{"title":"$:/language/Buttons/Preview/Hint","text":"显示预览窗格"},"$:/language/Buttons/PreviewType/Caption":{"title":"$:/language/Buttons/PreviewType/Caption","text":"预览类型"},"$:/language/Buttons/PreviewType/Hint":{"title":"$:/language/Buttons/PreviewType/Hint","text":"选择预览类型"},"$:/language/Buttons/Quote/Caption":{"title":"$:/language/Buttons/Quote/Caption","text":"引言"},"$:/language/Buttons/Quote/Hint":{"title":"$:/language/Buttons/Quote/Hint","text":"套用引言文本格式于包含所选文本的列"},"$:/language/Buttons/RotateLeft/Caption":{"title":"$:/language/Buttons/RotateLeft/Caption","text":"向左旋转"},"$:/language/Buttons/RotateLeft/Hint":{"title":"$:/language/Buttons/RotateLeft/Hint","text":"图像向左旋转 90 度"},"$:/language/Buttons/Size/Caption":{"title":"$:/language/Buttons/Size/Caption","text":"图像大小"},"$:/language/Buttons/Size/Caption/Height":{"title":"$:/language/Buttons/Size/Caption/Height","text":"高度︰"},"$:/language/Buttons/Size/Caption/Resize":{"title":"$:/language/Buttons/Size/Caption/Resize","text":"调整图像的大小"},"$:/language/Buttons/Size/Caption/Width":{"title":"$:/language/Buttons/Size/Caption/Width","text":"宽度："},"$:/language/Buttons/Size/Hint":{"title":"$:/language/Buttons/Size/Hint","text":"设置图像的大小"},"$:/language/Buttons/Stamp/Caption":{"title":"$:/language/Buttons/Stamp/Caption","text":"印记"},"$:/language/Buttons/Stamp/Caption/New":{"title":"$:/language/Buttons/Stamp/Caption/New","text":"添加您自己的"},"$:/language/Buttons/Stamp/Hint":{"title":"$:/language/Buttons/Stamp/Hint","text":"插入一个预配置的文本片段"},"$:/language/Buttons/Stamp/New/Title":{"title":"$:/language/Buttons/Stamp/New/Title","text":"在选单中显示的标题"},"$:/language/Buttons/Stamp/New/Text":{"title":"$:/language/Buttons/Stamp/New/Text","text":"片段的文本。（记得在 `caption` 栏位中添加一个说明性的标题）。"},"$:/language/Buttons/Strikethrough/Caption":{"title":"$:/language/Buttons/Strikethrough/Caption","text":"删除线"},"$:/language/Buttons/Strikethrough/Hint":{"title":"$:/language/Buttons/Strikethrough/Hint","text":"套用删除线格式于所选文本"},"$:/language/Buttons/Subscript/Caption":{"title":"$:/language/Buttons/Subscript/Caption","text":"下标"},"$:/language/Buttons/Subscript/Hint":{"title":"$:/language/Buttons/Subscript/Hint","text":"套用下标格式于所选文本"},"$:/language/Buttons/Superscript/Caption":{"title":"$:/language/Buttons/Superscript/Caption","text":"上标"},"$:/language/Buttons/Superscript/Hint":{"title":"$:/language/Buttons/Superscript/Hint","text":"套用上标格式于所选文本"},"$:/language/Buttons/ToggleSidebar/Hint":{"title":"$:/language/Buttons/ToggleSidebar/Hint","text":"切换显示或隐藏侧边栏"},"$:/language/Buttons/Transcludify/Caption":{"title":"$:/language/Buttons/Transcludify/Caption","text":"嵌入"},"$:/language/Buttons/Transcludify/Hint":{"title":"$:/language/Buttons/Transcludify/Hint","text":"套用嵌入于所选文字"},"$:/language/Buttons/Underline/Caption":{"title":"$:/language/Buttons/Underline/Caption","text":"下划线"},"$:/language/Buttons/Underline/Hint":{"title":"$:/language/Buttons/Underline/Hint","text":"套用下划线格式于所选文本"},"$:/config/Search/MinLength":{"title":"$:/config/Search/MinLength","text":"1"},"$:/language/ControlPanel/Advanced/Caption":{"title":"$:/language/ControlPanel/Advanced/Caption","text":"高级"},"$:/language/ControlPanel/Advanced/Hint":{"title":"$:/language/ControlPanel/Advanced/Hint","text":"关于此 TiddlyWiki 的内部信息"},"$:/language/ControlPanel/Appearance/Caption":{"title":"$:/language/ControlPanel/Appearance/Caption","text":"视觉外观"},"$:/language/ControlPanel/Appearance/Hint":{"title":"$:/language/ControlPanel/Appearance/Hint","text":"定制您的 TiddlyWiki 外观。"},"$:/language/ControlPanel/Basics/AnimDuration/Prompt":{"title":"$:/language/ControlPanel/Basics/AnimDuration/Prompt","text":"动画持续时间"},"$:/language/ControlPanel/Basics/AutoFocus/Prompt":{"title":"$:/language/ControlPanel/Basics/AutoFocus/Prompt","text":"编辑条目时的默认自动停留栏位"},"$:/language/ControlPanel/Basics/Caption":{"title":"$:/language/ControlPanel/Basics/Caption","text":"基本"},"$:/language/ControlPanel/Basics/DefaultTiddlers/BottomHint":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/BottomHint","text":"标题含空白时请使用 &amp;#91;&amp;#91;双中括弧&amp;#93;&amp;#93;，或者您可用 &lt;$button set=\"$:/DefaultTiddlers\" setTo=\"[list[$:/StoryList]]\"&gt;保留开启中的条目顺序&lt;/$button&gt;"},"$:/language/ControlPanel/Basics/DefaultTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/Prompt","text":"首页"},"$:/language/ControlPanel/Basics/DefaultTiddlers/TopHint":{"title":"$:/language/ControlPanel/Basics/DefaultTiddlers/TopHint","text":"默认开启的条目"},"$:/language/ControlPanel/Basics/Language/Prompt":{"title":"$:/language/ControlPanel/Basics/Language/Prompt","text":"您好！当前的语言："},"$:/language/ControlPanel/Basics/NewJournal/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Tags/Prompt","text":"新日志条目的标签"},"$:/language/ControlPanel/Basics/NewJournal/Text/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Text/Prompt","text":"新日志条目的内容"},"$:/language/ControlPanel/Basics/NewJournal/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/NewJournal/Title/Prompt","text":"新日志条目的名称"},"$:/language/ControlPanel/Basics/NewTiddler/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/NewTiddler/Tags/Prompt","text":"新条目的标签"},"$:/language/ControlPanel/Basics/NewTiddler/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/NewTiddler/Title/Prompt","text":"新条目的名称"},"$:/language/ControlPanel/Basics/OverriddenShadowTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/OverriddenShadowTiddlers/Prompt","text":"被覆盖的默认条目数量"},"$:/language/ControlPanel/Basics/RemoveTags":{"title":"$:/language/ControlPanel/Basics/RemoveTags","text":"更新到当前格式"},"$:/language/ControlPanel/Basics/RemoveTags/Hint":{"title":"$:/language/ControlPanel/Basics/RemoveTags/Hint","text":"将标签配置更新为最新格式"},"$:/language/ControlPanel/Basics/ShadowTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/ShadowTiddlers/Prompt","text":"默认条目数量"},"$:/language/ControlPanel/Basics/Subtitle/Prompt":{"title":"$:/language/ControlPanel/Basics/Subtitle/Prompt","text":"副标题"},"$:/language/ControlPanel/Basics/SystemTiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/SystemTiddlers/Prompt","text":"系统条目数量"},"$:/language/ControlPanel/Basics/Tags/Prompt":{"title":"$:/language/ControlPanel/Basics/Tags/Prompt","text":"标签数量"},"$:/language/ControlPanel/Basics/Tiddlers/Prompt":{"title":"$:/language/ControlPanel/Basics/Tiddlers/Prompt","text":"一般条目数量"},"$:/language/ControlPanel/Basics/Title/Prompt":{"title":"$:/language/ControlPanel/Basics/Title/Prompt","text":"标题"},"$:/language/ControlPanel/Basics/Username/Prompt":{"title":"$:/language/ControlPanel/Basics/Username/Prompt","text":"编辑者署名"},"$:/language/ControlPanel/Basics/Version/Prompt":{"title":"$:/language/ControlPanel/Basics/Version/Prompt","text":"~TiddlyWiki 版本"},"$:/language/ControlPanel/EditorTypes/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Caption","text":"编辑器类型"},"$:/language/ControlPanel/EditorTypes/Editor/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Editor/Caption","text":"编辑器"},"$:/language/ControlPanel/EditorTypes/Hint":{"title":"$:/language/ControlPanel/EditorTypes/Hint","text":"这些条目决定使用哪个编辑器来编辑特定条目类型。"},"$:/language/ControlPanel/EditorTypes/Type/Caption":{"title":"$:/language/ControlPanel/EditorTypes/Type/Caption","text":"类型"},"$:/language/ControlPanel/Info/Caption":{"title":"$:/language/ControlPanel/Info/Caption","text":"信息"},"$:/language/ControlPanel/Info/Hint":{"title":"$:/language/ControlPanel/Info/Hint","text":"有关此 TiddlyWiki 的信息"},"$:/language/ControlPanel/KeyboardShortcuts/Add/Prompt":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Add/Prompt","text":"在此输入快捷键"},"$:/language/ControlPanel/KeyboardShortcuts/Add/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Add/Caption","text":"添加快捷键"},"$:/language/ControlPanel/KeyboardShortcuts/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Caption","text":"快捷键"},"$:/language/ControlPanel/KeyboardShortcuts/Hint":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Hint","text":"管理键盘快捷键分配"},"$:/language/ControlPanel/KeyboardShortcuts/NoShortcuts/Caption":{"title":"$:/language/ControlPanel/KeyboardShortcuts/NoShortcuts/Caption","text":"尚无指定快捷键"},"$:/language/ControlPanel/KeyboardShortcuts/Remove/Hint":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Remove/Hint","text":"删除快捷键"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/All":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/All","text":"所有平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Mac":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Mac","text":"仅 Macintosh 平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonMac":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonMac","text":"仅非 Macintosh 平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Linux":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Linux","text":"仅 Linux 平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonLinux":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonLinux","text":"仅非 Linux 平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/Windows":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/Windows","text":"仅 Windows 平台"},"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonWindows":{"title":"$:/language/ControlPanel/KeyboardShortcuts/Platform/NonWindows","text":"仅非 Windows 平台"},"$:/language/ControlPanel/LayoutSwitcher/Caption":{"title":"$:/language/ControlPanel/LayoutSwitcher/Caption","text":"布局"},"$:/language/ControlPanel/LoadedModules/Caption":{"title":"$:/language/ControlPanel/LoadedModules/Caption","text":"已加载的模块"},"$:/language/ControlPanel/LoadedModules/Hint":{"title":"$:/language/ControlPanel/LoadedModules/Hint","text":"这些是当前已加载的模块之源码条目。斜体的模块则无源码条目，通常是因为它们是在引导过程中设置。"},"$:/language/ControlPanel/Palette/Caption":{"title":"$:/language/ControlPanel/Palette/Caption","text":"调色板"},"$:/language/ControlPanel/Palette/Editor/Clone/Caption":{"title":"$:/language/ControlPanel/Palette/Editor/Clone/Caption","text":"复制"},"$:/language/ControlPanel/Palette/Editor/Clone/Prompt":{"title":"$:/language/ControlPanel/Palette/Editor/Clone/Prompt","text":"建议您修改前先复制此默认调色板"},"$:/language/ControlPanel/Palette/Editor/Delete/Hint":{"title":"$:/language/ControlPanel/Palette/Editor/Delete/Hint","text":"从当前调色板中删除此项"},"$:/language/ControlPanel/Palette/Editor/Names/External/Show":{"title":"$:/language/ControlPanel/Palette/Editor/Names/External/Show","text":"显示不属于当前调色板的颜色名称"},"$:/language/ControlPanel/Palette/Editor/Prompt/Modified":{"title":"$:/language/ControlPanel/Palette/Editor/Prompt/Modified","text":"此默认调色板已被修改过"},"$:/language/ControlPanel/Palette/Editor/Prompt":{"title":"$:/language/ControlPanel/Palette/Editor/Prompt","text":"编辑"},"$:/language/ControlPanel/Palette/Editor/Reset/Caption":{"title":"$:/language/ControlPanel/Palette/Editor/Reset/Caption","text":"重置"},"$:/language/ControlPanel/Palette/HideEditor/Caption":{"title":"$:/language/ControlPanel/Palette/HideEditor/Caption","text":"隐藏编辑器"},"$:/language/ControlPanel/Palette/Prompt":{"title":"$:/language/ControlPanel/Palette/Prompt","text":"当前的调色板："},"$:/language/ControlPanel/Palette/ShowEditor/Caption":{"title":"$:/language/ControlPanel/Palette/ShowEditor/Caption","text":"显示编辑器"},"$:/language/ControlPanel/Plugins/Add/Hint":{"title":"$:/language/ControlPanel/Plugins/Add/Hint","text":"从官方插件库安装插件"},"$:/language/ControlPanel/Plugins/Add/Caption":{"title":"$:/language/ControlPanel/Plugins/Add/Caption","text":"获取更多插件"},"$:/language/ControlPanel/Plugins/AlreadyInstalled/Hint":{"title":"$:/language/ControlPanel/Plugins/AlreadyInstalled/Hint","text":"此插件已经安装版本 &lt;$text text=&lt;&lt;installedVersion&gt;&gt;/&gt;"},"$:/language/ControlPanel/Plugins/AlsoRequires":{"title":"$:/language/ControlPanel/Plugins/AlsoRequires","text":"还需要："},"$:/language/ControlPanel/Plugins/Caption":{"title":"$:/language/ControlPanel/Plugins/Caption","text":"插件"},"$:/language/ControlPanel/Plugins/Disable/Caption":{"title":"$:/language/ControlPanel/Plugins/Disable/Caption","text":"禁用"},"$:/language/ControlPanel/Plugins/Disable/Hint":{"title":"$:/language/ControlPanel/Plugins/Disable/Hint","text":"重新加载页面时禁用此插件"},"$:/language/ControlPanel/Plugins/Disabled/Status":{"title":"$:/language/ControlPanel/Plugins/Disabled/Status","text":"(已禁用)"},"$:/language/ControlPanel/Plugins/Downgrade/Caption":{"title":"$:/language/ControlPanel/Plugins/Downgrade/Caption","text":"降级"},"$:/language/ControlPanel/Plugins/Empty/Hint":{"title":"$:/language/ControlPanel/Plugins/Empty/Hint","text":"无"},"$:/language/ControlPanel/Plugins/Enable/Caption":{"title":"$:/language/ControlPanel/Plugins/Enable/Caption","text":"启用"},"$:/language/ControlPanel/Plugins/Enable/Hint":{"title":"$:/language/ControlPanel/Plugins/Enable/Hint","text":"重新加载页面时启用此插件"},"$:/language/ControlPanel/Plugins/Install/Caption":{"title":"$:/language/ControlPanel/Plugins/Install/Caption","text":"安装"},"$:/language/ControlPanel/Plugins/Installed/Hint":{"title":"$:/language/ControlPanel/Plugins/Installed/Hint","text":"当前已安装的插件："},"$:/language/ControlPanel/Plugins/Languages/Caption":{"title":"$:/language/ControlPanel/Plugins/Languages/Caption","text":"语言"},"$:/language/ControlPanel/Plugins/Languages/Hint":{"title":"$:/language/ControlPanel/Plugins/Languages/Hint","text":"语言包插件"},"$:/language/ControlPanel/Plugins/NoInfoFound/Hint":{"title":"$:/language/ControlPanel/Plugins/NoInfoFound/Hint","text":"无 ''\"&lt;$text text=&lt;&lt;currentTab&gt;&gt;/&gt;\"''"},"$:/language/ControlPanel/Plugins/NoInformation/Hint":{"title":"$:/language/ControlPanel/Plugins/NoInformation/Hint","text":"未提供信息"},"$:/language/ControlPanel/Plugins/NotInstalled/Hint":{"title":"$:/language/ControlPanel/Plugins/NotInstalled/Hint","text":"尚未安装此插件"},"$:/language/ControlPanel/Plugins/OpenPluginLibrary":{"title":"$:/language/ControlPanel/Plugins/OpenPluginLibrary","text":"开启插件程式库"},"$:/language/ControlPanel/Plugins/ClosePluginLibrary":{"title":"$:/language/ControlPanel/Plugins/ClosePluginLibrary","text":"关闭插件程式库"},"$:/language/ControlPanel/Plugins/PluginWillRequireReload":{"title":"$:/language/ControlPanel/Plugins/PluginWillRequireReload","text":"（需要重新加载）"},"$:/language/ControlPanel/Plugins/Plugins/Caption":{"title":"$:/language/ControlPanel/Plugins/Plugins/Caption","text":"插件"},"$:/language/ControlPanel/Plugins/Plugins/Hint":{"title":"$:/language/ControlPanel/Plugins/Plugins/Hint","text":"插件"},"$:/language/ControlPanel/Plugins/Reinstall/Caption":{"title":"$:/language/ControlPanel/Plugins/Reinstall/Caption","text":"重新安装"},"$:/language/ControlPanel/Plugins/Themes/Caption":{"title":"$:/language/ControlPanel/Plugins/Themes/Caption","text":"布景主题"},"$:/language/ControlPanel/Plugins/Themes/Hint":{"title":"$:/language/ControlPanel/Plugins/Themes/Hint","text":"布景主题插件"},"$:/language/ControlPanel/Plugins/Update/Caption":{"title":"$:/language/ControlPanel/Plugins/Update/Caption","text":"更新"},"$:/language/ControlPanel/Plugins/Updates/Caption":{"title":"$:/language/ControlPanel/Plugins/Updates/Caption","text":"更新"},"$:/language/ControlPanel/Plugins/Updates/Hint":{"title":"$:/language/ControlPanel/Plugins/Updates/Hint","text":"已安装插件的可用更新"},"$:/language/ControlPanel/Plugins/Updates/UpdateAll/Caption":{"title":"$:/language/ControlPanel/Plugins/Updates/UpdateAll/Caption","text":"更新 &lt;&lt;update-count&gt;&gt; 个插件"},"$:/language/ControlPanel/Plugins/SubPluginPrompt":{"title":"$:/language/ControlPanel/Plugins/SubPluginPrompt","text":"提供 &lt;&lt;count&gt;&gt; 个可用的附加插件"},"$:/language/ControlPanel/Parsing/Caption":{"title":"$:/language/ControlPanel/Parsing/Caption","text":"解析"},"$:/language/ControlPanel/Parsing/Hint":{"title":"$:/language/ControlPanel/Parsing/Hint","text":"在此您可以全域禁用或启用维基解析规则。要使更改生效，请保存并重新加载您的维基。禁用某些解析规则，会妨碍 &lt;$text text=\"TiddlyWiki\"/&gt; 正常运作。可使用[[安全模式|https://tiddlywiki.com/#SafeMode]]恢复正常操作。"},"$:/language/ControlPanel/Parsing/Block/Caption":{"title":"$:/language/ControlPanel/Parsing/Block/Caption","text":"区块解析规则"},"$:/language/ControlPanel/Parsing/Inline/Caption":{"title":"$:/language/ControlPanel/Parsing/Inline/Caption","text":"内联解析规则"},"$:/language/ControlPanel/Parsing/Pragma/Caption":{"title":"$:/language/ControlPanel/Parsing/Pragma/Caption","text":"编译指示解析规则"},"$:/language/ControlPanel/Saving/Caption":{"title":"$:/language/ControlPanel/Saving/Caption","text":"保存"},"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Description":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Description","text":"允许下载保存模块的自动保存"},"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Hint":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/AutoSave/Hint","text":"启用下载保存模块的自动保存"},"$:/language/ControlPanel/Saving/DownloadSaver/Caption":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/Caption","text":"下载保存模块"},"$:/language/ControlPanel/Saving/DownloadSaver/Hint":{"title":"$:/language/ControlPanel/Saving/DownloadSaver/Hint","text":"这些设置适用于兼容 HTML5 的下载保存模块"},"$:/language/ControlPanel/Saving/General/Caption":{"title":"$:/language/ControlPanel/Saving/General/Caption","text":"通用"},"$:/language/ControlPanel/Saving/General/Hint":{"title":"$:/language/ControlPanel/Saving/General/Hint","text":"这些设置适用于所有已载入的保存模块"},"$:/language/ControlPanel/Saving/Hint":{"title":"$:/language/ControlPanel/Saving/Hint","text":"用于通过保存模块将整个 TiddlyWiki 保存为单个文件的设置"},"$:/language/ControlPanel/Saving/GitService/Branch":{"title":"$:/language/ControlPanel/Saving/GitService/Branch","text":"用于保存的目标分支"},"$:/language/ControlPanel/Saving/GitService/CommitMessage":{"title":"$:/language/ControlPanel/Saving/GitService/CommitMessage","text":"由 TiddlyWiki 保存"},"$:/language/ControlPanel/Saving/GitService/Description":{"title":"$:/language/ControlPanel/Saving/GitService/Description","text":"这些设置仅用于保存至 &lt;&lt;service-name&gt;&gt;"},"$:/language/ControlPanel/Saving/GitService/Filename":{"title":"$:/language/ControlPanel/Saving/GitService/Filename","text":"目标文件的文件名称 (例如，`index.html`)"},"$:/language/ControlPanel/Saving/GitService/Path":{"title":"$:/language/ControlPanel/Saving/GitService/Path","text":"目标文件的路径 (例如，`/wiki/`)"},"$:/language/ControlPanel/Saving/GitService/Repo":{"title":"$:/language/ControlPanel/Saving/GitService/Repo","text":"目标存储库 (例如，`Jermolene/TiddlyWiki5`)"},"$:/language/ControlPanel/Saving/GitService/ServerURL":{"title":"$:/language/ControlPanel/Saving/GitService/ServerURL","text":"服务器 API 网址"},"$:/language/ControlPanel/Saving/GitService/UserName":{"title":"$:/language/ControlPanel/Saving/GitService/UserName","text":"用户名称"},"$:/language/ControlPanel/Saving/GitService/GitHub/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/GitHub/Caption","text":"~GitHub 保存模块"},"$:/language/ControlPanel/Saving/GitService/GitHub/Password":{"title":"$:/language/ControlPanel/Saving/GitService/GitHub/Password","text":"密码、OAUTH 令牌，或个人存取令牌 (详见 [[GitHub 帮助页面|https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line]])"},"$:/language/ControlPanel/Saving/GitService/GitLab/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/GitLab/Caption","text":"~GitLab 保存模块"},"$:/language/ControlPanel/Saving/GitService/GitLab/Password":{"title":"$:/language/ControlPanel/Saving/GitService/GitLab/Password","text":"个人存取令牌的 API (详见 [[GitLab 帮助页面|https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html]])"},"$:/language/ControlPanel/Saving/GitService/Gitea/Caption":{"title":"$:/language/ControlPanel/Saving/GitService/Gitea/Caption","text":"Gitea 保存模块"},"$:/language/ControlPanel/Saving/GitService/Gitea/Password":{"title":"$:/language/ControlPanel/Saving/GitService/Gitea/Password","text":"个人存取令牌的 API (通过 Gitea 的 Web 界面：`设定 | 应用程序 | 产生新的令牌`)"},"$:/language/ControlPanel/Saving/TiddlySpot/Advanced/Heading":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Advanced/Heading","text":"高级设置"},"$:/language/ControlPanel/Saving/TiddlySpot/BackupDir":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/BackupDir","text":"备份文件夹"},"$:/language/ControlPanel/Saving/TiddlySpot/Backups":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Backups","text":"备份"},"$:/language/ControlPanel/Saving/TiddlySpot/Caption":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Caption","text":"~TiddlySpot 保存模块"},"$:/language/ControlPanel/Saving/TiddlySpot/ControlPanel":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ControlPanel","text":"~TiddlySpot 控制台"},"$:/language/ControlPanel/Saving/TiddlySpot/Description":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Description","text":"这些设置只适用于保存到 [[TiddlySpot|http://tiddlyspot.com]]、[[TiddlyHost|https://tiddlyhost.com]]，或兼容的远程服务器。有关 ~TiddlySpot 和 ~TiddlyHost 的保存设置信息，请参阅[[此处|https://github.com/simonbaird/tiddlyhost/wiki/TiddlySpot-Saver-configuration-for-Tiddlyhost-and-Tiddlyspot]]。"},"$:/language/ControlPanel/Saving/TiddlySpot/Filename":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Filename","text":"上传文件名"},"$:/language/ControlPanel/Saving/TiddlySpot/Heading":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Heading","text":"~TiddlySpot"},"$:/language/ControlPanel/Saving/TiddlySpot/Hint":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Hint","text":"//默认之服务器网址 `http://&lt;wikiname&gt;.tiddlyspot.com/store.cgi`，可改为定制之服务器网址，例如 `http://example.com/store.php`。//"},"$:/language/ControlPanel/Saving/TiddlySpot/Password":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/Password","text":"密码"},"$:/language/ControlPanel/Saving/TiddlySpot/ReadOnly":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ReadOnly","text":"请注意，[[TiddlySpot|http://tiddlyspot.com]] 不再允许创建新网站。对于新网站，您可以使用 [[TiddlyHost|https://tiddlyhost.com]]，一个新的取代 ~TiddlySpot 的讬管服务 。"},"$:/language/ControlPanel/Saving/TiddlySpot/ServerURL":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/ServerURL","text":"服务器网址"},"$:/language/ControlPanel/Saving/TiddlySpot/UploadDir":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/UploadDir","text":"上传文件夹"},"$:/language/ControlPanel/Saving/TiddlySpot/UserName":{"title":"$:/language/ControlPanel/Saving/TiddlySpot/UserName","text":"用户"},"$:/language/ControlPanel/Settings/AutoSave/Caption":{"title":"$:/language/ControlPanel/Settings/AutoSave/Caption","text":"自动保存"},"$:/language/ControlPanel/Settings/AutoSave/Disabled/Description":{"title":"$:/language/ControlPanel/Settings/AutoSave/Disabled/Description","text":"不要自动保存变更"},"$:/language/ControlPanel/Settings/AutoSave/Enabled/Description":{"title":"$:/language/ControlPanel/Settings/AutoSave/Enabled/Description","text":"自动保存变更"},"$:/language/ControlPanel/Settings/AutoSave/Hint":{"title":"$:/language/ControlPanel/Settings/AutoSave/Hint","text":"当使用支持的保存模块时，在编辑期间尝试自动保存变更"},"$:/language/ControlPanel/Settings/CamelCase/Caption":{"title":"$:/language/ControlPanel/Settings/CamelCase/Caption","text":"驼峰式维基链接"},"$:/language/ControlPanel/Settings/CamelCase/Hint":{"title":"$:/language/ControlPanel/Settings/CamelCase/Hint","text":"您可以全域禁用驼峰式短语自动链接。须保存后重新加载，方才生效。"},"$:/language/ControlPanel/Settings/CamelCase/Description":{"title":"$:/language/ControlPanel/Settings/CamelCase/Description","text":"启用自动驼峰式链接"},"$:/language/ControlPanel/Settings/Caption":{"title":"$:/language/ControlPanel/Settings/Caption","text":"设置"},"$:/language/ControlPanel/Settings/DefaultSidebarTab/Caption":{"title":"$:/language/ControlPanel/Settings/DefaultSidebarTab/Caption","text":"默认侧边栏页签"},"$:/language/ControlPanel/Settings/DefaultSidebarTab/Hint":{"title":"$:/language/ControlPanel/Settings/DefaultSidebarTab/Hint","text":"指定默认显示的侧边栏页签"},"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Caption":{"title":"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Caption","text":"更多侧边栏的默认页签"},"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Hint":{"title":"$:/language/ControlPanel/Settings/DefaultMoreSidebarTab/Hint","text":"指定默认显示的更多侧栏页签"},"$:/language/ControlPanel/Settings/EditorToolbar/Caption":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Caption","text":"编辑器工具栏"},"$:/language/ControlPanel/Settings/EditorToolbar/Hint":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Hint","text":"启用或禁用编辑器工具栏︰"},"$:/language/ControlPanel/Settings/EditorToolbar/Description":{"title":"$:/language/ControlPanel/Settings/EditorToolbar/Description","text":"显示编辑器工具栏"},"$:/language/ControlPanel/Settings/InfoPanelMode/Caption":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Caption","text":"条目信息面板模式"},"$:/language/ControlPanel/Settings/InfoPanelMode/Hint":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Hint","text":"控制条目信息面板何时关闭︰"},"$:/language/ControlPanel/Settings/InfoPanelMode/Popup/Description":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Popup/Description","text":"条目信息面板自动关闭"},"$:/language/ControlPanel/Settings/InfoPanelMode/Sticky/Description":{"title":"$:/language/ControlPanel/Settings/InfoPanelMode/Sticky/Description","text":"条目信息面板保持打开状态，直到明确关闭"},"$:/language/ControlPanel/Settings/Hint":{"title":"$:/language/ControlPanel/Settings/Hint","text":"这些高级设置让您定制 TiddlyWiki 的行为。"},"$:/language/ControlPanel/Settings/LinkToBehaviour/Caption":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/Caption","text":"条目开启行为"},"$:/language/ControlPanel/Settings/LinkToBehaviour/InsideRiver/Hint":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/InsideRiver/Hint","text":"从故事河//中//导航"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OutsideRiver/Hint":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OutsideRiver/Hint","text":"从故事河//外//导航"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAbove":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAbove","text":"开启于当前条目之上"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenBelow":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenBelow","text":"开启于当前条目之下"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtTop":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtTop","text":"开启于故事河的顶端"},"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtBottom":{"title":"$:/language/ControlPanel/Settings/LinkToBehaviour/OpenAtBottom","text":"开启于故事河的底部"},"$:/language/ControlPanel/Settings/MissingLinks/Caption":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Caption","text":"维基链接"},"$:/language/ControlPanel/Settings/MissingLinks/Hint":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Hint","text":"选择是否要链接到尚未存在的条目"},"$:/language/ControlPanel/Settings/MissingLinks/Description":{"title":"$:/language/ControlPanel/Settings/MissingLinks/Description","text":"启用链接到佚失条目"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Caption","text":"网址栏导览"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Hint","text":"在浏览器网址栏导览到条目时的行为："},"$:/language/ControlPanel/Settings/NavigationAddressBar/No/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/No/Description","text":"不更新网址栏"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Permalink/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Permalink/Description","text":"包含目标条目"},"$:/language/ControlPanel/Settings/NavigationAddressBar/Permaview/Description":{"title":"$:/language/ControlPanel/Settings/NavigationAddressBar/Permaview/Description","text":"包括目标条目和当前已开启的条目序列"},"$:/language/ControlPanel/Settings/NavigationHistory/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Caption","text":"历史记录导览"},"$:/language/ControlPanel/Settings/NavigationHistory/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Hint","text":"当导览到条目时，更新浏览器历史记录："},"$:/language/ControlPanel/Settings/NavigationHistory/No/Description":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/No/Description","text":"不更新历史记录"},"$:/language/ControlPanel/Settings/NavigationHistory/Yes/Description":{"title":"$:/language/ControlPanel/Settings/NavigationHistory/Yes/Description","text":"更新历史记录"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Caption":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Caption","text":"引用链接/固定链接 模式"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Hint":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/Hint","text":"选择 引用链接/固定链接 的处理方式："},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/CopyToClipboard/Description":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/CopyToClipboard/Description","text":"将 引用链接/固定链接 网址复制到剪贴板"},"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/UpdateAddressBar/Description":{"title":"$:/language/ControlPanel/Settings/NavigationPermalinkviewMode/UpdateAddressBar/Description","text":"以 引用链接/固定链接 更新网址栏"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Caption":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Caption","text":"性能检测"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Hint":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Hint","text":"在浏览器的开发人员控制台，显示性能统计数据。需要重新加载才能生效。"},"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Description":{"title":"$:/language/ControlPanel/Settings/PerformanceInstrumentation/Description","text":"启用性能检测"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Caption":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Caption","text":"工具栏按钮样式"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Hint":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Hint","text":"选择工具栏按钮的样式:"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Borderless":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Borderless","text":"无边框"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Boxed":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Boxed","text":"方框"},"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Rounded":{"title":"$:/language/ControlPanel/Settings/ToolbarButtonStyle/Styles/Rounded","text":"圆形"},"$:/language/ControlPanel/Settings/ToolbarButtons/Caption":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Caption","text":"工具栏按钮"},"$:/language/ControlPanel/Settings/ToolbarButtons/Hint":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Hint","text":"默认的工具栏按钮外观："},"$:/language/ControlPanel/Settings/ToolbarButtons/Icons/Description":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Icons/Description","text":"包含图标"},"$:/language/ControlPanel/Settings/ToolbarButtons/Text/Description":{"title":"$:/language/ControlPanel/Settings/ToolbarButtons/Text/Description","text":"包含文本"},"$:/language/ControlPanel/Settings/TitleLinks/Caption":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Caption","text":"条目标题"},"$:/language/ControlPanel/Settings/TitleLinks/Hint":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Hint","text":"可选地显示条目标题为链接"},"$:/language/ControlPanel/Settings/TitleLinks/No/Description":{"title":"$:/language/ControlPanel/Settings/TitleLinks/No/Description","text":"不显示条目标题为链接"},"$:/language/ControlPanel/Settings/TitleLinks/Yes/Description":{"title":"$:/language/ControlPanel/Settings/TitleLinks/Yes/Description","text":"显示条目标题为链接"},"$:/language/ControlPanel/StoryView/Caption":{"title":"$:/language/ControlPanel/StoryView/Caption","text":"查看模式"},"$:/language/ControlPanel/StoryView/Prompt":{"title":"$:/language/ControlPanel/StoryView/Prompt","text":"当前的查看模式："},"$:/language/ControlPanel/Stylesheets/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Caption","text":"样式表"},"$:/language/ControlPanel/Stylesheets/Expand/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Expand/Caption","text":"全部展开"},"$:/language/ControlPanel/Stylesheets/Hint":{"title":"$:/language/ControlPanel/Stylesheets/Hint","text":"这是当前标签为 &lt;&lt;tag \"$:/tags/Stylesheet\"&gt;&gt; 的样式表条目呈现的 CSS"},"$:/language/ControlPanel/Stylesheets/Restore/Caption":{"title":"$:/language/ControlPanel/Stylesheets/Restore/Caption","text":"复原"},"$:/language/ControlPanel/Theme/Caption":{"title":"$:/language/ControlPanel/Theme/Caption","text":"布景主题"},"$:/language/ControlPanel/Theme/Prompt":{"title":"$:/language/ControlPanel/Theme/Prompt","text":"当前的布景主题："},"$:/language/ControlPanel/TiddlerFields/Caption":{"title":"$:/language/ControlPanel/TiddlerFields/Caption","text":"条目栏位"},"$:/language/ControlPanel/TiddlerFields/Hint":{"title":"$:/language/ControlPanel/TiddlerFields/Hint","text":"这是本维基使用中的所有条目栏位（含系统条目的栏位，但默认条目的栏位除外）。"},"$:/language/ControlPanel/Toolbars/Caption":{"title":"$:/language/ControlPanel/Toolbars/Caption","text":"工具栏"},"$:/language/ControlPanel/Toolbars/EditToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/EditToolbar/Caption","text":"编辑工具栏"},"$:/language/ControlPanel/Toolbars/EditToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/EditToolbar/Hint","text":"选择将显示哪些按钮于条目的编辑模式工具栏。拖放可改变顺序。"},"$:/language/ControlPanel/Toolbars/Hint":{"title":"$:/language/ControlPanel/Toolbars/Hint","text":"选择将显示哪些工具栏按钮"},"$:/language/ControlPanel/Toolbars/PageControls/Caption":{"title":"$:/language/ControlPanel/Toolbars/PageControls/Caption","text":"页面工具栏"},"$:/language/ControlPanel/Toolbars/PageControls/Hint":{"title":"$:/language/ControlPanel/Toolbars/PageControls/Hint","text":"选择将显示哪些按钮于主页面的工具栏。拖放可改变顺序。"},"$:/language/ControlPanel/Toolbars/EditorToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/EditorToolbar/Caption","text":"编辑器工具栏"},"$:/language/ControlPanel/Toolbars/EditorToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/EditorToolbar/Hint","text":"选择将显示哪些按钮于编辑器工具栏。请注意，某些按钮只会出现在编辑某一类型的条目时。拖放可改变顺序。"},"$:/language/ControlPanel/Toolbars/ViewToolbar/Caption":{"title":"$:/language/ControlPanel/Toolbars/ViewToolbar/Caption","text":"查看工具栏"},"$:/language/ControlPanel/Toolbars/ViewToolbar/Hint":{"title":"$:/language/ControlPanel/Toolbars/ViewToolbar/Hint","text":"选择将显示哪些按钮于条目的查看模式工具栏。拖放可改变顺序。"},"$:/language/ControlPanel/Tools/Download/Full/Caption":{"title":"$:/language/ControlPanel/Tools/Download/Full/Caption","text":"下载完整副本"},"$:/core/zh-Hans/readme":{"title":"$:/core/zh-Hans/readme","text":"此插件包含 TiddlyWiki 的核心组件，包括：\n\n* JavaScript 代码模块\n* 图标\n* 创建 TiddlyWiki 的用户介面所需的模板\n* 核心所使用的可当地语系化字串的英国英语 (''en-GB'') 翻译\n"},"$:/language/Date/Long/Day/0":{"title":"$:/language/Date/Long/Day/0","text":"周日"},"$:/language/Date/Long/Day/1":{"title":"$:/language/Date/Long/Day/1","text":"周一"},"$:/language/Date/Long/Day/2":{"title":"$:/language/Date/Long/Day/2","text":"周二"},"$:/language/Date/Long/Day/3":{"title":"$:/language/Date/Long/Day/3","text":"周三"},"$:/language/Date/Long/Day/4":{"title":"$:/language/Date/Long/Day/4","text":"周四"},"$:/language/Date/Long/Day/5":{"title":"$:/language/Date/Long/Day/5","text":"周五"},"$:/language/Date/Long/Day/6":{"title":"$:/language/Date/Long/Day/6","text":"周六"},"$:/language/Date/Long/Month/1":{"title":"$:/language/Date/Long/Month/1","text":"一月"},"$:/language/Date/Long/Month/2":{"title":"$:/language/Date/Long/Month/2","text":"二月"},"$:/language/Date/Long/Month/3":{"title":"$:/language/Date/Long/Month/3","text":"三月"},"$:/language/Date/Long/Month/4":{"title":"$:/language/Date/Long/Month/4","text":"四月"},"$:/language/Date/Long/Month/5":{"title":"$:/language/Date/Long/Month/5","text":"五月"},"$:/language/Date/Long/Month/6":{"title":"$:/language/Date/Long/Month/6","text":"六月"},"$:/language/Date/Long/Month/7":{"title":"$:/language/Date/Long/Month/7","text":"七月"},"$:/language/Date/Long/Month/8":{"title":"$:/language/Date/Long/Month/8","text":"八月"},"$:/language/Date/Long/Month/9":{"title":"$:/language/Date/Long/Month/9","text":"九月"},"$:/language/Date/Long/Month/10":{"title":"$:/language/Date/Long/Month/10","text":"十月"},"$:/language/Date/Long/Month/11":{"title":"$:/language/Date/Long/Month/11","text":"十一月"},"$:/language/Date/Long/Month/12":{"title":"$:/language/Date/Long/Month/12","text":"十二月"},"$:/language/Date/Period/am":{"title":"$:/language/Date/Period/am","text":"上午"},"$:/language/Date/Period/pm":{"title":"$:/language/Date/Period/pm","text":"下午"},"$:/language/Date/Short/Day/0":{"title":"$:/language/Date/Short/Day/0","text":"日"},"$:/language/Date/Short/Day/1":{"title":"$:/language/Date/Short/Day/1","text":"一"},"$:/language/Date/Short/Day/2":{"title":"$:/language/Date/Short/Day/2","text":"二"},"$:/language/Date/Short/Day/3":{"title":"$:/language/Date/Short/Day/3","text":"三"},"$:/language/Date/Short/Day/4":{"title":"$:/language/Date/Short/Day/4","text":"四"},"$:/language/Date/Short/Day/5":{"title":"$:/language/Date/Short/Day/5","text":"五"},"$:/language/Date/Short/Day/6":{"title":"$:/language/Date/Short/Day/6","text":"六"},"$:/language/Date/Short/Month/1":{"title":"$:/language/Date/Short/Month/1","text":"01月"},"$:/language/Date/Short/Month/2":{"title":"$:/language/Date/Short/Month/2","text":"02月"},"$:/language/Date/Short/Month/3":{"title":"$:/language/Date/Short/Month/3","text":"03月"},"$:/language/Date/Short/Month/4":{"title":"$:/language/Date/Short/Month/4","text":"04月"},"$:/language/Date/Short/Month/5":{"title":"$:/language/Date/Short/Month/5","text":"05月"},"$:/language/Date/Short/Month/6":{"title":"$:/language/Date/Short/Month/6","text":"06月"},"$:/language/Date/Short/Month/7":{"title":"$:/language/Date/Short/Month/7","text":"07月"},"$:/language/Date/Short/Month/8":{"title":"$:/language/Date/Short/Month/8","text":"08月"},"$:/language/Date/Short/Month/9":{"title":"$:/language/Date/Short/Month/9","text":"09月"},"$:/language/Date/Short/Month/10":{"title":"$:/language/Date/Short/Month/10","text":"10月"},"$:/language/Date/Short/Month/11":{"title":"$:/language/Date/Short/Month/11","text":"11月"},"$:/language/Date/Short/Month/12":{"title":"$:/language/Date/Short/Month/12","text":"12月"},"$:/language/RelativeDate/Future/Days":{"title":"$:/language/RelativeDate/Future/Days","text":"&lt;&lt;period&gt;&gt; 天后"},"$:/language/RelativeDate/Future/Hours":{"title":"$:/language/RelativeDate/Future/Hours","text":"&lt;&lt;period&gt;&gt; 小时后"},"$:/language/RelativeDate/Future/Minutes":{"title":"$:/language/RelativeDate/Future/Minutes","text":"&lt;&lt;period&gt;&gt; 分钟后"},"$:/language/RelativeDate/Future/Months":{"title":"$:/language/RelativeDate/Future/Months","text":"&lt;&lt;period&gt;&gt; 个月后"},"$:/language/RelativeDate/Future/Second":{"title":"$:/language/RelativeDate/Future/Second","text":"1 秒后"},"$:/language/RelativeDate/Future/Seconds":{"title":"$:/language/RelativeDate/Future/Seconds","text":"&lt;&lt;period&gt;&gt; 秒后"},"$:/language/RelativeDate/Future/Years":{"title":"$:/language/RelativeDate/Future/Years","text":"&lt;&lt;period&gt;&gt; 年后"},"$:/language/RelativeDate/Past/Days":{"title":"$:/language/RelativeDate/Past/Days","text":"&lt;&lt;period&gt;&gt; 天前"},"$:/language/RelativeDate/Past/Hours":{"title":"$:/language/RelativeDate/Past/Hours","text":"&lt;&lt;period&gt;&gt; 小时前"},"$:/language/RelativeDate/Past/Minutes":{"title":"$:/language/RelativeDate/Past/Minutes","text":"&lt;&lt;period&gt;&gt; 分钟前"},"$:/language/RelativeDate/Past/Months":{"title":"$:/language/RelativeDate/Past/Months","text":"&lt;&lt;period&gt;&gt; 个月前"},"$:/language/RelativeDate/Past/Second":{"title":"$:/language/RelativeDate/Past/Second","text":"1 秒前"},"$:/language/RelativeDate/Past/Seconds":{"title":"$:/language/RelativeDate/Past/Seconds","text":"&lt;&lt;period&gt;&gt; 秒前"},"$:/language/RelativeDate/Past/Years":{"title":"$:/language/RelativeDate/Past/Years","text":"&lt;&lt;period&gt;&gt; 年前"},"$:/language/Docs/ModuleTypes/allfilteroperator":{"title":"$:/language/Docs/ModuleTypes/allfilteroperator","text":"''all'' 筛选器算子的子算子。"},"$:/language/Docs/ModuleTypes/animation":{"title":"$:/language/Docs/ModuleTypes/animation","text":"动画模块包含可用于 RevealWidget 的动画。"},"$:/language/Docs/ModuleTypes/authenticator":{"title":"$:/language/Docs/ModuleTypes/authenticator","text":"定义内置 HTTP 服务器对请求的身份验证方式。"},"$:/language/Docs/ModuleTypes/bitmapeditoroperation":{"title":"$:/language/Docs/ModuleTypes/bitmapeditoroperation","text":"一个位图编辑器工具栏操作。"},"$:/language/Docs/ModuleTypes/command":{"title":"$:/language/Docs/ModuleTypes/command","text":"可于 Node.js 执行的指令。"},"$:/language/Docs/ModuleTypes/config":{"title":"$:/language/Docs/ModuleTypes/config","text":"加入 `$tw.config` 的数据。"},"$:/language/Docs/ModuleTypes/filteroperator":{"title":"$:/language/Docs/ModuleTypes/filteroperator","text":"个别筛选器算子方法。"},"$:/language/Docs/ModuleTypes/global":{"title":"$:/language/Docs/ModuleTypes/global","text":"加入 `$tw` 的全域数据。"},"$:/language/Docs/ModuleTypes/info":{"title":"$:/language/Docs/ModuleTypes/info","text":"透过 [[$:/temp/info-plugin]] 伪插件，发布系统信息。"},"$:/language/Docs/ModuleTypes/isfilteroperator":{"title":"$:/language/Docs/ModuleTypes/isfilteroperator","text":"''is'' 筛选器算子的运算符。"},"$:/language/Docs/ModuleTypes/library":{"title":"$:/language/Docs/ModuleTypes/library","text":"一般用途的 JavaScript 模块的通用模块类型。"},"$:/language/Docs/ModuleTypes/macro":{"title":"$:/language/Docs/ModuleTypes/macro","text":"JavaScript ''宏''定义。"},"$:/language/Docs/ModuleTypes/parser":{"title":"$:/language/Docs/ModuleTypes/parser","text":"不同内容类型的解析器。"},"$:/language/Docs/ModuleTypes/route":{"title":"$:/language/Docs/ModuleTypes/route","text":"定义内置 HTTP 服务器如何处理各个网址格式。"},"$:/language/Docs/ModuleTypes/saver":{"title":"$:/language/Docs/ModuleTypes/saver","text":"于浏览器保存文件的不同的保存处理方法。"},"$:/language/Docs/ModuleTypes/startup":{"title":"$:/language/Docs/ModuleTypes/startup","text":"启动时期的功能函数。"},"$:/language/Docs/ModuleTypes/storyview":{"title":"$:/language/Docs/ModuleTypes/storyview","text":"查看模式用以自订 list 小部件的动画与行为。"},"$:/language/Docs/ModuleTypes/texteditoroperation":{"title":"$:/language/Docs/ModuleTypes/texteditoroperation","text":"一个文本编辑器工具栏操作。"},"$:/language/Docs/ModuleTypes/tiddlerdeserializer":{"title":"$:/language/Docs/ModuleTypes/tiddlerdeserializer","text":"转换不同内容类型至条目。"},"$:/language/Docs/ModuleTypes/tiddlerfield":{"title":"$:/language/Docs/ModuleTypes/tiddlerfield","text":"定义个别条目栏位的行为。"},"$:/language/Docs/ModuleTypes/tiddlermethod":{"title":"$:/language/Docs/ModuleTypes/tiddlermethod","text":"添加方法至 `$tw.Tiddler` 原型。"},"$:/language/Docs/ModuleTypes/upgrader":{"title":"$:/language/Docs/ModuleTypes/upgrader","text":"于升级/导入过程中，套用升级处理至条目。"},"$:/language/Docs/ModuleTypes/utils":{"title":"$:/language/Docs/ModuleTypes/utils","text":"添加方法至 `$tw.utils`。"},"$:/language/Docs/ModuleTypes/utils-browser":{"title":"$:/language/Docs/ModuleTypes/utils-browser","text":"将特定于浏览器的方法添加到 `$tw.utils`。"},"$:/language/Docs/ModuleTypes/utils-node":{"title":"$:/language/Docs/ModuleTypes/utils-node","text":"将特定于 Node.js 的方法添加到 `$tw.utils`。"},"$:/language/Docs/ModuleTypes/widget":{"title":"$:/language/Docs/ModuleTypes/widget","text":"封装 DOM 渲染和刷新的小部件。"},"$:/language/Docs/ModuleTypes/wikimethod":{"title":"$:/language/Docs/ModuleTypes/wikimethod","text":"添加方法至 `$tw.Wiki`。"},"$:/language/Docs/ModuleTypes/wikirule":{"title":"$:/language/Docs/ModuleTypes/wikirule","text":"WikiText 解析器的个别的语法规则。"},"$:/language/Docs/PaletteColours/alert-background":{"title":"$:/language/Docs/PaletteColours/alert-background","text":"警示背景"},"$:/language/Docs/PaletteColours/alert-border":{"title":"$:/language/Docs/PaletteColours/alert-border","text":"警示边框"},"$:/language/Docs/PaletteColours/alert-highlight":{"title":"$:/language/Docs/PaletteColours/alert-highlight","text":"警示高亮度"},"$:/language/Docs/PaletteColours/alert-muted-foreground":{"title":"$:/language/Docs/PaletteColours/alert-muted-foreground","text":"警示的低调前景"},"$:/language/Docs/PaletteColours/background":{"title":"$:/language/Docs/PaletteColours/background","text":"一般背景"},"$:/language/Docs/PaletteColours/blockquote-bar":{"title":"$:/language/Docs/PaletteColours/blockquote-bar","text":"引言条"},"$:/language/Docs/PaletteColours/button-background":{"title":"$:/language/Docs/PaletteColours/button-background","text":"默认按钮背景"},"$:/language/Docs/PaletteColours/button-border":{"title":"$:/language/Docs/PaletteColours/button-border","text":"默认按钮边框"},"$:/language/Docs/PaletteColours/button-foreground":{"title":"$:/language/Docs/PaletteColours/button-foreground","text":"默认按钮前景"},"$:/language/Docs/PaletteColours/code-background":{"title":"$:/language/Docs/PaletteColours/code-background","text":"代码背景"},"$:/language/Docs/PaletteColours/code-border":{"title":"$:/language/Docs/PaletteColours/code-border","text":"代码边框"},"$:/language/Docs/PaletteColours/code-foreground":{"title":"$:/language/Docs/PaletteColours/code-foreground","text":"代码前景"},"$:/language/Docs/PaletteColours/dirty-indicator":{"title":"$:/language/Docs/PaletteColours/dirty-indicator","text":"未保存变更指示器"},"$:/language/Docs/PaletteColours/download-background":{"title":"$:/language/Docs/PaletteColours/download-background","text":"下载按钮背景"},"$:/language/Docs/PaletteColours/download-foreground":{"title":"$:/language/Docs/PaletteColours/download-foreground","text":"下载按钮前景"},"$:/language/Docs/PaletteColours/dragger-background":{"title":"$:/language/Docs/PaletteColours/dragger-background","text":"拖动区背景"},"$:/language/Docs/PaletteColours/dragger-foreground":{"title":"$:/language/Docs/PaletteColours/dragger-foreground","text":"拖动区前景"},"$:/language/Docs/PaletteColours/dropdown-background":{"title":"$:/language/Docs/PaletteColours/dropdown-background","text":"下拉背景"},"$:/language/Docs/PaletteColours/dropdown-border":{"title":"$:/language/Docs/PaletteColours/dropdown-border","text":"下拉边框"},"$:/language/Docs/PaletteColours/dropdown-tab-background-selected":{"title":"$:/language/Docs/PaletteColours/dropdown-tab-background-selected","text":"选定的下拉页签背景"},"$:/language/Docs/PaletteColours/dropdown-tab-background":{"title":"$:/language/Docs/PaletteColours/dropdown-tab-background","text":"下拉页签背景"},"$:/language/Docs/PaletteColours/dropzone-background":{"title":"$:/language/Docs/PaletteColours/dropzone-background","text":"拖放背景"},"$:/language/Docs/PaletteColours/external-link-background-hover":{"title":"$:/language/Docs/PaletteColours/external-link-background-hover","text":"悬停外部链结背景"},"$:/language/Docs/PaletteColours/external-link-background-visited":{"title":"$:/language/Docs/PaletteColours/external-link-background-visited","text":"已造访过的外部链结背景"},"$:/language/Docs/PaletteColours/external-link-background":{"title":"$:/language/Docs/PaletteColours/external-link-background","text":"外部链结背景"},"$:/language/Docs/PaletteColours/external-link-foreground-hover":{"title":"$:/language/Docs/PaletteColours/external-link-foreground-hover","text":"悬停外部链结前景"},"$:/language/Docs/PaletteColours/external-link-foreground-visited":{"title":"$:/language/Docs/PaletteColours/external-link-foreground-visited","text":"已造访过的外部链结前景"},"$:/language/Docs/PaletteColours/external-link-foreground":{"title":"$:/language/Docs/PaletteColours/external-link-foreground","text":"外部链结前景"},"$:/language/Docs/PaletteColours/foreground":{"title":"$:/language/Docs/PaletteColours/foreground","text":"一般前景"},"$:/language/Docs/PaletteColours/menubar-background":{"title":"$:/language/Docs/PaletteColours/menubar-background","text":"菜单列背景"},"$:/language/Docs/PaletteColours/menubar-foreground":{"title":"$:/language/Docs/PaletteColours/menubar-foreground","text":"菜单列前景"},"$:/language/Docs/PaletteColours/message-background":{"title":"$:/language/Docs/PaletteColours/message-background","text":"信息框背景"},"$:/language/Docs/PaletteColours/message-border":{"title":"$:/language/Docs/PaletteColours/message-border","text":"信息边框"},"$:/language/Docs/PaletteColours/message-foreground":{"title":"$:/language/Docs/PaletteColours/message-foreground","text":"信息框前景"},"$:/language/Docs/PaletteColours/modal-backdrop":{"title":"$:/language/Docs/PaletteColours/modal-backdrop","text":"模块背景幕"},"$:/language/Docs/PaletteColours/modal-background":{"title":"$:/language/Docs/PaletteColours/modal-background","text":"模块背景"},"$:/language/Docs/PaletteColours/modal-border":{"title":"$:/language/Docs/PaletteColours/modal-border","text":"模块边框"},"$:/language/Docs/PaletteColours/modal-footer-background":{"title":"$:/language/Docs/PaletteColours/modal-footer-background","text":"模块页脚背景"},"$:/language/Docs/PaletteColours/modal-footer-border":{"title":"$:/language/Docs/PaletteColours/modal-footer-border","text":"模块页脚边框"},"$:/language/Docs/PaletteColours/modal-header-border":{"title":"$:/language/Docs/PaletteColours/modal-header-border","text":"模块标题边框"},"$:/language/Docs/PaletteColours/muted-foreground":{"title":"$:/language/Docs/PaletteColours/muted-foreground","text":"一般低调前景"},"$:/language/Docs/PaletteColours/notification-background":{"title":"$:/language/Docs/PaletteColours/notification-background","text":"通知背景"},"$:/language/Docs/PaletteColours/notification-border":{"title":"$:/language/Docs/PaletteColours/notification-border","text":"通知边框"},"$:/language/Docs/PaletteColours/page-background":{"title":"$:/language/Docs/PaletteColours/page-background","text":"页面背景"},"$:/language/Docs/PaletteColours/pre-background":{"title":"$:/language/Docs/PaletteColours/pre-background","text":"pre 背景"},"$:/language/Docs/PaletteColours/pre-border":{"title":"$:/language/Docs/PaletteColours/pre-border","text":"pre 边框"},"$:/language/Docs/PaletteColours/primary":{"title":"$:/language/Docs/PaletteColours/primary","text":"主颜色"},"$:/language/Docs/PaletteColours/select-tag-background":{"title":"$:/language/Docs/PaletteColours/select-tag-background","text":"`&lt;select&gt;` 元素背景"},"$:/language/Docs/PaletteColours/select-tag-foreground":{"title":"$:/language/Docs/PaletteColours/select-tag-foreground","text":"`&lt;select&gt;` 元素文本"},"$:/language/Docs/PaletteColours/sidebar-button-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-button-foreground","text":"侧边栏按钮前景"},"$:/language/Docs/PaletteColours/sidebar-controls-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-controls-foreground-hover","text":"悬停侧边栏控制项前景"},"$:/language/Docs/PaletteColours/sidebar-controls-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-controls-foreground","text":"侧边栏控制项前景"},"$:/language/Docs/PaletteColours/sidebar-foreground-shadow":{"title":"$:/language/Docs/PaletteColours/sidebar-foreground-shadow","text":"侧边栏前景阴影"},"$:/language/Docs/PaletteColours/sidebar-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-foreground","text":"侧边栏前景"},"$:/language/Docs/PaletteColours/sidebar-muted-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-muted-foreground-hover","text":"悬停侧边栏低调前景"},"$:/language/Docs/PaletteColours/sidebar-muted-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-muted-foreground","text":"侧边栏低调前景"},"$:/language/Docs/PaletteColours/sidebar-tab-background-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-background-selected","text":"侧边栏选定页签背景"},"$:/language/Docs/PaletteColours/sidebar-tab-background":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-background","text":"侧边栏页签背景"},"$:/language/Docs/PaletteColours/sidebar-tab-border-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-border-selected","text":"侧边栏选定页签边框"},"$:/language/Docs/PaletteColours/sidebar-tab-border":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-border","text":"侧边栏页签边框"},"$:/language/Docs/PaletteColours/sidebar-tab-divider":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-divider","text":"侧边栏页签分隔线"},"$:/language/Docs/PaletteColours/sidebar-tab-foreground-selected":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-foreground-selected","text":"侧边栏选定页签前景"},"$:/language/Docs/PaletteColours/sidebar-tab-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-tab-foreground","text":"侧边栏页签前景"},"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground-hover":{"title":"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground-hover","text":"侧边栏悬停条目链结前景"},"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground":{"title":"$:/language/Docs/PaletteColours/sidebar-tiddler-link-foreground","text":"侧边栏条目链结前景"},"$:/language/Docs/PaletteColours/site-title-foreground":{"title":"$:/language/Docs/PaletteColours/site-title-foreground","text":"网站标题前景"},"$:/language/Docs/PaletteColours/static-alert-foreground":{"title":"$:/language/Docs/PaletteColours/static-alert-foreground","text":"静态警示前景"},"$:/language/Docs/PaletteColours/tab-background-selected":{"title":"$:/language/Docs/PaletteColours/tab-background-selected","text":"选定的页签背景"},"$:/language/Docs/PaletteColours/tab-background":{"title":"$:/language/Docs/PaletteColours/tab-background","text":"页签背景"},"$:/language/Docs/PaletteColours/tab-border-selected":{"title":"$:/language/Docs/PaletteColours/tab-border-selected","text":"选定的页签边框"},"$:/language/Docs/PaletteColours/tab-border":{"title":"$:/language/Docs/PaletteColours/tab-border","text":"页签边框"},"$:/language/Docs/PaletteColours/tab-divider":{"title":"$:/language/Docs/PaletteColours/tab-divider","text":"页签分隔线"},"$:/language/Docs/PaletteColours/tab-foreground-selected":{"title":"$:/language/Docs/PaletteColours/tab-foreground-selected","text":"选定的页签前景"},"$:/language/Docs/PaletteColours/tab-foreground":{"title":"$:/language/Docs/PaletteColours/tab-foreground","text":"页签前景"},"$:/language/Docs/PaletteColours/table-border":{"title":"$:/language/Docs/PaletteColours/table-border","text":"表格边框"},"$:/language/Docs/PaletteColours/table-footer-background":{"title":"$:/language/Docs/PaletteColours/table-footer-background","text":"表格页脚背景"},"$:/language/Docs/PaletteColours/table-header-background":{"title":"$:/language/Docs/PaletteColours/table-header-background","text":"表格标题背景"},"$:/language/Docs/PaletteColours/tag-background":{"title":"$:/language/Docs/PaletteColours/tag-background","text":"标签背景"},"$:/language/Docs/PaletteColours/tag-foreground":{"title":"$:/language/Docs/PaletteColours/tag-foreground","text":"标签前景"},"$:/language/Docs/PaletteColours/tiddler-background":{"title":"$:/language/Docs/PaletteColours/tiddler-background","text":"条目背景"},"$:/language/Docs/PaletteColours/tiddler-border":{"title":"$:/language/Docs/PaletteColours/tiddler-border","text":"条目边框"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground-hover":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground-hover","text":"悬停的条目控制项前景"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground-selected":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground-selected","text":"选定的条目控制项前景"},"$:/language/Docs/PaletteColours/tiddler-controls-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-controls-foreground","text":"条目控制项前景"},"$:/language/Docs/PaletteColours/tiddler-editor-background":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-background","text":"条目编辑器背景"},"$:/language/Docs/PaletteColours/tiddler-editor-border-image":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-border-image","text":"条目编辑器边框图片"},"$:/language/Docs/PaletteColours/tiddler-editor-border":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-border","text":"条目编辑器边框"},"$:/language/Docs/PaletteColours/tiddler-editor-fields-even":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-fields-even","text":"条目编辑器中偶数栏位背景"},"$:/language/Docs/PaletteColours/tiddler-editor-fields-odd":{"title":"$:/language/Docs/PaletteColours/tiddler-editor-fields-odd","text":"条目编辑器中奇数栏位背景"},"$:/language/Docs/PaletteColours/tiddler-info-background":{"title":"$:/language/Docs/PaletteColours/tiddler-info-background","text":"条目信息面板背景"},"$:/language/Docs/PaletteColours/tiddler-info-border":{"title":"$:/language/Docs/PaletteColours/tiddler-info-border","text":"条目信息面板边框"},"$:/language/Docs/PaletteColours/tiddler-info-tab-background":{"title":"$:/language/Docs/PaletteColours/tiddler-info-tab-background","text":"条目信息面板页签背景"},"$:/language/Docs/PaletteColours/tiddler-link-background":{"title":"$:/language/Docs/PaletteColours/tiddler-link-background","text":"条目链结背景"},"$:/language/Docs/PaletteColours/tiddler-link-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-link-foreground","text":"条目链结前景"},"$:/language/Docs/PaletteColours/tiddler-subtitle-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-subtitle-foreground","text":"条目副标题前景"},"$:/language/Docs/PaletteColours/tiddler-title-foreground":{"title":"$:/language/Docs/PaletteColours/tiddler-title-foreground","text":"条目标题前景"},"$:/language/Docs/PaletteColours/toolbar-new-button":{"title":"$:/language/Docs/PaletteColours/toolbar-new-button","text":"工具栏 '添加条目' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-options-button":{"title":"$:/language/Docs/PaletteColours/toolbar-options-button","text":"工具栏 '选项' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-save-button":{"title":"$:/language/Docs/PaletteColours/toolbar-save-button","text":"工具栏 '保存' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-info-button":{"title":"$:/language/Docs/PaletteColours/toolbar-info-button","text":"工具栏 '资讯' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-edit-button":{"title":"$:/language/Docs/PaletteColours/toolbar-edit-button","text":"工具栏 '编辑' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-close-button":{"title":"$:/language/Docs/PaletteColours/toolbar-close-button","text":"工具栏 '关闭' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-delete-button":{"title":"$:/language/Docs/PaletteColours/toolbar-delete-button","text":"工具栏 '删除' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-cancel-button":{"title":"$:/language/Docs/PaletteColours/toolbar-cancel-button","text":"工具栏 '取消' 按钮前景"},"$:/language/Docs/PaletteColours/toolbar-done-button":{"title":"$:/language/Docs/PaletteColours/toolbar-done-button","text":"工具栏 '完成  按钮前景"},"$:/language/Docs/PaletteColours/untagged-background":{"title":"$:/language/Docs/PaletteColours/untagged-background","text":"未设标签的背景"},"$:/language/Docs/PaletteColours/very-muted-foreground":{"title":"$:/language/Docs/PaletteColours/very-muted-foreground","text":"非常低调前景"},"$:/language/EditTemplate/Body/External/Hint":{"title":"$:/language/EditTemplate/Body/External/Hint","text":"此条目显示保存于主要的 TiddlyWiki 文件之外的内容。你可以编辑其标签和字段，但不能直接编辑内容本身"},"$:/language/EditTemplate/Body/Placeholder":{"title":"$:/language/EditTemplate/Body/Placeholder","text":"输入此条目的内容"},"$:/language/EditTemplate/Body/Preview/Type/Output":{"title":"$:/language/EditTemplate/Body/Preview/Type/Output","text":"输出"},"$:/language/EditTemplate/Body/Preview/Type/DiffShadow":{"title":"$:/language/EditTemplate/Body/Preview/Type/DiffShadow","text":"与影子条目的差异（如果有）"},"$:/language/EditTemplate/Body/Preview/Type/DiffCurrent":{"title":"$:/language/EditTemplate/Body/Preview/Type/DiffCurrent","text":"与当前条目的差异"},"$:/language/EditTemplate/Field/Remove/Caption":{"title":"$:/language/EditTemplate/Field/Remove/Caption","text":"删除字段"},"$:/language/EditTemplate/Field/Remove/Hint":{"title":"$:/language/EditTemplate/Field/Remove/Hint","text":"删除字段"},"$:/language/EditTemplate/Field/Dropdown/Caption":{"title":"$:/language/EditTemplate/Field/Dropdown/Caption","text":"字段列表"},"$:/language/EditTemplate/Field/Dropdown/Hint":{"title":"$:/language/EditTemplate/Field/Dropdown/Hint","text":"显示字段列表"},"$:/language/EditTemplate/Fields/Add/Button":{"title":"$:/language/EditTemplate/Fields/Add/Button","text":"添加"},"$:/language/EditTemplate/Fields/Add/Button/Hint":{"title":"$:/language/EditTemplate/Fields/Add/Button/Hint","text":"添加字段至条目"},"$:/language/EditTemplate/Fields/Add/Dropdown/System":{"title":"$:/language/EditTemplate/Fields/Add/Dropdown/System","text":"系统字段"},"$:/language/EditTemplate/Fields/Add/Dropdown/User":{"title":"$:/language/EditTemplate/Fields/Add/Dropdown/User","text":"使用者字段"},"$:/language/EditTemplate/Fields/Add/Name/Placeholder":{"title":"$:/language/EditTemplate/Fields/Add/Name/Placeholder","text":"字段名称"},"$:/language/EditTemplate/Fields/Add/Prompt":{"title":"$:/language/EditTemplate/Fields/Add/Prompt","text":"添加字段："},"$:/language/EditTemplate/Fields/Add/Value/Placeholder":{"title":"$:/language/EditTemplate/Fields/Add/Value/Placeholder","text":"字段内容"},"$:/language/EditTemplate/Shadow/Warning":{"title":"$:/language/EditTemplate/Shadow/Warning","text":"这是一个默认条目。您做的任何更改将会覆盖来自 &lt;&lt;pluginLink&gt;&gt; 插件的默认版本。"},"$:/language/EditTemplate/Shadow/OverriddenWarning":{"title":"$:/language/EditTemplate/Shadow/OverriddenWarning","text":"这是一个修改过的默认条目。删除此条目可以还原为 &lt;&lt;pluginLink&gt;&gt; 插件中的默认版本。"},"$:/language/EditTemplate/Tags/Add/Button":{"title":"$:/language/EditTemplate/Tags/Add/Button","text":"添加"},"$:/language/EditTemplate/Tags/Add/Button/Hint":{"title":"$:/language/EditTemplate/Tags/Add/Button/Hint","text":"添加标签"},"$:/language/EditTemplate/Tags/Add/Placeholder":{"title":"$:/language/EditTemplate/Tags/Add/Placeholder","text":"标签名称"},"$:/language/EditTemplate/Tags/ClearInput/Caption":{"title":"$:/language/EditTemplate/Tags/ClearInput/Caption","text":"清除输入"},"$:/language/EditTemplate/Tags/ClearInput/Hint":{"title":"$:/language/EditTemplate/Tags/ClearInput/Hint","text":"清除标签输入"},"$:/language/EditTemplate/Tags/Dropdown/Caption":{"title":"$:/language/EditTemplate/Tags/Dropdown/Caption","text":"标签清单"},"$:/language/EditTemplate/Tags/Dropdown/Hint":{"title":"$:/language/EditTemplate/Tags/Dropdown/Hint","text":"显示标签清单"},"$:/language/EditTemplate/Title/BadCharacterWarning":{"title":"$:/language/EditTemplate/Title/BadCharacterWarning","text":"请注意，避免在条目名称中使用这些字符：&lt;&lt;bad-chars&gt;&gt;"},"$:/language/EditTemplate/Title/Exists/Prompt":{"title":"$:/language/EditTemplate/Title/Exists/Prompt","text":"目标条目已经存在"},"$:/language/EditTemplate/Title/Relink/Prompt":{"title":"$:/language/EditTemplate/Title/Relink/Prompt","text":"将在其他条目的 //tags// 和 //list// 字段中的 ''&lt;$text text=&lt;&lt;fromTitle&gt;&gt;/&gt;'' 改为 ''&lt;$text text=&lt;&lt;toTitle&gt;&gt;/&gt;''"},"$:/language/EditTemplate/Title/References/Prompt":{"title":"$:/language/EditTemplate/Title/References/Prompt","text":"下列对此条目的引用，不会自动更新："},"$:/language/EditTemplate/Type/Dropdown/Caption":{"title":"$:/language/EditTemplate/Type/Dropdown/Caption","text":"内容类型清单"},"$:/language/EditTemplate/Type/Dropdown/Hint":{"title":"$:/language/EditTemplate/Type/Dropdown/Hint","text":"显示内容类型清单"},"$:/language/EditTemplate/Type/Delete/Caption":{"title":"$:/language/EditTemplate/Type/Delete/Caption","text":"删除内容类型"},"$:/language/EditTemplate/Type/Delete/Hint":{"title":"$:/language/EditTemplate/Type/Delete/Hint","text":"删除内容类型"},"$:/language/EditTemplate/Type/Placeholder":{"title":"$:/language/EditTemplate/Type/Placeholder","text":"内容类型"},"$:/language/EditTemplate/Type/Prompt":{"title":"$:/language/EditTemplate/Type/Prompt","text":"类型："},"$:/language/Exporters/StaticRiver":{"title":"$:/language/Exporters/StaticRiver","text":"静态 HTML"},"$:/language/Exporters/JsonFile":{"title":"$:/language/Exporters/JsonFile","text":"JSON 文件"},"$:/language/Exporters/CsvFile":{"title":"$:/language/Exporters/CsvFile","text":"CSV 文件"},"$:/language/Exporters/TidFile":{"title":"$:/language/Exporters/TidFile","text":"\".tid\" 文件"},"$:/language/Docs/Fields/_canonical_uri":{"title":"$:/language/Docs/Fields/_canonical_uri","text":"外部图像条目的完整的 URI"},"$:/language/Docs/Fields/bag":{"title":"$:/language/Docs/Fields/bag","text":"条目的来源集的名称"},"$:/language/Docs/Fields/caption":{"title":"$:/language/Docs/Fields/caption","text":"显示于页签或按钮上的标题文字"},"$:/language/Docs/Fields/color":{"title":"$:/language/Docs/Fields/color","text":"条目的 CSS 颜色值"},"$:/language/Docs/Fields/component":{"title":"$:/language/Docs/Fields/component","text":"负责[[警示条目|AlertMechanism]]的组件名称"},"$:/language/Docs/Fields/created":{"title":"$:/language/Docs/Fields/created","text":"条目的创建日期"},"$:/language/Docs/Fields/creator":{"title":"$:/language/Docs/Fields/creator","text":"条目的创建者"},"$:/language/Docs/Fields/current-tiddler":{"title":"$:/language/Docs/Fields/current-tiddler","text":"用于缓存[[浏览历史列表|HistoryMechanism]]的最上层条目"},"$:/language/Docs/Fields/dependents":{"title":"$:/language/Docs/Fields/dependents","text":"插件的相依插件列表"},"$:/language/Docs/Fields/description":{"title":"$:/language/Docs/Fields/description","text":"插件的说明、描述"},"$:/language/Docs/Fields/draft.of":{"title":"$:/language/Docs/Fields/draft.of","text":"草稿条目，包含条目的标题、标签、栏位 ..."},"$:/language/Docs/Fields/draft.title":{"title":"$:/language/Docs/Fields/draft.title","text":"草稿条目的标题"},"$:/language/Docs/Fields/footer":{"title":"$:/language/Docs/Fields/footer","text":"wizard 的注脚"},"$:/language/Docs/Fields/icon":{"title":"$:/language/Docs/Fields/icon","text":"条目的标题含有与条目关联的图标"},"$:/language/Docs/Fields/library":{"title":"$:/language/Docs/Fields/library","text":"若设为 \"yes\"，表示条目应该被保存为一个 JavaScript 程序库"},"$:/language/Docs/Fields/list":{"title":"$:/language/Docs/Fields/list","text":"条目的列表，指定一些条目的标题清单"},"$:/language/Docs/Fields/list-before":{"title":"$:/language/Docs/Fields/list-before","text":"前条目名称将被添加到条目排序清单中的设置条目名称之前，或若此栏位存在但是空的，则被添加于清单的前端"},"$:/language/Docs/Fields/list-after":{"title":"$:/language/Docs/Fields/list-after","text":"当前条目名称将被添加到条目排序清单的设置条目名称之后，或若此栏位存在但是空的，则被添加于清单的尾端"},"$:/language/Docs/Fields/modified":{"title":"$:/language/Docs/Fields/modified","text":"条目的最近修改日期与时间"},"$:/language/Docs/Fields/modifier":{"title":"$:/language/Docs/Fields/modifier","text":"条目的最近修改者"},"$:/language/Docs/Fields/name":{"title":"$:/language/Docs/Fields/name","text":"具可读性的插件条目的名称"},"$:/language/Docs/Fields/plugin-priority":{"title":"$:/language/Docs/Fields/plugin-priority","text":"插件条目的优先级数值"},"$:/language/Docs/Fields/plugin-type":{"title":"$:/language/Docs/Fields/plugin-type","text":"插件条目的类型"},"$:/language/Docs/Fields/released":{"title":"$:/language/Docs/Fields/released","text":"TiddlyWiki 的发布日期"},"$:/language/Docs/Fields/revision":{"title":"$:/language/Docs/Fields/revision","text":"条目存放于服务器中的修订版本"},"$:/language/Docs/Fields/source":{"title":"$:/language/Docs/Fields/source","text":"条目的网址"},"$:/language/Docs/Fields/subtitle":{"title":"$:/language/Docs/Fields/subtitle","text":"一个 wizard 的副标题"},"$:/language/Docs/Fields/tags":{"title":"$:/language/Docs/Fields/tags","text":"条目的标签清单"},"$:/language/Docs/Fields/text":{"title":"$:/language/Docs/Fields/text","text":"条目的内文"},"$:/language/Docs/Fields/throttle.refresh":{"title":"$:/language/Docs/Fields/throttle.refresh","text":"如果存在，则限制此条目的刷新"},"$:/language/Docs/Fields/title":{"title":"$:/language/Docs/Fields/title","text":"条目的唯一名称"},"$:/language/Docs/Fields/toc-link":{"title":"$:/language/Docs/Fields/toc-link","text":"若设为: \"no\"，则抑制目录树中的条目链接。"},"$:/language/Docs/Fields/type":{"title":"$:/language/Docs/Fields/type","text":"条目的内容类型"},"$:/language/Docs/Fields/version":{"title":"$:/language/Docs/Fields/version","text":"插件的版本信息"},"$:/language/Docs/Fields/_is_skinny":{"title":"$:/language/Docs/Fields/_is_skinny","text":"如果存在，则表示必须从服务器加载条目的文本字段"},"$:/language/Filters/AllTiddlers":{"title":"$:/language/Filters/AllTiddlers","text":"所有条目，不含系统条目"},"$:/language/Filters/RecentSystemTiddlers":{"title":"$:/language/Filters/RecentSystemTiddlers","text":"最近修改的条目，包含系统条目"},"$:/language/Filters/RecentTiddlers":{"title":"$:/language/Filters/RecentTiddlers","text":"最近修改的条目"},"$:/language/Filters/AllTags":{"title":"$:/language/Filters/AllTags","text":"所有标签，不含系统标签"},"$:/language/Filters/Missing":{"title":"$:/language/Filters/Missing","text":"缺失条目"},"$:/language/Filters/Drafts":{"title":"$:/language/Filters/Drafts","text":"草稿条目"},"$:/language/Filters/Orphans":{"title":"$:/language/Filters/Orphans","text":"孤立条目"},"$:/language/Filters/SystemTiddlers":{"title":"$:/language/Filters/SystemTiddlers","text":"系统条目"},"$:/language/Filters/ShadowTiddlers":{"title":"$:/language/Filters/ShadowTiddlers","text":"默认条目"},"$:/language/Filters/OverriddenShadowTiddlers":{"title":"$:/language/Filters/OverriddenShadowTiddlers","text":"被覆写的默认条目"},"$:/language/Filters/SessionTiddlers":{"title":"$:/language/Filters/SessionTiddlers","text":"自维基加载后修改的条目"},"$:/language/Filters/SystemTags":{"title":"$:/language/Filters/SystemTags","text":"系统标签"},"$:/language/Filters/StoryList":{"title":"$:/language/Filters/StoryList","text":"故事河中的条目，不含 ~$:/AdvancedSearch"},"$:/language/Filters/TypedTiddlers":{"title":"$:/language/Filters/TypedTiddlers","text":"非维基文字条目"},"GettingStarted":{"title":"GettingStarted","text":"\\define lingo-base() $:/language/ControlPanel/Basics/\n欢迎使用 ~TiddlyWiki 及参与 ~TiddlyWiki 社群\n\n开始将重要资讯存放于 ~TiddlyWiki 之前，确认您可以可靠地保存变更是很重要的。详细资讯请参阅 https://tiddlywiki.com/#GettingStarted\n\n!! 设置此 ~TiddlyWiki\n\n&lt;div class=\"tc-control-panel\"&gt;\n\n|&lt;$link to=\"$:/SiteTitle\"&gt;&lt;&lt;lingo Title/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteTitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/SiteSubtitle\"&gt;&lt;&lt;lingo Subtitle/Prompt&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/SiteSubtitle\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/DefaultTiddlers\"&gt;&lt;&lt;lingo DefaultTiddlers/Prompt&gt;&gt;&lt;/$link&gt; |&lt;&lt;lingo DefaultTiddlers/TopHint&gt;&gt;&lt;br&gt; &lt;$edit tag=\"textarea\" tiddler=\"$:/DefaultTiddlers\"/&gt;&lt;br&gt;//&lt;&lt;lingo DefaultTiddlers/BottomHint&gt;&gt;// |\n&lt;/div&gt;\n\n请参阅[[控制台|$:/ControlPanel]]查看更多选项。"},"$:/language/Help/build":{"title":"$:/language/Help/build","description":"自动执行已配置的命令","text":"生成指定的生成目标为当前 wiki。若未指定任何生成目标，则生成所有可用的目标。\n\n```\n--build &lt;target&gt; [&lt;target&gt; ...]\n```\n\n生成目标在 wiki 文件夹的 `tiddlywiki.info` 文件中定义。\n"},"$:/language/Help/clearpassword":{"title":"$:/language/Help/clearpassword","description":"清除用于后续加密的密码","text":"清除用于后续加密的密码\n\n```\n--clearpassword\n```\n"},"$:/language/Help/default":{"title":"$:/language/Help/default","text":"\\define commandTitle()\n$:/language/Help/$(command)$\n\\end\n```\n用法: tiddlywiki [&lt;wikifolder&gt;] [--&lt;command&gt; [&lt;args&gt;...]...]\n```\n\n可用的命令：\n\n&lt;ul&gt;\n&lt;$list filter=\"[commands[]sort[title]]\" variable=\"command\"&gt;\n&lt;li&gt;&lt;$link to=&lt;&lt;commandTitle&gt;&gt;&gt;&lt;$macrocall $name=\"command\" $type=\"text/plain\" $output=\"text/plain\"/&gt;&lt;/$link&gt;: &lt;$transclude tiddler=&lt;&lt;commandTitle&gt;&gt; field=\"description\"/&gt;&lt;/li&gt;\n&lt;/$list&gt;\n&lt;/ul&gt;\n\n取得关于某个命令的详细帮助：\n\n```\ntiddlywiki --help &lt;command&gt;\n```\n"},"$:/language/Help/deletetiddlers":{"title":"$:/language/Help/deletetiddlers","description":"删除一组条目","text":"&lt;&lt;.from-version \"5.1.20\"&gt;&gt; 删除由筛选器标识的一组条目。\n\n```\n--deletetiddlers &lt;filter&gt;\n```\n"},"$:/language/Help/editions":{"title":"$:/language/Help/editions","description":"列出可用的 TiddlyWiki 版本","text":"列出可用版本的名称和描述。您可以用 `--init` 命令创建一个指定版本的新维基。\n\n```\n--editions\n```\n"},"$:/language/Help/fetch":{"title":"$:/language/Help/fetch","description":"通过网址从维基撷取条目","text":"通过 HTTP/HTTPS 撷取一个或多个文件，并导入匹配筛选器的条目，可选的转换传入的名称。\n\n```\n--fetch file &lt;url&gt; &lt;import-filter&gt; &lt;transform-filter&gt;\n--fetch files &lt;url-filter&gt; &lt;import-filter&gt; &lt;transform-filter&gt;\n--fetch raw-file &lt;url&gt; &lt;transform-filter&gt;\n--fetch raw-files &lt;url-filter&gt; &lt;transform-filter&gt;\n```\n\n \"file\" 和 \"files\" 选项撷取指定的文件，并尝试导入其中的条目（与将文件拖动到浏览器视窗中的处理相同）。 \"raw-file\" 和 \"raw-files\" 变选项撷取指定的文件，并将原始文件资料存储于条目，而不套用导入逻辑。\n\n使用 \"file\" and \"raw-file\" 选项为仅撷取单个文件，且第一个参数为要读取文件的网址。\n\n使用 \"files\" 和 \"raw-files\" 选项为撷取多个文件，且第一个参数是一个产生要读取文件的网址清单的筛选器。例如，给定标签为 \"remote-server\" 的一组具有字段 \"url\" 的条目，筛选器 `[tag[remote-server]get[url]]` 将取回所有可用的网址。\n\n对于 \"file\" 和 \"files\" 选项，the `&lt;import-filter&gt;` 参数指定一个筛选器，用于确定要导入哪些条目。如果未提供，则默认为 `[all[tiddlers]]`。\n\n对于所有选项，`&lt;transform-filter&gt;` 参数指定一个可选的筛选器，用于转换导入条目的名称。例如，`[addprefix[$:/myimports/]]` 会将前缀  `$:/myimports/` 加至每个名称。\n\n于 `--fetch` 之前使用 `--verbose` 命令，将在导入期间输出进度信息。\n\n请注意，TiddlyWiki 不会撷取一个已经加载插件的旧版本。\n\n以下示例从 https://tiddlywiki.com 取回所有非系统条目，并将其保存到一个 JSON 文件：\n\n```\ntiddlywiki --verbose --fetch file \"https://tiddlywiki.com/\" \"[!is[system]]\" \"\" --rendertiddler \"$:/core/templates/exporters/JsonFile\" output.json text/plain \"\" exportFilter \"[!is[system]]\"\n```\n\n以下范例从 https://tiddlywiki.com 取回 \"favicon\" 文件，并将其保存在名为 \"output.ico\" 的文件中。请注意，在 \"--fetch\" 命令中引用的中间条目 \"Icon Tiddler\"，因为它被用作转换筛选器来替换预设的名称，而 \"--savetiddler\" 命令没有引号，因为它是直接用作标题。\n\n```\ntiddlywiki --verbose --fetch raw-file \"https://tiddlywiki.com/favicon.ico\" \"[[Icon Tiddler]]\" --savetiddler \"Icon Tiddler\" output.ico\n```\n"},"$:/language/Help/help":{"title":"$:/language/Help/help","description":"显示 TiddlyWiki 命令的说明","text":"显示命令的帮助文本:\n\n```\n--help [&lt;command&gt;]\n```\n\n若省略命令名称，则显示可用命令的清单。\n"},"$:/language/Help/import":{"title":"$:/language/Help/import","description":"从文件导入条目","text":"从 TiddlyWiki 文件 (`.html`)、`.tiddler`、`.tid`、`.json` 或其他本机文件导入条目。必须明确指定解串器，而不像 load 命令，从文件扩展名推断解串器。\n\n```\n--import &lt;filepath&gt; &lt;deserializer&gt; [&lt;title&gt;] [&lt;encoding&gt;]\n```\n\n核心的解串器包括：\n\n* application/javascript\n* application/json\n* application/x-tiddler\n* application/x-tiddler-html-div\n* application/x-tiddlers\n* text/html\n* text/plain\n\n导入的条目名称，默认为文件名。\n\n编码默认为 \"utf8\"，但用于导入二进制文件可以是 \"base64\"。\n\n请注意，TiddlyWiki 不会导入旧版本的已加载插件。\n"},"$:/language/Help/init":{"title":"$:/language/Help/init","description":"初始化一个新的 wiki 文件夹","text":"初始化一个空的 [[WikiFolder|WikiFolders]] 的指定版本的副本。\n\n```\n--init &lt;edition&gt; [&lt;edition&gt; ...]\n```\n\n例如：\n\n```\ntiddlywiki ./MyWikiFolder --init empty\n```\n\n注意：\n\n* 若有需要，将创建 wiki 文件夹目录\n* 其中 \"edition\" 默认为 ''empty''\n* 若 wiki 文件夹不是空的，则初始化命令将失败\n* 初始化命令会删除 'tiddlywiki.info' 文件内所有 'includeWikis' 的定义。\n* 当指定多个版本时，这些版本于初始化后，将覆写早期版本共用的所有文件 (故此最终的 `tiddlywiki.info` 文件将是从最近的版本复制而得)\n* `--editions` 传回所有可用版本的清单。\n"},"$:/language/Help/listen":{"title":"$:/language/Help/listen","description":"为 TiddlyWiki 提供一个 HTTP 服务器接口","text":"通过 HTTP 提供一个维基服务。\n\nlisten 命令使用[[命名的命令参数|NamedCommandParameters]]：\n\n```\n--listen [&lt;name&gt;=&lt;value&gt;]...\n```\n\n所有参数都是可选的, 具有安全的默认值, 可以按任意顺序指定。认可的参数有:\n\n* ''host'' - 可选的主机名称， (默认为 \"127.0.0.1\" 或名为 \"localhost\")\n* ''path-prefix'' - 可选的路径前缀\n* ''port'' - 侦听的埠号；非数值会被解译为一个系统环境变数，从其中提取埠号 (默认为 \"8080\")\n* ''credentials'' - 凭证 CSV 文件的路径名（相对于维基文件夹）\n* ''anon-username'' - 匿名用户的编辑署名\n* ''username'' - 可选的基本验证用户名称\n* ''password'' - 可选的基本验证密码\n* ''authenticated-user-header'' - 可选的标头名称，用于受信任身份验证\n* ''readers'' - 允许读取此维基，以逗号分隔的用户名称的清单\n* ''writers'' - 允许写入此维基，以逗号分隔的用户名称的清单\n* ''csrf-disable'' - 设置为 \"yes\" 以禁用 CSRF 检查 (默认为 \"no\")\n* ''sse-enabled'' - 设置为 \"yes\" 以启用服务器传送的事件 (默认为 \"no\")\n* ''root-tiddler'' - 服务的基本条目 (默认为 \"$:/core/save/all\")\n* ''root-render-type'' - 呈现的基本条目的内容类型 (默认为 \"text/plain\")\n* ''root-serve-type'' - 服务的基本条目的内容类型 (默认为 \"text/html\")\n* ''tls-cert'' - TLS 证书文件的路径名（相对于维基文件夹）\n* ''tls-key'' - TLS 密钥文件的路径名（相对于维基文件夹）\n* ''debug-level'' - 可选的调试级别；设置为 \"debug\" 来查看请求的详细信息；(默认为 \"none\")\n* ''gzip'' - 设为 \"yes\" 以启用某些 http 端点的 gzip 压缩 (默认为 \"no\")\n* ''use-browser-cache'' - 设置为 \"yes\" 允许浏览器缓存响应，以节省带宽（默认为 \"no\")\n\n有关向整个本地网络开启实例的信息，以及可能的安全问题，请参阅 TiddlyWiki.com 的 WebServer 条目。\n"},"$:/language/Help/load":{"title":"$:/language/Help/load","description":"从文件中加载条目","text":"从 TiddlyWiki (`.html`), `.tiddler`, `.tid`, `.json` 或其他本机文件加载条目。应用的处理程序取决于导入文件的扩展名。如果您需要明确指定解串器和编码，请改用 `import` 命令。\n\n```\n--load &lt;filepath&gt; [noerror]\n--load &lt;dirpath&gt; [noerror]\n```\n\n默认情况下, 如果未找到条目，load 命令会引发错误。通过提供可选的 \"noerror\" 参数可以抑制该错误。\n\n从已加密的 TiddlyWiki 文件中加载条目，须使用 PasswordCommand 指定密码，例如：\n\n```\ntiddlywiki ./MyWiki --password pa55w0rd --load my_encrypted_wiki.html\n```\n\n请注意 TiddlyWiki 将不加载旧版本的已挂载的插件。\n"},"$:/language/Help/makelibrary":{"title":"$:/language/Help/makelibrary","description":"构建升级处理所需的程式库插件","text":"为升级处理构建 `$:/UpgradeLibrary` 条目。\n\n升级程式库被格式化为一个插件类型为 `library` 的一般插件条目。它包含 TiddlyWiki5 存储库中所有可用的插件、布景主题和语言包的副本。\n\n此命令仅供内部使用；它只是与使用者构建一个自订的升级程序相关。\n\n```\n--makelibrary &lt;title&gt;\n```\n\n标题参数默认为 `$:/UpgradeLibrary`。\n"},"$:/language/Help/notfound":{"title":"$:/language/Help/notfound","text":"无此帮助项目"},"$:/language/Help/output":{"title":"$:/language/Help/output","description":"设置后续命令的基准输出文件夹","text":"设置后续命令的基准输出文件夹，默认为该版本文件夹的 `output` 子文件夹。\n\n```\n--output &lt;pathname&gt;\n```\n\n若指定的路径是相对路径，则它是被解析相对于当前的工作文件夹。例如：`--output .` 將輸出文件夹設置為當前工作文件夹。"},"$:/language/Help/password":{"title":"$:/language/Help/password","description":"设置用以加密的密码","text":"设置用以加密的密码\n\n```\n--password &lt;password&gt;\n```\n\n''请注意''：这不是用于提供 TiddlyWiki 具有密码保护功能。相反地，请看 [[ServerCommand]] 的密码选项说明。\n"},"$:/language/Help/render":{"title":"$:/language/Help/render","description":"呈现个别条目到文件","text":"呈现由筛选器标识的个别条目，并将结果保存到指定的文件。\n\n可选择性地指定范本条目名称。在此情况下，不是直接呈现每个条目，而是使用设为正在呈现的条目名称的 \"currentTiddler\" 变量，来呈现范本条目。\n\n也可以选择性地指定附加变量的名称和值。\n\n```\n--render &lt;tiddler-filter&gt; [&lt;filename-filter&gt;] [&lt;render-type&gt;] [&lt;template&gt;] [ [&lt;name&gt;] [&lt;value&gt;] ]*\n```\n\n* ''tiddler-filter'': 标识要呈现的条目的筛选器\n* ''filename-filter'': 可选的筛选器，转换条目名称至路径名。如果省略，默认为 `[is[tiddler]addsuffix[.html]]`，其使用未改变的条目名称为文件名\n* ''template'': 可选的范本，用于呈现每个条目\n* ''render-type'': 可选的呈现类型：`text/html` (默认值) 会传回完整的 HTML 文本，而 `text/plain` 只会传回文本内容 (即其忽略 HTML 标记与其他不可印出的数据)\n* ''name'': 可选的变量名称\n* ''value'': 可选的变量值\n\n默认情况下，文件名被解析为相对于发行版文件夹的 `output` 子文件夹。`--output` 命令可用于将输出指到一个不同的文件夹。\n\n附注：\n\n* 输出目录不清除任何现有的文件\n* 文件名的路径中，任何不存在的文件夹，将自动创建。\n* 当正呈现的条目名称中带有空格，请注意同时使用命令行接口所要求的引号，与 TiddlyWiki 的双重方括号：`--render \"[[Motovun Jack.jpg]]\"`\n* 所选的项目被设置为当前正在呈现的条目名称，以此评估文件名筛选器，允条目名称用作基础计算的文件名。例如，`[encodeuricomponent[]addprefix[static/]]` 为每个条目名称套用 URI 编码，然后增加首码 `static/`\n* `--render` 命令是已弃用的 `--rendertiddler` 和 `--rendertiddlers` 的一个更灵活的替代命令。\n\n例子：\n\n* `--render \"[!is[system]]\" \"[encodeuricomponent[]addprefix[tiddlers/]addsuffix[.html]]\"` -- 呈现所有非系统条目为 \"tiddlers\" 子文件夹中的文件，文件名为 URL 编码的条目名称和扩展名 HTML\n"},"$:/language/Help/rendertiddler":{"title":"$:/language/Help/rendertiddler","description":"呈现个别条目为指定的内容类型","text":"(请注意：`--rendertiddler` 命令已被弃用，而支持新的、更灵活的 `--render` 命令)\n\n呈现个别条目为指定的[[内容类型|ContentType]]，默认为 `text/html` 且保存为指定的文件名。\n\n还可以指定一个模板，在这种情况下，\"currentTiddler\" 变量设为正在呈现的条目 (第一个参数值) 与模板条目合并呈现。\n\n也能可选地指定附加变量的名称与其值。\n\n```\n--rendertiddler &lt;title&gt; &lt;filename&gt; [&lt;type&gt;] [&lt;template&gt;]\n```\n\n默认情况下，文件名被解析为相对于版本文件夹的 `output` 子文件夹。 `--output` 命令可以用于将输出指定到一个不同的文件夹。\n\n自动创建在文件名称的路径中任何缺少的文件夹。\n\n例如，以下命令通过使用核心模板 `$:/core/templates/exporters/JsonFile`，将所有匹配筛选器 `[tag[done]]` 的条目保存到名为 `output.json` 的 JSON 文件。\n\n```\n--rendertiddler \"$:/core/templates/exporters/JsonFile\" output.json text/plain \"\" exportFilter \"[tag[done]]\"\n```"},"$:/language/Help/rendertiddlers":{"title":"$:/language/Help/rendertiddlers","description":"呈现符合筛选条件的条目为指定的内容类型","text":"(请注意：`--rendertiddlers` 命令已被弃用，而支持新的、更灵活的 `--render` 命令)\n\n呈现符合筛选条的条目为指定的[[内容类型|ContentType]] (默认为 `text/html`) 与扩展名 (默认为 `.html`).\n\n```\n--rendertiddlers '&lt;filter&gt;' &lt;template&gt; &lt;pathname&gt; [&lt;type&gt;] [&lt;extension&gt;] [\"noclean\"]\n```\n\n例如：\n\n```\n--rendertiddlers '[!is[system]]' $:/core/templates/static.tiddler.html ./static text/plain\n```\n\n默认情况下，路径名被解析为相对于版本文件夹的 `output` 子文件夹。 `--output` 命令可以用于将输出指定到一个不同的文件。\n\n在目标文件夹中的任何文件都会被删除，除非指定 ''noclean'' 旗标。若缺少目标文件夹，则以递归方式创建。"},"$:/language/Help/save":{"title":"$:/language/Help/save","description":"将个别原始条目保存到文件","text":"将筛选器标识的个别条目，以原始文本或二进位格式，保存到指定的文件。\n\n```\n--save &lt;tiddler-filter&gt; &lt;filename-filter&gt;\n```\n\n* ''tiddler-filter'': 标识要保存的条目的筛选器\n* ''filename-filter'': 可选的筛选器，转换条目名称至路径名。如果省略，默认为 `[is[tiddler]]`，其使用未改变的条目名称为文件名\n\n附注：\n\n* 输出文件夹不清除任何现有的文件\n* 文件名的路径中，任何不存在的文件夹，将自动创建。\n* 当正保存的条目的名称中带有空格，请注意同时使用命令行接口所要求的引号，与 TiddlyWiki 的双重方括号：`--save \"[[Motovun Jack.jpg]]\"`\n* 所选的项目被设置为当前正在保存的条目名称，以此评估文件名筛选器，允条目名称用作基础计算的文件名。例如，`[encodeuricomponent[]addprefix[static/]]` 为每个条目名称套用 URI 编码，然后增加首码 `static/`\n* `--save` 命令是已被弃用的 `--savetiddler` 和 `--savetiddlers` 的一个更灵活的替代命令。\n\n例子：\n\n* `--save \"[!is[system]is[image]]\" \"[encodeuricomponent[]addprefix[tiddlers/]]\"` -- 保存所有非系统的图像条目为 \"tiddlers\" 子文件夹中的文件，文件名为 URL 编码的条目名称"},"$:/language/Help/savetiddler":{"title":"$:/language/Help/savetiddler","description":"将条目的原始内容保存到一个文件","text":"(请注意：`--savetiddler` 命令已被弃用，而支持新的、更灵活的 `--save` 命令)\n\n保存个别条目的原始文本或二进制格式到指定的文件名。\n\n```\n--savetiddler &lt;title&gt; &lt;filename&gt;\n```\n\n默认情况下，文件名被解析为相对于版本文件夹的 `output` 子文件夹。 `--output` 命令可以用于将输出指定到一个不同的文件。\n\n自动创建在文件名称的路径中任何缺少的文件夹。\n"},"$:/language/Help/savetiddlers":{"title":"$:/language/Help/savetiddlers","description":"将一群条目的原始内容保存到一个文件夹","text":"(请注意：`--savetiddlers` 命令已被弃用，而支持新的、更灵活的 `--save` 命令)\n\n保存一群条目的原始文字或二进制格式到指定的文件夹。\n\n```\n--savetiddlers &lt;filter&gt; &lt;pathname&gt; [noclean]\n```\n\n默认情况下，路径名被解析为相对于版本文件夹的 `output` 子文件夹。 `--output` 命令可以用于将输出指定到一个不同的文件夹。\n\n保存指定的文件之前，会先清除输出目录的现有文件。可藉由指定 ''noclean'' 旗标，禁用该删除动作。\n\n自动创建在路径中任何缺少的文件夹。\n"},"$:/language/Help/savewikifolder":{"title":"$:/language/Help/savewikifolder","description":"将维基保存到一个新的维基文件夹","text":"&lt;&lt;.from-version \"5.1.20\"&gt;&gt; 将当前维基保存为一个维基文件夹，包含条目、插件和配置：\n\n```\n--savewikifolder &lt;wikifolderpath&gt; [&lt;filter&gt;]\n```\n\n* 目标维基文件夹必须为空或不存在\n* 筛选器指定应包括哪些条目。其为可选，默认为 `[all[tiddlers]]`\n* 官方插件库中的插件，将替换为 `tiddlywiki.info` 文件中引用到的插件\n* 自订插件将解压缩到自己的文件夹中\n\n常见的用法是将一个 TiddlyWiki HTML 文件转换成维基文件夹:\n\n```\ntiddlywiki --load ./mywiki.html --savewikifolder ./mywikifolder\n```\n"},"$:/language/Help/server":{"title":"$:/language/Help/server","description":"提供一个 HTTP 服务器介面到 TiddlyWiki (已弃用，支持新的 listen 命令)","text":"在服务器中内置 TiddlyWiki5 是非常简单。虽与 TiddlyWeb 兼容，但不支持许多健全互联网面向的使用方式所需的功能。\n\n提供呈现一个指定条目，也可将个别条目编码成 JSON，且支持基本的 HTTP 操作 `GET`、`PUT` 及 `DELETE`.\n\n```\n--server &lt;port&gt; &lt;root-tiddler&gt; &lt;root-render-type&gt; &lt;root-serve-type&gt; &lt;username&gt; &lt;password&gt; &lt;host&gt; &lt;path-prefix&gt; &lt;debug-level&gt;\n```\n\n参数说明：\n\n* ''port'' - 要侦听的埠号；非数值会被解译为一个系统环境变数，从其中提取埠号 (默认为 \"8080\")\n* ''root-tiddler'' - 服务的基本条目 (默认为 \"$:/core/save/all\")\n* ''root-render-type'' - 呈现的基本条目的内容类型 (默认为 \"text/plain\")\n* ''root-serve-type'' - 服务的基本条目的内容类型 (默认为 \"text/html\")\n* ''username'' - 默认的编辑者署名\n* ''password'' - 可选的基本验证密码\n* ''host'' - 可选的主机名称， (默认为 \"127.0.0.1\" 或名为 \"localhost\")\n* ''path-prefix'' - 可选的路径前缀\n* ''debug-level'' - 可选的调试级别；设置为 \"debug\" 来查看请求的详细信息；(默认为 \"none\")\n\n若指定密码参数，浏览器将提示使用者输入用户名与密码。注意，密码系以明码方式传递，应只在受信任的网络或 HTTPS 上使用。\n\n例如：\n\n```\n--server 8080 $:/core/save/all text/plain text/html MyUserName passw0rd\n```\n\n若您需要设置主机名称或路径前缀，而不要求输入密码，则可以指定空字符串的使用者名和密码。\n\n```\n--server 8080 $:/core/save/all text/plain text/html \"\" \"\" 192.168.0.245\n```\n\n使用这样的位址，会将您的系统暴露给本地网络。有关向整个本地网络开启实例的信息，以及可能的安全问题，请参阅 TiddlyWiki.com 的 WebServer 条目。\n\n同时执行多个 TiddlyWiki 服务，须分别指定不同的埠号。使用环境变数，有助于将埠号传递给 Node.js 进程。本示例引用一个名为 \"MY_PORT_NUMBER\" 的环境变数:\n\n```\n--server MY_PORT_NUMBER $:/core/save/all text/plain text/html MyUserName passw0rd\n```"},"$:/language/Help/setfield":{"title":"$:/language/Help/setfield","description":"准备用于外部条目","text":"//请注意此命令是试验性的，且可能会更改或在最终定稿前被替换//\n\n设置一群条目的指定栏位到 wikifying 范本条目的结果，其中的  `currentTiddler` 变数设置为各该条目。\n\n```\n--setfield &lt;filter&gt; &lt;fieldname&gt; &lt;templatetitle&gt; &lt;rendertype&gt;\n```\n\n参数说明：\n\n* ''filter'' - 受影响的辨识条目的筛选条件\n* ''fieldname'' - 要修改的栏位（默认为 \"text\"）\n* ''templatetitle'' - 该条目 wikify 到指定栏位。若为空白或丢失，则删除指定的栏位\n* ''rendertype'' - 要呈现的文本类型（默认为 \"text/plain\"; \"text/html\" 可以用于包含 HTML 标记)）\n"},"$:/language/Help/unpackplugin":{"title":"$:/language/Help/unpackplugin","description":"从插件解开附属的条目","text":"提取插件的附属条目，将其建立为一般条目：\n\n```\n--unpackplugin &lt;title&gt;\n```\n"},"$:/language/Help/verbose":{"title":"$:/language/Help/verbose","description":"触发详细的输出模式","text":"触发显示详细的命令执行过程，可用于调试\n\n```\n--verbose\n```\n"},"$:/language/Help/version":{"title":"$:/language/Help/version","description":"显示 TiddlyWiki 的版本编号","text":"显示 TiddlyWiki 的版本编号。\n\n```\n--version\n```\n"},"$:/languages/zh-Hans/icon":{"title":"$:/languages/zh-Hans/icon","type":"image/svg+xml","text":"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"&gt;\n&lt;svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"1500\" height=\"1000\" viewBox=\"-5 -5 30 20\"&gt;\n&lt;title&gt;Flag of the People's Republic of China&lt;/title&gt;\n&lt;rect fill=\"#de2910\" x=\"-5\" y=\"-5\" width=\"30\" height=\"20\"/&gt;\n&lt;defs&gt;\n&lt;polygon id=\"s\" points=\"0,-513674 301930,415571 -488533,-158734 488533,-158734 -301930,415571\"\nfill=\"#ffde00\" transform=\"scale(0.0000019467600073)\"/&gt;\n&lt;/defs&gt;\n&lt;use xlink:href=\"#s\" transform=\"scale(3)\"/&gt;\n&lt;use xlink:href=\"#s\" transform=\"translate(5,-3) rotate(-120.963756)\"/&gt;\n&lt;use xlink:href=\"#s\" transform=\"translate(7,-1) rotate(-98.130102)\"/&gt;\n&lt;use xlink:href=\"#s\" transform=\"translate(7,2) rotate(-74.054604)\"/&gt;\n&lt;use xlink:href=\"#s\" transform=\"translate(5,4) rotate(-51.3401917)\"/&gt;\n&lt;/svg&gt;\n"},"$:/language/Import/Editor/Import/Heading":{"title":"$:/language/Import/Editor/Import/Heading","text":"导入图像并将其插入至编辑器。"},"$:/language/Import/Imported/Hint":{"title":"$:/language/Import/Imported/Hint","text":"下列条目已被导入："},"$:/language/Import/Listing/Cancel/Caption":{"title":"$:/language/Import/Listing/Cancel/Caption","text":"取消"},"$:/language/Import/Listing/Cancel/Warning":{"title":"$:/language/Import/Listing/Cancel/Warning","text":"您要取消导入吗？"},"$:/language/Import/Listing/Hint":{"title":"$:/language/Import/Listing/Hint","text":"这些条目已备妥导入："},"$:/language/Import/Listing/Import/Caption":{"title":"$:/language/Import/Listing/Import/Caption","text":"导入"},"$:/language/Import/Listing/Select/Caption":{"title":"$:/language/Import/Listing/Select/Caption","text":"选择"},"$:/language/Import/Listing/Status/Caption":{"title":"$:/language/Import/Listing/Status/Caption","text":"状态"},"$:/language/Import/Listing/Title/Caption":{"title":"$:/language/Import/Listing/Title/Caption","text":"条目"},"$:/language/Import/Listing/Preview":{"title":"$:/language/Import/Listing/Preview","text":"预览："},"$:/language/Import/Listing/Preview/Text":{"title":"$:/language/Import/Listing/Preview/Text","text":"文本"},"$:/language/Import/Listing/Preview/TextRaw":{"title":"$:/language/Import/Listing/Preview/TextRaw","text":"文本 (原始)"},"$:/language/Import/Listing/Preview/Fields":{"title":"$:/language/Import/Listing/Preview/Fields","text":"字段"},"$:/language/Import/Listing/Preview/Diff":{"title":"$:/language/Import/Listing/Preview/Diff","text":"差异"},"$:/language/Import/Listing/Preview/DiffFields":{"title":"$:/language/Import/Listing/Preview/DiffFields","text":"差异 (字段)"},"$:/language/Import/Listing/Rename/Prompt":{"title":"$:/language/Import/Listing/Rename/Prompt","text":"重新命名为："},"$:/language/Import/Listing/Rename/Tooltip":{"title":"$:/language/Import/Listing/Rename/Tooltip","text":"导入前重新命名条目"},"$:/language/Import/Listing/Rename/ConfirmRename":{"title":"$:/language/Import/Listing/Rename/ConfirmRename","text":"重新命名条目"},"$:/language/Import/Listing/Rename/CancelRename":{"title":"$:/language/Import/Listing/Rename/CancelRename","text":"取消"},"$:/language/Import/Listing/Rename/OverwriteWarning":{"title":"$:/language/Import/Listing/Rename/OverwriteWarning","text":"具有此标题的条目已存在。"},"$:/language/Import/Upgrader/Plugins/Suppressed/Incompatible":{"title":"$:/language/Import/Upgrader/Plugins/Suppressed/Incompatible","text":"封锁的不兼容或过时插件。"},"$:/language/Import/Upgrader/Plugins/Suppressed/Version":{"title":"$:/language/Import/Upgrader/Plugins/Suppressed/Version","text":"封锁的插件 (由于传入的 &lt;&lt;incoming&gt;&gt; 不比现有版本 &lt;&lt;existing&gt;&gt; 新)。"},"$:/language/Import/Upgrader/Plugins/Upgraded":{"title":"$:/language/Import/Upgrader/Plugins/Upgraded","text":"升级插件，从 &lt;&lt;incoming&gt;&gt; 到 &lt;&lt;upgraded&gt;&gt;。"},"$:/language/Import/Upgrader/State/Suppressed":{"title":"$:/language/Import/Upgrader/State/Suppressed","text":"封锁的暂存状态条目。"},"$:/language/Import/Upgrader/System/Disabled":{"title":"$:/language/Import/Upgrader/System/Disabled","text":"已禁用系統条目。"},"$:/language/Import/Upgrader/System/Suppressed":{"title":"$:/language/Import/Upgrader/System/Suppressed","text":"封锁的系统条目。"},"$:/language/Import/Upgrader/System/Warning":{"title":"$:/language/Import/Upgrader/System/Warning","text":"核心模块条目。"},"$:/language/Import/Upgrader/System/Alert":{"title":"$:/language/Import/Upgrader/System/Alert","text":"您即将导入一个条目会覆盖一个核心模块条目。不建议这样做，因为可能会使系统不稳定。"},"$:/language/Import/Upgrader/ThemeTweaks/Created":{"title":"$:/language/Import/Upgrader/ThemeTweaks/Created","text":"从 &lt;$text text=&lt;&lt;from&gt;&gt;/&gt; 迁移布景主题。"},"$:/language/Import/Upgrader/Tiddler/Disabled":{"title":"$:/language/Import/Upgrader/Tiddler/Disabled","text":"已禁用系統条目。"},"$:/language/Import/Upgrader/Tiddler/Selected":{"title":"$:/language/Import/Upgrader/Tiddler/Selected","text":"用户选定。"},"$:/language/Import/Upgrader/Tiddler/Unselected":{"title":"$:/language/Import/Upgrader/Tiddler/Unselected","text":"未选定的条目"},"$:/language/AboveStory/ClassicPlugin/Warning":{"title":"$:/language/AboveStory/ClassicPlugin/Warning","text":"您貌似要加载为 ~TiddlyWiki 经典版设计的插件。请注意，[[这些插件无法运行于 TiddlyWiki 5.x.x 版|https://tiddlywiki.com/#TiddlyWikiClassic]]。检测到 ~TiddlyWiki 经典版插件："},"$:/language/BinaryWarning/Prompt":{"title":"$:/language/BinaryWarning/Prompt","text":"此条目包含二进制数据"},"$:/language/ClassicWarning/Hint":{"title":"$:/language/ClassicWarning/Hint","text":"此条目以经典版 TiddlyWiki 标记格式撰写，不完全兼容新版 TiddlyWiki 的格式，详细信息请参阅：https://tiddlywiki.com/static/Upgrading。"},"$:/language/ClassicWarning/Upgrade/Caption":{"title":"$:/language/ClassicWarning/Upgrade/Caption","text":"升级"},"$:/language/CloseAll/Button":{"title":"$:/language/CloseAll/Button","text":"全部关闭"},"$:/language/ColourPicker/Recent":{"title":"$:/language/ColourPicker/Recent","text":"最近︰"},"$:/language/ConfirmCancelTiddler":{"title":"$:/language/ConfirmCancelTiddler","text":"您确定要放弃对条目 \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\" 的更改？"},"$:/language/ConfirmDeleteTiddler":{"title":"$:/language/ConfirmDeleteTiddler","text":"您确定要删除条目 \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"？"},"$:/language/ConfirmOverwriteTiddler":{"title":"$:/language/ConfirmOverwriteTiddler","text":"您确定要复写条目 \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"？"},"$:/language/ConfirmEditShadowTiddler":{"title":"$:/language/ConfirmEditShadowTiddler","text":"您即将要编辑默认条目，任何更改将会复盖默认的系统，使未来的升级不寻常。您确定要编辑 \"&lt;$text text=&lt;&lt;title&gt;&gt;/&gt;\"?"},"$:/language/ConfirmAction":{"title":"$:/language/ConfirmAction","text":"是否要继续？"},"$:/language/Count":{"title":"$:/language/Count","text":"计数"},"$:/language/DefaultNewTiddlerTitle":{"title":"$:/language/DefaultNewTiddlerTitle","text":"新条目"},"$:/language/Diffs/CountMessage":{"title":"$:/language/Diffs/CountMessage","text":"&lt;&lt;diff-count&gt;&gt; 个差异"},"$:/language/DropMessage":{"title":"$:/language/DropMessage","text":"拖放到此处 （或按 ESC 键取消）"},"$:/language/Encryption/Cancel":{"title":"$:/language/Encryption/Cancel","text":"取消"},"$:/language/Encryption/ConfirmClearPassword":{"title":"$:/language/Encryption/ConfirmClearPassword","text":"您要清除密码吗？当保存此维基时，这将删除已套用的加密"},"$:/language/Encryption/Username":{"title":"$:/language/Encryption/Username","text":"用户名称"},"$:/language/Encryption/Password":{"title":"$:/language/Encryption/Password","text":"密码"},"$:/language/Encryption/PromptSetPassword":{"title":"$:/language/Encryption/PromptSetPassword","text":"为此 TiddlyWiki 设置一个新密码"},"$:/language/Encryption/RepeatPassword":{"title":"$:/language/Encryption/RepeatPassword","text":"重复输入密码"},"$:/language/Encryption/PasswordNoMatch":{"title":"$:/language/Encryption/PasswordNoMatch","text":"密码不匹配"},"$:/language/Encryption/SetPassword":{"title":"$:/language/Encryption/SetPassword","text":"设定密码"},"$:/language/Error/Caption":{"title":"$:/language/Error/Caption","text":"错误"},"$:/language/Error/Filter":{"title":"$:/language/Error/Filter","text":"筛选器错误"},"$:/language/Error/FilterRunPrefix":{"title":"$:/language/Error/FilterRunPrefix","text":"筛选器错误：筛选器 run 的未知首码"},"$:/language/Error/FilterSyntax":{"title":"$:/language/Error/FilterSyntax","text":"筛选器运算式中的语法错误"},"$:/language/Error/FormatFilterOperator":{"title":"$:/language/Error/FormatFilterOperator","text":"筛选器错误：`format` 筛选器运算符的未知尾码"},"$:/language/Error/IsFilterOperator":{"title":"$:/language/Error/IsFilterOperator","text":"筛选器错误︰'is' 筛选器运算符的未知操作数"},"$:/language/Error/LoadingPluginLibrary":{"title":"$:/language/Error/LoadingPluginLibrary","text":"加载插件程式库时，发生错误"},"$:/language/Error/NetworkErrorAlert":{"title":"$:/language/Error/NetworkErrorAlert","text":"`&lt;h2&gt;''网络错误''&lt;/h2&gt;与服务器的连缐似乎已中断。这可能表示您的网络连缐有问题。请尝试恢复网路连缐才能继续。&lt;br&gt;&lt;br&gt;''恢复连缐时，所有未保存的更改，将自动同步''。`"},"$:/language/Error/PutEditConflict":{"title":"$:/language/Error/PutEditConflict","text":"服务器上的文件已更改"},"$:/language/Error/PutForbidden":{"title":"$:/language/Error/PutForbidden","text":"没有权限"},"$:/language/Error/PutUnauthorized":{"title":"$:/language/Error/PutUnauthorized","text":"需要身分验证"},"$:/language/Error/RecursiveTransclusion":{"title":"$:/language/Error/RecursiveTransclusion","text":"于 transclude 小部件中的递回嵌入错误"},"$:/language/Error/RetrievingSkinny":{"title":"$:/language/Error/RetrievingSkinny","text":"简要条目清单撷取错误"},"$:/language/Error/SavingToTWEdit":{"title":"$:/language/Error/SavingToTWEdit","text":"保存到 TWEdit 时，发生错误"},"$:/language/Error/WhileSaving":{"title":"$:/language/Error/WhileSaving","text":"保存时，发生错误"},"$:/language/Error/XMLHttpRequest":{"title":"$:/language/Error/XMLHttpRequest","text":"XMLHttpRequest 错误代码"},"$:/language/InternalJavaScriptError/Title":{"title":"$:/language/InternalJavaScriptError/Title","text":"内部的 JavaScript 错误"},"$:/language/InternalJavaScriptError/Hint":{"title":"$:/language/InternalJavaScriptError/Hint","text":"喔，真是令人尴尬。建议刷新您的浏览器，重新启动 TiddlyWiki"},"$:/language/InvalidFieldName":{"title":"$:/language/InvalidFieldName","text":"字段名称 \"&lt;$text text=&lt;&lt;fieldName&gt;&gt;/&gt;\" 包含无效字符，字段名称只能包含小写字母、数字、底线 (`_`)、 连字号 (`-`) 和小数点 (`.`)"},"$:/language/LayoutSwitcher/Description":{"title":"$:/language/LayoutSwitcher/Description","text":"打开布局切换器"},"$:/language/LazyLoadingWarning":{"title":"$:/language/LazyLoadingWarning","text":"&lt;p&gt;正在从 ''&lt;$text text={{!!_canonical_uri}}/&gt;'' 加载外部内容 ...&lt;/p&gt;&lt;p&gt;如果此信息未消失，可能是条目内容类型与外部内容的类型不匹配，或是您可能正在使用的浏览器，不支援单文件式维基的外部内容。请参阅 https://tiddlywiki.com/#ExternalText&lt;/p&gt;"},"$:/language/LoginToTiddlySpace":{"title":"$:/language/LoginToTiddlySpace","text":"登录 TiddlySpace"},"$:/language/Manager/Controls/FilterByTag/None":{"title":"$:/language/Manager/Controls/FilterByTag/None","text":"(无)"},"$:/language/Manager/Controls/FilterByTag/Prompt":{"title":"$:/language/Manager/Controls/FilterByTag/Prompt","text":"依标签筛选︰"},"$:/language/Manager/Controls/Order/Prompt":{"title":"$:/language/Manager/Controls/Order/Prompt","text":"反向顺序"},"$:/language/Manager/Controls/Search/Placeholder":{"title":"$:/language/Manager/Controls/Search/Placeholder","text":"搜寻"},"$:/language/Manager/Controls/Search/Prompt":{"title":"$:/language/Manager/Controls/Search/Prompt","text":"搜寻︰"},"$:/language/Manager/Controls/Show/Option/Tags":{"title":"$:/language/Manager/Controls/Show/Option/Tags","text":"标签"},"$:/language/Manager/Controls/Show/Option/Tiddlers":{"title":"$:/language/Manager/Controls/Show/Option/Tiddlers","text":"条目"},"$:/language/Manager/Controls/Show/Prompt":{"title":"$:/language/Manager/Controls/Show/Prompt","text":"显示︰"},"$:/language/Manager/Controls/Sort/Prompt":{"title":"$:/language/Manager/Controls/Sort/Prompt","text":"排序︰"},"$:/language/Manager/Item/Colour":{"title":"$:/language/Manager/Item/Colour","text":"颜色"},"$:/language/Manager/Item/Fields":{"title":"$:/language/Manager/Item/Fields","text":"字段"},"$:/language/Manager/Item/Icon/None":{"title":"$:/language/Manager/Item/Icon/None","text":"(无)"},"$:/language/Manager/Item/Icon":{"title":"$:/language/Manager/Item/Icon","text":"图标"},"$:/language/Manager/Item/RawText":{"title":"$:/language/Manager/Item/RawText","text":"原始文字"},"$:/language/Manager/Item/Tags":{"title":"$:/language/Manager/Item/Tags","text":"标签"},"$:/language/Manager/Item/Tools":{"title":"$:/language/Manager/Item/Tools","text":"工具"},"$:/language/Manager/Item/WikifiedText":{"title":"$:/language/Manager/Item/WikifiedText","text":"Wikified 文字"},"$:/language/MissingTiddler/Hint":{"title":"$:/language/MissingTiddler/Hint","text":"佚失条目 \"&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;\" - 点击 {{||$:/core/ui/Buttons/edit}} 可创建此条目"},"$:/language/No":{"title":"$:/language/No","text":"否"},"$:/language/OfficialPluginLibrary":{"title":"$:/language/OfficialPluginLibrary","text":"~TiddlyWiki 官方插件程式库"},"$:/language/OfficialPluginLibrary/Hint":{"title":"$:/language/OfficialPluginLibrary/Hint","text":"此为在 tiddlywiki.com 的 ~TiddlyWiki 官方插件程式库。由核心团队维护的插件、主题和语言包。"},"$:/language/PageTemplate/Description":{"title":"$:/language/PageTemplate/Description","text":"默认的 ~Tiddlywiki 布局"},"$:/language/PageTemplate/Name":{"title":"$:/language/PageTemplate/Name","text":"默认的 ~PageTemplate"},"$:/language/PluginReloadWarning":{"title":"$:/language/PluginReloadWarning","text":"请保存 {{$:/core/ui/Buttons/save-wiki}} 并刷新页面 {{$:/core/ui/Buttons/refresh}} ，使 ~JavaScript 插件的更改生效"},"$:/language/RecentChanges/DateFormat":{"title":"$:/language/RecentChanges/DateFormat","text":"YYYY年0MM月0DD日"},"$:/language/Shortcuts/Input/Accept/Hint":{"title":"$:/language/Shortcuts/Input/Accept/Hint","text":"接受选取的项目"},"$:/language/Shortcuts/Input/AcceptVariant/Hint":{"title":"$:/language/Shortcuts/Input/AcceptVariant/Hint","text":"接受选取项目 (变种)"},"$:/language/Shortcuts/Input/AdvancedSearch/Hint":{"title":"$:/language/Shortcuts/Input/AdvancedSearch/Hint","text":"从侧边栏搜寻字段内打开[[进阶搜寻|$:/AdvancedSearch]]面板"},"$:/language/Shortcuts/Input/Cancel/Hint":{"title":"$:/language/Shortcuts/Input/Cancel/Hint","text":"清除输入字段"},"$:/language/Shortcuts/Input/Down/Hint":{"title":"$:/language/Shortcuts/Input/Down/Hint","text":"选择下一个项目"},"$:/language/Shortcuts/Input/Tab-Left/Hint":{"title":"$:/language/Shortcuts/Input/Tab-Left/Hint","text":"选择上一个页签"},"$:/language/Shortcuts/Input/Tab-Right/Hint":{"title":"$:/language/Shortcuts/Input/Tab-Right/Hint","text":"选择下一个页签"},"$:/language/Shortcuts/Input/Up/Hint":{"title":"$:/language/Shortcuts/Input/Up/Hint","text":"选择前一个项目"},"$:/language/Shortcuts/SidebarLayout/Hint":{"title":"$:/language/Shortcuts/SidebarLayout/Hint","text":"更改侧边栏布局"},"$:/language/Switcher/Subtitle/theme":{"title":"$:/language/Switcher/Subtitle/theme","text":"切换布景主题"},"$:/language/Switcher/Subtitle/layout":{"title":"$:/language/Switcher/Subtitle/layout","text":"切换布局"},"$:/language/Switcher/Subtitle/language":{"title":"$:/language/Switcher/Subtitle/language","text":"切换语言"},"$:/language/Switcher/Subtitle/palette":{"title":"$:/language/Switcher/Subtitle/palette","text":"切换调色板"},"$:/language/SystemTiddler/Tooltip":{"title":"$:/language/SystemTiddler/Tooltip","text":"此为系统条目"},"$:/language/SystemTiddlers/Include/Prompt":{"title":"$:/language/SystemTiddlers/Include/Prompt","text":"包括系统条目"},"$:/language/TagManager/Colour/Heading":{"title":"$:/language/TagManager/Colour/Heading","text":"颜色"},"$:/language/TagManager/Count/Heading":{"title":"$:/language/TagManager/Count/Heading","text":"计数"},"$:/language/TagManager/Icon/Heading":{"title":"$:/language/TagManager/Icon/Heading","text":"图标"},"$:/language/TagManager/Icons/None":{"title":"$:/language/TagManager/Icons/None","text":"无"},"$:/language/TagManager/Info/Heading":{"title":"$:/language/TagManager/Info/Heading","text":"信息"},"$:/language/TagManager/Tag/Heading":{"title":"$:/language/TagManager/Tag/Heading","text":"标签"},"$:/language/Tiddler/DateFormat":{"title":"$:/language/Tiddler/DateFormat","text":"YYYY年0MM月0DD日 0hh:0mm"},"$:/language/UnsavedChangesWarning":{"title":"$:/language/UnsavedChangesWarning","text":"在此 TiddlyWiki 您有尚未保存的变更"},"$:/language/Yes":{"title":"$:/language/Yes","text":"是"},"$:/language/Modals/Download":{"title":"$:/language/Modals/Download","type":"text/vnd.tiddlywiki","subtitle":"Download changes","footer":"&lt;$button message=\"tm-close-tiddler\"&gt;关闭&lt;/$button&gt;","help":"https://tiddlywiki.com/","text":"您的浏览器只支援手动保存。\n\n要保存更动的维基，右键点击下方的下载链结，选择\"下载文件\"或\"保存文件\"，然后选择文件夹或文件名。\n\n//您可以藉由按一下 Ctrl 键（Windows）或 options/ alt 键（Mac OS X）中的链接，稍微加速操作。您不会被提示文件夹或文件名，您的浏览器可能无法辨认它的文件名 -- 在做其他任何事之前，您可能需要重新命名扩展名为 `.html` 的文件。//\n\n在智能型手机上，不允许下载文件，但您可以标记链结，然后从一台可以正常保存维基的台式机的维基同步你的书签。"},"$:/language/Modals/SaveInstructions":{"title":"$:/language/Modals/SaveInstructions","type":"text/vnd.tiddlywiki","subtitle":"Save your work","footer":"&lt;$button message=\"tm-close-tiddler\"&gt;关闭&lt;/$button&gt;","help":"https://tiddlywiki.com/static/SavingChanges.html","text":"您对此 wiki 的变更需被保存为 ~TiddlyWiki HTML 文件。\n\n!!! 桌面版浏览器\n\n# 从''文件''菜单点选 ''另存为''\n# 选定文件名及保存位置\n#* 某些浏览器依然需要明确指定文件格式为 ''Webpage, HTML only'' 或类似的。\n# 关闭此页签\n\n!!! 智能手机版浏览器\n\n# 为此页建立书签\n#* 若您已设置 iCloud 或 Google 同步，该书签将自动与之前开启及保存于您电脑的书签同步。\n# 关闭此页签\n\n//若您再次于 Mobile Safari 开启该书签，将会再看到此信息。若要继续使用该文件，只需点击下列 ''关闭'' 按钮//\n"},"$:/config/NewJournal/Title":{"title":"$:/config/NewJournal/Title","text":"YYYY年0MM月0DD日"},"$:/config/NewJournal/Text":{"title":"$:/config/NewJournal/Text","text":""},"$:/config/NewJournal/Tags":{"title":"$:/config/NewJournal/Tags","text":"日志\n"},"$:/language/Notifications/Save/Done":{"title":"$:/language/Notifications/Save/Done","text":"已保存 wiki"},"$:/language/Notifications/Save/Starting":{"title":"$:/language/Notifications/Save/Starting","text":"开始保存 wiki"},"$:/language/Notifications/CopiedToClipboard/Succeeded":{"title":"$:/language/Notifications/CopiedToClipboard/Succeeded","text":"已复制到剪贴板！"},"$:/language/Notifications/CopiedToClipboard/Failed":{"title":"$:/language/Notifications/CopiedToClipboard/Failed","text":"无法复制到剪贴板！"},"$:/language/Search/DefaultResults/Caption":{"title":"$:/language/Search/DefaultResults/Caption","text":"列表"},"$:/language/Search/Filter/Caption":{"title":"$:/language/Search/Filter/Caption","text":"筛选"},"$:/language/Search/Filter/Hint":{"title":"$:/language/Search/Filter/Hint","text":"以[[筛选表达式|https://tiddlywiki.com/static/Filters.html]]查找"},"$:/language/Search/Filter/Matches":{"title":"$:/language/Search/Filter/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; 个条目符合条件&lt;/small&gt;//"},"$:/language/Search/Matches":{"title":"$:/language/Search/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; 个条目符合条件&lt;/small&gt;//"},"$:/language/Search/Matches/All":{"title":"$:/language/Search/Matches/All","text":"所有匹配："},"$:/language/Search/Matches/Title":{"title":"$:/language/Search/Matches/Title","text":"条目名称匹配："},"$:/language/Search/Search":{"title":"$:/language/Search/Search","text":"查找"},"$:/language/Search/Search/TooShort":{"title":"$:/language/Search/Search/TooShort","text":"查找文本太短"},"$:/language/Search/Shadows/Caption":{"title":"$:/language/Search/Shadows/Caption","text":"默认"},"$:/language/Search/Shadows/Hint":{"title":"$:/language/Search/Shadows/Hint","text":"查找默认条目"},"$:/language/Search/Shadows/Matches":{"title":"$:/language/Search/Shadows/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; 个条目符合条件&lt;/small&gt;//"},"$:/language/Search/Standard/Caption":{"title":"$:/language/Search/Standard/Caption","text":"标准"},"$:/language/Search/Standard/Hint":{"title":"$:/language/Search/Standard/Hint","text":"查找一般条目"},"$:/language/Search/Standard/Matches":{"title":"$:/language/Search/Standard/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; 个条目符合条件&lt;/small&gt;//"},"$:/language/Search/System/Caption":{"title":"$:/language/Search/System/Caption","text":"系统"},"$:/language/Search/System/Hint":{"title":"$:/language/Search/System/Hint","text":"查找系统条目"},"$:/language/Search/System/Matches":{"title":"$:/language/Search/System/Matches","text":"//&lt;small&gt;&lt;&lt;resultCount&gt;&gt; 个条目符合条件&lt;/small&gt;//"},"$:/language/SideBar/All/Caption":{"title":"$:/language/SideBar/All/Caption","text":"全部"},"$:/language/SideBar/Contents/Caption":{"title":"$:/language/SideBar/Contents/Caption","text":"目录"},"$:/language/SideBar/Drafts/Caption":{"title":"$:/language/SideBar/Drafts/Caption","text":"草稿"},"$:/language/SideBar/Explorer/Caption":{"title":"$:/language/SideBar/Explorer/Caption","text":"探索"},"$:/language/SideBar/Missing/Caption":{"title":"$:/language/SideBar/Missing/Caption","text":"缺失"},"$:/language/SideBar/More/Caption":{"title":"$:/language/SideBar/More/Caption","text":"更多"},"$:/language/SideBar/Open/Caption":{"title":"$:/language/SideBar/Open/Caption","text":"开启"},"$:/language/SideBar/Orphans/Caption":{"title":"$:/language/SideBar/Orphans/Caption","text":"孤立"},"$:/language/SideBar/Recent/Caption":{"title":"$:/language/SideBar/Recent/Caption","text":"最近"},"$:/language/SideBar/Shadows/Caption":{"title":"$:/language/SideBar/Shadows/Caption","text":"默认"},"$:/language/SideBar/System/Caption":{"title":"$:/language/SideBar/System/Caption","text":"系统"},"$:/language/SideBar/Tags/Caption":{"title":"$:/language/SideBar/Tags/Caption","text":"标签"},"$:/language/SideBar/Tags/Untagged/Caption":{"title":"$:/language/SideBar/Tags/Untagged/Caption","text":"未设标签"},"$:/language/SideBar/Tools/Caption":{"title":"$:/language/SideBar/Tools/Caption","text":"工具"},"$:/language/SideBar/Types/Caption":{"title":"$:/language/SideBar/Types/Caption","text":"类型"},"$:/SiteSubtitle":{"title":"$:/SiteSubtitle","text":"一个非线性的网页式笔记"},"$:/SiteTitle":{"title":"$:/SiteTitle","text":"我的 ~TiddlyWiki"},"$:/language/Snippets/ListByTag":{"title":"$:/language/Snippets/ListByTag","tags":"$:/tags/TextEditor/Snippet","caption":"依标签筛选的条目列表","text":"&lt;&lt;list-links \"[tag[task]sort[title]]\"&gt;&gt;\n"},"$:/language/Snippets/MacroDefinition":{"title":"$:/language/Snippets/MacroDefinition","tags":"$:/tags/TextEditor/Snippet","caption":"宏的定义","text":"\\define macroName(param1:\"默认值\",param2)\n宏的内容\n\\end\n"},"$:/language/Snippets/Table4x3":{"title":"$:/language/Snippets/Table4x3","tags":"$:/tags/TextEditor/Snippet","caption":"4 x 3 的表格","text":"|! | !一 | !二 | !三 | !四 |\n|! 1| | | | |\n|! 2| | | | |\n|! 3 | | | | |\n"},"$:/language/Snippets/TableOfContents":{"title":"$:/language/Snippets/TableOfContents","tags":"$:/tags/TextEditor/Snippet","caption":"目录","text":"&lt;div class=\"tc-table-of-contents\"&gt;\n\n&lt;&lt;toc-selective-expandable 'TableOfContents'&gt;&gt;\n\n&lt;/div&gt;"},"$:/language/ThemeTweaks/ThemeTweaks":{"title":"$:/language/ThemeTweaks/ThemeTweaks","text":"主题调整"},"$:/language/ThemeTweaks/ThemeTweaks/Hint":{"title":"$:/language/ThemeTweaks/ThemeTweaks/Hint","text":"您可以调整 ''Vanilla'' 布景主题的某些样貌。"},"$:/language/ThemeTweaks/Options":{"title":"$:/language/ThemeTweaks/Options","text":"选项"},"$:/language/ThemeTweaks/Options/SidebarLayout":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout","text":"侧边栏布局"},"$:/language/ThemeTweaks/Options/SidebarLayout/Fixed-Fluid":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout/Fixed-Fluid","text":"固定故事，浮动侧边栏"},"$:/language/ThemeTweaks/Options/SidebarLayout/Fluid-Fixed":{"title":"$:/language/ThemeTweaks/Options/SidebarLayout/Fluid-Fixed","text":"浮动故事，固定侧边栏"},"$:/language/ThemeTweaks/Options/StickyTitles":{"title":"$:/language/ThemeTweaks/Options/StickyTitles","text":"置顶标题"},"$:/language/ThemeTweaks/Options/StickyTitles/Hint":{"title":"$:/language/ThemeTweaks/Options/StickyTitles/Hint","text":"使条目名称\"黏着\"于浏览器窗口的顶端"},"$:/language/ThemeTweaks/Options/CodeWrapping":{"title":"$:/language/ThemeTweaks/Options/CodeWrapping","text":"在代码区块中折行"},"$:/language/ThemeTweaks/Settings":{"title":"$:/language/ThemeTweaks/Settings","text":"设置"},"$:/language/ThemeTweaks/Settings/FontFamily":{"title":"$:/language/ThemeTweaks/Settings/FontFamily","text":"字型"},"$:/language/ThemeTweaks/Settings/CodeFontFamily":{"title":"$:/language/ThemeTweaks/Settings/CodeFontFamily","text":"代码字型"},"$:/language/ThemeTweaks/Settings/EditorFontFamily":{"title":"$:/language/ThemeTweaks/Settings/EditorFontFamily","text":"编辑器字型"},"$:/language/ThemeTweaks/Settings/BackgroundImage":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImage","text":"页面背景图像"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment","text":"页面背景图像附属"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Scroll":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Scroll","text":"随条目卷动"},"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Fixed":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageAttachment/Fixed","text":"固定于窗口"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize","text":"页面背景图像大小"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Auto":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Auto","text":"自动"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Cover":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Cover","text":"覆盖"},"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Contain":{"title":"$:/language/ThemeTweaks/Settings/BackgroundImageSize/Contain","text":"包含"},"$:/language/ThemeTweaks/Metrics":{"title":"$:/language/ThemeTweaks/Metrics","text":"大小"},"$:/language/ThemeTweaks/Metrics/FontSize":{"title":"$:/language/ThemeTweaks/Metrics/FontSize","text":"字体大小"},"$:/language/ThemeTweaks/Metrics/LineHeight":{"title":"$:/language/ThemeTweaks/Metrics/LineHeight","text":"行高"},"$:/language/ThemeTweaks/Metrics/BodyFontSize":{"title":"$:/language/ThemeTweaks/Metrics/BodyFontSize","text":"条目本文的字体大小"},"$:/language/ThemeTweaks/Metrics/BodyLineHeight":{"title":"$:/language/ThemeTweaks/Metrics/BodyLineHeight","text":"条目本文的行高"},"$:/language/ThemeTweaks/Metrics/StoryLeft":{"title":"$:/language/ThemeTweaks/Metrics/StoryLeft","text":"故事左侧位置"},"$:/language/ThemeTweaks/Metrics/StoryLeft/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryLeft/Hint","text":"故事河（条目区）的左边缘与页面左端的间距"},"$:/language/ThemeTweaks/Metrics/StoryTop":{"title":"$:/language/ThemeTweaks/Metrics/StoryTop","text":"故事顶端位置"},"$:/language/ThemeTweaks/Metrics/StoryTop/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryTop/Hint","text":"故事河（条目区）的上边缘与页面顶端的间距"},"$:/language/ThemeTweaks/Metrics/StoryRight":{"title":"$:/language/ThemeTweaks/Metrics/StoryRight","text":"故事右侧位置"},"$:/language/ThemeTweaks/Metrics/StoryRight/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryRight/Hint","text":"侧边栏的左边缘与页面左端的间距"},"$:/language/ThemeTweaks/Metrics/StoryWidth":{"title":"$:/language/ThemeTweaks/Metrics/StoryWidth","text":"故事的宽度"},"$:/language/ThemeTweaks/Metrics/StoryWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/StoryWidth/Hint","text":"故事河的整体宽度"},"$:/language/ThemeTweaks/Metrics/TiddlerWidth":{"title":"$:/language/ThemeTweaks/Metrics/TiddlerWidth","text":"条目宽度"},"$:/language/ThemeTweaks/Metrics/TiddlerWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/TiddlerWidth/Hint","text":"在故事河内"},"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint","text":"侧边栏中断点"},"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint/Hint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarBreakpoint/Hint","text":"故事河和侧边栏会并排显示的最小页面宽度"},"$:/language/ThemeTweaks/Metrics/SidebarWidth":{"title":"$:/language/ThemeTweaks/Metrics/SidebarWidth","text":"侧边栏宽度"},"$:/language/ThemeTweaks/Metrics/SidebarWidth/Hint":{"title":"$:/language/ThemeTweaks/Metrics/SidebarWidth/Hint","text":"在浮动-固定布局中，侧边栏的宽度"},"$:/language/TiddlerInfo/Advanced/Caption":{"title":"$:/language/TiddlerInfo/Advanced/Caption","text":"高级"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Empty/Hint":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Empty/Hint","text":"无信息"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Heading":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Heading","text":"插件明细"},"$:/language/TiddlerInfo/Advanced/PluginInfo/Hint":{"title":"$:/language/TiddlerInfo/Advanced/PluginInfo/Hint","text":"此插件包含以下预设条目："},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Heading":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Heading","text":"默认条目状态"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/NotShadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/NotShadow/Hint","text":"&lt;$link to=&lt;&lt;infoTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;infoTiddler&gt;&gt;/&gt;&lt;/$link&gt; 不是一个默认条目"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Hint","text":"&lt;$link to=&lt;&lt;infoTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;infoTiddler&gt;&gt;/&gt;&lt;/$link&gt; 是一个默认条目"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Source":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/Shadow/Source","text":"此条目定义于插件 &lt;$link to=&lt;&lt;pluginTiddler&gt;&gt;&gt;&lt;$text text=&lt;&lt;pluginTiddler&gt;&gt;/&gt;&lt;/$link&gt;"},"$:/language/TiddlerInfo/Advanced/ShadowInfo/OverriddenShadow/Hint":{"title":"$:/language/TiddlerInfo/Advanced/ShadowInfo/OverriddenShadow/Hint","text":"已被一般条目覆写"},"$:/language/TiddlerInfo/Fields/Caption":{"title":"$:/language/TiddlerInfo/Fields/Caption","text":"栏位"},"$:/language/TiddlerInfo/List/Caption":{"title":"$:/language/TiddlerInfo/List/Caption","text":"列表"},"$:/language/TiddlerInfo/List/Empty":{"title":"$:/language/TiddlerInfo/List/Empty","text":"此条目无指定列表"},"$:/language/TiddlerInfo/Listed/Caption":{"title":"$:/language/TiddlerInfo/Listed/Caption","text":"被列于"},"$:/language/TiddlerInfo/Listed/Empty":{"title":"$:/language/TiddlerInfo/Listed/Empty","text":"此条目未出现于其他条目的列表中"},"$:/language/TiddlerInfo/References/Caption":{"title":"$:/language/TiddlerInfo/References/Caption","text":"反向链接"},"$:/language/TiddlerInfo/References/Empty":{"title":"$:/language/TiddlerInfo/References/Empty","text":"无条目链接至此"},"$:/language/TiddlerInfo/Tagging/Caption":{"title":"$:/language/TiddlerInfo/Tagging/Caption","text":"子条目"},"$:/language/TiddlerInfo/Tagging/Empty":{"title":"$:/language/TiddlerInfo/Tagging/Empty","text":"无任何条目以此条目之标题为标签"},"$:/language/TiddlerInfo/Tools/Caption":{"title":"$:/language/TiddlerInfo/Tools/Caption","text":"工具"},"$:/language/Docs/Types/application/javascript":{"title":"$:/language/Docs/Types/application/javascript","description":"JavaScript 源码","name":"application/javascript","group":"开发者"},"$:/language/Docs/Types/application/json":{"title":"$:/language/Docs/Types/application/json","description":"JSON 数据","name":"application/json","group":"开发者"},"$:/language/Docs/Types/application/x-tiddler-dictionary":{"title":"$:/language/Docs/Types/application/x-tiddler-dictionary","description":"数据字典","name":"application/x-tiddler-dictionary","group":"开发者"},"$:/language/Docs/Types/image/gif":{"title":"$:/language/Docs/Types/image/gif","description":"GIF 图像","name":"image/gif","group":"图像"},"$:/language/Docs/Types/image/jpeg":{"title":"$:/language/Docs/Types/image/jpeg","description":"JPEG 图像","name":"image/jpeg","group":"图像"},"$:/language/Docs/Types/image/png":{"title":"$:/language/Docs/Types/image/png","description":"PNG 图像","name":"image/png","group":"图像"},"$:/language/Docs/Types/image/svg+xml":{"title":"$:/language/Docs/Types/image/svg+xml","description":"结构式矢量图","name":"image/svg+xml","group":"图像"},"$:/language/Docs/Types/image/x-icon":{"title":"$:/language/Docs/Types/image/x-icon","description":"图标","name":"image/x-icon","group":"图像"},"$:/language/Docs/Types/text/css":{"title":"$:/language/Docs/Types/text/css","description":"静态样式","name":"text/css","group":"开发者"},"$:/language/Docs/Types/text/html":{"title":"$:/language/Docs/Types/text/html","description":"HTML 标记","name":"text/html","group":"文本"},"$:/language/Docs/Types/text/plain":{"title":"$:/language/Docs/Types/text/plain","description":"纯文本","name":"text/plain","group":"文本"},"$:/language/Docs/Types/text/vnd.tiddlywiki":{"title":"$:/language/Docs/Types/text/vnd.tiddlywiki","description":"TiddlyWiki 5","name":"text/vnd.tiddlywiki","group":"文本"},"$:/language/Docs/Types/text/x-tiddlywiki":{"title":"$:/language/Docs/Types/text/x-tiddlywiki","description":"TiddlyWiki 2","name":"text/x-tiddlywiki","group":"文本"}}}</pre>
</div>
<div title="$:/palette">
<pre>$:/palettes/Vanilla</pre>
</div>
<div created="20200603211101398" modified="20200603211101398" tags="" title="$:/plugins/telmiger/details">
<pre>Create HTML 5 `&lt;details&gt;` elements including a `&lt;summary&gt;` using this widget.

&lt;$details summary="The details element – W3C definition"&gt;

&lt;&lt;&lt;
The [[details|http://w3c.github.io/html/interactive-elements.html#elementdef-details]] element represents a disclosure widget from which the user can obtain additional information or controls.
&lt;&lt;&lt; W3C

&lt;/$details&gt;

&lt;$details summary="Code example" open="no"&gt;

```
&lt;$details summary="This should be open" open="yes"&gt;

Content will be immediately visible if open is set to "yes".

&lt;/$details&gt;
```

&lt;/$details&gt;</pre>
</div>
<div created="20200603211101398" modified="20200603211101398" tags="" title="$:/plugins/telmiger/details/about">
<pre>Create HTML 5 `&lt;details&gt;` elements including a `&lt;summary&gt;` using this widget.

&lt;$details summary="The details element – W3C definition"&gt;

&lt;&lt;&lt;
The [[details|http://w3c.github.io/html/interactive-elements.html#elementdef-details]] element represents a disclosure widget from which the user can obtain additional information or controls.
&lt;&lt;&lt; W3C

&lt;/$details&gt;

&lt;$details summary="Code example" open="no"&gt;

```
&lt;$details summary="This should be open" open="yes"&gt;

Content will be immediately visible if open is set to "yes".

&lt;/$details&gt;
```

&lt;/$details&gt;</pre>
</div>
<div created="20180925155320737" creator="Thomas Elmiger" modified="20180926204140772" modifier="Thomas Elmiger" tags="$:/tags/Stylesheet" title="$:/plugins/telmiger/details/colours.css">
<pre>/* details and summary colours */

details {
   background-color: &lt;&lt;colour tiddler-info-tab-background&gt;&gt;;
   color: &lt;&lt;colour foreground&gt;&gt;;
}

details summary {
   background-color: &lt;&lt;colour dropdown-tab-background&gt;&gt;;
}

details.notification summary {
    background-color: &lt;&lt;colour notification-background&gt;&gt;;
    /* TW leaves color undefined/uses foreground */
}

details.warning summary {
    background-color: #ffbbaf;
    color: #000;
}

details.success summary {
    background-color: #88edc5;
    color: #000;
}
</pre>
</div>
<div created="20170122140815442" creator="Thomas Elmiger" modified="20180929131615369" modifier="Thomas Elmiger" tags="$:/tags/Stylesheet" title="$:/plugins/telmiger/details/details.css">
<pre>/* details and summary */

details {
   transition: height 1s ease;
   padding: 0 0.5em 0 0.66em;
   margin-top: 0.66em;
   margin-bottom: 0.66em;
}

details + details {
   margin-top: -0.46em;
}

details[open] {
   padding-bottom: 1em;
}

details:not([open]) { 
   cursor: pointer;
}

details &gt; summary {
   display: list-item;
   margin: 0 -0.5em 0 -0.66em;
   padding: 0.2em 0.5em 0.2em 0.66em;
   padding-left: 1.76em;  /* adjust for indentation */
   text-indent: -1.1em;
   cursor: pointer;
}

details[open] &gt; summary {
   margin-bottom: 1em;
}

details[open] &gt; *:first-child:not(summary) {
   margin-top: 1em;
}
</pre>
</div>
<div created="20170124173619910" creator="Thomas Elmiger" modified="20180929212032187" modifier="Thomas Elmiger" module-type="widget" tags="Plugins" title="$:/plugins/telmiger/details/details.js" type="application/javascript">
<pre>/*\
title: $:/plugins/telmiger/details/details.js
type: application/javascript
module-type: widget

Details widget v 0.8

Will output an HTML 5 &lt;details&gt; section including a &lt;summary&gt;

```
	&lt;details&gt;
		&lt;summary&gt;This sums it up&lt;/summary&gt; 
		All the details follow here.
	&lt;/details&gt;
```

|Parameter |Description |h
|summary |Optional text to display as summary. Wins over field (see below). |
|open |Optional initial state, set to "open" to show details on load. Defaults to "". |
|state |An optional TextReference containing the state. Wins over open. |
|field |Optionally, the summary is taken from the field with this name in a given tiddler. Defaults to "title". |
|tiddler |Optional title of a tiddler to watch, connected to field. Defaults to current tiddler. |
|class |Optional CSS classes to be assigned to the details tag. |


\*/
(function(){

/*jslint node: true, browser: true */
/*global $tw: false */
"use strict";

var Widget = require("$:/core/modules/widgets/widget.js").widget;

var DetailsWidget = function(parseTreeNode,options) {
	this.initialise(parseTreeNode,options);
};

/*
Inherit from the base widget class
*/
DetailsWidget.prototype = new Widget();

/*
Render this widget into the DOM
*/
DetailsWidget.prototype.render = function(parent,nextSibling) {
	// Save the parent dom node
	this.parentDomNode = parent;
	// Compute attributes
	this.computeAttributes();
	// Execute logic
	this.execute();
	// Create elements
	this.detailsDomNode = this.document.createElement("details");
	if(this.detailsClass !== "") {
		// this.detailsClass += " ";
		// this.detailsClass += "tc-details";
		this.detailsDomNode.setAttribute("class",this.detailsClass);
	}
	if(this.detailsOpen == "open") {
		this.detailsDomNode.setAttribute("open","open");
	}
	if(this.detailsSummary !== "") {
		this.summaryDomNode = this.document.createElement("summary");
		// this.summaryDomNode.setAttribute("class","tc-summary");
		this.detailsDomNode.appendChild(this.summaryDomNode);
		this.summaryDomNode.appendChild(this.document.createTextNode(this.detailsSummary));
	}
// register an event listener
/* Maybe this can be reactivated later, see below.
	if(this.detailsStateTitle) {
		$tw.utils.addEventListeners(this.detailsDomNode,[
			{name: "toggle", handlerObject: this, handlerMethod: "handleToggleEvent"},
		]);
	}
*/
// As iOS mobile browsers lack support of toggle events on details 
// we emulate the toggle event using click
	if(this.detailsStateTitle &amp;&amp; this.summaryDomNode) {
		$tw.utils.addEventListeners(this.summaryDomNode,[
			{name: "click", handlerObject: this, handlerMethod: "handleToggleEvent"},
		]);
	} else {
		if(this.detailsStateTitle) {
			$tw.utils.addEventListeners(this.detailsDomNode,[
				{name: "click", handlerObject: this, handlerMethod: "handleToggleEvent"},
			]);
		}
	}
	// Insert the details into the DOM and render any children
	this.parentDomNode.insertBefore(this.detailsDomNode,nextSibling);
	this.renderChildren(this.detailsDomNode,null);
	this.domNodes.push(this.detailsDomNode);
};

/*
Retrieve the value of the summary
*/
DetailsWidget.prototype.getSummary = function() {
	var summary = "";
	if(this.summaryTitle === "Tiddler not found" &amp;&amp; this.summaryField === "") {
	// nothing defined: leave empty 
		summary = "";
	} else {
		// tiddler defined? use defined field or title
		if(this.myTiddler) {
			if(this.summaryField === "title" || this.summaryField === "") {
				summary = this.summaryTitle;
			} else {
				if(this.summaryField === "text") {
         		// getTiddlerText() triggers lazy loading of skinny tiddlers
					summary = this.wiki.getTiddlerText(this.summaryTitle);
				} else {
					summary = this.myTiddler.fields[this.summaryField];
				}
			}
		} else {
			if(this.summaryField !== "" &amp;&amp; this.summaryField !== "text") {
				// try defined field in current tiddler
				var tiddler = this.wiki.getTiddler(this.getVariable("currentTiddler"));
				summary = tiddler.fields[this.summaryField];
			} else {
				summary = "";
			}
		}
	}
   return summary;
};

/*
Retrieve the value of the state text reference
*/
DetailsWidget.prototype.getStateFromReference = function() {
    var state = this.detailsStateTitle ? this.wiki.getTextReference(this.detailsStateTitle,"",this.getVariable("currentTiddler")) : "";
    return state;
};

/*
Check all open signals, state fields/tiddlers get priority
*/
DetailsWidget.prototype.getOpenState = function() {
	var result = "";
	if((this.detailsOpenDefault !== "" &amp;&amp; this.detailsOpenDefault !== "no") 
	    || this.detailsState === "open") {
		result = "open";
	 } 
	if(this.detailsStateTitle !=="" &amp;&amp; this.detailsState !== "open") {
		result = "";
	}
	return result;
};

/*
Update the state text reference after click event
*/
DetailsWidget.prototype.updateState = function(openState) {
	var fieldValue = "false";
	var currentTiddler = this.getVariable("currentTiddler");
    // get the title for the (existing/new) tiddler
	var tr = $tw.utils.parseTextReference(this.detailsStateTitle);
	var tidTitle = tr.title || currentTiddler;
    // is it an existing state tiddler?
	var isStateTiddler = (tr.title === this.detailsStateTitle);
	var hasStateTiddler = this.wiki.tiddlerExists(tr.title);
	var currentStateTiddler = (tr.title === currentTiddler);
	if(isStateTiddler || hasStateTiddler || (currentStateTiddler &amp;&amp; tr.field !== "text")) { 
		// Set the state field (but never overwrite the current tiddler’s text field
		this.wiki.setText(tidTitle,tr.field,tr.index,openState);
	} else {
		if(!hasStateTiddler &amp;&amp; tidTitle !== currentTiddler) {
			this.createTiddler(tidTitle);
			this.wiki.setText(tidTitle,tr.field,tr.index,openState);
		} else {
			console.log ("Something went wrong in updateState");
		}
	}
};

/*
Create a tiddler with a title only
*/
DetailsWidget.prototype.createTiddler = function(tidTitle) {
	this.wiki.addTiddler(new $tw.Tiddler(
		this.wiki.getCreationFields(),
		this.wiki.getModificationFields(),
		{
			title: tidTitle,
			tags: []
		}
	));
};

/*
Set openState according to click
*/
DetailsWidget.prototype.handleToggleEvent = function(event) {
	// check if an open attribute is present
	var newState = this.detailsDomNode.open ? "" : "open";
	// update only, if the node has a new state
	if(newState !== this.detailsState) {
		this.updateState(newState);
	}
};

/*
Compute the internal state of the widget
*/
DetailsWidget.prototype.execute = function() {
	// Get the parameters from the attributes 
	var tryTiddler = this.getAttribute("tiddler");
	this.myTiddler = this.wiki.getTiddler(tryTiddler);
	this.summaryTitle = this.myTiddler ? tryTiddler : "Tiddler not found";
	this.summaryField = this.getAttribute("field","");
	this.detailsSummary = this.getAttribute("summary") || this.getSummary();
	this.detailsStateTitle = this.getAttribute("state","");
	this.detailsState = this.getStateFromReference();
	this.detailsOpenDefault = this.getAttribute("open","");
	this.detailsOpen = this.getOpenState();
	this.detailsClass = this.getAttribute("class","");
	// Construct the child widgets
	this.makeChildWidgets();
};

/*
Selectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering
*/
DetailsWidget.prototype.refresh = function(changedTiddlers) {
	var changedAttributes = this.computeAttributes();
	if(changedAttributes.tiddler || changedAttributes.field || changedAttributes.summary || changedAttributes.state || changedAttributes.open || changedAttributes["class"]) {
		this.refreshSelf();
		return true;
	} else {
		var refreshed = false;
		var testState = this.getStateFromReference();
		if(testState !== this.detailsState) {
			// state change
			this.refreshSelf();
			refreshed = true;
		} 
		return this.refreshChildren(changedTiddlers) || refreshed;
	}
};

exports.details = DetailsWidget;

})();</pre>
</div>
<div created="20170205205314072" modified="20171219183752113" tags="" title="$:/plugins/telmiger/details/icon">
<pre>&lt;svg class="tc-image-button telmiger-icon" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" viewBox="0 0 128 128" role="img" aria-labelledby="title"&gt;&lt;title id="title"&gt;T&lt;/title&gt;&lt;path class="circle" d="M64 2C30 2 2 29.753 2 64c0 34.235 27.753 62 62 62s62-27.752 62-62C126 29.753 98.221 2 64 2z"/&gt;&lt;path class="t" d="M100.41 63.254c-2.886 1.92-7.544 2.883-13.979 2.883h-8.008c-4.246 0-7.331.845-9.254 2.536-1.922 1.69-3.449 5.086-4.576 10.19 0 0-.181 1.481-.503 1.481s-.369-.877-.518-1.586a37.897 37.897 0 0 0-.721-2.754c-.631-2.137-1.262-3.753-1.894-4.847-.764-1.359-1.727-2.452-2.889-3.28-1.162-.83-2.49-1.326-3.985-1.492l-2.092-.248H41.73c-6.144 0-10.711-.962-13.7-2.884-4.976-3.159-7.649-9.129-8.02-17.91-.03-.706.003-1.351.132-2.171h.585c.399 3.975 3.679 7.048 6.086 9.219 2.408 2.172 6.269 3.258 11.581 3.258h9.313c5.347 0 9.257 1.226 11.731 3.68 2.231 2.213 3.701 5.68 4.406 10.4.076.511.03.736.178.736.149 0 .11-.256.17-.783.713-6.122 3.085-10.219 7.117-12.294 2.487-1.292 6.434-1.906 11.841-1.839l6.368.1c4.311.066 7.942-.788 10.893-2.56 2.953-1.773 6.447-5.079 6.844-9.917h.595c.183.478.16 1.576.127 2.333-.371 8.752-2.894 14.668-7.567 17.749z"/&gt;&lt;/svg&gt;
&lt;style&gt;
.telmiger-icon .circle { fill: #e2001a }
.telmiger-icon .t { fill: #fff }
&lt;/style&gt;</pre>
</div>
<div created="20170205213335455" modified="20170205214435064" tags="" title="$:/plugins/telmiger/details/license">
<pre>!! Plugin license
!!!The MIT License (MIT)

```
Copyright © 2017/2018 Thomas Elmiger – thomas-elmiger.ch

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```</pre>
</div>
<div created="20170205212323032" modified="20200603211110057" tags="" title="$:/plugins/telmiger/details/readme">
<pre>! ~DetailsWidget

{{$:/plugins/telmiger/details/about}}

Documentation can be found at http://tid.li/tw5/plugins.html#DetailsWidget
</pre>
</div>
<div created="20200603204816640" modified="20200603204849180" tags="" title="$:/plugins/telmiger/DetailsWidget/support">
<pre>{{$:/plugins/telmiger/support}}</pre>
</div>
<div created="20181103150753927" creator="Thomas Elmiger" modified="20181104091650389" modifier="Thomas Elmiger" tags="" title="$:/plugins/telmiger/support">
<pre>!! Support the Author

''Hi!'' I’m Thomas, the author of [[tid.li/tw5/plugins.html|https://tid.li/tw5/plugins.html]]. Feedback is always welcome, as well as funding for maintenance, support and new projects :)

---

!!! One Time Support

If using my plugins just makes you happy, consider a one time payment via ~PayPal to reward the effort:

https://www.paypal.me/telmiger

---

!!! Permanent Support

If my tools make you more productive or save you time in your job or your everyday life, you can support me as a Patron: 

https://www.patreon.com/telmiger

---

!!! Thank You

Substantial parts of my availabe time go to the deveopment of useful plugins for [[TiddlyWiki|https://tiddlywiki.com/]]. – Many others do the same and I would like to thank them all, especially [[Jeremy Ruston|https://tiddlywiki.com/#JeremyRuston]] and all the active members of the community!

//Hereby I promise to share future revenues (if any) with other developers who’s works I use or who inspired me.//

If you like my work, I would be very happy to hear from you.

''Thank you very much for your support!''&lt;br&gt;
//Thomas//

https://thomas-elmiger.ch</pre>
</div>
<div created="20210705065005974" modified="20210705065018840" title="$:/SiteSubtitle">
<pre>始于2021——与自己的成长竞赛</pre>
</div>
<div created="20210705065001228" modified="20210705065003369" title="$:/SiteTitle">
<pre>我的日课</pre>
</div>
<div title="$:/state/showeditpreview">
<pre>no</pre>
</div>
<div title="$:/state/sidebar">
<pre>yes</pre>
</div>
<div title="$:/state/tab--1963855381">
<pre>$:/core/ui/ControlPanel/Palette</pre>
</div>
<div title="$:/state/tab--2112689675">
<pre>$:/core/ui/ControlPanel/Basics</pre>
</div>
<div created="20210705064945940" modified="20210705064949340" title="$:/state/tab--86143343">
<pre>$:/core/ui/ControlPanel/Plugins/Installed/Themes</pre>
</div>
<div title="$:/state/tab--959111941">
<pre>$:/core/ui/ControlPanel/LoadedModules</pre>
</div>
<div created="20210707083506315" modified="20210707090347472" title="$:/state/tab-1163638994">
<pre>$:/core/ui/MoreSideBar/Plugins/Plugins</pre>
</div>
<div title="$:/state/tab-1677851421">
<pre>$:/core/ui/ControlPanel/Plugins/Add/Plugins</pre>
</div>
<div created="20210705061211954" modified="20210705065116861" title="$:/state/tab-1749438307">
<pre>$:/core/ui/ControlPanel/Appearance</pre>
</div>
<div created="20210705061213069" modified="20210705064939911" title="$:/state/tab-2065006209">
<pre>$:/core/ui/ControlPanel/Saving/GitHub</pre>
</div>
<div created="20210707083504952" modified="20210707090346032" title="$:/state/tab/moresidebar-1850697562">
<pre>$:/core/ui/MoreSideBar/Plugins</pre>
</div>
<div created="20210705062012004" modified="20210707090344348" title="$:/state/tab/sidebar--595412856">
<pre>$:/core/ui/SideBar/More</pre>
</div>
<div title="$:/status/RequireReloadDueToPluginChange">
<pre>no</pre>
</div>
<div created="20210707084329397" list="[[加强政党合作 共谋人民幸福]] 中国史纲 自我成长 政治学通识" modified="20210707085237324" title="$:/StoryList">
<pre></pre>
</div>
<div title="$:/theme">
<pre>$:/themes/tiddlywiki/vanilla</pre>
</div>
<div author="JeremyRuston" core-version="&gt;=5.0.0" dependents="$:/themes/tiddlywiki/vanilla" description="Emphasises individual tiddlers" name="Snow White" plugin-priority="0" plugin-type="theme" title="$:/themes/tiddlywiki/snowwhite" type="application/json" version="5.1.24-prerelease">
<pre>{"tiddlers":{"$:/themes/tiddlywiki/snowwhite/base":{"title":"$:/themes/tiddlywiki/snowwhite/base","tags":"[[$:/tags/Stylesheet]]","text":"\\define sidebarbreakpoint-minus-one()\n&lt;$text text={{{ [{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}removesuffix[px]subtract[1]addsuffix[px]] ~[{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}] }}}/&gt;\n\\end\n\n\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline\n\n.tc-sidebar-header {\n\ttext-shadow: 0 1px 0 &lt;&lt;colour sidebar-foreground-shadow&gt;&gt;;\n}\n\n.tc-tiddler-info {\n\t&lt;&lt;box-shadow \"inset 1px 2px 3px rgba(0,0,0,0.1)\"&gt;&gt;\n}\n\n@media screen {\n\t.tc-tiddler-frame {\n\t\t&lt;&lt;box-shadow \"1px 1px 5px rgba(0, 0, 0, 0.3)\"&gt;&gt;\n\t}\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\t.tc-tiddler-frame {\n\t\t&lt;&lt;box-shadow none&gt;&gt;\n\t}\n}\n\n.tc-page-controls button svg, .tc-tiddler-controls button svg, .tc-topbar button svg {\n\t&lt;&lt;transition \"fill 150ms ease-in-out\"&gt;&gt;\n}\n\n.tc-tiddler-controls button.tc-selected,\n.tc-page-controls button.tc-selected {\n\t&lt;&lt;filter \"drop-shadow(0px -1px 2px rgba(0,0,0,0.25))\"&gt;&gt;\n}\n\n.tc-tiddler-frame input.tc-edit-texteditor {\n\t&lt;&lt;box-shadow \"inset 0 1px 8px rgba(0, 0, 0, 0.15)\"&gt;&gt;\n}\n\n.tc-edit-tags {\n\t&lt;&lt;box-shadow \"inset 0 1px 8px rgba(0, 0, 0, 0.15)\"&gt;&gt;\n}\n\n.tc-tiddler-frame .tc-edit-tags input.tc-edit-texteditor {\n\t&lt;&lt;box-shadow \"none\"&gt;&gt;\n\tborder: none;\n\toutline: none;\n}\n\ntextarea.tc-edit-texteditor {\n\tfont-family: {{$:/themes/tiddlywiki/vanilla/settings/editorfontfamily}};\n}\n\ncanvas.tc-edit-bitmapeditor  {\n\t&lt;&lt;box-shadow \"2px 2px 5px rgba(0, 0, 0, 0.5)\"&gt;&gt;\n}\n\n.tc-drop-down {\n\tborder-radius: 4px;\n\t&lt;&lt;box-shadow \"2px 2px 10px rgba(0, 0, 0, 0.5)\"&gt;&gt;\n}\n\n.tc-block-dropdown {\n\tborder-radius: 4px;\n\t&lt;&lt;box-shadow \"2px 2px 10px rgba(0, 0, 0, 0.5)\"&gt;&gt;\n}\n\n.tc-modal {\n\tborder-radius: 6px;\n\t&lt;&lt;box-shadow \"0 3px 7px rgba(0,0,0,0.3)\"&gt;&gt;\n}\n\n.tc-modal-footer {\n\tborder-radius: 0 0 6px 6px;\n\t&lt;&lt;box-shadow \"inset 0 1px 0 #fff\"&gt;&gt;;\n}\n\n\n.tc-alert {\n\tborder-radius: 6px;\n\t&lt;&lt;box-shadow \"0 3px 7px rgba(0,0,0,0.6)\"&gt;&gt;\n}\n\n.tc-notification {\n\tborder-radius: 6px;\n\t&lt;&lt;box-shadow \"0 3px 7px rgba(0,0,0,0.3)\"&gt;&gt;\n\ttext-shadow: 0 1px 0 rgba(255,255,255, 0.8);\n}\n\n.tc-sidebar-lists .tc-tab-set .tc-tab-divider {\n\tborder-top: none;\n\theight: 1px;\n\t&lt;&lt;background-linear-gradient \"left, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0.0) 100%\"&gt;&gt;\n}\n\n.tc-more-sidebar &gt; .tc-tab-set &gt; .tc-tab-buttons &gt; button {\n\t&lt;&lt;background-linear-gradient \"left, rgba(0,0,0,0.01) 0%, rgba(0,0,0,0.1) 100%\"&gt;&gt;\n}\n\n.tc-more-sidebar &gt; .tc-tab-set &gt; .tc-tab-buttons &gt; button.tc-tab-selected {\n\t&lt;&lt;background-linear-gradient \"left, rgba(0,0,0,0.05) 0%, rgba(255,255,255,0.05) 100%\"&gt;&gt;\n}\n\n.tc-message-box img {\n\t&lt;&lt;box-shadow \"1px 1px 3px rgba(0,0,0,0.5)\"&gt;&gt;\n}\n\n.tc-plugin-info {\n\t&lt;&lt;box-shadow \"1px 1px 3px rgba(0,0,0,0.5)\"&gt;&gt;\n}\n"}}}</pre>
</div>
<div author="JeremyRuston" core-version="&gt;=5.0.0" dependents="" description="Basic theme" name="Vanilla" plugin-priority="0" plugin-type="theme" title="$:/themes/tiddlywiki/vanilla" type="application/json" version="5.1.24-prerelease">
<pre>{"tiddlers":{"$:/themes/tiddlywiki/vanilla/base":{"title":"$:/themes/tiddlywiki/vanilla/base","tags":"[[$:/tags/Stylesheet]]","text":"\\define custom-background-datauri()\n&lt;$set name=\"background\" value={{$:/themes/tiddlywiki/vanilla/settings/backgroundimage}}&gt;\n&lt;$list filter=\"[&lt;background&gt;is[image]]\"&gt;\n`background: url(`\n&lt;$list filter=\"[&lt;background&gt;!has[_canonical_uri]]\"&gt;\n`\"`&lt;$macrocall $name=\"datauri\" title={{$:/themes/tiddlywiki/vanilla/settings/backgroundimage}}/&gt;`\"`\n&lt;/$list&gt;\n&lt;$list filter=\"[&lt;background&gt;has[_canonical_uri]]\"&gt;\n`\"`&lt;$view tiddler={{$:/themes/tiddlywiki/vanilla/settings/backgroundimage}} field=\"_canonical_uri\"/&gt;`\"`\n&lt;/$list&gt;\n`) center center;`\n`background-attachment: `{{$:/themes/tiddlywiki/vanilla/settings/backgroundimageattachment}}`;\n-webkit-background-size:` {{$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize}}`;\n-moz-background-size:` {{$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize}}`;\n-o-background-size:` {{$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize}}`;\nbackground-size:` {{$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize}}`;`\n&lt;/$list&gt;\n&lt;/$set&gt;\n\\end\n\n\\define sidebarbreakpoint()\n&lt;$text text={{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}}/&gt;\n\\end\n\n\\define sidebarbreakpoint-minus-one()\n&lt;$text text={{{ [{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}removesuffix[px]subtract[1]addsuffix[px]] ~[{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}] }}}/&gt;\n\\end\n\n\\define if-fluid-fixed(text,hiddenSidebarText)\n&lt;$reveal state=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" type=\"match\" text=\"fluid-fixed\"&gt;\n$text$\n&lt;$reveal state=\"$:/state/sidebar\" type=\"nomatch\" text=\"yes\" default=\"yes\"&gt;\n$hiddenSidebarText$\n&lt;/$reveal&gt;\n&lt;/$reveal&gt;\n\\end\n\n\\define if-editor-height-fixed(then,else)\n&lt;$reveal state=\"$:/config/TextEditor/EditorHeight/Mode\" type=\"match\" text=\"fixed\"&gt;\n$then$\n&lt;/$reveal&gt;\n&lt;$reveal state=\"$:/config/TextEditor/EditorHeight/Mode\" type=\"match\" text=\"auto\"&gt;\n$else$\n&lt;/$reveal&gt;\n\\end\n\n\\define set-type-selector-min-width()\n&lt;$set name=\"typeLength\" value={{{ [all[shadows+tiddlers]prefix[$:/language/Docs/Types/]get[name]length[]maxall[]] }}}&gt;\n\n\t.tc-type-selector-dropdown-wrapper {\n\t\tmin-width: calc(&lt;&lt;typeLength&gt;&gt;ch + 4em);\n\t}\n\n\t.tc-type-selector-dropdown-wrapper input.tc-edit-typeeditor {\n\t\tmin-width: &lt;&lt;typeLength&gt;&gt;ch;\n\t}\n\n&lt;/$set&gt;\n\\end\n\n\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline macrocallblock\n\n/*\n** Start with the normalize CSS reset, and then belay some of its effects\n*/\n\n{{$:/themes/tiddlywiki/vanilla/reset}}\n\n*, input[type=\"search\"] {\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n}\n\ninput[type=\"search\"] {\n\toutline-offset: initial;\n}\n\nhtml button {\n\tline-height: 1.2;\n\tcolor: &lt;&lt;colour button-foreground&gt;&gt;;\n\tfill: &lt;&lt;colour button-foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour button-background&gt;&gt;;\n\tborder-color: &lt;&lt;colour button-border&gt;&gt;;\n}\n\nbutton:disabled svg {\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n/*\n** Basic element styles\n*/\n\nhtml, body {\n\tfont-family: {{$:/themes/tiddlywiki/vanilla/settings/fontfamily}};\n\ttext-rendering: optimizeLegibility; /* Enables kerning and ligatures etc. */\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n}\n\nhtml:-webkit-full-screen {\n\tbackground-color: &lt;&lt;colour page-background&gt;&gt;;\n}\n\nbody.tc-body {\n\tfont-size: {{$:/themes/tiddlywiki/vanilla/metrics/fontsize}};\n\tline-height: {{$:/themes/tiddlywiki/vanilla/metrics/lineheight}};\n\tword-wrap: break-word;\n\t&lt;&lt;custom-background-datauri&gt;&gt;\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n\tbackground-color: &lt;&lt;colour page-background&gt;&gt;;\n\tfill: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n&lt;&lt;if-background-attachment \"\"\"\n\nbody.tc-body {\n\tbackground-color: transparent;\n}\n\n\"\"\"&gt;&gt;\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n\tfont-size: 2em;\n}\n\nh1, h2, h3, h4, h5, h6 {\n\tline-height: 1.2;\n\tfont-weight: 300;\n}\n\npre {\n\tdisplay: block;\n\tmargin-top: 1em;\n\tmargin-bottom: 1em;\n\tword-break: normal;\n\tword-wrap: break-word;\n\twhite-space: {{$:/themes/tiddlywiki/vanilla/options/codewrapping}};\n\tbackground-color: &lt;&lt;colour pre-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour pre-border&gt;&gt;;\n\tpadding: 0 3px 2px;\n\tborder-radius: 3px;\n\tfont-family: {{$:/themes/tiddlywiki/vanilla/settings/codefontfamily}};\n}\n\ncode {\n\tcolor: &lt;&lt;colour code-foreground&gt;&gt;;\n\tbackground-color: &lt;&lt;colour code-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour code-border&gt;&gt;;\n\twhite-space: {{$:/themes/tiddlywiki/vanilla/options/codewrapping}};\n\tpadding: 0 3px 2px;\n\tborder-radius: 3px;\n\tfont-family: {{$:/themes/tiddlywiki/vanilla/settings/codefontfamily}};\n}\n\nblockquote {\n\tborder-left: 5px solid &lt;&lt;colour blockquote-bar&gt;&gt;;\n\tmargin-left: 25px;\n\tpadding-left: 10px;\n\tquotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\n}\n\nblockquote &gt; div {\n\tmargin-top: 1em;\n\tmargin-bottom: 1em;\n}\n\nblockquote.tc-big-quote {\n\tfont-family: Georgia, serif;\n\tposition: relative;\n\tbackground: &lt;&lt;colour pre-background&gt;&gt;;\n\tborder-left: none;\n\tmargin-left: 50px;\n\tmargin-right: 50px;\n\tpadding: 10px;\n\tborder-radius: 8px;\n}\n\nblockquote.tc-big-quote cite:before {\n\tcontent: \"\\2014 \\2009\";\n}\n\nblockquote.tc-big-quote:before {\n\tfont-family: Georgia, serif;\n\tcolor: &lt;&lt;colour blockquote-bar&gt;&gt;;\n\tcontent: open-quote;\n\tfont-size: 8em;\n\tline-height: 0.1em;\n\tmargin-right: 0.25em;\n\tvertical-align: -0.4em;\n\tposition: absolute;\n\tleft: -50px;\n\ttop: 42px;\n}\n\nblockquote.tc-big-quote:after {\n\tfont-family: Georgia, serif;\n\tcolor: &lt;&lt;colour blockquote-bar&gt;&gt;;\n\tcontent: close-quote;\n\tfont-size: 8em;\n\tline-height: 0.1em;\n\tmargin-right: 0.25em;\n\tvertical-align: -0.4em;\n\tposition: absolute;\n\tright: -80px;\n\tbottom: -20px;\n}\n\ndl dt {\n\tfont-weight: bold;\n\tmargin-top: 6px;\n}\n\nbutton, textarea, input, select {\n\toutline-color: &lt;&lt;colour primary&gt;&gt;;\n}\n\ntextarea,\ninput[type=text],\ninput[type=search],\ninput[type=\"\"],\ninput:not([type]) {\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n}\n\ninput[type=\"checkbox\"] {\n\tvertical-align: middle;\n}\n\ninput[type=\"search\"]::-webkit-search-decoration,\ninput[type=\"search\"]::-webkit-search-cancel-button,\ninput[type=\"search\"]::-webkit-search-results-button,\ninput[type=\"search\"]::-webkit-search-results-decoration {\n\t-webkit-appearance:none;\n}\n\n.tc-muted {\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\nsvg.tc-image-button {\n\tpadding: 0px 1px 1px 0px;\n}\n\n.tc-icon-wrapper &gt; svg {\n\twidth: 1em;\n\theight: 1em;\n}\n\nkbd {\n\tdisplay: inline-block;\n\tpadding: 3px 5px;\n\tfont-size: 0.8em;\n\tline-height: 1.2;\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n\tvertical-align: middle;\n\tbackground-color: &lt;&lt;colour background&gt;&gt;;\n\tborder: solid 1px &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-bottom-color: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-radius: 3px;\n\tbox-shadow: inset 0 -1px 0 &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n::selection {\n\tbackground-color: Highlight;\n\tcolor: HighlightText;\n\tbackground-color: &lt;&lt;colour selection-background&gt;&gt;;\n\tcolor: &lt;&lt;colour selection-foreground&gt;&gt;;\n}\n\n/*\nMarkdown likes putting code elements inside pre elements\n*/\npre &gt; code {\n\tpadding: 0;\n\tborder: none;\n\tbackground-color: inherit;\n\tcolor: inherit;\n}\n\ntable {\n\tborder: 1px solid &lt;&lt;colour table-border&gt;&gt;;\n\twidth: auto;\n\tmax-width: 100%;\n\tcaption-side: bottom;\n\tmargin-top: 1em;\n\tmargin-bottom: 1em;\n\t/* next 2 elements needed, since normalize 8.0.1 */\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\ntable th, table td {\n\tpadding: 0 7px 0 7px;\n\tborder-top: 1px solid &lt;&lt;colour table-border&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour table-border&gt;&gt;;\n}\n\ntable thead tr td, table th {\n\tbackground-color: &lt;&lt;colour table-header-background&gt;&gt;;\n\tfont-weight: bold;\n}\n\ntable tfoot tr td {\n\tbackground-color: &lt;&lt;colour table-footer-background&gt;&gt;;\n}\n\n.tc-csv-table {\n\twhite-space: nowrap;\n}\n\n.tc-tiddler-frame img,\n.tc-tiddler-frame svg,\n.tc-tiddler-frame canvas,\n.tc-tiddler-frame embed,\n.tc-tiddler-frame iframe {\n\tmax-width: 100%;\n}\n\n.tc-tiddler-body &gt; embed,\n.tc-tiddler-body &gt; iframe {\n\twidth: 100%;\n\theight: 600px;\n}\n\n/*\n** Links\n*/\n\nbutton.tc-tiddlylink,\na.tc-tiddlylink {\n\ttext-decoration: none;\n\tfont-weight: 500;\n\tcolor: &lt;&lt;colour tiddler-link-foreground&gt;&gt;;\n\t-webkit-user-select: inherit; /* Otherwise the draggable attribute makes links impossible to select */\n}\n\n.tc-sidebar-lists a.tc-tiddlylink {\n\tcolor: &lt;&lt;colour sidebar-tiddler-link-foreground&gt;&gt;;\n}\n\n.tc-sidebar-lists a.tc-tiddlylink:hover {\n\tcolor: &lt;&lt;colour sidebar-tiddler-link-foreground-hover&gt;&gt;;\n}\n\nbutton.tc-tiddlylink:hover,\na.tc-tiddlylink:hover {\n\ttext-decoration: underline;\n}\n\na.tc-tiddlylink-resolves {\n}\n\na.tc-tiddlylink-shadow {\n\tfont-weight: bold;\n}\n\na.tc-tiddlylink-shadow.tc-tiddlylink-resolves {\n\tfont-weight: normal;\n}\n\na.tc-tiddlylink-missing {\n\tfont-style: italic;\n}\n\na.tc-tiddlylink-external {\n\ttext-decoration: underline;\n\tcolor: &lt;&lt;colour external-link-foreground&gt;&gt;;\n\tbackground-color: &lt;&lt;colour external-link-background&gt;&gt;;\n}\n\na.tc-tiddlylink-external:visited {\n\tcolor: &lt;&lt;colour external-link-foreground-visited&gt;&gt;;\n\tbackground-color: &lt;&lt;colour external-link-background-visited&gt;&gt;;\n}\n\na.tc-tiddlylink-external:hover {\n\tcolor: &lt;&lt;colour external-link-foreground-hover&gt;&gt;;\n\tbackground-color: &lt;&lt;colour external-link-background-hover&gt;&gt;;\n}\n\n.tc-drop-down a.tc-tiddlylink:hover {\n\tcolor: &lt;&lt;colour tiddler-link-background&gt;&gt;;\n}\n\n/*\n** Drag and drop styles\n*/\n\n.tc-tiddler-dragger {\n\tposition: relative;\n\tz-index: -10000;\n}\n\n.tc-tiddler-dragger-inner {\n\tposition: absolute;\n\ttop: -1000px;\n\tleft: -1000px;\n\tdisplay: inline-block;\n\tpadding: 8px 20px;\n\tfont-size: 16.9px;\n\tfont-weight: bold;\n\tline-height: 20px;\n\tcolor: &lt;&lt;colour dragger-foreground&gt;&gt;;\n\ttext-shadow: 0 1px 0 rgba(0, 0, 0, 1);\n\twhite-space: nowrap;\n\tvertical-align: baseline;\n\tbackground-color: &lt;&lt;colour dragger-background&gt;&gt;;\n\tborder-radius: 20px;\n}\n\n.tc-tiddler-dragger-cover {\n\tposition: absolute;\n\tbackground-color: &lt;&lt;colour page-background&gt;&gt;;\n}\n\n.tc-page-container &gt; .tc-dropzone {\n\tmin-height: 100vh;\n}\n\n.tc-dropzone {\n\tposition: relative;\n}\n\n.tc-dropzone.tc-dragover:before {\n\tz-index: 10000;\n\tdisplay: block;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: &lt;&lt;colour dropzone-background&gt;&gt;;\n\ttext-align: center;\n\tcontent: \"&lt;&lt;lingo DropMessage&gt;&gt;\";\n}\n\n.tc-droppable &gt; .tc-droppable-placeholder {\n\tdisplay: none;\n}\n\n.tc-droppable.tc-dragover &gt; .tc-droppable-placeholder {\n\tdisplay: block;\n\tborder: 2px dashed &lt;&lt;colour dropzone-background&gt;&gt;;\n}\n\n.tc-draggable {\n\tcursor: move;\n}\n\n.tc-sidebar-tab-open .tc-droppable-placeholder, .tc-tagged-draggable-list .tc-droppable-placeholder,\n.tc-links-draggable-list .tc-droppable-placeholder {\n\tline-height: 2em;\n\theight: 2em;\n}\n\n.tc-sidebar-tab-open-item {\n\tposition: relative;\n}\n\n.tc-sidebar-tab-open .tc-btn-invisible.tc-btn-mini svg {\n\tfont-size: 0.7em;\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n/*\n** Plugin reload warning\n*/\n\n.tc-plugin-reload-warning {\n\tz-index: 1000;\n\tdisplay: block;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: &lt;&lt;colour alert-background&gt;&gt;;\n\ttext-align: center;\n}\n\n/*\n** Buttons\n*/\n\nbutton svg, button img, label svg, label img {\n\tvertical-align: middle;\n}\n\n.tc-btn-invisible {\n\tpadding: 0;\n\tmargin: 0;\n\tbackground: none;\n\tborder: none;\n\tcursor: pointer;\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n\tfill: &lt;&lt;colour foreground&gt;&gt;;\n}\n\nbutton:disabled.tc-btn-invisible  {\n\tcursor: default; \n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-btn-boxed {\n\tfont-size: 0.6em;\n\tpadding: 0.2em;\n\tmargin: 1px;\n\tbackground: none;\n\tborder: 1px solid &lt;&lt;colour tiddler-controls-foreground&gt;&gt;;\n\tborder-radius: 0.25em;\n}\n\nhtml body.tc-body .tc-btn-boxed svg {\n\tfont-size: 1.6666em;\n}\n\n.tc-btn-boxed:hover {\n\tbackground: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n}\n\nhtml body.tc-body .tc-btn-boxed:hover svg {\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-btn-rounded {\n\tfont-size: 0.5em;\n\tline-height: 2;\n\tpadding: 0em 0.3em 0.2em 0.4em;\n\tmargin: 1px;\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tborder-radius: 2em;\n}\n\nhtml body.tc-body .tc-btn-rounded svg {\n\tfont-size: 1.6666em;\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-btn-rounded:hover {\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\nhtml body.tc-body .tc-btn-rounded:hover svg {\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-btn-icon svg {\n\theight: 1em;\n\twidth: 1em;\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n\n.tc-btn-text {\n\tmargin-left: 7px;\n}\n\n/* used for documentation \"fake\" buttons */\n.tc-btn-standard {\n\tline-height: 1.8;\n\tcolor: #667;\n\tbackground-color: #e0e0e0;\n\tborder: 1px solid #888;\n\tpadding: 2px 1px 2px 1px;\n\tmargin: 1px 4px 1px 4px;\n}\n\n.tc-btn-big-green {\n\tdisplay: inline-block;\n\tpadding: 8px;\n\tmargin: 4px 8px 4px 8px;\n\tbackground: &lt;&lt;colour download-background&gt;&gt;;\n\tcolor: &lt;&lt;colour download-foreground&gt;&gt;;\n\tfill: &lt;&lt;colour download-foreground&gt;&gt;;\n\tborder: none;\n\tborder-radius: 2px;\n\tfont-size: 1.2em;\n\tline-height: 1.4em;\n\ttext-decoration: none;\n}\n\n.tc-btn-big-green svg,\n.tc-btn-big-green img {\n\theight: 2em;\n\twidth: 2em;\n\tvertical-align: middle;\n\tfill: &lt;&lt;colour download-foreground&gt;&gt;;\n}\n\n.tc-primary-btn {\n\tbackground: &lt;&lt;colour primary&gt;&gt;;\n}\n\n.tc-sidebar-lists input {\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n.tc-sidebar-lists button {\n\tcolor: &lt;&lt;colour sidebar-button-foreground&gt;&gt;;\n\tfill: &lt;&lt;colour sidebar-button-foreground&gt;&gt;;\n}\n\n.tc-sidebar-lists button.tc-btn-mini {\n\tcolor: &lt;&lt;colour sidebar-muted-foreground&gt;&gt;;\n}\n\n.tc-sidebar-lists button.tc-btn-mini:hover {\n\tcolor: &lt;&lt;colour sidebar-muted-foreground-hover&gt;&gt;;\n}\n\n.tc-sidebar-lists button small {\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n}\n\nbutton svg.tc-image-button, button .tc-image-button img {\n\theight: 1em;\n\twidth: 1em;\n}\n\n.tc-unfold-banner {\n\tposition: absolute;\n\tpadding: 0;\n\tmargin: 0;\n\tbackground: none;\n\tborder: none;\n\twidth: 100%;\n\twidth: calc(100% + 2px);\n\tmargin-left: -43px;\n\ttext-align: center;\n\tborder-top: 2px solid &lt;&lt;colour tiddler-info-background&gt;&gt;;\n\tmargin-top: 4px;\n}\n\n.tc-unfold-banner:hover {\n\tbackground: &lt;&lt;colour tiddler-info-background&gt;&gt;;\n\tborder-top: 2px solid &lt;&lt;colour tiddler-info-border&gt;&gt;;\n}\n\n.tc-unfold-banner svg, .tc-fold-banner svg {\n\theight: 0.75em;\n\tfill: &lt;&lt;colour tiddler-controls-foreground&gt;&gt;;\n}\n\n.tc-unfold-banner:hover svg, .tc-fold-banner:hover svg {\n\tfill: &lt;&lt;colour tiddler-controls-foreground-hover&gt;&gt;;\n}\n\n.tc-fold-banner {\n\tposition: absolute;\n\tpadding: 0;\n\tmargin: 0;\n\tbackground: none;\n\tborder: none;\n\twidth: 23px;\n\ttext-align: center;\n\tmargin-left: -35px;\n\ttop: 6px;\n\tbottom: 6px;\n}\n\n.tc-fold-banner:hover {\n\tbackground: &lt;&lt;colour tiddler-info-background&gt;&gt;;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\n\t.tc-unfold-banner {\n\t\tposition: static;\n\t\twidth: calc(100% + 59px);\n\t}\n\n\t.tc-fold-banner {\n\t\twidth: 16px;\n\t\tmargin-left: -16px;\n\t\tfont-size: 0.75em;\n\t}\n\n}\n\n/*\n** Tags and missing tiddlers\n*/\n\n.tc-tag-list-item {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n\n.tc-tags-wrapper {\n\tmargin: 4px 0 14px 0;\n}\n\n.tc-tags-wrapper .tc-tag-list-item {\n\tmargin-right: 7px;\n}\n\n.tc-missing-tiddler-label {\n\tfont-style: italic;\n\tfont-weight: normal;\n\tdisplay: inline-block;\n\tfont-size: 11.844px;\n\tline-height: 14px;\n\twhite-space: nowrap;\n\tvertical-align: baseline;\n}\n\n.tc-block-tags-dropdown &gt; .tc-btn-invisible:hover {\n\tbackground-color: &lt;&lt;colour primary&gt;&gt;;\n}\n\nbutton.tc-tag-label, span.tc-tag-label {\n\tdisplay: inline-block;\n\tpadding: 0.16em 0.7em;\n\tfont-size: 0.9em;\n\tfont-weight: 400;\n\tline-height: 1.2em;\n\tcolor: &lt;&lt;colour tag-foreground&gt;&gt;;\n\twhite-space: nowrap;\n\tvertical-align: baseline;\n\tbackground-color: &lt;&lt;colour tag-background&gt;&gt;;\n\tborder-radius: 1em;\n}\n\n.tc-sidebar-scrollable .tc-tag-label {\n\ttext-shadow: none;\n}\n\n.tc-untagged-separator {\n\twidth: 10em;\n\tleft: 0;\n\tmargin-left: 0;\n\tborder: 0;\n\theight: 1px;\n\tbackground: &lt;&lt;colour tab-divider&gt;&gt;;\n}\n\nbutton.tc-untagged-label {\n\tbackground-color: &lt;&lt;colour untagged-background&gt;&gt;;\n}\n\n.tc-tag-label svg, .tc-tag-label img {\n\theight: 1em;\n\twidth: 1em;\n\tmargin-right: 3px;\n\tmargin-bottom: 1px;\n\tvertical-align: bottom;\n}\n\n.tc-edit-tags button.tc-remove-tag-button svg {\n\tfont-size: 0.7em;\n\tvertical-align: middle;\n}\n\n.tc-tag-manager-table .tc-tag-label {\n\twhite-space: normal;\n}\n\n.tc-tag-manager-tag {\n\twidth: 100%;\n}\n\nbutton.tc-btn-invisible.tc-remove-tag-button {\n\toutline: none;\n}\n\n.tc-tag-button-selected,\n.tc-list-item-selected a.tc-tiddlylink, a.tc-list-item-selected {\n\tbackground-color: &lt;&lt;colour primary&gt;&gt;;\n\tcolor: &lt;&lt;colour tiddler-background&gt;&gt;;\n}\n\n/*\n** Page layout\n*/\n\n.tc-topbar {\n\tposition: fixed;\n\tz-index: 1200;\n}\n\n.tc-topbar-left {\n\tleft: 29px;\n\ttop: 5px;\n}\n\n.tc-topbar-right {\n\ttop: 5px;\n\tright: 29px;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\n\t.tc-topbar-right {\n\t\tright: 10px;\n\t}\n\n}\n\n.tc-topbar button {\n\tpadding: 8px;\n}\n\n.tc-topbar svg {\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-topbar button:hover svg {\n\tfill: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\n\t.tc-show-sidebar-btn svg.tc-image-chevron-left, .tc-hide-sidebar-btn svg.tc-image-chevron-right {\n\t\ttransform: rotate(-90deg);\n\t}\n\n}\n\n.tc-sidebar-header {\n\tcolor: &lt;&lt;colour sidebar-foreground&gt;&gt;;\n\tfill: &lt;&lt;colour sidebar-foreground&gt;&gt;;\n}\n\n.tc-sidebar-header .tc-title a.tc-tiddlylink-resolves {\n\tfont-weight: 300;\n}\n\n.tc-sidebar-header .tc-sidebar-lists p {\n\tmargin-top: 3px;\n\tmargin-bottom: 3px;\n}\n\n.tc-sidebar-header .tc-missing-tiddler-label {\n\tcolor: &lt;&lt;colour sidebar-foreground&gt;&gt;;\n}\n\n.tc-advanced-search input {\n\twidth: 60%;\n}\n\n.tc-search a svg {\n\twidth: 1.2em;\n\theight: 1.2em;\n\tvertical-align: middle;\n}\n\n.tc-page-controls {\n\tmargin-top: 14px;\n\tfont-size: 1.5em;\n}\n\n.tc-page-controls .tc-drop-down {\n\tfont-size: 1rem;\n}\n\n.tc-page-controls button {\n\tmargin-right: 0.5em;\n}\n\n.tc-page-controls a.tc-tiddlylink:hover {\n\ttext-decoration: none;\n}\n\n.tc-page-controls img {\n\twidth: 1em;\n}\n\n.tc-page-controls svg {\n\tfill: &lt;&lt;colour sidebar-controls-foreground&gt;&gt;;\n}\n\n.tc-page-controls button:hover svg, .tc-page-controls a:hover svg {\n\tfill: &lt;&lt;colour sidebar-controls-foreground-hover&gt;&gt;;\n}\n\n.tc-sidebar-lists .tc-menu-list-item {\n\twhite-space: nowrap;\n}\n\n.tc-menu-list-count {\n\tfont-weight: bold;\n}\n\n.tc-menu-list-subitem {\n\tpadding-left: 7px;\n}\n\n.tc-story-river {\n\tposition: relative;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\n\t.tc-sidebar-header {\n\t\tpadding: 14px;\n\t\tmin-height: 32px;\n\t\tmargin-top: {{$:/themes/tiddlywiki/vanilla/metrics/storytop}};\n\t\ttransition:  min-height {{$:/config/AnimationDuration}}ms ease-in-out, padding-top {{$:/config/AnimationDuration}}ms ease-in-out, padding-bottom {{$:/config/AnimationDuration}}ms ease-in-out;\n\t}\n\t\n\t&lt;&lt;if-no-sidebar \"\"\"\n\n\t\t.tc-sidebar-header {\n\t\t\tmin-height: 0;\n\t\t\tpadding-top: 0;\n\t\t\tpadding-bottom: 0;\n\t\t}\n\n\t\"\"\"&gt;&gt;\n\n\t.tc-story-river {\n\t\tposition: relative;\n\t\tpadding: 0;\n\t}\n}\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\n\t.tc-message-box {\n\t\tmargin: 21px -21px 21px -21px;\n\t}\n\n\t.tc-sidebar-scrollable {\n\t\tposition: fixed;\n\t\ttop: {{$:/themes/tiddlywiki/vanilla/metrics/storytop}};\n\t\tleft: {{$:/themes/tiddlywiki/vanilla/metrics/storyright}};\n\t\tbottom: 0;\n\t\tright: 0;\n\t\toverflow-y: auto;\n\t\toverflow-x: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tmargin: 0 0 0 -42px;\n\t\tpadding: 71px 0 28px 42px;\n\t}\n\n\thtml[dir=\"rtl\"] .tc-sidebar-scrollable {\n\t\tleft: auto;\n\t\tright: {{$:/themes/tiddlywiki/vanilla/metrics/storyright}};\n\t}\n\n\t.tc-story-river {\n\t\tposition: relative;\n\t\tleft: {{$:/themes/tiddlywiki/vanilla/metrics/storyleft}};\n\t\ttop: {{$:/themes/tiddlywiki/vanilla/metrics/storytop}};\n\t\twidth: {{$:/themes/tiddlywiki/vanilla/metrics/storywidth}};\n\t\tpadding: 42px 42px 42px 42px;\n\t}\n\n&lt;&lt;if-no-sidebar \"\n\n\t.tc-story-river {\n\t\twidth: calc(100% - {{$:/themes/tiddlywiki/vanilla/metrics/storyleft}});\n\t}\n\n\"&gt;&gt;\n\n\t.tc-story-river.tc-static-story-river {\n\t\tmargin-right: 0;\n\t\tpadding-right: 42px;\n\t}\n\n}\n\n@media print {\n\n\tbody.tc-body {\n\t\tbackground-color: transparent;\n\t}\n\n\t.tc-sidebar-header, .tc-topbar {\n\t\tdisplay: none;\n\t}\n\n\t.tc-story-river {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\n\t.tc-story-river .tc-tiddler-frame {\n\t\tmargin: 0;\n\t\tborder: none;\n\t\tpadding: 0;\n\t}\n}\n\n/*\n** Tiddler styles\n*/\n\n.tc-tiddler-frame {\n\tposition: relative;\n\tmargin-bottom: 28px;\n\tbackground-color: &lt;&lt;colour tiddler-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour tiddler-border&gt;&gt;;\n}\n\n{{$:/themes/tiddlywiki/vanilla/sticky}}\n\n.tc-tiddler-info {\n\toverflow: hidden;\n\tpadding: 14px 42px 14px 42px;\n\tbackground-color: &lt;&lt;colour tiddler-info-background&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour tiddler-info-border&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tiddler-info-border&gt;&gt;;\n}\n\n.tc-tiddler-info p {\n\tmargin-top: 3px;\n\tmargin-bottom: 3px;\n}\n\n.tc-tiddler-info .tc-tab-buttons button.tc-tab-selected {\n\tbackground-color: &lt;&lt;colour tiddler-info-tab-background&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tiddler-info-tab-background&gt;&gt;;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\n\t.tc-tiddler-info {\n\t\tpadding: 14px 14px 14px 14px;\n\t}\n\n}\n\n.tc-view-field-table {\n\twidth: 100%;\n}\n\n.tc-view-field-name {\n\twidth: 1%; /* Makes this column be as narrow as possible */\n\ttext-align: right;\n\tfont-style: italic;\n\tfont-weight: 200;\n}\n\n.tc-view-field-value {\n\tword-break: break-all;\n}\n\n@media (max-width: &lt;&lt;sidebarbreakpoint-minus-one&gt;&gt;) {\n\t.tc-tiddler-frame {\n\t\tpadding: 14px 14px 14px 14px;\n\t\tmargin-bottom: .5em;\n\t}\n\n\t.tc-tiddler-info {\n\t\tmargin: 0 -14px 0 -14px;\n\t}\n}\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\t.tc-tiddler-frame {\n\t\tpadding: 28px 42px 42px 42px;\n\t\twidth: {{$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth}};\n\t\tborder-radius: 2px;\n\t}\n\n&lt;&lt;if-no-sidebar \"\n\n\t.tc-tiddler-frame {\n\t\twidth: 100%;\n\t}\n\n\"&gt;&gt;\n\n\t.tc-tiddler-info {\n\t\tmargin: 0 -42px 0 -42px;\n\t}\n}\n\n.tc-site-title,\n.tc-titlebar {\n\tfont-weight: 300;\n\tfont-size: 2.35em;\n\tline-height: 1.35em;\n\tcolor: &lt;&lt;colour tiddler-title-foreground&gt;&gt;;\n\tmargin: 0;\n}\n\n.tc-site-title {\n\tcolor: &lt;&lt;colour site-title-foreground&gt;&gt;;\n}\n\n.tc-tiddler-title-icon {\n\tvertical-align: middle;\n\tmargin-right: .1em;\n}\n\n.tc-system-title-prefix {\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-titlebar h2 {\n\tfont-size: 1em;\n\tdisplay: inline;\n}\n\n.tc-titlebar img {\n\theight: 1em;\n}\n\n.tc-subtitle {\n\tfont-size: 0.9em;\n\tcolor: &lt;&lt;colour tiddler-subtitle-foreground&gt;&gt;;\n\tfont-weight: 300;\n}\n\n.tc-subtitle .tc-tiddlylink {\n\tmargin-right: .3em;\n}\n\n.tc-tiddler-missing .tc-title {\n\tfont-style: italic;\n\tfont-weight: normal;\n}\n\n.tc-tiddler-frame .tc-tiddler-controls {\n\tfloat: right;\n}\n\n.tc-tiddler-controls .tc-drop-down {\n\tfont-size: 0.6em;\n}\n\n.tc-tiddler-controls .tc-drop-down .tc-drop-down {\n\tfont-size: 1em;\n}\n\n.tc-tiddler-controls &gt; span &gt; button,\n.tc-tiddler-controls &gt; span &gt; span &gt; button,\n.tc-tiddler-controls &gt; span &gt; span &gt; span &gt; button {\n\tvertical-align: baseline;\n\tmargin-left:5px;\n}\n\n.tc-tiddler-controls button svg, .tc-tiddler-controls button img,\n.tc-search button svg, .tc-search a svg {\n\tfill: &lt;&lt;colour tiddler-controls-foreground&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg, .tc-tiddler-controls button img {\n\theight: 0.75em;\n}\n\n.tc-search button svg, .tc-search a svg {\n\theight: 1.2em;\n\twidth: 1.2em;\n\tmargin: 0 0.25em;\n}\n\n.tc-tiddler-controls button.tc-selected svg,\n.tc-page-controls button.tc-selected svg  {\n\tfill: &lt;&lt;colour tiddler-controls-foreground-selected&gt;&gt;;\n}\n\n.tc-tiddler-controls button.tc-btn-invisible:hover svg,\n.tc-search button:hover svg, .tc-search a:hover svg {\n\tfill: &lt;&lt;colour tiddler-controls-foreground-hover&gt;&gt;;\n}\n\n@media print {\n\t.tc-tiddler-controls {\n\t\tdisplay: none;\n\t}\n}\n\n.tc-tiddler-help { /* Help prompts within tiddler template */\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tmargin-top: 14px;\n}\n\n.tc-tiddler-help a.tc-tiddlylink {\n\tcolor: &lt;&lt;colour very-muted-foreground&gt;&gt;;\n}\n\n.tc-tiddler-frame .tc-edit-texteditor {\n\twidth: 100%;\n\tmargin: 4px 0 4px 0;\n}\n\n.tc-tiddler-frame input.tc-edit-texteditor,\n.tc-tiddler-frame textarea.tc-edit-texteditor,\n.tc-tiddler-frame iframe.tc-edit-texteditor {\n\tpadding: 3px 3px 3px 3px;\n\tborder: 1px solid &lt;&lt;colour tiddler-editor-border&gt;&gt;;\n\tline-height: 1.3em;\n\t-webkit-appearance: none;\n\tfont-family: {{$:/themes/tiddlywiki/vanilla/settings/editorfontfamily}};\n}\n\n.tc-tiddler-frame input.tc-edit-texteditor,\n.tc-tiddler-frame textarea.tc-edit-texteditor {\n\tbackground-color: &lt;&lt;colour tiddler-editor-background&gt;&gt;;\n}\n\n.tc-tiddler-frame iframe.tc-edit-texteditor {\n\tbackground-color: &lt;&lt;colour tiddler-background&gt;&gt;;\n}\n\n.tc-tiddler-frame .tc-binary-warning {\n\twidth: 100%;\n\theight: 5em;\n\ttext-align: center;\n\tpadding: 3em 3em 6em 3em;\n\tbackground: &lt;&lt;colour alert-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour alert-border&gt;&gt;;\n}\n\ncanvas.tc-edit-bitmapeditor  {\n\tborder: 6px solid &lt;&lt;colour tiddler-editor-border-image&gt;&gt;;\n\tcursor: crosshair;\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n}\n\n.tc-edit-bitmapeditor-width {\n\tdisplay: block;\n}\n\n.tc-edit-bitmapeditor-height {\n\tdisplay: block;\n}\n\n.tc-tiddler-body {\n\tclear: both;\n}\n\n.tc-tiddler-frame .tc-tiddler-body {\n\tfont-size: {{$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize}};\n\tline-height: {{$:/themes/tiddlywiki/vanilla/metrics/bodylineheight}};\n}\n\n.tc-titlebar, .tc-tiddler-edit-title {\n\toverflow: hidden; /* https://github.com/Jermolene/TiddlyWiki5/issues/282 */\n}\n\nhtml body.tc-body.tc-single-tiddler-window {\n\tmargin: 1em;\n\tbackground: &lt;&lt;colour tiddler-background&gt;&gt;;\n}\n\n.tc-single-tiddler-window img,\n.tc-single-tiddler-window svg,\n.tc-single-tiddler-window canvas,\n.tc-single-tiddler-window embed,\n.tc-single-tiddler-window iframe {\n\tmax-width: 100%;\n}\n\n/*\n** Editor\n*/\n\n.tc-editor-toolbar {\n\tmargin-top: 8px;\n}\n\n.tc-editor-toolbar button {\n\tvertical-align: middle;\n\tbackground-color: &lt;&lt;colour tiddler-controls-foreground&gt;&gt;;\n\tcolor: &lt;&lt;colour tiddler-controls-foreground-selected&gt;&gt;;\n\tfill: &lt;&lt;colour tiddler-controls-foreground-selected&gt;&gt;;\n\tborder-radius: 4px;\n\tpadding: 3px;\n\tmargin: 2px 0 2px 4px;\n}\n\n.tc-editor-toolbar button.tc-text-editor-toolbar-item-adjunct {\n\tmargin-left: 1px;\n\twidth: 1em;\n\tborder-radius: 8px;\n}\n\n.tc-editor-toolbar button.tc-text-editor-toolbar-item-start-group {\n\tmargin-left: 11px;\n}\n\n.tc-editor-toolbar button.tc-selected {\n\tbackground-color: &lt;&lt;colour primary&gt;&gt;;\n}\n\n.tc-editor-toolbar button svg {\n\twidth: 1.6em;\n\theight: 1.2em;\n}\n\n.tc-editor-toolbar button:hover {\n\tbackground-color: &lt;&lt;colour tiddler-controls-foreground-selected&gt;&gt;;\n\tfill: &lt;&lt;colour background&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-editor-toolbar .tc-text-editor-toolbar-more {\n\twhite-space: normal;\n}\n\n.tc-editor-toolbar .tc-text-editor-toolbar-more button {\n\tdisplay: inline-block;\n\tpadding: 3px;\n\twidth: auto;\n}\n\n.tc-editor-toolbar .tc-search-results {\n\tpadding: 0;\n}\n\n/*\n** Adjustments for fluid-fixed mode\n*/\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\n&lt;&lt;if-fluid-fixed text:\"\"\"\n\n\t.tc-story-river {\n\t\tpadding-right: 0;\n\t\tposition: relative;\n\t\twidth: auto;\n\t\tleft: 0;\n\t\tmargin-left: {{$:/themes/tiddlywiki/vanilla/metrics/storyleft}};\n\t\tmargin-right: {{$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth}};\n\t}\n\n\t.tc-tiddler-frame {\n\t\twidth: 100%;\n\t}\n\n\t.tc-sidebar-scrollable {\n\t\tleft: auto;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\twidth: {{$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth}};\n\t}\n\n\tbody.tc-body .tc-storyview-zoomin-tiddler {\n\t\twidth: 100%;\n\t\twidth: calc(100% - 42px);\n\t}\n\n\"\"\" hiddenSidebarText:\"\"\"\n\n\t.tc-story-river {\n\t\tpadding-right: 3em;\n\t\tmargin-right: 0;\n\t}\n\n\tbody.tc-body .tc-storyview-zoomin-tiddler {\n\t\twidth: 100%;\n\t\twidth: calc(100% - 84px);\n\t}\n\n\"\"\"&gt;&gt;\n\n}\n\n/*\n** Toolbar buttons\n*/\n\n.tc-page-controls svg.tc-image-new-button {\n\tfill: &lt;&lt;colour toolbar-new-button&gt;&gt;;\n}\n\n.tc-page-controls svg.tc-image-options-button {\n\tfill: &lt;&lt;colour toolbar-options-button&gt;&gt;;\n}\n\n.tc-page-controls svg.tc-image-save-button {\n\tfill: &lt;&lt;colour toolbar-save-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-info-button {\n\tfill: &lt;&lt;colour toolbar-info-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-edit-button {\n\tfill: &lt;&lt;colour toolbar-edit-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-close-button {\n\tfill: &lt;&lt;colour toolbar-close-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-delete-button {\n\tfill: &lt;&lt;colour toolbar-delete-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-cancel-button {\n\tfill: &lt;&lt;colour toolbar-cancel-button&gt;&gt;;\n}\n\n.tc-tiddler-controls button svg.tc-image-done-button {\n\tfill: &lt;&lt;colour toolbar-done-button&gt;&gt;;\n}\n\n/*\n** Tiddler edit mode\n*/\n\n.tc-tiddler-edit-frame em.tc-edit {\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tfont-style: normal;\n}\n\n.tc-edit-type-dropdown a.tc-tiddlylink-missing {\n\tfont-style: normal;\n}\n\n.tc-type-selector .tc-edit-typeeditor {\n\twidth: auto;\n}\n\n.tc-type-selector-dropdown-wrapper {\n\tdisplay: inline-block;\n}\n\n&lt;&lt;set-type-selector-min-width&gt;&gt;\n\n.tc-edit-tags {\n\tborder: 1px solid &lt;&lt;colour tiddler-editor-border&gt;&gt;;\n\tpadding: 4px 8px 4px 8px;\n}\n\n.tc-edit-add-tag {\n\tdisplay: inline-block;\n}\n\n.tc-edit-add-tag .tc-add-tag-name input {\n\twidth: 50%;\n}\n\n.tc-edit-add-tag .tc-keyboard {\n\tdisplay:inline;\n}\n\n.tc-edit-tags .tc-tag-label {\n\tdisplay: inline-block;\n}\n\n.tc-edit-tags-list {\n\tmargin: 14px 0 14px 0;\n}\n\n.tc-remove-tag-button {\n\tpadding-left: 4px;\n}\n\n.tc-tiddler-preview {\n\toverflow: auto;\n}\n\n.tc-tiddler-preview-preview {\n\tfloat: right;\n\twidth: 49%;\n\tborder: 1px solid &lt;&lt;colour tiddler-editor-border&gt;&gt;;\n\tmargin: 4px 0 3px 3px;\n\tpadding: 3px 3px 3px 3px;\n}\n\n&lt;&lt;if-editor-height-fixed then:\"\"\"\n\n.tc-tiddler-preview-preview {\n\toverflow-y: scroll;\n\theight: {{$:/config/TextEditor/EditorHeight/Height}};\n}\n\n\"\"\"&gt;&gt;\n\n.tc-tiddler-frame .tc-tiddler-preview .tc-edit-texteditor {\n\twidth: 49%;\n}\n\n.tc-tiddler-frame .tc-tiddler-preview canvas.tc-edit-bitmapeditor {\n\tmax-width: 49%;\n}\n\n.tc-edit-fields {\n\twidth: 100%;\n}\n\n.tc-edit-fields.tc-edit-fields-small {\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n}\n\n.tc-edit-fields table, .tc-edit-fields tr, .tc-edit-fields td {\n\tborder: none;\n\tpadding: 4px;\n}\n\n.tc-edit-fields &gt; tbody &gt; .tc-edit-field:nth-child(odd) {\n\tbackground-color: &lt;&lt;colour tiddler-editor-fields-odd&gt;&gt;;\n}\n\n.tc-edit-fields &gt; tbody &gt; .tc-edit-field:nth-child(even) {\n\tbackground-color: &lt;&lt;colour tiddler-editor-fields-even&gt;&gt;;\n}\n\n.tc-edit-field-name {\n\ttext-align: right;\n}\n\n.tc-edit-field-value input {\n\twidth: 100%;\n}\n\n.tc-edit-field-remove {\n}\n\n.tc-edit-field-remove svg {\n\theight: 1em;\n\twidth: 1em;\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tvertical-align: middle;\n}\n\n.tc-edit-field-add-name-wrapper input.tc-edit-texteditor {\n\twidth: auto;\n}\n\n.tc-edit-field-add-name-wrapper {\n\tdisplay: inline-block;\n}\n\n.tc-edit-field-add-value {\n\tdisplay: inline-block;\n}\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\n\t.tc-edit-field-add-value {\n\t\twidth: 35%;\n\t}\n\n}\n\n.tc-edit-field-add-button {\n\tdisplay: inline-block;\n\twidth: 10%;\n}\n\n\n/*\n** Tiddler editor dropzone\n*/\n\n.tc-dropzone-editor {\n\tposition:relative;\n}\n\n.tc-dropzone-editor.tc-dragover .tc-editor-toolbar::after{\n\tz-index: 10000;\n\ttop:0;\n\tleft:0;\n\tright:0;\n\theight: 100%;\n\tbackground: &lt;&lt;colour dropzone-background&gt;&gt;;\n\tcontent: \"&lt;&lt;lingo DropMessage&gt;&gt;\";\n\tpointer-events: none;\n\tposition: absolute;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: &lt;&lt;color background&gt;&gt;;\n\tborder: 4px dashed &lt;&lt;color modal-border&gt;&gt;;\n\tfont-weight: 600;\n\tfont-size: 150%;\n\topacity: 0.8;\n\tcolor: &lt;&lt;color foreground&gt;&gt;;\n}\n\n.tc-editor-importpopup {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.tc-editor-import {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground: &lt;&lt;color pre-background&gt;&gt;;\n\tbox-shadow: 2px 2px 10px &lt;&lt;colour foreground&gt;&gt;;\n\tpadding: 10px;\n\twidth: 96%;\n\tborder: 1px solid &lt;&lt;color tiddler-controls-foreground&gt;&gt;;\n\ttext-align:center;\n}\n\n.tc-editor-import img {\n\tmax-height: 500px;\n}\n\n/*\n** Storyview Classes\n*/\n\n.tc-viewswitcher .tc-image-button {\n\tmargin-right: .3em;\n}\n\n.tc-storyview-zoomin-tiddler {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: 100%;\n}\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\n\t.tc-storyview-zoomin-tiddler {\n\t\twidth: calc(100% - 84px);\n\t}\n\n}\n\n/*\n** Dropdowns\n*/\n\n.tc-btn-dropdown {\n\ttext-align: left;\n}\n\n.tc-btn-dropdown svg, .tc-btn-dropdown img {\n\theight: 1em;\n\twidth: 1em;\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-drop-down-wrapper {\n\tposition: relative;\n}\n\n.tc-drop-down {\n\tmin-width: 380px;\n\tborder: 1px solid &lt;&lt;colour dropdown-border&gt;&gt;;\n\tbackground-color: &lt;&lt;colour dropdown-background&gt;&gt;;\n\tpadding: 7px 0 7px 0;\n\tmargin: 4px 0 0 0;\n\twhite-space: nowrap;\n\ttext-shadow: none;\n\tline-height: 1.4;\n}\n\n.tc-drop-down .tc-drop-down {\n\tmargin-left: 14px;\n}\n\n.tc-drop-down button svg, .tc-drop-down a svg  {\n\tfill: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n.tc-drop-down button:disabled svg {\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-drop-down button.tc-btn-invisible:hover svg {\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-drop-down .tc-drop-down-info {\n\tpadding-left: 14px;\n}\n\n.tc-drop-down p {\n\tpadding: 0 14px 0 14px;\n}\n\n.tc-drop-down svg {\n\twidth: 1em;\n\theight: 1em;\n}\n\n.tc-drop-down img {\n\twidth: 1em;\n}\n\n.tc-drop-down a, .tc-drop-down button {\n\tdisplay: block;\n\tpadding: 0 14px 0 14px;\n\twidth: 100%;\n\ttext-align: left;\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n\tline-height: 1.4;\n}\n\n.tc-drop-down .tc-tab-set .tc-tab-buttons button {\n\tdisplay: inline-block;\n\twidth: auto;\n\tmargin-bottom: 0px;\n\tborder-bottom-left-radius: 0;\n\tborder-bottom-right-radius: 0;\n}\n\n.tc-drop-down .tc-prompt {\n\tpadding: 0 14px;\n}\n\n.tc-drop-down .tc-chooser {\n\tborder: none;\n}\n\n.tc-drop-down .tc-chooser .tc-swatches-horiz {\n\tfont-size: 0.4em;\n\tpadding-left: 1.2em;\n}\n\n.tc-drop-down .tc-file-input-wrapper {\n\twidth: 100%;\n}\n\n.tc-drop-down .tc-file-input-wrapper button {\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n.tc-drop-down a:hover, .tc-drop-down button:hover, .tc-drop-down .tc-file-input-wrapper:hover button {\n\tcolor: &lt;&lt;colour tiddler-link-background&gt;&gt;;\n\tbackground-color: &lt;&lt;colour tiddler-link-foreground&gt;&gt;;\n\ttext-decoration: none;\n}\n\n.tc-drop-down .tc-tab-buttons button {\n\tbackground-color: &lt;&lt;colour dropdown-tab-background&gt;&gt;;\n}\n\n.tc-drop-down .tc-tab-buttons button.tc-tab-selected {\n\tbackground-color: &lt;&lt;colour dropdown-tab-background-selected&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour dropdown-tab-background-selected&gt;&gt;;\n}\n\n.tc-drop-down-bullet {\n\tdisplay: inline-block;\n\twidth: 0.5em;\n}\n\n.tc-drop-down .tc-tab-contents a {\n\tpadding: 0 0.5em 0 0.5em;\n}\n\n.tc-block-dropdown-wrapper {\n\tposition: relative;\n}\n\n.tc-block-dropdown {\n\tposition: absolute;\n\tmin-width: 220px;\n\tborder: 1px solid &lt;&lt;colour dropdown-border&gt;&gt;;\n\tbackground-color: &lt;&lt;colour dropdown-background&gt;&gt;;\n\tpadding: 7px 0;\n\tmargin: 4px 0 0 0;\n\twhite-space: nowrap;\n\tz-index: 1000;\n\ttext-shadow: none;\n}\n\n.tc-block-dropdown.tc-search-drop-down {\n\tmargin-left: -12px;\n}\n\n.tc-block-dropdown a {\n\tdisplay: block;\n\tpadding: 4px 14px 4px 14px;\n}\n\n.tc-block-dropdown.tc-search-drop-down a {\n\tdisplay: block;\n\tpadding: 0px 10px 0px 10px;\n}\n\n.tc-drop-down .tc-dropdown-item-plain,\n.tc-block-dropdown .tc-dropdown-item-plain {\n\tpadding: 4px 14px 4px 7px;\n}\n\n.tc-drop-down .tc-dropdown-item,\n.tc-block-dropdown .tc-dropdown-item {\n\tpadding: 4px 14px 4px 7px;\n\tcolor: &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-block-dropdown a.tc-tiddlylink:hover {\n\tcolor: &lt;&lt;colour tiddler-link-background&gt;&gt;;\n\tbackground-color: &lt;&lt;colour tiddler-link-foreground&gt;&gt;;\n\ttext-decoration: none;\n}\n\n.tc-search-results {\n\tpadding: 0 7px 0 7px;\n}\n\n.tc-image-chooser, .tc-colour-chooser {\n\twhite-space: normal;\n}\n\n.tc-image-chooser a,\n.tc-colour-chooser a {\n\tdisplay: inline-block;\n\tvertical-align: top;\n\ttext-align: center;\n\tposition: relative;\n}\n\n.tc-image-chooser a {\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tpadding: 2px;\n\tmargin: 2px;\n\twidth: 4em;\n\theight: 4em;\n}\n\n.tc-colour-chooser a {\n\tpadding: 3px;\n\twidth: 2em;\n\theight: 2em;\n\tvertical-align: middle;\n}\n\n.tc-image-chooser a:hover,\n.tc-colour-chooser a:hover {\n\tbackground: &lt;&lt;colour primary&gt;&gt;;\n\tpadding: 0px;\n\tborder: 3px solid &lt;&lt;colour primary&gt;&gt;;\n}\n\n.tc-image-chooser a svg,\n.tc-image-chooser a img {\n\tdisplay: inline-block;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 3.5em;\n\tmax-height: 3.5em;\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tmargin: auto;\n}\n\n/*\n** Modals\n*/\n\n.tc-modal-wrapper {\n\tposition: fixed;\n\toverflow: auto;\n\toverflow-y: scroll;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tz-index: 900;\n}\n\n.tc-modal-backdrop {\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tz-index: 1000;\n\tbackground-color: &lt;&lt;colour modal-backdrop&gt;&gt;;\n}\n\n.tc-modal {\n\tz-index: 1100;\n\tbackground-color: &lt;&lt;colour modal-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour modal-border&gt;&gt;;\n}\n\n@media (max-width: 55em) {\n\t.tc-modal {\n\t\tposition: fixed;\n\t\ttop: 1em;\n\t\tleft: 1em;\n\t\tright: 1em;\n\t}\n\n\t.tc-modal-body {\n\t\toverflow-y: auto;\n\t\tmax-height: 400px;\n\t\tmax-height: 60vh;\n\t}\n}\n\n@media (min-width: 55em) {\n\t.tc-modal {\n\t\tposition: fixed;\n\t\ttop: 2em;\n\t\tleft: 25%;\n\t\twidth: 50%;\n\t}\n\n\t.tc-modal-body {\n\t\toverflow-y: auto;\n\t\tmax-height: 400px;\n\t\tmax-height: 60vh;\n\t}\n}\n\n.tc-modal-header {\n\tpadding: 9px 15px;\n\tborder-bottom: 1px solid &lt;&lt;colour modal-header-border&gt;&gt;;\n}\n\n.tc-modal-header h3 {\n\tmargin: 0;\n\tline-height: 30px;\n}\n\n.tc-modal-header img, .tc-modal-header svg {\n\twidth: 1em;\n\theight: 1em;\n}\n\n.tc-modal-body {\n\tpadding: 15px;\n}\n\n.tc-modal-footer {\n\tpadding: 14px 15px 15px;\n\tmargin-bottom: 0;\n\ttext-align: right;\n\tbackground-color: &lt;&lt;colour modal-footer-background&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour modal-footer-border&gt;&gt;;\n}\n\n.tc-modal-prevent-scroll {\n\toverflow: hidden;\n}\n\n/*\n** Centered modals\n*/\n.tc-modal-centered .tc-modal {\n\twidth: auto;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%) !important;\n}\n\n/*\n** Notifications\n*/\n\n.tc-notification {\n\tposition: fixed;\n\ttop: 14px;\n\tright: 42px;\n\tz-index: 1300;\n\tmax-width: 280px;\n\tpadding: 0 14px 0 14px;\n\tbackground-color: &lt;&lt;colour notification-background&gt;&gt;;\n\tborder: 1px solid &lt;&lt;colour notification-border&gt;&gt;;\n}\n\n/*\n** Tabs\n*/\n\n.tc-tab-set.tc-vertical {\n\tdisplay: -webkit-flex;\n\tdisplay: flex;\n}\n\n.tc-tab-buttons {\n\tfont-size: 0.85em;\n\tpadding-top: 1em;\n\tmargin-bottom: -2px;\n}\n\n.tc-tab-buttons.tc-vertical  {\n\tz-index: 100;\n\tdisplay: block;\n\tpadding-top: 14px;\n\tvertical-align: top;\n\ttext-align: right;\n\tmargin-bottom: inherit;\n\tmargin-right: -1px;\n\tmax-width: 33%;\n\t-webkit-flex: 0 0 auto;\n\tflex: 0 0 auto;\n}\n\n.tc-tab-buttons button.tc-tab-selected {\n\tcolor: &lt;&lt;colour tab-foreground-selected&gt;&gt;;\n\tbackground-color: &lt;&lt;colour tab-background-selected&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border-selected&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour tab-border-selected&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour tab-border-selected&gt;&gt;;\n}\n\n.tc-tab-buttons button {\n\tcolor: &lt;&lt;colour tab-foreground&gt;&gt;;\n\tpadding: 3px 5px 3px 5px;\n\tmargin-right: 0.3em;\n\tfont-weight: 300;\n\tborder: none;\n\tbackground: inherit;\n\tbackground-color: &lt;&lt;colour tab-background&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-top-left-radius: 2px;\n\tborder-top-right-radius: 2px;\n\tborder-bottom-left-radius: 0;\n\tborder-bottom-right-radius: 0;\n}\n\n.tc-tab-buttons.tc-vertical button {\n\tdisplay: block;\n\twidth: 100%;\n\tmargin-top: 3px;\n\tmargin-right: 0;\n\ttext-align: right;\n\tbackground-color: &lt;&lt;colour tab-background&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-right: none;\n\tborder-top-left-radius: 2px;\n\tborder-bottom-left-radius: 2px;\n\tborder-top-right-radius: 0;\n\tborder-bottom-right-radius: 0;\n}\n\n.tc-tab-buttons.tc-vertical button.tc-tab-selected {\n\tbackground-color: &lt;&lt;colour tab-background-selected&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour tab-background-selected&gt;&gt;;\n}\n\n.tc-tab-divider {\n\tborder-top: 1px solid &lt;&lt;colour tab-divider&gt;&gt;;\n}\n\n.tc-tab-divider.tc-vertical  {\n\tdisplay: none;\n}\n\n.tc-tab-content {\n\tmargin-top: 14px;\n}\n\n.tc-tab-content.tc-vertical  {\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tpadding-top: 0;\n\tpadding-left: 14px;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\t-webkit-flex: 1 0 70%;\n\tflex: 1 0 70%;\n\toverflow: auto;\n}\n\n.tc-sidebar-lists .tc-tab-buttons {\n\tmargin-bottom: -1px;\n}\n\n.tc-sidebar-lists .tc-tab-buttons button.tc-tab-selected {\n\tbackground-color: &lt;&lt;colour sidebar-tab-background-selected&gt;&gt;;\n\tcolor: &lt;&lt;colour sidebar-tab-foreground-selected&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour sidebar-tab-border-selected&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour sidebar-tab-border-selected&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour sidebar-tab-border-selected&gt;&gt;;\n}\n\n.tc-sidebar-lists .tc-tab-buttons button {\n\tbackground-color: &lt;&lt;colour sidebar-tab-background&gt;&gt;;\n\tcolor: &lt;&lt;colour sidebar-tab-foreground&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour sidebar-tab-border&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour sidebar-tab-border&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour sidebar-tab-border&gt;&gt;;\n}\n\n.tc-sidebar-lists .tc-tab-divider {\n\tborder-top: 1px solid &lt;&lt;colour sidebar-tab-divider&gt;&gt;;\n}\n\n.tc-more-sidebar &gt; .tc-tab-set &gt; .tc-tab-buttons &gt; button {\n\tdisplay: block;\n\twidth: 100%;\n\tbackground-color: &lt;&lt;colour sidebar-tab-background&gt;&gt;;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom: none;\n\tborder-right: 1px solid #ccc;\n\tmargin-bottom: inherit;\n}\n\n.tc-more-sidebar &gt; .tc-tab-set &gt; .tc-tab-buttons &gt; button.tc-tab-selected {\n\tbackground-color: &lt;&lt;colour sidebar-tab-background-selected&gt;&gt;;\n\tborder: none;\n}\n\n/*\n** Manager\n*/\n\n.tc-manager-wrapper {\n\t\n}\n\n.tc-manager-controls {\n\t\n}\n\n.tc-manager-control {\n\tmargin: 0.5em 0;\n}\n\n.tc-manager-list {\n\twidth: 100%;\n\tborder-top: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-right: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-manager-list-item {\n\n}\n\n.tc-manager-list-item-heading {\n\tdisplay: block;\n\twidth: 100%;\n\ttext-align: left;\n\tborder-bottom: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tpadding: 3px;\n}\n\n.tc-manager-list-item-heading-selected {\n\tfont-weight: bold;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tfill: &lt;&lt;colour background&gt;&gt;;\n\tbackground-color: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n.tc-manager-list-item-heading:hover {\n\tbackground: &lt;&lt;colour primary&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-manager-list-item-content {\n\tdisplay: flex;\n}\n\n.tc-manager-list-item-content-sidebar {\n\tflex: 1 0;\n\tbackground: &lt;&lt;colour tiddler-editor-background&gt;&gt;;\n\tborder-right: 0.5em solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-bottom: 0.5em solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\twhite-space: nowrap;\n}\n\n.tc-manager-list-item-content-item-heading {\n\tdisplay: block;\n\twidth: 100%;\n\ttext-align: left;\n\tbackground: &lt;&lt;colour muted-foreground&gt;&gt;;\n\ttext-transform: uppercase;\n\tfont-size: 0.6em;\n\tfont-weight: bold;\n\tpadding: 0.5em 0 0.5em 0;\n}\n\n.tc-manager-list-item-content-item-body {\n\tpadding: 0 0.5em 0 0.5em;\n}\n\n.tc-manager-list-item-content-item-body &gt; pre {\n\tmargin: 0.5em 0 0.5em 0;\n\tborder: none;\n\tbackground: inherit;\n}\n\n.tc-manager-list-item-content-tiddler {\n\tflex: 3 1;\n\tborder-left: 0.5em solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-right: 0.5em solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tborder-bottom: 0.5em solid &lt;&lt;colour muted-foreground&gt;&gt;;\n}\n\n.tc-manager-list-item-content-item-body &gt; table {\n\tborder: none;\n\tpadding: 0;\n\tmargin: 0;\n}\n\n.tc-manager-list-item-content-item-body &gt; table td {\n\tborder: none;\n}\n\n.tc-manager-icon-editor &gt; button {\n\twidth: 100%;\n}\n\n.tc-manager-icon-editor &gt; button &gt; svg,\n.tc-manager-icon-editor &gt; button &gt; button {\n\twidth: 100%;\n\theight: auto;\n}\n\n/*\n** Import table\n*/\n\n.tc-import-table {\n\twidth: 100%;\n}\n\n.tc-import-table svg.tc-image-edit-button {\n\tmax-width: unset;\n}\n\n.tc-import-table th:first-of-type {\n\twidth: 10%;\n}\n\n.tc-import-table th:last-of-type {\n\twidth: 30%;\n}\n\n.tc-import-table .tc-row-disabled {\n\tbackground: &lt;&lt;colour very-muted-foreground&gt;&gt;10;\n\topacity: 0.8;\n}\n\n.tc-import-table .tc-row-warning {\n\tbackground: &lt;&lt;colour diff-delete-background&gt;&gt;50;\n}\n\n/*\n** Alerts\n*/\n\n.tc-alerts {\n\tposition: fixed;\n\ttop: 28px;\n\tleft: 0;\n\tright: 0;\n\tmax-width: 50%;\n\tz-index: 20000;\n}\n\n.tc-alert {\n\tposition: relative;\n\tmargin: 14px;\n\tpadding: 7px;\n\tborder: 1px solid &lt;&lt;colour alert-border&gt;&gt;;\n\tbackground-color: &lt;&lt;colour alert-background&gt;&gt;;\n}\n\n.tc-alert-toolbar {\n\tposition: absolute;\n\ttop: 7px;\n\tright: 7px;\n\tline-height: 0;\n}\n\n.tc-alert-toolbar svg {\n\tfill: &lt;&lt;colour alert-muted-foreground&gt;&gt;;\n}\n\n.tc-alert-subtitle {\n\tcolor: &lt;&lt;colour alert-muted-foreground&gt;&gt;;\n\tfont-weight: bold;\n\tfont-size: 0.8em;\n\tmargin-bottom: 0.5em;\n}\n\n.tc-alert-body &gt; p {\n\tmargin: 0;\n}\n\n.tc-alert-highlight {\n\tcolor: &lt;&lt;colour alert-highlight&gt;&gt;;\n}\n\n@media (min-width: &lt;&lt;sidebarbreakpoint&gt;&gt;) {\n\n\t.tc-static-alert {\n\t\tposition: relative;\n\t}\n\n\t.tc-static-alert-inner {\n\t\tposition: absolute;\n\t\tz-index: 100;\n\t}\n\n}\n\n.tc-static-alert-inner {\n\tpadding: 0 2px 2px 42px;\n\tcolor: &lt;&lt;colour static-alert-foreground&gt;&gt;;\n}\n\n/*\n** Floating drafts list\n*/\n\n.tc-drafts-list {\n\tz-index: 2000;\n\tposition: fixed;\n\tfont-size: 0.8em;\n\tleft: 0;\n\tbottom: 0;\n}\n\n.tc-drafts-list a {\n\tmargin: 0 0.5em;\n\tpadding: 4px 4px;\n\tborder-top-left-radius: 4px;\n\tborder-top-right-radius: 4px;\n\tborder: 1px solid &lt;&lt;colour background&gt;&gt;;\n\tborder-bottom-none;\n\tbackground: &lt;&lt;colour dirty-indicator&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-drafts-list a:hover {\n\ttext-decoration: none;\n\tbackground: &lt;&lt;colour foreground&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-drafts-list a svg {\n\twidth: 1em;\n\theight: 1em;\n\tvertical-align: text-bottom;\n}\n\n/*\n** Control panel\n*/\n\n.tc-control-panel td {\n\tpadding: 4px;\n}\n\n.tc-control-panel table, .tc-control-panel table input, .tc-control-panel table textarea {\n\twidth: 100%;\n}\n\n.tc-plugin-info {\n\tdisplay: flex;\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tfill: &lt;&lt;colour muted-foreground&gt;&gt;;\n\tbackground-color: &lt;&lt;colour background&gt;&gt;;\n\tmargin: 0.5em 0 0.5em 0;\n\tpadding: 4px;\n\talign-items: center;\n}\n\n.tc-plugin-info-sub-plugins .tc-plugin-info {\n\tmargin: 0.5em;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-plugin-info-sub-plugin-indicator {\n\tmargin: -16px 1em 0 2em;\n}\n\n.tc-plugin-info-sub-plugin-indicator button {\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tbackground: &lt;&lt;colour foreground&gt;&gt;;\n\tborder-radius: 8px;\n\tpadding: 2px 7px;\n\tfont-size: 0.75em;\n}\n\n.tc-plugin-info-sub-plugins .tc-plugin-info-dropdown {\n\tmargin-left: 1em;\n\tmargin-right: 1em;\n}\n\n.tc-plugin-info-disabled {\n\tbackground: -webkit-repeating-linear-gradient(45deg, #ff0, #ff0 10px, #eee 10px, #eee 20px);\n\tbackground: repeating-linear-gradient(45deg, #ff0, #ff0 10px, #eee 10px, #eee 20px);\n}\n\n.tc-plugin-info-disabled:hover {\n\tbackground: -webkit-repeating-linear-gradient(45deg, #aa0, #aa0 10px, #888 10px, #888 20px);\n\tbackground: repeating-linear-gradient(45deg, #aa0, #aa0 10px, #888 10px, #888 20px);\n}\n\na.tc-tiddlylink.tc-plugin-info:hover {\n\ttext-decoration: none;\n\tbackground-color: &lt;&lt;colour primary&gt;&gt;;\n\tcolor: &lt;&lt;colour background&gt;&gt;;\n\tfill: &lt;&lt;colour foreground&gt;&gt;;\n}\n\na.tc-tiddlylink.tc-plugin-info:hover &gt; .tc-plugin-info-chunk &gt; svg {\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-plugin-info-chunk {\n\tmargin: 2px;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-toggle {\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\tline-height: 1;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-icon {\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\tline-height: 1;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-description {\n\tflex-grow: 1;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-buttons {\n\tfont-size: 0.8em;\n\tline-height: 1.2;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\ttext-align: right;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-description h1 {\n\tfont-size: 1em;\n\tline-height: 1.2;\n\tmargin: 2px 0 2px 0;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-description h2 {\n\tfont-size: 0.8em;\n\tline-height: 1.2;\n\tmargin: 2px 0 2px 0;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-description div {\n\tfont-size: 0.7em;\n\tline-height: 1.2;\n\tmargin: 2px 0 2px 0;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-toggle img, .tc-plugin-info-chunk.tc-plugin-info-toggle svg {\n\twidth: 1em;\n\theight: 1em;\n}\n\n.tc-plugin-info-chunk.tc-plugin-info-icon img, .tc-plugin-info-chunk.tc-plugin-info-icon svg {\n\twidth: 2em;\n\theight: 2em;\n}\n\n.tc-plugin-info-dropdown {\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n\tmargin-top: -8px;\n}\n\n.tc-plugin-info-dropdown-message {\n\tbackground: &lt;&lt;colour message-background&gt;&gt;;\n\tpadding: 0.5em 1em 0.5em 1em;\n\tfont-weight: bold;\n\tfont-size: 0.8em;\n}\n\n.tc-plugin-info-dropdown-body {\n\tpadding: 1em 1em 0 1em;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n}\n\n.tc-plugin-info-sub-plugins {\n\tpadding: 0.5em;\n\tmargin: 0 1em 1em 1em;\n\tbackground: &lt;&lt;colour notification-background&gt;&gt;;\n}\n\n.tc-install-plugin {\n\tfont-weight: bold;\n\tbackground: green;\n\tcolor: white;\n\tfill: white;\n\tborder-radius: 4px;\n\tpadding: 3px;\n}\n\n.tc-install-plugin.tc-reinstall-downgrade {\n\tbackground: red;\n}\n\n.tc-install-plugin.tc-reinstall {\n\tbackground: blue;\n}\n\n.tc-install-plugin.tc-reinstall-upgrade {\n\tbackground: orange;\n}\n\n.tc-check-list {\n\tline-height: 2em;\n}\n\n.tc-check-list .tc-image-button {\n\theight: 1.5em;\n}\n\n/*\n** Message boxes\n*/\n\n.tc-message-box {\n\tborder: 1px solid &lt;&lt;colour message-border&gt;&gt;;\n\tbackground: &lt;&lt;colour message-background&gt;&gt;;\n\tpadding: 0px 21px 0px 21px;\n\tfont-size: 12px;\n\tline-height: 18px;\n\tcolor: &lt;&lt;colour message-foreground&gt;&gt;;\n}\n\n.tc-message-box svg {\n\twidth: 1em;\n\theight: 1em;\n\tvertical-align: text-bottom;\n}\n\n/*\n** Pictures\n*/\n\n.tc-bordered-image {\n\tborder: 1px solid &lt;&lt;colour muted-foreground&gt;&gt;;\n\tpadding: 5px;\n\tmargin: 5px;\n}\n\n/*\n** Floats\n*/\n\n.tc-float-right {\n\tfloat: right;\n}\n\n/*\n** Chooser\n*/\n\n.tc-chooser {\n\tborder-right: 1px solid &lt;&lt;colour table-header-background&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour table-header-background&gt;&gt;;\n}\n\n\n.tc-chooser-item {\n\tborder-bottom: 1px solid &lt;&lt;colour table-header-background&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour table-header-background&gt;&gt;;\n\tpadding: 2px 4px 2px 14px;\n}\n\n.tc-drop-down .tc-chooser-item {\n\tpadding: 2px;\n}\n\n.tc-chosen,\n.tc-chooser-item:hover {\n\tbackground-color: &lt;&lt;colour table-header-background&gt;&gt;;\n\tborder-color: &lt;&lt;colour table-footer-background&gt;&gt;;\n}\n\n.tc-chosen .tc-tiddlylink {\n\tcursor:default;\n}\n\n.tc-chooser-item .tc-tiddlylink {\n\tdisplay: block;\n\ttext-decoration: none;\n\tbackground-color: transparent;\n}\n\n.tc-chooser-item:hover .tc-tiddlylink:hover {\n\ttext-decoration: none;\n}\n\n.tc-drop-down .tc-chosen .tc-tiddlylink,\n.tc-drop-down .tc-chooser-item .tc-tiddlylink:hover {\n\tcolor: &lt;&lt;colour foreground&gt;&gt;;\n}\n\n.tc-chosen &gt; .tc-tiddlylink:before {\n\tmargin-left: -10px;\n\tposition: relative;\n\tcontent: \"» \";\n}\n\n.tc-chooser-item svg,\n.tc-chooser-item img{\n\twidth: 1em;\n\theight: 1em;\n\tvertical-align: middle;\n}\n\n.tc-language-chooser .tc-image-button img {\n\twidth: 2em;\n\tvertical-align: -0.15em;\n}\n\n/*\n** Palette swatches\n*/\n\n.tc-swatches-horiz {\n}\n\n.tc-swatches-horiz .tc-swatch {\n\tdisplay: inline-block;\n}\n\n.tc-swatch {\n\twidth: 2em;\n\theight: 2em;\n\tmargin: 0.4em;\n\tborder: 1px solid #888;\n}\n\ninput.tc-palette-manager-colour-input {\n\twidth: 100%;\n\tpadding: 0;\n}\n\n/*\n** Table of contents\n*/\n\n.tc-sidebar-lists .tc-table-of-contents {\n\twhite-space: nowrap;\n}\n\n.tc-table-of-contents button {\n\tcolor: &lt;&lt;colour sidebar-foreground&gt;&gt;;\n}\n\n.tc-table-of-contents svg {\n\twidth: 0.7em;\n\theight: 0.7em;\n\tvertical-align: middle;\n\tfill: &lt;&lt;colour sidebar-foreground&gt;&gt;;\n}\n\n.tc-table-of-contents ol {\n\tlist-style-type: none;\n\tpadding-left: 0;\n}\n\n.tc-table-of-contents ol ol {\n\tpadding-left: 1em;\n}\n\n.tc-table-of-contents li {\n\tfont-size: 1.0em;\n\tfont-weight: bold;\n}\n\n.tc-table-of-contents li a {\n\tfont-weight: bold;\n}\n\n.tc-table-of-contents li li {\n\tfont-size: 0.95em;\n\tfont-weight: normal;\n\tline-height: 1.4;\n}\n\n.tc-table-of-contents li li a {\n\tfont-weight: normal;\n}\n\n.tc-table-of-contents li li li {\n\tfont-size: 0.95em;\n\tfont-weight: 200;\n\tline-height: 1.5;\n}\n\n.tc-table-of-contents li li li li {\n\tfont-size: 0.95em;\n\tfont-weight: 200;\n}\n\n.tc-tabbed-table-of-contents {\n\tdisplay: -webkit-flex;\n\tdisplay: flex;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents {\n\tz-index: 100;\n\tdisplay: inline-block;\n\tpadding-left: 1em;\n\tmax-width: 50%;\n\t-webkit-flex: 0 0 auto;\n\tflex: 0 0 auto;\n\tbackground: &lt;&lt;colour tab-background&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-top: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item &gt; a,\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item-selected &gt; a {\n\tdisplay: block;\n\tpadding: 0.12em 1em 0.12em 0.25em;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item &gt; a {\n\tborder-top: 1px solid &lt;&lt;colour tab-background&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-background&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tab-background&gt;&gt;;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item &gt; a:hover {\n\ttext-decoration: none;\n\tborder-top: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tbackground: &lt;&lt;colour tab-border&gt;&gt;;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item-selected &gt; a {\n\tborder-top: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-left: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tborder-bottom: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n\tmargin-right: -1px;\n}\n\n.tc-tabbed-table-of-contents .tc-table-of-contents .toc-item-selected &gt; a:hover {\n\ttext-decoration: none;\n}\n\n.tc-tabbed-table-of-contents .tc-tabbed-table-of-contents-content {\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tpadding-left: 1.5em;\n\tpadding-right: 1.5em;\n\tborder: 1px solid &lt;&lt;colour tab-border&gt;&gt;;\n\t-webkit-flex: 1 0 50%;\n\tflex: 1 0 50%;\n}\n\n/*\n** Dirty indicator\n*/\n\nbody.tc-dirty span.tc-dirty-indicator, body.tc-dirty span.tc-dirty-indicator svg {\n\tfill: &lt;&lt;colour dirty-indicator&gt;&gt;;\n\tcolor: &lt;&lt;colour dirty-indicator&gt;&gt;;\n}\n\n/*\n** File inputs\n*/\n\n.tc-file-input-wrapper {\n\tposition: relative;\n\toverflow: hidden;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n.tc-file-input-wrapper input[type=file] {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tfont-size: 999px;\n\tmax-width: 100%;\n\tmax-height: 100%;\n\tfilter: alpha(opacity=0);\n\topacity: 0;\n\toutline: none;\n\tbackground: white;\n\tcursor: pointer;\n\tdisplay: inline-block;\n}\n\n::-webkit-file-upload-button {\n\tcursor:pointer;\n}\n\n/*\n** Thumbnail macros\n*/\n\n.tc-thumbnail-wrapper {\n\tposition: relative;\n\tdisplay: inline-block;\n\tmargin: 6px;\n\tvertical-align: top;\n}\n\n.tc-thumbnail-right-wrapper {\n\tfloat:right;\n\tmargin: 0.5em 0 0.5em 0.5em;\n}\n\n.tc-thumbnail-image {\n\ttext-align: center;\n\toverflow: hidden;\n\tborder-radius: 3px;\n}\n\n.tc-thumbnail-image svg,\n.tc-thumbnail-image img {\n\tfilter: alpha(opacity=1);\n\topacity: 1;\n\tmin-width: 100%;\n\tmin-height: 100%;\n\tmax-width: 100%;\n}\n\n.tc-thumbnail-wrapper:hover .tc-thumbnail-image svg,\n.tc-thumbnail-wrapper:hover .tc-thumbnail-image img {\n\tfilter: alpha(opacity=0.8);\n\topacity: 0.8;\n}\n\n.tc-thumbnail-background {\n\tposition: absolute;\n\tborder-radius: 3px;\n}\n\n.tc-thumbnail-icon svg,\n.tc-thumbnail-icon img {\n\twidth: 3em;\n\theight: 3em;\n\t&lt;&lt;filter \"drop-shadow(2px 2px 4px rgba(0,0,0,0.3))\"&gt;&gt;\n}\n\n.tc-thumbnail-wrapper:hover .tc-thumbnail-icon svg,\n.tc-thumbnail-wrapper:hover .tc-thumbnail-icon img {\n\tfill: #fff;\n\t&lt;&lt;filter \"drop-shadow(3px 3px 4px rgba(0,0,0,0.6))\"&gt;&gt;\n}\n\n.tc-thumbnail-icon {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tdisplay: -webkit-flex;\n\t-webkit-align-items: center;\n\t-webkit-justify-content: center;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.tc-thumbnail-caption {\n\tposition: absolute;\n\tbackground-color: #777;\n\tcolor: #fff;\n\ttext-align: center;\n\tbottom: 0;\n\twidth: 100%;\n\tfilter: alpha(opacity=0.9);\n\topacity: 0.9;\n\tline-height: 1.4;\n\tborder-bottom-left-radius: 3px;\n\tborder-bottom-right-radius: 3px;\n}\n\n.tc-thumbnail-wrapper:hover .tc-thumbnail-caption {\n\tfilter: alpha(opacity=1);\n\topacity: 1;\n}\n\n/*\n** Diffs\n*/\n\n.tc-diff-equal {\n\tbackground-color: &lt;&lt;colour diff-equal-background&gt;&gt;;\n\tcolor: &lt;&lt;colour diff-equal-foreground&gt;&gt;;\n}\n\n.tc-diff-insert {\n\tbackground-color: &lt;&lt;colour diff-insert-background&gt;&gt;;\n\tcolor: &lt;&lt;colour diff-insert-foreground&gt;&gt;;\n}\n\n.tc-diff-delete {\n\tbackground-color: &lt;&lt;colour diff-delete-background&gt;&gt;;\n\tcolor: &lt;&lt;colour diff-delete-foreground&gt;&gt;;\n}\n\n.tc-diff-invisible {\n\tbackground-color: &lt;&lt;colour diff-invisible-background&gt;&gt;;\n\tcolor: &lt;&lt;colour diff-invisible-foreground&gt;&gt;;\n}\n\n.tc-diff-tiddlers th {\n\ttext-align: right;\n\tbackground: &lt;&lt;colour background&gt;&gt;;\n\tfont-weight: normal;\n\tfont-style: italic;\n}\n\n.tc-diff-tiddlers pre {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: none;\n\tbackground: none;\n}\n\n/*\n** Errors\n*/\n\n.tc-error {\n\tbackground: #f00;\n\tcolor: #fff;\n}\n\n/*\n** Tree macro\n*/\n\n.tc-tree div {\n\tpadding-left: 14px;\n}\n\n.tc-tree ol {\n\tlist-style-type: none;\n\tpadding-left: 0;\n\tmargin-top: 0;\n}\n\n.tc-tree ol ol {\n\tpadding-left: 1em;\n}\n\n.tc-tree button {\n\tcolor: #acacac;\n}\n\n.tc-tree svg {\n\tfill: #acacac;\n}\n\n.tc-tree span svg {\n\twidth: 1em;\n\theight: 1em;\n\tvertical-align: baseline;\n}\n\n.tc-tree li span {\n\tcolor: lightgray;\n}\n\nselect {\n\tcolor: &lt;&lt;colour select-tag-foreground&gt;&gt;;\n\tbackground: &lt;&lt;colour select-tag-background&gt;&gt;;\n}\n\n/*\n** Utility classes for SVG icons\n*/\n\n.tc-fill-background {\n\tfill: &lt;&lt;colour background&gt;&gt;;\n}\n\n/*\n** Flexbox utility classes\n*/\n\n.tc-flex {\n\tdisplay: -webkit-flex;\n\tdisplay: flex;\n}\n\n.tc-flex-column {\n\tflex-direction: column;\n}\n\n.tc-flex-row {\n\tflex-direction: row;\n}\n\n.tc-flex-grow-1 {\n\tflex-grow: 1;\n}\n\n.tc-flex-grow-2 {\n\tflex-grow: 2;\n}\n\n/*\n** Other utility classes\n*/\n\n.tc-tiny-gap {\n\tmargin-left: .25em;\n\tmargin-right: .25em;\n}\n\n.tc-tiny-gap-left {\n\tmargin-left: .25em;\n}\n\n.tc-tiny-gap-right {\n\tmargin-right: .25em;\n}\n\n.tc-small-gap {\n\tmargin-left: .5em;\n\tmargin-right: .5em;\n}\n\n.tc-small-gap-left {\n\tmargin-left: .5em;\n}\n\n.tc-small-gap-right {\n\tmargin-right: .5em;\n}\n\n.tc-big-gap {\n\tmargin-left: 1em;\n\tmargin-right: 1em;\n}\n\n.tc-big-gap-left {\n\tmargin-left: 1em;\n}\n\n.tc-big-gap-right {\n\tmargin-right: 1em;\n}\n\n.tc-word-break {\n\tword-break: break-all;\n}\n"},"$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize":{"title":"$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize","text":"15px"},"$:/themes/tiddlywiki/vanilla/metrics/bodylineheight":{"title":"$:/themes/tiddlywiki/vanilla/metrics/bodylineheight","text":"22px"},"$:/themes/tiddlywiki/vanilla/metrics/fontsize":{"title":"$:/themes/tiddlywiki/vanilla/metrics/fontsize","text":"14px"},"$:/themes/tiddlywiki/vanilla/metrics/lineheight":{"title":"$:/themes/tiddlywiki/vanilla/metrics/lineheight","text":"20px"},"$:/themes/tiddlywiki/vanilla/metrics/storyleft":{"title":"$:/themes/tiddlywiki/vanilla/metrics/storyleft","text":"0px"},"$:/themes/tiddlywiki/vanilla/metrics/storytop":{"title":"$:/themes/tiddlywiki/vanilla/metrics/storytop","text":"0px"},"$:/themes/tiddlywiki/vanilla/metrics/storyright":{"title":"$:/themes/tiddlywiki/vanilla/metrics/storyright","text":"770px"},"$:/themes/tiddlywiki/vanilla/metrics/storywidth":{"title":"$:/themes/tiddlywiki/vanilla/metrics/storywidth","text":"770px"},"$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth":{"title":"$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth","text":"686px"},"$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint":{"title":"$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint","text":"960px"},"$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth":{"title":"$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth","text":"350px"},"$:/themes/tiddlywiki/vanilla/options/stickytitles":{"title":"$:/themes/tiddlywiki/vanilla/options/stickytitles","text":"no"},"$:/themes/tiddlywiki/vanilla/options/sidebarlayout":{"title":"$:/themes/tiddlywiki/vanilla/options/sidebarlayout","text":"fixed-fluid"},"$:/themes/tiddlywiki/vanilla/options/codewrapping":{"title":"$:/themes/tiddlywiki/vanilla/options/codewrapping","text":"pre-wrap"},"$:/themes/tiddlywiki/vanilla/reset":{"title":"$:/themes/tiddlywiki/vanilla/reset","type":"text/plain","text":"/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/**\nUse a more readable tab size (opinionated).\n*/\n\n:root {\n  -moz-tab-size: 4;\n  tab-size: 4;\n}\n\n/**\n1. Correct the line height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n*/\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/*\nSections\n========\n*/\n\n/**\nRemove the margin in all browsers.\n*/\n\nbody {\n  margin: 0;\n}\n\n/**\nImprove consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n*/\n\nbody {\n  font-family:\n    system-ui,\n    -apple-system, /* Firefox supports this but not yet `system-ui` */\n    'Segoe UI',\n    Roboto,\n    Helvetica,\n    Arial,\n    sans-serif,\n    'Apple Color Emoji',\n    'Segoe UI Emoji';\n}\n\n/*\nGrouping content\n================\n*/\n\n/**\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr[title] {\n  text-decoration: underline dotted;\n}\n\n/**\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family:\n    ui-monospace,\n    SFMono-Regular,\n    Consolas,\n    'Liberation Mono',\n    Menlo,\n    monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\nRemove the inheritance of text transform in Edge and Firefox.\n1. Remove the inheritance of text transform in Firefox.\n*/\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n  -webkit-appearance: button;\n}\n\n/**\nRemove the inner border and padding in Firefox.\n*/\n\n::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\nRestore the focus styles unset by the previous rule.\n*/\n\n:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\nRemove the additional ':invalid' styles in Firefox.\nSee: https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n  padding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n"},"$:/themes/tiddlywiki/vanilla/settings/fontfamily":{"title":"$:/themes/tiddlywiki/vanilla/settings/fontfamily","text":"system-ui, -apple-system, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\""},"$:/themes/tiddlywiki/vanilla/settings/codefontfamily":{"title":"$:/themes/tiddlywiki/vanilla/settings/codefontfamily","text":"\"SFMono-Regular\",Consolas,\"Liberation Mono\",Menlo,Courier,monospace"},"$:/themes/tiddlywiki/vanilla/settings/backgroundimageattachment":{"title":"$:/themes/tiddlywiki/vanilla/settings/backgroundimageattachment","text":"fixed"},"$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize":{"title":"$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize","text":"auto"},"$:/themes/tiddlywiki/vanilla/sticky":{"title":"$:/themes/tiddlywiki/vanilla/sticky","text":"&lt;$reveal state=\"$:/themes/tiddlywiki/vanilla/options/stickytitles\" type=\"match\" text=\"yes\"&gt;\n``\n.tc-tiddler-title {\n\tposition: -webkit-sticky;\n\tposition: -moz-sticky;\n\tposition: -o-sticky;\n\tposition: -ms-sticky;\n\tposition: sticky;\n\ttop: 0px;\n\tbackground: ``&lt;&lt;colour tiddler-background&gt;&gt;``;\n\tz-index: 500;\n}\n\n``\n&lt;$list filter=\"[range[100]]\"&gt;\n`.tc-story-river .tc-tiddler-frame:nth-child(100n+`&lt;$text text=&lt;&lt;currentTiddler&gt;&gt;/&gt;`) {\nz-index: `&lt;$text text={{{ [[200]subtract&lt;currentTiddler&gt;] }}}/&gt;`;\n}\n`\n&lt;/$list&gt;\n&lt;/$reveal&gt;\n"},"$:/themes/tiddlywiki/vanilla/themetweaks":{"title":"$:/themes/tiddlywiki/vanilla/themetweaks","tags":"$:/tags/ControlPanel/Appearance","caption":"{{$:/language/ThemeTweaks/ThemeTweaks}}","text":"\\define lingo-base() $:/language/ThemeTweaks/\n\n\\define replacement-text()\n[img[$(imageTitle)$]]\n\\end\n\n\\define backgroundimage-dropdown()\n&lt;div class=\"tc-drop-down-wrapper\"&gt;\n&lt;$button popup=&lt;&lt;qualify \"$:/state/popup/themetweaks/backgroundimage\"&gt;&gt; class=\"tc-btn-invisible tc-btn-dropdown\"&gt;{{$:/core/images/down-arrow}}&lt;/$button&gt;\n&lt;$reveal state=&lt;&lt;qualify \"$:/state/popup/themetweaks/backgroundimage\"&gt;&gt; type=\"popup\" position=\"belowleft\" text=\"\" default=\"\"&gt;\n&lt;div class=\"tc-drop-down\"&gt;\n&lt;$macrocall $name=\"image-picker\" actions=\"\"\"\n\n&lt;$action-setfield\n\t$tiddler=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimage\"\n\t$value=&lt;&lt;imageTitle&gt;&gt;\n/&gt;\n\n\"\"\"/&gt;\n&lt;/div&gt;\n&lt;/$reveal&gt;\n&lt;/div&gt;\n\\end\n\n\\define backgroundimageattachment-dropdown()\n&lt;$select tiddler=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimageattachment\" default=\"scroll\"&gt;\n&lt;option value=\"scroll\"&gt;&lt;&lt;lingo Settings/BackgroundImageAttachment/Scroll&gt;&gt;&lt;/option&gt;\n&lt;option value=\"fixed\"&gt;&lt;&lt;lingo Settings/BackgroundImageAttachment/Fixed&gt;&gt;&lt;/option&gt;\n&lt;/$select&gt;\n\\end\n\n\\define backgroundimagesize-dropdown()\n&lt;$select tiddler=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize\" default=\"scroll\"&gt;\n&lt;option value=\"auto\"&gt;&lt;&lt;lingo Settings/BackgroundImageSize/Auto&gt;&gt;&lt;/option&gt;\n&lt;option value=\"cover\"&gt;&lt;&lt;lingo Settings/BackgroundImageSize/Cover&gt;&gt;&lt;/option&gt;\n&lt;option value=\"contain\"&gt;&lt;&lt;lingo Settings/BackgroundImageSize/Contain&gt;&gt;&lt;/option&gt;\n&lt;/$select&gt;\n\\end\n\n&lt;&lt;lingo ThemeTweaks/Hint&gt;&gt;\n\n! &lt;&lt;lingo Options&gt;&gt;\n\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\"&gt;&lt;&lt;lingo Options/SidebarLayout&gt;&gt;&lt;/$link&gt; |&lt;$select tiddler=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\"&gt;&lt;option value=\"fixed-fluid\"&gt;&lt;&lt;lingo Options/SidebarLayout/Fixed-Fluid&gt;&gt;&lt;/option&gt;&lt;option value=\"fluid-fixed\"&gt;&lt;&lt;lingo Options/SidebarLayout/Fluid-Fixed&gt;&gt;&lt;/option&gt;&lt;/$select&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/options/stickytitles\"&gt;&lt;&lt;lingo Options/StickyTitles&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Options/StickyTitles/Hint&gt;&gt;// |&lt;$select tiddler=\"$:/themes/tiddlywiki/vanilla/options/stickytitles\"&gt;&lt;option value=\"no\"&gt;{{$:/language/No}}&lt;/option&gt;&lt;option value=\"yes\"&gt;{{$:/language/Yes}}&lt;/option&gt;&lt;/$select&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/options/codewrapping\"&gt;&lt;&lt;lingo Options/CodeWrapping&gt;&gt;&lt;/$link&gt; |&lt;$select tiddler=\"$:/themes/tiddlywiki/vanilla/options/codewrapping\"&gt;&lt;option value=\"pre\"&gt;{{$:/language/No}}&lt;/option&gt;&lt;option value=\"pre-wrap\"&gt;{{$:/language/Yes}}&lt;/option&gt;&lt;/$select&gt; |\n\n! &lt;&lt;lingo Settings&gt;&gt;\n\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/fontfamily\"&gt;&lt;&lt;lingo Settings/FontFamily&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/settings/fontfamily\" default=\"\" tag=\"input\"/&gt; | |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/codefontfamily\"&gt;&lt;&lt;lingo Settings/CodeFontFamily&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/settings/codefontfamily\" default=\"\" tag=\"input\"/&gt; | |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/editorfontfamily\"&gt;&lt;&lt;lingo Settings/EditorFontFamily&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/settings/editorfontfamily\" default=\"\" tag=\"input\"/&gt; | |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimage\"&gt;&lt;&lt;lingo Settings/BackgroundImage&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimage\" default=\"\" tag=\"input\"/&gt; |&lt;&lt;backgroundimage-dropdown&gt;&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimageattachment\"&gt;&lt;&lt;lingo Settings/BackgroundImageAttachment&gt;&gt;&lt;/$link&gt; |&lt;&lt;backgroundimageattachment-dropdown&gt;&gt; | |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/settings/backgroundimagesize\"&gt;&lt;&lt;lingo Settings/BackgroundImageSize&gt;&gt;&lt;/$link&gt; |&lt;&lt;backgroundimagesize-dropdown&gt;&gt; | |\n\n! &lt;&lt;lingo Metrics&gt;&gt;\n\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/fontsize\"&gt;&lt;&lt;lingo Metrics/FontSize&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/fontsize\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/lineheight\"&gt;&lt;&lt;lingo Metrics/LineHeight&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/lineheight\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize\"&gt;&lt;&lt;lingo Metrics/BodyFontSize&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/bodylineheight\"&gt;&lt;&lt;lingo Metrics/BodyLineHeight&gt;&gt;&lt;/$link&gt; |&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/bodylineheight\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/storyleft\"&gt;&lt;&lt;lingo Metrics/StoryLeft&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/StoryLeft/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/storyleft\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/storytop\"&gt;&lt;&lt;lingo Metrics/StoryTop&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/StoryTop/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/storytop\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/storyright\"&gt;&lt;&lt;lingo Metrics/StoryRight&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/StoryRight/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/storyright\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/storywidth\"&gt;&lt;&lt;lingo Metrics/StoryWidth&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/StoryWidth/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/storywidth\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth\"&gt;&lt;&lt;lingo Metrics/TiddlerWidth&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/TiddlerWidth/Hint&gt;&gt;//&lt;br&gt; |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/tiddlerwidth\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint\"&gt;&lt;&lt;lingo Metrics/SidebarBreakpoint&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/SidebarBreakpoint/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint\" default=\"\" tag=\"input\"/&gt; |\n|&lt;$link to=\"$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth\"&gt;&lt;&lt;lingo Metrics/SidebarWidth&gt;&gt;&lt;/$link&gt;&lt;br&gt;//&lt;&lt;lingo Metrics/SidebarWidth/Hint&gt;&gt;// |^&lt;$edit-text tiddler=\"$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth\" default=\"\" tag=\"input\"/&gt; |\n"}}}</pre>
</div>
<div title="$:/view">
<pre>classic</pre>
</div>
<div bag="default" created="20210702005532140" modified="20210702010138172" revision="0" tags="Journal" title="2021年07月02日" tmap.id="69baa459-9426-44b8-aa9b-880834dbb7fc" type="text/vnd.tiddlywiki">
<pre>* 学习七一讲话
*徐汇下午
*熟悉tiddlywiki

&lt;div style="font-size:0.7em;text-align:center;margin:3em auto;"&gt;
&lt;a href="https://groups.google.com/group/TiddlyWiki" class="tc-btn-big-green" style="border-radius:4px;background-color:#FF8C19;" target="_blank" rel="noopener noreferrer"&gt;
{{$:/core/images/help}} Forum
&lt;/a&gt;</pre>
</div>
<div tags="日志" title="2021年07月06日">
<pre>* 市委党校调整座位、主持稿、听颜晓峰教授解读“七一”重要讲话精神
</pre>
</div>
<div tags="" title="20世纪的教训">
<pre>20世纪是一个希望和失望交织的时代，也是一个成就辉煌又灾难深重的时代。两次世界大战发生在20世纪，历史上大规模血腥惨剧并不罕见，但最不可思议的是，20世纪的灾难完全出乎意料。

 1900年，当时欧洲已经享受了快100年的和平。科学技术飞速发展，经典物理体系基本完善，演化论逐渐为大众接受，化学理论成熟，人们开始享受化学工业发展带来的便利。特别是电磁理论的发现和运用，人们进入了电气化时代，电灯、电报、无线电通讯等等，带来了人们难以想象的便利。

工业化扩大了贫富差距，产生了新的矛盾和冲突，但也出现了新的思想和新的政治运动。现代社会可以也诞生了，思想家对政治的合理安排提出新的规划。

自然科学的发展改造了物质世界，人们就相信社会科学能够改善社会现实，解决政治矛盾。就像1900年，法国《费加罗报》的元旦社论中说，“20世纪带给我们的将是科学进入社会和私人生活。科学将赋予我们行为的准则。它将是一种光辉灿烂的前景……我们希望哺育了我们的19世纪，把那愚蠢的仇恨、无意义的争斗和可笑的诽谤统统带走，抛进世纪的无底深渊！”——西方主流舆论普遍相信了，人类已经开始了一个崭新的现代文明，古代的野蛮杀戮一去不复返了，矇昧落后的弊端会被逐渐消除。

20世纪的灾难时文明时代的野蛮，是理性时代的疯狂。几位思想家认为，20世纪的危机不是历史偶然的产物，而是内在于现代化思想之中。德国纳粹主义、苏联社会主义、英美资本主义，是3种不同的现代性规划，它们都有各自的危机与困境，但都与现代理性主义的社会构想密切相关。

思想观念和现实有什么关系？

人们常说，别跟我谈思想，讲点现实。

好像思想和现实不相干，现实是实在的，是看得见、摸得着、可以被感知的真实存在，而思想是脱离现实的、抽象的、看不见摸不着的存在，甚至是虚无缥缈的东西。

这是完全错误的认识。

我们谈论现实，最重要的一点，就是要去分析现实的利益。而利益就是对我们重要的东西，重要这件事，是需要解释的，必须要有一个理念框架，我们才能界定，什么事重要的。

比如，恋人出轨，我们其实毫发无伤，但为什么会觉得自己的利益被损害了？因为对方违背了”爱情必须有排他性的忠诚“这一观念。”没有永远的朋友，只有永远的利益“这句话就是一句空话，它没有解释什么是利益。

再比如，领土争端，为什么国家会为了一小块毫无价值的土地，投入大量的财政、军事资源，因为国家领土是国家的核心利益，那为什么人员不是核心利益了，这也是由国家主权这种观念决定的。

如果看不到人们的身份、认知、道德和价值等等观念，其实是所谓”现实利益“本身的构成要素，就会陷入一种低级的现实主义思维，表面上很务实，实际上丧失了真正的现实感。

思想观念并不脱离社会现实，而是内在于社会现实，如果离开了思想，我们根本无法真正理解现实。

德国诗人海涅说，不要轻视观念的影响力，教授在沉静的研究中所培养出来的哲学观念，可能会摧毁一个文明。赛亚·柏林加了一句，如果思想能够产生如此致命的力量，那么也只有通过其他思想家的努力，才能来化解。

加餐学习：
 
1. 大众的生活实践，并不直接遵循“理论化的思想”，而是依据社会想象。
2. 理论家的思想对社会想象的构成和变化有影响
3. 一种理论是否能够转变为社会想象，并不是看这个理论有多高深多高明，而是取决于它是否能够契合人们生活的实践条件，是否能有效解释他们的生活实践。
</pre>
</div>
<div tags="哲学 人物" title="鲍曼">
<pre>英国社会学家，2017年刚刚去世。1998年出版《现代性与大屠杀》，他在书中提出：大屠杀是现代性本身固有的一种潜在可能，它只在现代文明中才可能实现。

之前对于大屠杀有两种最流行的理论。一是变态论，认为德国出了一群丧心病狂的疯子，造成这场暴行；二是仇恨论，认为大屠杀之所以会发生，因为德国人和犹太人之间有着特殊的深仇大恨。

鲍曼认为，两种说法都站不住脚。纳粹军官日常生活中，也有非常人性的一面，并不是杀人狂；欧洲人对于犹太人的歧视又来已久，德国相对来说对犹太人还是友善的，很多犹太人也把德国看成自己的祖国。这两种反思都发大屠杀看成例外，逃避了反思，其实是一种自我安慰。

实际上，正是现代性内部的一些本质要素——理性和理性化——才让大屠杀变为了现实。听起来不可思议，为什么？

首先，正是机器般理性的现代官僚制，实现了大屠杀这个非理性暴行。官僚制精密规划，层级运作，不仅会损害个人自由，还会导致道德冷漠、导致逃避责任。在这台机器中，每个人作为零件，丧失了对于总体目标的责任感和道德感。

大屠杀就想一个工业流水线，犹太人是原材料，产品是死亡。有人负责分类犹太人，有人负责运送，有人负责后勤，有人负责排期。这种过程中，人很容易丧失面对鲜活生命的同情心和道德感。每个人制是完成了自己的一部分任务，却造成了大屠杀。

其次是现代科学主义，提供了大屠杀的理念支持——园艺文化。各种庭院修建的整整齐齐，同理社会秩序也要整齐划一，清晰优美。这种文化观念下，犹太人成为了杂质，雅利安人是高贵优秀的种族，他们无法去容忍异物——种族歧视就这样披上了理性外衣。先是设立犹太人生活区，再是把犹太人集中起来，流放到边缘地区，最后就是终极解决方案，屠杀和灭绝。


600万犹太人被屠杀，但他们并没有反抗，甚至还有些犹太人参与屠杀。鲍曼认为，这种合作是一种经由策略而实现的，是纳粹对受害者理性计算心理的利用。大屠杀没有公然宣布，否则立即回爆发大规模抵抗。直到最后一刻，犹太人还以为自己有活下来的可能，不知道这是一场种族灭绝。纳粹理由这种求生希望，消解了反抗的可能。比如在一开始说，特殊人才可以留下，很多人就尝试证明自己是特殊人才，有了可能的求生渠道，大规模的反抗就很难组织起来。

大屠杀的很多关键因素，都内在地蕴藏在现代理性之中。这场灾难就是现代理性如何变得与道德人性完全背道而驰的力证。并不是说，现代性一定会导致大屠杀，大屠杀就是现代社会的必然。而是要做好正视和警惕灾难发生的可能性。

鲍曼认为，要防范大屠杀这种灾难，关键在于要坚守一种不可让步的、无条件的道德感，保持对他人的道德感知。

而现代社会的底层机制就存在着一个非个人化，或非人格化的特性。这就是现代社会面对的巨大挑战。












</pre>
</div>
<div tags="思维偏差" title="伯克森悖论">
<pre>Berkson's Paradox

真实的经验，不一定能推出正确的结论。

观测两个指标，常常会把这两个指标看成负相关。

比如，长得帅和性格好、学习用功程度和家境、智商和表达能力、高分和低能....

平庸的寒门子弟、遵纪守法的富人、没有英雄壮举的屠狗辈、忠诚的读书人和安享晚年的好心人，他们的新闻阈值太低，他们的事迹没有四海传扬。你必须把这些人都统计上，才能得出正确的结论。</pre>
</div>
<div tags="定义 和菜头" title="答案">
<pre>__名词，指追寻真知途中的临时停靠站。__


&lt;&lt;&lt;
Q:天空为什么是蓝色的？
&lt;&lt;&lt;

这个问题可以轻易''问垮''一个成年人。课本上写，因为大气散射，蓝光波长焦段，更容易被散射。

Q:那为什么散射？为什么散射成蓝色？

问到这里，90%的成年人已经无法回答。答案是，散射是光遇见空气中的灰尘等杂质，发生方向改变的现象，因为蓝色光的波长短，遇到非常小的空气分子即会发生散射。

所谓回答，其实是用一个概念去替换另一个概念。然而，那个问题并不是答案，那个概念之下，很少有人能够持续深入下去，因为他们的知识和经验不足以支撑这样的探索。针对一个问题刨根问底地追问为什么，可以把一个成年人逼疯。

所谓答案，只不过是在不同思考程度上的临时成果。

每一个新答案，意味着我们在追求真知的路途中前进了一步。</pre>
</div>
<div tags="" title="当代思想">
<pre>福山和亨廷顿都没有料到，今天我们遇到的一个主要冲突，不是发生在国家之间，而是发生在国家内部。同一个国家，在很多大问题上，都存在着非常对立的两极立场，刘擎称之为“精神内战”。

这有着经济和文化的两方面原因。经济上，全球化缩小了国家之间的贫富差距，但在大部分国家内部，阶层不平等加剧了。文化上，大量人口跨国界流动，导致了各国本土传统 价值、生活方式和文化认同收到了全球主义的强烈冲击。

所以21世界的新一波全球化，造成了一条深刻的“断层线”，它不是出现在国家之间，而是出现在每个国家的内部，出现在全球化的受益者和因为全球化而受挫的人之间。这就让西方国家的自由民主政治陷入了严重困境。

有些西方学者认为，人们谈论的所谓“自由国际秩序”其实并不是一个真正的“全球秩序”，而只是一个区域秩序。因为它是在二战之后，由美国主导建立的，北美和西欧国家之间的秩序，其实应该叫“大西洋秩序”。这种秩序的特征是，这些国家都采用自由主义民主和自由市场经济。一些西方政治家和思想家相信这种秩序可以不断扩展，最终覆盖全球。因为一些事件，比如四小龙崛起，苏联解体等等都给了自由秩序扩展的信心。

但最近20几年，这种秩序的扩张，在带动新兴国家发展的同时，也引起了广泛的不满与冲突。亨廷顿有一点是对的，这个“自由秩序”并不只是单纯的制度，它其实带有自己的价值和规范，在扩张的过程中，会深刻地介入到那些非西方国家的内部秩序中，结果就引发了文化、政治和经济上的各种反弹。

越来越多的自由派学者开始反思，比如英国政治理论家约翰格雷就说，向外输出西方体制的企图，是一种“愚蠢的进军”。那有人就说，我不仅君了，搞本国优先吧。

你总要和其他国家打交道，要打交道，就需要有秩序。没有秩序，才是最危险的。现在似乎所有全球秩序都在衰落，美国退守、英国脱欧、WTO失灵、贸易争端加剧，各种分离主义、反移民和排外浪潮汹涌，曾经的“宏大历史故事”似乎消失了，人们都在讲诉各自不同的小故事。当下，似乎只有中国仍然在积极推进全球化，畅想人们的共同命运。

地球城，你逃的出去吗？

出现分离，恰恰是因为我们正在试图靠的更近。所以分离并不是“全新的方向”，而是可能只是因为靠近而产生的阵痛。

那我们为什么要走到一起？

人类历史恰恰是一部”因为冲突而汇聚到一起“的故事，更确切的说，是经过冲突、达到共通、最终汇聚到一起。而且有时候，我们面临共同的威胁和挑战，极端主义，新技术，全球疫情等等。即使在负面意义上，人类也分享着人类的共同命运。我们未必是因为彼此喜欢才走到一起，也有可能因为我们没法单独应对共同的问题，才需要在竞争中展开合作。

合久必分只是一时，分久必合才是不变的大趋势。

“人类因为理性而伟大，因为知道理性的局限而成熟”



“马克斯·韦伯、弗里德里希·尼采、西格蒙德·弗洛伊德、让-保罗·萨特、齐格蒙·鲍曼、汉娜·阿伦特、卡尔·波普尔、弗里德里希·哈耶克、以赛亚·伯林、赫伯特·马尔库塞、约翰·罗尔斯、罗伯特·诺齐克、罗纳德·德沃金、迈克尔·桑德尔、迈克尔·沃尔泽、查尔斯·泰勒、尤尔根·哈贝马斯、塞缪尔·亨廷顿、弗朗西斯·福山”
</pre>
</div>
<div tags="人物 哲学" title="德沃金">
<pre>现代社会的发展趋势就是，平等的压力越来越强。现在，公民政治权利的平等基本解决了，随之另一个平等——社会经济领域的平等问题越来越突出。


社会经济领域的平等是特别困难的难题，因为不要说实践上，就是理论上都没有一个比较理想的一个的规范原则。

搞平均主义，其实是损害了平等。

德沃金在西方学术界的著名辩论“什么的平等”中，引人注目。它和罗尔斯、诺齐克都是好朋友。





他问，我们研究了这么多平等，但我们追求平等到底是为了什么呢？他给出的答案是，就是为了对每个人好嘛！更确切地说，要一视同仁地对每个人好。

他提出两个原则：
	1. 平等的尊重。就是要把每个人当作人，尊重每个人的自主性。有人刷抖音，有人思考哲学，并不能搞歧视，甚至引导平庸的人追求高尚。因为对于不同的生活理想和方式，只要本人自愿而且不伤害他人，那国家就不能干涉，也不应该偏袒，应该一视同仁，保持中立。这就是德沃金说的自由主义的“国家中立性原则”。
	2. 平等的关怀。平等的尊重还不够，尊重还需要积极，为实现各种不同的生活理想，提供平等的资源。平等的关怀，不是简单的给所有人“平等的待遇”而是要把每个人当作平等的人来对待，考虑处境不同造成的需求不同。对于资源的需求，有些是出于自己选择的偏好，比如喜欢大房子，有些是环境所迫，比如需要口罩。自愿选择造成的差异，应该由本人负责，处境造成的差别，应该弥补。

敏于志向，钝于禀赋。社会对个人的奖赏或惩罚，应该是针对个人的选择，或者说个人的志向，而不是针对那些个人无法选择的天赋因素。

罗尔斯没法回答，最不利者的困境是怎么造成的，德沃金可以回答，是他的志向，他的选择导致的。自己的选择，应该自己担责。

德沃金自认为，平等的尊重和关怀原则，同时回应了现代人对于自由、平等和多元价值的诉求。
















</pre>
</div>
<div title="定义">
<pre>[[士]]

[[答案]]</pre>
</div>
<div created="20210707070840386" modified="20210707075200906" title="发展中国家的政治分析">
<pre>!01 共同体的建立

为什么很多第三国家发展不起来？

一个重要原因是，他们经常陷入暴力冲突。而暴力冲突的原因呢？他们缺少一个具有政治整合能力的国家。

西方语境政治传统最具代表性的观点是，“国家是必要的恶”，因此他们的关注点在于，国家是否民主，是否侵害个人自由。然而，这套观点并不适合第三世界国家。

第三世界国家面临三大问题：
	1. 缺少国家传统：第三世界社会都缺少帝国统治、王国统治的传统，其国名、国号都是欧洲殖民者强加的。比如尼日利亚在1914年前不存在，是英国人1914年决定将南北两块殖民地合并，尼日利亚才出现。而欧洲现代国家的兴起，都是经历了“国家制造战争，战争塑造国家”的过程。第三世界国家独立时，他们的军队、官僚、和税收系统没有充分发育起来，国家构建没有完成。
	2. 经济文化落后：穷，识字率低，政治后果是，无法建立现代化军事系统和官僚系统。
	3. 社会结构复杂：不同群体之间政治分歧大，沟通交易成本高，形成统一的国家认同就难。

20世纪80年代，新兴的国家理论才把现代国家构建、政治认同塑造和国家能力提升作为关键的政治任务。爱因斯坦说，正式理论决定了你能看到什么。

得到笔记：国家只有它能稳定存在了，才能去评判它，你不能去评价一个不存在的事物。从这一点上看，第三世界很多国家建立的政权没有共同认知作为基础，不能提供稳定的秩序，它们不算稳定存在的国家。这些国家要解决的问题是，让国家政权稳定，让社会秩序井然。很不幸，历史上他们被殖民者统治数百年，殖民者退出后，内部也没有一些坚强战斗群体统一国家。最差的秩序都好过没有秩序。我觉得他们没法通过战争立国了，但可以学习一下统一战线，团结起来，振兴祖国。

!02 蒙博托陷阱

第三世界发展不起来，首要任务不是搞经济建设，搞发展，而是先建立一个有效的政治共同体。组织上，完成看得见的国家建构，观念上，塑造不大看得见的国家认同。【组织宣传是一家】

之后，才谈发展。

蒙博托是刚果民主共和国的政治强人，统治该国30年，导致刚果建国50多年，人均GDP依然不到500美元。

蒙博托统治的三个特点：
	1. 依靠裙带关系统治。
	2. 疯狂榨取统治租金。以裙带关系为基础的分赃网络，国际媒体估算，至少50亿美元。
	3. 国家长期陷入贫穷与停滞。

任何人类群体，包括国家，首先要解决统治问题。对于最落后的国家，最自然的统治就是个人统治，但一个人无法统治国家，只能使用官僚系统。落后国家缺少文官人力资源，就需要基于私人关系寻求政治结盟者与支持者。

古代隋唐时期兴起科举，目的也是中央集权国家试图削弱世家大族的影响，建立一个符合自己原则的官僚制系统；1224年，神圣罗马帝国腓特烈二世创办那不勒斯大学，也是如此。

蒙博托的政治结构，相当于法国“包税人模式”，国王向包税人收税，包税人可以胡作非为。

蒙博托陷阱的关键原因，不在于单个统治者的个人品质，而在于塑造这种统治模式的社会条件。政治改善是一个复杂的系统工程，国家建设、经济发展、官僚制发育以及精英阶层的再造，都是其中应有之部分。

得到笔记：

蒙博托陷阱，并不只是他一个人造成的，而是当时条件不允许，只能使用可信的裙带关系作为政治结盟者，相应的回报就是非正式的权力和利益。

想起了我们国家立国，先在农村好好发育起来了一整套完整的军队、税收和官僚系统，然后接受接收国家，无论经历什么风雨，基本盘都稳固。而蒙博托靠政变上台，没有劈霜露，斩荆棘，筚路蓝缕，艰苦创业，得来的政权也就基础不牢，地动山摇。

!03 威权主义政体跳出蒙博托陷阱

美国政治经济学家道格拉斯·诺斯问，为什么是英国而非法国率先完成工业革命？——自问自答：因为英国产权保护得好，创新才有动力。而只有政治权力受到约束，产权才能受到有效保护。英国恰恰就有一段时间，1215年到1688年形成的对国王权力约束的法律。

然而，发展中国家，在发展早期，很难像英国那样发展出一套约束权力的制度，权力掌握在一小部分人手里，这种威权主义整体不仅没有陷入蒙博托陷阱，反而实现了经济高速增长，可以称为“威权主义的经济奇迹”。

比如佛朗哥时期的西班牙，朴正熙时代的韩国创造“汉江奇迹”，皮诺切特时期的智利，李光耀时期的新加坡。他们有这些共同点：

	1. 统治者具有强烈的发展意愿；
	2. 市场主导经济；
	3. 致力于发展一套制度程度化高的行政与法律体系。

学术界有学者主张，发展型威权主义要比民主政体，更有利于落后国家的经济发展。原因是，民主政体下民众与精英的政治斗争，会导致政策高度福利化，再分配斗争激烈化、甚至是不同集团暴力冲突，这样经济增长就没希望了。威权主义强调政治整合，避免出现严重的内部纷争和冲突。

也有学者认为，这种发展并不稳定，威权体制下，一切都依赖于统治者的政治自觉。新加坡在李光耀统治后，强化了法治，继续维持了更长时期的增长。

在政治上，要打破标签化认知，一种制度模式能否促进经济增长，关键不在于它是民主政体还是威权政体，而在于它是什么样的民主政体或什么样的威权政体。威权国家既可能陷入蒙博托陷阱，也可以创造经济奇迹。

得到笔记 ：
人，是一切的原因。卓克说“不要期待明君”就是一句过于绝对化的话，总要先有人站出来，带领大家，如果后面他变了，也需要有人出来顶替他。卓克的观点是从个体视角出发，每个人当然要自立自强，但是群体里面，危机来临时，真的要呼唤英雄，不然每个人都为自己考虑，那就是一起死。

威权政体，就是有人带着大家一起发展。如果发展的好，大家就跟着他，如果发展不好，大家就不跟他，如果他拿枪逼着我们跟，总会有新的英雄出来，带领大家反抗的。这就是基辛格所说，中国人总是被他们民族最勇敢的人保护得很好。

在中国，由于缺乏政治常识，很多人都觉得民主是一个好词，其实民主不一定能带来经济发展，有道德的威权政府，才是最好的选择。

!04 如何向民主转型？

约束权力的方法（第二章）：
	1. 法治
	2. 分权
	3. 选举和投票
	4. 司法审查

民主转型不是简单的——旧体制衰败、新体制建立、新体制巩固——而是一项系统工程。

泰国这20年就不断重复着，民主选举——败选阵营抗争——军方干政，这样一个循环。而阿拉伯之春，埃及的穆巴拉克倒台，民主选举上台了正义与自由党，想修宪，将埃及变成宗教礼法国家，又被支持世俗派的军方推下台，最后塞西将军成为了新统治者，又回到了穆巴拉克强人政治。

三个错误假设：
	1. 转型，就是制宪改制。政治是一个系统工程，无论制宪，还是其他制度，都只是其中一部分。比如魏玛共和国，制定了宪法，但其他的议会、政党、军队都是继承下来的，其他配套条件没跟进，转型就很难成功。
	2. 民主宪法一旦制定，大家就一定会遵守。历史上，新宪法通过后，很快被撕毁的故事比比皆是。比如《中华民国临时约法》、《中华民国约法》很快被北洋集团和国民党违背，遇到纷争，不是选择政治解决，而是诉诸武力。在转型期，政治家遵守宪法并不是常态，有利才遵守，不利就违背。
	3. 新制度一定会比旧制度效果好。稳定的秩序非常重要，新制度有时候提供不了。比如1792年的法兰西第一共和国，导致了血流成河，最后民众期盼威权政体出来控制秩序，拿破仑应运而生。

1974年以来的新兴民主国家，民主转型失败的国家大约占30%，实现民主巩固的也是30%，还有40%处于尚未完成的中间状态。
	
得到笔记：
政治是一项系统工程，急不得，急不得。

需要先有秩序，再有发展，再有转型。各方势力均衡了，民主才能实现，民主的公平性才更高。

!05 财富结构如何塑造政治结构？

美国自耕农通过《土地法》、《宅地法》获得了大量的土地，财富结构均匀，更加相信个人奋斗而是不国家福利和再分配。所以等投票权普及后，民主的政治要求比较温和。

拉美国家，自古贫富分化严重，执行一套以大庄园制为主的土地制度，大量农民没有土地，于艰难竭蹶之中，存聊以卒岁之想。在投票权普及后，政治诉求激进，不仅希望选出自己的代表，还要求对社会财富——尤其是土地——进行再分配。因此经常走一条从民主走向激进改革、再引发军事政变的循环，其根源就是高度不平等的土地制度。

只不过后来，慢慢停止了斗争。一是这些国家的选民在失败经验中学到了，不能太激烈的要求再分配，政治诉求变得温和。而是工业化推进，土地在财富和收入来源的比重大大下降，土地分配不平等的负面效应相对来说降低了。

民主在不同的社会结构下，会呈现不同的运作方式，当社会各阶级各派实力相当，社会比较均匀是，民主容易温和、有节制、导向善治，当社会结构过于复杂，利益诉求多元化时，民主就容易导致严重的分歧，甚至使得民主偏离其本来的目标。

得到笔记：

拉美缺一场土地革命。

枪杆子里面出政权。

民主不一定公平。




















</pre>
</div>
<div tags="人物" title="费曼">
<pre>费曼先生，开始我以为是一个从美国精英阶层自然产出的一个幸运儿，原来是艰辛的移民家庭第3代，发挥自己的天赋和好奇心，跻身精英阶层的普通人。看这些人的经历，才会跳出自己的认知局限，知道生命的另一种可能。我也可以拥有被讨厌的勇气，去做自己最想做的事情。反正人都会死，人最后都会失去一切，还有什么看不开？干吗在乎别人怎么看？——我的人生由我定义。

费曼之所以有这么大的名气，90%是因为过了学术巅峰以后，他在课堂、电视、广播和书里大量精彩的发言，成功破圈。除了观点犀利、金句迭出，还有一个重要特点，他一辈子说实话，甚至不惜因此得罪人。

挑战者号航天飞机失事，费曼在电视上指出了关键问题，是一个O型圈的弹性出了问题。纠正了调查组不想追责的工作思路，把事故定为不可抗力。

用大白话把一件事/知识讲给别人听懂——费曼学习法并不是费曼发明的，而是一些成功人士训练手册的编写者看到费曼故事后产生的灵感。费曼确实也是这么干的，什么都自己推导，别人掉过的坑自己也掉，别人的新发现自己也去发现。费曼学习法适用于学习者，不适用于研究者，现在研究，竞争激烈，目的地未知，只有不断爬上巨人肩膀，才能取得效率上的领先。


创新从何而来？
——能规划的是工程，创新是不能被计划的。丰富的情绪体验是很多科学家做出突破的来源之一，宗教、哲学、另类体验、第六感之类说不清道不明的东西，也都是创新的导火索。
想要层出不穷的创新，办法只有一个，就是期待。在一个多样性丰富的环境里，以守株待兔的心态期待，期待那些你预料不到的突破从多样性的土壤里涌现出来。


费曼说，你应该让学生 —— 

''去怀疑，

去思考，

去交流，

去提问，

去从自己的错误中学习，而最重要的是，

在学习中获得乐趣。''</pre>
</div>
<div title="封建社会">
<pre>!商周之变

普世，王天下的价值观首先起于周朝，见于何尊底部铭文“宅兹中国”，这里的中国指“天下的中央”，文明意义上的中心。

商人认为天命在于商人，于是非我族类，拿来祭祀。这种天命观，受到羌人抵抗。羌人就是商王朝以外所有人，包括周人。

周人认为天命降于周王而非周人，这相比于商人认为天命降于商人，是一个飞跃，只有一个王，一个最高合法性，就大大提高了周人的结盟性，从而拉动更多得政治联盟者，团结起来，打败不认可其他人的商人。

周王成了天下共主，不仅仅要为周人主持正义，更要为天下人做主，这就是一种普世概念。

周朝是标准的封建王朝，封土建邦，秦朝之后都是郡县制【从这一点看，我们领先西方一千多年？】

古代的分封都是不稳定的，地方做大，中央没办法。周厉王想自救，于是改革制度，引起很多人指责，周厉王便规定任何人不得批评，留下了一句“防民之口甚于防川”，结果就是被赶跑了，上来了个新的周天子，再过一代后，从陕西镐京迁都洛阳，周天子的影响力一去不返。

!封建社会的终结

封建的终结，源于战争逻辑的变化。

中间差一个，周天子分封诸侯王，诸侯王分封次级诸侯，他们都面临失控，但是，由于这两个条件的变化，诸侯王可以掌控次级诸侯了。诸侯王就是君主，次级诸侯是贵族。

一是出现外部因素楚国不按照规则玩，使得大家都开始进行军备竞赛，实打实打仗而不是装逼了，战争逻辑变化了，之前打仗是为了表现和平民的区别，孟子说，春秋无义战，其实就是打仗没有贵族范了，不按照“礼”来打了。

二是技术进步，一个是铁器和牛耕的农业生产技术，一个是竹筒这种知识传播技术。结果就是农业生产率提高，平民有能力自耕田了，不再依附于贵族地主，君主也为平民提供保护，收取保护费；知识传播途径增多，知识分子出现，他们到处寻游希望把自己卖一个好价钱。君主从平民那里收了钱正好可以养这些人。「这也是中国大一统，而欧洲没有大一统的原因！中央政权汲取财政收入的规模大到一定限度，就可以碾压任何地方政权，中国因为人口密度大，耕作土地连续，使得中央获得财政收入的能力很强大，可以滋养强大的军队和官僚体系。反观欧洲，两个条件都不好，使得贵族一直没有被压下去。——施展」

这些变化让君主和贵族力量天平开始偏向君主一侧，国家力量越来越强大，国家三件套军队、官僚开始成熟。诸侯国从君主与贵族共治的结构，转向君主说了算的官僚制结构。官僚制结构。

只不过这一切，都没有周天子什么事了。

!诸子百家三大派

从对传统的态度来理解儒法道三家。

儒家提倡恢复礼。儒家之所以讲礼，是因为他们继承自周朝以来与天沟通的巫师，他们最知道礼法。所以孔子不止是儒家开创者，更是巫师传统的集大成者。周朝的礼也并不是成文法，而是无为知之，大家都这么做。但是条件变化，讲礼没啥好处了，因此儒家提倡礼的宣传原因就只能是——这样做是对的，用道德、正义这些词附加在礼上，孟子说“道之所在，虽千万人吾往矣。”

法家提倡抛弃礼。法家认为礼已经过时了，就如韩非子提出“守株待兔”。应该建立新的规则，用法来代替礼，法出自君主意志，执行法的人是官僚。所以法家受到各国欢迎，相比之下，儒家提倡的礼对于贵族有好处，对君主没什么好处，故孔孟周游流过都一无所获。法家三件套“法术势”，所以君主不喜欢用自己国家的法家，而是用别国的人，比如李斯、商鞅，这样的人在本国没有根基，一切都靠君主。

道家提倡无所谓。儒家、法家产生的条件都是人口密度大，只能入世，而道家提倡出世，潇洒。庄子的逍遥游、老子的无为而治都是这个意思，统治反而使得国家变坏。

百家争鸣的思想基础是原来“礼”的崩塌，社会需要新的坐标体系；社会基础就是，各个国家正在各自发展，竞争。百家争鸣的终点是大一统，一旦一统，百家争鸣就被抑制了。当秦朝出现，只有法家思想，汉朝，先黄老，再独尊儒术。
</pre>
</div>
<div tags="人物 哲学" title="弗洛伊德">
<pre>尼采说“有的人是死后才出生的”，世界第一次尼采研讨会就是在他死后8年召开的，回忆组织者就是弗洛伊德。

弗洛伊德和尼采一样造反。尼采颠覆了对上帝的信仰，弗洛伊德颠覆了对于人的理解，什么理解？——人的理性。尼采宣告了”上帝的死亡“，弗洛伊德宣告了”理性人的死亡“。

启蒙主义继承了古希腊、罗马的思想，认为人之所以是万物之灵，就是因为人是理性动物，能够主宰自己的生命。但在弗洛伊德之后，这种观念受到了根本的质疑。

弗洛伊德的职业是心理医生，他的理论具有哲学气质，心理医生和心理学家的科学背景，增添了他理论的说服力和影响力。

他提出，在精神意义上，没有人是绝对健康的，正常和不正常之间并不是泾渭分明的。他发现，人类心理结构中，存在一个黑暗地带，叫做”无意识“，我们无法在意识中觉察到这个区域，这个”无意识“的发现，颠覆了”理性人“的观念。



人们能够意识到的种种知觉和理性思考，只是浮出水面的冰山，而无意识，是冰山下面的巨大的一部分。无意识不仅占比大，而且能量强，是人的欲望本能，主要是性欲本能和攻击本能，这是人内在最基本的冲动，是生命的驱动力。

弗洛伊德的证据是什么呢？他没法把“无意识”摆到桌上给公众看，但他可以展示一个个心理疾病的案例，给出他的学说对于这些案例的分析和治疗方法，以及真实的治疗效果。弗洛伊德最终发展出一套复杂而系统的“精神分析学说”，成为20世纪心理学理论和心理治疗的重要流派。

他提出人格结构三元说，本我、自我、超我

本我就是最根本的我，属于“无意识”领域，是人本能的原始欲望，不论对错是非，只要满足了欲望就会很快乐。

自我不是天生的，是在成长过程和适应社会的过程中形成的。它有理性，重视规则和常识，可以感受到本我的欲望，并用理性去甄别自我的要求。本我是个婴儿的话，自我就是监护人。

超我，就是超越自我那一部分，是我们心中的理想化人格。它是在人与道德的接触和理解中形成的，把我们来自家庭和社会的种种道德权威，内化成心灵的一部分，最终形成了这个理想人格。影视作品里每个人内心都有一个天使和一个魔鬼，超我就是天使。一旦我们达不到天使的标准，超我就会用内疚感和罪恶感影响我们的心理活动。

弗洛伊德用马和骑手，比喻本我和超我。马提供强劲的驱动力，骑手要驾驭这股力量，当两者一致时，人的精神状况就很健康，不一致时，骑手被马拖着走，就偏离了正常的精神状况，久了之后，就成了精神疾病。【乔纳森用象与骑象人】

理性的自我无法完全控制非理性的欲望，只能不断地去应付这些欲望，也就是，理性的力量根本没那么强大，力量最强大的是人的原始欲望，启蒙思想认为“理性是人的精神本质”观念，就被弗洛伊德这个“科学发现”给颠覆了。人不再用理性来描述，而是用欲望。

——大反转

拷问弗洛伊德思想的原创性和科学性。

弗洛伊德是发现无意识本能的第一人吗？并不是，对欲望和非理性力量的重视，在西方思想史上并不罕见。柏拉图就曾经把人的灵魂结构分成理性、激情和欲望，再往后，英国思想家休谟、德国哲学家叔本华都强调过激情和意志的力量。当然还有我们讲过的尼采，他不是也强调“生命本身的力量”吗？弗洛伊德的重要贡献在于，它综合了前人的思想，以科学的名义提出了一套系统化的心理结构理论。

弗洛伊德的学说是一种科学理论吗？它经得起现代科学标准的检测吗？——主流观点是否定的。

首先是对病例治疗效果的质疑，其疗效甚至阻碍了病人的康复，所以精神分析疗法逐渐被边缘化；之后是对科学严谨性的质疑，人们发现他的案例中，有诱导行为，还有伪造证据的嫌疑；此外，他的理论没有“可证伪性”。

可证伪性，就是有可能被经验证据证明是错误的。如果一个理论可以解释一切，就是伪科学，伪科学永远能够自圆其说。从这个角度看，精神分析学就是伪科学。

弗洛伊德最重要的遗产，在于对西方现代文化的改造。他借助科学之名，将一种新的人性观念广泛传播到社会中。从此，对于人的理解，核心不再是理性，而是欲望，至少也是欲望和理性的不断冲突。这种观念变革成为了现代大众文化的一部分。

大众观念改变了，最重要的后果就是——欲望被解放了！在艺术领域，欲望不再是可耻的，而是正当的、甚至值得赞美的，是充满生命力的真实人性。

普通人面对的两大难题，死亡和欲望，后者引发了如何超越欲望，走向崇高的问题。但弗洛伊德的影响下，这个问题不是被解决了，而是被取消了。我们接受了欲望的正当性，欲望不再卑微可耻，就不用去超越欲望了。

大众也能公开的谈论欲望、表达欲望，吃货、颜控等等词可以用来表达自己的欲望，性感成为了一个赞美词，性也不再是一个高度禁忌的话题，这些观念变化塑造了我们的精神生活。

弗洛伊德的理论经历，就像是一个搭错车的故事。它借助科学性广为流传，但发现它不具备科学性时，这个理论已经大众化了。哲学家弗洛姆曾经说，“无论弗洛伊德是如何被人理解或者误解的，他永久地改变了我们理解人性的方式”。

===============================

人对于自身的知识，就是一个人的构成性知识(constitutive) ：是其所是，比如要不要孩子；
而工具性知识(instrumental)，只涉及存在的功能，比如住什么样的房子

构成性部分的改变，会影响行为方式的改变。抽烟有害健康这种知识，改变了我们对待欲望的方式，使得短短一两代人之后，抽烟就从社会常态变成少数人的陋习。

马克思主义关于“资产阶级肯定会灭亡”的理论可能是真的，但是这种思想被资产阶级学去了，他们就开始改良自己，最后活了下来。

末日预言，人们因恐惧而改变，最后人们没有了末日。

</pre>
</div>
<div tags="人物 哲学" title="福山">
<pre>福山是日裔美国人，他的祖父就已经在美国定居，他从小在曼哈顿长大，不会说日语，没有很强的日本文化认同，基本上就是一个美国人。福山先学哲学，再学文学，后来在哈佛大学攻读政治学博士，成为了亨廷顿的弟子。

1989年，福山到芝加哥大学演讲，演讲的内容后来修改成文章发表，就是那篇著名的《历史的终结？》。几个月后，柏林墙倒塌，又过了两年，苏联解体，福山一下子声名鹊起，被看作是预告了冷战的终结。

历史的终结，不是说由一个个故事构成的历史终结了，它是福山的一个哲学论断，然后又用政治科学的方法来论证它。这和他的学习经历契合，可能他想要把自己的武功都展示出来吧hhhh

我们中国人很容易理解历史终结论，因为我们学过马克思主义。马克思告诉我们，历史有一个普遍的规律，历史有自己的发展方向，会从历史的低级阶段走向高级阶段，最终走向共产主义。这就是马克思主义的历史观。

福山也采用了类似的历史观，这是从黑格尔到马克思延续下来的思想传统。福山的历史终结论，也说历史有一个普遍规律，历史有自己的方向，最终会走到历史的终点，这个终点就是自由主义民主。

End of History，H一定要大写，福山说这里的历史不是一个个故事构成的现实历史，而是一套宏大的历史规律。end除了终结或终点的意思，还有“目的”的意思。历史的终结，就是“历史的目的”，历史为什么终结呢，因为它已经走到了目的地，不会再往前走了，所以就终结了。

福山和马克思对于历史终点有不同的看法，同时，他们对于什么是历史发展动力也观点不一。马克思说动力是阶级斗争，但福山认为，动力是“为了承认而斗争”。

福山认为，人生在世，最根本的需求就是，要别人承认自己作为人的尊严和价值。为了获得这种承认，人不断地斗争，从奴隶反馈奴隶主开始，越来越多的人加入这场斗争，推动力历史向前发展。那么只要实现了普遍而平等的相互承认，历史就没有动力再往前发展了。福山认为自由民主制在原则上已经实现了这种相互承认，所以历史抵达了终点——这是福山给出的哲学论证。

福山接着用三段推论，从政治科学上论证了一番。
	1. 只要人类追求现代化，就会发展科学技术；
	2. 发展科学技术，就会采用市场经济。因为科学的逻辑就是要实现最优化、追求效益最大化，而市场经济就是效益最优惠的经济制度；
	3. 而发展了市场经济，就会导致自由民主制。经济发展和人均收入提高，会导致城市化、教育普及、人的产权意思增强、市民社会发展等等，“饱暖思承认”，越来越多的人希望参与政治，最终就会出现自由民主政治。

刘擎的质疑：如果福山的历史终结论是一个政治科学理论，那就要接受事实证据的检测，而且必须是可证伪的。不能遇到任何反驳的证据，都可以自圆其说，那这个理论就成了伪科学。福山说，就长远来说，自由民主制还是越来越盛行的，但凯恩斯也说过，就长远来说，我们都会死。这是不是在“可证伪性”上出现了瑕疵呢？















</pre>
</div>
<div tags="" title="干货">
<pre>干货多用硫磺熏，成色约好的干货，可能硫磺越多。</pre>
</div>
<div tags="人物 哲学" title="哈贝马斯">
<pre>为什么”交谈“是一件非比寻常的事？

韦伯难题：世界祛魅了，在价值问题上，大家没有了统一的标准，你要个人自由，他要集体温暖，你要诗和远方，他要功成名就，这就让现代社会陷入了多元主义，韦伯把这个局面叫做“诸神之争”。韦伯指出了这个问题，但他找不到解决方法，只好收，我们看清世界，放弃幻想，然后从容面对吧。

哈贝马斯出场了，他说这不行啊。百花齐放是好事，但人类的公共生活，没有一个客观原则，没有共同的规范，那还成何世界？

没有规范，冲突就是弱肉强食、成王败寇的野蛮，妥协就是迫不得已的让步，宽容就是“井水不犯河水”的回避或者“大人不记小人过”的恩赐，这样下去，会威胁到社会的正义和人的尊严。

哈贝马斯用巨著《交往行动理论》回应了这个挑战，获得了伟大的思想成就。


韦伯难题之所以难，就是因为人和人的想法不可调和，哈贝马斯接着想，为什么不可调和呢？不就是因为每个人都有主体性吗？接着他问，现实生活中，我们是这样生活的吗？我们是靠自己的主体性面对世界的吗？

不是呀！人不只是一个主体，而是生活在人间，通过和他人交往，才完成自我塑造的，对吗？比如，你今天要上课，这是和多少人的合作，才让你冒出来今天要上课这个念头的啊。你今天中午点什么外卖，也是才看了外卖网站的推荐，销售排名等因素才决定的。这些决定不都是产生在人与人之间的吗？

现实生活中，其实不全是“主体性”这个词，还有一个很重要的东西，叫“主体间性”，inter-subjectivity，可以翻译成对简单的三个字——在人间，在人和人之间。

现实生活中，每个人的行动、观念，不是诞生在自己脑子里的，而是在人和人之间被塑造出来的。在人间是我们根本的存在方式，我们人类是会说话的存在。语言交流、互相交往是我们所有行动的共同基础。

哈贝马斯对日常行动做了一个划分：
	1. 策略行动。就是你要达到特定的功利性目标，这时你使用工具理性。比如追求一个伴侣、完成一个工作任务等等。
	2. 交往行动。没有什么特定的功利性目标，比如和同事聚餐，追求伴侣成功后还谈恋爱，这是为了真正的理解展开的行动。

我们衡量、评价交往行动时，不仅会用到成败这个功利标准，我们心里还有另一把尺子，就是我们在谈话时，是不是在讲道理，在好好说话。这其实是一种理性的类型，存在于任何人之间的交往沟通中，哈贝马斯称之为“交往理性”——这就是韦伯难题的答案。

交往理性，也就是好好说话讲道理这件事，是我们生活中真正的规范的源头。我们和别人达成共识，不是因为某个人的道理特别强，让我们哑口无言，而是因为在好好说话的氛围下，我们处于彼此的信任和尊重一起把道理讲通了。我们能合作，能建立良性的公共生活，不是因为消除了主体性的主观分歧，而是通过运用“交往理性”，绕了一个弯，才达成的。

哈呗马斯提出“理想交谈情景”的条件是，保证所有参与者，能够平等地自由展开理性的讨论。

他提出交往理性运用的条件：
	1. 可理解
	2. 真实
	3. 正当
	4. 真诚

哈呗马斯提出这个标准，不一定所有人都能做到，但是思想家的工作价值就在此——提出一个概念，确立一个标准，大家都知道往那里走。所谓公道自在人心，有了理想的圆，大家就可以评判现实中的圆是否标准。

现代生活，人类不会因为价值理性的多元化，而注定陷入诸神之争的灾难。




















</pre>
</div>
<div tags="人物 哲学" title="哈耶克">
<pre>哈耶克和波普尔是好友，他比波普尔年长3岁，都出生在奥地利，最后都在英国功成名就。哈耶克和凯恩斯有过一场著名的辩论，持续了20多年，在1974年获得了诺贝尔经济学奖。哈耶克其实还是一名政治理论家。

他的思想非常丰富庞杂，一个最重要的概念作为抓手，那就是“自发秩序”。哈耶克认为，除了人为设计出来的秩序之外，还存在着自然生成的规则、自发演化出来的秩序，哈耶克称其为自发秩序。

最直观、最纯天然的例子，就是乡间小路。一开始，田野上并没有路，每个通过这里的人，都会走一条自己认为最好的路线，走的人多了，田野上就会浮现出一条反复被人采用的路线，越来越清晰，最后就形成了我们看到的乡间小路。它不是由哪个权威有意识设计出来的，也没有经过集体商议和规划，这条小路在许许多多个体选择中慢慢浮现出来，是一种自然演化的结果。

这种自发秩序有一个鲜明的优点，就是在秩序建立的整个过程中，没有强制，也没有伤害任何个人的自由。

语言，也是特别典型的自发秩序。几乎没有哪种语言是被人专门设计出来的。一位波兰语言学家设计出来了“世界语”，语法严谨，语音优美，但最终没有成为一门有生命力的通用语言。

法律，看似是立法者反复研究讨论，规则性和系统性很强，需要专业人士来实践和运用。但是，法律在成文表达出来以前，社会已经积累了很多不成文的规范，比如“欠债还钱”，“伤害要赔偿”等，立法工作者就需要把自发形成的规则，表达为规范而明确的法律文本。司法时间会对原有规则做出加工、改造和完善，但不会系统性地重新设计整个法律规则。

哈耶克把自发秩序看成是自然演化的结果，他并不排斥认为因素，但反对把人为设计的意图过度拔高，上升到对社会秩序的整体性规划。这一点和好友波普尔看法一致。

代表启蒙思想主流传统的伏尔泰、卢梭、百科全书派，相信人类理性的优越性，相信人类能够发现和掌握关于自然与社会的真理，绘制出未来发展的蓝图，实现不断的历史进步。但是，启蒙传统不是铁板一块，它还存在一个重要分支，就是亚当·私密性和大卫·休谟所代表的“苏格兰启蒙运动”。他们的观点和法国启蒙思想家有所不同，他们承认理性的作用，但反对“理性万能论”，反对那种好像人类的理性可以扮演新的上帝，去改造和规划世间的一切。苏格兰启蒙运动倾向于把理性看成一种怀疑、反省和批判的能力，而不是掌控一切的能力。

哈耶克和波普尔继承了苏格兰启蒙欲动思想，用审慎和批判的态度去质疑主流的启蒙理性主义，特别是要批判那种认为理性能够认识一切、规划一切的独断论。现在，很少再有人相信，理性无所不能。

哈耶克认为，自发秩序，才是最为可靠的社会秩序。

评论学习：

自由是哈耶克永恒的理想。他继承了18世纪启蒙思想家的思想,以个人主义出发,强调维护人的自主。这种自由包括政治自由,思想自由和经济自由。在所有的自由中，经济自由最为根本，也最为珍贵。如哈耶克所言：“离开了经济事务中的自由，就绝不会存在-----那种个人的和政治的自由，没有经济自由的政治自由是没有意义的。” 因为这样的自由只能是少数统治者的自由。
第一、经济自由是自由的基础。
第二、没有经济自由，政治自由和其它自由就很容易从人们身边被夺走。
第三、经济自由本身也有着强大的、不应被无视的政治功能。

约定俗成。



【设计出来的秩序没有自发秩序稳定，但是，可以设计环境，再让环境自主构造自发秩序】



哈耶克提出一个概念，叫做“理性的自负”，就是对人类的理性能力抱有过度的信心，相信理性能获得几乎完美的知识，从而构建出完美的社会规划，实现理想的人类生活。哈耶克根据这个概念，解释了20世纪西方思想两大核心问题，纳粹德国的灾难和苏联模式的失败。

纳粹和苏联，在哈耶克看来都是“理性的自负”，在经济领域推行计划经济，在社会规划中依赖高度理性化的系统设计。

在他的名著《通往奴役之路》中，他对苏联计划经济模式进行了批评，他也讨论了纳粹主义的思想起源。与流行观点认为纳粹主义是一个没有思想深度的反理性运动，哈耶克认为纳粹其实是一种集体主义梦想的最高版本。

1920年代，德国出版了一部著作，里面写道“普鲁士观念”，要求每个人都应当成为国家公务员，未来的国家将是一种官吏治理的国家。将来是商业统治国家，还是国家统治商业，必须由德国来为全世界解决这个决定性的问题。1930年初期，德国就开始创建一套强有力的计划经济体制。建立一些了经济控制机构，通过垄断集团控制企业，甚至直接由政府来规定商品价格，这一系列措施，是的德国在世界经济大萧条中创造了经济复兴的奇迹。

这种规划模式表面，纳粹德国并不是疯狂的产物，它的思想和实践中都包含着高度理性难过的部分，试图用理性的现代化铲除所有非理性的东西。甚至在迫害犹太人的过程中，纳粹的口号首先不是仇恨，而是用伪科学证明犹太人是不符合秩序的存在，因此要铲除。他们相信自己掌握了人类的终极知识，要无限度地追求卓越——理性的自负。

在理性的自负下，人们追求的理想可能是极其崇高的，但理性的自负会让我们事与愿违，波普尔也说，一些极权制度的设计者有着美好的愿望，也有敏锐的洞察力，但却因为陷入了乌托邦的幻想，最终造成了灾难。爱因斯坦也说，通向地狱之路，是用善良的愿望铺成的。

哈耶克在《致命的自负》中说到，理性的自负之所以致命，是因为我们很难逃脱一种诱惑，就是想用理性去做整体设计，因为这种给了我们一种期望，用整体规划去摆脱和征服现代社会的高度不确定性，以及它带来的焦虑和不安。但是，这是一个虚幻的期望。

他告诫我们，必须始终清醒地认识到“人类的必然无知”，人类的知识总是有局限的，必然包含着无知的一面。理性有两个作用，一是追求知识；二是认识到理性知识本身的局限性，对此保持审慎和怀疑。

如果人类存在必然无知，那社会秩序怎么产生？——自发秩序。商品定价也如是，市场自发地提供了一个交换系统，把千差万别的需求汇聚起来，形成一个市场价格，对复杂的需求及时做出反应。市场价格的形成，就是一个没有经历刻意设计的秩序，即使仍然没有人能够获得全部信息和知识，但市场本身也能自发形成相对合适的价格。

起初，哈耶克的思想在边缘位置，当时西方社会经历了严重经济危机，凯恩斯的国家干预理论占据上风。直到1970年代，哈耶克声誉才有好转，计划经济的弊端逐渐暴露，1974年获得诺贝尔经济学奖。1980年代，里根赛切尔执政，放任自由主义的经济政策盛行，哈耶克声誉随之提高。1991年，苏联解体，哈耶克声名如日中天，他被看成是一个理论先知，在几十年前就预言了苏联的末路。

但是，随着近30年西方社会贫富差距拉大，经济增长放缓，人们又开始反思和批判以哈耶克为代表的新自由主义。

有意图地去规划和设计，本就是人类意识具有的特性，哈耶克真正反对的是“理性的自负”，妄想能够扫除无知、全知全能式的计划方案。

恰恰是因为计划活动不可消除，我们才要防范滥用计划。他和波普尔提醒我们要警惕理性，不是因为理性不好，而恰恰是因为理性很好、很管用，所以我们要警惕对它的夸大和滥用。

人类真正的成熟，是在勇敢运用理性的同时，直面自己永远不可能完全摆脱无知，勇敢地与不确定性共存。





















</pre>
</div>
<div tags="人物 哲学" title="汉娜·阿伦特">
<pre>汉娜·阿伦特，1933年从德国流亡到美国，对于大屠杀的看法，她创造了一个流传很广的概念——平庸之恶，虽然这个词被讨论很多，理解得却很浅。

平庸之恶不是“螺丝钉理论”，即普通人只是官僚系统这个杀人机器上的一颗螺丝钉，冷漠地服从程序、执行命令。平庸之恶也不是大众导致的恶，“雪崩的时候，没有一片雪花是无辜的”，把责任推给所有人，就无法再追究任何特定个人的责任，阿伦特反对集体罪责，她主张应追究个人责任。

平庸之恶，banality of evil，恶的平庸性，阿伦特在提出平庸之恶10年前用另一个词描述大屠杀——极端之恶，radical evil，就是根本的、彻底的、激进的邪恶。

阿伦特并不是说大屠杀是一种平庸的罪恶，而是她在纳粹军官艾希曼身上，看到了恶的平庸性。极端之恶和平庸之恶并不矛盾，而是同一主张的两个面向。

极端，不是说程度，而是性质，大屠杀呈现出一种独特的、前所未有的特征，就是它完全不可理解。

为什么不可理解，过去对道德有一套传统的认识，康德说，人是目的，而不仅仅是手段。如果把他人当作实现自己利益的手段，那就践踏了人的尊严，是不道德的。纳粹大屠杀难以理解的地方在于，纳粹不仅没有把犹太人看成是目的，甚至没有把他们当作工具、当作手段。

纳粹的动机不是出于人性的自私、贪婪、恐惧、复仇或者施虐欲望，纯粹是把犹太人看作是多余的东西，这不仅仅是否定了人的尊严，而是连他们可利用的工具性价值都否定了。纳粹彻底否定了人类中的一群，认为只有某些人才是人，他们否定了人类存在的多样性，在阿伦特看来，这等于是要“根除人这个概念本身”。这种恶已经超出了康德的道德哲学框架，无法从人能理解的动机来解释。

在纳粹军官艾希曼的审判过程中，阿伦特看到了他艾希曼身上的“平庸性”，实质上是一种“无思状态”（thoughtlessness)，不是愚蠢，而是匪夷所思地、非常真实地丧失了思考能力。

一般我们认为，邪恶的人一定是有作恶的动机，犯下的罪行越严重，说明动机越深刻。而阿伦特在艾希曼罪行上看到，它不是从自身的邪恶动机出发的，而是因为放弃了思考、丧失了思考能力而作恶，是一种没有残暴动机的残暴罪行。

平庸之恶绝不是日常生活中的微小过错，或是平常人可能犯下的小奸小恶。这个概念只适用于艾希曼这种犯下极端之恶的作恶者，在极端之恶中，他们才体现出恶的平庸性。


艾希曼在法庭上侃侃而谈，引用康德的名言为自己辩护，他说自己履行职责、服从法律，因为在德意志第三帝国，元首的命令是当前法律的绝对核心，所以他不仅是服从法律，而且是让自己的意志与“法律背后的原则”得到了统一，这符合康德的哲学。

但阿伦特认为，艾希曼不是愚蠢，而是满嘴套话，让自己陷落在陈词滥调之中，又把这些陈词滥调当成了自己的盾牌和武器，用它们来抵挡现实，拒绝真正的思考和对话。康德所讲的道德，恰恰是和独立判断密不可分的。

阿伦特说的思考能力，实际上是积极思考、获得独立判断的能力，我们依靠这种思维品质才能摆脱套话和陈词滥调，去做自己是非对错的判断。现在人人都说独立思考很重要，这本书又成了套话。

为什么独立判断很重要？阿伦特认为，因为在现代社会，只是服从主流规则，已经不能再防止人们作恶。

纳粹德国时，人们可以依法作恶，这就造成了一个极为严酷的道德困境，遵纪守法可能迫使你作恶，想要行善却会触犯法律。阿伦特发现，道德的真正涵义不是循规蹈矩，而是自己独立做出关于是非对错的判断。

但是，独立不等于正确，循规蹈矩是有章可循的，独立判断就得抛弃对既定规则的服从，自己确立标准，自己给自己立法。最后结果就是，独立判断成了一件责任风险极大的事。因为循规蹈矩，做对了当然好，做错了，也可以方便地为自己辩护，“大家都是这样做的”，而坚持独立判断，对了那是应该的，错了就是自己导致的，你必须承担全部责任。

那到底应该怎么做出独立判断呢？

尽管这件事很难，但仍然有人做到了，那我们就去看看这些人是如何做到的，从他们身上寻找启示。

一个德国士兵，安东·施密特帮助很多犹太人逃亡，最后被纳粹逮捕，审判处决了。他写给妻子信，说“请原谅我，我只是作为一个人类来行事，我不想伤害别人”。

阿伦特认为，施密特这样的人之中始终要求“忠于自己”，他们做出独立判断的前提是，始终保持“与自己相处、与自己交谈的倾向”。他们选择不作恶，不是为了服从于纳粹之外的某个戒律，而是因为他们无法接受作为杀人犯的自己。他们不愿意与这样一个自己共存，为此他们甘愿承受危险、乃至付出生命。

在阿伦特看来，这种独立判断的典范，就是苏格拉底，苏格拉底“宁可自己遭受冤屈，也不愿行不义”，这样至少能与自己和睦相处。达到这样的境界不要求有多么高深的知识、多么聪明的头脑，只是要求你始终过一种自我反思的生活，不断与自己内心对话。

道德正直，moral integrity，这样的人能够坦然面对自己，不用规矩和套话自我欺骗，他们保全了自己人格的完整。

阿伦特生命最后几年有一个计划，写作《精神生活》三部曲，第一部是《思考》，第二部是《意志》，刚刚开始写第三部时，突发心脏病去时了，打字机最后一张纸上，只有一个标题：judging，判断。可惜她对于如何独立判断没有做出完整答案。但这也许本身就是一个答案，我们必须自己来思考，如同苏格拉底那样，用思考恢复我们作为人的存在本质。

我们只能在具体的处境中，冒着风险，真诚地去做自己的独立判断，并为此承担责任。

加餐：

道德判断的难题——自我指涉的困境（the paradox of self-referentiality)——在思想意义上，陷入了“自己当运动员，自己又当裁判员”的处境
反思判断需要有一个“立足点”，而立足点本身也可能转变为“更高阶”反思的对象，于是反思的自我指涉可能会导致无穷后退。

所以，亚里士多德说，所有思考必须有一个”始点或本源“，为根斯坦特也说，”我们必须从起点开始，而不是从更早开始“。

阿伦特没有提到良知的标准，因为良知不需要标准，良知本身才是标准，它是自明的道德真理。真理不是思考的结果，思考是在体验了真理之后开始的。


































</pre>
</div>
<div title="豪族社会">
<pre>01 秦、汉

周秦之变

秦皇到汉武，官方思想从法家——道家——儒家

百家争鸣，以法家胜出为结局，因为法家提高了战争效率。

法家改变了血统论，让底层人民有了动力去砍敌人脑袋提升身份。最早变法的魏国，在公元前400年李悝变法，成为了顶级强国，把秦国打回函谷关。各国都开始变法，此时魏惠王拒绝了商鞅，商鞅前去秦国，把法家逻辑发挥到极致，使得秦国迅速崛起。又因为秦地理位置好，经历100多年清除掉国内势力，在始皇帝时终于一统天下。

得了天下的秦国，再用法家逻辑，之前可以掠夺其他国家，现在就只好掠夺百姓滋养军队和官僚了。这种逻辑当然不行，二世而亡。

楚霸王项羽一开始也想恢复天下分封，把刘邦分到了秦国地盘。此时分封制已经行不通了，各个诸侯国继续用法家逻辑掠夺外部世界，秦国故土的刘邦统一了天下。

但刘邦是平民出身，只好通过团结他人来征服天下，分封了2/3的领土，只是因为没有压倒性的力量钳制合伙人。只能遵守黄老之道（黄帝和老子）。但是，西汉继承了秦政，利用法令将社会彻底打为散沙，将大宗族拆散为小家庭。同时，定都秦国故土的长安。之后花8年时间剪除可能威胁皇帝的异性诸侯，将封地转给刘姓诸侯，并留下一部分重臣互相制衡。刘邦一死，王爷叛乱，军功重臣平息叛乱，到汉武帝时，军功重臣也老的老，死的死，皇帝也不需要两种力量互相制衡了。大汉帝国从分封制重回大一统。

汉武帝雄才大略，道家思想已经不行了，法家更不好，前朝历史犹在眼前。更好的选择就是儒家。选择儒家，就选择了统治正当性，但是，儒学的解释权落到儒生手里，对皇帝形成反制，这种力量远不如贵族的反制力强。

之后中国两千年，出现了阳儒阴法，外儒内法的形态。观念层面，儒家主导，可以安抚民心口径，儒家表面迂腐，却为君主划出了边界；具体制度设计，依靠法家逻辑，制度效率也有了。

自此，中国从制度和思想两个方面获得稳定，走上大一统。


02 

汉人王朝统治不了长城以北

为什么？——因为400毫米等降水线。

汉人的概念始于汉朝，行儒家规矩，就必须定居，就必须耕田，受雨水影响，只能在400毫米以上的地区，所以汉人就把长城修到了自然条件的极限位置，400毫米等降水线。汉族政权可以派军队出征漠北，但收兵需回到长城以南，不然部队补给不能长久。


中原政权，因为农耕、人多，所以税收基础好、成本低，可以养军队和官僚，这就导致君主和官僚分工，君主的首要功能是合法性的象征，次要功能才是干活，所以君主的继承需要稳定而非成绩，最后实现了嫡长子继承原则。草原不好收税，中央财政无法存在，建立不了官僚体制，只能靠熟人关系形成小部落，上限是邓巴数字。超过150人，就不是熟人社会，而是陌生人社会，只能靠规则治理，规则要官僚执行，草原养不起官僚，就只能分裂，继续以小群体的方式行动。





草原王朝的兴衰

为什么匈奴能突然出现在西汉帝国面前？

——因为西汉本身。只要中原大一统，草原也就大一统了，因为中原分裂时，需要各自向草原买马进行战争，草原的部落不需要结盟就能有好收益，结盟之后反而要给盟主一份利益。但中央大一统之后，不需要过多战马了，草原部落通过市场交易是赔钱的，他们只能组成联盟，从中原掠夺。

草原帝国的人口虽然远少于中原帝国，但是战斗力更强：一是草原奇兵碾压中原步兵，二是草原的战斗效率高，后勤压力低，生产、生活、战斗单位是合一的，三是草原光脚的不怕穿鞋的，战争近乎是净收益。

草原部落可以通过形成联盟的方式，对中原帝国形成巨大军事优势，联盟的大可汗通过垄断战利品的分配权，形成一个基于战争战利品的中央财政。

同时因为草原征服型王朝是需要武力掠夺资源的，且草原养不起官僚，所以最高领袖必须是会打仗的，而且继承制度不能如中原一样父终子及，而需要兄终弟及才能稳定，这样导致了一个坏处，就是“胡虏无百年之运”，因为一轮兄弟当完皇帝之后，下一辈谁即位？这些兄弟子侄的爹都当过皇帝，就因此走向分裂。汉武帝逐匈奴，唐太宗逐突厥，就是因为中原王朝熬到了草原王朝的百年国运。

此外，草原由于是武力立国，没有官僚体制，只能通过熟人关系，所以类似于封建制，草原贵族如小可汗大量存在，对大可汗形成制约关系。因此草原军事贵族民主制可以长期保持下来，并不是因为大汗宽容，而是因为他没办法。

当周期性的继承危机来临时，草原帝国一定会瓦解。

反观中原，也是具有周期性的衰败危机，因为皇帝靠官僚制统治，前几代皇帝还可以励精图治，之后的皇帝，从小就长在深宫里，没见识过世界，不知道如何应对官僚体系，这个帝国就被官僚体系绑架了。

【此外，还有土地兼并】

当这些合力再遇上气候变化，草原草量降低，胡族南下，中原王朝举兵抗击，增大税收，然而农业生产量降低，农民过不下去了，中原王朝在内外夹攻下，就崩溃了。

中原社会因为已经被群县制打成散沙，就需要中间阶层，也就是广义的贵族恢复秩序，草原始终存在天然的贵族，草原力量帮助中原重建秩序。

草原和中原是两套治理逻辑的，纯粹的草原政权不懂中原，纯粹的中原政权不懂草原，所以要统一长城南北，需要征服者同时有两种治理经验，其地盘是兼有农耕和游牧的二元帝国——这就在东北了。无论最早的北魏还是大清，都是这个逻辑。

大可汗入关，用草原骑兵控制中原，用中原的财政将军事贵族赎买，并建立官僚制。这样，就可以建立起正向循环，也可以让儿子即位了，破解掉继承危机。



雍正时期，八爷九爷想搞八王议政，就是延续草原时期的政治形势，但入关后，逻辑变了，很快就被雍正拍死。

03

豪族社会的兴起

汉武帝

草原帝国在和中原帝国对峙时期，会给中原帝国以强大的军事压力，中原帝国军备竞赛很花钱，汉武帝打匈奴就打了44年，羊毛出自羊身上，老百姓忍不了赋税时，就丢弃土地变成流民，这继续加剧了没有跑的人的赋税，造成恶性循环，另一种方式就是老百姓抛弃土地，投奔豪族大家，不向皇帝交税而是给豪族交保护费。

豪族三个来源：战国时期的贵族后代，几百年留下的世家大族；文景之治时发展起的大商人；地方豪强、大侠。

汉武帝后期，朝廷掌握的人口越来越少，豪族掌握的人口越来越多。武帝末年，天下人口少了一半，不是战争打死的，而是都跑到了豪族下面去。豪族就越来越强，中央政府税越来越少。

战国七雄可以变法，建立官僚体系压制贵族，但是为什么通过官僚体系压制豪族就不行了？因为皇帝没钱了，豪族有钱，地方官僚开始和当地豪族联手，和朝廷想的背道而驰。

西汉时期的官僚制还不完善，只能处理小诸侯国，对于庞大帝国却远远不够。更完善的官僚系统要到宋朝时才能发展起来。虽然行郡县制，但当时的郡守，相当于土皇帝，和下属都是君臣相称。

官僚和豪族联手，大汉帝国就由扁平的散沙社会进入了豪族社会。豪族社会维持了1000多年，直到唐宋转折时期才结束。

逻辑脉络：中原统一——〉草原统一——〉中原豪族社会

王莽

王莽先是帝国重臣，谦逊有礼、志向高远、众望所归，夺取了大权，但不久之后就篡位。

王莽被网友说是穿越回去的，因为他上台的政策像是社会主义政策，比如土地国有，盐铁官营，还有储备机构调节物价。实际上，这是依据《周礼》来复古改制，并不是从现代穿越过去的，而是从周朝穿越过去。王莽政策核心都是抑制豪族，恢复帝国能力。但由于没有碾压性的优势，没有新技术，就没法控制豪族，被豪族推翻了。

刘秀

刘秀顺应豪族兴起的大势，建立东汉，与豪族共治。此时，社会结构已经形成了，皇帝再也没有机会消灭这些巨头了。

04

汉皇为何“亲小人，远贤臣”？

贤臣就是儒家化了的豪族，既有社会组织力，又可以引经据典批评皇上，变成了士族。从东汉发展起来到隋唐形成，他们被称作门阀士族，简称士族。

皇上找不到士族外的知识分子，因为知识传播技术不发达。造纸术不达到，洛阳纸贵发生在西晋时期，可见汉朝时造纸更贵。印刷术也没有，书籍的制作主要靠抄写，不是豪族一般人读不起书，读得起书的豪族，成了士族。

士族就这样一代代发展壮大，成了世家大族，垄断知识和地位，垄断社会舆论。【今天这个知识致富的社会，是否也是如此？】这就是所谓的贤臣，把持重要职位，彼此联姻通婚，关系板结，对皇帝有强大的制约力量。

东汉开头几位皇帝还有点实力，可以与豪族互相制衡，后面的皇帝，越来越受世家大族约束了。皇帝肯定要自救和反抗，但是，士族把握着官僚体系，掌控着舆论，所以支持皇帝的人就会被指责为“小人“。皇帝可以找哪些人？民间的人才都在士族门下，朝廷上的人都是士族，只有找身边的人——宦官和外戚。怎么指望他们忠诚呢？指望不了，只能指望他们自私，他们的利益和皇帝绑在一起的。

诸葛亮说刘备“未尝不叹息痛恨与桓灵也”，其实汉桓帝智商绝对不差，他15岁被前朝外戚梁毅扶上台，一直被梁翼控制，在当了13年傀儡皇帝后，终于发掘出几个心腹宦官，联手做掉了梁翼，之后开始自己说了算，被世家大族说成是“党锢之祸“，这些人被汉桓帝抓起来、或赶走。宦官专权其实不过是皇帝通过宦官之手，和世家大族进行PK。东汉后期宦官政治愈演愈烈，其实就是皇帝和士族的对抗愈演愈烈。

当宦官力量过强时，皇帝还可以用外戚压制他们，东汉后期的很多皇帝，交替地扶持宦官和外戚。世家大族面对这一行为，进一步强化“以天下为己任”的情怀，掌控道德制高点。贤臣是否真的贤，就是个问题了。

东汉末年，气温下降，进入小冰期，民变四起。老百姓求助五门，只好寻求民间信仰，汉朝儒学也讲究天人感应，天灾是皇帝失德。皇帝被迫多次发罪己诏，权威扫地。民间信仰四起，终于公元184年黄巾起义。

得到笔记：
豪族不可怕，就怕豪族有文化。豪族变士族，官僚被收买，皇帝怎么办，只能亲小人。小人有哪些 ？宦官和外戚。小人不可靠，豪强来勤王。天下大乱，群雄并起，出生高贵的士族不一定能继续领先，乱世之中，能者为王。

05 

诸葛亮的心机——士族绞杀

北大教授的孟达反叛解释版本：蜀汉有主客矛盾，刘备和他的小伙伴都不是蜀国人，凭冒险占据了刘璋的西蜀，而蜀汉的主任是蜀中的世家大族，大都是刘璋的旧臣。刘备不用旧人，就不能统治蜀川，不用新人制衡旧人，就说不好江山是谁的。诸葛亮是新人领袖，李严是旧人领袖，孟达也是旧人。诸葛亮一石二鸟，处理了孟达和李严，完成对蜀汉新人、旧人系统的整合。

天下大乱时，士族的高贵出身和丰富知识不够用了，要摆平乱局靠的是做事的人。诸葛亮和李严除了主客矛盾，还有士族和寒族矛盾。三国时期各种冲突，往往都与士族、寒族冲突有关。比如袁绍和曹操。

曹操的爸爸曹嵩是宦官曹腾的养子，因此出身被袁绍看不上，曹操自己也看不上阉党。在阉党和士族双边都得不到支持，就只有从平民手里得到支持，现成的力量就是黄巾贼，曹操平叛黄巾贼之后将其收编为“青州兵”。后来陆续打掉一系列顶级士族，如袁绍、袁术、孔融等等，得意地说道“设若天下无孤，不知几人称王，几人称霸！“。

曹操不断打压士族，不断从平民中选拔人才，他说“治平尚德行，有事尚功能”，太平岁月，士族有德行还可以，乱世里，有本事才重要了。

曹丕没有青州兵支持，而且也是篡位的，只好向士族妥协，搞九品中正制。让士族垄断了高级职位的权力。诸葛亮联合蜀中平民打击蜀中士族，吴国也有士族和汉族冲突。

若干代后，士族终于干掉老曹家。司马家就是士族最重要的代表。

06

司马懿时代

曹丕托孤曹真、曹休、司马懿、陈群。把军权给皇室宗亲，用能干的功臣制衡宗亲。
曹睿托孤曹真的儿子曹爽和司马懿。

曹爽太草包，司马懿高平陵政变，曹爽不听桓范计——下诏起兵勤王，而是交出兵权。桓范气疯，跟随曹爽回到洛阳，之后都被司马懿诛杀。

桓范的一个儿子逃脱了，隐姓埋名，到玄孙桓温时终于位极人臣，桓温的儿子桓玄终于篡了司马家的位置。冥冥之中似有天意。


诸葛亮用军功成就司马懿
诸葛恪成就司马师
诸葛诞、诸葛瞻和诸葛尚成就司马昭

07

司马家族的衰落

司马家面对气候变冷、中原豪族化、士族堕落、皇族内斗。

气候变冷：胡人南下，人越来越大，帝国无法消化掉了。

中原豪族化：自黄巾军起义以来，豪族建立坞堡自卫，经济自给自足，中央财政收不到钱。朝廷甚至缺钱卖官，大臣敢讽刺皇帝卖官。

士族堕落：儒学越发精致，一句话注解十几万字，但是理论的东西讲得这么清楚天下依旧大乱，说这么多有啥用呢？于是就抛弃儒学，开始谈玄论道，这就有了魏晋玄学。有的人返归内心，寻世外桃源，如陶渊明。还有人在社会动荡中看到利益再分配的机会，做精致的利己主义者，把自己搂钱的地位制度化。

皇族内斗：晋武帝大肆分封诸侯王，以压制士族拱卫朝廷。结果造成八王之乱，五胡乱华。

天下大乱，士族带着其下的老百姓一起南迁。司马睿在南迁士族的支持下建立东晋，东晋比起西晋，更需要和士族合作，便有了“王与马，共天下”，王就是士族领袖王导。此外还要组织流民对抗胡人，士族便有了武装，政权和军权分离，最终导致了东晋的覆亡。

桓玄篡了东晋皇帝的位，报了祖先之仇，随后被低级士族统领的军队赶了下来。最后军队领袖刘裕，凭借军功，让司马氏将皇位禅让给他，建立刘宋，中国从此进入南朝。

南朝的正统性更弱，引得野心家跃跃欲试。武力上也不是北朝的低手，只能坚持儒家理念强化自己的正统地位，但反而放大了自己的正统性缺失。所以也在大力宣扬佛教。“南朝四百八十寺”。

这段历史虽然糟心，但它的积极意义就是促成了江南土地的开发，使得这里迅速成为帝国的经济重心，另外也传播了儒家文化。

08 五胡乱华

南边是东晋和南朝，北边分为两个阶段，五胡乱华和北魏（北朝）

五胡十六国，按照胡人和汉人的关系，分为三个阶段

	1. 胡人本位，胡人第一，欺负汉人
	2. 胡人意识到不能压迫汉人，想混一胡汉，但不成功
	3. 胡汉混一成功

南匈奴首领刘渊是汉朝公主和匈奴人的后代，想以兴复汉室为号起义，结果两边不讨好。

刘渊后继者发现刘渊策略不好，直接赤裸裸说我们是胡人国家，汉人就得被统治，被奴役。汉人被压迫得不行，终于出来了一个汉族领袖冉闵，颁布“杀胡令”，正好翻了个个。也很快失败。因为成功的统治政策需要把国内力量都整合起来，共同对付外部敌人，无论是压迫汉人、还是屠杀胡人，绝对不可能成功。

前秦苻坚是第二阶段的领袖。他着手改良胡汉对立，但没有找对方法。他为了消除胡汉差异，打碎小共同体，让外族和本族氐族制衡，比如重用前燕的鲜卑族人慕容垂，不要基本盘了。在淝水之战，草木皆兵输给了东晋，慕容垂起兵反秦，兴复大燕。慕容垂自称燕王，史称后燕。

拓跋珪整合了草原与中原两种力量，用中原财富赎买军事贵族，推行“离散部落”政策，把小共同体打碎，建立八部大人统治军队（后来演化成隋唐的柱国大将军制度），建立起了的一个二元帝国，成功混一胡汉。


09 混一胡汉的隋唐


北魏孝文帝从平城（大同）迁都洛阳，不是为了学习儒家文化，而是想摆脱草原军事贵族，进一步压制这些贵族，让他们脱离军队，自然就失势了。随后孝文帝要求鲜卑人改汉姓、说汉语、穿汉服、与汉人通婚，看上去促进了民族大融合，其实是消耗了基本盘。军人离心离德，帝国就危险了。孝文帝死后，六镇官兵暴动，北魏瓦解，分为东魏和西魏，再加上南边的梁朝，被称为后三国时代。

东魏主导人是高欢，西魏是宇文泰。后者的西魏成了隋唐帝国的母体，宇文泰一边安顿鲜卑人，恢复鲜卑姓氏，也要求汉人起个鲜卑姓氏，鲜卑人满意了，汉人的人心这么收拢呢？——复周礼！草原本来就有军事贵族，自然而然的可以用周礼重新规定一下贵族身份，汉人也就满意了。宇文泰的继任者篡位后，建立国号为周，史称北周。

宇文泰设立府兵制，整合汉人和湖人，成为了后面能够一统天下的军事基础。北周以富有想象力的混一胡汉制度征服了北齐，很快杨坚取代了北周建立隋朝，又征服了南方的陈朝，最后李渊建立大唐。

自此，分裂400年的东亚重归统一，形成了大唐帝国。草原的视野与武功，中原的精神与财富，被整合一体。


10 隋唐两女人

一个国家的命运，往往是不同利益集团的冲突决定。

隋唐帝国的核心线索，就是关陇军事贵族和皇权的对抗。隋朝灭亡、大唐兴起、安史之乱。。。

独孤皇后背后是关陇顶级军事贵族，让隋文帝杨坚不敢得罪。隋文帝依靠关陇贵族统治，历史上被称为关中本位。

隋炀帝有雄才大略，想摆脱关陇贵族的约束，学孝文帝一样，迁都洛阳，开创科举，以求在贵族之外发掘人才。但当时读书人依然是贵族居多，都不听话。

隋炀帝也不掌控军队，军队在关陇贵族手里，隋炀帝想要大权独揽，需要建立一支自己直接掌握的军队，就需要发掘新的经济资源。既没有钱，也没有兵，怎么办呢？征高丽吧。一旦打得不错，新的财富可以用来收拾贵族，但是贵族们不能忍啊，打仗辛苦，打完仗还来收拾我们，于是发动兵变。

唐太宗回到关中本位，以巩固皇位和国本。唐太宗开贤纳谏，其实也是贵族有约束在的。皇上和柱国大将军，是盟友关系。

武则天嫁给唐太宗和他儿子，就是草原传统，儿子可以娶过世父亲的除了亲妈以外的各种夫人。王昭君就嫁了祖宗三代。所以草原女子地位也比中原高，人们习惯了女人强势，武则天能够称帝，也靠唐朝深处的草原底色。

武则天再次放弃“关中本位”，开科举，走隋炀帝老路。并用不同地区的贵族互相制衡。还会使用一些酷吏无赖，这些人对皇帝依赖度高，用完可以丢弃。

11 安史之乱的积极意义

江南大开发，平民崛起，豪族社会终结。

武则天的统治，用关东贵族对关陇贵族造成重创，唐玄宗觉得不过瘾，继续提拔个汇总没有政治根基的人，除了平民之外，还有一个群体，就是胡人。唐玄宗滥用胡人，最终导致安史之乱。

唐朝总个四个节度使，相当于4个军区，安禄山掌握着其中3个军区，任用胡人将领对唐朝不是新鲜事，因为唐朝本来就是一个胡汉混血的朝代。

唐太宗懂得草原逻辑，任用突厥将领，以“天可汗”而不是皇帝的身份，统领起各种胡人。但唐高宗之后都不具备战争经验，定都长安也远离游牧与农耕的国度地带，皇帝就缺少相关知识。高宗后期，突厥脱离大唐，形成独立帝国。

太宗时期，大唐以北朝为正统所在，认为大唐继承自鲜卑的北周帝国，不认为认胡人做天子有什么问题。然而玄宗之后，认为唐朝统绪继承自汉朝，认为南北朝正统在于汉人的南朝而非胡人建立的北朝。大唐的草原身份就被抛弃了。

可以看见，大唐建立了胡汉二元帝国，但没有形成制度，依赖于皇帝的认知。唐玄宗在把国家命脉交给胡人，几乎就是等着出大事。唐玄宗统治几十年感觉都超级良好，到晚年突然遭遇安史之乱，大唐一下子从巅峰摔了下来。虽然平息了动乱，但借用胡人的力量打击胡人，大唐的命运不由自己做主了。

安史之乱却意外刺激了江南经济的发展，成就了隋炀帝、武则天、唐玄宗一直以来寻找的、豪族社会之外的财政来源。

安史之乱突然爆发，人口南迁，和五胡乱华时豪族带领百姓不同，安史之乱前唐朝百年盛世，早已没有坞堡等自保经验，胡人的骑兵追到淮河就不能走了，这样江南形成了一个平民社会。

人口数量激增，使得农业迅速发展，江南从此成了中央财政最重要的钱仓。此外，公元780年，唐朝推行两税法，将过去的实物财政转变为货币财政。皇上对付豪族的手法变多了。

虽然有了这两样，大唐也没能恢复元气，只能苟延残喘。

知识传播技术更新，儒经的印刷兴盛，知识传播成本急剧下降，这就让宋代皇帝有机会从平民重大规模选拔人才充实官僚体系，对抗贵族。

从此中原社会开始不可逆的进入平民社会。

12 中亚——帝国的催化剂

中亚由于其本身地理特征，形成了很多自由城邦，强大的帝国也不能直接统治这些城邦，而是间接统治，这样城邦生活就不会有太多政治压力。中亚又位于中西方交流的通道，贸易兴盛，带来了大量财富。这种配置就很能形成高水准文明

中亚地理特征就是大山、大河多，绿洲被分割，维持统一成本较高。天山-锡尔河作为分界线，南部定居，北部游牧。统一的帝国行兄终弟及，最多维持几十年。

所以只能由外部大帝国统治，如东边的中国或西边的波斯。但是，成本一样很高，只好间接统治，外交国防由帝国掌控，其他一切绿洲自理。中国、波斯、阿拉伯、俄国都间接统治过西域。

有钱，没有太多政治压力，这里的人就有了时间仰望星空，思考一些大问题。也就有了宗教的活动空间。佛教诞生于印度本土，通过中亚传入中国，摩尼教/拜火教/张无忌的明教在波斯被捧杀/打杀，直到传到中亚才逐渐发展壮大。伊斯兰教继承古希腊哲学，把这些哲学进一步发展到很高水准，不同于今天的伊斯兰教，极其开放、包容。

当时的基督教确实很矇昧的，古希腊思想经过中亚传入西方，才重新发现古希腊哲学，最后奠定了欧洲文艺复兴的基础。

整个中世纪，中亚文明水平极高，在东西方世界处于没落时，反过来输送文明。直到新航道开辟，人均财富下降，才沦落。

13 回鹘

唐玄宗为了打击突厥汗国，扶植起的一个小胡人政权回纥，之后崛起，改名回鹘。

建国10周年后，赶上了安史之乱大红利，帮助唐玄宗平息叛乱，之后开始维持均势，让唐朝中央政府和地方藩镇之间互相制衡，从中收取保护费。安史之乱后，唐朝延续了150年，也和回鹘的干预有关。

回鹘接受了摩尼教作为国教，吸引来了中亚的粟特人，粟特人帮助回鹘文明化，发明了文字，帮助收取大唐保护费。

文明化的回鹘，开始琢磨改变自己的生后方式，修筑城墙，也是蒙古历代游牧帝国中，唯一筑墙的帝国。这样的后果就是丧失了机动性，游牧者兵民一体，生产-生活-战争密切结合的组织特征也发生分化。

最后，回鹘失去了他的战斗力、机动性，被西北方森林跑出来的突厥人部落打败。

亡国后的回鹘分几支逃亡，西迁的一支来到西亚，征服了当地游牧者，建立了喀喇帝国。回鹘人和当地波斯人混血，开始了中亚突厥化的过程。大部分回鹘人留在天山以北，有的回鹘人迁入天山-锡尔河以南，现在北疆的少数民族是黄色人种更明显，南疆少数民族是白色人种更明显，就和这段时间有关。

这时，中亚是伊斯兰教，外来的回鹘看到高度文明的中亚人，自然皈依。信了教的穆斯林也方便统治。这几件事加在一起，突厥人开始了伊斯兰化。


14 吐蕃

松赞干布是雪域高原最高领袖，被称为赞普，在他之前，雪域高原的事都是传说。

藏区高原，只有峡谷地带适合生存，因此最适合小部落的形式，那松赞干布如何统一雪域的？

精神上，引入佛教对抗贵族喜欢的苯教；物质上，去高原外——安多藏区的青海道搞钱，青海道直接连着河西走廊、西域，通过收取保护费，就足够对贵族形成碾压优势了。但是安多藏区是中原和吐蕃的过渡区，大唐也在争夺。

安史之乱，吐蕃控制了安多藏区，还攻占了西域的大片土地。之后开始和回鹘争夺西域。赞普的财源越来越多，对贵族的优势越来越大。他开始筹组自己的私人班底，从佛教的僧官发掘——从外看，赞普对佛教给予很大支持，实际上不过是为了对抗贵族的表现。

使用僧人多了，财政压力越来越大。

公元840年回鹘亡国，西迁的一支在甘肃张掖建立了甘州回鹘，在青海道进入西域的必经之路上，有钱不赚没道理。吐蕃财政当然受不了，再遇上老赞普遇刺，两年后吐蕃亡国。

之后的雪域高原，再也没能建立起统一帝国，只能靠组织成本低的宗教组织起来。教权因此有机会独立于政权。佛教与苯教结合，形成了藏传佛教。藏传佛教对西藏的统一有非常大的作用。


</pre>
</div>
<div tags="" title="核能">
<pre>《核不扩散条约》189个国家签署，是除了《联合国宪章》外全球最广泛签署的条约，各国都希望从中渔利。有核大国保障了安全，劝住了想要搞原子弹的国家，无核国家获得了有核国家的核技术，如核电站、医院放射性扫描等。但是，打算搞破坏和钻空子的国家，这个条约的约束力就比较弱。

目前全球的核威胁，不止来源于有核国家和无核国家，还有大规模恐怖组织涉核，有核国家分裂。

目前世界有九个有核国家，5常+印度、巴基斯坦、以色列、朝鲜。
美国6185、俄罗斯大约6000，中法大约300，英国215，朝鲜30。

只要有了高浓度的铀235和钚239，一般一周左右就可以把它变成核武器，低浓度的材料，3—12个月也可以变成核武器。

目前核电占全球发电10%。

</pre>
</div>
<div tags="" title="后冷战时代">
<pre>随着冷战的结束，曾经分裂的世界开始融合，开始了新一轮的全球化，这正是后冷战时代，世界最显著的特征。

与全球化浪潮一同到来的，还有反全球化浪潮。最初反全球化力量，往往是来自国际秩序中的一些弱势国家，比如911恐怖袭击。而最近几年，西方发达国家也出现了强劲的反全球化的势力，包括民粹主义和民族主义的崛起，体现为排外、反移民和脱欧现象。

世界两大趋势：
	1. 全球化，世界走向相互融合和依赖，强调人类的共同性。
	2. 逆全球化，或者称之为“部落化”，抗拒全球化。

对应这两种趋势，福山提出历史终结论，亨廷顿提出文明冲突论。福山写了一本书《历史的终结与最后的人》，亨廷顿写了《文明的冲突与世界秩序的重建》。

一个说历史终结了，一个说还没有终结，还有文明的冲突。福山的理论“预言”了柏林墙倒塌和苏联解体，亨廷顿的理论“预言“了911事件。

他们之间更深层的争论焦点，其实是”制度“和”文化“之争。就是制度的选择在多大程度上依赖文化？究竟是文化决定了制度，还是制度会改变文化？

福山认为，政治上的自由民主制，和经济上的自由市场资本主义，是现代化的结果，不属于任何特定的文化。只是因为首先在西方出现，就被人看成了西方的制度。这不是文化决定的。

而亨廷顿不同意，他认为福山低估了制度对于文化和宗教传统的依赖。自由民主政治和自由市场资本主义，都是高度依赖于西方文明，尤其是民主政治，这是基督教文化的特定产物。非西方文明很难接受西方文明的制度，日本只是一个特例罢了。

历史终结论和文明冲突论的争论仍然在进行之中，还没有最终答案。























</pre>
</div>
<div title="绘制人生地图">
<pre>埃里克森说，人生的发展过程，就是自我范围不断扩大的过程：青春期获得稳定的自我、建立亲密关系时变成两个人、更广泛的职业联系、关心下一代甚至人类共同体，自我的范围在不断扩大。

01 青春期 15~25

从青春期开始的人生前半段，是收集阶段。收集稳定的自我、亲密关系、职业认同和与之相伴的成就、声望、尊重。到人生的后半阶段，我们进入了分发阶段，我们把前半生收集的东西分法出去，去关心自我以外的他人，关心我们的下一代。我们从对下一代繁衍中获得人生意义，否则我们的生命就陷入了停滞的状态。

现代人的青春期普遍长一些，一般在15～25岁之间。这个阶段最重要的任务就是寻找和建立身份认同。一个人获得身份认同后，他就对“我是谁？”这个问题，有了一个确定的答案。否则他就是一个长不大的孩子。

为什么寻找身份认同是青春期最主要的任务？因为青春期本身就充满矛盾，它是一个断裂的过渡期。

生理上，我们要面对陌生的、逐渐成熟的身体和强烈却羞于启齿的性欲。

家庭关系上，我们要依赖父母和家庭，但另一方面我们又开始尝试脱离家庭，为自己争取独立空间。

社会上，我们一方面我们参与社会，另一方面我们对社会又一无所知。

这个阶段，阻碍我们发展最大的障碍是——对自我形象的过度关注，并且很在意别人的评价。一方面，我们很在意自己的容貌、才能，想要变得更好，另一方面，我们对这种“在意”本身，带着某种羞愧。

E.g.女生悄悄化妆，不想被人发现。有些落后学生不去上学，怕努力了成绩依然很差，被别人觉得蠢。

看起来，他们很在乎别人的评价，实际上，他们对别人真实的想法根本不感兴趣，他关注的还是他自己。青春期经常会有这种特别的自恋，因为我们不知道自己是谁，所以需要从别人的评价中，拼凑出自我的形象和概念。

这种假想的聚光灯下的生活压力，会带来两种反应：

一是对社会标准非常顺从。他人的评价成了我们自我评价的标准，我们选择的标准。如果得到别人赞扬，我们就很骄傲，得不到，就很自卑。顺从他人的评价，很难发展出坚定的身份认同，只会把他们变成特别听话的孩子。

另一种是对社会标准的非常反抗。很多青春期孩子通过反抗父母，来宣示自己合法的成人身份。成年人越是看不惯，他们就越是通过特立独行，来告诉成年人“我与你不同”，从而确认“我是谁”。不同之后呢？刻意的反抗也会变成另一种在乎，因为他们要确认的价值，建立在他们所反对的东西上。——顺从和反抗时同一种东西的两个不同侧面。

E.g.一个长发青年，认为周围人虚伪至极，学习工作都毫无意义。3年以后，他穿了一件白衬衫，扎起长发，开始迎接竞争。说“这个社会是很不公平啊，可是，我只管做好我自己的事情就好了”——他之前幻想的那个敌人轰然倒塌了，之后如果还有敌人，那也是类似“功课繁重”这类真实的敌人。

一个人获得身份认同的标志，就是为自我负责，以及学会容纳矛盾。

一些有利因素：
	1. 在专业的尝试中，他逐渐发现了自己的某些才能，并获得了信心。
	2. 遇到一个很好的、能欣赏他，并能被他视为榜样的老师。
	3. 有一群价值观相似、能够包容他做自我探索的同伴。

身份认同能够帮助我们从假想的被评价的关系中解脱出来，并获得一种自我认可的能力。因为这种自我认可的能力，我们和别人的关系，也就变得更平等。




02 成年早期 25~35

学会爱的能力

我们建立起了身份认同，有了相对稳定的自我，可是还不够。一个人总是很孤独的，需要寻找爱人，跟爱人分享自我，来克服这种孤独。建立亲密感，是成年早期的核心课题。

亲密感的建立是自我发展的一个重要里程碑，这意味着，你的生活不只有自己，还有了别人。


著名心理学家威廉詹姆斯，年轻时有抑郁症，他想通过思考哲学问题，帮助自己解脱出来，不过最终拯救他的，不是哲学观念，而是他结婚了。他结束了过度的自我反省，情绪也变成成熟，学术生涯进入了一个爆发期。

建立亲密关系为什么能够对自我影响这么大？两个人可以互相照顾，但更重要的是，亲密关系允许你暴露自己的脆弱，并把自己的脆弱托付给对方。当这些脆弱的部分在亲密关系中被接纳时，它们就不再是我们需要藏着掖着的秘密了，不再是我们需要从自我中排斥的部分了。它会整合到我们的自我概念中，让我们更能接纳自己，也变得更完整。这种自我身份认同的深化，是一种更深层次的照顾，远比身体上的照顾更重要。

要获得亲密感，我们需要克服3个障碍，它们都有自我中心倾向。

第一，害怕不被接纳。建立亲密关系，意味着你要把你自己托付出去，去依赖别人、信任别人。同时也意味着，你给了别人伤害你的权力。害怕这种依赖和托付，就是一种自我中心。

第二，害怕承诺。亲密关系是排他的，一旦承诺，就失去了和其他女生建立类似关系的可能性。害怕失去某种可能性，因此害怕承诺，是另一种自我中心。

第三，害怕被改变。亲密关系确实会挤压自我空间，需要你牺牲某些自主性，亲密关系会改变你的生活习惯、品位、情感表达，把你塑造成系统需要的样子，确实一个人会自由一些。

因为这些疑虑，我们不能真正和对方分享我们心里的秘密，所以作为一种折中的解决方案，我们就彼此戴着面具，一起配合着扮演一段亲密关系。人们假装亲密，却各自孤单。可是内心的空虚和孤独会告诉他们，他们并没有完成人生的重要课题。

怎么建立起亲密关系呢？

陈海贤的答案——发自内心的承诺。

即使错过可能性，即使你不完美，我也愿意去爱你。我愿意为我们俩的关系负责，我愿意接受关系的种种限制。因为这种承诺是自主的，就让限制变成了一种自由选择，限制就不再是限制了。这种承诺不是形式上的，而是发自内心的。

如果你完成了这种承诺，你就完成了人生这个阶段的课题，你获得了一种宝贵的品质——爱。这种承诺本身，就是爱的形式。

有时候我们没法建立亲密关系，不是因为我们找不到对的人，而是我们没法做出这样的承诺。承诺才是我们面对的最大障碍。有时候，做出了承诺，这个人就逐渐变成了那个对的人。

当然，关系的承诺不是一劳永逸的，关系本身也可能有变化，即使有变化，你在关系中获得承诺与爱的能力，不会轻易消失。

建立职业认同



工作的工资福利这些工作中外在的东西，相当于爱人的颜值，工作中的感受，相当于关系中感觉到的亲密感。亲密关系中，颜值高固然好，但真正关键的是，你们是否建立起来了能够分享彼此的亲密感。

同样，在工作中，真正让你感觉到幸福的，是你是否认同你所做的事情。

在寻找伴侣和工作中，我们都会遇到完美对象的幻想和失去可能性的焦虑。

稳定的亲密关系会带来内心的安稳和平静，投入自己喜欢的职业，也会让自己的心慢慢沉下来，并逐渐获得一种自信和成就感。


建立起职业认同，意味着你能接受职业背后的人际关系，并把它当作自我的一部分。职业的人际关系包含两部分，一是我们和工作伙伴本身的关系，二是我们与服务对象的关系。

职业有三个层次：生计、事业和使命

生计代表的是一种你被压榨、被逼迫、不得不为的关系；
事业代表的是一种平等、稳定、互惠的关系；
使命，则变成了一种你为职业对象服务、风险、甚至牺牲的关系。

正是对职业背后关系的认同，把你逐渐塑造成了一个有技能、被需要、肯奉献的专家，你也在这个过程中，扩展了你的自我概念。

如果把工作当作自我之外的东西，把它看作一种负担、一种苦差、一种临时之计，就好像你真正的生活从未开始，因为你不想要它。这种状态通常会让人焦虑。因为他不知道被社会接纳的依据是什么，或者能够为之奉献的东西是什么。就想一个老农，虽然也在耕地，但他知道这块地不是他自己的，那他就没有办法专心耕种。【就想租房的青年，知道房子不是自己的，就会焦虑】

心理学家范伦特说，职业认同的四个标志：


	1. 胜任感。你能胜任这个工作，你能在工作中体会能力的成长，并获得一种成就感。
	2. 承诺。你愿意投入到某个职业中，你会对这个职业保持某种忠诚，并把它视为你很重要的一部分。
	3. 报酬。你从职业中获得满意的回报。
	4. 满足感。职业跟你的自我没有什么维和的地方，就好像你在工作时，有一种很踏实、本该如此的感觉。你能把你所从事的工作，镶嵌在你的整个人生故事里，变成你整个人生故事中有机的一部分。

编剧中有个概念，叫做人物弧线，就是说无论剧情怎么变化，人物故事都是围绕这个线索变化的。有时候稳定的职业认同，就是在自己的人生故事中，勾勒出这种人物弧线。

工作和我们的人生故事其实是分不开的，真正的职业认同，需要把我们的人生境遇与工作产生深刻的联系，并把工作整合进我们的人生故事。这种观念人生故事的整合，是职业认同最关键的部分，也是让我们产生满足感最关键的部分。它负于了工作意义感，也继续回答了关于“我是谁”的问题，是自我身份认同的延续和深化。

把职业认同纳入到你的整个人生故事中，并认同这个故事。





03 中期 35～65

中年期是一个惊涛骇浪的时期。和青春期一样，这个时期，人的身体重新开始变得陌生，只不过这一次不是因为成熟，而是因为衰老。感情也变成了一件麻烦的事，孩子进入了青春叛逆期，父母开始生病甚至离世，而我们也不再满足于前一个阶段琐碎而日常的工作和生活，希望能够寻找到更深层的人生意义。

年轻时，从来不觉得是问题的“时间”，在这个阶段变成了问题，人们开始意识到，原来生命有限，自己也会衰老和死亡。害怕衰老，就是这个阶段的发展障碍。

我们害怕衰老时，我们究竟在害怕什么？身体机能的衰退是一个方面，但最大的挑战还是可能性的丧失。衰老和死亡的过程，就是把可能变成现实，把悬念变成答案的过程。

在中年时，你会意识到，生命中的可能性正在一点点消失。年轻时一些没做成的事，可能永远也做不成了，想在一起而没在一起的人，可能再也不会在一起了。

中年期危机的解决方案，并不在于追求这些外在的东西，而是内心的转变。

也有些人到了中年，渐入佳境，更成熟，更有经验，更有创造力。很重要的原因就是，他们把拖了小我的限制，他们和世界、他人的关系发生了变化，别人既变得不重要了，也变得重要了。

变得不重要，时我们不再那么在意别人的看法和评价，不再那么在意世俗意义上的规矩和成功，我们会遵循自己的内心做决定。变得重要，是我们开始关系自我以外的他人，尤其是我们的下一代，我们开始从他人的成长中，获得新的可能性。繁衍，就是我们在中年期要完成的发展课题。


塑造下一代

成年早期，你的注意力主要还放在自己的事业上。但是到了中年某个阶段，你自然会觉得，自己的事情不是那么重要了。孩子把我们从“小我”中拉了出来，自我的涵义，又一次扩大了。因为自我的扩大，自我的可能性危机，就变得不再是那么大的问题了。

繁衍感的本质，就是把我们自己奉献出去，让自己成为孩子的一部分。是从孩子的需要出发，承认孩子是一个独立的个体，并真正关心他们。而另一种占有式的爱，他们不是把自己奉献出去，而是把孩子拉进来，加强自己，让孩子成为自己的一部分。

只有奉献式的爱，才会发展出繁衍感，否则，你会在和子女的纠缠中，陷入某种停滞。

有些家长，不会觉得孩子的感觉是对的，而感觉自己才是对的，并一定要孩子认同。有时候，他们还会让孩子替代他们完成他们没有完成的愿望。比如自己学习不好，就希望孩子能够好好学习，补偿他们没有读好大学的遗憾。问题不在于他们让孩子完成自己的梦想，而在于孩子不接受时，他们怎么处理，一般都会带来很大的冲突。孩子无法在青春期发展出自己的身份认同——因为发展身份认同需要整合父母的期待和自己的期待，在他们身上，这两种期待时冲突的。

真正有繁衍感的关系，就是真的能为孩子想，甚至为孩子忍受和牺牲。比如，妈妈忍受孩子去外面世界闯荡的孤单。

关注孩子，一味的奉献，那岂不是失去自我了吗？——并不会，首先，具有繁衍感的奉献，尊重了孩子的独立性，也就尊重了自己的独立性；其次，当你把目光从自身移开，你的自我看起来削弱了，但也加强了。你失去了一些满足自己需要和欲望的机会，但同时你获得了另一种品质，关心。这种关心，变成了自我新的部分。

奉献自我的同时，你也在加强自我，也就是说，你其实是在通过爱孩子，学习怎么爱自己。

所以，在奉献自我的同时，你也在加强自我，这种奉献式的爱，就是我们克服中年期的发展障碍，走出中年危机的方式。





传承人生经验

在心理学家埃里克森的理论中，繁衍的含义非常广，比如在工作和休闲中保持活力、对生活怀有热情和好奇心、积极教导和关爱他人、为社会和他人谋福利、维护公平和正义等等，这些都具有繁衍的性质。

繁衍的核心含义，就是我们能够借助这些活动，突破自我的限制。否则，你就会在衰老的恐惧中陷入停滞。

繁衍有三种形式。

	1. 创造性的工作。创造一个作品就跟生一个孩子一样，原因是，创造就是通过你的劳动，把某些你之外的东西带到这个世界上来，一旦它诞生了，他就会独立于你存在。因为不断把独立于你的新东西带到这个世界上，创造就变成了一种突破自我限制的形式。所以很多从事创作工作的人，不容易有停滞感，而从事事务工作的人，会在中年陷入焦虑，并希望转向创造性的工作。
	2. 传承。年轻时获得年长者的帮助，人到中年开始帮助更年轻的人，这种传承广泛地发生在工作领域。传承包含了技术上和关系上的两方面含义。这两种传承都包含了某种形式上的自我超越，因此都有繁衍的含义。
		a. 越是重要的技术和经验，就越有传承的责任，如果你接受了这种责任，你就通过传承超越了自我。拒绝传承，就不会有繁衍的感觉，就很可能陷入停滞的恐慌。
	3. 回报社会的使命感。人是有很多限制，会老去，会死亡，可是当我们突破了这种自我中心，发展出广泛的繁衍感以后，当我们真正学着关心他人时，我们就突破了这种与生俱来的限制，拥有了一种超越衰老和死亡的豁达。

年轻人在寻找身份认同时，需要一个榜样和领路人，老年人面对衰老时，也需要一个指导对象帮助他发展繁衍感。年轻人和老年人相互需要，是人类发展出来的，突破自我限制，传承文明的特殊形式。

04 晚年：整合人生

无论你一生是否顺利，经历了哪些快乐和痛苦，你都把它作为一段独特的经历接纳下来了。你能接纳自己的生命是完整的、独一无二的。

如果不能完成整合，个体就会感到生命苦短，因为你还有很多事情没来得及完成。

自我发展的可能性和生命的有限性之间，存在着一种永恒的张力，这种张力永远需要你做出自己的选择。

整合有两种意义：
	1. 回顾自己的人生，找出一种意义来源。陈海贤外婆，家是最大的意义。浙大计院陈天洲教授，通过学术研究有了足够的繁衍感。
	2. 把自己纳入到更大的人类群体中，把自己看作是某种人类演化进程的一部分。

自然以超越自我的方式演化，我们只不过是这个宏大剧目中的一环。这个剧目，在我们出生之前早已开始，在我们离开之后，也还会继续。我们的去世就像一滴水放入了大海，你可以说它消失了，也可以说它获得了另一种形式的生成。

佛教认为，人痛苦的根源，就是把“自我”看作一个实在的东西，因此产生了对自我的执着，觉得自己的快乐痛苦欲望都是重要的。这只不过是一种幻觉，自我是因缘际会的产物，只是一个过程，要解除这种痛苦，佛教通过打坐修炼的方式，来参透“无我”的道理。

人生发展，也是一个走向无我的过程。只不过不同于佛教打坐，而是通过扩大自我的范围，建立亲密关系，投入职业，关心下一代，把自己交付出去。所以为什么说人生每个阶段最大的难题，就是客服各种形式的自我中心主义。

总有一天我们会死，这句话可以让我们陷入可怕的虚无，也可能让我们摆脱一些不必要的束缚，变得更有勇气。

陈海贤常常做一个想象练习，幻想自己垂垂老矣，然后回到年轻。


















</pre>
</div>
<div bag="default" created="20210702111212126" modified="20210702111401128" revision="0" title="机械预测" tmap.id="55daa3b3-bf7e-4109-940e-e24daa502722" type="text/vnd.tiddlywiki">
<pre>#确定若干个评分指标，最好不超过5个。
#打分，给每个指标设置一个整数分数区间。
#计算总分，不用加权，简单相加就行。

排除掉人的因素，预测效果也不错。</pre>
</div>
<div created="20210707081339563" modified="20210707090538726" tags="习大大" title="加强政党合作 共谋人民幸福">
<pre>&lt;$details summary="2021年7月6日习近平在中国共产党与世界政党领导人峰会上的主旨讲话"&gt;

尊敬的各位政党领导人，

女士们，先生们，朋友们：

　　很高兴在中国共产党成立100周年之际，同来自160多个国家的500多个政党和政治组织等领导人、逾万名政党和各界代表共聚“云端”，探讨“为人民谋幸福与政党的责任”这个重大命题。这段时间，170多个国家的600多个政党和政治组织等就中国共产党成立100周年发来1500多封贺电贺信，表达对中国共产党的友好情谊和美好祝愿。我谨代表中国共产党，向大家表示衷心的感谢！

　　几天前，我们举行大会，庆祝中国共产党成立100周年。100年来，中国共产党团结带领中国人民接续奋斗，推动中华民族迎来了从站起来、富起来到强起来的伟大飞跃。100年来，中国共产党坚持中国人民和世界各国人民命运与共，在世界大局和时代潮流中把握中国发展的前进方向、促进各国共同发展繁荣。

　　中国共产党和中国人民取得的历史性成就，离不开世界各国人民的大力支持。在这里，我代表中国共产党和中国人民，向关心、支持、帮助中国共产党和中国革命、建设、改革事业的各国政党、人民和朋友，表示诚挚的谢意！

　　女士们、先生们、朋友们！

　　当今世界正经历百年未有之大变局，世界多极化、经济全球化处于深刻变化之中，各国相互联系、相互依存、相互影响更加密切。为了应对新冠肺炎疫情挑战、促进经济复苏、维护世界稳定，国际社会作出了艰苦努力，各国政党作出了积极探索，展现了责任担当。同时，一些地方战乱和冲突仍在持续，饥荒和疾病仍在流行，隔阂和对立仍在加深，各国人民追求幸福生活的呼声更加强烈。

　　今天，人类社会再次面临何去何从的历史当口，是敌视对立还是相互尊重？是封闭脱钩还是开放合作？是零和博弈还是互利共赢？选择就在我们手中，责任就在我们肩上。

　　人类是一个整体，地球是一个家园。面对共同挑战，任何人任何国家都无法独善其身，人类只有和衷共济、和合共生这一条出路。政党作为推动人类进步的重要力量，要锚定正确的前进方向，担起为人民谋幸福、为人类谋进步的历史责任。我认为，政党应该努力做到以下几点。

　　第一，我们要担负起引领方向的责任，把握和塑造人类共同未来。人民渴望富足安康，渴望公平正义。大时代需要大格局，大格局呼唤大胸怀。从“本国优先”的角度看，世界是狭小拥挤的，时时都是“激烈竞争”。从命运与共的角度看，世界是宽广博大的，处处都有合作机遇。我们要倾听人民心声，顺应时代潮流，推动各国加强协调和合作，把本国人民利益同世界各国人民利益统一起来，朝着构建人类命运共同体的方向前行。

　　第二，我们要担负起凝聚共识的责任，坚守和弘扬全人类共同价值。各国历史、文化、制度、发展水平不尽相同，但各国人民都追求和平、发展、公平、正义、民主、自由的全人类共同价值。我们要本着对人类前途命运高度负责的态度，做全人类共同价值的倡导者，以宽广胸怀理解不同文明对价值内涵的认识，尊重不同国家人民对价值实现路径的探索，把全人类共同价值具体地、现实地体现到实现本国人民利益的实践中去。

　　第三，我们要担负起促进发展的责任，让发展成果更多更公平地惠及各国人民。发展是实现人民幸福的关键。在人类追求幸福的道路上，一个国家、一个民族都不能少。世界上所有国家、所有民族都应该享有平等的发展机会和权利。我们要直面贫富差距、发展鸿沟等重大现实问题，关注欠发达国家和地区，关爱贫困民众，让每一片土地都孕育希望。中国古人说：“适己而忘人者，人之所弃；克己而立人者，众之所戴。”发展是世界各国的权利，而不是少数国家的专利。我们要推动各国加强发展合作、各国人民共享发展成果，提升全球发展的公平性、有效性、协同性，共同反对任何人搞技术封锁、科技鸿沟、发展脱钩。我相信，任何以阻挠他国发展、损害他国人民生活为要挟的政治操弄都是不得人心的，也终将是徒劳的！

　　第四，我们要担负起加强合作的责任，携手应对全球性风险和挑战。面对仍在肆虐的新冠肺炎疫情，我们要坚持科学施策，倡导团结合作，弥合“免疫鸿沟”，反对将疫情政治化、病毒标签化，共同推动构建人类卫生健康共同体。面对恐怖主义等人类公敌，我们要以合作谋安全、谋稳定，共同扎好安全的“篱笆”。面对脆弱的生态环境，我们要坚持尊重自然、顺应自然、保护自然，共建绿色家园。面对气候变化给人类生存和发展带来的严峻挑战，我们要勇于担当、同心协力，共谋人与自然和谐共生之道。

　　第五，我们要担负起完善治理的责任，不断增强为人民谋幸福的能力。通向幸福的道路不尽相同，各国人民有权选择自己的发展道路和制度模式，这本身就是人民幸福的应有之义。民主同样是各国人民的权利，而不是少数国家的专利。实现民主有多种方式，不可能千篇一律。一个国家民主不民主，要由这个国家的人民来评判，而不能由少数人说了算！我们要加强交流互鉴，完善沟通机制、把握社情民意、健全组织体系、提高治理能力，推进适合本国国情的民主政治建设，不断提高为人民谋幸福的能力和成效。

　　女士们、先生们、朋友们！

　　为人民谋幸福，是中国共产党始终坚守的初心。今天，中国已经实现了全面建成小康社会的奋斗目标，开启了全面建设社会主义现代化国家新征程，中国人民的获得感、幸福感、安全感不断提升。办好中国的事，让14亿多中国人民过上更加美好的生活，促进人类和平与发展的崇高事业，这是中国共产党矢志不渝的奋斗目标。中国共产党将坚持以人民为中心的发展思想，在宏阔的时空维度中思考民族复兴和人类进步的深刻命题，团结带领中国人民上下求索、锐意进取，创造更加美好的未来。

　　历史告诉我们，拥抱世界，才能拥抱明天；携手共进，才能行稳致远。中国共产党愿同各国政党一起努力，让梦想照进现实，让行动成就未来，始终不渝做世界和平的建设者、全球发展的贡献者、国际秩序的维护者。

　　——中国共产党将团结带领中国人民深入推进中国式现代化，为人类对现代化道路的探索作出新贡献。中国共产党坚持一切从实际出发，带领中国人民探索出中国特色社会主义道路。历史和实践已经并将进一步证明，这条道路，不仅走得对、走得通，而且也一定能够走得稳、走得好。我们将坚定不移沿着这条光明大道走下去，既发展自身又造福世界。现代化道路并没有固定模式，适合自己的才是最好的，不能削足适履。每个国家自主探索符合本国国情的现代化道路的努力都应该受到尊重。中国共产党愿同各国政党交流互鉴现代化建设经验，共同丰富走向现代化的路径，更好为本国人民和世界各国人民谋幸福。

　　——中国共产党将团结带领中国人民全面深化改革和扩大开放，为世界各国共同发展繁荣作出新贡献。当前，经济全球化虽然面临不少阻力，但存在更多动力，总体看，动力胜过阻力，各国走向开放、走向合作的大势没有改变、也不会改变。中国共产党愿同各国政党加强沟通，共同引导经济全球化朝着更加开放、包容、普惠、平衡、共赢的方向发展。我们愿同国际社会加强高质量共建“一带一路”合作，共同为促进全球互联互通做增量，让更多国家、更多民众共享发展成果。

　　——中国共产党将履行大国大党责任，为增进人类福祉作出新贡献。消除贫困是各国人民的共同愿望，是各国政党努力实现的重要目标。中共十八大以来，中国现行标准下9899万农村贫困人口全部脱贫，提前10年实现《联合国2030年可持续发展议程》减贫目标。中国共产党愿为人类减贫进程贡献更多中国方案和中国力量。中国将全力支持国际抗疫合作，增强发展中国家疫苗可及性和可负担性。中国将为履行碳达峰、碳中和目标承诺付出极其艰巨的努力，为全球应对气候变化作出更大贡献。中国将承办《生物多样性公约》第十五次缔约方大会，同各方共商全球生物多样性治理新战略，共同开启全球生物多样性治理新进程。

　　——中国共产党将积极推动完善全球治理，为人类社会携手应对共同挑战作出新贡献。现行国际体系和国际秩序的核心理念是多边主义。多边主义践行得好一点，人类面临的共同问题就会解决得好一点。国际规则应该是世界各国共同认可的规则，而不应由少数人来制定。国家间的合作应该以服务全人类为宗旨，而不应以小集团政治谋求世界霸权。我们要共同反对以多边主义之名行单边主义之实的各种行为，共同反对霸权主义和强权政治。中国将坚决维护联合国宪章宗旨和原则，倡导国际上的事大家商量着办，推动国际秩序和国际体系朝着更加公正合理的方向发展。我愿再次重申，中国永远是发展中国家大家庭的一员，将坚定不移致力于提高发展中国家在国际治理体系中的代表性和发言权。中国永远不称霸、不搞扩张、不谋求势力范围。中国共产党将同各国政党一道，通过政党间协商合作促进国家间协调合作，在全球治理中更好发挥政党应有的作用。

　　女士们、先生们、朋友们！

　　道阻且长，行则将至；行而不辍，未来可期。前方的路会有曲折，但也充满希望。中国共产党愿继续同各国政党和政治组织一道，站在历史正确的一边，站在人类进步的一边，为推动构建人类命运共同体、建设更加美好的世界作出新的更大贡献！

　　谢谢大家。

&lt;/$details&gt;

大时代、大格局、大胸怀。 A需要B，B呼唤C。

大时代需要大格局，大格局呼唤大胸怀。

从“本国优先”的角度看，世界是狭小拥挤的，时时都是“激烈竞争”。

从命运与共的角度看，世界是宽广博大的，处处都有合作机遇。

各国人民都追求和平、发展、公平、正义、民主、自由的全人类共同价值。

中国古人说：“适己而忘人者，人之所弃；克己而立人者，众之所戴。”发展是世界各国的权利，而不是少数国家的专利。

通向幸福的道路不尽相同，各国人民有权选择自己的发展道路和制度模式，这本身就是人民幸福的应有之义。民主同样是各国人民的权利，而不是少数国家的专利。实现民主有多种方式，不可能千篇一律。一个国家民主不民主，要由这个国家的人民来评判，而不能由少数人说了算！


中国共产党愿同各国政党一起努力，让梦想照进现实，让行动成就未来。

现代化道路并没有固定模式，适合自己的才是最好的，不能削足适履。
</pre>
</div>
<div title="建设高质量关系">
<pre>我们都在关系之中

没有人是完全独立的个体，我们都处在关系之中。关系里的人，总是一起出现，相互定义，相互成就。

从关系的视角来看，自我就是不同关系里，自我的总和。

	1. 人无时无刻不在关系中。工作、家庭、城市、国家。
	2. 在不同的关系中，你的自我是很不同的。在熟人前很嗨，在陌生人面前脸红害羞。在家懒散，在办公室勤奋。
	3. 决定你行为的是你所处的关系，而不是你的个性。在外面冷酷霸道，在家洗内裤。
	4. 是关系的视角让思考的视角发生了重大转化，一些看起来似乎无解的问题，突然有了合理的答案。一对关系里，我们有拖延症，但是其他情况下我们绝对不会拖延，拖延症是关系的产物。

没有人是一座孤岛，可以自全。每个人都是大陆的一片，整体的一面。

评论学习：

我们的个性会根据不同的关系展现和产生。
关系不是给予的，是相互定义的。但你可以就形成某种关系，发出邀请。

关系——角色——自我

角色，最初来自于戏剧，是演员扮演的某种具有典型性格的剧中人物。这里的角色，是以一种行为期待，是关系里的人共同达成的隐性默契，这种默契很隐秘，不留心就看不到。在一段关系你，你随时随地面临着一些行为的期待，你随时随地扮演着某个角色。

角色会影响你怎么想、怎么做、怎么感受、怎么说话、怎么行动。

陈海贤对学弟，和对记者提出的同样问题，给出了不同回答，就是因为在这两段关系中，角色和位置不同。

E.g.一个职场大姐喜欢教导新人多多表现自己，但是她又不喜欢很会表现的其他新人。这个新人接受了大姐对他“不会表现，需要指导”的角色期待，也很享受大姐对他的照顾，但是，这个角色就让他很难改变。【我在村里，也不要一副需要指教的心，而是雷厉风行，说干就干。千万不要迟到！！！】

E.g.很多家长也没有意识到，他们把孩子放在一个“没有主动性”的位置，孩子也就把他们放在“什么事都有我妈，我爸”这样的位置。

调整角色三个方法：
	1. 在回应对方之前，先想想，他把你放在一个什么样的位置和角色上，而你真的想接受这个位置和角色吗？陈海贤面对热切的咨询者，会表现的冷淡一些，降低对方的角色期待，自己不是救世主，只是帮你看看问题的帮助者。
	2. 如果你和别人相处时，已经有一些不舒服了，那你就要思考，是不是我的位置和角色又问题了。通常这种情况，发生在我们没有在自己的位置上，而试图去为别人负责。小A留宿同学，让她可以安心在北京找工作，但同学和小A都把小A的角色放得太高，责任其实是同学的，不是小A的。「补充：不舒服也有可能是，我们把别人放在了一个他们不愿意接受的位置，别人没有达到我们的期待」
	3. 如果你对一个人有期待，不要在语言上要求他，而是要像你期待他的样子那样对他。前提是，你要真诚地相信他有你所期待的那一面。期待的力量是很强的。狐狸想吃鸡，等把鸡蛋孵出来后，小鸡都叫它“妈妈”，这种巨大的角色期待，让狐狸根本没法吃它们，而是承担起保护它们的角色。

从关系的角度看，我们在不同关系中扮演不同的角色，我们的自我就有了很多可能性。什么是个性？其实就是我们在关系中给你习惯扮演的角色，既是限制，又是改变的方法——尝试不同的角色，就是在发展自我。


	

==========内省时刻=============
我父母最大的角色就是老师了，所以我会觉得他们总是在评判指教我。

每个人都要在不同的角色里，扮演好自己。在人际交往时刻，要提前预判和这个人的关系是什么，我要扮演什么角色？不要串戏！

评论学习：教育孩子，把这种角色思维传递给他们，爸爸是一只考试熊，需要学习一个小时才能玩耍。
广告很多用角色趋势我们：父母辛苦了一辈子，我知道您是个孝子；您给最爱的人买一束红玫瑰吧。


关系的语言

关系中的角色决定了你的行为，而不是个性。从这个角度看，所有关系的沟通，都是一个隐性的角色分配过程。我们只能通过听和说，来处理这个角色分配过程中的，出现的问题——别人的角色期待和自己的角色期待发生冲突。

人们在沟通中，很少直接说关系，而是一般只说他们遇到的各种事情。不会听，就只能听到他们讨论这些表面的事情，会听，就会知道他们每句话背后，都是在说关系。【没想到我听的沟通课、关系攻略课，在自我发展心理学课上相交了。】

E.g.丈夫借钱给朋友没和妻子说，等朋友还钱后，告诉了妻子，妻子很生气。“你为什么不告诉我？”——表面上妻子生气不该把钱借给别人，实际上，在生气把钱借给朋友钱没和她商量。妻子在生他们关系的气。

人和人的互动，可以在两个层面理解：
	1. 表面上我们讨论的内容。比如丈夫和妻子讨论要不要借钱。
	2. 这些内容背后暗流涌动的关系。

只关注内容，不看到内容背后，牵动我们情绪的关系信息，就会造成人与人之间很多误解。通过语言，了解关系，这就是人际关系的密码。

E.g.年轻父母讨论要不要让孩子学奥数。实际是在和对方说，在孩子教育这件事上，我更有发言权。关系的问题不解决，这种争论是不会停的。妈妈决定丈夫每天加班，很少参与孩子的日常生活，怎么会知道孩子所需？爸爸觉得妈妈每天和孩子黏在一起，想插话都插不上，担心她把孩子教坏了。

E.g.妻子学习了心理学知识，觉得很有用，回去给丈夫说，丈夫却很排斥，说这些都是骗人的。表面他们在争心理学知识有没有用，实际上是在争，学了心理学知识的老婆，能不能对他们的关系更有发言权。老公不认同这一点，所以他才说心理学没有用。

内容是表，关系是里。

我们常说，对事不对人，但是关系的语言是相反的，对人不对事。

关系好了，什么事都可以谈。如果关系不好，谈什么事，都是在谈关系。

关系是基础，没有平等的关系，就不可能让人畅所欲言。领导像让大家提提意见，员工只会配合你演一个开明领导的角色而已。

只要有人的地方，就有关系，只要有关系，就有关系的语言，关系的沟通。关系的沟通，甚至比内容的沟通更加广泛，更加普遍。

E.g.双方吵架、观点冲突后，一方：
	1. 好了好了我错了
	2. 沉默
	3. 岔开话题

第一种，其实是在说，我不想和你说了，男女朋友这样说的话，女生一般会追问，“那你说说，你错在哪里了？”，女生其实在说“我不想你怎么敷衍我”
第二种，沉默是没有内容，但是从关系的角度看，可以表达很多内容。“我觉得你讲得不通道理，不可理喻，我不想跟你说话了”
第三种，“我不想听你说了，你说的话不重要”

从关系的语言来看角色的期待，无论人们表面上在争论什么，他们争论的有一个很大的主题，就是如何在角色期待上达成共识。

怎么解决角色期待的矛盾？
	1. 直面关系，讨论关系，才能解决关系的问题。关系的矛盾时很激烈的，它有我们最深层的爱与恐惧，所以人本能会回避讨论关系，而是通过沟通各种表面上的内容做隐晦的表达。【各种暗示，表白，等等都是这个套路】
	2. 学着从关系角度理解别人在说什么，并从关系角度回应别人说的话。“你为什么把我家的钱借给别人？”“老婆不是这样的，我也是很想告诉你，我就是有些担心你把我驳回了，我在同学面前会没面子”。
	3. 在讨论事情之前，先思考怎么才能在角色上达成共识。如果在关系中不舒服，就可以组织关系中的人展开讨论，努力达成共识。即使最后没有达成共识，讨论也有意义，这样我们会知道矛盾在哪里，不会为胡乱的猜疑而痛苦。

评论学习：
现在销售都是先搞好关系再让你心甘情愿买它东西，甚至骗子也是。
“怕老婆”其实是对于彼此关系复杂的一种无力的表现。
对待有偏见的人，先不要把他/她看成是一个不好的人，而是去发掘他的其他面，跟他的其他面相处。
老师所讲的关系，不是身份关系，而是行为背后给予行为、情感的期待。
遇到老是反对/反驳自己的人，可以直接问她是不是心情不好，或者是不是一定要反对我啊？


==============内省时刻=============

所谓情商，是不是就是能通过语言，处理关系的能力？




关系的互补——关系系统通过互动塑造你我

关系中的角色是怎么分配的呢？为什么我们扮演着一个自己不喜欢的角色，却仍然无法做出改变？

E.g.心理咨询大师米纽庆带妻子参加同事聚会，发现妻子和一群同事谈笑风生，他很吃惊自己从没发现妻子居然还有这种讲脱口秀的才能。他反省为什么没有发现妻子这一面呢？——太太一只在家相夫教子，没有机会表现，埋没了自己的一些才能，她为婚姻做出了牺牲。

婚姻是有牺牲的，这就是一种互补。推广开来，社会、家庭、公司，系统要运转起来，就需要不同的角色，有些人当了面子，有些人当了里子，哪怕百般不情愿。【天惹，我疫情期间在村里帮忙复印，而村长在窗口接待，指挥我，不就是这样的嘛！！！】

人在江湖，身不由己，角色是系统运转时逐渐生成的，而不是个人选择的结果。

E.g.家里很混乱，丈夫和儿子却都在玩，妻子下班回家虽然很累，却去会收拾。
妻子总是干活，心生怨气。就会有很多抱怨和控制，这种抱怨就会让儿子变得反叛，让老公变得梳理，就更想不到，也不想去为妻子/母亲做点什么了。妻子就更加抱怨自己付出那么多，却没什么会报，老公孩子还不体谅自己。

——从系统的角度看，无论是妈妈的劳累，还是妈妈的控制和抱怨，都是系统运转的结果。虽然身处其中自己很痛苦，很想改变，但因为系统运转的需要，他们自己也很难改变，这就是系统关系中的互补。

陈海贤的老师用阴阳哲学来理解，人与人之间的行为就像是一个拼图，是他们把彼此塑造成了现在的样子，来完成系统这个大拼图。互补性就想阴阳，彼此对立，但又矛盾统一。

三种不健康的互补关系：
	1. 家庭或团队里，一些人变得特别能干，而另一些人就会变得特别不能干。有一种爱，叫做“照顾得你生活不能自理”。家长帮孩子找工作，家长很急，孩子不急，家长看到更着急，解决方法就是，家长停止着急，克制帮孩子做事的冲动，把主动性还给孩子。妈妈照做了，过了段时间，儿子就自己出去找工作了。
	2. 系统通过把某个人变成一个有问题的人，来维持系统的平衡。老板很控制，员工很焦虑，就把焦虑投射到新员工身上，以达到平衡；临近高考的学生，通过抑郁症，让分居多时的父母走到一起。
	3. 家庭成员之间，角色错乱。某些人承担了其他人该承担的角色，并把所有人都固定住错误的角色上。儿子不听话，爸爸指责妈妈，妈妈伤心，儿子安慰妈妈、保护妈妈，妈妈的情绪影响儿子，儿子的问题加重，儿子问题一种功能，爸爸更加上火。指责者、安慰者、受害者——三个人都无法动弹。

人是有很多可能性的，不健康的互补关系，抹杀了人的可能性。让关系里的每个人，失去了改变和成长的机会。

改变某个行为，其实也是在重塑整个系统，所以阻力很大。



评论学习：
====

如果我们结成了一个家庭，
有了自己的孩子，
那么我们，
便不再是彼此独立的个体；

我们的家庭，
会像是板块咬合的陆地；

你在这里多一块，
我就在这里让出一块，
磨合出高峰和山谷，
磨合出全新的默契。

请记得我，
从这个世界上的一位陌生人，
变成了你身体的一隅；

请记得我，
用最独特的爱滋养过，
我最深爱的孩子和你；

请记得我，
如果我将在你，
离去之前离去。

=====

为什么很多独生子女即使成年了，再和父母生活在一起时，就会“丧失”自主性，父母也会觉得他们没长大？——关系系统

妻子如何改善抱怨控制但丈夫不为所动的局势？——停止指责抱怨。

===========内省时刻============
为什么我的2月，一个人在家隔离，学习效果非常好？系统变了，我必须靠自己，而不能靠父母，所以我就很主动，认真学习，规律作息。


不安全依恋——爱的牢笼

自我发展的核心问题，从个体角度来看，是创造新经验的问题，从关系角度来看，是如何构建有利于自我发展的新关系的问题。

什么样的关系最有利于自我发展？

——一种自主的、有选择的，但又能够为自己负责的关系。

这样的关系有两个特征：我们不会轻易被别人情绪影响，而是能自由地做出选择；我们能够不断探索新的关系，发现更多新的自我，而不是被绑在某段关系或某个角色中无法动弹。

自己和他人的感觉是如何被混淆的，责任是如何被混淆的，这些混淆带来哪些结果？

把人连在一起的底层动力是什么？不是利益，而是情感。而依恋，是人最强烈、最基本的情感。

依恋是孩子和父母，尤其是和母亲之间强烈的紧密的情感联系。健康的依恋是孩子安全感的来源，而如果依恋对象本身有很大的不安全感，就会让孩子觉得不安全，这就是一种不安全依恋。

父母逗婴儿玩耍，婴儿会很开心、很享受，这是安全的依恋；父母在谈话，讨论家庭工作的事情，没有把注意力放在孩子身上，婴儿也很安心，因为他知道父母在。他会东看看西看看，探索世界「孩子有了安全感是自我发展的前提」。但是，如果父母发生矛盾，婴儿就会很紧张——依恋就像一个情感通道。

E.g.一个女孩有很好的学历和教育，但是一直过得不开心，也没有谈恋爱，因为小时候父母关系不好，妈妈总是向她倒苦水。妈妈的痛苦，深深地植入了她的感觉中，有些感觉妈妈都忘了，她还帮妈妈记着，她分不清什么是自己的情感，什么事妈妈的情感了，她沉浸在妈妈的感情里，没有机会发展自我了。

如果我们心里装着太多母亲的感受，我们就很容易忽略自己的感受，情绪，感觉，需要，欲望，我们会把它们当作是不重要的东西，那我们的自我，就很难发展出来。

不安全感怎么影响自我发展？
	1. 父母的问题，尤其是母亲的烦恼占据了我们太多的注意力，我们就很难有好奇心去探索世界，也就很难发展出自己的技能。
	2. 因为习惯了观察别人的情绪，这种不安全感很容易让我们对别人的情绪敏感，无论家人还是同事、朋友。
	3. 不安全的依恋，让我们和母亲的关系变得更加紧密。就很难跟别人建立友情和爱情。而自我是在关系中发展起来的，如果没有丰富的关系，就很难发展出丰富的自我。

如何修复不安全感？既然旧的经验来自以往的关系，那我们需要在新的关系中塑造我们的新经验。带着依恋的焦虑，一点点接近和信任别人，在安全的关系中，慢慢塑造我们的新经验。



关系三角化：痛苦的夹心人


所谓三角关系，就是当两个人之间关系出现问题时，其中一个人或者两个人同时引入第三者，来减轻他们之间的情感张力，淡化他们的矛盾，从而让关系变得稳定。学生时代的死党密友经常是三个人，情侣一般也有一个最好的共同好友。

被三角化的人，会产生很多矛盾和困惑，别人的矛盾和情绪，就会变成他的问题，而他会被卡在这段关系中，很难出来。家庭治疗大师，发明三角化概念的鲍文甚至说：所有的精神疾病，究其本质，就是三角化的问题。

家庭里，孩子很容易被三角化，父母通过孩子来指责对方，或者父亲指责母亲，孩子就去保护妈妈。职场中，两个领导对立，下属吃亏。神仙打架，小鬼遭殃。——被三角化的人，很容易产生很大的情感压力。

三角化对自我发展的影响：
	1. 它很容易让我们产生防御性隔离。你们利用我把我卷入了你们的矛盾中，那我干脆离你们远一点。
	2. 扭曲我们的情感。有时候我们会站边，甚至我们需要顺从站边那个人，压抑对另一个人的感情，甚至表达对另一个人的愤怒。这就让我们自我的情感，不再是我们自己的，而被关系中的一方利用了，成了他的工具。
	3. 内疚和自责。觉得都是自己的错。

三角化最大的问题，就是固化了我们的某个角色，让我们没法自由地表达我们的情感、想法和立场。【系统通过把一个人变得有问题，以维持系统平衡】

都是你的错：为什么我们要相互指责？

	
关系不是个体的行为决定的，而是关系中各方相互配合，相互塑造出来的。

从个体行为去寻求关系不良的原因，容易陷入因果思维，因果思维讲究时间上先后顺序，就进一步导致了对错思维。关系是相互塑造的，对错思维塑造对立关系。

谁都指责对方，在对错的讨论中陷入了僵局。对错的标准是什么？常常是，“你没有顺我意”，往往之前还有一句话“你对我很重要”，要不然我就不会纠结对错了。正是因为你对我很重要，所以我很难接受你没有顺我意。

——这就是应该思维：我们不去改变我们的想法，而是要世界、自己或者他人按我们的想法运行。纠结对错，就是关系里的应该思维。

别人的想法和我们不一样，这就是关系中的现实，你头脑中再多的应该，“成绩好应该很重要”，“孩子应该听话”，“老公应该关心我”，都没法改变这个事实。

我们能够容忍这种差异，我们才会变得更灵活，有更多的处理空间。如果我们不能容忍这种差异，我们就在对错争论中拼命防御，最终受伤的，是关系。

关系里，人的行为是相互塑造的。根本没有什么明确的因果，也就没有明确的对错。

那没有对错，我们的关系该怎么办？谁来改变？

夫妻吵架，都是指责对方错误，即使不让他们继续这样说，他们会通过说怪话，表达都是对方的错。

她改不改是她的事，你可以把目光放到自己身上，你怎么做，是你唯一能控制的事情。回到自己，承担自己能承担的责任，是突破对错思维最直接的办法。

可能我们会觉得憋屈，凭什么是我改？我们当然不是必须这样，关系是允许破裂的，如果一段关系真的让人很不舒服，你可以从这段关系中离开。你愿意改变自己，去修复这段关系，那一定是这段关系对你很重要，你很珍惜它。

你一边说珍惜这段关系，一边不愿意改变自己，而是一遍遍尝试让对方改变，哪怕你的经验已经证明了这么做没有效果，那这就是你的错了。




都是我的错

流浪猫效应：我们有时候会觉得我们很重要，甚至能够影响朋友的决定，能够为他们的人生负起责任。但是，无论出于什么样的善心，助人者和求助者之间都应该有边界。帮助别人时，我们要警惕我们的好心突破了边界，最终破坏彼此的关系。想别人求助时，也要注意不要越界，给别人留下不好印象。边界就是，我们需要承认和尊重彼此的独立性。


人总是有亲近的渴望，因为这种渴望，我们总是希望我们能够承担别人的痛苦，但是，我们要承认我们自己的限度，不是我们爱心不够，而是我们能力不够。边界就在那里，很客观，我们只能遵守。

相比于朋友，家人的边界更难遵守，爸爸妈妈不能解决自己的矛盾，子女就会把他们的矛盾当作自己的问题。我不够乖，父母才吵架，我成绩不好，爸妈才有矛盾。久而久之，我们就会形成一种思维习惯：在其他人际关系中，每当别人生气时，我们就会觉得是自己做错了什么，才会这样。

为什么我们会把明明不是自己的责任，扛到自己肩上呢？原因就是，我们宁可忍受这样的内疚和自责，也不想承认，在这么重要的关系里，我们居然无能为力。

都是你的错，和都是我的错，他们通常成对出现，母亲指责孩子，母亲会越来越愤怒，孩子越来越内疚、抑郁、自责。两个人都不舒服，但常常无法改变。

即使是最亲近的人，我们也需要承认，我们跟他是不同的人，有些困难，只能他自己去面对和解决，有些决定，只能他自己来做，无论他的决定在我们看起来有多糟糕。因为说到底，每个人都只能为自己的生活复杂——我的生命我复杂，你的生命你负责。




亲密关系如何伤害人？


关系的纠缠：我们批次紧密联系，又相互折磨，想要脱离，却无法改变。

这种纠缠常常发生在离你很近的人身上，而自我发展需要独立的空间，所以需要有边界。

关系纠缠有两个特点：
	1. 所有的纠缠，都包含了相互加强的循环。父亲希望儿子乖一点，儿子呢，就故意倔，父亲忍不住就打儿子，儿子就更生气，更加反着来。
	2. 所有的纠缠，都有形式上的对称。父母期望一个听话的孩子，因为孩子不听话而生气，孩子期望能有通情达理的父母，因为父母不够通情达理而抱怨。

这样就无解了。


如何打破这种纠缠呢？——从我的环节入手。

你不要去试图改变妈妈，到你这里停止了，循环也就被打破了。你就停在这里，承认你没法达到妈妈的期待，妈妈也不够同情达理。你也许会内疚，会失望，但你要承受，自己去处理，因为这也是独立的代价。

有时候别人不按照我们的想法办事，哪怕是我们亲近的人。就是因为没法处理自己的内疚和失望，我们才会希望妈妈来解决这个问题，才会让关系继续纠缠下去。

我们真正害怕的，也许不是内疚和失望，而是情感上的远离。原来我们真的只能过好自己的生活，哪怕最亲近，最在乎的人，我们也没有办法通过牺牲和改变自己，让他们高兴起来。——这就是关系中的事实，我们不愿意承认这个事实，我们就会陷入痛苦的纠缠。

所有的纠缠，都是不愿意承认对方和我们有差异，也不愿就此放手。

关系中的纠缠，常常伴随着相互伤害。对这种伤害的处理，又很容易变成一种新的纠缠，我们不会因为受伤而离开，反而希望对方看到我们的受到的伤害，希望对方醒悟，能够道歉。期待对方道歉，就是另一种形式的纠缠。

也许对方会道歉，但你要花多少时间等这个道歉呢？

怎么摆脱伤害？

不是给对方宽恕，而是给自己空间，让自己能够摆脱关系的纠缠，去发展你自己。Forgive，这就是所有纠缠最终的解决之道。



课题分离，拥有高质量的关系


我们人家关系的烦恼，主要的根源就是：分不清什么是别人的事，什么是我的事。这样的结果就是他很容易变得敏感内向，容易受他人情绪的影响，活在别人的评价和期待中，把别人的期待变成自己的期待，把别人的情感当作自己的情感。

自我发展成熟的标志，就是越来越能分清楚别人的事和我的事，别人的情感和我的情感。自我的边界就是通过这种区分确立的——这就是课题分离。

怎么区分这件事是谁的事？看行动的直接后果由谁承担。

3个典型难题：
	1. 很多人不知道怎么表达自己的需要。我们总是依据我们想象中别人的回应和看法来决定我们应不应该表达，而不是根据自己的真实需要。我们遭到过拒绝，我们就很难表达。我们不能把自己变成一个探测他人需要的敏感雷达，而看不到自己的需要。
	2. 很多人不知道怎么拒绝别人。我们担心别人说我小气，但别人提出请求，是别人的事，别人有困难，他就应该提出请求。可是接受还是拒绝是你的事，不能因为自己拒绝有困难，就抱怨别人不该提请求。你拒绝了，别人如何评价你，那又是别人的事了。
	3. 我们总是害怕失败而不去尝试。当我们害怕失败时，我们在害怕什么呢？说到底还是害怕别人的评价。

这些都是没有区分课题。


亲密关系中，更需要课题分离。父母给孩子爱，过分关心，其实是把孩子的课题承担了；孩子继续希望服务照顾，也是把自己的课题推脱出去。都没有分清楚什么是我们自己的事，并把自己的事做好。

课题分离，就是人际关系中的控制两分法。把我们能做的事做好，因为归根结底，每个人都只能做好自己的事情。如果我们把自己的事情做好，把别人的事留给别人操心，那我们就不会担心别人的评价，那我们就不会被人际关系的烦恼而困扰了。

课题分离的本质不是分离，而是为关系中的选择留下空间。

非暴力沟通

课题分离把我们的事和别人的事分开，当我们需要合作时怎么办呢？非暴力沟通。

情侣之间吵架，常常是这种模式：如果一方感受到了委屈，不会向对方表达这种委屈，而是用同样的方式报复，让对方也感受到不舒服。

马歇尔·卢森堡博士发明了一种特别的沟通方式，叫做非暴力沟通，专门用来解决人们在沟通时的矛盾和冲突。他本人还因为这套沟通方法获得了诺贝尔和平奖的提名。

非暴力沟通四要素：观察、感受、需要、请求。

观察强调，把“我的观察”和“我的评论”分开，把事实和我的意见分开。在评价所塑造的关系中，评价者和被评价者的关系是不对等的。评价者高高在上。

表达感受，把“我的感受”和“你的行为”，就是表达我的情绪和感觉，而不是我的想法。因为想法也是一种评价。而真实的感受是一种邀请，通过把我真实的，甚至脆弱的部分暴露给你，邀请你来跟我真诚地理解和沟通。我们自己才是我们情绪和感受的根源，我们需要为自己的感受负责，让别人对我们的感受负责，就有了指责的味道了。【而我的感受为什么不好呢？是因为我的需求没有达到，不是因为你的行为。】

直接说出我们的需要，把“我的需要”和“对方的期待”分开。不是以批评的方式提出来。我们越是对自己的需要不确信，我们就越容易在提出需要之前，用长篇大论说明我们所提的需要是合理的。我们就很容易陷入一种自我辩护的立场，我们在想，怎么能说服他，而不是表达自己的需要，聚焦的重点就是对方的反应。

提出请求，告诉对方我们希望他们做什么，而不是命令。命令就是，如果他们不答应，就会受到惩罚。女生用分手提要求，其实就是命令。

女生该如何表达自己想加名字？

你没在房产证上写我的名字，我很失望，因为我很想和你有更紧密的联系，我很想减少婚后可能的矛盾和猜忌。


关系是如何进化的？

自我发展的三个阶段：

	1. 自我阶段。人以自我为中心，觉得全世界和他人都是围绕着他们的需要来运转。他就自然会把自己的需要和愿望，当作是别人的需要和愿望，把自己关注的中心，当作别人关注的中心。当他们发现自己关心的问题别人不关心，别人只关心自己想关心的问题时，他就会觉得惊讶，并感到深深的挫折。
	2. 他人阶段。人意识到了别人不是围绕自己来运转的，就开始让自己迁就别人运转。于是他就生活在别人的目光和期待中，觉得别人的评价、赞许、关心、愤怒都是很重要的事，他就会变成一个老好人，不敢确认自己的需要和价值，因为没法满足别人的愿望深深地内疚和自责。这个阶段，就会遇到各种人际关系难题。
	3. 独立阶段。我们终于能够在一定程度上，分清楚什么是别人的课题，能够把自己和他人分开。我们开始能够理解他人，也能够尊重自己。别人再也没法限制我们，除非我们想要接受这种限制。我们变得自由了，所做的事也更发乎本心了。

独立，去掉了人与人之间习以为常地用控制和期待维持关系的方式，在一定程度上，也意味着孤独。

孤独，也许才是人生的真相，说到底，这个世界上，没有人能够完全理解另一个人，也没有人能完全为另一个人的生活负责。拥有是人际关系中最大的幻觉，没有人能拥有一个人，我们只是在各自的旅途中相遇，彼此同行。

独立之后，遇到别人的请求，我们不再是不得不帮他，而是出于爱和同情，自由地选择是否帮助别人。只有在独立了，你才能真正自主地，以一种成熟的姿态投入到一段关系中。

没有什么样的关系是一定的，只是，别让自己过得那么苦就好。更不要明明是自己让自己过得那么苦，却还要怨别人。

关系就是这么神奇，它让我们迷失，也让我们重新找回自己。只有放下对关系的纠缠，我们才知道自己真正想要的是什么。




















</pre>
</div>
<div title="近代转型">
<pre>01 太平天国

鸦片并不是白银外流的原因，国际白银供给减少才是——18世纪后期，日本禁止白银大规模出口，法国大革命，之后入侵西班牙，导致西班牙殖民地美洲银矿供给减少。

白银一短缺，经济就萧条，大清把白银短缺归因于鸦片贸易，最终引发鸦片战争，割地赔款，开放口岸。之前只有广州开放，现在五口通商，大陆内部的运输通道很多就荒废了，大量运输工人失业，恰巧此时大清人口膨胀到极点，两广地区基督教盛行，最终发生了太平天国起义。

在镇压起义中，大清发现原来的叱咤风云的八旗子弟不顶用了，于是只好起用汉族官员，让他们想办法，曾左李胡（胡林翼）菜走上了历史舞台。朝廷给不了钱，只好给政策，允许他们征收厘金充作军费，厘金就是各省运送商品的过境税。这就使得地方对于中央财政的依赖变小了，中央对地方的控制力下降。八九百年来的平民社会，逐渐发展起来一种强枝弱干的状态。埋下了分裂的种子。

与太平军打仗时，人们也发现冷兵器不顶用了，于是向洋人买军火，用洋枪洋炮轰倒了南京城墙。从此中国进入了热兵器时代。热兵器和冷兵器有很多不同，热兵器你不能生产的话，也至少要会修，就需要复杂的社会分工，这种分工只能在中原做到。

自此，大清的财政秩序、军事资讯、人才秩序、精神秩序，全部转为中原地区的汉人主导了。享受特权的满蒙族人，越来越不能被人忍受，就埋下了革命的种子。

在外部，太平天国时期，大清对世界的理解也出现了巨大变化。之前天朝上国的认知被打破，国与国之间的朝贡体系，变成了国与国之间通过国际条约确定彼此关系。六部没法处理这种条约，为了专门处理这种条约，设立了总理各国事务衙门，也被称为总理衙门，一方面作为外交部，一方面主导开启了洋务运动。

之后十几年，白银供给充足，西方国家开始实行金本位，抛售白银储备黄金，白银源源不断地流入中国，相当于作为国内货币的白银贬值，一方面刺激了中国的出口，另一方面吸引了西方来大清投资，洋务运动就这样欣欣向荣地搞起来了。

02 左宗棠借力伦敦，收复新疆

中国在世界上的位置，是大陆帝国和海洋帝国的中介位置。

太平天国起义，帝国无暇处理边疆问题，野心家阿古柏趁势而起，俄国出面占领伊犁，“替清政府保管”，这样也是为了分担激进的伊斯兰力量。而英国希望中亚不被一个势力控制，支持清政府收复新疆。

于是，汇丰银行贷给清政府1500万两白银，大清用海关税收作为担保。而这个钱是哪儿来的？不是靠储户的存款，而是到伦敦金融市场发行债券，通过发展完成的融资，借给大清平定内部叛乱。

大清没有想到，虽然打了败仗，半推半就地加入了世界秩序，却让帝国获得了全新的能力。从此，海洋开始通过中国向大陆输出秩序。

03 南洋华人对中国的塑造

从宋朝开始，中国向海外开支散叶，依靠福建东南沿海的宗族关系。这种关系怎么来的？——地理决定的，北方地平，跑个几千里地，方言都能听懂，但东南沿海，只要翻过一座山，就听不懂话了。和方言相似，帝国的秩序在北方更加强势，在南方，宗族势力强势。等一个宗族的人去海外后，通过老乡带老乡的方式，逐渐把人吸引过去。宗族为个人分摊掉风险。

这样几百年就建立了一个庞大的环中国海贸易网络——南洋。

等南洋被西方殖民后，开始将秩序反向输入回大陆。比如，挣了钱寄回家里，就建立起来汇款通道。

宗族给了华人安全，但另一方面，却限制了华人的视野。人们只关注自己同宗同族的人，所以很难扩展这种共识。中国人由于人口多带来的内卷化输入到东南亚，引得当地劳工不满，同时宗族抱团，引得当地豪强不满，于是纷纷排挤华人。华人被迫从宗族认同走向国家认同，民族主义情绪开始浮现。

孙中山认识到了这种趋势，通过组织和宣传，向海外华人表示：如果我们有一个强大的中国，你们也将会受到保护。海外华人大力支持革命，孙中山说“华侨是革命之母”。孙中山闹革命的钱，有85%是南洋来的。

狭义的南洋，大都是东南沿海人，能动员的力量有限，五口通商后，口岸城市、租界，组成了一个广义的南洋，这些广义南洋的力量就更强，动员规模更大。从此中国进入了革命的世纪。

04 英国秩序下的中国角色

英国是同时具有国家性和世界性的国家，主导者全球的贸易体系和金融体系。

拿破仑当时称霸欧洲大陆，但发现搞不定英国，于是宣布要把英国封锁在大陆市场之外，结果被英国反封锁于全世界的市场之外，最后法国被困死；二战中，德国也和英国这么来了一回。可见英国的世界主导能力。

为什么英国有这种能力呢？
英国是大社会，小政府，他就有大同内政和外交，从而主导世界秩序。议员们是社会的传声筒，社会中各种利益博弈，最后都进入到议会中辩论。比如海外扩张，是社会行为，而不是国家行为，社会遇到困难时，请求国家力量出面，具体通过游说的方式。

	1. 利益集团花钱游说，并不是行贿。
	2. 不要看到利益集团就觉得它在绑架社会，于是要打击利益集团。其实这是人性、人类社会的常态，要打击的不是利益集团，而是不按规矩行事的利益集团。
	3. 利益集团根据自己在一线市场的经济感受，调整游说费用，从而影响国家政治决策。

所以不要问英国的利益是什么，要问商人的利益是什么，商人的利益，就是寻找到稳定的市场、扩大贸易规模、减少管理成本。

开发殖民地其实很费钱，除了印度外，英国在19世纪以前几乎不占领殖民地，而是扶持当地统治者，让他们向英国开放市场。从这个角度，就可以理解，为什么英国打中国是为了开放市场，签了条约之后极力保护中国的统一。

05 俄国秩序下的中国角色

俄国有一种西方国家没有的特殊命运观，俄国认为自己这个国家承担着一种神秘而又神圣的历史责任，就是要通过承担苦难，完成对全人类的救赎。这种命运观来自于耶稣基督对人类的拯救，耶稣就是弥赛亚（救世主），俄罗斯帝国就是个弥赛亚帝国。

弥赛亚帝国的精神来自于古罗马帝国——第二罗马帝国（拜占庭帝国）——第三罗马帝国对于基督教，尤其是东正教，精神的继承。拜占庭帝国末代皇帝被奥斯曼土耳其帝国战死，他一个侄女逃到俄罗斯，与莫斯科大公结婚，跟古老的罗马皇族联姻，之后这个莫斯科大公就自称“凯撒”，凯撒是罗马皇帝的头衔，俄语发音为“Tsar”（插儿），汉语译成“沙”，最后成了沙皇制度。拜占庭帝国灭亡后，俄罗斯就自视为罗马继承人了，称为第三罗马。所以现在俄罗斯的国会上有双头鹰标志，这就是自认罗马继承人的标志，比如德国、奥地利、南斯拉夫都这么做。

第三罗马，自然要继承罗马帝国的弥赛亚使命，也就是通过自己的苦难替人类赎罪，就像耶稣一样。他们要通过苦难的磨炼，战胜苦难，证明自己弥赛亚民族的独特使命。苦难在俄罗斯人眼中被审美化了，他不是一种悲惨的命运，而可能是一种珍贵的礼物。正是因为这种精神，俄罗斯民族总是能在绝境中奋起，在绝望中获得胜利，获得战斗民族称号。

无论是拿破仑，还是希特勒，在把俄罗斯打到特别痛时，俄罗斯的潜力马上激活，小宇宙爆发，绝地反击。苏联的布尔什维克革命，它的精神结构就和弥赛亚帝国很像。列宁提出俄国是世界革命的中心，相信通过俄国革命，将引起联锁反应，使全人类获得解放，这就几乎是弥赛亚命运的新时代版本。这就是为什么俄罗斯民族对共产主义有特殊感情的原因。

与苦难相伴的，就是俄罗斯深刻的不安全感。主要原因也是地理，俄罗斯一马平川，没有任何自然屏障，经常被入侵，这也是个苦难啊。于是，俄罗斯从16世纪开始疯狂地对外扩张，一方面扩张土地获得足够的战略纵深缓解不安全感，另一方面通过扩张实现国家的弥赛亚使命。

所以俄罗斯对于占领土地有特殊的情感，对于大清，甚至长城以北的地区都有意思。俄罗斯计划直接吞并东北，改名为“黄俄罗斯”，这里土地肥沃，还有一个太平洋不冻港。在中亚地区，他的对手是英国和中亚本土力量，在东北和蒙古，主要对手是日本，还有到处都有贸易利益的英国。

大清没办法保住东北，英国只好扶持一个盟友制衡俄国，于是1904~1905年日俄战争爆发，英国支持日本，日本胜利。日本已经证明了比大清强，为了确保东亚领袖的地位，不能得罪英国，也没有公然侵吞东北。

大清的龙兴之地被占领了，当然要有所为，在张之洞的建议性，大清让东北遍地开放，把尽可能多的列强都引进来，以夷制夷。这就让东北在之后几十年的时间里，成为中国经济最发达的地区。

苏联继续完成弥赛亚命运。马克思认为无产阶级革命最应该在发达国家爆发，因为那里的资本主义足够成熟，阶级矛盾足够激化。列宁调整了一些，认为发达国家阶级矛盾不如俄罗斯这种半发达国家激烈，所以革命最早从俄国这种帝国主义链条最薄弱的环节爆发。这一观念和弥赛亚命运观相同。但是十月革命后，发达国家并没有发生连锁革命，于是列宁又给出解释，发达国家拥有庞大的殖民地，可以掠夺巨量财富，从而赎买了本国无产阶级，弱化了革命意志，所以发达国家不革命了。

在这一思想的指导下，苏联成立了共产国际，一个重要任务就是让落后国家闹革命，即使是民主主义革命，也可以让帝国主义失去殖民地，从而没办法赎买本国无产阶级，最终实现全球革命。【这就解释了为什么斯大林要帮蒋介石】

06 日本秩序

日本没有强大的内生文明，只能向外部学习。早期向中国学习，后来向西方学习。学习者这种角色，就让日本始终有一种精神焦虑，因为要仰视别人，总觉得自己低人一等。

公元663年，白衣江之战，盛唐打趴日本，日本认为大唐是最高文明，向唐派出使者学习，甚至将首都京都按照大唐洛阳城建设，方方正正，南北向大道叫朱雀大道，东北洛阳城，西边长安城，上朝叫上洛。可惜越学越自卑，因为是山寨的，总是低人一等，有日本人因为这个事痛苦万分，痛哭流涕。

满清入关后，日本发现一个精神压制中国的机会，叫“华夷变态论”，认为中原被夷狄占领了，不是中华了，我们日本保留着最精粹的儒家文明，我们才是中华。只不过这种思想在当时并不能被认可，当时只要尊儒重道，就可以默认你继承了天命，对于统治者的血统不是很在意。

200年后，西方人到来，日本终于抓住一次机会，只要比中国学得快，就可以超越中国。日本由于国土狭小，民族单一，迅速转型，后面通过甲午海战，掀翻了一千多年来的东亚秩序，通过日俄战争，栖身列强队伍。日本大量翻译西方著作，输入给中国，像政府、组织、政治、干部、方针、政策、纪律、服务都是我们从日语里借鉴过来的。日本人终于扬眉吐气了。

日本摆脱了中国对其的精神压制，却又落入西方人的精神压制中。在巴黎和会上，日本人“民族平等”的议案被列强无视，日本深深的受到伤害，你们西方人口口声声说的自由平等，只不过是压迫有色人种的工具，既然这样，就必须把你们打倒。日本从此埋下野心。

日本要动员更大的资源，才有可能和西方一决高下，于是，“大东亚主义”，“大东亚共荣圈”被提出来。日本想征服中国，从而主导东亚秩序，但他没意识到，20世纪已经是一个民族主义的世纪，日本人永远不能征服中国了，因为血统不对。

日本人一边侵略中国，一边怪中国抵抗，中国不了解日本的雄心，居然和英美站在一起。可是从中国的角度来说，我们历史上一直是东亚世界的大哥，你日本算老几？虽然当时中国国力不济，但是中华帝国几千年的记忆，让中国不会向日本低头认输。同时中国的超大规模人口与国土，可以拖住日本，打持久战。

被中国拖住了，资源不够用了，只能打南洋，南洋资源多。但南洋是白人殖民地，就只能和白人撕破脸，撕破脸就干脆彻底撕破，于是进攻南洋，偷袭珍珠港。因此奠定了败局。

日本的面积、人口、经济，放到欧洲就是个大国，但放东亚，和中国一比，就怎么看都不是个大国。这就让它一直处在精神焦虑中。我们必须要理解日本这种焦虑，从而处理好中日关系。































</pre>
</div>
<div tags="自我成长" title="精力管理">
<pre>中年危机真实存在：一方面，人身体开始衰老，另一方面，生活、工作对人的要求不断增加。精力管理是提升清醒时间里面的工作状态。


好的精力=充沛的体能+积极正面的情绪+随时可以聚焦的注意力+明确的意义感

心肺能力好的人，大脑供血、供氧、供糖都更好，长时间工作不容易疲劳。

意义是人活着的最高追求，是驱动我们做事的底层逻辑，是人生的操作系统，是精力的最终源泉。尼采说，“知晓生命的意义，才能够忍受一切。”

!01 运动

每周至少150分钟的中等强度有氧运动，每天半小时，一周5天；
最好是300分钟，每天一小时，每周五天。

中等强度就是最大心率的60%～70%。最大心率是220减去年龄。我的是116～136。

找到适合自己的运动项目，总会有的，找到了就不会无聊了。
建立反馈机制，天天称体重，形成目标——测量——反馈正循环。
碎片时间运动。

研究显示，3个月的每天一分钟HIIT能让海马体增大，记忆力加强。

!02 吃

我们的清醒与睡眠受体内两个节律影响，昼夜节律和内生平衡节律，后者的机制就是，睡得越久越容易醒，醒的越久越容易睡。

下午两三点时的困意，除了受昼夜节律和内生平衡节律作用外，饮食也是一个重要原因。尤其是高碳水饮食，高碳水饮食容易变成糖，让血糖快速升高，从而导致胰岛素快速分泌，引发色氨酸进入大脑，色氨酸是褪黑素的重要原料，褪黑素越多，人越觉得困。且吃的太饱，大量的血来到消化道，大脑供血下降，也会觉得疲惫。

所以要想下午不犯困，一定要注意白天的饮食，维持血糖的稳定。

1.少吃多餐，三顿变五顿。上午10～11点，吃一把坚果或水果，下午3～4点，吃一点零食如蓝莓、草莓或坚果。
2.吃低糖、综合营养指数高的食物。NQI，营养质量指数，指营养素与食物热量的比重。其数目越大越好。ONQI，综合了所有营养素，加权得分。

3.多喝水。体重除以32，我每天要喝2.3升水。根据尿颜色深浅判断，黄了就多喝。

!04 睡

精力旺盛不等于睡得少，要成为专家，就要睡足觉。美国国家睡眠基金会推荐，成人每天睡7～9小时。

没事别上床，上床就放下手机，准备入睡。

床头准备一本比较难的书或外语书，让大脑疲劳。

!05 常见职场疾病

腰颈肩疼痛

因为长时间静坐、身体姿势不当。
	1. 保持正确姿势。
		a. 平视电脑，而不是低头看电脑。
		b. 腰部不要悬空，后面可以放一个靠垫
		c. 手肘可以放桌上和椅子上，大臂和小臂呈90度角。
		d. 膝盖自然弯曲90度或更小，分摊大腿压力。
		e. 站立交替办公。
	2. 维持正常体重。
	3. 练习背部肌肉
		a. 米字操
		b. 小燕飞
		c. 蛙泳

代谢类疾病
胖子脑子萎缩得更快，记忆力和注意力也更差。
控制吃。看第3节。

消化道疾病

痔疮——有规律地运动、吃粗粮
胃病——幽门螺杆菌；饮食不当引起的肠胃炎。饮食不规律，会导致胃酸分泌异常，刺激胃黏膜，如果躺下，灼伤食管。晚餐不要吃太晚，出门带一些高质量的零食，如坚果、水果和酸奶，配料只有牛奶和益生菌的纯天然酸奶。

!06 掌控情绪

情绪有3个特点/定律
	1. 人脑在一个时段只能主要存在一种情绪；
	2. 相比于正面情绪，人更容易产生负面情绪：为了生存，担心一下总是好的。
	3. 人可以通过自主训练来控制情绪：每天保证正面情绪3/4，才能维持积极情绪正循环。

激发情绪：
	1. 热启动练习（Priming）
		a. 呼吸练习
		b. 感受心跳
		c. 回忆值得感恩的事
		d. 想一想值得改善和庆祝的事
		e. 想一想3个目标
	2. 情绪标签法 mental nothing
		○ 给情绪打标签【我觉得原因就是让理想重新掌控大脑】
	3. 把焦虑的事情写下来并列出相应对策
		○ 我的思维导图方法
	4. 运动

!07 高效使用精力

——也就是上面两层，注意力和意义感。

专注的三个技巧：
	1. 设定尽可能清晰的目标
	2. 把大脑的碎片信息清除出去，如奇妙清单
	3. 把最好的时间留给最重要的事，通过一些仪式感进入冲刺心流的状态。我们脑子对于困难时期有天然的抗拒，比如写文章、学新技能、定战略、进行重要对话，都会非常拖延，转向刷朋友圈、抖音，要想成为高手，一定要改掉这种习惯！！
	4. 工作一段时间，休息下，比如45分钟。

找到意义感——人生的意义在于用自己所长服务他人。
	1. 自己喜欢
	2. 自己擅长
	3. 别人需要
这就是你的使命，也是你的意义感来源。

一个人生命中最大的幸运莫过于在他人生的中途、在他年富力强的时候发现了自己的使命。——斯蒂芬·茨威格。

一个人有了意义感，人生就有了灯塔、事业就有了方向，做决定也就不再纠结了。


!张遇升的一天：

晨间7件事：
	1. 起床：双手搓脸、梳头发、简单拉伸、回忆梦境
	2. 叠被：收获满足感，强化整洁的自我认知
	3. 喝水：激活身体与大脑
	4. 刷牙：用不常用的手，单腿站立、深蹲
	5. 做情绪热启动练习：
		a. 呼吸练习
		b. 感受心跳
		c. 回忆值得感恩的事
		d. 想一想值得改善和庆祝的事
		e. 想一想3个目标
	6. 在手机上记录下今天最重要的3个目标，并在大脑里想象完成的快乐
	7. 准备健康、营养含量高但热量低的早餐
		a. 全麦麦片、坚果、蓝莓、酸奶搅拌在一起
		b. 蔬菜、水果打成汁
		c. 不吃包子、馒头

上午：

上班：走路
工作：站着、坐着交替；45分钟一个循环，休息5~10分钟，做一做身体训练或走一走
11点：八段锦

午饭：一整碗青菜，然后吃鸡胸肉、鱼肉等蛋白质，最后如果不够的话吃面条、米饭等碳水化合物

午饭后不午休，打电话，整理一下今天工作进展。打电话时，在公司走动，做一些简单的拉伸

下午：

45分钟一循环
在休息时查看奇妙清单，工作时全身心投入
下午1：15分钟囚徒肌肉训练
下午2：15分钟冥想练习


5公里内的距离：骑共享单车
旅行时：带上跑鞋、弹力绳、游泳衣
下班回家：如果没有走到1万步，下楼走完

睡前七件事：

	1. 花几分钟做一个冥想
	2. 热水泡脚，有时和太太
	3. 把第二天早上喝的水准备好
	4. 回顾一下3个目标有没有完成
	5. 看一下日程表，是不是把时间花在重要事情上了
	6. 对第二天日历简单准备下，看看有没有要注意的
	7. 看一看床头的睡前读物，几分钟后睡觉

	
</pre>
</div>
<div tags="人物 哲学" title="卡尔·波普尔">
<pre>在现代性困境时，人们发现理性无法解决价值难题；在阿伦特对道德的反思中，人们发现理性很难应对道德困境；在人类三大永恒主题，真善美之中，只剩下求真，理性传统还能坚守自己阵地，毕竟搞科学研究，还是理性最擅长。

但是，卡尔·波普尔，对这块阵地发起了冲击，他的质疑直接指向了科学理性本身，他的思想成果改写了启蒙传统下的科学观和真理观。他既是科学哲学家，也是政治哲学家，他在政治和哲学上的观点也是贯穿始终——人类是容易犯错的物种，这时人类固有的特征。不管在科学还是政治中，我们摆脱不了“可错性”（fallibility)。

人会犯错、试错方法、纠错机制，虽然现在时常识，但是经过了一番惊心动魄的论辩，才成为常识，这很大程度上归功于波普尔。

证伪主义：科学理论的标志不是它能够被证明是对的，而是它可以被证明是错的。这种概括基本正确，但容易引起误解，科学家并不是追求证伪，或者科学理论必定会被证伪，而是理论本身必须包括“经验上被证伪”的可能性，就是你不能事先排除掉任何出错的状况。

科学的“正确”究竟是什么意思？波普尔给出的回答是：科学的正确永远是一种不彻底的正确。

波普尔17岁时，遇到两件大事。一是给阿尔弗雷德·阿德勒当助手，他发现，精神分析学不管遇到什么样的事实证据，都能自圆其说。二是他开始热衷于爱因斯坦的理论，两年后还去听了爱因斯坦在维也纳的讲座，爱因斯坦提出了广义相对论，另外根据广义相对论提出了3个推论，其中一个推论就是“太阳光偏折现象”，被英国科学家观测到了。

爱因斯坦表示：如果观测和结果和理论预测不符合，那广义相对论就错了。如果观测结果符合理论预测，也不意味着广义相对论就绝对正确，无法超越。这种态度与精神分析学形成了强烈反差，让波普尔无比钦佩。

地震是由驮着大地的大象崴脚导致的，和地震是由阴阳失调导致的，前者符合科学理论的条件，只要挖到地底下，就可以检验；后者能够解释所有情况，就不是一个科学的理论。

一个理论算不算科学理论，首先不是看它的对错，而是要看它是否能够接受事实的检验，是否可能被证伪。波普尔认为，这才是区别科学与非科学理论的试金石，他把这叫“可证伪性”。从这个意义上来说，科学理论不可能是“彻底正确”，因为它自身就包含着被证伪的可能。

波普尔从爱因斯坦的表达中受到启发，意识到证实和证伪是不对称的。一个理论被证实一百次、一千次，也不能证明它绝对正确，但只要被证伪一次，他就被推翻了。这种不对称性，就对传统的“归纳法”构成了挑战。

比如看到一只天鹅是白色的，一百只，一千只，一万只天鹅都是白色的，于是就归纳出一个普遍命题：凡天鹅都是白色的。但是，你保不齐某一天就会遇见一只黑天鹅。

罗素说：一只每天被主人喂食的鸡，怎么也归纳不出有一天自己会被拧断脖子。维特根斯坦也说，我们之所以采用归纳法，是因为它和我们的经验相协调的最简单的规律，但它没有逻辑基础，只有心理学基础。

那怎么看待被反复验证过的科学知识呢？科学发现的传统方法是，观察事实——归纳理论——证实理论，波普尔认为科学发现的逻辑应该是：先提出问题，然后针对问题提出理论猜想，再用事实证据来检测这个猜想。如果检测和猜想相符，就保留这个猜想，如果一直没有反面证据，就一直维持这个猜想的暂时有效性，如果出现反面证据，我们就放弃这个猜想，构想新的猜想，进入下一轮检测：科学发展就是这样一个猜想与反驳的不断试错过程。

波普尔就这样重新定义了科学发展的逻辑，用可证伪性代替了可证实性，避免了归纳法来动摇科学逻辑的基础。这也意味着，科学无法到达绝对真理，一个理论一直没被证伪，也不能说它是真理，因为没有人能保证未来会不会遇到反例，会不会遇到那只黑天鹅。从这个意义上，科学永远只能获得暂时的正确性，这就是不彻底的正确的深层含义。

波普尔认为科学知识一种特定的认知方式，并不是启蒙传统以为的那样，能够在思想领域一统天下。他其实是科学至上论的批判者，科学并不是“有意义”或“有价值”的同义词，也不是“正确”或“真理”的代名词。




波普尔科学哲学思想中，他认为理性能达到的“正确”也只是一种“不彻底的正确”，他把这个思想延伸到社会政治领域，就形成了他更为基本的哲学思想——批判理性主义，简单来说就是两句话：人类有理性，理性有局限。

人类是一种“问题求解”动物，遇到问题，寻求解决方案，找到方案获得进展，但在解决方案中又会诞生新的问题，循环往复。在这种问题求解模式中，波普尔总结出“批判理性主义”，这个词想同时强调理性的作用和理性的自我批判，也就是理性及其可错性：理性体现着我们能够找到解决问题的办法，可错性体现在，人类的办法总是不完美的，总会出现新的问题。人既是理性动物，又是会犯错的动物，所以人类总是会一边进步，一边犯错，再从错误中学习。我们向前迈进，但又永远无法抵达绝对真理。

在科学领域，波普尔批判了科学至上论，在政治领域，波普尔批判了“乌托邦社会工程”理念。波普尔不反对一切社会工程，而是反对“整体主义”，在空间维度和时间维度上的全方位贵哈，在空间上涵盖了所有社会领域，在时间上从现在规划到未来。这种整体规划低估了可错性，缺少变通。这些规划背后有一种观念，叫做“历史决定论”，就是认为历史是被一个铁的规律所决定，只要我们掌握了这个规律，就能制定出完美的蓝图来整体改造社会。

在《历史决定论的贫困》一书中，波普尔认为，我们并不能发现那个历史发展的铁律，或者说人类社会发展的绝对真理。因为对于自然科学，人类都无法找到永恒的真理，对于更复杂、变量更多的人类社会，就更不可能找到所谓绝对正确的法则。

该书第二个观点是，人类社会还有一个特点，就是人类知识本身就是影响历史发展的一个重要变量，因此历史进程无法被决定。就想马克思主义，不过他把著作藏起来不发表，资本主义可能已经灭亡了，可惜马克思把理论公布于世，资本主义的内在矛盾被揭露了，成了人类的知识。工人阶级去学习，资本家也可以学习，他们就意识到改良资本主义的必要性和紧迫性，就会去提高工人工资和福利，改善他们的劳动和生活条件，这样就缓和了劳资矛盾，改变了至少是延缓了资本主义灭亡的进程。

所以，历史决定论在根本上无法成立。

在《开放社会及其敌人》一书中，波普尔认为信奉历史决定论，会在思想上把社会发展的可能性封闭起来，塑造一个“封闭社会”意识形态。与其相对的事“开放社会”，就是以开放的态度接受理性的批判。

开放社会也需要社会工程，但不是那种整体主义的工程，而是一种菱形社会工程，或者说渐进社会工程，通过不断尝试和纠错的机制实现社会发展。它和乌托邦社会工程有三个重要区别：
	1. 前者着眼于克服最紧迫的恶，后者要追求最终极的善。
	2. 前者要寻求改善人们命运的合理方法，而后者也许有着极其善良崇高的意愿，但在实践中却可能加重了现实的苦难。
	3. 从历史上看，渐进式的改良基本能够成功，而试图整体性的创造乌托邦的规划，基本上都会引发悲剧，最终背离了自己当初的目标。

波普尔说，缔造人间天堂的企图，结果是造就了人间低于。


波普尔最突出的成就在于，他推动力启蒙理性主义的改造升级。文艺复兴以来，启蒙理性主义创造了无数伟大的成就，但它也繁衍出了科学至上论和绝对真理观的倾向，这种倾向在20世纪愈演愈烈，波普尔对这种倾向的批判，最初被当成是异端。波普尔不是要颠覆整个理性主义传统，而是要修复和升级这个传统，最终形成了“批判理性主义”。

理性是有局限的，要警惕科学的自负和决定论的危险。

评论学习：
之前施展老师和李筠老师在知识城邦进行答疑，我问了两位老师这样一个问题，你从历史中学到的最重要的东西是什么？
施展老师：我从历史中学到的最重要的东西，就是人类的理性绝不可以过度狂妄，人类的秩序能够成立并向前演化，本身就是个奇迹，根本不是理性能够把握得了的。理性能够起作用，但是在各种理性规划的互动博弈当中起作用，而最终形成的结果，与任何人最初的理性规划都不同。这是一种伟大的演化力量，试图用理性去把控它，一定会遭致失败。
李筠老师：我学到了，人可以有所作为，也必须有所作为，但要乐天知命，知道界限，知道敬畏。

波普尔写信的对象应该是著名经济学家哈耶克。在徐瑾老师的经济学大师课中对他有讲到。在此分享四个有关哈耶克的信息：
1、哈耶克是犹太人，1947年，他发起一个新自由主义学术团体，这就是后来大名鼎鼎的朝圣山学社。知名学者米塞斯、奈特、弗里德曼等，包括我们课中所讲的波普尔，都是学社成员。
2、上个世纪三十年代，在经济学史上有两场大辩论，影响了数亿人的生活，被认为是史上最经典、最著名的经济学决斗。这两场重要的经济学辩论，哈耶克都参加了。第一场，是社会主义是否可行的辩论；第二场，是他和凯恩斯关于经济的大讨论。第一场，他是助攻；第二场，他成主力。辩论结束后，围绕两人观点，后人也形成了各自的理解。使得他们的辩论，几乎贯穿了整个现代经济学史。
3、上世纪四十年代，哈耶克完成了自己的重要著作《通往奴役之路》。其中，他对大政府主义展开了深刻的批判。并指出，当大政府以公共利益的名义，剥夺公民自由的时候，人类离奴役社会也就不远了。哈耶克一生做的唯一大事，就是捍卫自由市场。我想这可能就是波普尔欣赏他的地方。
4、哈耶克不仅在1974年获得诺贝尔经济学奖，还在1991年荣获美国总统颁发的自由勋章。我最欣赏他的一句名言是：“坏的制度使好人做坏事，好的制度可以让坏人做好事。”













</pre>
</div>
<div tags="自我成长" title="科学减肥">
<pre>!为什么要减肥？

肥胖在形成后的每一分钟，都会破坏我们的心脑血管、肝脏、肾脏、胃肠道、免疫系统，最终可能会导致心梗、中风、糖尿病、抑郁症、性功能障碍，甚至肿瘤。

减肥失败的第一大因素，其实是心理奔溃，而不是健康。

长期坚持减肥，除了健康，更是为了美，为了魅力，为了社会竞争力。

减肥的本质，其实是换了一种人生。减肥成功的标志，是人换了一种健康的生活方式。



!三体

体重指数（非体重）BMI，亚洲男性的BMI应该在18.5~24之间，女性是18.5~23之间。

体脂率：男性15%~18%，女性20~25%。

体型：男性腰围&lt;85cm，腰臀比小于0.9，女性腰围&lt;80cm，腰臀比小于0.8


!科学减肥第一性原理

能量守恒，是科学减肥的第一性原理。所有的方法，都是从这个理论构建出来的。

减肥的方法，就是打造能量缺口。日积月累，人自然会瘦。

能量有5个出口：
	1. 基础代谢。多一公斤肌肉，多消耗13卡热量，相当于几口奶茶，聊胜于无。
	2. 消化吸收食物需要的能量。需要吃得越多，南辕北辙。
	3. 维持体温。产热和排汗都会耗能，但不好利用。
	4. 睡眠减少。但睡眠减少会增加食欲，减少脂肪分解，身体也受不了。
	5. 运动和日常体力活动。这是唯一可控制的。

能量3入口：

	1. 碳水化合物。一克碳水，4大卡热量，吸收率70%。纤维素不会转化为任何能量，还会减少人对糖类、脂肪的吸收，是减肥利器。
	2. 脂肪。一克脂肪，9大卡热量，吸收率96%。吃进去的脂肪只要消耗不掉，基本都会存储起来。而且还很难消耗。
	3. 蛋白质。一克蛋白质，4大卡热量。蛋白质不会存储，而是当成工具利用。减肥期间，蛋白质不能停，没千克体重要补充1~1.5克蛋白质。

! 减肥成功只有一条正路


所有减肥方法中，全球科学家公认的首选方法是——生活方式干预。

科学减肥的方法只能是生活方式的养成，生活方式调整就是减肥的阳关大道。

饮食——运动——心理，这3个因素组成了一个3角形，缺一不可。

! 减肥是吃越少越好吗？

控制能量缺口在500~750大卡之间，低于或高于都不行。500大卡相当于一包一百克薯片的能量。按照这个能量缺口，每周体重会稳定下降0.5~1kg。

怎么设计呢？
看标签。
饮食拍照。
制定每日餐单，把每天吃的食物，减去500~750大卡的热量。

1千焦约等于1/4大卡。

饥饿只是身体感受，并不代表身体需要。

吃的总能量低，不代表就要少吃，节食。

如果进入了平台期，说明能量缺口不存在了，身体消耗在减少，就重复拍照和设计餐单的过程。

!饮食选择

	1. 食材越少加工越好
	2. 食物越完整越好。水果比果汁好。
	3. 脂肪要选择天然不饱和的。水里游&gt;天上飞的&gt;地上走的。坚决不吃人造的反式脂肪酸。容易导致心脑血管疾病，增加腹部肥胖。它们在蛋糕、面包、饼干、冰淇淋中。
	4. 蛋白质越纯越好。鱼肉、虾肉、鸽子肉、兔肉、鸡胸肉、鸭胸肉、驴肉、牛瘦肉、羊瘦肉、猪后腿肉和大排肉。

早饭一定要吃，晚饭不超过9点。采取2-1-1法则，餐盘一半放上4两水果和半斤蔬菜，剩下1/2留给2两肉肉，剩下1/2留给3两全谷物主食，如糙米、全麦面、土豆、山药、南瓜、玉米。

! 饮食方案

最四平八稳、容易坚持、长期效果不错的饮食方案——地中海饮食。

碳水化合物，包括主食、各种蔬菜、水果占据金字塔的底部，每天吃得最多；
往上一层是各种豆制品、奶制品，也每天都要吃；
再往上一层，量少一些，橄榄油、坚果，也是每天都要吃。
再往上则是鱼肉、虾肉、鸡肉、鸭肉，每周最少吃两到三次；
最上面是甜品、猪肉、牛羊肉，每周可以有一次。
这种饮食模式营养均衡，碳水化合物占到总能量的50-60%，脂肪是20-30%，蛋白质是20%左右。虽然没有低碳水饮食、低脂饮食或者极低能量饮食那样明显的短期效果，但长远来看，却是一种最容易坚持、也最不容易反弹的方式。

! 燃脂运动

运动一定能减肥，但必须搭配生活方式管理。而运动，就是形成新生活方式的原动力：运动产生的多巴胺让人快乐，每次运动完后，我们对于自己的控制感、信心也会不断增强。这就会反过来促使我们改变原有生活习惯，形成新的生活方式。

饮食是减肥的灵魂，但运动确实灵魂的伴侣。没有伴侣，灵魂走完这段漫漫减肥路的孤独可想而知。

燃脂运动的要求
有氧：快走、慢跑、游泳、骑车、爬山。快走是减肥成功率最高的运动。
强度合适：使得无氧代谢不会过高，心率控制在（220-年龄-静息心率）*0.6~0.75+静息心率
运动时间要长：中等强度有氧训练至少需要30分钟

一句话：长时间的低心率有氧运动。

除了减脂，还需要塑性：减小腰围，增大臀围，只能靠力量训练。
减腰围靠减内脏脂肪和皮下脂肪，内脏脂肪靠有氧运动，皮下脂肪要靠腰部肌肉运动。臀围要锻炼臀大肌、臀中肌，通过深蹲、平板支撑、俯卧撑。臀部一翘，腿部的视觉效果会拉长5~10CM。

! 心理因素

压力和睡眠是减肥路上，心理因素的两个主战场。

压力过大时，皮质醇水平提高，会影响人体对脂肪的分解；压力大时，瘦素对大脑释放信号会被阻断，代谢水平降低；压力最可怕的，是改变我们的认知模式，削弱我们的信心，引起焦虑、担忧，最后导致我们放弃，暴饮暴食。

设置短期小目标；自我监测（每天称个体重，拍个照）；主动舒缓宣泄（冥想、正念、太极、聊天、八卦、抱怨）。

一场6~8小时的睡眠，可以消耗400~500大卡能量，相当于跑了10公里。少了的话，会让人分泌刺激食欲的激素，多了的话，消耗能量也不会增加。所以最好6~8小时，不多也不少。

深度睡眠时，瘦素分泌增加，饥饿感也会减少。增加深度睡眠的方法，就是让身体累一点，大脑轻松一点，睡前4小时不吃东西，水果都不行。睡眠要规律，体内激素分泌才不会紊乱。

! 近瘦者瘦

在自己圈层间设置减肥标杆，打造完美减重社交圈。

首先是另一半；其次是关系亲密的朋友；最后还可以寻找在减肥的圈子。

主动输出，个人减肥心得、进展、失败，达标的运动计划，吃的东西，搞不清楚的问题。

! 减肥药物

效果最强的减肥药物，都不如生活方式管理有效。

! 减肥手术

BMI指数大于40，或者BMI指数大于35且患有糖尿病，推荐做减肥手术。

减肥手术不是抽脂，而是通过不同的方式把胃变小。确实有效。




物理层面上，食物消化地不够充分，人为地造成了消化吸收不良，使得吸收的热量变少，血糖也会降低。化学层面上，“胆汁酸”激素会增加，影响我们的肠道菌群会和味觉系统，让我们偏爱蔬菜、水果，不那么喜欢糖类、脂肪。“胰高血糖样肽”激素也会增多，它能减缓我们胃排空速度，减少饥饿感，存进胰岛素分泌，改善胰岛B细胞的敏感度。神经传导上，人的食欲会降低，从而减少能量摄入，最终实现减肥降糖的效果。

! 轻断食


《庄子·逍遥游》不食五谷，吸风饮露。

轻断食的好处有3类：

1.帮助减肥。
2.治疗疾病。控制血糖，降低血压，减少哮喘，提高记忆力，改善认知功能，预防阿尔兹海默病，帕金森。
3.延长寿命。动物实验获得了确证。


在断食8-12个小时后，饥饿会启动第一波代谢改变。这时候，身体里的糖已经消耗完了。没有了糖作为第一手能源，身体只能分解脂肪，把分解出的酮体作为能源物质；紧接着，这些酮体会启动神经内分泌传导信号，告诉我们的细胞核，“身体没有能量了，快想办法”；细胞核收到信号后，会启动一系列的自我保护效应，包括降低蛋白质合成、提高胰岛素敏感性、增加坏细胞的自我清除等等。

人体细胞感受到饥饿的威胁后，就激发了节约能源、保护自己的求生欲望。这种自我保护效应，又会激发心脏、肝脏、大脑、胃肠道等所有器官的潜力，提高表现，准备应对压力。
这还没完。在轻断食期间，为了适应环境改变的压力，我们身体的每一个细胞都会进行系统性修复，把自己的损伤修复好；而在轻断食结束、进入恢复期之后，正常的进食、良好的睡眠，又会把身体带入一个细胞生长、功能性组织重建的全新状态。这样往返交替，最终就达到了修复和新生的效果。

这里额外说一句，如果没有饥饿，我们的细胞都吃得饱饱的，它们在做什么呢？“温饱而思淫欲”，对，它们在忙着繁殖。毕竟对于生命来说，繁殖和传承永远是最重要的任务。但是，如果总是忙着繁殖，细胞就会忽略对自身的修复。损伤得不到修复，慢慢积累得越来越多，人也就不健康了。
你看，身体和宇宙是相通的，都蕴含了“福兮祸之所倚，祸兮福之所伏”的道理。


轻断食这一天，一般500~700大卡热量。

选择升糖指数低的食物，让自己饿的慢一点。

保证每千克1g以上的蛋白质摄入。这样免疫系统才会正常工作，可以选择低脂牛奶、鸡蛋、瘦肉这些食物作为蛋白质来源。

保证维生素和纤维素的补充。

轻断食的频次：轮替着来，每周不超过3天；5+2，每周任意两天轻断食。

第一个月，每周只有1天轻断食，这一天可以吃到1000大卡食物，从早8点到晚6点，10个小时内吃完。这个月不难吧？
第二个月，我们每周增加一天，2天轻断食，每天还是1000大卡，进食时间减少到8个小时。其他日子里正常吃。
第三个月，还是每周两天，每天减少到750大卡，进食时间缩减到6个小时。
第四个月，每周两天，每天再少吃一点，减少到500大卡，进食时间还是6个小时。


! 科学减肥

减肥成功后，运动需要保持在每周200分钟以上。


! 代餐

代餐真的能减肥，而且效果还不错。

























</pre>
</div>
<div tags="人物 哲学" title="克尔郭凯尔">
<pre>存在主义思想之父、哲学家克尔凯郭尔说，在信仰问题上，我们唯一的选择只有鼓起勇气“纵身一跃”。为什么要纵身一跃？要跃过什么？为什么要鼓起勇气？

克尔郭凯尔在22岁日记里写下“我真正缺少的东西，就是要在我内心里弄清楚：我到底要做什么事情？问题在于，要找到一个对于我来说‘确实的’真理，找到一个我能够为此而生、为此而死的信念”。

对于人生意义这类问题的思考和关切，就是哲学家说的“终极关怀”。它之所以终极，是因为它是追寻的是所有答案的答案。要给出这个答案，你得有所依据，这个依据就是人生信仰，或者人生理想。

即使不去想这些大问题，在日常生活中，有两大难题，我们永远无法逃避。人在精神层面需要面对两个巨大的难题，一个是死亡，一个是贪欲。

死亡是一种可能性，它很残酷，它是一种可以终结其他所有可能性的可能性。人终有一死，但人的意识里还有“永恒”这个概念，这两者的对比就会让人在内心埋下一种深刻的悲哀。所以我们会悼念逝者，也会为自己的死亡而恐惧、忧虑。

人毕竟是一种生物性的存在，会有一些原始的、动物性的欲望；但人又同时是精神性的存在，有良知、正义、道德感。就像“人终有一死”和“永恒”对比，原始的欲望和“崇高“也形成了对比。这种对比会让我们觉得羞耻、不甘，严重时会觉得我们生命很卑微。

宗教的解决方案：基督教讲“灵魂拯救”，人肉体死了，灵魂可以永生；虽然凡人是卑微的，但只要信仰虔诚，就能达到崇高。
非宗教的解决方案：学习雷锋好榜样，“人的生命是有限的，为人民服务是无限的，我要把有限的生命投入到无限的为人民服务之中去”。他把生命献给无限的事业，短暂的人生找到了永恒的归属，同时这条路也是崇高的，只要向上攀登，就能超越个体卑微。

为什么现代人还会有信仰危机呢？

——因为真实和信仰之间，有一道裂痕，

古今之变后，信仰遭到理性主义的挑战。人们意识到，如果某个事物要求我相信它，那么它要证明自己是真的、可信的。人生信仰意义重大，更加要证明它的可靠性。

但是如果要把信仰和真实统一起来，就会很麻烦。人生信仰为人提供了什么？一是对永恒的许诺，二是对崇高的指引。这是事实判断，还是价值判断？很显然是价值判断。

信仰是一个价值判断，而现代人对信仰的要求是“必须是可靠的、真的”。但是，“是真是假”是事实判断的评判标准。

这就是裂痕：在信仰问题上，人们用审核事实判断的标准，去审核一个价值判断。

克尔郭凯尔用一生思考这个问题，最后他得出一个结论：我们无法依靠逻辑和知识来确认信仰是否为真，只有勇敢的“纵深一跃”才有可能越过这道鸿沟。只有纵深一跃，才能跨过知识和信仰的鸿沟，这一跃的后果是不可预知的，可能是拯救，也可能是虚空，这完全是一种冒险，需要极大的勇气。（他的论断针对宗教信仰）

其实任何追问人生意义的人，都会遇到这个困境。登山者把登山作为信仰，记者问他为什么登山，他回答“因为山在那里”，这个回答经得起理性的考问吗？理性能够证明，登山是一种伟大、有价值的事吗？

人追问生命意义的途中，总会遇到死亡和贪欲两大难题，面对这两个难题，我们需要一个可靠的人生信仰。但现代化的洗礼，让我们用理性去检视信仰，求证信仰的可靠性，这样我们就会遇到一道无法弥合鸿沟，结果就是信仰在现代世界变得非常困难。这就是现代人的精神危机。
</pre>
</div>
<div bag="default" created="20210702105023225" modified="20210702110122175" revision="0" title="客观无知" tmap.id="403ef928-c39f-4059-9066-aea48a78a5d3" type="text/vnd.tiddlywiki">
<pre>指的是未来不确定的变化和我们现在不知道的信息。这是我们判断力的边界。它不是错误、不是偏差也不是噪声。

有预测，就会有无知。

在做判断前，我们永远不知道一些事情，比如要买房前，你不知道为了经济状况、政策走向、会不会发生地震、摇不摇得到等等。

偏差和噪声可以降低到0，但我们永远不能消灭客观无知。

事后看事情，每一个可能性都非常合理，你能解释发生的一切，但是事先，没人敢这么预测。【常见各种股神、事后诸葛亮】

要充分考虑客观无知，就必须使用统计思维，找一个外部视角。做一件事一定不能只看眼前这一件事，一定要向外看，看看跟这件事类似的事物，都有什么后果。比如不了解历史、不了解外国的，就不能判断现代中国。
</pre>
</div>
<div tags="人物 哲学" title="罗尔斯">
<pre>20世纪最伟大的政治哲学家，甚至可以不加之一。克林顿说，罗尔斯“几乎以一人之力，复活了政治和道德哲学”。他最著名的成果，是1971年发表的《正义论》，开篇第一句话是，正义是社会制度的首要价值，正如真理是思想体系的首要价值——正义论探讨的是正义的社会制度。

怎么分蛋糕？

平均分；
按照需求分；
按照贡献分；
按照努力辛苦程度分；
按照寿星意愿分；

延伸出，怎么分配社会资源？

罗尔斯提出了一个构想，一个发明——无知之幕。让这个神器可以让大家放弃所有偏见，一起来讨论，签订一个契约。

你站在无知之幕后面，就看不到自己了，不仅看不见，而且忘记了自己一切个人特征，不管种族、性别、身体素质，还是年龄、智力、家庭背景，或职业、财产、宗教信仰，你只剩下正常的理性能力，你知道要怎么盘算对自己最有利。每个人都这样，站到无知之幕后面，罗尔斯把这个位置叫做“原初位置”，大家在这个原初位置，充分思考和讨论，签订一个契约。

契约就是确立一套分配规则，用它来决定如何分配收益和责任的社会基本结构。这个契约就是我们应当如何生活在一起的规范原则。

罗尔斯用六万多字的论证，得出来两条关键原则。
	1. “平等的自由”原则。每个人平等地享有一系列基本的自由，包括言论自由、信仰自由、拥有个人财产的自由。无知之幕下，为了确保每个人生活目标和方式不会低人一等，每个人都会同意要保障每个人平等的基本自由。
	2. “公平的机会平等”和“差异原则”。相同的职位和工作，必须在“公平的机会平等”前提下，向所有人开放。CEO赚钱多，那前提就是所有人都有平等的机会称为CEO。总有人会输，而且可能输的很惨，竞争很公平，输了只能怪自己嘛？罗尔斯说，造成社会不平等的根源，不是因为自由竞争，而是人们天赋差异，以及家庭背景、社会阶级地位的差异，把起跑线拉的再平，也无法消除天赋的差异。无知之幕背后的人不会答应天生注定最差、最弱势的人就活该受苦受穷，所以要改善最糟糕人的状况。

罗尔斯所说的“公平的机会平等”比一般的机会平等条件更严格。公务员考试，高考，只是普通的机会平等，因为起跑线不是平等的，它其实是前一场赛跑的重点，有人在你前面，有人在你后面。罗尔斯要求从最早的比赛开始就设置尽可能平等的起跑线，这样才满足公平的机会平等这个条件。
	


















</pre>
</div>
<div tags="人物 哲学" title="马尔库塞">
<pre>3M之一。马尔库塞1898年出生于德国，犹太人，在弗莱堡大学获得哲学博士学位，做过哲学家海德格尔的助手，成为法兰克福学派代表人物之一。纳粹兴起后，流亡到美国，加入了美国国籍，直到1979年去世。

马尔库塞拿出思想手术刀，深入剖析了美国社会运转逻辑，提出了尖锐的批判，甚至鼓励青年学生起来造反，因此成为了“新左派运动的教父”。

01 舒适的不自由


马尔库塞说，美国这样的发达工业社会，是一种“新型的极权主义”。这里的极权不是集中权力的意思，而是指一种无所不包的总体性，totality。纳粹是极权主义，美国是“非恐怖的极权主义”。

他在《单面人》中写道，在发达工业文明中，盛行这一种“舒适的、顺滑的、合理的、民主的不自由”。人们虽然享受着富裕的生活，实际上却处于一种总体性的控制之中，不知不觉地丧失了自由。因为这种自由太舒适了，人们很难察觉，也就无从反抗，结果越陷越深，无法自拔。

这种新型的控制有两个特点：
	1. 很隐秘，不需要暴力和强制，你就不会觉得恐怖。
	2. 它能够有效应对自己的敌人，能够排斥、化解甚至“招安”反叛者，让总体性的控制能够生生不息地延续下去。

怎么控制的，可以总结为两个字——贿赂。

社会贿赂人民大众。资本主义用让你享受舒适的生活，特别是满足你的消费欲望，收买你，换取你的服从，而你甚至都不知道自己被收买了，就心甘情愿被它支配和操纵。

美国的超级市场，真正让人体会到“琳琅满目”究竟是什么意思。很多商品，不仅没见过，甚至不知道用途。我们对这些商品的需求，其实是商品制造出来的。马尔库塞发明了一个术语描述这个现象——虚假的需求。

为什么我们要去追求这些虚假的需求呢？很多时候你不是在为功能付费，而是在为某种“生活方式”或者“自我形象”的想象付费，而且甚至是付出十倍、百倍的价格。

那些资本主义生产出来的产品和服务，不只是功能产品，而且还自带了一套规定的态度、习惯、思想和情感。消费者在购买和消费时，也就接受了这些习惯和思想，愉快地把自己和生产者、进而和整个社会绑定在一起，形成了一个总体性的消费社会。

消费社会可以自我强化，无限度地刺激人的物质需求和享受欲望，让人无止境地追逐不断更新换代的“虚假需求”，最终“商品拜物教”成了人们习以为常的普遍信仰，这就是“非恐怖的极权主义”的奥秘。

有人就喜欢买买买，这样做很愉快，有什么问题吗，为什么不能接受它？马尔库塞说，不行，不能这样屈服于资本主义的控制，我们不仅要揭示它、批判它，而且还必须改变现状，推动实质性的社会变革。

02 我们都是单面人吗

像美国这种发达国家是一种“新型的极权主义”，它不是用恐怖的手段控制大众，而是用无尽的消费和享受贿赂大众，让人们陷入“舒适的不自由中，难以察觉社会对自己的控制，也就无从反抗。

马尔库塞说，必须要反抗，必须要改变现状。但是，生活很舒适了，很多人也满意现在生活了，为什么不接受这种生活呢？造反真的有必要吗？这个问题直指马尔库塞批判理论核心，他给出了犀利深刻的回答，1960年代西方世界大规模的抗议运动，与这些回答不无关系。

有人就愿意接受这种贿赂，愿意被收买，有什么不可吗？马尔库塞的回答是，因为这桩交易根本不公平，简直就是欺诈！富裕的生活和舒适的享受本身没有错，但我们为此付出的代价太高了，几乎是无法承受的代价。这个代价是什么呢？就是我们作为“人”的身份。接受这桩交易，我们就被物化了，或者说几乎沦为了动物，不再是完整意义的人。

马尔库塞流亡到美国前，创立了法兰克福学派，后来成为了20世纪“西方马克思主义”的代表。和我们学习的马克思主义理论，最关键的区别在于，他们特别重视所谓“青年马克思”思想。

1843年，马克思流亡到巴黎，第二年认识了恩格斯，同时也开始撰写一些论述经济学和哲学的文章笔记，但生前一直没有发表。雪藏80多年，1927年被苏联专家发现，1932年整理成书出版，书名《1844年经济学哲学手稿》。当时马克思才26岁，所以称为青年马克思，这份手稿最突出的主体就是人的“异化”。

异化来自于黑格尔的哲学概念。指的是主体在自身发展中，分裂出了一个反对自己的对立面，成为了一种外在的异己力量。

马克思用异化分析资本主义，发现了“劳动异化”的现象。马克思说，劳动是人的本质特征，是人的第一需要。但是，在资本主义的条件下，工人感到劳动是一种与自己对立的苦役，完全是异几的活动，这就是劳动的异化。

马克思说：

工人“在自己的劳动中不是肯定自己，而是否定自己，不是感到幸福，而是感到不幸，不是自由地发挥自己的体力和智力，而是使自己的肉体受折磨、精神遭摧残……。只要肉体的强制或其他强制一停止，人们就会像逃避瘟疫那样逃避劳动”。

“结果是人只有在运用自己的动物机能——吃、喝、生殖，至多还有居住、修饰等等——的时候，才觉得自己在自由活动，而在运用人的机能时，觉得自己只不过是动物。”

于是，“动物的东西成了人的东西，人的东西成为动物的东西。”

只要人的异化仍然是现代社会的现实，马克思仍然是我们的同代人。现在资本主义和马克思时代相比，已经大不一样了。现在普通工人也能过上相对富裕的生活，享受消费的快乐，但劳动、工作对于大多数人来说，仍然只是赚钱的工具和手段，消费和享受才是目的。在工作中累得像条狗，只有在吃、喝、性爱等活动中，才感到自己像个人。

马尔库塞认为，马克思说的人类解放思想，就是要克服人的异化，将人从异化中解放出来，这是一种人道主义理想。

现在有一些很奇怪的困境，比如一个白领女性，经常加班熬夜伤害了皮肤，所以就要购买护肤品，但优质的护肤品又很贵，就需要她追求升职加薪，就要熬更多的班，加更多的夜，皮肤受到的伤害就更严重，就需要更优质、更昂贵的护肤品喝护理服务。——在这个循环中，每一个环节都让她感到是由她自由自愿做出的选择，但最终却陷入了一种受到支配的奴役环境，这就是马尔库塞所说的“自由的奴役”。

在这样一个工作、生产、消费的循环中，人陷入了单一的生活模式，就是如何赚钱然后如何消费，人的思维模式就变得单一化了，就是想着如何赚更多的钱，然后如何享受更优越的消费。表面上看，你好像也有自由，可以自己选择做什么工作，可以自由选择买哪一种商品，但说到底，这些“自由”，都没有超出这个单一的生活模式和思想模式，你只是在这个无尽的循环中打转而已。

所以马尔库塞说，资本主义社会并不是真正自由开放的社会，而是单面的或者说“单向度”的社会，生活在这中体制的人，也不是立体丰富的全面发展的个体，而是丧失了真正自由的“单面人”。

发达的资本社会虽然变得更富裕了，但人的异化不仅没有消失，反而更深入、更广泛、也更隐秘地渗透到生活的所有领域。无论经济、政治还是文化，都被商品拜物教所支配，这是一种平庸而单面的世界。

马尔库塞相信，如果社会的进步只是越来越富有，那就算不上真正的进步，因为这等于是放弃了“人的解放”的承诺，是对马克思主义的背叛。呼吁人们做出真正的社会变革，摆脱资本主义的异化，追求经济、政治和精神的全面自由。

03  ”实质性的变革“有可能吗？

马尔库塞说，社会的变革，只有物质和技术的进步是不够的，我们必须做出“实质性的变革”，用他的话说，社会需要的是质变，而不是量变。变革知道可行吗？他给出的答案并不乐观。

革命主体的消失

革命行动需要主体，马克思理论中，最有潜力的革命主体是工人阶级，可是如今的革命主体似乎已经消失了。当今社会，工人阶级已经很难被称作“无产阶级”了，因为他们不再是一无所有。

《共产党宣言》里，“无产者在革命中失去的只是锁链，他们获得的将是整个世界。”但现在呢？如果发动一场革命，工人阶级可能会感到自己失去很多，而不只是锁链。

《单面人》里面，有一段流传很广的文字：如果工人与他们的老板享受同一种电视节目，光顾同一类娱乐场所；如果打字员和她雇主的女儿一样有时尚的打扮，如果黑人也能开上一部凯迪拉克轿车，如果他们都阅读同一种报纸“，那意味着什么呢？意味着原本激烈对立的阶级之间出现了同化。

马尔库塞说，这当然不意味着阶级的消失，但却表明不同阶级在很大程度上分享着共同的需求和满足，而这种需求和满足恰恰有利于现存制度的维护。过去工人阶级光脚不怕穿鞋的，现在工人阶级也有鞋子穿了。

工人阶级已经被整合到资本主义体系之内，这种整合甚至深入到心理层面。他们曾经饱受压迫，爆发出反体制的否定性力量，但如今他们更关心如何进入体制之中，获得更多收益。他们曾经是革命的主体，但现在已经不再具有革命性了，成为维护资本主义的保守力量。

异端的被分化

资本主义民主给异端留下了空间，但所有这些质疑、批评、辩论、竞争、投票，甚至包括社会抗议活动，都只是在体制内部起作用，只能带来量变，无法突破体制本身。好比守门员说足球需要变革，于是教练把它换去前锋。

这些喧嚣的异端并不能改变社会体制，反而造成了一种假象，让这个单面的社会披上了自由多元的外衣。这看上去好像”透过现象看到了本质“，但仔细想想，似乎又只是一种说辞。刘擎找了一个例子说明。

摇滚乐（Rock and Roll）一开始本事反传统，追求个性解放，积极介入各种政治运动中，包括民权、女权、反战抗议，照理说，应该会形成强大的反体制力量吧？但是，结果呢？资本主义把摇滚乐商业化了，给舞台、给排行榜、给巡演、给发唱片，摇滚乐手成了大明星，获得了巨大财富，进入了上流社会，最终被体制所吸纳。而那些商业化失败的摇滚乐手，则被边缘化，慢慢消亡。

在这种新的控制模式中，违背或超越主流的另类观念、愿望和目标，只有两种命运：要么被排斥消灭掉；要么就是按照主流世界的原则被转化，转化为现存体制能接受的方式继续存活。

革命主体消失，异端分子被体制收编，马尔库塞所期望的质变，看起来非常渺茫。但他没有放弃变革的希望。

首先他看到了一个基本事实，就是资本主义仍然存在巨大的内在矛盾。变革的主体在哪里，马尔库塞把希望寄托在体制的边缘人群，包括青年学生、失业者、流浪汉以及其他被压迫社会的底层。

但是，对于运动的最终结果，马尔库塞并不乐观。他说批判理论不许诺成功，但仍然怀有希望。”只是为了那些没有希望的人，我们才被赐予希望。













</pre>
</div>
<div tags="人物 哲学" title="马克斯·韦伯">
<pre>马克思韦伯，是一个广泛介入公共生活，面向社会和现实的学者。出生于1864年，25岁获得法学博士学位，30岁成为正教授。经常在报刊上发表政论文章，从军参加第一次世界大战，加入德国谈判使团参加凡尔赛和会，参与起草了魏玛共和国宪法。1920年，56岁的韦伯英年早逝。

韦伯完成了两项任务，看清现代，反思现代。看清现代，就是真正理解现代社会运作的底层机制——那就是理性化（rationalization）。反思现代，就是指出现代性最深层的缺陷，这些问题不会随着社会进步而消失，反而是越来越严重，学术界称其为“现代性问题”。

韦伯发现，工业革命、科学革命、地理大发现，这些大事件背后，有一个统一的思想动力，就是“理性主义”（Rationalism）。当时人们普遍认为，过去的不幸是由于蒙昧和无知造成的，如果用理性清楚掉蒙昧和无知，我们就会走向真理，越来越幸福。

《以学术为志业》中提出，认为科学是通往幸福之路，只是“天真的乐观主义”，科学无法回答什么是幸福，意义和价值的问题，超出了科学理性的边界。科学无法回答什么选择是值得的，过什么样的生活才是有意义的，我们生命的目的是什么，科学可以给我们一个最优的方案，但不能给我们一个最优的选择。

!世界的祛魅

字面意思就是，世界被去除了神秘性、魅惑性。因为现代人对于世界的认识发生了改变，以前人对自然认识有一种神秘感，后来被去除了。

神秘感开始于远古时期，人类对周遭事物，往往会神秘化，认为万物有灵性，人有灵魂等等，现在看起来稀松平常，不过是封建迷信，然而，这种观点的意义在于，人和世界是有联系的。做什么事情，背后都有某种意义，打仗前祭祖，春耕时祭天，发生灾难时，认为是上天将怒，皇帝必须要发罪己诏。这样，内心就安宁了。古代人从这种秩序上，获得了“安身立命”的根据。从这个意义上来看，古代人是嵌入在这个宇宙中的。

祛魅，意味着用理性科学的力量驱散了神秘感。

祛魅不是简单的世俗化，魅不是简单的宗教迷信，祛魅实际上有两步。一是破除迷信，即去除那些装神弄鬼的事情，让宗教走到理性思辨上。这一步没有瓦解宗教，而是让宗教获得了理性化发展。二是拷问所有超验、神秘的东西，依靠冷静的观察、可靠的依据、严谨的逻辑和清晰的论证，科学得出的结论是可观察、可检验、可质疑、可反驳、可修正的，这个逻辑发展下去，一定会挑战到宗教的精神主导地位，直到尼采喊出“上帝死了”，挑战完成。世界没什么神秘的东西了。

神秘感消失了，人和世界的联系就断了，古代社会中的意义就不存在了。并不是说到此时宗教就消亡了，而是说宗教不是一种共同的默认的信仰。古代信宗教不需要解释，不信仰才需要，而到现代反过来了，不信宗教不需要解释，信宗教才需要解释。现在，宗教虽然被人信奉，但它不再是人类寄托生命意义的默认选项了。

没了默认选项，对人类意味着什么？人类不再“嵌入”到这个世界上，而是孤独、无依无靠地存活在这个世界上。就像告诉小孩子，童话都是骗人的，圣诞老人是假的。孩子的感受，就是祛魅时，人类整体的感受。

韦伯揭示“世界的祛魅”，不带有价值好坏的判断，只是描述一个客观事实。世界的祛魅，是现代的真相。

梦醒了，然后呢？

!诸神之争

没有了统一的神秘感，人们的价值观多元化了，各种价值观之间的冲突，就像是神灵间的战争。

科学理性实现了祛魅，但是留下了意义与价值这一的空白，对于这个价值真空，科学无能为力。科学只能在“事实判断”领域有作用，即一个事物“实际上“是什么，在价值判断领域，科学给不了答案，即一个事物“应该是“什么。

事实判断和价值判断之间，存在着一条鸿沟——它们的判断标准不一样。

事实判断的标准是客观的，有科学仪器、实验方法、学术审核机制。价值判断要分辨高低优劣，也需要一套标准，在古代，人们有统一的秩序，即使说不明白，但有一个共同的基本信念，就是终极答案是存在的。在世界“祛魅”后，我们知道了世界是物质的，物质世界没有什么神秘的终极答案。

所以做价值判断时，每个人都是依据各自的一套价值标准。这个标准是很主观的，受到一个人个体因素影响非常大。所以，有一个很恐怖的问题就是——标准答案没有了。我们进入了一个价值多元化的困境里。

价值多元化，现在是一个褒义词，然而，它却给人们带来了很多困惑和迷茫。韦伯说“人是悬挂着自己编织的意义之网上的动物”，好像我们有很多选择，我们可以选择“我喜欢”，但是这种选择是脆弱的，个人意愿是很善变的，选项不一定糟糕，糟糕的是，我选了，但永远也不知道对不对。长期的内心动摇和不确定性，是现代人最显著的精神特征之一。对于社会，价值观冲突引起了很多激烈的对立。堕胎是否合法？要自由还是要安全和秩序？在这种价值观冲突中，真理不但不会越辩越明，反而造成政治分裂和派系对立。

对于这些分歧，有办法寻求共识，弥合分歧吗？韦伯给了一个冷酷的回答，他说，分歧的根本原因如此深刻，以至于许多冲突无法化解。哈贝马斯给出了不同的答案。

!工具理性

”祛魅“和”诸神之争“是现代社会对古代世界的“破”，”工具理性“是对现代社会的立。

在价值观领域，每个人都有主管的标准，但在钱这话题上，我们的取向就很一致。不论我们追求什么，金钱都是很有帮助的。并不是我们就都是拜金主义。

工具理性这个概念登场，它是针对确定的目标，计算成本和收益，找到最优的手段，关键在于“计算”，它不关心目的，只关心达成目的的手段是不是最优的，做的是事实判断。价值理性，做的是价值判断，复杂得多。

比如找工作，并不只是为了钱，还要考虑你擅长这份工作吗？你喜欢吗？这份工作的事业，是你的追求吗？这些你是计算不出来的。

这就产生了差异：工具理性问题有客观标准，我们容易达成一致，而价值理性问题标准不一，很难找到确定答案。在社会层面，价值观念问题我们有许多分歧，但在具体方法上，我们认同工具理性计算出来的方案。——随着社会继续发展，工具理性的逻辑就越来越强大，成为一种通用逻辑，社会越来越重视计算和效率。

韦伯认为，这就导致了社会制度的官僚化，不仅是政府吗，在学校、军队、公司，官僚制这种组织形式占据了重要地位。官僚制不同于官僚主义，官僚主义特征是效率低，而官僚制是追求高效率的。但是正是强调的是整体效益，而不是个人感受，有时候个人体验不佳恰恰是系统追求高效的结果。

规则合理、纪律严明、人尽其责、照章办事。系统才能运转精确、稳定，具有很高的可预测性，效率高，执行力极强。

官僚制的基本特征——“非个人化”（impersonal），也就是对事不对人。人被数据、指标代替，个人因素被忽略不计。这样就把无法计算的个人，变成了可以计算的数据。比如，银行贷款时，不考虑客户的复杂情况，而是关心贷款数额、信用记录、抵押保障、还贷能力等等。

官僚制内部也是如此，遵循“非个人化”原则，安排一个职位只看这个人能不能行使职位功能。这样的好处就是，任人唯贤，公平竞争。

工具理性太强大了，压倒、淹没了价值理性。社会理性化发展，变成了工具理性的单方面扩张，偏科了。

比如，人生目标这种话题，太大太沉重了，我们先考虑工具理性，去实现财务自由，再去追求诗和远方。但是，实现财务自由这个过程太漫长了，我们关心收益、效率，这个漫长的过程反过来塑造我们自身，最后我们变得只会赚钱了，把人生目标给淹没了。

齐美尔说，金钱只是通往最终价值的桥梁，而人是无法栖居在桥上的。

!现代的铁笼

工具理性不断扩张，就把现代铸成了铁笼（the iron cage)。

通过社会官僚制化，可以让整个社会通过计算，高效处理事务。

非个人化，是一把双刃剑，推动力社会的迅速发展，另一方面，非个人化让系统变得机械坚硬、冷酷无情。

现代社会就是一条流水线，社会中，每个部门，都是这个自我循环流水线上的一环。个人，只是这个机器上最细小的一个零件。机器只关注零件能否发挥正常功能，个人的人格品质、价值观念、兴趣爱好、审美趣味，这些因素与功能无关，都要被忽略不计。

社会呈现出机器属性，人被”非人化“，被看成机器的零件，韦伯把这种特征概括为”铁笼“。

铁笼有两个最大的弊端。

一是造就了一种片面的社会文化，我们习惯于用工具理性的逻辑处理一切问题。但有的问题，是靠逻辑、工具理性无法解决的。比如，卖假冒伪劣产品，目前最有效的方式是罚款，通过提升假冒伪劣的成本，让这件事在经济上不那么划算。这背后的逻辑，是“用功利得失解决道德问题”，虽然有效，但实际上，是把道德问题，变成了利益计算，相反，只要犯罪分子有办法规避掉惩罚，提高收益，他就还会选择违背道德。用利益计算解决道德问题，永远是治标不治本，有时候可以解决问题，有时候可以让问题更加严重。

二是铁笼造成了片面的社会关系，人与人、人与组织之间，逐渐变成了一种商业的“供求关系”。比如人力资源这个词，人怎么会是一种资源了呢？我们说要提高自己的竞争力，潜在的意思就是，人变成了某种商品，在买家面前互相竞争。“自我发展“的意思变成了“提升自己作为商品的价值”，所以才有了人才市场这种说法。

现代社会强调个性、自由，看上去我们有各种各样的选择，实际上，我们有一个紧迫的任务——满足社会机器对一个零件的需要，这就使得我们没有那么多机会去提高真正的自主性，发展自有而丰富的精神和人格。我们在激烈的竞争中，争取成为一个合格、优质的零件，这就是铁笼的深意。

韦伯说，专家没有灵魂。因为专家即使有很多知识，但他身处铁笼之中，不过只是高级零件罢了。我们人类生命和灵性发展的需求被忽视和淹没了。

铁笼一方面禁锢了人的灵性，但另一方面也保护了我们。这个铁笼，创造了现在优越的物质条件，以及建立在物质基础上的文明，提供了空前丰富的物质和文化产品，解决了人类困扰千年的问题：饥荒、贫穷、奴役等。如果没有一个可行的替代方案，打碎铁笼会让我们陷入更糟的境地。

韦伯是悲观的吗？不他恰恰是要破除悲观主义。他认为，悲观主义就是由盲目乐观造成的，人们盲目相信理性可以无所不知，科学可以无所不能，当现实打破这种盲目乐观后，就会引发出极度悲观，这是我们需要警惕的。

韦伯指出了现代性的底层机制、现代化的丰功伟绩，同时指出了现代性的冷酷、现代化带来的弊端，是为了让我们了解真相。只有了解了真相，我们才能不被简单的利弊困扰，诚实地面对全部事实。这就是另一种意义的“思想成年”。

破除悲观、获得清明、达到从容，这才是韦伯思想给我们的真正启示。



















</pre>
</div>
<div tags="" title="孟子">
<pre>孟子说“一乡之善士斯友一乡之善士，一国之善士斯友一国之善士，天下之善士斯友天下之善士”，说士应该跟士交朋友，大家互相学习共同提高。孟子还说对于优秀的人物，我们就要“颂其诗，读其书”，要“知其人”，还要“以论其世”。</pre>
</div>
<div tags="人物 哲学" title="尼采">
<pre>西方思想史上公认的“头号危险人物”，希特勒的偶像。因为他的语言有很多解释弹性，所以容易被各种立场利用。

尼采生平的关键词——叛逆。他4岁时父亲去世，从小生活在女人堆里，和贾宝玉有点像，但他后来对女性非常敌视——“你要到女人那里去吗？别忘了带上你的鞭子”。他20岁上大学，25岁当了正教授，是德国历史上最年轻的文科正教授。从教十年后，觉得不适应大学体制，辞职了，之后10年，尼采继续他的研究和写作，但写作风格非常另类，形式上像诗歌散文，完全不符合学术规范，但读起来妙趣横生，发人深省。1889年，45岁的尼采陷入了精神癫狂，直到56岁去世。他知道自己的思想超越时代，“我的时代还没有到来，有的人是死后才出生的”。他去世后，名声越来越大。韦伯就是，他最重视的两位前辈，一是卡尔·马克思，另一位是尼采。

上帝死了

上帝死了，是我们杀死了上帝！这个世界上最神圣、最万能的上帝，现在已经倒在我们的刀下，我们这些最残忍的凶手，如何才能清洗我们身上的血迹啊？

尼采并不是欢呼“上帝死了”，而是沉痛的宣告。但尼采不是反基督教吗？为什么他会痛心？

——因为他知道，上帝死了，后果很严重。基督教是西方世界道德基础和人生意义的寄托，意义极其重大。但是，人民对于上帝的信仰并不是真实的，而是基于一种“虚假的信念”。真相是，上帝已经死了。

尼采反基督教，但他对耶稣没有敌意。他认为耶稣不是要直接“拯救人类”，而是告诉人们“应该怎么生活”，耶稣的门徒没有好好实践“怎样生活”，还搞出了一套复杂高深的教义理论，这根本不是耶稣的原意，而是一套虚假的思想。人们用这种方式信仰上帝，就变成了自欺欺人的虚假信仰。——人们用虚假的教义理解救世主的启示，最终让这个信仰变得不可信，在这个意义上，人杀死了上帝。

什么是虚假的思想呢？——形而上学。

尼采概括形而上学三大信念：
	1. 相信在感知的表象世界背后还有一个更真实的本质世界；
	2. 相信这个混乱的世界实际上是有目的的；
	3. 相信这个纷乱多样的世界背后有一种统一性。

这有点像祛魅前的世界，尼采要做的也和祛魅很相似。尼采认为那个更真实、有目的的、有统一性的本质世界，根本不存在。有人看见过吗？根本没有，这就是形而上学的编造。

为什么人会编造呢？因为人的心理很虚弱，在这个危险的世界，我们需要安慰。虚假的思想能够安慰我们，但最终会带来恶果。

比如，人为了生命的欲望而拼搏，但是在奋斗过程中，总会遇到挫折、痛苦，感到无力和卑微，为了缓解这种痛苦，基督教就造出来禁欲主义，宣称禁欲是高尚的，这样人就可以通过否定生命的欲望而逃避拼搏，从而逃避那些负面感受。

但尼采认为，生命的欲望是真实的，也是正当的，即使因为挫折而痛苦，也应当直面它。就像鲁迅说“真的猛士，敢于直面惨淡的人生，敢于正视淋漓的鲜血”，这就是诚实的英雄主义。

如果我们相信虚假的思想，就把生命的希望寄托在不可靠的事物之上，当它们和本能冲突时，我们就会怀疑这些虚假思想，结果把我们寄托在上面的希望打破了，人就陷入到虚无之中。

成为超人

尼采说，自古流传的形而上学是虚假的，那什么是真的呢？上帝死了，人类精神处境的真相是一片虚无，那人面对虚无该在怎么办呢？

——用生命本身的强健力量，战胜虚无。掌握这种力量的人，就是超人。

孙周兴概括的尼采思想的三大命题——人生虚无，理论虚假，生命强健。

人生虚无，也就是人生本来没有什么意义，所有意义都是人为制造和赋予的。
理论虚假，就是曾经各种各样的理论掩盖了人生虚无的真相，让人们陷入幻觉，在幻觉中获得虚假的安慰。

人赤裸裸地站在虚无面前，人生没有意义，理论都是虚假的，安慰都是幻觉，人是一无所有了吗？——还有一样东西，就是人的生命力。生命本身是强健有力的，这就是超人学说的起点。

对待虚无，有两种态度，消极的和积极的。

消极的虚无主义就是，面对人生虚无的真相，陷入悲观和绝望。从虚无到消极，中间还有一个环节，就是虚幻的信念。这个信念认为世界的表象背后还存在绝对的本质，认为人生必须要依靠这个绝对的本质才能找到价值和意义。如果你相信了这种虚幻的信念，那么虚无的世界对你来说就是毁灭性的，你就会感到绝望。

积极的虚无主义就是，认识到世界本无意义，但这恰恰带来了创造的自由，价值不是现成在某个地方等你“发现”，所有价值都是人主观创造出来的。生命活动的标志就是能够自己确立价值，这是生命本身的力量。

所以尼采认为，面对无意义的世界和无意义的生命，人应该立足于现实，直面无意义的荒谬，以强大的生命本能舞蹈，在生命活动中创造出价值。用尼采的话说，就是“成为你自己”。这样一来，虚无就不再会让你沮丧、无聊和绝望，反倒会给你最广阔的创造自我意义的空间，虚无让人成为积极的创造者，这就是积极的虚无主义。

法国作家加缪笔下的西西弗斯，就是积极虚无主义的最好例子。西西弗斯的命运象征着人生的困境，一切都是徒劳，但他还有一个最终的选择，那就是在这个过程中，沮丧绝望、充满怨恨悲哀还是勇敢无畏，精神焕发地推动巨石。这样一来，这件事就不再无意义了，西西弗斯用自己的选择创造出意义，用无尽的斗争精神去对抗虚无。所以加缪写道，登上顶峰的斗争本身足以充实人的心灵。应该设想，西西弗斯是幸福的。

尼采说，人类的高贵在于自身有决定价值的能力，不需要别人同意，他懂得自己给事物以荣耀。每个人都是西西弗斯，面对虚无的人生，有两种不同的选择，尼采用两个词形容这两种人生选择，奴隶道德和主人道德。

奴隶道德，就是放弃生命的激情，用虚假的幻想约束自己、安慰自己，把人生希望寄托在虚妄的观念之中。
主人道德，就是放弃一切幻觉，直面虚无和荒谬，像西西弗斯那样，用生命的激情去自我创造，做一个勇敢、荒谬的英雄。

主人道德，对一般人来说太难了。尼采说，“难道我们不能使自己成为上帝吗？就算哪怕试一下也不行吗？”尼采呼唤一种新新人类，他把这种人叫做超人。

什么是超人？就是在上帝死后，自己成为自己的主人。用自己的生命意志去创造，追求自身生命力量的增长和完满，最终确立和实现自己的生命意义：这就是超人。

反省一下，尼采的理论是不是也是一种虚假观念？如果我相信他的说法，不也是把自己的生命寄托在别人的理论之中吗？
———他自己说，你相信他，就不该盲从他，因为你如果真的理解了他的思想，就不应该相信任何人包括尼采本人写下的教条，而是去探索自己的生命。

后真相与视角主义

人生本无意义，人生本无真相。

2016年，“后真相”被选为《牛津词典》的年度词语。一件事情，不同人从不同视角看，就会有不同的阐释，你有你的看法，我有我的看法，人与人的分歧越来越深，整个社会出现意见分裂。

比如，全球化推动了美国经济的发展吗？硅谷程序员和失业重工业区的就业者就是完全不同的看法。堕胎是可以的吗？宗教信徒会认为是杀人，反对者会说胚胎还不是人，妇女可以自主地对待自己的身体。

这不是简单的观点之争，而是事实真相本身。双方不是对同样的事实真相抱有不同的观点，而是看到的真相本身就是不同的。

尼采在一个世纪以前，就看到了这件事：客观的事实真相可能根本不存在。在《超善恶》序言中，他写道，视角（perspective）是所有生活的基本条件。在未发表的遗稿中，他还留下一句话，“没有事实，只有阐释”。他的这种观点被称为视角主义——视角决定事实。

传统认知模式认为存在一个客观的真相或真理，我们去认知它，就是努力地去理解这个真相，再把它表达出来，只要不断向前推进，就可以越来越接近这个真相，最终完全认识和掌握真相。就好像苏东坡在庐山中，不识庐山真面目，需要绕着一圈，横看成岭侧成峰。

尼采的视角主义和这个完全不同，它否定了真相的存在。因为没有任何人能够确定是否存在这个所谓的真相，人能所得到的，就是一个个不同视角看到的不同真相。更准确地说，不是人“看到”真相，而是“制造”真相。

尼采看来，外部世界在人之前就存在了，它没有任何意义，也没有任何属性，只是一团混沌。是人把概念和意义赋予到它上面，才让它变成了事物。比如，一堆木头，在人出现前，它只是一团混沌，连木头这个名称都没有，之后人出现，把它作为燃料、建筑材料、食物，这些就是人制造出来的真相。

尼采怎么解释一些客观的真相呢？比如冬天比夏天冷，天上只有一个太阳……尼采会说，这种客观性不过是一种合理的错觉。因为人们在这些问题上有共同的视角，所以的处理一直的解释，才造成了这种错觉。其实客观事实也会变，它会随着共同视角的变化而变化。

比如月食，古人认为的真相是天狗吃月，今人认为的真相是月球公转。古人共享神话视角，今人共享天文学视角。

视角制造真相在自然科学领域还不太显著，在人文社科里，就很明显。比如印象派，一开始出来时时嘲讽作用的。

所以，在共同视角下，客观真相只是一种错觉，但这种错觉很重要，因为我们需要一些稳定的事实认知，在此基础上很多人类活动才能正常展开。

在很多问题上，我们有共同视角，我们就有了客观事实，在很多事上，不存在一个普遍的共同视角，我们就找不到一个共同的真相。真相不止一个，这就是后真相现象。

这样的时代，难道社会注定因为真相多元而陷入分裂和争执吗？——恰恰因为每个人的视角只是视角之一，我们应该意识到，自己眼中的真相并不是绝对的真相。了解到不同视角中有不同的真相，不是要我们和他人划清界限，而是邀请我们向其他更多的视角开放、倾听、理解和学习。这也是尼采的观点，它在《道德谱系学》中写道，我们越是知道更多的眼睛、不同的眼睛是如何打量同一个问题的，那么对这个问题，我们的概念以及客观性就越会完整的多。

视角主义教我们的，不是分裂的必然，而是谦逊的必要。理论勾勒了某种灰暗的前景，不意味着我们只能心灰意冷，而恰恰是给了我们改变这个前景的机会。












</pre>
</div>
<div tags="人物 历史" title="诺齐克">
<pre>Too handsome to be a philosopher.


诺齐克评价罗尔斯的《正义论》，从此之后的政治哲学家，要么在罗尔斯的理论框架内工作，要么就必须解释为什么不这样做。

但他在《正义论》出版3年之后，发表了《无政府、国家与乌托邦》一书，提出了一种不同的正义理论。在自由主义的内部，罗尔斯和诺齐克成了对立的两极，罗尔斯在最左端，诺齐克在最右端，构成了西方国家社会制度的选择边界。

诺齐克认为罗尔斯只能算“半个自由主义者”，因为他没有完全充分地尊重个体权利，理论不够自洽。比如罗尔斯认为一个人天生的优势完全是运气，不应该由此获得分配的优势，除非这种优势能使得处境最差的人获得改善。诺齐克说这是把个人天赋当成了公共资源来分配，凭什么啊？如果我双目正常，我是不是要分一只眼睛给双目失明的人？

当然罗尔斯并不是这个意思，直接分配人的天赋，而是要分配天赋产生的额外收益。诺齐克又举例，聪明勤奋的老板生意好，那他需要救济隔壁失业的蛋糕店吗？

诺齐克认为，罗尔斯在政治权利上坚持了自由主义原则，而在社会经济问题上，转成了平等主义。

诺齐克主张一种完全彻底的自由主义理论，无论在政治还是经济问题上，都把个体权利放到最高位置，即“自由至上论”。
	1. 他论证的起点是个体权利的绝对优先，要想做出任何限制，都要给出很强的正当理由。
	2. 要在政治、经济、社会全方位地坚持自由主义。他为不受任何干预的自由市场资本主义做道德辩护。

核心问题：我们持有什么东西在道德上是正当的？

首先当然是我们自己。诺齐克称之为“自我所有权”，这项权利应当免于一切外部侵犯和干涉。除此之外，我们还需要资源和财产才能活下去，诺齐克提出三项正义原则：
	1. 获取正义。
	2. 转让正义。
	3. 矫正正义。

由此看税收的两大功能，公共服务和二次分配。前者还可以算是自由交换，而后者就是强制劳动。

诺齐克心中的理想国家，就是“最小国家”，根本不会关心社会经济分配问题，只是保障人的基本自由和安全，保障持有财产的程序正义，不应该有其他功能。

这样一个最小国家就是一个美好的乌托邦框架，可以容纳各种各样的小乌托邦群体。佛教徒结成佛教社群，共产主义结成共产主义社群，唯一的条件就是彼此自由自愿。

诺齐克的正义理论，是关心财富怎么来的，而罗尔斯的理论，关心财富怎么分配的。诺齐克认为，只要允许自由交易，任何结构模式都会走样，要想回到或维持原模式，就必须进行强制再分配，这就侵犯了一部分人的自由权，他们被当作别人福祉的工具。

























</pre>
</div>
<div tags="" title="朋友圈">
<pre>叫苦，会让领导心存忧虑。


明星秀恩爱，是为了工作


</pre>
</div>
<div bag="default" created="20210701112525996" modified="20210701114359227" revision="0" tags="思维" title="偏差" tmap.id="6848fdfd-37b5-45f8-bea8-0752daaee2c5" type="text/vnd.tiddlywiki">
<pre>偏差不是无规律的错误，而是“可预测的非理性”，是大脑中的思维定势。各种偏差科学家已经了解的差不多了，大概有两百多种。

卡尼曼分了3类。
一是''「替代偏差」''，也叫「判断启发式」。
这个偏差是说，为了回答一个比较难的问题，我们选择了一个简单的问题来替代它，并且把这个简单问题的答案，当做那个难的问题的答案


比如你问2021年中国经济怎么样？他回答说今年经济不行，我家的小点生意不如去年。这就犯了替代偏差的错误。

二是''「结论偏差」''，先有了结论，再去寻找能证明这个结论的证据，同时对不符合结论的证据视而不见。结论偏差拒绝思考，用瞬间的判断，尤其是情感判断。

爱屋及乌、恨屋及乌、锚定效应也是结论偏差。大公司为了卖货，明星为了流量，就必须维护良好形象。

三是''「过度的连贯性」''，看信息的顺序会影响你的决策。因为大脑试图给自己讲一个连贯的故事，从而产生偏误。所以第一印象如此重要的原因，光环效应也是过度的连贯性偏差。


替代偏差是给了某些容易获得的信息过高的权重，给自己不了解的信息过低的权重。

结论偏差是只采纳自己喜欢的信息，忽略或者扭曲了自己不喜欢的信息。

过度的一致性是让判断受到接收信息次序的影响，放大了初始印象

如何避免偏差？

# ''事后纠正''。在事情发生后修正偏差。
# ''事前影响''。在事前就设置好最有利的选项。
# ''了解偏差''。形成《常见偏差检查表》，对照检查。



</pre>
</div>
<div title="平民社会">
<pre>01 大辽，首次突破百年的游牧帝国

唐朝崩溃后，割据的藩镇自立为王，先后有十几个，人们成为“十国”，有五个称帝的政权，梁、唐、晋、汉、周五个短命王朝，被成为五代，合称五代十国。后梁时期，北方草原建立了契丹王朝，后改为辽。大辽的统治者也和五代统治者一样称帝了——称帝就是自认为是大唐的继任者。

儿皇帝石敬瑭将幽云十六州献给辽国，以换取对后晋的支持。

大辽得到幽云十六州后，国内的人口结构汉人占据了六成，财政来源偏向汉人，但大辽不像北魏和大唐一样追求全面汉化，而是建立起南北两院，南院用儒家的方式治理汉人，北院以草原的方式治理契丹人。这是中国历史上第一次二元帝国的制度化。财政来源于农耕，那么继承方式也变成了父终子及，从而延续了两百多年。这种制度创新，带来了中原和草原一百多年的和平。还使用减丁政策，时不时去草原上消灭小部落。

如果没有辽国，就不会有后面的明清，中国今天就没有如此庞大的疆域，可能就只是长城以南。所以不要简单地看历史。

《杨家将》是抗辽神剧。


02 大宋，用和平换来高度发展

宋朝用财政问题解决军事问题，对内，赵匡胤杯酒释兵权，用金钱赎买军事贵族；对外，签订宋辽盟约进贡岁币。

所以宋朝才有了繁荣的经济：对社会压制减少，不抑制商业发展，读书人也不以经商为耻，海外贸易盛行，工商业税收和关税收入成为财政重要来源——这是历代王朝独一份，第三产业也催生出来，社会分工深入，形成了行会制度，发行纸币。

文化上，出现一批大儒，把儒释道整合起来，儒家发展到一个新高度，重新确定了中国的思想方向。宋词从歌舞伎唱的舞曲变成了一种伟大的文学形式，可以反观民间社会的发达和富裕程度。

科学技术上，宋代的航海、造船、医药、工程、农业技术也达到前所未有的高度，四大发明3个都是在宋代以前出现，但到宋代才广泛应用，就是因为宋朝有一个足够大的市场，新技术只有在足够大的市场中才能广泛应用。

宋朝对于社会控制下，相应地，对于社会组织与动员能力就弱，只好靠交保护费解决军事压力。从这点意义上来说，大辽吞并幽云十六州之后，稳定而强大，可以保证宋朝北部的安全，不被无序的草原力量冲击。

03 王安石与司马光在争什么？

他俩都想宋朝好，都想要一种好的政策，但他们要争怎样才算是一种好的政治。

王安石要追求国家进步，就要变法，守旧是没有前途的，而司马光认为，你连传统都不尊重，那还有什么坏事干不出来呢？

王安石不拘小节，只吃面前的菜，所以性格比较和常人不一样。

王安石推行新法，但是没有合适的社会条件，结果和一开始的初衷背道而驰，引得司马光的旧党批评，王安石不管不顾的性格马上起来了，他充满豪气地说——天变不足惧，人言不足恤，祖宗之法不足守。他把司马光一派陆陆续续赶出朝廷，司马光到了洛阳，写出来《资治通鉴》。

争到后面，稍微有点道德感的人已经不愿意帮王安石了，小人来了，比如蔡京。王、司都在世时，党争还是君子之争，不失君子之风，等两人去世后，党争水准越来越烂，堕落为为纯粹私人争权夺利。

女真人崛起，大宋没法理解，想着和女真人合作打败大辽，但一点也不遵守盟约，背信弃义，惹怒大金。最后靖康之变也是咎由自取。女真灭亡了北宋，成为了此后东亚大陆的头号强国，南宋一度要对女真称臣。

04 大金的兴衰

大金从草原起家，一开始领袖也是被军事贵族制衡，金太祖完颜阿骨打和大臣们立了规矩，不允许动国库，金太宗忍不住拿了点钱，被大臣们从龙椅上拖下来打。

大金的皇帝不断摆脱草原军事贵族的压制，就不断地汉化，越来越摆脱草原的政治生活方式，也学孝文帝迁都，远离军事贵族；最后甚至修起来了长城，把蒙古高原隔了出去。

丧失草原，得到皇权，但失去了战斗力和草原的视野，最后被统一蒙古高原的成吉思汗打败，惨状不输北宋灭亡时。

05 从元朝看中国正统性


朱元璋虽然说过驱逐胡虏，但他在即位诏书里依然承认了元朝继承了宋朝的正朔，元朝一百年来气数也尽了，天下大乱，群雄并起，大明王朝从群雄手中夺得天命。



 
蒙古帝国有好几支，但是大元帝国很特殊，大元帝国统治者也是大蒙古帝国的统治者。大元帝国也是这里面最繁荣、最富庶的一支。蒙古整合了中原的财富、草原的武力、穆斯林的商业能力，造成一个空前的东西方大交通、大融合的局面。

大元帝国必须回应儒家世界观，才能统治庞大的汉人群体。而对儒家来说，天命是最重要的。说清楚自己如何继承了前朝的天命，才能让帝国的法统合理清晰，做法就是修史。

但元朝前面不止一个朝代，有宋、辽、金三个朝代或着说国家，正朔何在？

脱脱的创新——政教分离。

宋、辽、金都有正统性，这是一个政教分离的观念。它关注的核心在于政治是否必须通过宗教或文化才能获得意义，还是政治能够独立与宗教和文化之外，自己就有意义。儒家的天命理论，就是典型的政教合一。

脱脱这一做法，带来了广义的政教分离，也把中原中心这一观念打破了。

06 同时盛产忠臣和奸臣的明朝

老子在《道德经》里说，六亲不合有孝慈，国家混乱有忠臣。名臣可以按照自己的计划行事，而忠臣还需要花精力对付奸臣。

皇权，是制度的权力，而皇帝的权力，是皇帝个人做事的自由，两者不是同一件事，皇权强，皇帝的权力可以强可以弱；皇帝的权力强，皇权可能弱，也可能强。

皇权的强大，和帝国的强大也是两回事，一个是对内，一个是对外。

唐到宋，从豪族社会到平民社会，就是皇权由弱到强。宋朝没有与皇族共天下的贵族豪族了，只不过这种信念还在，变成了士大夫，所以宋朝时皇权强大，但皇帝的权力还不强大，受到约束。官僚体系属于皇权，它是帝国的工具，体系规则对包括皇上在内的所有人都具有约束力。

元朝，皇帝的权力上升，因为他们不懂官僚体系的作用，不按套路来，使得元朝官僚体系运转效率远不如宋朝，对于社会的控制相应也低了，所以元朝的经济也同样发达。朱元璋说，元朝之所以失去天下，就是因为它对社会管得太松了。皇帝与士大夫共治天下的信念就被打破了。

明朝，皇帝权力进一步扩大，皇帝甚至建立了一套只属于个人的系统，如东厂、锦衣卫等。这和东汉时期皇帝用宦官不一样，这里皇帝权力更大，皇帝一怒，权势熏天的大太监也随时会被弄死。所以制度性的皇权和皇帝个人权力之间的冲突，也是历朝最大的。

明朝大臣要面对的乱七八糟的事情太多了，作为个人的皇帝，通过太监搞事情，自然就会有人攀附上去，形成一系列奸臣。比如魏忠贤，无论是谁，想干点啥，都要把他哄好。到后来，忠臣、奸臣分成党派，面对国家紧急大事，一方提出方案，一方对人不对事的大肆批判，任何讨论国事都变成了党争。

大清继承了大明的官僚体系，但大清皇帝不用太监的力量对抗官僚体系，他们有包衣奴隶和八旗子弟，这些人既属于官僚体系，也与皇帝维持着私人关系，所以清朝的制度性皇权和皇帝个人性权力都很强大，治理水准比元和明都要高。


07 美洲白银影响明朝国运

元朝重用来自西域、中亚的色目人理财，这些人很会做生意理财，他们以整个欧亚大陆为思考单位，琢磨资源调配，此时伊斯兰世界白银短缺，白银的购买力在中亚和西亚比中原高，所以大量白银流入中西亚，这里的经济获得了活力，但中原地区就麻烦了——货币严重短缺，通货紧缩。朝廷大量印纸币，但不控制，纸币多了百姓不要，货币更加紧缺。

通货紧缩就导致生产紧缩，经济萧条，到元朝后期，遇上黄河决口，朝廷没钱救灾，只好继续印纸币，恶性循环，最终元朝的统治瓦解。

朱元璋建国，依然要解决货币紧缺的问题。元朝是货币少，但远方市场的需求还在，中原与中西亚的贸易不停。明朝和中西亚的贸易中断了，因为没有像蒙古帝国那样的保护，成本太高。

朱元璋给老百姓分户口——军、民、匠、灶，子子孙孙都要继承，不得更改，同时不允许外出乱走，走远了要申请。这样就搞出来一种准计划经济的模式，缓解了货币不足的困局。但运行了几十年后，维持不下去了。还是需要货币。

此时，欧洲开始地理大发现，西班牙人发现了美洲银矿，日本也发现了一个。通过远洋贸易，大明的丝绸、茶叶、瓷器销往欧洲，嘉靖之后开放了对日本方向的海禁，所以美洲和日本的白银源源不断流入中国。

明清之交时，欧洲发生了三十年战争，日本结束战国时代，控制了银矿，导致大明货币供给出现严重问题，通货紧缩再次出现。不巧赶上了一个小冰期，百姓收入大减，但交税需要把铜钱换成白银，白银稀缺，就需要更多铜钱，导致了税收变相增多，老百姓只好投奔李自成了。大明王朝加速冲向悬崖，最终亡于大清。

之后，不能再用中国视野看中国历史了，需要进入世界视野，才能更好理解中国。

08 藏传佛教帮助大清入关

藏传佛教，让蒙古族精神世界陷入分裂，开始长时间的内斗，皇太极抓住机会崛起，形成了满蒙联盟，入关征服中原。

元朝末代皇帝元顺帝没有被朱元璋消灭，而是跑出北京回到草原，继续以元朝的名号统治。蒙古族统治中原100多年历史，继承逻辑也变成了父终子及，而且进一步的只有黄金家族的人，才能当大汉。黄金家族就是成吉思汗的幼子托雷这一脉。这种对于继承规则有共识的特质，表现力蒙古人的精神世界依然有一种底层的统一性。

黄金家族小支中崛起一个英雄，俺答汗，通过武力征服，成为了蒙古诸部的共主，但是当不了正统大汉，就动了歪心思。在达到青海后，发现了藏传佛教，和一个派别格鲁派（黄教）的领袖索南加措在青海湖边进行了一次会面，互相认出对方是忽必烈转世和八思巴转世。后两个人在三百年前是师徒关系。

俺答汗封索南嘉措为达赖喇嘛，索南嘉措把忽必烈的汗号赠与俺答汗。就这样，格鲁派有了外援支持，很快压过雪域其他教派，等大家都信了教之后，宗教首领授予可汗尊号这件事就被普遍接受了。

但问题是高原不止这一个教派，于是其他黄金家族小支有样学样，都获得了可汗尊号。蒙古世界的统治正当性，就这么分裂了，底层同一性就被打破了。蒙古开始了内斗。

正统大汉林丹汗17世纪初继承大汗地位，他有雄才大略，想恢复正统大汉地位，此刻俺答汗的后代不那么强大了。此时蒙古人已经信了黄教，林丹汗为了吸引足够多的统治者，组织人把大量藏文佛经译为蒙文，从而掌握蒙古族的宗教解释权。此外，他也在军事上压制挑战者，那些输了的人，没有服他，而是投奔女真去了。林丹汗生气，我好不容易给你们一个完成的精神世界，却没人买我的账，在好兄弟的劝说下，改信了白教的红帽派，这下别的蒙古部落就更加排斥他，皇太极乘机联合这些部落，在1634年一举打败林丹汗，成为满蒙联盟的霸主。

林丹汗败逃青海，染天花而死，他的家人将玉玺交给了皇太极。皇太极于是获得了元朝的正统性，成为满洲人和蒙古人共同的大汉，获得了逐鹿中原的力量。

09 大清的高级政治智慧

大清是古代中国的最终完成形态，把中华帝国所需要的各种要素都成功整合了进来。

公元15世纪，世界进入一个小冰期，游牧者进入了政治上的春天，从西边的奥斯曼土耳其帝国、波斯帝国、印度帝国、大清帝国，都是在这一两百年里的游牧者建立的。大清入关，也是游牧者在欧亚大陆上获得主导地位的一个例子。

大清把大辽的二元帝国治理术，开展为多元治理术，在汉满蒙回藏这些次级区域，都起到了无可替代的作用。

在中原——皇帝
在满蒙地区——大可汗
在外藩蒙古和藏区——文殊菩萨转世

新疆是乾隆赐名，他说西域是汉唐时期的帝国故土，现在重新回归，就是旧土回归。

大清还依靠中介性因素，这些人具有跨界身份，两边都不讨喜，只能忠诚于强大的外来者——大清。

通过多重身份，成为天下共主，这就是大清的智慧。


10 郑成功为何失败？

明朝郑和下西洋，不过是有雄才大略的皇帝的自娱自乐。——梁起超。

郑和下西洋虽然比哥伦布早90年，但没能开创历史，大明实施海禁政策，朝廷烧的钱，没法通过民间贸易赚回来，自然就持续不下去。为什么搞海禁？因为实施的计划经济，为啥计划经济呢？因为货币紧缺。

更深层次的来说，陆地和海洋的秩序原则是不一样的，陆地上可以靠帝国征服来解决问题，而海上活动要能维持下去，必须靠发达的贸易。海上贸易发达了，民间财富积累起来，反过来可以推动国家政治变迁——一个最大的内容就是国家派出海军保护民间商人，商人拿出一部分利益上交税收。西方国家现代政治秩序，就是在这样的过程中发展起来的。

明朝实施海禁，但民间渴望海洋贸易的需求没有减少，所以我倭寇盛行，倭寇打BOSS都是中国人，日本人只是小马仔。汪直建立了一个倭寇帝国，大本营设在日本长崎，常备队伍5000，人多时十万，最后被大明逮住杀死了，从此之后倭寇问题却更大了，因为群龙无首，秩序更加混乱。最后解决倭寇问题，不是靠戚继光的威武，而是靠开放海禁，做海盗的成本上升了，做海盗的人就少了。

大明开放海禁，但是维持了日本的海禁，所以还是有海盗的生长空间，明末崛起了一个大海盗，郑成功的父亲郑芝龙，三千艘船只，二十万军队，任何人在东亚海面做生意都要交郑家保护费，每年入账上千万两白银。小海盗也都被消灭掉，提供了一种稳定的秩序。

郑芝龙崇祯年间被招安，随后降清，但他儿子郑成功坚决不肯降清，以厦门为根据地，开展反清复明的战争，在延长江北伐失败后，开始反思扩大根据地，于是打下来荷兰占领30年的台湾——被称为郑成功收复台湾。

康熙上台后，推行迁海令，从山东到广东，沿海20里之内不许住人，沿海船只毁掉，寸板不许入海。这样庞大的大陆市场就关闭了，郑成功财政来源断了，坚持了20多年后，终于被大清灭掉了。

为什么汪直、郑成功的海洋帝国被大陆帝国大清灭掉了，而大陆帝国的大清却差点被海洋帝国英国灭掉了呢？因为英国是一个全球范围内的海洋帝国，他的根基是全球市场，而郑成功、汪直他们的根基只是东亚大陆市场。

而建立全球市场，要靠武先力，等形成一套规则之后，就可以低成本持续，从而建立一套远距离信用机制。而郑成功、汪直他们的远距离信用机制，靠的是同乡关系、宗族关系、妈祖信仰者众共识，扩展能力有限，没法扩展到陌生人社会。英国人建立了法律体系，就是一套突破熟人社会的普遍信用机制。

有了普遍的信用机制，就可以建立世界市场，世界市场是可以碾压大陆市场的。

11 人口太多，内卷化

人口怎么增多的？

张居正一条鞭法，和大清入关。

张居正按照田亩来这算，统一征收银两。很重要的原因是美洲和日本的白银流入中国，货币不再短缺，就可以把税赋货币化处理。这下子，没有地的底层百姓压力大减，他们就能够生养众多。
满清入关，打仗消耗减少，因为两边打仗都是靠中原百姓支撑的（游牧者要靠抢钱获得收入），等大清统一之后，打仗就少了，老百姓的财政压力再次大幅下降。

这就造成了大清人口接连突破两亿、三亿、四亿，之后就出问题了。

有种说法说美洲作物的引入，如番薯、土豆、玉米等，使得等养活的人多了，从而导致人口爆炸，其实是因果颠倒，正是人口多了，官员不得不想办法引入美洲作物。

美国加州大学给中国这种由于人口大爆炸引起的自我锁死状态，称为”内卷化“。大量过剩人口出现，过剩人口就是没啥活可以干，或者劳动收入不足以维持生活。这就导致了劳动力成本即位便宜，因为他们本来没钱赚，任何活，给他一点钱就肯干。所以任何以节省劳动力为目的的技术变迁，在当时中国不可能发生，因为这里不缺人。这就意味着中国不可能内生性地出现工业革命，资本主义经济就没法真正地发展起来。

这些过剩人口，靠农业经济是吸收不掉的，只有靠工业经济，但正是因为人口过剩，中国无法内生性地进入工业经济。超大规模的人口，自己把自己锁死在一个低技术水平的状态上，就是内卷化。

要跳出陷阱，只能靠外部传入工业经济，吸收掉过剩人口。这个时候，中国与西方世界相遇，加入到世界秩序中，就是中国历史的内在需求了。

西方虽然把中国作为殖民地，但正是因为超大规模，没有任何一国能够完全征服中国，中国反而利用列强瓜分利益不均的矛盾，寻找到夹缝，不仅没有被彻底征服，反倒挺过屈辱，找到了解决自己困境的手段。

当中国进入到一个开放的世界经济体系后，过剩的人口成为了中国巨大的竞争优势，因为比拼劳动力，谁也比不赢中国。无论中国是否主动要做，都会深刻地改变世界秩序。

































</pre>
</div>
<div bag="default" created="20210702063056408" modified="20210702074902932" revision="0" tags="习大大" title="七一讲话学习感想" tmap.id="e7f2bc5e-e06e-465d-a5dd-9f2a1b2e8484" type="text/vnd.tiddlywiki">
<pre>看完建党百年庆祝大会，学习习近平总书记的重要讲话，深受触动。

总书记庄严宣告，我们实现了第一个百年奋斗目标，在中华大地上全面建成了小康社会，历史性地解决了绝对贫困问题！全面小康终于正式宣告了！建党百年完成第一个百年奋斗目标，我们党真正是说话算话，对人民负责，对历史负责。

习近平总书记回顾了我们党100年波澜壮阔的历史，充分肯定了我们党所作出的四个“伟大成就”，即革命、建设、改革和新时代中国特色社会主义伟大成就，首次概括提出了伟大建党精神，并将这一精神的内涵概括为坚持真理、坚守理想，践行初心、担当使命，不怕牺牲、英勇斗争，对党忠诚、不负人民。

过去一百年，我们党向人民、向历史交出了一份优异的答卷。现在，我们党团结带领人民又踏上了实现第二个百年奋斗目标新的赶考之路。再一次强调我们第二个百年奋斗目标新的“赶考之路”，为我们前进指明了方向。

讲话给我印象最深的是九个以史为鉴、开创未来，即坚持中国共产党的领导、团结带领中国人民不断为美好生活而奋斗、推进马克思主义中国化、坚持和发展中国特色社会主义、加快国防和军队现代化、不断推动构建人类命运共同体、进行具有许多新的历史特点的伟大斗争、加强中华儿女大团结、推进党的建设新的伟大工程，这是整篇讲话的主题和主旋律。

实际上这就是给我们全面建成小康社会以后，向建设社会主义现代化强国、实现中华民族伟大复兴的中国梦吹响进军的号角。所以说，习近平总书记“七一”重要讲话是全党在新的历史条件下进行具有许多新的历史特点的伟大斗争的政治宣言，是指引我们党奋力推进中国特色社会主义伟大事业和全面推进党的建设新的伟大工程的纲领性文献。

作为新时代的青年，我们要以实现中华民族伟大复兴为己任，增强做中国人的志气、骨气、底气，不负时代，不负韶华，不负党和人民的殷切期望！

习近平总书记在庆祝中国共产党成立一百周年大会上号召我们，要牢记初心使命，坚定理想信念，践行党的宗旨，永远保持同人民群众的血肉联系，始终同人民想在一起、干在一起，风雨同舟、同甘共苦，继续为实现人民对美好生活的向往不懈努力，努力为党和人民争取更大的光荣！
</pre>
</div>
<div title="启动思维的进化">
<pre>认识心智模式

心智模式是：
	1. 我们头脑中惯有的组织和加工世界的方式。
	2. 把人比做机器，心智模式就是操作系统。

古希腊哲学家爱比克泰德说，人不是被事物本身困扰，而是被关于它们的意见所困扰。一件事怎么影响我们，并不取决于这件事本身是什么样的，而取决于我们是怎么看待他们的。【尼采说，没有真相，只有阐释】

心智模式的作用：
	1. 塑造我们的经验，影响我们的情绪。同样半杯水，有的人看到的是杯子的上半部份，所以感到焦虑；有的人看到杯子下半部分，感到开心。但不是所有让人快乐的心智模式就一定好，鲁迅笔下的阿Q，总是通过自我安慰让自己感觉良好。【阿Q的心理舒适区保护了他】
	2. 引发我们的行动。情绪、思维、行动是一体的。积极的思维，会激发有效的行动，来验证它的正确性。如果你觉得你可以应付，就会全力以赴，最后成功了，就会加深“I can”的信念，形成积极循环。反之，你认为自己不行，就会拖延、找退路、找借口，最后事情完不成，就会加深“我做不到”的信念，形成消极循环。人际交往也是如此，你觉得人好，你就会主动接近他，最后发现他真的不错。

心理学家詹姆斯·鲍德温提出了自我决定论，获得了很多心理学家的赞同。这个理论认为，推动人自我发展的内在动机，主要有安全感、自主性和胜任感。

安全感主要来自于人际关系，尤其是和妈妈的依恋关系。如果安全感得到满足，他自然就会对世界发展出好奇，发展出探索世界的本能，如果母亲给予孩子的是无条件的接纳和肯定，那孩子所发展出来的探索世界的本能也是自主自发的，不需要考虑别人的评价，也不是为了获得母亲的称赞。

他的自主性就出来了，他不会把挫折当作一种“如果我做的不好，母亲会嫌弃我”的威胁，而是执着于自己的目标，努力解决问题，把限制和困难当作是有趣的挑战。

在解决问题的过程中，他不断成长，获得了胜任感，慢慢地，他发现自己是有能力的，是能够应付这些挑战的，并对自己充满自信。这种胜任感让他不断寻求新的挑战，解决新的问题，他的自主性就越来越强，他的安全感来源也会从母亲身上转回自己，因为他能胜任这个工作。——由此形成正向循环，这就是一种成长型的心智模型。

如果他不愿意探索世界，他就会寻找办法躲避伤害，以获得安全感，他很在意别人的评价，喜欢被赞扬和接纳，别人一点点批评都会焦虑万分——他失去了行为的自主性，找不到胜任感，不断寻求安全感。这就是一种防御型思维，这是阻碍我们自我发展的最大思维障碍。

在行动上，我们要改变世界；在思维上，要让世界改变我们。

僵固型思维：活着别人的评判中

预测一个人能否成功最重要的因素是什么？

——是能力吗？不，是思维。

很多人起步的时候能力平平，却凭着努力，不断进步，最终获得了很大的成就。而另一些人，看起来很出色，却因某个挫折一蹶不振，泯然众人。能力并不能预测一切，有时候怎么看待能力，要比能力本身更重要。【我自己在初中、高中的经历，就是，起步晚，但是努力，最后收获了成长。】

一个从贫困山区考上浙大的年轻人，被母校给予厚望，之后在遇到一次挂科后，一蹶不振。

这些人有一个共同点：他们的“自我”是很重的。一帆风顺时，觉得自己很厉害，遇到挫折时，觉得自己一无是处。无论他们怎么评价自己，特别关注自己的表现，特别关注别人会怎么看他们。所以他们有很重的证明自己的包袱，这种心理状态叫做——脆弱的高自尊。

斯坦福大学德韦克教授提出了成长型思维和僵化型思维。他发现，在实验中，夸小孩聪明，会让小孩不愿意继续探索困难任务，失败后容易对自己失去信心，而夸小孩努力，他们就会越挫越勇，保持着对难题的兴趣。——这个实验证明了：夸孩子聪明不仅不会增加孩子的自信，还会削弱孩子的抗挫折能力。

表扬聪明和表扬努力造就了两种不同的心智模型。表扬聪明包含了这样的观点：人的能力是相对固定的，解难题只是证明你聪明不聪明的方式。表扬努力暗示了：人的能力并不是固定的，我们可以通过努力来发展自己的能力。

接受了“人的能力相对固定”这样的观点，被夸聪明，他们就会努力维护聪明的形象，把注意力从挑战本身，转移到对自我的关注上——这就是僵固型思维。

接受了“人的能力不是固定的”这样的观点，就不需要有证明自己的包袱，自然就能把目光专注到努力本身。关注能力成长，而非关注自我证明——这就是成长型思维。

僵固型思维的人，面对挑战时，容易放弃，因为失败会证明自己不行。他们也觉得努力是一件可耻的事情，如果需要努力，那就是能力不够，他们就会偷偷努力。对待批评，他们视作对本人的负面评价。面对别人成功，他们看成是自己的失败，因为别人做到了自己没有。

成长型思维的人，欢迎挑战，他们把挑战看作能力成长的机会，以努力为荣，他们觉得努力就是激发能力的手段。他们把批评当作是别人帮助自己改进的反馈。面对别人成功，成长型思维的人去学习、去吸取经验，把它们变成自己经验的一部分。

僵固型思维，本质是一种防御心态。与不安全感有关，他们隐含着这样的人生假设：我的价值，是由别人来评价的，我只有表现得好，别人才会觉得我有价值。

世界向我们提出问题，我们努力解答问题，这时候，我们的能力在我们与世界的互动中逐渐成长起来，我们的自我也逐渐变得丰富起来。当我们不安时，我们就把注意力投射到自我身上，切断了与世界的互动，也就切断了在与世界互动中发展、成长的机会。

如果你相信变化，那你是一个什么样的人根本不重要，你会怎么发展才重要。 

如何突破僵固型思维？

首先思考人是怎么成长的？能力的成长，来自于挑战。

环境向你提出一个挑战，你努力地回应，如果你做出错误行为，环境就会反馈给你，最终你对这个挑战背后的原理用了更深的了解，你的努力在这个过程中得到了提升，这就是能力成长的过程。

从这个角度看，能力强不强，聪明不聪明，实际上不应该用于形容个人，而是描述个体和环境的互动方式是否适应，能否促进能力成长。

——只有面对挑战，才能成长。

我们在面对难题和挑战时，大脑通过适应环境的机制来变得更加复杂。

僵固型思维会阻碍我们成长，因为它让我们逃避挑战。怎么克服僵固型思维呢？

——关键在于改变对错误的认知。

我们的文化、教育，都是在教导我们避免犯错误。有一个说法，父母对孩子说的话，90%都是教孩子“不要做什么”，我们把错误看成是对自己强烈的否定，看成是失败。

然而，试错就是一种基本的学习机制，和能力无关，和事物发展的进程有关。【认识论】事物的发展不是直线式的，而是曲折向前的，并且没有终点。所以犯了错，也不是结果，而只是一个暂时的状态，一切都会过去。

管理错误的三种方法：
	1. 把错误看作学习机会。阿里云王坚说，学费是一定要交的，早交比晚交好。
	2. 突破自己不会犯错的形象。【我自己在大学时，为了维护自己的形象，有问题也不去问老师同学，最后完不成作业，就去抄】
	3. 制定犯错计划。从而消解掉犯错的消极价值，犯错也是为了完成任务嘛。

⚠️如果错误后果很严重，比如一无所有、家破人亡，那就要小心，你不是在犯错，而是在赌博。

错误是人生的一部分，有时人生因为错误而更加丰富。《有限与无限游戏》：人生就是一个无限游戏，错误不是游戏的终止，它只是游戏的一部分。你可以有意识地犯一些错误，让游戏更加有趣。






应该化思维——看不清现实

应该化思维的本质，就是不去认识真实的世界，而是试图让真实的世界臣服于我们头脑中已有的规则。当世界真实状况不符合我们的规则是，就会怨恨、愤怒、焦虑或沮丧。

几乎所有消极情绪的背后，都有应该思维的影子。

E.g.妈妈觉得儿子就应该聪明、听话、乖巧、懂事。刚入职场员工，觉得所有人都应该喜欢他，不尊重自己的同事，就要超过他们才能获得内心宁静。

要区分“应该”和”愿望“：它们最根本的区别就是，我们能不能容忍现实跟我们的愿望不一致。愿望就是承认了差距的存在，而应该思维，就是无视现实和意识之间的鸿沟。愿望落空，我们还有其他选择，当应该思维受挫时，我们就会患得患失，严重焦虑。

应该思维和愿望还有一个区别，当我们想做一件事时，我们是愿望的主人，我们可以支配着我们的愿望。而应该思维却常常变成我们的主人，我们失去了自主性。

两句咒语逃出应该思维：
没什么大不了，反正不会死。
没什么大不了，反正人都会死。

把一个想法仅仅当成愿望，会不会让我们可以偷懒？

当一个人说“我一定要做到！”时，他其实并不是说一定能做到这件事，而是说他有投入和风险的决心。这个决心不是关于外在世界的，而是关于他自己的。成事在天，但全力以赴在人。即使他很想做成，也不能奢望现实迁就他的愿望。

把决心看做是一种愿望，而不是必须要完成的事，会让人变得更灵活。这样你就会寻找方法，而不是一条路走到黑，利用现实，实现愿望，而不是抱怨、焦虑、愤怒。

区分愿望和现实，是一个人成熟的标志，也是走出应该思维的关键。世界不是围绕着你来设计的，宇宙根本不会理会你的喜怒哀乐。人生本来就是有很多苦难和不如意。【人生虚无】

小孩子才会相信童话，当生活不如意时，就会忧郁、愤恨、沮丧。这些负面情绪最初来源于对这个世界的乐观想想，在现实中变成了对世界悲观的理由。

盯着现实与“应该“的裂缝，沉浸在对这个世界的失望之中，就没有办法看到世界中的美好东西，这就时应该思维对自我发展的妨碍。

应该化思维——无法接纳自我

对自我的应该思维，是思维对自我的暴政，让我们在压迫中找不到自我。几乎所有关于自我的烦恼背后，都有一个“应该自我”的存在。

E.g.一个男生想准备一个很重要的考试，但身体不停使唤，经常拖延。

这个男生的应该自我：我应该全力以赴、心无旁骛，哪怕这不是我愿意做的事情。当他发现他做不到，应该自我和现实自我有差距，他就会想，“是不是我有问题？”——这时如果去找寻自我管理的方法，就是认同了这个应该自我的假设“对，我就是有问题”。

没有什么是应该的，我们关于自己应该怎么样的假设，也许本身就是偏见。但我们就不能对自己的人生提出更高的要求吗？——你要分清楚，这个更好的自己，更好的标准是来自于你的内心还是外在的设定？

E.g.一个28岁的男人，忽然醒悟，觉得自己该要努力了，每天睡6小时，没有周末地学习。学习时很开心，当效率变低时就很沮丧，觉得自己不如这样奋斗猝死算了。有时候，又会觉得放弃的心态太弱了，人家创业更辛苦，自己奋斗的日子还长着呢。

这种心态里，也有一个自我强迫的存在——我应该要努力的应该思维。自然努力的人，他们有一个想实现的目标，但他们并不关注自己努力不努力这件事。他们把所有注意力放到事情上，他们只想把事情做成，这时努力是一种自主自发的状态，是创造活动所产生的副产品。他读书、学习、听讲座，但心里没有特别想要做成的事，只有想要努力这种状态，因为他认为“努力总是对的”。

应该思维的本质是模仿。偶像剧教我们怎么谈恋爱，商家教我们怎么送礼物，结婚时拍什么婚纱照，平安夜送苹果。我们心里就种下了太多”应该“，这些应该思维变成了我们对自己情感的限制，最终给你取代了我们真实的情感表达。

我应该如此——这是用社会规则、他人的期许或文化习俗，代替了我们的自发行为。既然别人觉得那样做是对的，我就应该那样做，既然别人期待这样，我就应该像别人期待的这样做。

很多人想努力、想改变，看起来是自主自愿，但很多都不是自发行为，而是对自发的一种模仿。追求努力的状态，追求努力的感觉，努力就变成了对努力的模仿。

应该思维容易导致非黑即白，否认中间地带。一旦我们用理想化的规则限定我们，判定我们自己，我们的思维就变得僵固了，我们就很难容忍自己感受中和规则不同的部分。我们就会扭曲自己的情感，以让他符合”应该“的要求。

人之所以陷入应该思维，是因为我们不断在外在世界中给你寻找被别人喜爱的”自我“标准，来妄图根据这个标准创造一个理想的自我。这些理想自我，并不是来自于我们的真实自我经验，而是很多应该思维拼凑出来的。我们就变成了应该思维下的提线木偶。

怎么跳出应该思维呢？

——找回我们的感觉。感觉虽然模糊，但它才是我们真实的东西。

============内省思考================

努力只是完成目标过程中的副产品，努力让人充实、快乐。我高中时期，表面是看是最努力的，实际上，我根本不觉得苦。就是因为我盯着目标，现在，我就有点追求努力的状态，每天起床的动力不是目标，而是该起床了。

绝对化思维：让人陷入悲观

心理学家塞利格曼，也被称为积极心理学之父，让狗得了抑郁症。

A笼子的狗，学会了找方法关闭电击，B笼子的狗，却只能原地等待。等后面到了C笼子时，A狗继续寻找方法，B狗放弃寻找，哀哀嚎叫。

B狗形成了一种信念——我再做什么也没有用了。这种信念，让B狗放弃了挣扎，塞利格曼创造了一个概念，总结B狗的表现——习得性无助。任何回避行为和抑郁情绪背后，都有这种习得性无助。“再做什么都没用了”——就是绝对化思维。

绝对化思维的本质，和人类的抽象思维能力有关。我们通过抽象化思维，总结规律、提高生存率，但也容易把所受伤害抽象化，扩大防御范围——绝对化思维，就是对伤害的抽象化：每次遇到让我们痛苦的事情，我们就在心里埋下了一颗地雷，之后再接触同样的事，地雷就会爆炸，触发我们的应激性情绪。

为了避免受伤，我们就会把危险抽象化，在内心插满小红旗作为警示。我们受过的痛苦越多，警示牌标示的区域就越大。久而久之，无路可走，一碰就炸。

E.g.小罗毕业进入一个创业公司，每天加班，老板挑剔，半年后，小罗被开除。

这对他是一个创伤事件，给他留下心理阴影，他想“我不适合这家公司”——就是一个正常的反应。如果他把防御范围扩大，“我不适合创业公司”，他就把所有创业公司都排出；继续，“我不适合去公司工作，我应该考入体制内”；继续扩大，”我不适合工作，我不能应付职场中的人际关系、工作压力“，他的防御范围就扩大到了所有工作，他可能就选择啃老了。

被开除这件事，对他伤害越大，他心中的信条就越抽象，他的思考方式就越绝对化，他的防御范围就会越大，最后形成悲观思维。

悲观思维怎么看待挫折？

——永久化、普遍化、人格化。

永久化就是在时间维度上，认为这件事一直会发生。
	1. 形容事：”最近工作很忙“v.s.”这个工作总是没完没了“。后者让人看不到希望，就容易悲观。
	2. 形容自己：”我状态不好，我累了“v.s.”我很没用，我完了“。前者自带解决方案，而后者，是一个永久性的判定，没有可能变化了。
	3. 判断他人：”你总是只想着你自己，你总是每天不回家“，”我哪有每天不回家，你总是这样大惊小怪，无理取闹“。如果有反例，就不能老说总是，只能说有时候。

普遍化，就是由个别到一般，一只乌鸦黑到天下乌鸦一般黑。

人格化，就是觉得所有不好的事情都是针对我的，都是我的错，才让这坏事发生。电影里面，主角遇到倒霉事，就会对着天空大喊”老天，我做错了什么，为什么要针对我！！“我们对坏事的内疚，让我们觉得是我们的错，而我们明明是受伤者，这也是扩大了防御范围。

绝对化思维的最大危害，就是让我们防御所有的可能危险，从而生活在真空里吗，不敢接触现实。从而失去了从生活中给你治愈的机会。

这几节课，我们讲了三种防御型思维：僵固思维、应该思维和绝对化思维。这三种思维方式看似不同，其实有很紧密的内在联系。比如说，父母夸一个孩子聪明，这是一种抽象的评价，会让孩子陷入自我证明的陷阱中，孩子会努力维护自己的形象，从而回避挑战。这就是僵固型思维。然后孩子会发展出这样的思维方式：我应该表现得聪明，否则就没有人再喜欢我了。“应该……否则……”。这就是应该思维。
然后，如果孩子在某件事上没有做好，比如一次考试失败，那他就会想：我连考试都通不过，这就证明了我不够聪明，再做什么都没有用了。这就是绝对化思维。

僵固型思维、应该思维和绝对化思维，通常都是同时出现的。它们的核心特点，就是用抽象的思维方式，阻止了我们跟现实发生联系。

===========内省时刻==============

我们误解了这个世界，还指责这个世界误解了我们。

我就是绝对化思维的受害者，之前追女生被拒绝，就再也不敢追女生了，即使追求时，对方一旦表现得不符合我心意（应该思维），我就认为她不喜欢我，我还是会失败的，不如现在放弃（绝对思维）。

为了自我保护，失去了治愈的可能。

三句咒语克服绝对化思维：
	1. 这不是常态，过一会就有改变。
	2. 天塌不下来，这时这个问题，改了就好了。
	3. 不光是我，谁这辈子都会遇到类似的事。

与自我辩驳：突破三种防御性思维

小王看上了一个女生，平时也有很多互动，慢慢他就想试一试。于是在七夕节那天，他鼓起勇气约那个女生，今晚有没有空，一起吃个饭，女生很吃惊，犹豫了一下，说“不了，我已经有约了，下次吧”。女生一说完，小王各种情绪涌上心头，失落、生气、屈辱、沮丧，他甚至没有打招呼就直接走了。之后虽然这个女生也主动找过他聊天，但他便再也不想理这个女生了。

不是女生拒绝这件事，而是小王的解读方式（心智模式），让他有了这么多的负面情绪。

僵固型思维：人的魅力是固定的，和女生交往能力，我被拒绝了就是因为我没什么魅力。
应该型思维：我好不容易鼓起勇气邀约你，你就该答应我，而不是拒绝我，我没有被尊重。
绝对化思维：我真是个loser，我糟糕透了，没有女生会喜欢我，我这辈子都不会再谈恋爱了。

当我们自尊心受到伤害时，我们的防御型思维就在大脑后台自动运行。

心理学家艾利斯自创理性情绪疗法，他提出了3种辩驳方式
	1. 实证式辩驳，找与不理性的结论相反的证据。她拒绝我的邀约，就是拒绝我的追求吗？——显然证明不了。
	2. 逻辑式辩驳，审视推理的合理性，是否过度了？被女生拒绝，就说明我没有魅力，不会有人喜欢我，我不适合谈恋爱吗？——不能完全证明。这种方式力度不强，因为不能拿一种推理方式否定一种可能性。
	3. 实用式辩驳，我这么想有什么用？我想着我没有魅力，没人喜欢我，除了让我继续宅着，还有什么用？？这种方法简单直接，避免了在逻辑中绕圈子。

大部分人思考方式的错误倾向：
	1. 认为这个世界上存在着一种所谓的事实真相，一个正确认识。
	2. 认为自己所想的，就是事实真相，很少容纳其他可能性。
	3. 我们自己也知道想法非理性，但是很爽，很带劲，所以就要这么想。把别人想得很坏，把自己想的很糟，就想丧一下。

有时候我们确实需要合理地表达情绪，表达自己的失望、沮丧和愤怒，但是如果我们任由情绪把我们的想法带走，我们就放弃了控制自己想法的责任，就放弃了做一个理性的人。

心智模式最重要的功能，是看他是否产生积极的情绪，带来有效的行动。实用式辩驳，并不关注事情的真相，而是思维的功能。

头脑中好像有两个我，一个理性的我，一个很情绪化的我，但是，这两个我都不是我，我是另一个人，裁判的我。



==========内省时刻==========

直面自己的心理，真的是一件很痛苦的事。但是很有必要，问题不解决，它就永远在。

去创造吧！

如果把思维比喻成河流，河流要流动起来，需要3个条件：
	1. 梯度/张力
	2. 河道。
	3. 活水。

没有梯度落差，河水就会停止不动；没有河道，河水就失去方向；如果没有源头活水，河流就会枯竭。人的思维也是如此，梯度就是目标，河道就是行动的方法，活水就是和现实的接触。

什么样的思维，能够产生持续行动的梯度呢？为什么我们想要的改变总是很难维持？

打鸡血、一鼓作气、再而衰、三而竭，回到颓废，循环往复，多次以后，就算有了动力，我们也会怀疑我们是否可以坚持下去。为什么打鸡血，定目标不能持续呢？

《最小阻力之路》一书的作者，罗伯特·弗里茨根据自己的创作经验，开发了创造力课程，在这本书中，他去分离两种产生梯度的结构，创作的结构和解决问题的结构。他说，只有创造的结构，才能产生持续的梯度，而解决问题的结构，没有持续梯度。

如果你的目标是”要努力“，”不要颓废“，那就不是确切的可以创造的东西，而是问题本身带来的焦虑。只要她努力，焦虑就会缓解，梯度就消失了，她的动力就减少，直到问题重新让她焦虑，这种梯度才会重新发生——所以出现打鸡血到颓废的不断循环。

普通人解决这种问题，是通过拼命夸大问题，制造焦虑的方式，获得动力，他们在强化动力时，也强化了问题本身。为了保持动力，他们就只能让自己维持焦虑，变得越来越悲观。这种方式显然不能持久。

解决问题的思维，不能带来持续的成长，而创造型思维却可以。为了治愈自己的拖延症，陈海贤写了《拖延症再见》，又继续开了《自我发展心理学》这门课，从构思开始，它们就变成了他心里一个很重要的未完成事件，读书、收集资料，脑子里不停地想，就变得紧张而又有效率。

创造型思维是怎么产生梯度的呢？——弗里茨说，是因为爱。我们爱我们脑子里的构思、念头，我们就有足够的动力把他变成现实。我们越爱它，它越会推动我们持续行动。——从这个角度来看，我们的人生就是一个创造的过程，把我们心理钟爱的理念变成现实的过程，而不是解决问题的过程。不是说不需要解决问题，为了完成梦想，我们需要解决很多问题，但它们不是我们行动的动力，我们热爱的目标才是动力来源。

创造性思维把事物分成了两部分，一部分是我想要完成的作品，另一部分是我所面临的现实。创造型思维就要求我们正视现实，而不是忽视现实，才能在各种限制中国呢实现自己的念头，创造自己想要的东西。

以目标来思考现实，想我要什么，再想现实是怎样的，环境能够提供什么，再去想办法弥补目标和现实之间的鸿沟。解觉问题的思维，是以现实来思考目标，先去想环境能提供事，再来审视自己目标是不是实际的，该树立什么样的目标。

当你从现实思考问题时，你就无法突破现实的限制，就没有持续的梯度。





=========内省============

在我大二时，开始自学python，并用它来创造，实现批量下载，SHA256算法，建立博客等等，那个过程，真的是动力满满，脑子里一直想着，做成了就非常开心，到现在记忆都十分深刻。

现在我也用创造驱动自己！我每一三五写一篇文章，我用运动雕刻一个健美的自己，我用学习锻炼一个深刻的自己。


WOOP思维：把张力变成行动力

我们疯狂买书，办健身卡，本质是为了缓解目标的张力带给我们的焦虑。大脑分不清什么是计划和决心，什么是真正的行动。有时候我们做了计划，下了决心，大脑就会误以为我们做过了，行动的张力就被消减了。

人们需要积极的乐观的幻想，为我们行动提供希望，但从张力的角度看，幻想会减少行动的张力，一些研究证实了，幻想自己减肥成功的女生，她们的减肥效果远低于那些幻想自己会遇到困难的女生。此外，乐观幻想还会有一个问题，就是当我们感觉幻想受到威胁时，会想方设法去努力保护幻想，避免它和现实接触。比如，我们幻想自己很厉害，但是一和现实接触，这个幻想就落败了。

心理对照法：先想好处，再想障碍。

先幻想积极乐观的结果，再幻想路途中可能遇到的障碍。既保留了目标带来的张力，同时又把幻想拉近现实，让目标切实地跟现实发生联系。

E.g. 在IT公司做技术支持的小明，想做产品经理，他可以先想象自己愿望实现后，设计出一个很牛的产品，被很多人使用，成就感满满，再想自己专项过程中的障碍，比如要学习很多新东西，要转变思维方式，寻找相关的职业机会等等。

幻想会减少我们行动的张力，所以我们要想象体验阻碍，那么，要是阻碍大了，就会给我们很大的行动压力，让我们产生拖延的问题，怎么解决呢？

执行意图法：在大脑中预埋行动线索，如果…就…，「在场那一节，我们养场就是养一个有很多行为线索的环境」。当“如果”这个条件出现时，大脑就会自动反应应该做的事情。

如果我吃完晚饭，我就一边听书，一边洗碗。
如果我要睡觉了，我就看一篇文章。
如果我学习累了，我就弹一会儿钢琴。

预埋的行为线索越具体，到这个时间地点后，行为线索越能出发行动。这样我们执行的概率比普通计划就大得多。

发明“心理对照法”的事纽约大学心理学教授厄廷根，和发明执行意图的女心理学家彼得M戈尔维策是夫妻，他们把这两种思维工具结合起来，变成一种——WOOP思维。

W——Wish，愿望。可以先想想你要在本周、本月、本年完成的愿望。
O——Outcome，最好的结果是什么？
O——Obstacle，设想可能遇到的障碍。
P——Plan，计划，如果…就….

前两项是增加目标的动力，后两项是减少行动的压力。

===========内省===============

我的愿望是什么？——能够非常流利，出色地写作和演讲
这给我带来什么好处？——让我非常自信，充满掌控感和成熟感，收获更多的工作、爱情机会。
可能的障碍有哪些？——我会拖延、恐惧、抄袭剽窃
我的计划？——
	1. 如果我拖延，我就做5个引体向上，释放荷尔蒙再写。
	2. 如果我恐惧，我就做50个深蹲，大喊I can激励自己。
	3. 如果我写不出，我就每天从自己的学习内容写，查一手资料，每天写一点点想法，发到知乎上。

控制两分法：找到烦恼的根源


“上帝啊，请赐予我勇气，让我改变能够改变的事情；请赐予我胸怀，让我接纳我不能改变的事情；请赐予我智慧，让我能分辨这两者”——努力控制你能控制的事，专注精进，不要妄图控制你无法控制的事，顺其自然。

很多事我们不能控制，我们的原始家庭，我们的过去，我们的父母，别人怎么想，别人是否喜欢我，我们都会死。不承认很多事情我们控制不了，我们就陷入了应该型思维，这种思维本质就是对我们控制不了事情的执着。

也有一些事我们能够控制，我们可以控制我们是否早起、早睡、饮食，即使控制不了所有时候，我们至少可以控制几次。

控制两分法：
	1. 思考你所担心的事情里，那些是你能够控制的，哪些是控制不了的，把注意力专注到你能控制的部分。
	2. 对于不能完全控制的事情，把能控制的部分找出来，做成计划。

只要我们一直做事，我们就不会轻易陷入焦虑。

大部分人会注意一件事是否重要，从而分配注意力。但是，一件事重要不重要，那又怎样呢？这件事很重要，我们就应该控制它吗？这不一定，这里面有应该思维和天真的幻想；这件事很重要，我们就应该担心吗？这有一定道理，但我们任由自己担心，我们就放弃了我们控制自己能控制的事情。

我们控制不了听天命，但我们可以控制尽人事。这也是弹性思维。

=========内省===========

我们一直可以选择，但选择也是有选项的，有的选不了的，我们不能强求。比如，你的女朋友选项里面，不可能有刘亦菲。

一切都已经过去，未来怎么，在于现在的选择。懊恼悔恨已经没有意义，勤奋踏实才是最佳选项。

评论学习：

尽人事听天命，没有尽到人事时，不要怪天命。

刻在英国威斯敏斯特大教堂的一块墓碑上的一段话 ："当我年轻的时候，我梦想改变这个世界；当我成熟以后，我发现我不能够改变这个世界，我将目光缩短了些，决定只改变我的国家；当我进入暮年以后，我发现我不能够改变我们的国家，我的最后愿望仅仅是改变一下我的家庭，但是，这也不可能。当我现在躺在床上，行将就木时，我突然意识到：如果一开始我仅仅去改变我自己，然后，我可能改变我的家庭；在家人的帮助和鼓励下，我可能为国家做一些事情；然后，谁知道呢?我甚至可能改变这个世界"

既专注精进，又顺其自然，人生就这样充满了矛盾辩证。

正念思维


现实就是一部永不落幕的戏剧，随时随地都有新鲜事发生。唯一不同的是，走近它，感受它，其实这是一种近的思维方式：关注真实的、正在发生的、近的事情，这些事情是流动的、不断发生着变化的。

而远的思维方式，就是关注想象中的、抽象的、远的事情，这些事情常常是静止的、僵固的，是我们头脑中给你已有的东西。

近的思维会不断跟现实接触，让现实改变自己的思维方式，是一条不断有源头活水的河流。远的思维，只注重头脑中已有的规则，这些规则让人只能看到想看到的东西，是一种拒绝改变的思维。

僵固型思维不看人在做什么，不看人的努力，只是评价你这个人怎么样，聪明不聪明；
应该型思维只执着于头脑中已有的规则，不关注现在正在发生的事情；
绝对化思维，把一件正在发生的坏事，用永久的、普遍的和人格化的方式概括、推演。
——它们都是远的思维。

它们的存在，也是有道理的。信息是无限的，我们有限的精力要处理信息，就只能将信息提取成概念、观点、评价、刻板印象。帮助我们省略了加工需要的认知资源，让我们面对的世界有了更多确定性。

但是，远的思维也有坏处，就是限制了我们的成长，让我们忽视近的事物，新的东西进不来，思维就不会有什么变化。远的思维像看电视，导演运用镜头技巧，让你看到他想表达的东西，而近的思维像是看话剧，就在现场，细节很多。

当我们学习正念时，会有很多念头产生，要把我们带离此时此地，为了让心安顿，就需要有一个焦点，你可以在上面保持足够长的时间，变得专注。专注了，你就在这件事里面了，你就是近的思维，正念思维了。

思维以语言为载体。学习新思维，就是学习新的语言。

正念思维（近的思维）三原则：
	1. 用描述性语言，而不用评价性语言。不加自己的评价，少用形容词，尽量用动词描述正在发生的事情。用动词，就带有一种发展的眼光，用形容词，就封死了发展的可能。
	2. 问具体的问题，而不是抽象的问题。不要问“我很懒怎么办？”，“我很内向怎么办？”而是问，“遇到哪些人我会紧张，遇到哪些人不会呢？在什么场合容易紧张，在什么场合不会呢？在与人相识的哪个阶段会紧张，哪些阶段不会呢？最近在跟谁交往，感觉怎么样呢？”只有这样，我们才能看到真正的问题，发现自己能够控制的部分。
	3. 关注现在能做的事，而不是关注事情的结果。在时间上，先有做事，之后才会有“有用没用”，要是我们头脑先预想有用没用，就会让我们失去行动动力。

问自己两个问题：
你现在能做什么？
你愿不愿意去做？

把注意力放到近的地方，近的时间，同时暗含了这样的观念：我能控制我的行为，我也愿意对自己行为负责。
	
思维弹性与思维进化

思维是怎么进化的？

——答案在别人心里。

倾听是一件很重要的事情。这句话如何理解？

人与人沟通中，太多信息潜藏在语言中，很多人听别人说，表面在听，实际上已经在内心里准备了一个思维框架，把别人的话往这里面套。我们总是困守着自己的认知，固守着自己对倾听的理解，要真正理解对方想说的意思，其实是非常难的一件事。

E.g.前几天我在餐厅吃饭，听到一对夫妻在说话：
妻子说：“这几天没睡好。”
丈夫：“这几天天热，人就是容易早醒。”
妻子：“我有点担心女儿上托儿所能不能适应。”
丈夫：“小孩子嘛，可不都这样。过一段就好了。”
妻子就沉默了。
在这段对话里，妻子一直在跟丈夫说，她觉得生活的某些方面出了问题，而丈夫却一直在强调“一切正常”。
丈夫听到妻子的话了吗？并没有。他只是用自己的想象来理解妻子说的话。
也许对丈夫来说，妻子的焦虑也是一种新的经验（也许不新了）。他一直在努力把这些新的经验纳入到自己原有的认知框架里。他没来得及听妻子说什么，却急着给妻子提供一些解释，好像他很需要这种“一切正常”的感觉。
如果这时候妻子告诉丈夫，“你没听我说话”，丈夫也许不会理解，甚至会反驳说：“哪里啊，我不是一直在倾听吗？”
可是，是什么让丈夫不愿意听呢？是他对妻子的状况不感兴趣？是他担心妻子在通过“告诉你我不好了”来责怪他？还是他很需要这种一切尽在掌握的感觉呢？

倾听的要诀，就是知道很多事情其实我们并不知道。好的倾听者，一定是有很多问题，他知道这些答案在别人心里。不好的倾听者，他心里没有问题，只有答案，他一早就知道了别人说了什么，他听别人说的，永远都是自己心里想的那些东西。

佛教禅宗有一种说法，思维发展有三重境界
	1. 看山是山，看水是水
	2. 看山不是山，看水不是水
	3. 看山还是山，看水还是水

人认识世界和自我的方式，也是这样从简单，到复杂，再重新回归简单，螺旋深入，充满弹性。人思维的发展方式，和沟通比较像，就要不提前预设立场，不确定自己知道所有，为探索留下空间。

我们所学的知识，也只是局部的真理。套用三重境界。
	1. 把知识当作绝对真理来学习
	2. 知道它是有错的，所以批判它、排斥它、不接受它
	3. 重新把它当作知识来学习，既知道它有局限，也知道它对你有用的地方在哪里

承认知识是局部的，那么就为我们生命的发展，留下了一个进一步探索的广阔空间，这个空间也是思维发展空间，也是自我发展空间。我们关于世界、社会、自己的看法，也可以看成一种知识，我们是这些知识的生产者，也是接受者，既是老师，又是学生。

所以，我们要抱着一种观念，我们对世界的认识也只是局部的，不是绝对的真理。我们承认自己的限度，并继续探索其他的可能性——这就是思维的弹性。

心理学家皮亚杰提出，思维对于环境的有两种基本的适应方式。同化：修改新发生的事物，去符合我们头脑中原有认知模式；顺应：不改变新事物，而是改变我们的认知模式，适应新事物。

所以说，思维是如何进化的？

我们必须先承认我们的认识，只是局部的认知，从这一立场出发，探索其他可能性。最大的可能是什么？别人的想法，因为每个人都是世界信息的一种组合方式，每个人有不同的经历、知识、情感，所以每个人的想法也千奇百怪。





















</pre>
</div>
<div title="启动行为的改变">
<pre>我们内心天然有一种防御机制，让我们追求稳定和可控，排斥改变与发展。

卡尔维诺说，世界先于人类而存在，而且会在人类之后继续存在，人类是世界所拥有的一次机会，用来组织一些关于自身信息的机会。——你存在的意义是什么？也许是给世界一个机会，让世界通过你的自我发展，变得更好。

行为是显性化的自我。自我发展的过程，就是更具适应性的行为代替旧行为，新习惯代替旧习惯。

每个人都有选择

从找困难变成找方法，最关键的一步是意识到：你其实一直有选择。

我们认为没有选择的原因，一是以为只有按照理想状况作出选择，才算有选择，如果选项不够好，那就是没有选择；二是不愿意承担对自己的责任。

选择是基于当前现实的，而不是基于头脑中的理想，我们要选择的不是未来的结果，而是此刻的行动。头脑中的理想是虚假的安慰剂，长饮终将变成是毒药。

改变需要勇气，承担改变的责任。这不是一件轻松的事，人们经常将选择权交给别人，就是怕承担责任。

改变也要自省，对自己进行批判，同样是一条很痛苦的路。

改变的本质：创造新经验

两个自我：大象与骑象人

我们心里有一个行为标准，希望自己可以做到，却经常被现实打脸。好像心里有一个自己，而现实却是另一个自己。你的躯体里确实有两个自我，一个是感性的自我，一个是理性的自我，心理学家乔纳森·海特作了一个有趣的比喻，来描述两个自我的关系：

人的情感面就像一头大象，而理智面就像一个骑象人。骑象人骑在大象背上，手握着缰绳，好像是他在指挥大象，但事实上，他的力量微不足道。一旦和大象发生冲突，他想往左，而大象想往右，那他通常是拗不过大象的。

对于改变而言，理智提供方向，而情感提供动力。

大象的脾气如何，它有3个特点：
	1. 力量大，一旦被激发，理智很难控制。
	2. 受情感激发，既容易被焦虑、恐惧等消极情绪驱动，又容易被爱、怜悯、同情、忠诚等积极情绪驱动，所以它既可能是改变的阻力，也可以成为强大动力。
	3. 受经验支配，它只认我们切实体会过的“经验的好处”，不认我们理智所构想的“期待的好处”。

期待的好处，其实是我们想象中的好处，我们现实并没有深刻体会到。期待的好处是抽象的，而经验的好处是具体的；期待的好处是发生在未来的，而经验的好处发生在过去或现在；期待的好处是被教导出来的，而经验的好处是我们通过亲身体会，真实感受到的。

这两个好处经常发生冲突，骑象人想去期待的好处，而大象转向经验的好处，哪怕有时候，期待的好处比经验的好处大得多。

我们的人生经历中，一旦某个行为获得了好处，他就会被保留在我们的生命里，哪怕我们没有意识到，它仍然会影响我们。

强化学习，你的某种行为，可以增加你想要的结果，或者减少你不想要的结果，那你就会巩固它。人一生的行为，都会通过“强化“作用，形成我们的经验。我们通过刺激与强化，建立与环境的关系。

所以，当我们改变失败时，责怪自己是没用的，因为我们的行为不是独立于环境而存在的。环境刺激——应答行为——强化自我，这个链条不打破，我们是很难改变的。

改变的本质，就是要创造新的经验，用新经验代替旧经验。创造新的经验，需要通过新的行为，获得新的反馈，新的强化，并亲身感受到它，最后形成新习惯。

如果你只有想象中的期待，却没有新行为所带来的新经验，改变就很难发生。


心理舒适区：改变的障碍

心理舒适区，说的不是熟悉的环境，而是我们熟悉的应对环境的方式。心理舒适区并不一定舒适，而是这种方式让我们产生了心理舒适，比如《肖申克的救赎》里面老布在监狱关了50年，出狱后虽然自由了，但他选择了自杀。走出心理舒适区，不是说走出我们熟悉的环境，而是改变我们的应对方式。

心理学中应对方式量表：
	1. 解决问题
	2. 自责
	3. 求助
	4. 幻想
	5. 退避
	6. 合理化

应对方式有两层含义，一是行为上的应对，二是内心情绪上的应对。

心理舒适区为什么不好走出去？

控制感——它带来的最大的好处。我们越是感到威胁、感到焦虑，就越需要控制感，就越会抓着自己应对方式不放。走出心理舒适区，就是要放下曾经应对焦虑的武器，去直面焦虑，寻找新的方法，这是情感大象最难忍受的。大象想要回到它熟悉的应对方式上，找回控制感。

例如，一对异地了多年的情侣，最后终于在一起了，女生却想回到原来小城市。因为这种方式她最熟悉，最让她有控制感、安全感。不对关系抱有期望，随时准备离开过一个人的生活是一种心理舒适区；觉得自己配不上好的东西，也是一种心理舒适区。

心理舒适区的本质是熟悉的应对方式所带来的控制感。这种控制感，让我们难以改变。

我的心理舒适区？

找女朋友想找一个十全十美的，不然就想离开。
和人不敢深交，维持长久关系，怕对方的背叛和远离。
认为自己总能完成任务，于是拖到最后一刻。
不得不面对不喜欢的人和事时，就会选择逃避、拖延、放纵。
不敢写作，认为自己写得不好。
经常靠幻想一些成就、荣誉、金钱来满足自己。


心理免疫X光

要改变，就是要放弃一套自己的适应机制，用另一套适应机制。你需要去面对自己内心真实的爱和怕，需要改变自己的思维方式，走出自己的心理舒适区，才能获得新的经验，迎来真正的改变。

心理舒适区会组织你走出去，阻止你改变，所以需要知道感性的大象怎么想的，它怕什么，爱什么。

哈佛大学心理学家罗伯特·恺根发明了一种工具，叫心理免疫的X光片。他认为，人生理有一套免疫系统来排斥不属于身体的微生物，人的心理也有一套免疫系统，它会排斥我们采取的新的行为方式，以此维持心理结构的平衡和稳定。心理免疫系统本质是一套焦虑控制系统。当我们用新行为时，免疫系统产生焦虑，让我们回到老办法。这就是心理舒适区。

例如，艾米讨论不敢坚持己见。

心理免疫分层：
	1. 我们希望达成的行为目标。
	2. 我正在做哪些跟目标相反的行为。
	3. 这些相反的行为背后隐含的好处。
	4. 让这些好处成立的重大假设。

重大假设在大象心里运转的，骑象人只看到了大象的情绪，并不知道大象在怕什么。通过X光片，骑象人知道了大象在害怕什么。

这就是改变难以发生的原因了，改变的愿望和不改变的动力之间，存在严重的冲突。我们不能责怪它，因为它曾经保护了，也许现在还在保护着那个弱小的、容易受伤的你。就像一个老奶奶，尽心尽力保护你，百般阻拦你去新地方，但你终有一天，要挣脱她的怀抱。

荣格说，如果潜意识的东西不能转化为意识，它就会变成我们的命运，指引我们的人生。

看起来，我们活着常识里，其实，我们活在自己的假设里。

=============内省时间================

我希望达成的行为目标：我想提升我的表达能力，说和写
和目标相反的行为：我常常拖延，不去写，不去说
隐含的好处：这样就不会暴露自己的缺点和不足
重大假设：这要不去面对这些问题，这些问题就不会困扰我

检验人生假设：看清限制自己的规则

这些假设，平时都埋得很深，我们把这些假设当做常识来看，但只要一看到这些假设，经过理性的考问，它们对人心理的隐形操控力就打破了。

寻找隐含假设的3个提问：
	1. 那些和目标相反的行为，带给你的好处是什么？
	2. 如果你做不一样的行为，你最担心别人怎么对你？
	3. 为什么相反的行为，所带来的好处是必须的？如果没有这些好处，会发生什么可怕的事？

寻找隐含的重大假设时，可以用“如果。。。就。。。”，你会发现，你根深蒂固的信条，真的就是一个假设而已。

找到了隐含的重大假设是不够的，关键要用新行为，做不一样的事，获得新经验，证实或证伪这个重大假设。从而让内心的重大假设，慢慢松动。当然，做新行为时要保护大象，即要勇敢，也要安全、可控。可以1、3、5、7坚持旧经验，2、4、6坚持新经验。

新的经验，常常是在预期经验（大象）和真实经验（实际的）之间的对照中产生的。

陈海贤自己常常背后抱怨合作伙伴，隐含假设是“如果我直接表达不满，说明我很苛刻，别人就不会喜欢我；如果我直接提要求，别人可能会拒绝，就会引发冲突”，他通过再一次提出要求，最后获得了自己要的结果，收获了新的经验“如果你觉得重要的东西，你就要去争取，而不是背后抱怨。”

===============内省时刻===============

重大假设：只要不去面对这些问题，这些问题就不会困扰我

行动：去回看日记，看看之前的问题，现在有哪些还在困扰我的

很多问题，我一直没有解决，它们一直在困扰我！！！所以，问题必须要去解决！！！

小步子原理

在改变的路上迈出小小的一步，获得一个小小的成功。让每一次的成功，成为下一次改变的基础。

小成功让大象体会到改变的好处，让它相信改变是可能的，它就会听话，向着改变迈开步伐。

E.g. 浙大大四学生，临毕业没修满课，在寝室打游戏。

奇迹提问：
——“假如奇迹出现了，你真的顺利毕业了。会发生什么呢？没关系，只是想想嘛”
——去当一个高中老师
——“如果你已经顺利毕业了，你真的做到了。回顾这个过程，你迈出的第一步是什么？”
——至少得去食堂按时吃饭吧
——“好，那你能做到吗？”

往前看，只会看到困难；往回看，你会看到方法和路径。假设结果已经发生了，就绕开了大象的防御机制，大象不会去思考这件事怎么不可能，而是去思考这个过程怎么发生的。

改变的第一小步，虽然微小，但它就像是一副多米诺骨牌，会有蝴蝶效应。最重要的就是找到能够推动改变的那块牌，找到第一个小小的改变，把它推倒。

改变的时候，千万不要去和心中的大象正面对抗，而是要去绕开大象的防御机制。

小步子原理不只是一个关于如何获得最终成功的策略，而是一个关于让自己开始行动的策略。小步子原理的核心就是，让你专注到你当下能做的事情上，至于这件事情能不能带来你想要的结果，这不是你能控制的。因此，不需要你去关注。

E.g. 匿名戒酒者协会。首先，承认在对付酒精上，我们自己已经无能为力了。这样，我们就不用把注意力房子我们控制不了自己的事情上去。然后，用小步子原理，让人们把目光聚焦在他们能控制的事情上，一天一次。也就是说，不要去想一辈子不喝酒这样的承诺，而是只要承诺自己24小时不喝酒就OK了，24小时之后呢？，那又是新的一天了。他们解释说，在大部分例子中，我们没法预测事件的转向，不管现实准备得多么充分，结果还是可能猝不及防。我们为未来设定的任务太过巨大，留给自己的只剩精疲力竭、不堪重负和心烦意乱。所以不要想未来太过巨大的任务，专注于你眼前能做的一小步，并把它做好。因为只有这样，大象才会迈开步伐。

不要去妄想控制自己无法控制的未来，而是从脚下可行的一小步去开始自我发展。

===========内省时刻==============

假如我真的当上了正部级官员，省委书记，回看我的履历，我在25岁时会做什么呢？

——不去思考买房的事，专心工作、调研、写作、学习，打造自己的职场形象，活跃地在朋友圈输出价值。

那你至少应该做到啥呢？

——每个月写一篇文章吧。

那你可以做到吗？

——当然可以！

环境场原理
	
场是什么？——场是包含大量行为线索的环境，这些行为线索会刺激你做出特定的行为。在场里，你就会觉得自己在做最自然不过的事情，参与培训的人好像被一种神秘的感召力联结到了一起。

感性的大象对“场”很敏感，它总是比理智先感受到“场”所暗示的行为线索，并照着这个行为线索行事。环境中行为线索越多，场的力量就越大。在一些场你会努力工作，在另一些场你会懈怠，在一些场不会沉默，在另一些场你会滔滔不绝。

刚参加工作的小嘉，看剧下饭，吃完继续看，一集一集看，最后快要睡觉，一晚虚度。“明明不快乐，为什么还会日复一日，不能改变呢？”——场的力量。

生活的乐趣分为两种：消费型快乐和创造型快乐。消费型快乐，是消费的别人创造出来的产品，满足的是表面上的感官刺激。创造型快乐，你在创造，你在发挥自己的才能，辛苦地工作，你会体会到一种深刻的成就感，一种自己正在变得更好的感觉。

消费型快乐是酒肉朋友，创造型快乐是良师益友。学习是一种创造型快乐，看剧是一种消费型快乐，小嘉的空虚感，就是消费型快乐过后的空虚感。为什么小嘉明知创造型快乐更美好，却选择消费型快乐呢？

——因为创造型快乐是骑象人所热衷的、理智的快乐；而消费型快乐是大象所热衷的、感官的快乐。要从消费型快乐转到创造型快乐，我们就需要说服感性的大象，给自己创造一个学习或工作氛围浓厚的“场”【客厅不装电视机，而是改造成图书室。】。

小嘉在家里创造的场，就是放松和娱乐的，那里的所有行为线索，都在暗示她：应该好好休息了。

所谓场，就是我们心中的一个关于“空间功能”的假设。

图书馆、自习室、写字间就是与工作学习相联系的，而宿舍、家是和休息娱乐相联系的。学霸喜欢成群结队去图书馆，而学渣喜欢宅在宿舍。

场的力量来源：
	1. 别人在这个空间里的行为。人是社会性动物，别人埋头学习、工作，它自然会暗示你也这样。高中三年为什么是自己最努力的时光？因为每个人都在学习，教室就是一个很有力量的场。为什么陈海贤去省图书馆工作呢？因为那里学习的人多，场的力量很强。
	2. 你以前在这个空间里的行为。书桌只学习，想浏览网页或看电影，要求自己换一个地方，如果在书桌上娱乐，书桌这个场就会被破坏掉。

场——就是你在一个空间的做事习惯，习惯会形成稳定的心理预期，进而又会巩固习惯的行为。你在这个空间里做的事情越纯粹、越持久，这个空间“场”的力量就越大。

场——是环境记忆中，我们每个人的历史。如果你有意思地让你的奋斗、你的挣扎、你的灵光一现、你的引以为豪，只在某个特定的空间里发生，那这个空间就开始有了记忆，它就成了能调动和激发大象的“场”，这里就成为了存储你美好新经验的记忆银行。

=============内省时刻=============

我要有意地打造场，书桌只学习，沙发休息和娱乐，卧室只睡觉不看手机

洗澡时听书

以后的房子，不放电视，做一个大桌子，一边椅子，一边沙发，平时学习，休息时放下投影看电影。【场可以分时复用】

情感激发


要改变，需要先让大象有所触动，它才能听得进去道理。先晓之以情，才能动之以理。

当你劝人的时候，别人说“道理我都懂”，那就是说“你说的道理我不想听”，他已经把道理放到很远的，跟他无关的位置上了，因为你没有触动他的大象。

大象容易被焦虑、恐惧这样的消极情绪触动，也容易被爱、怜悯、同情、忠诚这样的积极情感触动。要先激发情感，才能带来改变。

人们习惯用焦虑、恐惧的方式来促成改变，比如罗振宇贩卖焦虑哈哈哈，宗教渲染末日危机，学校里老师用批评让学生听话，公司用淘汰评优来让员工干活，每个人都通过自责的方式，给自己压力激励自己改变。

只是每次面临改变时，我们都会分裂成两个自我，一个正义、上进的自我，一个堕落、邪恶的自我。上进的自我总是责备堕落的自我，堕落的自我常常无敌自容，自惭形秽，焦虑、内疚就这么产生了。

但是，自责、内疚能推动大象改变吗？当然不能！我们总是一遍内疚自责、一遍继续拖延。为什么呢？因为乱吃东西、拖延，这些行为就是为了应对焦虑和压力的！！

内疚自责增加了你的焦虑和压力，那你就用大吃大喝、拖延应对压力。所以，你就陷入了“放纵——自责——更严重拖延”的恶性循环。这就是为什么人们越自责越拖延的原因。

戒烟广告拍的很吓人，烟民们看到了，就要抽根烟压压惊。

用焦虑、恐惧、内疚的情绪刺激大象，大象就只会焦虑烦躁地原地打转。甚至，内疚、自责会降低你的自尊，让你觉得自己懒惰、一事无成，进而破罐破摔。那个你责备的自己，也正是要承担责任的自己，如果你已经把自己骂得士气低落了，那你怎么还有勇气和力量去改变呢？

E.g. 陈海贤的老师，被她的老师批评，她说，我不停地批评你们，挑战你们，是相信你们完全能做得更好。

对自己要求高，不是把她变成内疚和自责，而是”我能做得更好“的自豪感。把厌恶的消极力量化成爱与期待的积极力量，只有后者，才能触动大象。

放弃和自己之间的战争了，对自己好，就是带着爱、同情、和期待，这样，它才会心甘情愿，为你上路。

第二序列改变


反思一下，如果我们不知道改变的方向，盲目地想要有所不同，追求改变本身也可能变成我们的心里舒适区，成为我们逃避真正改变的借口。

想要改变，其实是一把双刃剑，它既能给人动力，也能焦虑迷茫，甚至陷入重复无效的改变之中。你在进行的改变是有效的吗？

E.g.一位来访者来咨询，他毕业3年换了5份工作，不想庸庸碌碌过一生，想问怎么实现自己的价值。

还是先别想怎么实现自我价值的事了，先想想怎么挣钱比较实在。他一直在努力改变，但有些东西却从来没有变过，要先停止这种无效循环。

改变有两个层次：内容的改变，比如工作；应对方式的改变，比如不停地换工作。

他真正需要改变的，是应对方式，是用不停换工作来应对焦虑的方式。

把“改变”作为应对方式，本身就需要改变，这在心理学上叫做”第二序列改变“。它来自美国心理学家瓦兹拉威克的书《改变：问题形成与解决的规则》，他就用很多例子说明了，为什么改变没有解决问题，改变本身成了一个问题。

E.g. 打破砂锅问到底的孩子，浪费了很多时间和精力，很痛苦，妈妈建议他改变内容——去给思考的事务价值排序，而爸爸建议他不用改——改变自己想要改变的想法，而是接纳自己。

自我接纳，不是不改变。从第二序列来看，接纳自我本身就是一种改变，而且是很难的改变——难在忍受。有的焦虑是常事，有时候我们就要去忍受不好的境遇，哪怕暂时看不到希望。【谈恋爱也是！！！要忍受不愉快，才能收获大愉快！】

很多人说自我接纳，其实把它当作获取另一种好处的途径。很多人想通过自我接纳，获得幸福、平静、快乐，”如果自我接纳了，那我就会变得更好了“，这在本质上还是想要改变。追求自我接纳这个追求本身，就是他无法接纳自我的原因。自我接纳不是追求，而是舍弃。

舍弃对生活的过度控制，对完美自我和完美世界的幻想和执念。

心理治疗领域，有一种著名疗法，叫”森田疗法“，核心理念就是：带着问题生存，为所当为。——不纠结于你自己的问题，而是把它当作你生存的常态，进而专注于你真正想做的事情——这才是自我接纳的真谛。

回到例子，他爸爸把他想要改变的问题，变成了一种不需要改变的资源。

判断是否需要改变的标准——你的状态，在你改变的动作实施后，是会改善，维持，还是变糟呢？

无效的改变会维持原状，形成恶性循环。例如，失眠的人想要改变他失眠这件事，他就会警惕起来，当他本来迷迷糊糊要睡着时，突然一个念头——我快要睡着了——马上又让他清醒过来，想要改变的念头加剧了失眠，变成了一种恶性循环。

3年换5份工作的人，也是如此，想实现自我价值没错，但自我价值需要积累，他一心想着实现自我价值，就让自己不断换工作，打断了自我积累的过程。

当我们想改变时，要问：
	1. 我所遇到的，是世界的不如意，还是需要改变的问题？
	2. 我想要改变的努力，有没有打断自然发展的历程？


=========================================

这一章讲了行为如何维持的，改变困难在哪里

	1. 旧有行为有它的好处
	2. 心理舒适区让我们用熟悉的应对方式去处理问题
	3. 我们每个人都有阻碍改变的心理免疫系统

改变的方法：
	1. X光检验行为背后的假设
	2. 小步子积累小成功
	3. 养”场“
	4. 激发情绪

最后，区分有效改变和无效改变。

=============内省时刻==============

我最想改变的目标：能够自然、从容地表达自己

我现在的行为：就单纯想，不去做

行为的好处：写作很痛苦，不去练习可以逃避痛苦

让这些好处成立的假设：我最后肯定有办法解决它，现在可以不用管


我去回看我的日记，发现很多问题，除非我专门去解决它，比如减肥、找女朋友，不然它会一直存在——作息、睡眠、懒散的状态

我只有去解决写作这个问题，我才能真正学会写作、演讲

小步子积累：
每1，3，5写一篇文章，2，4，6休息，字数不限，题材不限

养场：
冥想15分钟后再写

激发情绪：
回忆初三时，我每天写一篇文章，那种自己变得越来越好的感觉

























</pre>
</div>
<div created="20210707070645065" modified="20210707075541954" title="权力如何管理社会？">
<pre>!01 经济学的理论前提是政治学

亚当·斯密的很多市场理论，看不见的手要发挥作用，需要有条件，其中一个就是每个人采取合作而非对抗的态度，都遵守一套互利规则。

你去买菜时，你不怕小贩坑你，因为背后有警察、警察后面有整个国家的力量。就算国家不直接干预一切，它总是在场的，市场交易才能顺利进行。

英国近代哲学家托马斯·霍布斯第一次论证国家的必要性。300年前，他认为，如果没有国家，由于资源有限，人们为了争抢这有限的生存资源，就可能会互相敌对，甚至还会导致“每个人对每个人的战争状态”。而国家的存在，就是为了克服这种人与人的战争状态。

需要建立一个统治机构，制止人们的互相侵害行为，霍布斯称之为“利维坦”，本意是犹太圣经中描绘的一种海中怪兽，霍布斯用之比喻国家力量要非常强大。
【注意，这只是一个思想实验，在人性恶的前提下，演绎出的逻辑。人类历史上从来没有出现每个人对每个人的战争】

国家的三个基本特征：暴力、垄断、合法。为什么要合法？因为仅凭暴力，统治成本会非常高，国家也不稳定，只有合法性，让大众内心对国家、对统治、对权力认同，并自愿服从。

——国家是一个合法垄断暴力的机构。

但国家也是个奢侈品，国家需要社会发展到一定程度才会出现，因为国家需要成本，而且成本不低，现代国家更高。

中国汉代税负最轻时，“三十税一”；西方国家有“税收自由日”的概念，也就是一年工作多久为了交税，之后的才是为了自己干。美国是到五月，北欧福利国家更延后。

!02 战争塑造了国家

美国查尔斯·蒂利观察欧洲历史后提出，国家构建的根本动力，不是人为设计，而是战争。

欧洲现代国家形成类似中国战国时期。秦国商鞅变法，是因为受到魏国威胁，而魏国强大是因为魏国搞了李悝变法，而魏国变法是因为韩国变法——地缘政治导致军事压力，然后倒逼内政变革。

军事系统——税收系统——官僚系统

先提高战斗力；而军备竞赛很费钱，最好的搞钱方式就是收税；收税需要完善的官僚体制。这就是国家发育的三件套。

新方法取代旧方法，却带来新问题【矛盾论】。没有对军队的绝对控制，往往容易发生政变；征税也有成本，征税对象不愿意交，国家还需要有相关公共服务提高老百姓的认同感，积极交税；官僚系统腐败问题。

卓克评论：事与愿违的政策是有一些数学模型的理解，就是社会里的活动都是典型的非线性: 事件a对事件b的影响是c，而c又同时参与构建a和b。但是具有这样特征的系统都会在叠加几代后进入混沌，也就是实验不可复现，初始值微小的变动就引起两次看上去一模一样的实验，结果相差几倍或者几百亿倍。所以凭什么按政策走就一定得到心里的那个结果呢，概率太小了。

!03 君主制为何可以延续千年？

关于谁来统治，人类历史上主要由两种方案，要么君主，要么人民。为什么人天生追求公平，却使用了上千年的君主制？

在古代社会的民主就是一台很难升级的电脑。古代民主的方式不同于现代的代议制制度，是直接民主、广场政治，其只适合小国。因为要考虑公民早上赶路过来，天黑前回家，考虑一个人每小时步行5公里，每天来回走10小时，单次5小时，所以这样的民主方式只能照顾半径为25～30的范围，面积就是2000～3000平方公里，就相当于中国一个地级市的大小，这也就是雅典城邦的大小。

这么小的地方，无论经济、军事多么强大，都难以抵挡规模巨大的君主制国家。

而古代的君主制社会，扩展性很强。公民不直接参与，统治半径就可以很大，只要君主的战马和士兵可以到达，只要能建立官僚系统和税收系统，就可以把一个地方统治了。

君主制也有缺陷（bug），比如君王是肉身，有生老病死；君王权力巨大，引得野心家来。就需要打补丁，克服缺陷。
	1. 合法性。建立一套合法的话语系统，君权神授、君权天授、血统论等等。
	2. 制度。讲君君臣臣，为臣之道，不得犯上作乱，要满门抄斩。
	3. 家族世袭制。降低个体死亡带来的动荡。还会产生代际利他性，老子为儿子攒家业。

君主制也有无法修复的BUG，比如坏皇帝；继承交接风险，会有残酷的政治斗争与内耗；委托代理风险，天高皇帝远，官僚利益和和国家、君主利益不一致的。

直到19世纪，民主制的优势渐渐显示出来。

!04 官僚制度为什么难改革？

政治学上，官僚制度指的是基于科层规则的一套行政系统，官僚就是泛指其中的行政人员。

官僚系统伴随着国家的产生而产生。由上两节所知，为了生存，国家需要一定规模，所以不得不依靠官僚系统。官僚制来源于外部条件，其问题内生于“国家规模困境“。国家越大，官僚层级越多，君主监督官僚的成本就越高。

此时国家有两种选择，要么授予地方官员较大自主权，让他们具体问题具体回应，但这样的风险就是可控性低，容易腐败、叛乱。第二种就是中央统一标准，一刀切，这样虽然简单粗暴，但解决了一个大规模国家的可统治性问题。

一个国家首要问题是可统治性问题，而非回应性问题。

张居正改革，就是一套基于目标管理的绩效考核。要改革官僚制问题，也只能依靠官僚制的路径。

马克斯·韦伯对于理想官僚制的论述：
	1. 等级制原则；
	2. 专业化原则；
	3. 流程化原则；
	4. 文书化原则；
	5. 非人格化原则；
可以看出，每一条都是在强调统一的标准。

现代解决方案：
普通民众评价官员绩效；降低决策层级，让听得到炮声的人来下命令，地方自治；引入新公共管理理念做法，简化流程和下方权力。

官僚制度有很多问题，但是它的存在，也是避免国家分崩离析必须要承受的成本。很多政治问题，一直存在，而且一直很糟糕，那它可能是一件更糟糕事情的替代品。如果一个困境在逻辑上无解，并不是真正的无解，只要外部条件发生变化，整个事情的逻辑结构就被重塑了，解决方案也就出现了。

!05 内战为什么发生，为什么难以和平解决？

内战的基本逻辑是，社会当中存在着反叛的巨大动力，而原来应该垄断暴力的国家，却缺少控制反叛的能力。

科利尔-霍夫勒模型，C-H模型总结的影响内战的五个因素：

	1. 反叛武装财务资源获取容易程度；
	2. 反叛武装机会成本的高低；兵源如何？
	3. 反叛武装可以获得的军事优势；平原还是山地。
	4. 社会怨恨的严重程度（最重要）；
	5. 人口规模。

为什么内战难以和平解决——缺少可信承诺机制。任何先放下武器的一方都可能被失信者造成毁灭性打击。一般由第三方外部干预者承担这个角色。——芭芭拉·瓦尔特用博弈论分析出的观点。
</pre>
</div>
<div tags="人物 哲学" title="萨特">
<pre>1905～1980

不是每一个思想家都会把人生过成自己的思想主张，但萨特是这样做的，因此他活得如此精彩。他不只是写下了存在主义，而且是一生都在实践存在主义。

考进法国最精英的巴黎高师，这个学校每年只招100人，出了13位诺贝尔奖。作为哲学家，也写了一些小说和戏剧，获得了诺贝尔文学奖，萨特公开拒绝领奖——他不接受任何来自官方的荣誉。和法国作家西蒙娜·波伏娃保持着开放的爱情。

二战后成为法国左翼知识界领袖，和英国哲学家罗素组织了一个国际法庭，调查审判美国战争罪行，他们引用纽伦堡审判中首席检察官罗伯逊法官的话“如果某些罪行是罪恶的，无论暴行的实施者是美国还是德国，它们都是罪恶的。”他们明确提出，本庭没有强加制裁于他人的权利，但不受制裁不等于无罪，法庭要做的就是完成调查和审判。1968年，法国爆发“五月风暴”，萨特和波伏娃上街支持，被警察逮捕，戴高乐迅速介入，“我们能把伏尔泰关进监狱吗？不能，所以赶快把萨特放了吧”。萨特政治上倾向左翼，常常被看作是社会主义者，他支持过苏联，还受邀参加1955年中国国庆观礼。




1980年，萨特去世，巴黎数万人走上街头送行。这是维克多·雨果之后最隆重的送葬场面。法国总统德斯坦也加入了送葬队伍，但他以普通公民的身份参加，因为萨特说过，不接受任何来自官方的荣誉。

萨特思想的两个重要信念——自由选择和积极行动。

1941年～1945年，巴黎著名的“花神咖啡馆”，萨特每天都在这里工作10小时，完成了《存在与虚无》一书。现在这家咖啡馆的菜单上，还写着萨特的一句话——通向自由之路，经由花神。

存在就是虚无

人的存在原本就是虚无（名词）【尼采的人生虚无是形容词】，它的本质是“有待形成”，人的存在只有填充进了什么东西，才会获得自己的本质。这就是“存在就是虚无”这句名言的含义。

存在就是虚无，赋予了人一个永恒的追求：填满虚无，获得某种本质。但有限的、固定不变的东西无法填满人的无限的可能性。人总是渴望去占有、去追求，但满足永远无法实现，所以“人是一种徒劳的激情”

萨特说，人是被判定为自由的，自由就是人的命运。因为人的存在是虚无，这恰恰是人类行动意志的基础，因为人没有预先的本质，我们才能够自由地行动。人永远不会“是”什么，而是永远都正在“成为”什么。这个意义上，人是自由的，甚至人就是自由本身。这种自由不是建立在强大能力基础上的，而是建立在人的存在之上的，建立在最根本的虚无之上。不论你多么渺小，不论你受到多少外在限制，在根本上你都是自由的！

自在的存在有一个固定不变的本质，而自为的存在没有固定的本质，它的本质可以变化。

自由是一种功能沉重的负担

从存在就是虚无出发，萨特推出了人在根本上是自由的，自由的命运意味着人总是可以有所选择，而且必须做出选择。

自由的选择，自由的命运不是轻轻松松的好事，它有非常严酷的一面，萨特有两个著名的观点，自由选择是很沉重的负担，他人就是地狱。

选择就会有后果，我们生活在自己选择的后果之中，这些后果也在塑造着我们。所以我们会在乎选择的好坏对错，我们希望自己选择时有一个坚实可靠的依据。但是萨特说，你所有的选择，依据都只是你自己。萨特信奉价值主观主义，“如果上帝死了，那么一切都被允许了”——《卡拉马佐夫兄弟》。

任何信条、任何主义，或者别人的建议，都不能成为你的借口。你必须独立承担责任，自己做自己的立法者，为自己做出的每一个选择承担绝对的责任。

米兰·昆德拉《不能承受的生命之轻》（The Unbearable Lightness of Being），轻就是来自于人的存在方式，人的存在有着无限展开的可能性，不被任何本质所限定，自由而轻盈，但这种轻盈的自由又是孤独而沉重的，因为你必须承担所有结果，这就让人难以承受。

他人即地狱

人自由地掌握自己的生命，哲学上称为人的主体性。每个人和他人相处时，都想把他人变成客体，以此维护自己的主体性和自由。比如，在街上走，别人瞅你，你会觉得不舒服，这就是因为在这个注视中，他是主导者，你只是被他观看的物品。他实现了自己的主体性，代价就是把你的主体性给否定掉，把你物化。所以你会下意识回避对方的注视，但你也可以反抗，你看他一眼，就是用你的注视把他变成客体。

在爱情中亦如是，不分彼此、合二为一的爱情体验，只不过是刚刚开始的幻觉，爱情也充满了争夺主体性而展开的冲突和斗争，最后，要么在受虐的羞耻中享受快乐，要么在施虐的内疚中感到愉悦。

萨特说，憎恨其实就是承认别人的自由。因为你可不能去憎恨一个物品，只有人能出于自主意识对你做些什么，在他对你做什么的过程中给你，你就沦为客体，你的主体性就被否认了，你憎恨他人，就是承认了对方的主体性，承认了对方的自由。

正是因为每个人都有主体性，萨特对于共同理想、共同自由，表示悲观，他不相信自由主义所向往的那种主体与主体之间相互承认、平等尊重的关系。

萨特说自己的存在主义是绝望的哲学，也是希望的哲学。希望在何处？在我们的自由之中，在人的无限可能性之中，我们永远有改变的潜能，不必服从任何注定的命运。存在主义更是行动的哲学，既然可以选择，那就去选择，然后承担责任，其他没什么可说的。

萨特思想给我们的启示：看起真相，继续战斗。

我们都是手推巨石的西西弗斯，但我们知道西西弗斯是幸福的，因为“登上顶峰的斗争，足以充实人的心灵”。


萨特才是东北人的好朋友，只有他才能深刻的理解——"瞅你咋滴"包含的主体性意义和陷入他人地狱的恐慌。








</pre>
</div>
<div tags="人物 哲学" title="桑德尔">
<pre>当代人需要为历史事件负责吗？

德国应该为二战时期纳粹道歉，日本为侵华战争道歉，美国向印第安原住民道歉。但也有人反对，澳大利亚前总统约翰·霍华德就反对向原住民道歉，理由就是，人不应该为自己没有做过的事情负责。你该怎么反驳？

桑德尔认为，当代人不必为历史负责的说法是站不住脚的。这种论断的依据是一种”道德个人主义“，也就是每个人作为道德主体，都是自由而独立的个体，自主选择自己的目标，只需要为自己选择的结果负责，个人道德责任的来源只是自己的选择，和自己的群体、习俗、传统、历史等等都没有关系。

道德个人主义之所以错误，是因为它依据的”个人主义“观念是错误的。自由主义的个体是个人主义，将单独的个体作为所有理论出发的原点，但自由主义却没有认真探究个体究竟从何而来？

桑德尔认为，个人并不是先于社会存在的一个原子，作为个体的”自我“，不是凭空产生的，而是在社会关系中被造就的，被生活的共同体塑造而形成的。

桑德尔提出了”共同体主义“或者叫”社群主义“，就是强调，先有社群，社群造就了个体，而不是先有孤立的个人，再由个人组成社群。

他引用另一位社群主义哲学家麦金太尔的观点，人类是一种”讲故事的存在“，如果你要回答你自己是谁、需要什么、想做什么，这些问题的答案就在你的故事之中。只有讲通了自己成长的故事，理解这些经历如何形成了你的目标和需求，你才能真正回答这些问题。任何人的故事，都不是孤立的个人故事，离开了社会关系塑造，你就讲不通自己的故事。

桑德尔认为，只有讲通了自己的故事，你才能解释自己生活在的选择有什么意义。而意义无法从个人独立的自由意志中产生，你的故事是在社群关系中塑造形成的。这就是社群主义的个人观。

罗尔斯的无知之幕，就是大家消解了自己的故事，变革一个个毫无个性，抽象的个人。这是对个人的错误理解。

诺齐克也是这种个人观，把社群看成工具，国家只是维护个人权利的工具。但如果国家只是工具的话，那个人和国家就谈不上什么爱国情感和忠诚了。

桑德尔认为，社群不只是工具，也不只是合作团体中的情感依赖，更重要的是，社群的纽带关系在根本上定义了”你是谁“，它塑造了你的身份认同、生活理想、道德感与责任意识。社群是构成性的，实际上构成了你这个人。

个人当然会做出选择，但个人的目标并不是随意选择的，而是和社群有着紧密的纽带，在这种纽带中国呢，你有了归属感，知道了如何讲述自己的故事。你也就有了一种”作为社群成员的义务“，这种义务，不是个人选择带来的，而是因为你在这个社群成长、生活，被社群赋予的，它并不需要你同意。

没有自愿选择，也能带来责任和义务吗？
——想一想你的父母，你没有选择他们，但是有赡养父母的义务。在国家这个社群中，你继承了前辈的遗产，同时就承担了前辈行为承担责任的义务。

桑德尔的思想有一个问题：当下流行的原子化个人观，不也是社群造成的吗？为什么社群会塑造出这样一种脱离社群的个人观念呢？















</pre>
</div>
<div created="20210707070716331" modified="20210707075842876" title="社会如何控制权力？">
<pre>国家是政治的起点。国家形成之后，人类的政治格局演化，才是一个惊心动魄的过程。这个过程的核心议题就是，如何控制权力？人类如何走到今天的——城邦、共和、立宪、议会、民主与制衡。

!01 城邦

民主的首次尝试，却以失败告终。最早在公元前6世纪~公元前4世纪，雅典城邦实验。主要原因，在于在古代的交通、通讯条件下，古典民主系统的扩展性不高，弱于君主制。并且，雅典民主有其缺陷。

雅典民主的三原则：
	1. 大众政治。通过抽签或选举产生公职人员。
	2. 会议政治。通过6000人公民大会和500人议事会处理公共事务。
	3. 多数政治。公民大会投票，陶片放逐法，陪审法庭判决都采取多数决定制。

雅典政治家、军事家特米斯托克利，对雅典贡献非常大，先是不合群地提出发展海军，时候证明完全正确；之后在希波战争中萨拉米湾海战中击溃波斯600艘军舰，保全希腊。然而，雅典人担心声望过高的他可能蜕变为一个独裁者，公元前471年把他陶片放逐，最后流放异国，客死他乡。

对应的问题：
	1. 大众有统治必需的专业知识吗？
	2. 会议政治真的有效率，能解决问题吗？考民主讨论修不成高铁、核电站、医改法
	3. 多数政治可能演化为多数暴政。苏格拉底之死就是雅典民主制度的永远耻辱。

怎么办？
抛弃民主制。柏拉图提出哲学王统治，但问题也有，比如真的存在如何统治这中御国之术吗？如果有这种知识，为什么有了就可以当国王，是否只为少数人所有？如何保证哲学王不为了自己的私利。
给民主制打补丁——3样新发明：代议制、宪法和法治、分权制衡。

!02 共和

公元前509年，在离希腊半岛不远的意大利半岛上，古罗马人开始了共和政体，或者叫混合政体。

权力来源一般有三种，一人统治的君主制，少数人统治的贵族制，多数人统治的民主制。三者各有缺陷，于是古罗马人发明了复合型政体，融合三者，使之互相平衡，这就是共和制，或混合政体。

罗马的体制包括

执政官：代表君主制因素，强调统治的效能和政治行动的力量。当共和国面临危险时，执政官可以变成独裁官，苏拉、凯撒、屋大维都是罗马的执政官。

元老院：代表贵族制因素，大约300成员，强调共和国的理性、智慧和美德。罗马共和国也称为“元老院与罗马人民”。古罗马思想家西塞罗就是元老。

平民大会：代表民主制，强调多数平民的利益。可以选举执政官和颁布法律。

保民官：

这套制度给罗马共和国带来了很多优势，迅速崛起占领整个地中海世界。但是，正因为如此，这套制度走不下去了。

	1. 扩张使得国家规模太大，不得不给予行省大员自主权，容易失控。
	2. 军事行动过多，执政管、将军对军队的控制越来越强，军政关系的天平想将军们倾斜。苏拉、凯撒、屋大维的独裁都与这种战争逻辑有关。
	3. 财富分配不均，阶级冲突上升。将军元老大发战争横财，贫富差距大；奴隶引入使得起义多发，如西西里奴隶起义和斯巴达克斯奴隶起义。

公元前133年，保民官提比略·格拉古被元老用板凳打死，标志着规则和平民的决裂。公元前27年，屋大维称帝。至此，古罗马的共和政体退出历史舞台。

环境变迁，导致政治体制失能，从而发生政治衰败。不过美国后来继承了罗马这一共和体制。

!03 立宪

中世纪的人们，不急于解决谁统治的问题，而是在不改变谁统治的条件下，通过宪法，给统治者的权力行使加上一套约束规则，这就是把权力装进制度的笼子。

英格兰1215年《大宪章》：英国封建王朝，1199年约翰做了英格兰国王，穷兵黩武打法国，经常失败，导致贵族在法国诺曼底的很多土地丢失，但依然要求贵族提供兵力和金钱支持。规则联合起来反抗，打败了国王，迫使他签署了一份政治文件，也就是后来的大宪章。

大宪章有63条条款，分为三类：
	1. 保护臣民的权利。
	2. 约束国王权力。
	3. 承认合法反抗权。

大宪章是约束国王的，但国王是统治者，手里握有军队，他会遵守他被迫签署的条约吗？
——并不会，在政治上吗，规则要被遵守都非常不容易。
约翰王一旦重获自由，马上就否认大宪章对他的约束力，之后的英格兰国王都想这样做，从1215年大宪章的签署到1688年光荣革命，这种情景反复上演。然后规则忍受不了，又开始反抗，国王被打败，又不得不承认大宪章。据统计，从1215年到17世纪早期，大宪章被确认了32次之多。【哈哈哈哈哈】

一个规则，如《大宪章》，能否生效，并不在于规则本身的威力，更不在于国王的自觉，而是在于贵族与国王实力上的势均力敌。政治是用实力说话的。

两个疑问：贵族如何实力反抗？为什么不杀死国王？

——封建主义。

国王是领主，贵族是附庸，他们之间是一种基于土地恩赐形成的契约关系，这种关系既包括统治权力，也包括私人之间的权力与义务。贵族都有自己的军队驻守城堡，等待国王召集，当国王违反约定时，就可以反抗。贵族的土地来自于国王的授予，国王是合法性的来源，杀死了，贵族的土地合法性就消失了。杀了你，另立新君，谁说的准之后呢？

谁统治不要紧，只要你守着规矩就好。守规矩需要的是势均力敌。

大宪章塑造了英格兰宪法规则与法制传统，之后“国王在法律之下”的观念开始深入人心。英国发明了一套以宪法和法治约束权力的制度。现在无论总统、首相还是总理，行使权力都面对着宪法和法律的约束。

规则是第二位的，实力才是第一位的。但是规则对于人有持续性的教化/驯化作用，从而诞生了契约精神。

评论：
想起十几年前，我帮小布什杜撰的一句话：人类千万年的历史，最为珍贵的不是令人炫目的科技，不是浩瀚的大师们的经典著作，不是政客们天花烂坠的演讲，而是实现了对统治者的驯服，实现把他们关在笼子里的梦想。因为只有驯服了他们，把他们关起来，才不会害人。我现在就是站在笼子里向你们讲话。

!04 议会

1.起初，大宪章约定，由25名男爵成立一个临时机构监督国王，靠战争威胁，所以成本很高；

2.之后的《牛津条约》又设立一个由15名男爵组成的贵族会议约束王权，这个贵族会议权力很大，国王处理国务必须遵从这个贵族会议的意见。可见，仅有政治规则是不够的，还需要有一个相应实体机构执行这套规则，否则规则就会落空。

3.贵族会议只代表规则，而国王是全体英格兰人的代表，贵族们就要考虑提高这个会议的正当性；而国王这边，事事受贵族会议的制约，每次开会都是孤家寡人，他也需要其他政治力量来平衡。两边不约而同地想着吸纳新的力量加入。于是1295年，第一个现代版的英格兰议会就形成了，有伯爵与贵族，有大主教、主教和修道院长，也有各郡选出来的各两名骑士代表，各自治市选出来的各两名市政代表，后两者一共292人。

4.本来新进者是被拉过来帮忙的，慢慢地成为了主角。骑士们虽然也是贵族，但是他们发现他们和大贵族相比，财富、政治、世袭上悬殊太大，就慢慢不和大贵族玩，而是和更为相似的市政代表一起开会，大贵族和主教们一起开会。这就慢慢形成了两院制格局。之后继续不断博弈，议会相对于国王的权力不断上升，下议院相对于上议院的权力也不断上升，因为他们是选举出来的，正当性更高，而上议院多是继承的贵族。

5.1688年光荣革命，詹姆斯二世被推翻，英国议会批准威廉和玛丽统治英国，须遵守《权利宣言》和《权利法案》，这两份文件规定：没有议会的同意，国王不得中止法律，不得征税，不得维持常备军。后来议会也获得了干预王位继承的权力。这样，议会主权就在英国完全确立起来了。

6.议会之后的事情，国王统而不治，出现对议会负责的内阁，责任政府，政党政治慢慢出现。

7.1688年～1832年，具有投票权的只是4.4%的少数人，其中贵族富人占10～20%，中产阶级占80%，资产阶级的倾向是想拉入更多的中产阶级和平民，而自由党想要更多的票，赞成给予更多人投票，所以上下齐努力，1832年选举改革，1928年男女普选。【就是因为掌握了阶级多的一方】

从1258年到1828年，670年的演化，英国议会从小型贵族会议终于形成了一个由下院普选产生的庞大代议制机关。很多重要事物并非认为设计的结果，而是社会演化的产物。政治是社会阶级结构的投射，社会结构变迁是引发政治变迁的动力。

!05 民主何以实现？

政治结构是社会结构的映射，那么民主政治就是均势的社会结构的映射。

 政治权力结构，短期会有各种波动，长期反映的是社会结构。

越是平等的谁会，人与人之间的政治力量差距就越小，就越有机会成为一个民主社会。

土地重要性降低、生产关系从依附变为合作、大众教育的普及等等，社会权力和资源的分布高度发散。

总而言之，经济基础决定上层建筑。

!06 司法审查

当人民成为主权者之后，民主的权力是否还要被约束？

马伯里诉麦迪逊案，让最高法院首席大法官约翰·马歇尔运作，使得最高法院争取到了司法审查权，也就是违宪审查权，可以审查一切法律是否违宪。宪法规定，只有终审才到最高法院，于是驳回诉讼。马伯里最后放弃了，可能他觉得太折腾了哈哈哈哈。

但是民主权力也有对司法权力的反向制衡，因为制度设计，最高法院大法官是由民主权力经过不民主的过程推举的，所以民主权力也可以向司法权力施压。

民选职位具有更高合法性，大法官不是民选的。不那么民主的大法官提名制度和终身任职，构成了大法官们行使司法审查权的关键。

司法权力和民主权力也可以合作，比如1954年布朗诉教育委员会案，推动种族隔离制度的消除，最高法院判决各个学校隔离政策违宪，1957年阿肯色州小石城，州长带头不执行最高法院判决，调动国民警卫队组织9名黑人学生上学，经艾森豪威尔劝说，才撤走部队。但之后白人群众开始围攻这9名学生，艾森豪威尔总统决定派出联邦军队，保证这9名黑人学生正常上学，这场废除种族隔离制度的运动才真正开启。

政治，是平衡的艺术，是发展演化的艺术。

评论：
让司法权约束行政权和立法权，是美国国父们的期望。然而在前期工作中，由于行政机构和立法机构的强势，司法机构处于绝对的弱势地位。

弱者想要约束强者，必然不能正面冲突。我们看到马歇尔大法官用一个巧妙的角度四两拨千斤，不仅约束了政府，同时增强了司法权的实力，兼具原则性与灵活性，这是第一流的智慧。

在三权实力接近的前提下，三权分立的框架中的六种制衡才能实现。
（1）行政机构约束立法机构：总统享有否决国会立法的权力；
（2）行政机构约束司法机构：法官的任命，必须由总统提名；
（3）立法机构约束行政机构：国会有弹劾总统的权力；
（4）立法机构约束司法机构：法官的任命，必须得到国会批准；国会有弹劾法官的权力。
（5）司法机构约束立法机构：通过司法审查，宣布违宪的法律无效；
（6）司法机构约束行政机构：最高法院可以宣布总统的命令违宪；


</pre>
</div>
<div tags="定义" title="士">
<pre>士是我们中国的光荣传统，是平民的最上一层，又是贵族的最下一层。士凭本事吃饭，不受奴役。士认为自己和所有人都是平等的，但是有责任感。士独立而自信，但是总在提升自己。

stake holder 持股人、利益攸关方、有控制权

player  对自己的命运有掌控感

informed citizen 明白人

比如[[孟子]]、[[费曼]]、[[专栏]]作家

士的3种境界：

#在思想上自主

#对自己的人生自主

#对公共事务自主

</pre>
</div>
<div created="20210705063554610" modified="20210705063559552" title="首页">
<pre>每日日课

#日行万步
# 学习10讲得到，做笔记
# 知乎答1题
#抖音录一条
#每日日记</pre>
</div>
<div title="思维偏差">
<pre>[[伯克森悖论]]

</pre>
</div>
<div tags="定义" title="随机控制">
<pre>有记忆的随机法，压缩可能性空间，直到空间只剩一个元素。核聚变反应，大家都以为温度不用太高，结果德国科学家提高温度，发现氘流氚流反而很稳定，现在可控核聚变都是采用高温了。

适用随机控制的领域：尝试成本很低（米勒模拟地球环境产生氨基酸）；还没有好的理论，甚至压根不会有理论（股票交易、生命诞生、可控核聚变的磁场约束）；当有先进理论时，再用随机控制就不太合理，甚至浪费时间。
</pre>
</div>
<div tags="人物 哲学 自我成长" title="泰勒">
<pre>西方思想家无可争议的大师之一，另一位是哈贝马斯。泰勒是桑德尔的老师，也被看作社群主义的代表人物。泰勒的老师，更加有名，就是提出了两种自由理论的以赛亚·伯林。

不过，泰勒并不完全认同他老师的观点，对伯林“坚持消极自由，警惕积极自由的滥用”这种观点提出了质疑。伯林回应说，其他人的批评都不值一提，只有泰勒的批评意见值得重视。

盲人摸象，道理很正确，编的很离谱。因为盲人本身就知道自己是盲人，不会那么自大，摸到一个象腿就说这是整个大象。他们了解自己的局限，也就很少会犯这种以偏概全的错误。恰恰是明眼人，自以为自己能看清一切，才容易犯这种错。

在一个问题上，几乎每个人都非常自信，认为对于问题自己比所有人都看得清楚，这个问题就是每个人对自己的认识。绝大多数人都会觉得，自己最理解自己、最懂得自己，这种认为自己对自己具有绝对解释权的观点，叫做“唯我论”。

如果你认同唯我论，那别人说“我才懂你的根本利益，只是你现在还不知道”，你就不会相信他。这就是伯林说的概念魔术，积极自由的泛滥。但泰勒认为，如果我们仅仅从消极自由的角度理解个人自主性，那我们就可能陷入唯我论的盲区，带来更糟糕的后果。

自主性到底是什么呢？——你有选择的自由，而且你必须选择。可是要选择什么呢？尼采和塞特已经告诉你了，没有什么标准，你选择，你负责，这就是一切。

因为自由太过沉重，很多人就呼吁说自由主义的自主性理想是有害的，现代社会太过放任自流了，到处都是相对主义、享乐主义和自恋主义，所有人都高度的自我中心，这完全是自由的滥用，文化的堕落，还会损害民主政治。他们主张限制自由、平等和多元化，让政治权威、宗教领袖或文化精英重新树立真善美的标准，来教育大众，拯救道德，防止文化的堕落和民主政治的衰败。这就是某些保守人士的立场。只不过20世纪的政治教训给了我们太多惨痛的记忆，人们无法接受这种威权主义的做法，不能够放弃个人的自由，因此大多数人不会同意这种观点。

这就是真正让我们为难的是，我们不能放弃自由，同时又必须去面对和处理自由带来的那些问题。

泰勒认为，保守主义指出的很多问题是真实存在的，但如果因此放弃自主性，就好像是说，小孩身上弄脏了，你就要把他赶出家门，我们应该做的，是给孩子洗澡，而不是抛弃这个孩子。泰勒转身开始了对自由主义的批判。

泰勒认为，自由主义的观点存在一个盲区，就是把“忠实于自己”等同于，我对自己的认知和解释绝对正确。这样你就会误以为，只要关注自己的内心，就能创造出生活的价值和意义，把外部世界看成多余的，甚至看成是“自我实现”的障碍和敌人，这就陷入了唯我论的盲区。

追求自主性，追求独特的自我，并不需要接受唯我论，而且恰恰应当拒绝唯我论。

泰勒举例说，如果有人宣称自己非常独特，因为他的头发正好是3732根！你会赞叹这种独特性吗？不会的，这反而会让人感到好笑。但是如果一个人有精湛的钢琴演奏才华，一个人带人真诚友善，我们会认为是有价值的。

为什么这两种独特性给人的感受有这么大的差别呢？泰勒解释说，因为一件事是否重要、是否有意义，需要依据一个背景框架来衡量。我们的道德和价值标准，并不是在孤立的内心中凭空产生的，而是来自于我们 与他人的对话和对话中的反思。

现代社会有一种很流行的看法，认为事物的价值是主观赋予的，是“自我”赋予的，因为我看重它，它才变得有价值。但真的如此吗？我们的喜欢其实是有理由的，所谓“自我赋予”的价值和意义，实际上仍然是有渊源和来路的，是由许多经历和故事造就的，也是在生活的关系中形成的。

如何“成为你自己”，“活出真我”，“做真实的自己”？

这些口号让我们产生一种错觉，好像自我的独特性必定要从自我的内部才能获得。但泰勒说，自我无法凭空创造发明自己的价值和意义标准，这个标准离不开我们共同生活的背景框架，你只能依据这个框架来“选用”和“改造”形成自己的价值观。所以，我们的自主性，无法凭借孤立的内心实现。

意义和价值的标准依然存在，就存在于我们生活的共同背景之中。但是古今之变后，现代背景不再是清晰固定的规则教条，而是一种资源，有着丰富的多样性。所以，我们需要把自己和一个更开阔的世界联系在一起，保持与他人对话，并在对话中展开反思，这会让我们变得更加清醒、更加丰富，更好地实现我们的自主性。





















</pre>
</div>
<div tags="" title="特高压">
<pre>特高压下，所有的一切都是重新设计。不是引导电流往哪儿去，而是阻止电流不去哪里。什么都要讲究绝缘。有些场合，还需要用密度非常高的六氟化硫气体。

在高压环境下，人也会变得冷漠，这因为并不是什么问题，而是这种策略更优。


</pre>
</div>
<div tags="人物 哲学" title="沃尔泽">
<pre>原子化个人是怎么诞生的？

——沃尔泽认为，这也是社群造成的，只不过这是新型的社群，具有高度流动性。

	1. 地理上的流动。
	2. 社会身份的流动。
	3. 婚姻的流动。
	4. 政治上的流动。

如今的社群，是一种“自愿型社群”，它和传统社群最大的差别在于，它是一种“自愿的联合”，如果你想要推出，你总是可以退出的。比如婚姻，职业，信仰。

容易改变的社会关系，就是不稳定的关系，这不一定是因为现代人总是喜欢改变主意，更重要的是因为整个社会都在高度流动。沃尔泽把高度流动的社会状况，叫做“后社会的状况”。

那种孤立的、所谓“原子化个人”的观念，就是“后社会状况”塑造出来的，沃尔泽把这种个人观念叫做“后社会的自我”。

我们还能回到过去吗？很难做到，因为我们不能限制那些自由：移居自由、社会阶层流动的自由、婚姻自由以及政治认同自由。

沃尔泽认为，社群主义不可能战胜自由主义，但与此同时，自由社会造成的忧伤、失落和孤独，以及政治冷漠等等后果也会如影随形。所以社群主义对自由主义的批判不会消失，而是会周期性地反复出现。

有人说，中华文明是集体主义的，西方文明是个人主义的，但从社群的变化来说，其实这不是东西之别，而是古今之变。所有文明一开始都是群体主义的，到了现代社会，才转向个人主义。因为我们总是可以离开任何一个特定社群，这并不会让我们变成一个孤立的原子，因为我们总可以进入新的社群。

在现代社会，你把自己首先看作一个独立的个体，你才更容易讲通关于自己的故事，这就是现代社会发生的“个人主义”的转向。






















</pre>
</div>
<div created="20210707072417489" modified="20210707072638932" title="五条政治法则">
<pre>1. 有效统治是人类社会的必需。
	2. 权力必须要受到约束。
	3. 好制度使坏人变好，坏制度使人变坏。
	4. 分歧与冲突是人类政治的永恒主题。
	5. 观念是塑造政治的重要力量。

	1. 有效统治是人类社会的必需。
		a. 凡是有人群居的地方，就必须被统治。15、16世纪，分崩离析的意大利被法国、西班牙、神圣罗马帝国一一蚕食时，马基雅维利写出了《君主论》，认为一个强有力的君主时建立强有力国家的前提。
		b. 国家建立是一个物理过程和心理过程的统一。
			i. 军队、官僚体系、税收系统。
			ii. 国家认同。
		
	2. 权力必须要受到约束。
		a. 权力不受约束带来社会问题。
		b. 权力不受约束，对于掌权者也是灾难。
		c. 约束权力的三项政治发明：
			i. 宪法和法治；
			ii. 民主和投票；
			iii. 分权制衡。
	3. 好制度使坏人变好，坏制度使人变坏。
		a. 权力不足，干不了事。权力过大，容易败坏。
		b. 制度的问题不光在于制度设计，还在于制度是怎么来的，怎么运作的。需要政治精英的内部博弈。
	4. 分歧与冲突是人类政治的永恒主题。
		a. 最常见的3种分歧：阶级、身份认同（族群和宗教）、意识形态（政治观念）。
		b. 冲突不一定是坏事。英国议会就来自于国王和贵族的冲突。【矛盾对抗可以推动事物前进】
	5. 观念是塑造政治的重要力量。
		a. 凯恩斯认为，利益的作用被高估了，而观念的力量被低估了。
		b. 政治决策的起点并不是事实，而是决策者对于事实的认知。
</pre>
</div>
<div title="西方现代思想">
<pre># [[现代人的思想困境]]
# [[20世纪的教训]]
# [[自由主义的反复死亡]]
# [[后冷战时代]]
# [[当代思想]]</pre>
</div>
<div bag="default" created="20210702013752607" modified="20210702014628185" revision="0" tags="" title="习大大七一寄语青年" tmap.id="911a40ab-5f76-46ff-b76c-82d2330d5585" type="text/vnd.tiddlywiki">
<pre>过去一百年，我们党向人民、向历史交出了一份优异的答卷。现在，我们党团结带领人民又踏上了实现第二个百年奋斗目标新的赶考之路。

作为新时代的青年，我们要以实现中华民族伟大复兴为己任，增强做中国人的志气、骨气、底气，不负时代，不负韶华，不负党和人民的殷切期望！

习近平总书记在庆祝中国共产党成立一百周年大会上号召我们，要牢记初心使命，坚定理想信念，践行党的宗旨，永远保持同人民群众的血肉联系，始终同人民想在一起、干在一起，风雨同舟、同甘共苦，继续为实现人民对美好生活的向往不懈努力，努力为党和人民争取更大的光荣！</pre>
</div>
<div title="现代革命">
<pre>01 民国法统

为什么要强调法统？《论语》说“名不正则言不顺，言不顺则事不成”，正统的名分，就是法统，可以为人们提供一个最基础的共识，让各种政治活动有连贯统一的名义，国家秩序才能成立。

古代法统归皇上，现代共和国，就要以人民的名义了。人民太多了，只能有人作为人民的代表，代表人民的名义。要代表人民的名义，必须先找到所有人都认账的共识，那就是宪法——只要大家都承认这个宪法，发生争执时，就有公认的解决争议的规则，不至于诉诸武力。

民国法统有两个来源，分别是1912年3月11日的《中华民国临时约法》，和1912年2月12日的《清帝退位诏书》。

《临时约法》说，中华民国主权属于国民全体，人民包括哪些人——汉满蒙回藏，也就是“五族共和”。辛亥革命一开始的口号是章太炎的“驱逐鞑虏，恢复中华”，这个口号有极大的动员性，但是革命之后就没法完整地保住大清领土，因为只靠整合汉人的话，大片少数民族的土地都保不住，被列强瓜分掉。所以提出了五族共和。

《退位诏书》就是清帝在天命话语下的禅让，把天命禅让给人民，民国获得了正统的民义。这样，少数民族就必须承认民国的法统了。《退位诏书》里还说，委托袁世凯全权组织临时共和政府，与南方革命党协商南北统一的办法。这样袁世凯就接住了大清的法统。

南京方面孙中山也愿意把大总统之位让给袁世凯，只要袁拥护共和。这样，袁世凯就有了两边的法统了。英国人分析了局势，为了保住中国统一的市场，也认为袁世凯最靠谱，于是贷给袁世凯一笔巨款，新生民国得以生存下去。

但是这也存在一个问题，如果革命党人不满袁世凯，他们就用《临时约法》的法统指责袁，袁勇大清的法统反驳，这样共识就破碎了。双重法统带来了后续的政治动荡。

02 巴黎和会的伤害

民国初年，中国政治发生了翻天覆地的变化，但是中国社会结构并没有多大变化。国际秩序的变迁，刺激了中国革命深入社会层面。

国际秩序在20世纪初，从现实主义转向理想主义。因为一站之前，国际上就是按照实力说话，在拿破仑之后的一百年，通过小战争均衡力量。但是这种现实主义没能防止一战，战争打起来后，谁都打不倒谁，都是在亏，都在咬牙硬挺。所以人们觉得现实主义不靠谱，出现了理想主义，认为大国之间的力量均衡不能保障和平，一种道德的、公正的国际秩序才能保障和平。

这时候出来两种理想主义理念，一种是美国总统威尔逊主义，他认为发生世界大战的根本原因就是大帝国以建立力量均衡的名义，到处欺负小民族，只要让弱小民族都能独立建国，大家都平等，就能保障世界和平——总结起来就是”民族自决“。

另一种是列宁主义，他认为世界大战的根本原因是帝国主义国家内部的阶级矛盾发展到了最深刻阶段，统治阶级需要向外转移矛盾，就爆发了战争。这就要各个国家都发生无产阶级革命，作为阶级统治工具的国家就消失了，阶级矛盾就化解了，人类就大同了，一句话就是——“全球革命”。

美国在一战中大发横财，借了欧洲国家钱，巴黎和会上，美国人就能指点江山一把。威尔逊主义看起来很美，但是没法实现，英法两国有大量的殖民地，怎么愿意吐出去？于是当面一套背后一套。

中国就更受伤了，弱小国家本来就更希望公平，结果期望过高，越是失望。日本既想支持现实主义，拿到德国在山东的权益，也想支持威尔逊主义，提出“种族平等”的方案。最后都没实现。

消息传来，国人心情就像过山车，在不断刺激下，终于爆发了五四运动，标志着中国开始了社会革命，社会结构开始进行深刻变革。另一个理想主义吸引了中国，那就是列宁主义，列宁主义是人类有史以来最强大的一种动员和组织技术。

日本被伤害后，看穿了西方人的不正义秩序，提出了大东亚主义。

中国人口过剩，内卷化严重，但是这种劣势在介入世界贸易秩序后就是强大的优势，因为中国劳动力成本可以碾压任何国家。要释放这个优势，必须先完成政治整合，否则中国就会被撕裂、内战。要整合，列宁主义最强。

03 国民政府民族主义困局

中国革命最重要的两个推动者，追求普世主义的共产党，和追求民族主义的国民党。国民党试图用民族主义整合中国，但中国的超大规模让民主主义行不通。

国民党只是接受了列宁主义是我组织模式，没有接受意识形态，就脱胎换骨，北伐统一了大半个中国。北伐中，国共为什么会分裂呢？因为两者对于革命目标的设定不同。

国民党认为只要考虑中国革命的问题，不需要关注国外太多事情，【所以他想先安内，再攘外】，而共产党的革命目标是普世主义的，中国的问题要解决了，世界的问题也要解决。【对日宣战，北上抗日，积极支援亚非拉】

中国作为一个内在多元、高度复杂的超大规模国家，用民族主义的政治理念是搞不定的。民族主义格局狭隘，再对边疆、对其他大国关系都不好回应。国民党在历史上出现了很多外交赌气行为，无益于国家利益。没有利用好二战抗日努力积攒的国际地位，浪费了这种接住外部正当性整合内部力量的机会，最后导致败局。

04 国共两场货币战争

1927～1937中国黄金十年，但国外确实大萧条。为什么呢？因为中国银本位的货币制度，在黄金价格上升，白银价格下跌的情况下，变向的实现了货币对外贬值，刺激了出口。

1934年6月，美国罗斯福签署白银购买计划，规定美国财政部要在远高于市场价格的基础上收购白银，直到市场价格达到该计划预期。这就让中国市场上的白银大量外流到美国，国内通货紧缩，经济萧条。

南京政府只好推动法币改革，这是历史上第一次以政府信用为担保的信用货币。有了信用货币，中央对地方的制衡力量就大了，但是，信用货币的使用对于中央政府能力要求更高，要是信用货币信用破产，中央政府的信用就破产了。

通过法币改革，南京国民政府建立了国家资本主义，获得了相对于地方军阀的不对称财政优势，进一步消除了地方势力的自主性。但是，它没有能力让信用货币体系保持稳定，对后货币和政府一起破产。

共产党在山东半岛发行了本位币，以农业物资储备作为担保，北海币随时可以兑换农业物资。并且，北海银行根据农业周期，调整货币数量，根据物价涨跌，安排根据地工商局吞吐储备物资来回笼或投放货币，以保证币值稳定。

为什么共产党成功了，国民党却失败了？因为中国的超大规模性，城乡二元差异巨大，如果靠外部世界拉动的化，只会造成更大的二元撕裂。国民党的货币是应用于市场经济的货币，过于超前，在农村无法影响传统经济，在城市造成恶性通货膨胀，最后失败。

从货币战争中，也可以看出，中国需要先完成政治整合，才能真正融入世界经济体系，民族主义无法让中国完成政治整合。

05 共产主义也是普世主义

共产党是“内部控制”的组织机制，日本人侵占中国，把国民党政权打垮了，共产党只要派几个党员去，就能建立抗日根据地，共产主义这种需求在过去与中国社会需求经常错位，但它利用强大的组织能力，与国家救亡极为深刻地嵌合在了一起，从而收获了坚实的物质基础和民意基础。

国民党是外部控制的官僚体系，面对组织任务，国民党员反应是“要我做”。这种体系，一旦失去连接，就会马上瘫痪瓦解。

共产党是内部控制路线，它用一套理想信念由内及外地刷新组织成员的精神世界，让每一个微观的党员都对宏观的事业有一种信仰和忠诚。面对组织任务，共产党员反应是“我要做”。就算失去和延安的连接，几个党员很快就能搞起一大摊事，并且基本都不会偏离组织目标。

共产主义的意识形态不带带来了共产党的组织效率，还给它提供了一种超级宏大的视野，让共产党在面临少数民族问题和国际秩序问题时，都能有国民党想不到的脑洞，全新的处理办法。

既承认了各个民族的差异性，又用阶级思想统一各个民族的差异。这种方法，相比于国民党否认差异，更能被少数民族接受。

1946年夏天，毛泽东接受美国记者采访，提出了世界二元秩序，世界是美国领导的反动阵营和苏联领导的进步阵营之间的对抗关系，其他国家属于中间地带。1962年，中国和美苏关系都不好，毛泽东改变了他的说法，提出中间地带有两个，一个是欧洲日本澳洲等发达国家，一个是亚非拉等不发达国家。1974年，毛泽东全新阐释了“三个世界”的说法，美苏第一，西方发达国家第二，亚非拉国家第三。这样中国想清楚了自己的国际定位。
</pre>
</div>
<div title="现代人的思想困境">
<pre>存在主义思想之父、哲学家克尔凯郭尔说，在信仰问题上，我们唯一的选择只有鼓起勇气“纵身一跃”。为什么要纵身一跃？要跃过什么？为什么要鼓起勇气？

克尔郭凯尔在22岁日记里写下“我真正缺少的东西，就是要在我内心里弄清楚：我到底要做什么事情？问题在于，要找到一个对于我来说‘确实的’真理，找到一个我能够为此而生、为此而死的信念”。

对于人生意义这类问题的思考和关切，就是哲学家说的“终极关怀”。它之所以终极，是因为它是追寻的是所有答案的答案。要给出这个答案，你得有所依据，这个依据就是人生信仰，或者人生理想。

即使不去想这些大问题，在日常生活中，有两大难题，我们永远无法逃避。人在精神层面需要面对两个巨大的难题，一个是死亡，一个是贪欲。

死亡是一种可能性，它很残酷，它是一种可以终结其他所有可能性的可能性。人终有一死，但人的意识里还有“永恒”这个概念，这两者的对比就会让人在内心埋下一种深刻的悲哀。所以我们会悼念逝者，也会为自己的死亡而恐惧、忧虑。

人毕竟是一种生物性的存在，会有一些原始的、动物性的欲望；但人又同时是精神性的存在，有良知、正义、道德感。就像“人终有一死”和“永恒”对比，原始的欲望和“崇高“也形成了对比。这种对比会让我们觉得羞耻、不甘，严重时会觉得我们生命很卑微。

宗教的解决方案：基督教讲“灵魂拯救”，人肉体死了，灵魂可以永生；虽然凡人是卑微的，但只要信仰虔诚，就能达到崇高。
非宗教的解决方案：学习雷锋好榜样，“人的生命是有限的，为人民服务是无限的，我要把有限的生命投入到无限的为人民服务之中去”。他把生命献给无限的事业，短暂的人生找到了永恒的归属，同时这条路也是崇高的，只要向上攀登，就能超越个体卑微。

为什么现代人还会有信仰危机呢？

——因为真实和信仰之间，有一道裂痕，

古今之变后，信仰遭到理性主义的挑战。人们意识到，如果某个事物要求我相信它，那么它要证明自己是真的、可信的。人生信仰意义重大，更加要证明它的可靠性。

但是如果要把信仰和真实统一起来，就会很麻烦。人生信仰为人提供了什么？一是对永恒的许诺，二是对崇高的指引。这是事实判断，还是价值判断？很显然是价值判断。

信仰是一个价值判断，而现代人对信仰的要求是“必须是可靠的、真的”。但是，“是真是假”是事实判断的评判标准。

这就是裂痕：在信仰问题上，人们用审核事实判断的标准，去审核一个价值判断。

克尔郭凯尔用一生思考这个问题，最后他得出一个结论：我们无法依靠逻辑和知识来确认信仰是否为真，只有勇敢的“纵深一跃”才有可能越过这道鸿沟。只有纵深一跃，才能跨过知识和信仰的鸿沟，这一跃的后果是不可预知的，可能是拯救，也可能是虚空，这完全是一种冒险，需要极大的勇气。（他的论断针对宗教信仰）

其实任何追问人生意义的人，都会遇到这个困境。登山者把登山作为信仰，记者问他为什么登山，他回答“因为山在那里”，这个回答经得起理性的考问吗？理性能够证明，登山是一种伟大、有价值的事吗？

人追问生命意义的途中，总会遇到死亡和贪欲两大难题，面对这两个难题，我们需要一个可靠的人生信仰。但现代化的洗礼，让我们用理性去检视信仰，求证信仰的可靠性，这样我们就会遇到一道无法弥合鸿沟，结果就是信仰在现代世界变得非常困难。这就是现代人的精神危机。
</pre>
</div>
<div tags="人物" title="项羽">
<pre>历史不是电脑游戏，不可能先清零再开始。历史像一个无始无终的大棋局，每一代棋手一直在下这局棋，所以每一个新登场的人物坐到台面上的时候，这个棋局就已经展开了，他无论什么时候加入，面对的其实都是什么？——是一个“残局”。

局限、格局、局面

局限：每个人都在观念、资源等限制下展开自己创造力的。
格局：每一个历史人物的认知层次都是不同的，这些认知层次决定了他能不能认清局限中的有利因素和制约因素。
局面：一个相对稳定的历史状态。

如何看历史人物呢？

看他面对什么样的局限，以什么样的格局去思考和行动，最终又开创了什么样的局面。


!!01 陈胜吴广为什么没有成功？

——没有合法性，却着急称王。

称王不是有人马、有地盘就可以了，还需要解决合法性问题。急于称王，丧失了道义上的制高点，示范了一种不好的游戏规则，让自己变得势单力薄、孤立无援。

自称“张楚”，一边打秦国，一边攻城略地。结果派出去的将领有样学样，自立为王，等到陈胜遇到更强的武力之后，孤军奋战，最后被自己的车夫杀死。

补充：
名不正则言不顺，言不顺则事不成。
曹操挟天子以令诸侯，朱元璋缓称王，即使篡位夺权，也要上演一出禅让的戏码。
王侯将相宁有种乎？——王侯将相的地位，来自于周天子的册封，来自于历史的传承，并非一朝一夕可得。

!!02 楚怀王为何想杀项羽？

陈胜失败了，天下知道了，王侯将相真的有种。豪强们纷纷立诸侯的后人为王，自己掌握军权。一时间，天下的王换回来曾经的王侯将相之后。人们对于反秦成功之后的秩序想象变了，变成了回复原来的战国时候秩序。

项梁起兵，听范增计，请来了楚怀王的孙子熊心，也叫楚怀王。

项梁战死，楚怀王为了摆脱项家，想除掉项羽，创造机会让刘邦先入关，因为“先入定关中者王之”。结果项羽杀了宋义，楚怀王也无可奈何。




</pre>
</div>
<div tags="" title="小布什">
<pre>&lt;&lt;&lt;
我们在这里的相聚是发生在我们国家、乃至整个文明世界的一个历史关键时期。这段历史的一部分是别人写的；剩下的将由我们来写。
&lt;&lt;&lt;
</pre>
</div>
<div tags="人物 哲学" title="以赛亚·柏林">
<pre>01 狐狸和刺猬

狐狸知道很多事情，但是刺猬知道一件大事。——希腊诗人阿基洛科斯

赛亚柏林自称自己就是一只典型的狐狸，但他有一个一以贯之的问题意识，这个意识和他的人生经历分不开。

柏林具有三重身份：俄国人、犹太人、英国人。

柏林1909年出生于里加，当时还属于俄罗斯。他亲眼见证了二月革命和十月革命，亲眼看到一名沙皇政府警察被暴民死刑处死，这成了他终身难忘的暴力和恐怖记忆。他从小读俄罗斯思想家的书，如托尔斯泰、屠格涅夫、普希金，几乎不和外人来往。这些作品主题是揭露人间苦难和不公、社会陈规陋习、人类受到的禁锢，这些作品都在努力探寻拯救人类苦难、摆脱人类困境的根本方法。

柏林后来说，俄罗斯思想家有一个共同信念，就是相信对于人类的困境，存在一个确定的答案，存在一种真理，只要找到了真理，去推动激烈的社会变革，就可以终结人间的苦难。但这种“拯救的信念”也有危险的一面，可能会导致暴政。

柏林也是犹太人，他说过，全世界犹太人都有一种共同感受，就是一种“不在家”的感觉：就是你无法全然沉浸于此时此刻深处的环境，总是有一种隔膜感和抽离感，觉得我不属于这里，这里也不属于我。这就给柏林一种思考问题时经常抽身而出的视角。爱因斯坦也称柏林为“上帝的宏大剧场中的一名旁观者”。

1920年，11岁的柏林移居英国，18岁那年进入牛津大学，之后在那里工作，直到88岁去世。柏林是一个大学霸，2.岁时被牛津大学万灵学院录取为研究员（fellow）。

1940年，柏林应邀去剑桥大学做讲座，维特根斯坦也来了。维打断了伯林的报告，说伯林思路错了，然后提出了自己的想法和问题，之后伯林尽可能绕过这些问题，做完了报告。维起身告辞，并礼貌地道谢，说“这次讨论非常有意思”，说完就走了，周围人说。能得到维特根斯坦这样的评价已经太难得了。======

他后来明白了自己不擅长纯粹的哲学研究，于是转向了思想史领域，成为了20世纪英语世界最重要的思想史家之一。

02 价值多元论

所谓价值，就是我们认为重要的那些理念，比如平等、正义、自由、爱、善良、仁慈等等。你的价值观，就是你信封或珍视什么理念，这些理念就构成了你人生意义的基础，是你为自己生活确立目标的依据。价值多元论，就是主张人们追求的价值不是单一的，而是多种多样的。

价值一元论，并不是说世界只有一种价值，或者人只能追求一种价值，它主张的是，表面上有丰富多样的价值，但这些价值在本质上是和谐统一的。怎么和谐统一呢？就是说虽然价值多种多样，但总可以用一个评价尺度来比较，排除高低上下，价值虽然多，但是尺子只有一把，有了这把尺子，就能给价值排序，低级价值应当服从高级价值，最终能够找到一个最高价值，其他价值都是从最高价值派生出去的。

比如，最高价值是幸福，那么你追求的其他价值，家庭美满、事业成就、身体健康，都可以用幸福这把尺子来衡量。而且，当你面对重大选择时，你都可以用幸福的多少来做出决定。——这样，表面上多种多样的价值，实际上可以相互兼容，彼此之间不会发生冲突。

价值一元论就可以引申出一个推论，就是对于“什么是美好的生活”这个问题，存在唯一正确的答案，能让你做出最好的选择。

这和启蒙运动的核心——理性主义——有些相似，质疑一切表面直观的经验现象，试图借助理性，在表面之后找到一个本质。

在古代，不管世界多么乱，中国人相信天道、神意，只要掌握了终极价值，表面的纷争就会归于和谐。即使牛顿，也想着用几个公式为世界立法，爱因斯坦一直寻找一个统一场论。

这就是一元论的魅力，找出一个最和谐美好的图景，用一种特定的价值去统领一切，摆脱多远价值的冲突，就可以缓解生活的不确定性。伯林说，无论对于理智还是情感，这种观念都是一种深刻的满足。

但伯林进一步认为，一元价值只是幻觉。多元价值的冲突不可能消除，如果执着于价值一元论，就很容易去压制其他价值和理性，干涉甚至毁灭多种多样的生活方式，结果就是在实践中给你造成巨大灾难。

伯林提出一个概念，多元价值的不可公度性，就是你找不到同一把尺子，能够通用地衡量多种不同价值，给它们排序。不能说自由等于0.5份公平。正义是1.5份仁慈。

面对杀人犯，被害者亲属追求正义，要杀人偿命，杀人犯亲属追求仁慈，要请求宽恕。伯林认为，这原则上无法解决。——强调价值冲突无法根除，是伯林价值多元论的重要特征。【价值冲突，需要你行走对方的岁月，听他的故事，寻求理解】

他说，我们要在同等终极的目的、同等绝对的要求之间做出选择，并且，某些目的的实现，无可避免地要导致其他目的性的牺牲。所以，我们需要选择，需要为了一些终极价值牺牲另一些终极价值，这就是人类困境的永久特征。

价值并不是主观主义，也并非相对主义。价值虽是多元的，但仍然是客观存在的，不是主观想象构成的。

	1. 价值虽然多样，但不是无限的。人类信奉的价值可能就几十上百种，不可能70亿人就有70亿种价值。
	2. 人类具有某种最低限度的“共同性”。我们即使火星撞地球，水火不容，但仍然可以理解对方为什么追求这种价值。


03 两种自由

伯林说，在思想史上，自由可能有两百多种定义，但核心只有两种，贯穿了整个人类历史，伯林把这两种自由叫做“消极自由”和“积极自由” negative和positive。

消极自由是，我不想要什么、就可以不要什么，英文是free from；积极自由是，我想做什么、就可以去做，英文是free to。一个是摆脱障碍的自由，一个是实现目标的自由。

消极自由强调的是，维持一个不受干涉的领域。在这个意义上，消极自由更像是一种机会，只要保留这个机会，就算什么都不做，也保持了自己的消极自由。

但积极的自由，它是实现某个目标的自由，要是什么都不做，就麻烦了。在积极自由里，主体常常有内部的划分：一个是真正的、高级的、理性的自我，还有一个是虚假的、低级的、非理性的自我，积极自由的目标，往往指的是，那个理性的自我能够主导自己，去实现高级的目标。

比如，下班了，本来你决心要去健身的，但因为懒，想着玩一会手机再去，结果玩了两小时。这就是你滥用了自己的消极自由，也没有实现积极自由。

如果你的目标是什么都不做，那就要检查一下，什么都不做，是因为懒惰吗？是因为自暴自弃吗？

自律给我自由，这句话说的也是克服自己非理性的一面，实现积极自由。

伯林认为，积极自由和消极自由都是正当的终极价值，原则上没有高下之分。但这两种自由都可以被滥用和扭曲，伯林强调，积极自由的扭曲和滥用更具欺骗性，更值得警惕。他也承认，在特定情况下，强制可能是必要的，消极自由有可能需要向其他价值让步，甚至做出牺牲。

但牺牲就是牺牲，我们就应该承认”这是牺牲了自由“换来了安全、秩序或者其他，而不是把牺牲改头换面成“更高的自由”。

为什么积极自由容易被滥用？因为与消极自由相比，积极自由离日常生活和经验世界更遥远。

我们的经验世界，十分追求自由，因为我们都体验过自由的反面——一种普通、深刻、强烈而朴素的体验——强制，强制到极端就是奴役。我们对自由的渴望，最直接的来源就是对强制的不满，对奴役的反抗，所以我们会大声喊出“不要强迫我！”。

这是人类最为普遍的经验，跨越了文化和历史。从这个角度来看，自由的最初始意义偏向于消极自由。

伯林认为，20世纪政治历史，很多都是以自由的名义实施强制，并宣称强制的结果是“实现了真正的自由”。这是伯林最为深恶痛绝的概念魔术。


















</pre>
</div>
<div tags="" title="幽默">
<pre>幽默的定义：''幽默是从一个有趣的视角来讲述真相和痛苦。''

护士问赵四：你在找什么呢？赵四说：请问厕所在哪个科？

正常说话，大家会说自己喜欢什么、擅长什么，但是幽默是，你要告诉别人你痛恨什么、不擅长什么，你搞砸了什么。——失败是幽默的好朋友。


发笑的机理：意外感、优越感、宣泄感

!!意外感

康德说，在一切大笑里，肯定有荒谬、背理的东西。笑话里的逻辑和平时认知的逻辑不一致，存在矛盾，所以幽默才会产生。

如：上帝让我成为了无神论者。
我最讨厌两种人，一种是地域歧视的人，一种是北京人。

!!优越感

托马斯·霍布斯说过，笑，是发现事物的弱点，突然想到自己的某种优越感时，那种突然的荣耀感。也就是，当你看到有人尴尬或被羞辱时，你在对比下会产生一种优胜心理。

如：路上有人踩了香蕉皮。比如雷军的Are you ok?鬼畜视频。因为他被全世界发现英语发音不标准，但你没有，你就产生了优胜心理。

!!宣泄感

哲学家斯宾塞说，笑是对压抑神经的释放。也就是，宣泄也能产生笑。

给人宣泄感的例子，就是那些禁忌或者敏感话题的段子，比如荤段子、政治段子。政治段子traget up，吐槽身份、地位更高的人。苏联笑话就是人类瑰宝，现在段子手喜欢吐槽特朗普，同样是因为特朗普又有钱又是美国总统。


东方文化对女性教养有要求，但人太Nice，就没喜感。

幽默很多时候是一种假性攻击，就像挠痒痒。需要适当地冒犯，制造紧张感。注意不能冒犯对方真正在意的痛点，或者是对方不能改变的东西——残疾，外貌等，而是挖掘对方的痒点。

幽默是从一个负面的视角出发，甚至要表达一种负面的情绪，这就是幽默的思维。

有意识给自己设置一些标签，用这些标签提升和丰富你想表达的内容。3个刚刚好。




</pre>
</div>
<div created="20210705063740957" modified="20210705064134368" tags="" title="在Github Pages上搭建Tiddlywiki">
<pre>Tiddlywiki太好用了，周末用了两天时间，试着将其搭建到我的群晖上，结果发现内网映射很麻烦，速度还很慢。想起我之前在GitHub上搭建了一个博客，研究了一下，发现可行，于是，就有了现在这个网页。我发现，网上居然没有相关的博客讲，分享出来，让更多小伙伴享受这一神兵利器！


弄好之后很开心，因为中途遇到几个问题没有参照，凭着勇气搞了下去，终于成功，开心到爆炸。在我弄好之后，我又找到几个英文版的教程，结合我自己的实践，分享给大家。

https://kookma.github.io/TW5-GitHub-Saver/

https://kookma.github.io/Tiddlywiki-Travis-CI/

https://kookma.github.io/Tiddlywiki-and-GitHub-Pages/


# 申请GitHub账号，新建仓库，生成GitHub Page

仓库名命名为：用户名.github.io可以没有后缀使用

生成page：
https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site

#  将Tiddlywiki模板上传到仓库

空白的中文简体模板：
https://tiddlywiki.com/languages/zh-Hans/empty.html

# 申请Token，配置到Tiddlywiki中


申请token
https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token

不输入token不能修改！

太棒了！



保存时，发生错误：

XMLHttpRequest错误代码409

不影响使用

!Todo list:

#如何实现登陆，不然所有人都可以保存修改
#消除保存时候的报错
#安装一些插件</pre>
</div>
<div bag="default" created="20210702012744255" modified="20210702023942335" revision="0" title="噪声" tmap.id="10086d04-179f-439b-baef-5e467ff67ccd" type="text/vnd.tiddlywiki">
<pre>系统之间个体的差异，叫水平噪声（level noise）。

水平噪声之外的系统噪声，叫做模式噪声（pattern noise）。

系统噪声^^2^^ = 水平噪声^^2^^ +模式噪声^^2^^

模式噪声分为稳定模式噪声和偶然噪声。

模式噪声^^2^^ =稳定模式噪声^^2^^ + 偶然噪声^^2^^


所以 系统噪声^^2^^ = 水平噪声^^2^^ +稳定模式噪声^^2^^ + 偶然噪声^^2^^

稳定模式噪声是三种噪声中，贡献最大的一项，是最重要的噪声来源。

''你的稳定模式噪声，代表着立体的、全面的、你独一无二的思维习惯。''是你与具体环境耦合出来的具体思维方式，随环境变化。</pre>
</div>
<div tags="" title="哲学">
<pre>!哲学人物

!!中国

*[[庄子]]

!!西方

* [[尼采]]

*[[弗洛伊德]]

*[[克尔郭凯尔]]

* [[马克斯·韦伯]]

* [[萨特]]

*[[鲍曼]]

*[[汉娜·阿伦特]]

*[[卡尔·波普尔]]

*[[哈耶克]]

*[[以赛亚·柏林]]

*[[马尔库塞]]

*[[罗尔斯]]

*[[诺齐克]]

*[[德沃金]]

*[[桑德尔]]

*[[沃尔泽]]

*[[泰勒]]

*[[哈贝马斯]]

*[[福山]]


!哲学时期

[[西方现代思想]]
</pre>
</div>
<div created="20210707070624990" modified="20210707075301585" title="政治学是认识世界的必修课">
<pre>!01

世界上很大一部分资源，并不是通过市场来配置的。

1780年，后来出任美国第二代总统的约翰·亚当斯参加独立战争，他说了一段话，“为了我的孩子们能够有自由来研究数学与哲学，我必须研究政治与战争。”他接着说：“我的孩子们应该研究数学、哲学与商业……以便我的孙辈能够研究绘画、音乐与诗歌……”

外行看政治，看到的是一个个事件，内行看政治，看到的是事件背后的整个结构。

“人类天生就是政治动物”——亚里士多德《政治学》开篇。

人为什么是政治动物？借福山《政治秩序的起源》的观点：

第一，人类从一开始就是过集体生活的。有集体就有政治。
第二，人天生喜欢制定规则。规则是为了减少人们社交成本，进而在更大范围内采取集体行动。这些规则就是政治的约束。
第三，政治可以约束人类的暴力潜能。史蒂芬平克在《人性中的善良天使》中讲到，约束我们暴力倾向的第一种力量就是利维坦。
第四，人追求的不仅仅是物质，还有认可。人类政治活动主要就是为了寻周认可。

!02 政治是一门实践学科

政治学科，被亚里士多德称为“最高学科”，是一门无数思想家、哲学家两千年来积累形成的体系。

而普通人关于政治的观点，很大程度上是被大众文化塑造出来的。我们学习政治学，就是要用理性的逻辑摆脱大众文化对我们政治观念的塑造。我们要警惕大众文化对我们观念的塑造，它就是告诉我们，世界、政治是由人的主观意愿决定的，真实世界是不一样的。

政治无处不在，只要有人类组织，就有政治结构，海盗也要解决政治问题。政治规则不是由人们的主观意愿决定的，而是由这个人类群体所面临约束条件决定的。

海盗船为什么实行民主制？
	1. 共有产权
	2. 武力、实力均衡
	3. 内部民主，公平才能吸引人才，抵御高风险

思考：还有哪些流行的政治观念，是被大众文化塑造的，并且可能是错的？
——漫威科幻片的政治结构都是封建帝国
——政府应该解决一切问题

!03 1787美国的政治困境

谢斯起义，1786年，因为退伍军人抚恤金、农民债务到期不能偿付引起的冲突，起义。

原因：国会没有权力。农民一抗议就马上诉诸武力，国家除了武力没有别的办法。不是农民生计出问题，而是国家政治体制出问题。暴力要像核武器那样，存而不用，只是威慑。

制宪会议难：
	1. 大州小州的权力配置问题。小州怕受欺负，大州怕受拖累=&gt;两院制，参议院按州选代表，众议院按人口选代表。
	2. 宪法什么条件能修改？怎么改？=&gt;两院2/3加上3/4州的批准。美国宪法即稳定也灵活。
	3. 怎样让新国家中央政府既有权力，又能限制它的权力？（既要马儿跑，又要马儿不吃草）——权力悖论。宪法设计了一套分权制衡系统，横向三权分立，纵向联邦制。

好政治是微调出来的，政治构建是一个具体，细微，技术性的过程。政治是实践智慧。
</pre>
</div>
<div created="20210707072357750" modified="20210707072359511" title="政治学思维方式">
<pre>1. 国家思维。现代政治学的第一个基本思维，就是重视对国家的分析。经济学家最关注市场，政治学家最关注国家。
		a. 外行把政治等同于宫廷政治，内行关注宫廷政治背后的国家问题。玄武门之变是宫廷政治，而朱棣夺位却是内战了，宫廷退居二线。
		b. 国家是解决一切社会问题的前提。霍布斯所说的“人与人的战争状态”，阿富汗、叙利亚的乱象。
		c. 国家意味着权力关系的强制性。不同于市场的平等性，国家权力，如征税、服役、法律让你无处可逃。
		d. 国家是很多重大问题、重大现象的根本原因。
	2. 权力思维。外行把政治等同于权力斗争，政治学就是权术之学，然而内行不止关心权力斗争，更关注对权力的系统研究。
		a. 现代政治学三大基本问题：谁来统治？如何统治？为谁统治？
		b. 权力需要有效管理社会，同时社会需要有效控制权力。
		c. 权力规则不同，就会导致政治后果不同。比如古时候的兄弟相残。
	3. 因果思维。外行容易把政治等同于意识形态口号，或者简单的各种政治主张，内行不止关心主张，更多关心解释——剖析重大政治现象背后的原因。
		a. 现代政治学关注政治领域发生了什么、如何发生以及为什么发生，特别是为什么发生。
		b. 现代政治学以解释现实为重点，而不是贩卖廉价的政治希望。
		c. 批判现实政治固然必要，但更需要回答的是，这些令人不满的政治，到底是如何形成的？
		d. 某些貌似不合理的政治现象背后，往往都有一个较为隐秘的原因。</pre>
</div>
<div created="20210707070237742" modified="20210707072337633" tags="" title="政治学通识">
<pre># [[政治学是认识世界的必修课]]
# [[权力如何管理社会？]]
# [[社会如何控制权力？]]
# [[制度设计的政治智慧]]
# [[政治中的分歧和冲突]]
# [[发展中国家的政治分析]]
#[[政治学思维方式]]
#[[五条政治法则]]
</pre>
</div>
<div created="20210707070812959" modified="20210707080632132" title="政治中的分歧和冲突">
<pre>!1.自由与权力的边界

美国19世纪30年代，罗斯福新政与最高法院的阻挠，就是因为双方对于自由与权力的边界看法不一。最后迫于政治压力，最高法让步，美国的中央政府权力也逐渐扩张。

约翰·斯图亚特·密尔，也叫小密尔，在《论自由》一书中写道，以个人的绝对自由假定为起点，政治权力可以正当干预个人行为的唯一理由，就是防止一个人对其他人的伤害，如果不是这样，政治权力就不应该干预个人的行为或选择。被严复翻译过来《群己权界论》。

过去200年，西方世界就是保守自由和扩张权力两种力量的对垒，就像刹车和油门一样不可或缺，看似冲突，其实就靠两者的共生，不断实现了自由和权力边界的微调。


得到笔记：政府的权力和社会的自由，此消彼长，但不是零和博弈，要考虑不同的经济形势，没有绝对自由，自由都是与责任对等的。社会太自由了，就会导致各种经济问题，如经济危机、公共服务缺失、贫富不均等等，社会上处于不利地位的民众会呼吁政府介入，政府的权力就需要扩张，降低社会自由度。政府权力过大，也会有不利的一面，社会活力减小、发展受阻、懒人社会、抑制创新、大规模赤字等等。所以，这也是一对需要动态平衡的关系。


!2.干预市场

罗斯巴德在《美国大萧条》中认为，政府干预，使得一场普通的经济危机，演变成为了一场史无前例的大萧条。

假定他说的是对的，政府会不会干预市场呢？
——还是会的。政府干预，不光是经济逻辑决定的，还有政治逻辑。

1929年前，美国政府不干预经济危机，而之后，美国大众政治的兴起和主流意识形态的转向，开始干预。原因一是1920年妇女获得了选举权，二是报纸、时政杂志、广播的兴起。民意和大众情绪每天都可以公开表达，政治家政治压力变大，社会主流意识形态也变化，认可了在危机时政府干预。

一个社会的主流认知，是决定一个社会政治决定或公共政策的重要背景条件。政治家被形势裹挟着，或被动或主动地做出选择。

得到笔记：我不赞同罗斯巴德的观点，政府干预反而会加重危机，因为经济危机出现本身就是资本主义生产的必然现象，历史不断重演，也没人不承认了——工人的工资不能覆盖他们产出的商品价值，老板的收入也不会买掉多余的商品，那么整个社会就会商品过剩，工人没钱买，老板商品卖不出，工厂就停工，工人更加没钱，商品更加卖不出。于是，一边商人吧牛奶被倒在河里，另一边工人排队领救济面包。请问，政府不出面，经济危机怎么自行调节好？？？

除去经济危机本身的问题，政府干预市场确实也有主动和被动的原因。政治家想要施展抱负，干出成绩，大众想要更多的援助和福利。一个实体建立后，它就有发展的意愿，政府也是如此。多种力量共同作用下，政府的权力就越来越大。


!3.福利国家，福利社会

1601，英格兰制定了《济贫法》，史称《旧济贫法》，慷慨的帮助穷人，直到1802年，英国共建立了3700多个济贫院。1834年，英国通过了另一部《济贫法》，史称《新济贫法》，这部法律非常严苛，提供很差的饮食和居住条件，需要艰苦的劳动。基于两个考量：基于劳动力市场的考虑，如果贫民生活得好，工厂就无法管理收入微薄的人，懒人变多；基于人口质量的考虑，贫民难以结婚生育实际上促进了人口的优胜劣汰，如果条件好，穷人就会多生。英国济贫院被人称为“穷人的巴士底狱”。狄更斯《雾都孤儿》主角奥利弗小时候就是在济贫院过这种可怜的生活。

1946年，英国通过《国民保险法案》，标志英国迈入了全面建设福利国家的轨道。1942年贝弗里奇发布报告，评估了人一生全面的风险，提供了一套“从摇篮到坟墓”的全覆盖社会福利方案。获得了英国公众的普遍支持，工党将其纳入政治纲领，保守党却犹豫不决。随后1945年大选，工党获胜，丘吉尔被拉下马。

然而，30年后，撒切尔夫人上台，却号称要“打烂福利国家”。因为慷慨的社会福利，过多的政府管制，庞大的公营部门和强势的工会，让英国经济停滞。撒切尔展示了其非凡了领导力：
	1. 原则明确：走小政府与自由市场的道路。
	2. 目标清晰：减税，放松管制，削减福利，缩减公共部门，国企私有化，限制工会运动。
	3. 勇气非凡：挫败英国矿工联合会的全国大罢工。

她说，如果你的出发点是让人喜欢你，那么你就需要随时随地地在任何事情上准备做妥协，这样，你就做不成任何事。

影响政策措施的变化，是靠社会结构变化、社会主流观念的改变和政治家的领导力。

得到笔记：民主化是大趋势，但是呢，社会结构总是不富裕的人占多数，他们有了投票权，就要政策更多地照顾他们的利益。即使穷人也分的，有些是真的穷，需要帮助，有些是懒导致的，对他们更加正确的是给压力，有些是一时受难等等，所以要精准扶贫！大水漫灌的政策可能会加剧穷人之间的不公。社会的剩余该留着分配还是用来发展，需要把握一个平衡，都给穷人消耗了，就没有动力发展了，都用去发展了，穷人就没得活，社会矛盾就激化了。这个平衡就由执政党和领袖来把握，因时因地制宜。

!4.深陷债务危机的民主国家

2017年，美国债务占GDP108%，英国87%，法国97%，日本236%。澳洲和北欧的国家总体较好，只有30%～50%，因为实行了严格的财政纪律和法律约束。

直接原因：政府的支出远超过收入，造成财政赤字，不断积累，就导致债台高筑的局面。

深层原因：民主制度下的政治运作，人们总是想要高福利、低税收，政治家为了选票，只能满足选民的要求，实现政治家用政策换选票、选民用选票换政策的政治交易。选民们乐意投票支持那些承诺减税、增加福利的政治家——这就是1986年诺贝尔经济学奖得主詹姆斯·布坎南提出的“民主赤字论”。

里根发动过减税减福利的政治经济改革，减税之后，很难减福利，毕竟不敢得罪从社会福利中获得实际好处的大量选民，从1981到1989，里根使得政府债务增加了186%，新增政府债务高达1.86万亿。上一任美国总统奥巴马的8年，也是债务大幅攀升的8年，08年经济危机，政府收入下滑，为了刺激经济，政府开支上升，一减一增，只能靠借钱，任内美国政府债务增长了74%，突破了20万亿美元。

公共选择理论，就是用经济学的理论和方法分析政府行为和政治现象，将政治领域视为一个充满各种交易的政治市场。民主意味着多数人统治，政治家过分迎合选民利益，就会带来短期利益和长期利益的冲突。民主能否实现稳定的财政，是一个现实的挑战。

得到笔记：
民主啊民主，当民众获得权力之后，谁来约束这个具有最高合法性的权力？

美英法日，PIGS，都是债台高筑，原因无它，唯民主尔。对于我们国家这样的政府，责任是一以贯之的，不会为了选票，做一些贻害未来的事情，寅吃卯粮；反观“民主”政府，责任是阶段性的，只要下了台，责任就不归我了。从这个意义上来说，西方国家和我们的省级行政区有点类似，只要任期结束就走人，责任和权利都是下家的了，我上台干了，就算收获了，哪管走后洪水滔天。我们制度的优越性啊！

!5.移民对政治有冲击吗？

会！

美国建国后，也是实行严格的移民政策，欢迎西欧国家移民，控制西欧以外国家移民，同化和归化移民。
Ex.
	1. 1818年，爱尔兰团体请求一块西部土地安置，被国会以可能导致美国社会碎片化拒绝。
	2. 1818年美国排华法案，就认为华人劳工很难像爱尔兰移民、德国移民那样美国化，他们难以真正容易美国社会的主流。
	3. 1921、1924移民法，因为南欧移民过多，西欧移民少，会影响美利坚民族的统一性，于是实现配额制，根据1890年人口普查为基础，中、日、印、土耳其配额100，德国51000，英国34000，爱尔兰28000，以保持美国人口既有的族裔、宗教和来源国比重。
	4. 1965年，为了再冷战中打造自由民主标杆的国设，废除配额制，通过《移民与国籍法》。另外一个原因是黑人民权运动的兴起，让平权思想逐渐成为主流观念。
	5. 2000年，来自欧洲以外地区的移民超过80%，在1960这个数据是不到20%。
	6. 2050，按照估算，白人族裔人口降到47%，丧失人口上绝对多数地位。

欧洲国家，穆斯林人口持续上升，2016年为4.9%，道路2050年，德、英、法德穆斯林人口比重将高达17%～20%。

为什么值得担忧？

	1. 政治认同。我是谁？我认同这个国家吗？

	2. 民主价值观。欧洲移民习惯民主，非欧移民没有民主传统。

	3. 政治分歧。阶级分歧、族群分歧、宗教分歧增多。

亨廷顿最后一书中，认为美国的精神核心是盎格鲁-新教传统，族群-宗教多样性大幅提高后，这种传统可能会弱化，甚至会导致美国的衰落。西方社会大概率会像基督教保守主义政策转向，限制移民，或限制特定族群-宗教的移民，在国内倡导西方价值观。

人口结构就是选民结构，就是政治力量结构，就是政治分歧的结构。


得到笔记：人，是一切的原因。移民这个变量，日积月累的，可以从根本上动摇国家的基础——人口结构。人类还是对不同种族抱有偏见，科幻电影里的不同人种组成共和国，在现实是不可能的。因为，目前国家大都是有了固定的民族，不是那么容易就开放外族进来的，不那么容易就忍受种族差异的存在。对同类抱以善意，对异类抱有偏见甚至敌视，这种思想是那么的轻微，不被我们大脑觉知，我们就已经表现出来了。无论同乡、同学、同志、同胞、同好、同性。。。。。

【说真的，有的老上海人还排斥新上海人呢。。。】










</pre>
</div>
<div created="20210707070750623" modified="20210707080423266" title="制度设计的政治智慧">
<pre>!01 议会制和总统制

像英国这样，民选的议会决定首相和内阁，然后首相与内阁掌握行政权，对议会负责，叫做议会制；
像美国这样，民选的总统掌握行政权，民选的国会掌握立法权，总统国会互不统属，叫做总统制。

美国政府为何关门？——行政机关和立法机关都是民选的，都具有最高合法性。一旦总统的预算、法案不被比准，两者就互不相让，总统领导的行政机关就得因为没钱而关门。根源就是总统（行政权）和议会（立法权）双重合法性冲突。
英国政府为何不容易关门？——首相或内阁表面对议会负责，其实也往往是议会下院多数党或多数派联盟的领袖，控制了议会的多数席位。他们的预算、法案就会得到议会下院的多数支持。

在二十世纪八九十年代之前，美国是几乎唯一长期稳定的总统制民主政体，历史上拉丁美洲采用总统制的民主政体就非常不稳定，如1973年智利政变，就是民选总统阿连德的政党只占国会百分之十几的议席，推行政策时互不相让，陷入政治僵局，导致军人入场。

政治学家梅因沃林认为，美国政体成功的原因在于两党制，多党制和总统制组合，总统的政党只占比较低的比例，容易导致政治僵局，但是如果两党制了，要么总统的政党占多数（一致政府），要么反对党占多数（分立政府），此时虽然可能政府关门，但最后两党通常会妥协。

似乎总统制很难运转良好，但是，1974年新兴化民主国家，采用总统制的数量是议会制的两倍之多。研究发现，议会制运行，得有议会传统深厚与政党政治发达的国家，比如英国，对新兴小国来说，玩议会制就是多党林立，要么很难组阁，要么容易被倒阁，这种情势下，就没有有效的执政力量。

所以有人说，不如直选总统，避免行政力量碎片化。进一步，组建政治联盟，一党总统与多党内阁组合，把外交部长、财政部长、国防部长等职位分给其他政党领导人，组建一个控制国会50%以上的政治联盟。

法国是半总统制，民选总统，总统提名一个需要国会批准的总理。半总统制更像总统制还是议会制？

评论：不能简单地在真空环境中分析政治制度的优劣。要结合各地不同的历史传统和社会环境才能综合评价。

 
!02 政党的兴起

如今，没有哪个大国政治能离开政党，但在200年前，华盛顿认为政党是不祥之物，值得警惕。1796年，在他的告别演说中，他警告美国，政党与党派精神，是共和政府最危险的敌人。

古罗马共和国也是毁灭于党争，公元前133年，保民官提比略·格拉古被元老们打死，撕裂了罗马，华盛顿肯定知道这个教训。1789年，他就任美国第一任总统，他自认为自己是以为超党派的总统，他任命联邦党的亚历山大·汉密尔顿做财政部长，又任命反联邦党人托马斯·杰裴逊任国务卿，但汉密尔顿更被倚重，大量任用自己的支持者。这引起了杰裴逊的不满，后者反对汉密尔顿扩张中央政府权力的政策，也怀疑汉密尔顿的做法是为了银行家和寡头的利益，于是，在他周围逐渐团结起一波人，形成了共和党（又叫民主共和党）。国会为了筹措资金对酒类征税，引起了宾夕法尼亚州的抗税行动，几乎演变为叛乱。华盛顿认为，这件事和共和党的煽动有关。

为了在华盛顿卸任后，赢得总统席位，托马斯·杰裴逊创办报纸，组建政治联盟——共和党，最终第三、四任获得了总统席位，也就是杰裴逊和麦迪逊。

政党兴起的原因：
社会性的，人与人、群体与群体之间的分歧；
政治性的，政治斗争的需要，一群人比一个人竞争更为有力。

最小获胜联盟法则：即要联合别人获胜，又要分红最小。比如公司兼并，只控制51%的股权就好。

《独裁者手册》的作者托斯塔奎认为，一个国家的政治生活中，最重要的不是名义选民，也不是实际选民，而是有能力控制核心权力的获胜联盟。

对于君主制，获胜联盟就是王室成员、高级文官武官、禁卫军。对于军人统治，获胜联盟就是高级军官、文官和经济寡头。对于英美等国家，获胜联盟大很多，无论总统还是首相，都需要足够的选民支持。从这个角度看，民主政体和非民主政体的区别就是获胜联盟的规模。

比如朝鲜，只要金正恩控制了小规模高级军官、高级文官，就控制了整个国家。

【政治就是，把自己人搞得多多的，把敌人搞得少少的，毛主席太厉害了！】
评论：政党虽然有这样那样的问题，但政党最大的好处就是可以用政治解决问题，不会让问题无限制发展。

!03 国会选举制度左右政党体制

一个有趣的政治现象：一种制度一旦落地，其政治效应往往不是最初设计者可以预见的。

德国魏玛共和国的垮台：1919年成立，拥有当时最民主的宪法，但仅14年后希特勒上台，魏玛共和国退出历史舞台。一个重要原因就是魏玛国会政党数量过多，政党体制高度碎片化，无法形成稳定的执政力量。

选举制度可以决定政党结构。

迪韦尔热定律：简单多说决定制的选举制度更容易导致两党制；比例代表制的选举制度更容易导致多党制。

简单多数决定制：小选区，赢家通吃；如英，美。
比例多数代表制：大选区，按比例来。如70年代崩溃的智利。

简单多数制导致两党制，虽然政体稳定性高，但代表性低，所谓“两党专制”问题：在两个烂苹果里面挑一个没有烂透的苹果。
比例代表制导致多党制，虽然代表性高，但稳定性低。没有稳定性，讨论代表性有意义吗？
——这也是现代民主政体的两难问题：你要更好的稳定性，还是更好的代表性？相当于在公司里，你要大家的意见都能体现，还是要决策的速度与效率？

对于比例代表制的补丁方案：设置政党门槛，缩小选区规模和对应的席位。

评论：
规则的限制产生秩序，民主选举在不同的规则下选出的可能不是最优。但公平这件事是人类永恒的追求，是生物的本能。
目前也有了混合选举制度，就是充分考虑代表性和效率。

!04 总统选举制度

一轮多数制：一轮投票中，得票最多的候选人当选总统，无论他是否获得过半的选票。
两轮多数制：第一轮没有候选人过半数，在排名前二的候选人中进行第二轮投票。（胜者肯定过半）

目前大多数国家采用两轮多数制。

智利1973的民主崩溃，很大原因就是因为一轮多数制，阿连德以36%的票数当选，这就意味着有64%的选民不支持他。你可能会觉得没有过半也没什么，民主应有之义就是妥协嘛，但这藏着一个风险，政治极端分子可以用这种方法，以少量的选票上台。20世纪80年代后，智利改为两轮投票制，总统都是以过半数当选。【当初自己选的他，含泪也要支持下去】

不要小看这过半数，过半数
	1. 有更高的合法性；
	2. 让一个国家塑造政治共识；
	3. 更有效地整合政治力量，塑造政治联盟：第二轮投票中，大大小小政党会整合成2~3个政治联盟，失败的政党和政治家会会以各种方式加入第二类政治博弈，妥协分歧，强化共识。

任何政治的良好运作，都依赖于最低限度的政治共识。两轮总统选举制度可以塑造这种共识。

美国是选举人团制度。也是两轮多数，不同之处在于，把每个州平等的民选票转换为整个国家平等的选举人票，这个转换过程是为了考虑宪法规定各个州平等的原则，保证小洲权益，把州人格化了。

评论：政治规则也在主动起着粘合人群的作用。 

!05 央地关系

分权还是集权，各有利弊，关键看具体矛盾。

分权，可以约束中央政府错误政策；可以让地方因地施策，提高政府的回应性；还可以带来一种地方之间的良性竞争关系，改善治理绩效，提升政治家的竞争动力。

美国宪法设计是分权的，防止联邦政府作恶，约定凡宪法没有明确授予联邦政府的权力，都由州政府和人民保留。但是，有观点认为，地方分权很高，导致了南北战争。内战后，联邦政府的权力不断扩张，联邦政府财政收入占全国政府收入的比例从10%逐渐上升到20世纪末50%，2017年是54.6%，说明虽然宪法规定美国是联邦制，但中央集权化程度在不断提高。

尼日利亚1960年独立，分成4个大区，每个去都相对中央政府有着比较强的政治力量，中央层面的政治逐渐转变成几个大区对中央权力的激烈争夺，地方层面也是族群有着一定的控制力。在这个背景下，东区发现了油田，东区就倾向于独立了，之后就引发内战了。内战结束后，开始政治改革：撤销大区，改为36个小州加联邦特区；采用总统两轮多数选举制，且第一轮候选人需要获得全国2/3州不少于1/4的票，鼓励五湖四海，不搞团团伙伙；政党禁止带有族群，宗教和地区符号。

政治，是一门平衡的艺术。

单一方法都有其缺陷，混合种类才是王道。没有一定的地方分权，就难以有效治理，没有一定的中央集权，国家就会分崩离析。

</pre>
</div>
<div title="中国崛起">
<pre>01 中国经济奇迹的奥秘

1.西方世界进入创新经济时代，带来了制造业大规模外包；
2.中国分税制改革，造成城市化先于工业化，从而获得了超强的承接外包能力。

基本需求向创新需求的变化。传统时代，人们的基本需求就是产业流水线的目标，等基本需求满足了，流水线就固定了，诺基亚就是这样，他把手机做到廉价又耐用，人们更新换代的需求降低了，产品就不好卖了。从此，手机要想卖得出去，就必须有新的、有趣的、能带来新体验的功能，手机领域进入到了创新经济时代。

在智能手机出来时，诺基亚是唯一一个拥有自己完整生产线的厂商，但正是这条生产线，压抑了诺基亚的创新能力。【路径依赖】。苹果公司就是创新时代的典型企业，不生产，枝复杂创新、品牌和渠道维护，生产流程都外包出去。

承包方需要满足两个要求——效率和弹性。

效率和弹性彼此是矛盾的，要效率，那就必须专业化，要弹性，就不能太专业化。中国能称为世界工厂，就是在于同时实现了弹性和效率。因为中国形成了一个庞大的供应链网络，高度专业化的单个小企业，确保了生产效率，数量庞大的小企业不断动态重组，又确保了弹性。

为什么中国实现了？

分税制改革，把钱从地方政府口袋拿走了，刺激了地方官员寻找其他自己来源，从而产生了“土地财政”。分税制把营业税划归地方，建筑类企业就是缴纳营业税的，建筑业对土地有大量需求，与土地增值的相关税收也都归地方，所以地方政府就鼓励建筑业的发展。后来地方政府发现，可以拍卖土地的使用权，或者用土地作为担保，进行融资贷款，建设开发区，开发区炒热周边土地，再进行新一轮的拍卖或融资。这就很快称为地方政府极为重要的资金来源，大大刺激了中国城市化的大发展。

中国走了和一般国家相反的历史节奏，使得城市化早于工业化。但是，这种方式蕴含着危机，那就是各地都大搞开发区，最后如果没有足够的工业经济带来税收，贷款就还不上了，引发极为可怕的经济危机，经济出现断崖式下降。

——就在这个时候，西方国家的大规模外包来了。

于是，中低档制造业就很快大量转移到中国来，经济危机就这样被消弭于无形了。

02 世界经济双循环




iPhone生产所需的整条生产线都在中国，中国的巨量规模，让分工深度和弹性程度，达到了匪夷所思的程度。这意味着，创意要想落地，所需要的制造业整体生态，都在中国。近些年，这个供应链的范围已经超出中国，以整个环中国海地区的东亚为单位，世界工厂这个名号属于整个东亚制造业集聚区。

中国目前出现制造业的部分转移，并不是真正意义的转移走，而是整个供应链网络再东亚内部重构。中国的压倒性规模以及完整的产业结构，使得这个供应链网络中心始终在中国。

传统经济学认为经济的成本包括三要素：土地、资本和劳动，而制度经济学又引入了“交易成本”这个变量。而中国的供应链网络，重构了交易成本的内涵，通过供应链减少成本，让土地和劳动力不再是制造业的决定性因素了，所以21世纪以来，我国劳动力和土地成本大幅上升，制造业仍能快速发展。

从这一点来说，中国的中等收入陷阱问题可能已经不存在了，因为供应链不会转移出去。即使转移出去的，也是单位重量产品售价低的商品，对于物流成本很敏感。

03 冷战和后冷战

美苏主导两大政治集团对峙时，不仅要在政治领域维系，也需要在经济上收回成本。美国帮助拉美国家打击国内左翼势力，相应地跟他们形成正向的经济循环，收回成本，这样才可持续。否则就是烧钱游戏，撑不了几天。

美国是市场经济，海洋秩序，所以它的盟友遍布大洋沿岸，苏联是计划经济，大陆秩序，它的盟友就是它周边的陆地国家。而中国，就处在这之间，是一支独立的第三支力量。中国的基本盘是第三世界国家，比如帮坦桑尼亚修坦赞铁路，但这种行为没法通过贸易收回成本，因此不可持续。

冷战结束，苏联解体，但是美国和苏联的小弟没有正向的经济循环，即使想进入，也难以维持。比如美国推翻了萨达姆、卡扎菲的统治，但当地人民并没有建立更好的政权，非常依赖美国输血，长期输血肯定输不起，美国就不得不撤军，结果当地就陷入动荡之中。伊拉克有一半的石油出口到中国，中国公司掌握的伊拉克石油储量也是最多的，远高于美国，所以有美国人认为伊拉克战争成本美国承担，收益被中国拿了，美国替中国打工了。美国在这些地方打掉老秩序，却没有建立新秩序，就让它推行的价值观收到大陆世界质疑，美国自己也没有冷战时期理直气壮了。

大陆秩序被破坏，海洋系国家也别想好，比如最近几年欧洲难民危机。只有中国能重新投放秩序在这些大陆国家。

因为这些国家，多一半是资源丰富的原材料国家。中国通过制造业基础，与大陆国家建立贸易关系，从而可以投放秩序，因为构建了一个可持续的循环。

中国向大陆世界做投资和援助，必须要让当地社会获得财富的普遍分享，形成普惠效应，才能带来秩序。这就需要对各种地方性传统有比较深入的了解，才能知道如何设计。中国在这方面的知识储备不足，可以向国外国际组织、NGO、研究机构购买服务，未来需要采取普遍主义而不是民族主义——这在几十年前我们都曾拥有。普遍主义，就是严格按照规则行动，让所有人包括自己都被规则约束着，行为可以被预期。

04 为什么要买美国国债？（第一循环）

——为了延续中国自己的经济崛起。

因为西方遇到了一系列的困境，中国不能置身事外，否则会伤害到中国的国家利益。

而西方这些困境，中国的崛起，都是技术变迁导致的。
 
传统经济下，财富增长缓慢，财富分配虽然不平等，但是财产上附着了很多社会义务，比如救助穷人，修筑道路等，穷人也能分到好处，社会不至于撕裂。

工业社会建立后，新涌现的财富并不附着社会义务，经过几次政治革命后，旧有财富的义务基本也没了，穷人再无法分享财富的好处，社会开始发生阶级对立。座椅19世纪前期会有社会主义理念，就是人类在思考如何分配的问题。

西方的分配问题，不是靠社会主义运动解决的，而是靠经济发展解决的。创新部门在社会生产中获得高额利润，其他被拉动起来的部门也可以获得平均利润，并提供大量就业机会。

但到了21世纪初，西方国家进入新一轮创新周期，生产流程大规模外包，也就是创新能带动高额利润，但是创新拉动的部门不在西方本土，而在中国。中国踩在这个风口上，成为世界工厂。美国的草根阶层，很难参与到新财富的分配中去，传统工业经济萎缩。

比如，上世纪90年代中期，中国开始接受西方国家大规模外包，西方传统工业逐渐萎缩。克林顿和布什政府，为了改善本国低收入者处境，推动“居者有其屋”政策。美国在30年代时，成立没房利美、房地美两个公司，帮助穷人获得低息贷款，通过将高风险的穷人房贷和低风险贷款打包，再加上联邦政府隐性的政治担保，证券卖得很好。

这种政府担保行为，其实是扭曲了资本市场的，但是为什么要这样做呢？确保选票。

中国依托全球产业秩序变迁而获得经济崛起的，这就决定了中国是出口导向型，而中国的超大规模性，导致了中国的出口导向必定会让外部世界遭遇严重的经济失衡。如果外部世界没有消费能力，那中国的商品就卖不出去了，所以中国不得不用自己出口积累的大量外汇储备购买西方国家的债券，为其融资，让他们能够买得起中国的东西。但不好的就是，从中国来的大量贷款，维持着西方的低利率，人们绝对借钱划算，愿意大肆消费。那些穷人，就借新债还旧债，终于在2008年爆发了世界性金融危机。

经济危机以来，西方消费能力下降，中国的出口就下降。中国不断努力扩大内需，但内需抵消不了整个西方世界的需求下降，所以中国仍在艰难度日。

在选票的压力下，西方政府近年来逐渐开始保守化。川普上台、英国脱欧，欧洲若干国家保守党上台。中国的国家利益在今天已经是全球性的了，保守党上台，一定会损失中国的国家利益。

05 伊斯兰世界的困境（第二循环）

伊斯兰教义的两面性：一面教人友善、热爱和平、尊老爱幼；另一面教人决不妥协、勇敢反抗不正义。信徒表现哪一面，取决于生活在什么社会结构里。如果在熟人的村子，大家那么就是前者；如果在陌生人社会，又恰好这个信徒技能一般，找不到理想工作，生活窘迫，那就是后者。

犹太教、基督教、伊斯兰教新的神实际上是同一个神。安拉就是阿拉伯语“神”（god）的音译，只是他们对这个神的理解不一样。当今世界，犹太教、基督教都是比较占优势的，所以自信宽容的一面体现出来，而坚决反抗的一面淡化了。中世纪，阿拉伯文明极度发达，伊斯兰教在优势地位，伊斯兰教才是最自信、最宽容的宗教，当时基督教反而很狭隘。

现代国家两个基本原则——民主制和世俗制。在穆斯林国家，两者很难并存。中东和北非国家，要么是封建王公统治，要么是强人政治（压迫宗教势力）。

追求民主化，那么穆斯林上台，追求世俗化，强人上台。西方更喜欢世俗一点，所以对于发动军事政变建立的政府，西方默认其正当性。这就让很多穆斯林觉得西方虚伪。恐怖主义者认为这些政治强人都是坏人，必须坚决反抗不正义，真刀实枪地打又打不过，只好恐怖袭击了。伊斯兰世界是恐怖主义最多的地方。

政治强人们，也不指望老百姓在政治上认可自己，就追求经济发展。巧合的是，穆斯林国家，大都是石油天然气储量丰富的国家，所以在世界经济上行期，能源价格高涨，有油田就像有印钞机一样，老百姓日子可以过得不错。没有石油的国家如突尼斯、埃及，旅游资源异常丰富，也有足够的钱维持社会稳定。到了经济下行时，强人政治就遇到麻烦了。

西方政客，在经济下行时，为了选票考虑，会出台各种政策，鼓励人们借贷消费，但实体经济萎缩，借贷总有还不上的那一天。

穆斯林国家的地理特征，导致他们普遍缺水，就和其他资源充沛地区不同，现代经济对于传统禁忌的冲击，加大了观念冲突，更容易加剧恐怖主义。

所以，中亚、中东这些伊斯兰地区，他们首要的需求不是发展经济，而是反恐。

中国是重建秩序的重要角色，恐怖主义也同样会威胁中国，所以中国需要对当地的传统和问题做仔细研究。

06 在非洲发现中国

非洲不是饥饿的大陆。非洲出现饥荒的原因不是粮食短缺，而是粮食流通和分配出了问题。撒哈拉以南的非洲，从来没有出现过饥荒，热带非洲的自然条件特别好。

热带非洲的问题不是饥荒，而是贫困。普通老百姓不担心吃不上饭，而是愁没有钱买日用品，导致生活水准很低下。

非洲是贫穷的大陆的说法，不全面。非洲贫富分化特别高。

非洲的发展潜力极其富有。富饶的资源大都在半沉睡的状态，没有获得有效开发，缺资金、技术、基础设施、有效的管理。

非洲也不是动荡的大陆，非洲战乱主要发生在20世纪中后期，21世纪，人们都筋疲力尽了，非洲绝大部分动荡都平息了下来，开始琢磨经济发展的事。

2014年，中坦首脑会面，决定激活坦赞铁路，在坦赞铁路的东端，修建巴加莫约港。让坦桑尼亚“南方粮食走廊计划”真正发展起来，闲置土地得到耕种。中国可以将产出的玉米接受，从而解放国内几亿亩耕种玉米的土地。

非洲发展不起来第二产业，但是完全可以直接跨入第三产业。比如坦桑尼亚的塞伦盖蒂大草原，就是东非动物大迁徙的主要场地。

07 碳排放问题

1998年《京都议定书》——共同但有区别的责任。

2009年，又在哥本哈根开会，会议开得一地鸡毛，唯一的成果就是确定了下一次会议的会址，之后几次会议的成果也都是确定了下一次会议的会址。到现在，什么可行的协议也没有达成。

为什么呢？一是对于气候变暖的原因没有真正达成共识；而是各国在这方面的利益诉求差异太大，没法达成共识。

长远来看，恐龙时代比现在还热，现在我们正处在一个温暖周期的上坡道。

能源出口国：主张碳问题是个耸人听闻的伪命题；
欧洲、日本：他们进入了后工业时代，节能减排技术好，主张减排；
小岛国如马尔代夫：强烈要求减排；
一般的发展中国家如非洲国家：对减排没意见，甚至还想通过减排出售配额；
印度、中国这些正在工业化进程的大国：同意减排，但是西方要多承担责任。
美国：不积极，习惯了大手大脚。

政治学的基本逻辑：一个能有效运行的秩序安排，一定是和实力结构相匹配的。实力结构最根本的是伤害别人的能力，只有“我有能力伤害你，但我选择不伤害你”，才能有效谈判。如果你伤害不到别人，那没人愿意和你谈。互相都能伤害，才会寻求放下暴力坐下来谈出个秩序。

据测算，中国2016年，已经成为累计碳排量最大的国家。所以碳问题真正解决的关键在于中美两国。

在双循环的视角看，中国作为世界工厂，是在为全世界生产，当然就是为全世界在排放。目前国家分工，生产已经不是以国家为单位运行了，而碳排放配额以国家来分配，就是不合理的。中国当然要减排，但是要知道我减排，是在替全世界减排。要用实力为基础，与别人谈判，才能真正实现中国的国家利益，落实中国的国际责任。

看到祖国这么流氓，我就放心了。除了流氓，我们还要克制自己不耍流氓，而是心平气和地与人谈，这样才会导向新秩序的建设。

08 中国，世界枢纽

意大利品牌中国人造：在时尚之都经商的华人

什么是中国？——世界枢纽

来源于两大特征，多元性和超大规模性。

有海洋，有大陆，有海陆中介三部分。通过香港连接海洋区域，通过新疆，连接大陆区域。从而成为海陆枢纽。

一个国家能想象到的最可怕的浪费，就是对于自身苦难的浪费。

中国因为加入了世界秩序而获得崛起。由于超大规模性，中国的崛起将会深刻地改变，乃至重新定义世界秩序，而新的世界秩序也会反过来重新定义中国。究竟中国是谁？世界是谁？这些问题的答案，都在一个永远不会完结的互动过程中，持久地生成着，演化着。

















</pre>
</div>
<div created="20210707081132185" modified="20210707081152371" tags="历史" title="中国史纲">
<pre># [[封建社会]]

# [[豪族社会]]

#[[平民社会]]

# [[近代转型]]

# [[现代革命]]

# [[中国崛起]]


{{封建社会}}

{{豪族社会}}

{{平民社会}}

{{近代转型}}

{{现代革命}}

{{中国崛起}}</pre>
</div>
<div tags="" title="专栏">
<pre>专栏作家就是''把自己辛苦得到的想法告诉读者''的人。

专栏文章的类型有：

* 连载的小专题

*书籍解读

*单篇文章（传统意义的专栏文章）

*问答</pre>
</div>
<div bag="default" created="20210701111447028" modified="20210701112214912" revision="0" tags="举例子 人物" title="庄子" tmap.id="c71d4a9c-f9d5-48f4-8596-74df57860951" type="text/vnd.tiddlywiki">
<pre>《庄子·杂篇·说剑》：赵文王喜欢剑，整体与门下食客就舞剑，不理朝政，别人劝说不听，就说自己喜欢。庄子前往游说，剑有三种，即天子之剑、诸侯之剑、庶民之剑。</pre>
</div>
<div tags="定义 和菜头" title="自律">
<pre>名词，常用于指责他人和自我表扬；用于表扬和自我批评时，往往又和自律无关。

</pre>
</div>
<div created="20210707081058128" modified="20210707081108599" title="自我成长">
<pre>* [[科学减肥]]
* [[自我发展心理学]]
* [[精力管理]]
</pre>
</div>
<div created="20210707050255735" modified="20210707050301992" tags="" title="自我发展心理学">
<pre>陈海贤，浙江大学心理学博士。

# [[启动行为的改变]]
# [[启动思维的进化]]
# [[建设高质量关系]]
# [[走出人生瓶颈]]
# [[绘制人生地图]]


</pre>
</div>
<div tags="" title="自由主义的反复死亡">
<pre>自由主义是西方现代思想的主流，到2.世纪xia b下半叶占据了支配地位。但反讽的是，自由主义虽然是西方主流意识形态，但却一直遭受质疑和批评，而且反复被宣判为濒临死亡或已经死亡。

一种思想怎么算是死了呢？就是它不再能够成为社会生活实践的指南，只能进入博物馆，成为考古研究的对象。

自由主义不断被宣告死亡，恰恰证明它还活着，有着很强的生命力，同时也表明，对于自由主义的主导地位，存在着很多深刻的不满：自由主义遭遇了越来越强的平等主义的压力。

古代社会的自由，是一种特权，不同的等级有不同的权力，特权实际上是指“你能够如何自主行动”的意思，根据等级位置，你有特定的不受侵犯的自主空间，就是你的自由。

法国大革命后，等级制被打破了，自由的内涵发生变化，普遍自由的观念广泛传播，人们开始认识到，人生而平等，应当平等地享有同样地自由。

在大革命开始时，普遍的自由权还只是理想，但随着历史的发展，越来越多的人开始要求平等地享有自由，对自由主义形成了巨大的社会压力。传统自由主义面临一个选择，要么被社会发展淘汰出局，要么认真对待平等的问题，兼顾自由和平等两种价值。

以17世纪英国思想家约翰·诺克为代表的自由主义，强调个人自由和基本权利，限制国家干预，这被称为古典自由主义。19世纪约翰·密尔，出现了现代自由主义，也就是在坚持自由的同时非常重视平等的价值，关注社会正义和政治民主的问题。

随着历史的演进，平等的诉求不断上升，平等的范围一直扩张，自由主义就需要不断做出回应。自由主义就演化出不同的派别，有的受到表扬，有的受到不断的批评抱怨——这就是它被反复宣告死亡的原因——自由主义有着丰富的多样性，虽然遭受各种攻击，但也会获得各种支持。

而且，自由主义很难有替代方案。现代社会，人们普遍追求自由平等，在世界已经祛魅的大背景下，一旦有了普遍的自由平等，就一定会衍生出第三种诉求，那就是生活理想的多样性。自由、平等、多元就称为现代世界无法逆转的基本条件。

现代自由主义最有潜力同时回应自由、平等、多元三种诉求，在整体上，有着强大的生命力。













</pre>
</div>
<div tags="" title="走出人生瓶颈">
<pre>01 逆境，人生新机会

记忆总是很容易把过去整理成一条平顺的、符合逻辑的曲线，让我们误以为自我的转变也是一个连续的、缓慢的、渐进的过程。其实，在现实生活中，自我发展常常需要经历很多跨越式的转变，这个过程伴随着剧烈的变动和强烈的不安。

转折期：

	1. 很重要。经历了什么样的转折期，怎么度过转折期的，很大程度上决定了你是一个什么样的人。每一个转折期，都在更新你对世界和自我的认识，考验你的意志和精神，都在跟你的自我增添新的内容。
	2. 让我们学会，用发展的视角看待自我。人是会变化的，在转变的不同阶段，人的心里状态并不一样。所以，有些消极的心理状态很可能是变化的特性，而不是自我的特性。不是我们有问题，而是我们在这个转变的过程中出了问题，我们被卡住了，才有了消极的情绪。
	3. 让我们更新，对自我发展的理解。人就像某些动物一样，长大到一定程度，就需要把原来的壳脱掉。这个脱壳的过程很痛苦。但是我们必须脱掉它，因为它已经限制了我们，它可能是旧的工作、旧的关系、旧的习惯。自我发展，也需要经历很多次这样的脱壳，这同样会给我们带来痛苦和迷茫。但这不是我们自我的问题，而恰恰是自我发展需要经历的道路。

转变的本质，不是外在的新旧更替，而是自我重构的过程。

脱离部落，去荒野寻找自我，最后以一个新的身份回来。





02 结束：与旧自我脱离

转折期的心理历程有特有的规律。美国作家威廉·布里奇斯在《转变》一书中写道，转变要经历三个阶段：结束——迷茫——重生。

为什么转变是从结束开始的？——因为自我发展需要空间。

对结束的误解：
	1. 人们很容易把结束当做是一种终结的形式，一种事物发展的最终结果。
	2. 人们容易把结束当做一种应该排除的意外，觉得那不是事物正常发展的轨道。
	3. 把结束等同于错误。

结束不是一种错误，而是我们顺应变化的一种形式。结束是以往这一段生活的终结，但不是生活本身的终结，它只是我们顺应变化的过程和必经之路。

结束中最重要的事——脱离

	1. 环境的脱离。离开你熟悉的环境和关系，你才会发现新的路。
	2. 身份的脱离。身份就是关于“你是谁”这个问题上，你和别人达成的共识。脱离的身份越是接近自我定义核心的身份，转变带来的痛苦就越强烈。
	3. 目标的脱离。人是根据目标来组织我们的生活的。目标界定了什么重要、什么不重要，什么该做、什么不该做，也界定了什么是成功、什么是失败。人脱离原来目标时，会有很大的失落，因为以目标为标准来思考，脱离目标就是我们失败了。


其实换一个角度，目标在组织我们生活的同时，也会让我们思维变得狭窄，让我们只看到和目标有关的部分。在写字楼里，有很多忙碌但不快乐的人，生活和工作失去平衡的人。他们经常鼓励自己，熬一熬就好了，升职加薪就好了，这样的目标体系啊下，不快乐的现在，成了为未来而做的牺牲品。

结束，也给了我们一个机会，重新思考生活中什么是重要的，什么其实没那么重要，重新寻找一个更有价值，让我们更快乐的目标。

03 迷茫 

人的意义感有两个重要来源，一个是目标感，另一个是人际关系。

人通过有价值的目标，把自己的现在和未来连起来，如果没有目标，人的生活和工作会变成一种凑活的状态，他们就会变得空虚，缺少力量。

人的意义感是在关系中编织出来的。如果你在生活中很孤独，缺少亲密关系，你不知道谁真的在乎你，你同样会觉得空虚和无聊。

我们的目标结束、关系结束，其实就会影响你的意义感来源，进入意义感真空，不知自己身在何处，会去哪里，这就是为什么迷茫的原因。

迷茫时期三种心理：

	1. 试图回到过去。我们虽然知道行动上我们回不去了，但在心理上，我们会以各种方式和过去建立联系，比如拿现在生活和过去的比较。
	2. 尽快结束迷茫，到达未来。转变有它的节奏，我们没法越过冬天经历春天，如果急着让自己更积极、更充满自信，反而会打破转变的节奏。“在病中，常常有许多天，医生除了等候以外，什么事也不能做，这就是你现在首先必须要做的事”。
	3. 精神生活开始变得敏感起来。比如，能够静下心来看以前看不下去的文学作品，听一些歌热泪盈眶。从原来的意义中脱离出来，在新旧交替阶段，跟一个更深更广的精神领域建立起联系，从更本质的视角审视自己的生活。旧的意义，被慢慢清理掉，新的意义，正慢慢长出来。这种心理就是转变的心理。

佛教说，有无相生，迷茫期的无，生出新意义的有。

里尔克《给一个青年诗人的十封信》说，病是有机体让自己康复的方式，就像迷茫是让我们重新清晰的方式。这就是转变期的意义。

04 重生

褚时健，75岁保外就医，重新来过。84岁时，褚橙全国热销。

心理弹性，在灾难和挫折中复原的能力，核心就是容纳变化的能力。

重生的两个要素：
	1. 偶然和意外。重生依靠的是生命本身的创造力，你不会在结束和迷茫时期知道这个答案，但是当它出现时，你能认得它。这种偶然和你以前生命中的重要经历和资源联系起来了，包含了某种必然。巴西经典寓言式小说《牧羊人和他的奇幻之旅》里有一句话“当你全心全意地做一件事，全世界都会来帮你。”，这句话虽然有些唯心，但很奇怪的是，很多人经历了迷茫之后，却是会有一些意外的机会到来。重生的过程就好像，你身上存在着很多自我，最主要的自我被限制了，另一个原先微不足道的自我发展起来了。
	2. 另起炉灶。你需要跟原先的目标分离干净。既不是想着避开原来的伤痛，也不是去想着弥补损失。有时候只有承认损失，才能真正放下，重新开始。陈海贤从浙大离职，信心念念一套房子，其实他辞职最大的风险，不是损失了这套房子，而是老想着把它挣回来，没有承认损失。放弃不必坚持容易，它同样也很需要勇气。

重生的本质是心理结构的重组过程。
结束——从原先环境、关系、目标中脱离
迷茫——跟更深更广的精神领域建立联系
重生——获得新目标、新认知、新的意义感

人就是在艰难的转变中，变得深刻而复杂的。


05 职业转变

每个人身上都可能存在很多的自我，而职业转变，就是选择一个可能的自我，让它和真实的世界发生互动。让这个可能的自我从一个念头逐渐成长为一个选项，让它在实践中变得清晰。

职业的转变过程，就是新旧自我的交替过程，这也是职业转变最难的地方。

其实根本没有所谓的“真实的自我”，所谓的“真实的自我”是在你寻找和选择的过程中，逐渐形成的。

如果转型成功了，回头来看，会有一种“一切理应如此”的感觉，但实际上，这些转变都知识心里的一个念头。比如陈海贤的辞职过程。

尝试的每一小步，都是对心理舒适区小小的突破。但如果没有这些尝试，可能的自我就不会发展。【潜力开发，其实就是让可能的自我显现出来】

在转变过程中，我们会进入一个自我过渡期，既有放弃旧自我带来的损失，也会有不确定性的恐惧。这两种因素造成了我们的拖延。直到某个契机时，不得不选择，这时真正的转变才来临。如果不去选择，不去响应内心召唤，在你厌倦却不得不去上班时，在你半夜醒来时，在你偶尔失神时，你就会意识到，自己没有接受人生的挑战，而失去了一些重要的东西。

转型期完成，就是找到一种踏实的感觉，这种感觉里有我们真正想要成为的自己。

【我现在就处在职业转变期，要做的就是疯狂输入、输出、应用】


06 关系转变

该怎么接受关系的结束呢？

去承认损失、去哀悼、去迷茫、去失声痛哭，然后固执地相信，会有新的未来从生活中长起来，哪怕我们现在看不到这个未来。

自我以关系为载体，所以当结束一段关系时，我们不仅失去了关系中的Ta，也失去了关系中那个自我。这种失去不像从一块完整的饼里掰下一块那么简单，它会同时改变剩余的部分。当我们难受时，不是疯了，而是大脑在艰难地处理这段关系，从中整理出关于关系和自我的新认识。

拒绝结束的三种方式：
	1. 对挽回的想象。
	2. 把对方和关系理想化。这其实是大脑的把戏，它用这种方式督促你挽回这段关系，以避免结束和痛苦。但这也会让我们更痛苦。
	3. 让自己沉浸在悲伤的情绪中。宁可让自己悲伤，也不承担结束的痛苦，因为后一种痛苦，就要承认结束，承认我们失去了所爱之人，独自面对孤独，这要疼得多。
	
心理学家库伯勒·罗斯指出心理创伤的五个阶段：
	1. 否定。不相信事情发生。
	2. 愤怒。觉得自己被欺骗、被抛弃，指责对方。
	3. 讨价还价。期待对方也会改变。
	4. 抑郁。迷茫期。
	5. 重归平静。


07 两个选择依据


1.我们根据什么做选择？经济模型还是心理模型【工具理性还是价值理性？】
2.从自我创造的角度去思考选择


选择时成就自我的第一步，你是在用选择，把自己塑造成那个想成为的人。除非你是从自我发展的角度，否则你很难真正理解选择。

经济模型就是用经济学的模式思考怎么选择，把各种好处坏处做加减，然后进行比较。

它的弊端：
	1. 谁也没有足够的信息来预测未来
	2. 在这种模型里，你其实并没有做什么选择，你只是在做信息的计算和加工

心理选择模型，我们不再问将来可能的结果是什么，而是回到现在的选择本身，选择哪一个可能的自我。“成为什么样的人”比“我能挣多少钱”更加困难，因为前者意味着更多的责任，为自我负责的勇气。这回让人很焦虑。

选择的第二个原则：从自我创造的角度去思考选择，而不是从环境的可能性去思考选择。

E.g.博士生要退学吗？

应该把这种犹豫当做自我探索的契机，他应该想，并不是当前的各种利弊，而是我想要成为一个什么样的人，让他做出选择。

外在环境是决定选择的重要因素。当我们把选择的权力交给环境时，我们就没有在做心理的选择，这时我们就容易被无力感淹没。环境只是条件，不是依据。

自我的形成不是一个发现的过程，而是一个创造的过程。

08 创伤后成长

创伤打碎了人们关于世界的天真假设，就像房子坍塌了，人可以在破碎的废墟中重新建立起更加稳固的房子。

《自控力》作者凯莉·麦格尼格尔研究发现，你怎么看待生活中遇到的挫折，有时候比你遇到的挫折本身更重要。压力大并不会提高人死亡的风险，“压力有害健康”这种观点更加有害。

《破碎的世界假设》作者，社会心理学家罗尼·吉诺夫·布尔曼提出了一个概念叫做“假设世界”，他说，我们每个人在日常生活中，都在维护一些天真的假设。成人世界主要有3个隐秘的“天真的假设”：
	1. 认为世界是友善的
	2. 认为世界是公平的
	3. 认为这个世界是安全可控可预测的
这3个假设推导出这样的观点：只要我做一个好人，保持健康的生活习惯，努力工作，我们就能平安幸福地度过一生。这不是一个人的假设，整个社会都在维护这几个假设。否则，我们不会努力工作，不会忍受一点点不愉悦。

很多人生活在大城市，大城市的繁华很容易让我们忽略人生必然会经历的一些苦难。不是说我们看不到苦难，而是我们看到的苦难都是包装过的，就像《楚门的世界》里那样。我们会有一个错觉，认为这些苦难离我们很远，直到苦难有一天真的来临时，支撑我们生活的基本假设坍塌了，我们一下子陷入不知所措当中。

E.g.北京暴雨，天桥底下一辆车被水淹了，司机在车里打不开车门，被淹死了。——这件事引起的震动，就是他打破了大城市安全有序的假设。

失恋、离婚、失业、重病也是普通人会遇到的事。遇到这些事之前，我们会有错觉：这些苦难离我们很远。但一旦陷入这样的苦难，我们就会陷入另一种错觉：我们会夸大困难的危害和影响，低谷自己的适应能力，会觉得自己再也没有办法复原了。

人是会适应灾难的，在基本信念坍塌之后，艰难的重建就开始了。

就像盲人的触觉会变得灵敏，没有手的人脚趾会变得灵活，我们的认知结构会在创伤后进行重组。

E.g.经历过512的女生，大学毕业后专注冥想事业，探索生命意义。

在暴风雨中受伤的树，身形可能被永久地改变了，也留下了很多伤疤，但是它还会在伤疤里长出新的枝条，我们也会从创伤中创造出新的意义。

09 人生故事

人随时随地都在编制自己的故事，我们对生活的意义感，来源于我们对自己人生故事的理解。

丹·麦克亚当斯提出，人格可以分为三个层次：
	1. 基本特质。也就我我们通常理解的内向外向这个层次的人格。心理测试、星座理论都是基本特质这个层次。
	2. 个性化的应对方式。比如我们的目标、防御机制、信仰，我们在人生某个阶段的生活任务和中心。这时我们为了扮演好我们现在的角色，完成我们现阶段的任务所发展出来的人格。
	3. 人生故事，人格最核心的层次。我们不停地把过去、现在和未来重新编制成一个前后连贯、生动的个人故事。人生故事是我们把自己和别人区分开来最重要的特质。

从故事的角度，我们可以理解逆境和创伤，怎么改变我们。

——它们改变了我们的人生故事。

麦克亚当斯说，面对挫折，我们常会有两类故事：
	1. 挽救式故事。我们虽然有一个糟糕的开头，但随着我们不断努力和探索，会不断走出这些困境，过去的纠结可能豁然开朗，即使痛苦无法彻底消除，我们也会积极地接受，去获得内心安宁。如果我们认为我们的人生故事是挽救式的故事，我们遇到困境时，就自动会预测，我们走出困境，从中学习到需要的人生智慧，这个故事会让你不断地行动。
	2. 污染式故事。我们生活一开始还不错，但现实把这种不错的生活打破了，我们遇到各种麻烦，这些麻烦像污染源一样，不断污染我们原先的生活。对此我们无能为力，一步错步步错，最终在悔恨中怀念过去。如果我们认定这种故事，我们会在顺境时担心好日子不长，会有不好的事情到来终结一切。遇到糟糕事情时，我们就会想，果然如此，我的命中注定就是倒霉的。这种焦虑和迷茫会成为“我很无能”的证明，我们就容易陷入悲观和沮丧。

Eg.一个“浙大病”的男生，考败来浙，大二被查出骨癌，决心扎根机器学习，用生命战胜癌症这个敌人。——这个故事不再是功败垂成的污染式故事，而是变成了一个人历尽艰辛，战胜自我的挽救式故事。




10 英雄之旅

人是通过编制自己的故事，来应对艰难的时刻，完成转变的。怎么来理解自己身上的故事？——用英雄故事。

从小到大，我们看的那些英雄故事，都是假的，但它们也是真的。故事本身是虚构的，但那些英雄转变的过程是真实的。

研究神话的学者坎贝尔，搜集了各地的英雄故事，他发现无论是非洲部落、亚洲寺庙，还是现代都市，大家讲的英雄故事，都有相似的内核——那就是转变。于是他写了一本书，叫《千面英雄》。

他提出英雄需要经历三个阶段：启程、启蒙和回归，这三个阶段，正对应了人生重要转折的心理历程。

1⃣️启程

英雄故事的最开始，你会听到一些召唤，在你工作或关系中感觉疲惫时，偶尔在心里升起关于改变的念头。这些召唤总是在你心里挥之不去，好像在提醒你该有的宿命一样。

慢慢的，你不再抗拒这个召唤，而是开始认真地考虑它，虽然这个召唤通常意味着巨大的变动、麻烦和危险。

终于，你克服了对变化的恐惧，决定顺应这些召唤，勇敢上路，你投入了这个召唤。

2⃣️启蒙

你从日常生活中离开，去到一个陌生世界中冒险，并获得成长的过程。你跨越了一个神秘的门槛，你以前所在的世界消失了，你面对的是一片充满未知、危险和希望的全新领域。

跨越这道门槛，意味着你走出了自己的心里舒适区。困难、挑战、痛苦、危险、未知和巨大的不确定性，纷纷到来。

你发现，你原来的思维模式和行为习惯在这个新的世界派不上用场了，你必须学习新的思维和习惯模式。

跨越门槛，也意味着你回不去了，你必须勇往直前，去寻找出路。

幸运的是，在这段旅程中，一般你都会找到一个特别的守护者。所有的英雄故事，《魔戒》、《哈利波特》或者漫威这样的屏幕英雄，主人公都会有一个指点或保佑他的守护者。

你的旅程也是。

这个守护者，可能是现实中的人，也可能只是你一个敬仰的榜样，一个神话里的人。他也许在情感上支持你，也许给你你不知道的知识和技能，也许了解你要走的旅程。

但是，你的旅程仍然是你自己的，没有人能帮你走。那些守护着能让你更理解自己身上发生的事，更理解你自己的使命是什么，而你，也需要建立起跟守护者的联系，能够感觉到他们的存在，才会在你的旅程中，走得更坚定。

积累了这些能量，你就要开始面对故事的反派，你命中注定的敌人——恶魔。很多英雄故事里，英雄并不是要战胜或者消灭这些恶魔，而是要转化他们。

坎贝尔说，最初你认为这些恶魔是在你外部的，与你作对的敌人。可是你慢慢发现，问题不在外面，而是来自你的内心。恶魔最终只是一股既不好，也不坏的力量，是我们自己的贪心、傲慢、恐惧和胆怯，是我们头脑中太多的应该思维，映射到它们身上，把他们变成了恶魔。

与恶魔的战斗，就是为了让我们看清楚自己的弱点，并让我们意识到，不是他们有问题，而是我们和他们的关系出现了问题。当我们意识到了这一点，恶魔就不是恶魔了，而是我们能够利用的能量。

在与恶魔的斗争中，我们战胜了自我，发展出新的自我，新的资源，学习了新的技能，新的思考方式，最终，我们收获了信心和智慧，不再是那个刚刚跨过门槛，慌慌张张的少年了。

这个过程可能很漫长也很艰难，可是这个过程中，我们收获的东西，是我们根本没法预料的。

在跟恶魔的斗争中，自我跃升到了一个新的层次。可以说，这时候的你，变成了一个全新的你。

3⃣️回归
英雄完成了他自己的使命，他回到了自己出发的地方，把他子旅程中学到的东西分享给那些等待出发的人。如果别人愿意，他也可以在别人的旅程中，变成一个新的守护者。

===============
听到召唤、投入召唤、跨越门槛、寻找守护者、面对和转化恶魔、发展内在自我、蜕变、带着礼物回家。

英雄故事是一个中介，告诉我们会经历什么样的转变，现在正处于什么阶段，最终会往哪个方向走。我们每个人都从这样的英雄故事里吸取力量，又用自己的独特旅程为这些英雄故事增加新的力量和素材。

英雄故事的本质，是我们每个人都会经历的自我转变和自我发现的旅程。只不过我们太把他们当做故事，没有听到这些故事想告诉我们的东西是什么了。

人不会为自己要走的路而后悔，只会为自己没有响应召唤而后悔。

路具体走向哪里，并不重要，没有什么路是一定的，重要的是，我们借着走这些路，修炼我们自己，发现我们自己。就像坎贝尔说的，所有这些英雄之旅，说到底，就是一个自我发现的旅程。


</pre>
</div>


</div>


<!--~~ Library modules ~~-->
<div id="libraryModules" style="display:none;">
<script data-tiddler-library="yes" data-tiddler-title="$:/library/sjcl.js" data-tiddler-type="application/javascript" type="text/javascript">"use strict";var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message};this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message};this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message};this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message};this.message=a}}};
sjcl.cipher.aes=function(a){this.s[0][0][0]||this.O();var b,c,d,e,f=this.s[0][4],g=this.s[1];b=a.length;var h=1;if(4!==b&&6!==b&&8!==b)throw new sjcl.exception.invalid("invalid aes key size");this.b=[d=a.slice(0),e=[]];for(a=b;a<4*b+28;a++){c=d[a-1];if(0===a%b||8===b&&4===a%b)c=f[c>>>24]<<24^f[c>>16&255]<<16^f[c>>8&255]<<8^f[c&255],0===a%b&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7));d[a]=d[a-b]^c}for(b=0;a;b++,a--)c=d[b&3?a:a-4],e[b]=4>=a||4>b?c:g[0][f[c>>>24]]^g[1][f[c>>16&255]]^g[2][f[c>>8&255]]^g[3][f[c&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(a){return t(this,a,0)},decrypt:function(a){return t(this,a,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var a=this.s[0],b=this.s[1],c=a[4],d=b[4],e,f,g,h=[],k=[],l,n,m,p;for(e=0;0x100>e;e++)k[(h[e]=e<<1^283*(e>>7))^e]=e;for(f=g=0;!c[f];f^=l||1,g=k[g]||1)for(m=g^g<<1^g<<2^g<<3^g<<4,m=m>>8^m&255^99,c[f]=m,d[m]=f,n=h[e=h[l=h[f]]],p=0x1010101*n^0x10001*e^0x101*l^0x1010100*f,n=0x101*h[m]^0x1010100*m,e=0;4>e;e++)a[e][f]=n=n<<24^n>>>8,b[e][m]=p=p<<24^p>>>8;for(e=
0;5>e;e++)a[e]=a[e].slice(0),b[e]=b[e].slice(0)}};
function t(a,b,c){if(4!==b.length)throw new sjcl.exception.invalid("invalid aes block size");var d=a.b[c],e=b[0]^d[0],f=b[c?3:1]^d[1],g=b[2]^d[2];b=b[c?1:3]^d[3];var h,k,l,n=d.length/4-2,m,p=4,r=[0,0,0,0];h=a.s[c];a=h[0];var q=h[1],v=h[2],w=h[3],x=h[4];for(m=0;m<n;m++)h=a[e>>>24]^q[f>>16&255]^v[g>>8&255]^w[b&255]^d[p],k=a[f>>>24]^q[g>>16&255]^v[b>>8&255]^w[e&255]^d[p+1],l=a[g>>>24]^q[b>>16&255]^v[e>>8&255]^w[f&255]^d[p+2],b=a[b>>>24]^q[e>>16&255]^v[f>>8&255]^w[g&255]^d[p+3],p+=4,e=h,f=k,g=l;for(m=
0;4>m;m++)r[c?3&-m:m]=x[e>>>24]<<24^x[f>>16&255]<<16^x[g>>8&255]<<8^x[b&255]^d[p++],h=e,e=f,f=g,g=b,b=h;return r}
sjcl.bitArray={bitSlice:function(a,b,c){a=sjcl.bitArray.$(a.slice(b/32),32-(b&31)).slice(1);return void 0===c?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return((b+c-1^b)&-32?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.$(b,d,c|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===
b?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;b=b&31;0<c&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1));return a},partial:function(a,b,c){return 32===a?b:(c?b|0:b<<32-a)+0x10000000000*a},getPartial:function(a){return Math.round(a/0x10000000000)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var c=0,d;for(d=0;d<a.length;d++)c|=a[d]^b[d];return 0===
c},$:function(a,b,c,d){var e;e=0;for(void 0===d&&(d=[]);32<=b;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;e=a.length?a[a.length-1]:0;a=sjcl.bitArray.getPartial(e);d.push(sjcl.bitArray.partial(b+a&31,32<b+a?c:d.pop(),1));return d},i:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]},byteswapM:function(a){var b,c;for(b=0;b<a.length;++b)c=a[b],a[b]=c>>>24|c>>>8&0xff00|(c&0xff00)<<8|c<<24;return a}};
sjcl.codec.utf8String={fromBits:function(a){var b="",c=sjcl.bitArray.bitLength(a),d,e;for(d=0;d<c/8;d++)0===(d&3)&&(e=a[d/4]),b+=String.fromCharCode(e>>>8>>>8>>>8),e<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,d=0;for(c=0;c<a.length;c++)d=d<<8|a.charCodeAt(c),3===(c&3)&&(b.push(d),d=0);c&3&&b.push(sjcl.bitArray.partial(8*(c&3),d));return b}};
sjcl.codec.hex={fromBits:function(a){var b="",c;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[],d;a=a.replace(/\s|0x/g,"");d=a.length;a=a+"00000000";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return sjcl.bitArray.clamp(c,4*d)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(a,b,c){var d=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f="",g=0,h=sjcl.codec.base32.B,k=0,l=sjcl.bitArray.bitLength(a);c&&(h=sjcl.codec.base32.X);for(c=0;f.length*d<l;)f+=h.charAt((k^a[c]>>>g)>>>e),g<d?(k=a[c]<<d-g,g+=e,c++):(k<<=d,g-=d);for(;f.length&7&&!b;)f+="=";return f},toBits:function(a,b){a=a.replace(/\s|=/g,"").toUpperCase();var c=sjcl.codec.base32.BITS,
d=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f=[],g,h=0,k=sjcl.codec.base32.B,l=0,n,m="base32";b&&(k=sjcl.codec.base32.X,m="base32hex");for(g=0;g<a.length;g++){n=k.indexOf(a.charAt(g));if(0>n){if(!b)try{return sjcl.codec.base32hex.toBits(a)}catch(p){}throw new sjcl.exception.invalid("this isn't "+m+"!");}h>e?(h-=e,f.push(l^n>>>h),l=n<<c-h):(h+=d,l^=n<<c-h)}h&56&&f.push(sjcl.bitArray.partial(h&56,l,1));return f}};
sjcl.codec.base32hex={fromBits:function(a,b){return sjcl.codec.base32.fromBits(a,b,1)},toBits:function(a){return sjcl.codec.base32.toBits(a,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var d="",e=0,f=sjcl.codec.base64.B,g=0,h=sjcl.bitArray.bitLength(a);c&&(f=f.substr(0,62)+"-_");for(c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;d.length&3&&!b;)d+="=";return d},toBits:function(a,b){a=a.replace(/\s|=/g,"");var c=[],d,e=0,f=sjcl.codec.base64.B,g=0,h;b&&(f=f.substr(0,62)+"-_");for(d=0;d<a.length;d++){h=f.indexOf(a.charAt(d));
if(0>h)throw new sjcl.exception.invalid("this isn't base64!");26<e?(e-=26,c.push(g^h>>>e),g=h<<32-e):(e+=6,g^=h<<32-e)}e&56&&c.push(sjcl.bitArray.partial(e&56,g,1));return c}};sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}};sjcl.hash.sha256=function(a){this.b[0]||this.O();a?(this.F=a.F.slice(0),this.A=a.A.slice(0),this.l=a.l):this.reset()};sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(a){"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b,c=this.A=sjcl.bitArray.concat(this.A,a);b=this.l;a=this.l=b+sjcl.bitArray.bitLength(a);if(0x1fffffffffffff<a)throw new sjcl.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var d=new Uint32Array(c),e=0;for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,d.subarray(16*e,
16*(e+1))),e+=1;c.splice(0,16*e)}else for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,c.splice(0,16));return this},finalize:function(){var a,b=this.A,c=this.F,b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this.l/0x100000000));for(b.push(this.l|0);b.length;)u(this,b.splice(0,16));this.reset();return c},Y:[],b:[],O:function(){function a(a){return 0x100000000*(a-Math.floor(a))|0}for(var b=0,c=2,d,e;64>b;c++){e=!0;for(d=2;d*d<=c;d++)if(0===c%d){e=
!1;break}e&&(8>b&&(this.Y[b]=a(Math.pow(c,.5))),this.b[b]=a(Math.pow(c,1/3)),b++)}}};
function u(a,b){var c,d,e,f=a.F,g=a.b,h=f[0],k=f[1],l=f[2],n=f[3],m=f[4],p=f[5],r=f[6],q=f[7];for(c=0;64>c;c++)16>c?d=b[c]:(d=b[c+1&15],e=b[c+14&15],d=b[c&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+b[c&15]+b[c+9&15]|0),d=d+q+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(r^m&(p^r))+g[c],q=r,r=p,p=m,m=n+d|0,n=l,l=k,k=h,h=d+(k&l^n&(k^l))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;f[0]=f[0]+h|0;f[1]=f[1]+k|0;f[2]=f[2]+l|0;f[3]=f[3]+n|0;f[4]=f[4]+m|0;f[5]=f[5]+p|0;f[6]=f[6]+r|0;f[7]=
f[7]+q|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(a){sjcl.mode.ccm.G.push(a)},unListenProgress:function(a){a=sjcl.mode.ccm.G.indexOf(a);-1<a&&sjcl.mode.ccm.G.splice(a,1)},fa:function(a){var b=sjcl.mode.ccm.G.slice(),c;for(c=0;c<b.length;c+=1)b[c](a)},encrypt:function(a,b,c,d,e){var f,g=b.slice(0),h=sjcl.bitArray,k=h.bitLength(c)/8,l=h.bitLength(g)/8;e=e||64;d=d||[];if(7>k)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(f=2;4>f&&l>>>8*f;f++);f<15-k&&(f=15-k);c=h.clamp(c,
8*(15-f));b=sjcl.mode.ccm.V(a,b,c,d,e,f);g=sjcl.mode.ccm.C(a,g,c,b,e,f);return h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,e){e=e||64;d=d||[];var f=sjcl.bitArray,g=f.bitLength(c)/8,h=f.bitLength(b),k=f.clamp(b,h-e),l=f.bitSlice(b,h-e),h=(h-e)/8;if(7>g)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(b=2;4>b&&h>>>8*b;b++);b<15-g&&(b=15-g);c=f.clamp(c,8*(15-b));k=sjcl.mode.ccm.C(a,k,c,l,e,b);a=sjcl.mode.ccm.V(a,k.data,c,d,e,b);if(!f.equal(k.tag,a))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return k.data},na:function(a,b,c,d,e,f){var g=[],h=sjcl.bitArray,k=h.i;d=[h.partial(8,(b.length?64:0)|d-2<<2|f-1)];d=h.concat(d,c);d[3]|=e;d=a.encrypt(d);if(b.length)for(c=h.bitLength(b)/8,65279>=c?g=[h.partial(16,c)]:0xffffffff>=c&&(g=h.concat([h.partial(16,65534)],[c])),g=h.concat(g,b),b=0;b<g.length;b+=4)d=a.encrypt(k(d,g.slice(b,b+4).concat([0,0,0])));return d},V:function(a,b,c,d,e,f){var g=sjcl.bitArray,h=g.i;e/=8;if(e%2||4>e||16<e)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(0xffffffff<d.length||0xffffffff<b.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");c=sjcl.mode.ccm.na(a,d,c,e,g.bitLength(b)/8,f);for(d=0;d<b.length;d+=4)c=a.encrypt(h(c,b.slice(d,d+4).concat([0,0,0])));return g.clamp(c,8*e)},C:function(a,b,c,d,e,f){var g,h=sjcl.bitArray;g=h.i;var k=b.length,l=h.bitLength(b),n=k/50,m=n;c=h.concat([h.partial(8,f-1)],c).concat([0,0,0]).slice(0,4);d=h.bitSlice(g(d,a.encrypt(c)),0,e);if(!k)return{tag:d,data:[]};for(g=0;g<k;g+=4)g>n&&(sjcl.mode.ccm.fa(g/
k),n+=m),c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,l)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var g,h=sjcl.mode.ocb2.S,k=sjcl.bitArray,l=k.i,n=[0,0,0,0];c=h(a.encrypt(c));var m,p=[];d=d||[];e=e||64;for(g=0;g+4<b.length;g+=4)m=b.slice(g,g+4),n=l(n,m),p=p.concat(l(c,a.encrypt(l(c,m)))),c=h(c);m=b.slice(g);b=k.bitLength(m);g=a.encrypt(l(c,[0,0,0,b]));m=k.clamp(l(m.concat([0,0,0]),g),b);n=l(n,l(m.concat([0,0,0]),g));n=a.encrypt(l(n,l(c,h(c))));
d.length&&(n=l(n,f?d:sjcl.mode.ocb2.pmac(a,d)));return p.concat(k.concat(m,k.clamp(n,e)))},decrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid("ocb iv must be 128 bits");e=e||64;var g=sjcl.mode.ocb2.S,h=sjcl.bitArray,k=h.i,l=[0,0,0,0],n=g(a.encrypt(c)),m,p,r=sjcl.bitArray.bitLength(b)-e,q=[];d=d||[];for(c=0;c+4<r/32;c+=4)m=k(n,a.decrypt(k(n,b.slice(c,c+4)))),l=k(l,m),q=q.concat(m),n=g(n);p=r-32*c;m=a.encrypt(k(n,[0,0,0,p]));m=k(m,h.clamp(b.slice(c),p).concat([0,
0,0]));l=k(l,m);l=a.encrypt(k(l,k(n,g(n))));d.length&&(l=k(l,f?d:sjcl.mode.ocb2.pmac(a,d)));if(!h.equal(h.clamp(l,e),h.bitSlice(b,r)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return q.concat(h.clamp(m,p))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.S,e=sjcl.bitArray,f=e.i,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));c=b.slice(c);128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0]));g=f(g,c);
return a.encrypt(f(d(f(h,d(h))),g))},S:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(a,b,c,d,e){var f=b.slice(0);b=sjcl.bitArray;d=d||[];a=sjcl.mode.gcm.C(!0,a,f,d,c,e||128);return b.concat(a.data,a.tag)},decrypt:function(a,b,c,d,e){var f=b.slice(0),g=sjcl.bitArray,h=g.bitLength(f);e=e||128;d=d||[];e<=h?(b=g.bitSlice(f,h-e),f=g.bitSlice(f,0,h-e)):(b=f,f=[]);a=sjcl.mode.gcm.C(!1,a,f,d,c,e);if(!g.equal(a.tag,b))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return a.data},ka:function(a,b){var c,d,e,f,g,h=sjcl.bitArray.i;e=[0,0,
0,0];f=b.slice(0);for(c=0;128>c;c++){(d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f));g=0!==(f[3]&1);for(d=3;0<d;d--)f[d]=f[d]>>>1|(f[d-1]&1)<<31;f[0]>>>=1;g&&(f[0]^=-0x1f000000)}return e},j:function(a,b,c){var d,e=c.length;b=b.slice(0);for(d=0;d<e;d+=4)b[0]^=0xffffffff&c[d],b[1]^=0xffffffff&c[d+1],b[2]^=0xffffffff&c[d+2],b[3]^=0xffffffff&c[d+3],b=sjcl.mode.gcm.ka(b,a);return b},C:function(a,b,c,d,e,f){var g,h,k,l,n,m,p,r,q=sjcl.bitArray;m=c.length;p=q.bitLength(c);r=q.bitLength(d);h=q.bitLength(e);
g=b.encrypt([0,0,0,0]);96===h?(e=e.slice(0),e=q.concat(e,[1])):(e=sjcl.mode.gcm.j(g,[0,0,0,0],e),e=sjcl.mode.gcm.j(g,e,[0,0,Math.floor(h/0x100000000),h&0xffffffff]));h=sjcl.mode.gcm.j(g,[0,0,0,0],d);n=e.slice(0);d=h.slice(0);a||(d=sjcl.mode.gcm.j(g,h,c));for(l=0;l<m;l+=4)n[3]++,k=b.encrypt(n),c[l]^=k[0],c[l+1]^=k[1],c[l+2]^=k[2],c[l+3]^=k[3];c=q.clamp(c,p);a&&(d=sjcl.mode.gcm.j(g,h,c));a=[Math.floor(r/0x100000000),r&0xffffffff,Math.floor(p/0x100000000),p&0xffffffff];d=sjcl.mode.gcm.j(g,d,a);k=b.encrypt(e);
d[0]^=k[0];d[1]^=k[1];d[2]^=k[2];d[3]^=k[3];return{tag:q.bitSlice(d,0,f),data:c}}};sjcl.misc.hmac=function(a,b){this.W=b=b||sjcl.hash.sha256;var c=[[],[]],d,e=b.prototype.blockSize/32;this.w=[new b,new b];a.length>e&&(a=b.hash(a));for(d=0;d<e;d++)c[0][d]=a[d]^909522486,c[1][d]=a[d]^1549556828;this.w[0].update(c[0]);this.w[1].update(c[1]);this.R=new b(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(a);return this.digest(a)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(a){this.aa=!0;this.R.update(a)};sjcl.misc.hmac.prototype.digest=function(){var a=this.R.finalize(),a=(new this.W(this.w[1])).update(a).finalize();this.reset();return a};
sjcl.misc.pbkdf2=function(a,b,c,d,e){c=c||1E4;if(0>d||0>c)throw new sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));e=e||sjcl.misc.hmac;a=new e(a);var f,g,h,k,l=[],n=sjcl.bitArray;for(k=1;32*l.length<(d||1);k++){e=f=a.encrypt(n.concat(b,[k]));for(g=1;g<c;g++)for(f=a.encrypt(f),h=0;h<f.length;h++)e[h]^=f[h];l=l.concat(e)}d&&(l=n.clamp(l,d));return l};
sjcl.prng=function(a){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=a;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=0x10000;this.T=[0,48,64,96,128,192,0x100,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(a,b){var c=[],d;d=this.isReady(b);var e;if(d===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(d&this.J){d=!(d&this.I);e=[];var f=0,g;this.Z=e[0]=(new Date).valueOf()+this.da;for(g=0;16>g;g++)e.push(0x100000000*Math.random()|0);for(g=0;g<this.c.length&&(e=e.concat(this.c[g].finalize()),f+=this.m[g],this.m[g]=0,d||!(this.P&1<<g));g++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=f;f>this.o&&(this.o=
f);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.L=new sjcl.cipher.aes(this.b);for(d=0;4>d&&(this.h[d]=this.h[d]+1|0,!this.h[d]);d++);}for(d=0;d<a;d+=4)0===(d+1)%this.ca&&y(this),e=z(this),c.push(e[0],e[1],e[2],e[3]);y(this);return c.slice(0,a)},setDefaultParanoia:function(a,b){if(0===a&&"Setting paranoia=0 will ruin your security; use it only for testing"!==b)throw new sjcl.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=a},addEntropy:function(a,
b,c){c=c||"user";var d,e,f=(new Date).valueOf(),g=this.H[c],h=this.isReady(),k=0;d=this.U[c];void 0===d&&(d=this.U[c]=this.ha++);void 0===g&&(g=this.H[c]=0);this.H[c]=(this.H[c]+1)%this.c.length;switch(typeof a){case "number":void 0===b&&(b=1);this.c[g].update([d,this.N++,1,b,f,1,a|0]);break;case "object":c=Object.prototype.toString.call(a);if("[object Uint32Array]"===c){e=[];for(c=0;c<a.length;c++)e.push(a[c]);a=e}else for("[object Array]"!==c&&(k=1),c=0;c<a.length&&!k;c++)"number"!==typeof a[c]&&
(k=1);if(!k){if(void 0===b)for(c=b=0;c<a.length;c++)for(e=a[c];0<e;)b++,e=e>>>1;this.c[g].update([d,this.N++,2,b,f,a.length].concat(a))}break;case "string":void 0===b&&(b=a.length);this.c[g].update([d,this.N++,3,b,f,a.length]);this.c[g].update(a);break;default:k=1}if(k)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[g]+=b;this.f+=b;h===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},
isReady:function(a){a=this.T[void 0!==a?a:this.M];return this.o&&this.o>=a?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=a?this.J|this.u:this.u},getProgress:function(a){a=this.T[a?a:this.M];return this.o>=a?1:this.f>a?1:this.f/a},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",
this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(a,b){this.K[a][this.ga++]=b},removeEventListener:function(a,b){var c,d,e=this.K[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},la:function(){C(this,1)},oa:function(a){var b,c;try{b=a.x||a.clientX||a.offsetX||0,c=a.y||a.clientY||a.offsetY||0}catch(d){c=b=0}0!=b&&0!=c&&this.addEntropy([b,c],2,"mouse");C(this,0)},qa:function(a){a=
a.touches[0]||a.changedTouches[0];this.addEntropy([a.pageX||a.clientX,a.pageY||a.clientY],1,"touch");C(this,0)},ma:function(){C(this,2)},ea:function(a){a=a.accelerationIncludingGravity.x||a.accelerationIncludingGravity.y||a.accelerationIncludingGravity.z;if(window.orientation){var b=window.orientation;"number"===typeof b&&this.addEntropy(b,1,"accelerometer")}a&&this.addEntropy(a,2,"accelerometer");C(this,0)}};
function A(a,b){var c,d=sjcl.random.K[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function C(a,b){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?a.addEntropy(window.performance.now(),b,"loadtime"):a.addEntropy((new Date).valueOf(),b,"loadtime")}function y(a){a.b=z(a).concat(z(a));a.L=new sjcl.cipher.aes(a.b)}function z(a){for(var b=0;4>b&&(a.h[b]=a.h[b]+1|0,!a.h[b]);b++);return a.L.encrypt(a.h)}
function B(a,b){return function(){b.apply(a,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(a){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(a){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(a))}
sjcl.json={defaults:{v:1,iter:1E4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json,f=e.g({iv:sjcl.random.randomWords(4,0)},e.defaults),g;e.g(f,c);c=f.adata;"string"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));"string"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));if(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||"string"===typeof a&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&0x100!==f.ks||2>f.iv.length||
4<f.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,f),a=g.key.slice(0,f.ks/32),f.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.publicKey&&(g=a.kem(),f.kemtag=g.tag,a=g.key.slice(0,f.ks/32));"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));"string"===typeof c&&(f.adata=c=sjcl.codec.utf8String.toBits(c));g=new sjcl.cipher[f.cipher](a);e.g(d,f);d.key=a;f.ct="ccm"===f.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
b instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(g,b,f.iv,c,f.ts):sjcl.mode[f.mode].encrypt(g,b,f.iv,c,f.ts);return f},encrypt:function(a,b,c,d){var e=sjcl.json,f=e.ja.apply(e,arguments);return e.encode(f)},ia:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json;b=e.g(e.g(e.g({},e.defaults),b),c,!0);var f,g;f=b.adata;"string"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));"string"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));if(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||"string"===
typeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&0x100!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,b),a=g.key.slice(0,b.ks/32),b.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.secretKey&&(a=a.unkem(sjcl.codec.base64.toBits(b.kemtag)).slice(0,b.ks/32));"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));g=new sjcl.cipher[b.cipher](a);f="ccm"===
b.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&b.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(g,b.ct,b.iv,b.tag,f,b.ts):sjcl.mode[b.mode].decrypt(g,b.ct,b.iv,f,b.ts);e.g(d,b);d.key=a;return 1===c.raw?f:sjcl.codec.utf8String.fromBits(f)},decrypt:function(a,b,c,d){var e=sjcl.json;return e.ia(a,e.decode(b),c,d)},encode:function(a){var b,c="{",d="";for(b in a)if(a.hasOwnProperty(b)){if(!b.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");c+=d+'"'+
b+'":';d=",";switch(typeof a[b]){case "number":case "boolean":c+=a[b];break;case "string":c+='"'+escape(a[b])+'"';break;case "object":c+='"'+sjcl.codec.base64.fromBits(a[b],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return c+"}"},decode:function(a){a=a.replace(/\s/g,"");if(!a.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");a=a.replace(/^\{|\}$/g,"").split(/,/);var b={},c,d;for(c=0;c<a.length;c++){if(!(d=a[c].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=d[3]?b[d[2]]=parseInt(d[3],10):null!=d[4]?b[d[2]]=d[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(d[4]):unescape(d[4]):null!=d[5]&&(b[d[2]]="true"===d[5])}return b},g:function(a,b,c){void 0===a&&(a={});if(void 0===b)return a;for(var d in b)if(b.hasOwnProperty(d)){if(c&&void 0!==a[d]&&a[d]!==b[d])throw new sjcl.exception.invalid("required parameter overridden");a[d]=b[d]}return a},sa:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},ra:function(a,
b){var c={},d;for(d=0;d<b.length;d++)void 0!==a[b[d]]&&(c[b[d]]=a[b[d]]);return c}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(a,b){var c=sjcl.misc.pa,d;b=b||{};d=b.iter||1E3;c=c[a]=c[a]||{};d=c[d]=c[d]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)};c=void 0===b.salt?d.firstSalt:b.salt;d[c]=d[c]||sjcl.misc.pbkdf2(a,c,b.iter);return{key:d[c].slice(0),salt:c.slice(0)}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});
</script>
</div>
<!--~~ Boot kernel prologue ~~-->
<div id="bootKernelPrefix" style="display:none;">
<script data-tiddler-title="$:/boot/bootprefix.js" data-tiddler-type="application/javascript" type="text/javascript">/*\
title: $:/boot/bootprefix.js
type: application/javascript

This file sets up the globals that need to be available when JavaScript modules are executed in the browser. The overall sequence is:

# BootPrefix.js
# <module definitions>
# Boot.js

See Boot.js for further details of the boot process.

\*/

var _bootprefix = (function($tw) {

"use strict";

$tw = $tw || Object.create(null);
$tw.boot = $tw.boot || Object.create(null);

// Detect platforms
if(!("browser" in $tw)) {
	$tw.browser = typeof(window) !== "undefined" ? {} : null;
}
if(!("node" in $tw)) {
	$tw.node = typeof(process) === "object" ? {} : null;
}
if(!("nodeWebKit" in $tw)) {
	$tw.nodeWebKit = $tw.node && global.window && global.window.nwDispatcher ? {} : null;
}

// Set default boot tasks
$tw.boot.tasks = {
	trapErrors: !!($tw.browser && !$tw.node),
	readBrowserTiddlers: !!($tw.browser && !$tw.node)
};

/*
Information about each module is kept in an object with these members:
	moduleType: type of module
	definition: object, function or string defining the module; see below
	exports: exports of the module, filled in after execution

The `definition` can be of several types:

* An object can be used to directly specify the exports of the module
* A function with the arguments `module,require,exports` that returns `exports`
* A string function body with the same arguments

Each moduleInfo object is stored in two hashmaps: $tw.modules.titles and $tw.modules.types. The first is indexed by title and the second is indexed by type and then title
*/
$tw.modules = {
	titles: {}, // hashmap by module name of moduleInfo
	types: {} // hashmap by module type and then name of moduleInfo
};

/*
Define a JavaScript tiddler module for later execution
	moduleName: name of module being defined
	moduleType: type of module
	definition: module definition; see discussion above
*/
$tw.modules.define = function(moduleName,moduleType,definition) {
	// Create the moduleInfo
	var moduleInfo = {
		moduleType: moduleType,
		definition: definition,
		exports: undefined
	};
	// If the definition is already an object we can use it as the exports
	if(typeof moduleInfo.definition === "object") {
		moduleInfo.exports = definition;
	}
	// Store the module in the titles hashmap
	if(Object.prototype.hasOwnProperty.call($tw.modules.titles,moduleName)) {
		console.log("Warning: Redefined module - " + moduleName);
	}
	$tw.modules.titles[moduleName] = moduleInfo;
	// Store the module in the types hashmap
	if(!Object.prototype.hasOwnProperty.call($tw.modules.types,moduleType)) {
		$tw.modules.types[moduleType] = {};
	}
	if(Object.prototype.hasOwnProperty.call($tw.modules.types[moduleType],moduleName)) {
		console.log("Warning: Redefined module - " + moduleName);
	}
	$tw.modules.types[moduleType][moduleName] = moduleInfo;
};

/*
External JavaScript can populate this array before calling boot.js in order to preload tiddlers
*/
$tw.preloadTiddlers = $tw.preloadTiddlers || [];

/*
Convenience function for pushing a tiddler onto the preloading array
*/
$tw.preloadTiddler = function(fields) {
	$tw.preloadTiddlers.push(fields);
};

/*
Convenience function for pushing an array of tiddlers onto the preloading array
*/
$tw.preloadTiddlerArray = function(fieldsArray) {
	$tw.preloadTiddlers.push.apply($tw.preloadTiddlers,fieldsArray);
};

return $tw;

});

if(typeof(exports) === "undefined") {
	// Set up $tw global for the browser
	window.$tw = _bootprefix(window.$tw);
} else {
	// Export functionality as a module
	exports.bootprefix = _bootprefix;
}
</script>
</div>
<!--~~ Boot kernel ~~-->
<div id="bootKernel" style="display:none;">
<script data-tiddler-title="$:/boot/boot.js" data-tiddler-type="application/javascript" type="text/javascript">/*\
title: $:/boot/boot.js
type: application/javascript

The main boot kernel for TiddlyWiki. This single file creates a barebones TW environment that is just sufficient to bootstrap the modules containing the main logic of the application.

On the server this file is executed directly to boot TiddlyWiki. In the browser, this file is packed into a single HTML file.

\*/

var _boot = (function($tw) {

/*jslint node: true, browser: true */
/*global modules: false, $tw: false */
"use strict";

// Include bootprefix if we're not given module data
if(!$tw) {
	$tw = require("./bootprefix.js").bootprefix();
}

$tw.utils = $tw.utils || Object.create(null);

/////////////////////////// Standard node.js libraries

var fs, path, vm;
if($tw.node) {
	fs = require("fs");
	path = require("path");
	vm = require("vm");
}

/////////////////////////// Utility functions

$tw.boot.log = function(str) {
	$tw.boot.logMessages = $tw.boot.logMessages || [];
	$tw.boot.logMessages.push(str);
}

/*
Check if an object has a property
*/
$tw.utils.hop = function(object,property) {
	return object ? Object.prototype.hasOwnProperty.call(object,property) : false;
};

/*
Determine if a value is an array
*/
$tw.utils.isArray = function(value) {
	return Object.prototype.toString.call(value) == "[object Array]";
};

/*
Check if an array is equal by value and by reference.
*/
$tw.utils.isArrayEqual = function(array1,array2) {
	if(array1 === array2) {
		return true;
	}
	array1 = array1 || [];
	array2 = array2 || [];
	if(array1.length !== array2.length) {
		return false;
	}
	return array1.every(function(value,index) {
		return value === array2[index];
	});
};

/*
Push entries onto an array, removing them first if they already exist in the array
	array: array to modify (assumed to be free of duplicates)
	value: a single value to push or an array of values to push
*/
$tw.utils.pushTop = function(array,value) {
	var t,p;
	if($tw.utils.isArray(value)) {
		// Remove any array entries that are duplicated in the new values
		if(value.length !== 0) {
			if(array.length !== 0) {
				if(value.length < array.length) {
					for(t=0; t<value.length; t++) {
						p = array.indexOf(value[t]);
						if(p !== -1) {
							array.splice(p,1);
						}
					}
				} else {
					for(t=array.length-1; t>=0; t--) {
						p = value.indexOf(array[t]);
						if(p !== -1) {
							array.splice(t,1);
						}
					}
				}
			}
			// Push the values on top of the main array
			array.push.apply(array,value);
		}
	} else {
		p = array.indexOf(value);
		if(p !== -1) {
			array.splice(p,1);
		}
		array.push(value);
	}
	return array;
};

/*
Determine if a value is a date
*/
$tw.utils.isDate = function(value) {
	return Object.prototype.toString.call(value) === "[object Date]";
};

/*
Iterate through all the own properties of an object or array. Callback is invoked with (element,title,object)
*/
$tw.utils.each = function(object,callback) {
	var next,f,length;
	if(object) {
		if(Object.prototype.toString.call(object) == "[object Array]") {
			for (f=0, length=object.length; f<length; f++) {
				next = callback(object[f],f,object);
				if(next === false) {
					break;
				}
		    }
		} else {
			var keys = Object.keys(object);
			for (f=0, length=keys.length; f<length; f++) {
				var key = keys[f];
				next = callback(object[key],key,object);
				if(next === false) {
					break;
				}
			}
		}
	}
};

/*
Helper for making DOM elements
tag: tag name
options: see below
Options include:
namespace: defaults to http://www.w3.org/1999/xhtml
attributes: hashmap of attribute values
style: hashmap of styles
text: text to add as a child node
children: array of further child nodes
innerHTML: optional HTML for element
class: class name(s)
document: defaults to current document
eventListeners: array of event listeners (this option won't work until $tw.utils.addEventListeners() has been loaded)
*/
$tw.utils.domMaker = function(tag,options) {
	var doc = options.document || document;
	var element = doc.createElementNS(options.namespace || "http://www.w3.org/1999/xhtml",tag);
	if(options["class"]) {
		element.className = options["class"];
	}
	if(options.text) {
		element.appendChild(doc.createTextNode(options.text));
	}
	$tw.utils.each(options.children,function(child) {
		element.appendChild(child);
	});
	if(options.innerHTML) {
		element.innerHTML = options.innerHTML;
	}
	$tw.utils.each(options.attributes,function(attribute,name) {
		element.setAttribute(name,attribute);
	});
	$tw.utils.each(options.style,function(value,name) {
		element.style[name] = value;
	});
	if(options.eventListeners) {
		$tw.utils.addEventListeners(element,options.eventListeners);
	}
	return element;
};

/*
Display an error and exit
*/
$tw.utils.error = function(err) {
	// Prepare the error message
	var errHeading = ( $tw.language == undefined ? "Internal JavaScript Error" : $tw.language.getString("InternalJavaScriptError/Title") ),
		promptMsg = ( $tw.language == undefined ? "Well, this is embarrassing. It is recommended that you restart TiddlyWiki by refreshing your browser" : $tw.language.getString("InternalJavaScriptError/Hint") );
	// Log the error to the console
	console.error($tw.node ? "\x1b[1;31m" + err + "\x1b[0m" : err);
	if($tw.browser && !$tw.node) {
		// Display an error message to the user
		var dm = $tw.utils.domMaker,
			heading = dm("h1",{text: errHeading}),
			prompt = dm("div",{text: promptMsg, "class": "tc-error-prompt"}),
			message = dm("div",{text: err, "class":"tc-error-message"}),
			button = dm("div",{children: [dm("button",{text: ( $tw.language == undefined ? "close" : $tw.language.getString("Buttons/Close/Caption") )})], "class": "tc-error-prompt"}),
			form = dm("form",{children: [heading,prompt,message,button], "class": "tc-error-form"});
		document.body.insertBefore(form,document.body.firstChild);
		form.addEventListener("submit",function(event) {
			document.body.removeChild(form);
			event.preventDefault();
			return false;
		},true);
		return null;
	} else if(!$tw.browser) {
		// Exit if we're under node.js
		process.exit(1);
	}
};

/*
Use our custom error handler if we're in the browser
*/
if($tw.boot.tasks.trapErrors) {
	window.onerror = function(errorMsg,url,lineNumber) {
		$tw.utils.error(errorMsg);
		return false;
	};
}

/*
Extend an object with the properties from a list of source objects
*/
$tw.utils.extend = function(object /*, sourceObjectList */) {
	$tw.utils.each(Array.prototype.slice.call(arguments,1),function(source) {
		if(source) {
			for (var p in source) {
				object[p] = source[p];
			}
		}
	});
	return object;
};

/*
Fill in any null or undefined properties of an object with the properties from a list of source objects. Each property that is an object is called recursively
*/
$tw.utils.deepDefaults = function(object /*, sourceObjectList */) {
	$tw.utils.each(Array.prototype.slice.call(arguments,1),function(source) {
		if(source) {
			for (var p in source) {
				if(object[p] === null || object[p] === undefined) {
					object[p] = source[p];
				}
				if(typeof object[p] === "object" && typeof source[p] === "object") {
					$tw.utils.deepDefaults(object[p],source[p]);
				}
			}
		}
	});
	return object;
};

/*
Convert "&amp;" to &, "&nbsp;" to nbsp, "&lt;" to <, "&gt;" to > and "&quot;" to "
*/
$tw.utils.htmlDecode = function(s) {
	return s.toString().replace(/&lt;/mg,"<").replace(/&nbsp;/mg,"\xA0").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

/*
Get the browser location.hash. We don't use location.hash because of the way that Firefox auto-urldecodes it (see http://stackoverflow.com/questions/1703552/encoding-of-window-location-hash)
*/
$tw.utils.getLocationHash = function() {
	var href = window.location.href;
	var idx = href.indexOf('#');
	if(idx === -1) {
		return "#";
	} else if(idx < href.length-1 && href[idx+1] === '#') {
		// Special case: ignore location hash if it itself starts with a #
		return "#";
	} else {
		return href.substring(idx);
	}
};

/*
Pad a string to a given length with "0"s. Length defaults to 2
*/
$tw.utils.pad = function(value,length) {
	length = length || 2;
	var s = value.toString();
	if(s.length < length) {
		s = "000000000000000000000000000".substr(0,length - s.length) + s;
	}
	return s;
};

// Convert a date into UTC YYYYMMDDHHMMSSmmm format
$tw.utils.stringifyDate = function(value) {
	return value.getUTCFullYear() +
			$tw.utils.pad(value.getUTCMonth() + 1) +
			$tw.utils.pad(value.getUTCDate()) +
			$tw.utils.pad(value.getUTCHours()) +
			$tw.utils.pad(value.getUTCMinutes()) +
			$tw.utils.pad(value.getUTCSeconds()) +
			$tw.utils.pad(value.getUTCMilliseconds(),3);
};

// Parse a date from a UTC YYYYMMDDHHMMSSmmm format string
$tw.utils.parseDate = function(value) {
	if(typeof value === "string") {
		var negative = 1;
		if(value.charAt(0) === "-") {
			negative = -1;
			value = value.substr(1);
		}
		var year = parseInt(value.substr(0,4),10) * negative,
			d = new Date(Date.UTC(year,
				parseInt(value.substr(4,2),10)-1,
				parseInt(value.substr(6,2),10),
				parseInt(value.substr(8,2)||"00",10),
				parseInt(value.substr(10,2)||"00",10),
				parseInt(value.substr(12,2)||"00",10),
				parseInt(value.substr(14,3)||"000",10)));
		  d.setUTCFullYear(year); // See https://stackoverflow.com/a/5870822
		  return d;
	} else if($tw.utils.isDate(value)) {
		return value;
	} else {
		return null;
	}
};

// Stringify an array of tiddler titles into a list string
$tw.utils.stringifyList = function(value) {
	if($tw.utils.isArray(value)) {
		var result = new Array(value.length);
		for(var t=0, l=value.length; t<l; t++) {
			var entry = value[t] || "";
			if(entry.indexOf(" ") !== -1) {
				result[t] = "[[" + entry + "]]";
			} else {
				result[t] = entry;
			}
		}
		return result.join(" ");
	} else {
		return value || "";
	}
};

// Parse a string array from a bracketted list. For example "OneTiddler [[Another Tiddler]] LastOne"
$tw.utils.parseStringArray = function(value, allowDuplicate) {
	if(typeof value === "string") {
		var memberRegExp = /(?:^|[^\S\xA0])(?:\[\[(.*?)\]\])(?=[^\S\xA0]|$)|([\S\xA0]+)/mg,
			results = [], names = {},
			match;
		do {
			match = memberRegExp.exec(value);
			if(match) {
				var item = match[1] || match[2];
				if(item !== undefined && (!$tw.utils.hop(names,item) || allowDuplicate)) {
					results.push(item);
					names[item] = true;
				}
			}
		} while(match);
		return results;
	} else if($tw.utils.isArray(value)) {
		return value;
	} else {
		return null;
	}
};

// Parse a block of name:value fields. The `fields` object is used as the basis for the return value
$tw.utils.parseFields = function(text,fields) {
	fields = fields || Object.create(null);
	text.split(/\r?\n/mg).forEach(function(line) {
		if(line.charAt(0) !== "#") {
			var p = line.indexOf(":");
			if(p !== -1) {
				var field = line.substr(0, p).trim(),
					value = line.substr(p+1).trim();
				if(field) {
					fields[field] = value;
				}
			}
		}
	});
	return fields;
};

/*
Resolves a source filepath delimited with `/` relative to a specified absolute root filepath.
In relative paths, the special folder name `..` refers to immediate parent directory, and the
name `.` refers to the current directory
*/
$tw.utils.resolvePath = function(sourcepath,rootpath) {
	// If the source path starts with ./ or ../ then it is relative to the root
	if(sourcepath.substr(0,2) === "./" || sourcepath.substr(0,3) === "../" ) {
		var src = sourcepath.split("/"),
			root = rootpath.split("/");
		// Remove the filename part of the root
		root.splice(root.length-1,1);
		// Process the source path bit by bit onto the end of the root path
		while(src.length > 0) {
			var c = src.shift();
			if(c === "..") { // Slice off the last root entry for a double dot
				if(root.length > 0) {
					root.splice(root.length-1,1);
				}
			} else if(c !== ".") { // Ignore dots
				root.push(c); // Copy other elements across
			}
		}
		return root.join("/");
	} else {
		// If it isn't relative, just return the path
		if(rootpath) {
			var root = rootpath.split("/");
			// Remove the filename part of the root
			root.splice(root.length - 1, 1);
			return root.join("/") + "/" + sourcepath;
		} else {
			return sourcepath;
		}
	}
};

/*
Parse a semantic version string into its constituent parts -- see https://semver.org
*/
$tw.utils.parseVersion = function(version) {
	var match = /^v?((\d+)\.(\d+)\.(\d+))(?:-([\dA-Za-z\-]+(?:\.[\dA-Za-z\-]+)*))?(?:\+([\dA-Za-z\-]+(?:\.[\dA-Za-z\-]+)*))?$/.exec(version);
	if(match) {
		return {
			version: match[1],
			major: parseInt(match[2],10),
			minor: parseInt(match[3],10),
			patch: parseInt(match[4],10),
			prerelease: match[5],
			build: match[6]
		};
	} else {
		return null;
	}
};

/*
Returns +1 if the version string A is greater than the version string B, 0 if they are the same, and +1 if B is greater than A.
Missing or malformed version strings are parsed as 0.0.0
*/
$tw.utils.compareVersions = function(versionStringA,versionStringB) {
	var defaultVersion = {
			major: 0,
			minor: 0,
			patch: 0
		},
		versionA = $tw.utils.parseVersion(versionStringA) || defaultVersion,
		versionB = $tw.utils.parseVersion(versionStringB) || defaultVersion,
		diff = [
			versionA.major - versionB.major,
			versionA.minor - versionB.minor,
			versionA.patch - versionB.patch
		];
	if((diff[0] > 0) || (diff[0] === 0 && diff[1] > 0) || (diff[0] === 0 & diff[1] === 0 & diff[2] > 0)) {
		return +1;
	} else if((diff[0] < 0) || (diff[0] === 0 && diff[1] < 0) || (diff[0] === 0 & diff[1] === 0 & diff[2] < 0)) {
		return -1;
	} else {
		return 0;
	}
};

/*
Returns true if the version string A is greater than the version string B. Returns true if the versions are the same
*/
$tw.utils.checkVersions = function(versionStringA,versionStringB) {
	return $tw.utils.compareVersions(versionStringA,versionStringB) !== -1;
};

/*
Register file type information
options: {flags: flags,deserializerType: deserializerType}
	flags:"image" for image types
	deserializerType: defaults to type if not specified
*/
$tw.utils.registerFileType = function(type,encoding,extension,options) {
	options = options || {};
	if($tw.utils.isArray(extension)) {
		$tw.utils.each(extension,function(extension) {
			$tw.config.fileExtensionInfo[extension] = {type: type};
		});
		extension = extension[0];
	} else {
		$tw.config.fileExtensionInfo[extension] = {type: type};
	}
	$tw.config.contentTypeInfo[type] = {encoding: encoding, extension: extension, flags: options.flags || [], deserializerType: options.deserializerType || type};
};

/*
Given an extension, always access the $tw.config.fileExtensionInfo
using a lowercase extension only.
*/
$tw.utils.getFileExtensionInfo = function(ext) {
	return ext ? $tw.config.fileExtensionInfo[ext.toLowerCase()] : null;
}

/*
Given an extension, get the correct encoding for that file.
defaults to utf8
*/
$tw.utils.getTypeEncoding = function(ext) {
	var extensionInfo = $tw.utils.getFileExtensionInfo(ext),
		type = extensionInfo ? extensionInfo.type : null,
		typeInfo = type ? $tw.config.contentTypeInfo[type] : null;
	return typeInfo ? typeInfo.encoding : "utf8";
};

/*
Run code globally with specified context variables in scope
*/
$tw.utils.evalGlobal = function(code,context,filename) {
	var contextCopy = $tw.utils.extend(Object.create(null),context);
	// Get the context variables as a pair of arrays of names and values
	var contextNames = [], contextValues = [];
	$tw.utils.each(contextCopy,function(value,name) {
		contextNames.push(name);
		contextValues.push(value);
	});
	// Add the code prologue and epilogue
	code = "(function(" + contextNames.join(",") + ") {(function(){\n" + code + "\n;})();\nreturn exports;\n})\n";
	// Compile the code into a function
	var fn;
	if($tw.browser) {
		fn = window["eval"](code + "\n\n//# sourceURL=" + filename);
	} else {
		fn = vm.runInThisContext(code,filename);
	}
	// Call the function and return the exports
	return fn.apply(null,contextValues);
};

/*
Run code in a sandbox with only the specified context variables in scope
*/
$tw.utils.evalSandboxed = $tw.browser ? $tw.utils.evalGlobal : function(code,context,filename) {
	var sandbox = $tw.utils.extend(Object.create(null),context);
	vm.runInNewContext(code,sandbox,filename);
	return sandbox.exports;
};

/*
Creates a PasswordPrompt object
*/
$tw.utils.PasswordPrompt = function() {
	// Store of pending password prompts
	this.passwordPrompts = [];
	// Create the wrapper
	this.promptWrapper = $tw.utils.domMaker("div",{"class":"tc-password-wrapper"});
	document.body.appendChild(this.promptWrapper);
	// Hide the empty wrapper
	this.setWrapperDisplay();
};

/*
Hides or shows the wrapper depending on whether there are any outstanding prompts
*/
$tw.utils.PasswordPrompt.prototype.setWrapperDisplay = function() {
	if(this.passwordPrompts.length) {
		this.promptWrapper.style.display = "block";
	} else {
		this.promptWrapper.style.display = "none";
	}
};

/*
Adds a new password prompt. Options are:
submitText: text to use for submit button (defaults to "Login")
serviceName: text of the human readable service name
noUserName: set true to disable username prompt
canCancel: set true to enable a cancel button (callback called with null)
repeatPassword: set true to prompt for the password twice
callback: function to be called on submission with parameter of object {username:,password:}. Callback must return `true` to remove the password prompt
*/
$tw.utils.PasswordPrompt.prototype.createPrompt = function(options) {
	// Create and add the prompt to the DOM
	var self = this,
		submitText = options.submitText || "Login",
		dm = $tw.utils.domMaker,
		children = [dm("h1",{text: options.serviceName})];
	if(!options.noUserName) {
		children.push(dm("input",{
			attributes: {type: "text", name: "username", placeholder: $tw.language.getString("Encryption/Username")}
		}));
	}
	children.push(dm("input",{
		attributes: {
			type: "password",
			name: "password",
			placeholder: ( $tw.language == undefined ? "Password" : $tw.language.getString("Encryption/Password") )
		}
	}));
	if(options.repeatPassword) {
		children.push(dm("input",{
			attributes: {
				type: "password",
				name: "password2",
				placeholder: $tw.language.getString("Encryption/RepeatPassword")
			}
		}));
	}
	if(options.canCancel) {
		children.push(dm("button",{
			text: $tw.language.getString("Encryption/Cancel"),
			attributes: {
				type: "button"
			},
			eventListeners: [{
					name: "click",
					handlerFunction: function(event) {
						self.removePrompt(promptInfo);
						options.callback(null);
					}
				}]
		}));
	}
	children.push(dm("button",{
		attributes: {type: "submit"},
		text: submitText
	}));
	var form = dm("form",{
		attributes: {autocomplete: "off"},
		children: children
	});
	this.promptWrapper.appendChild(form);
	window.setTimeout(function() {
		form.elements[0].focus();
	},10);
	// Add a submit event handler
	var self = this;
	form.addEventListener("submit",function(event) {
		// Collect the form data
		var data = {},t;
		$tw.utils.each(form.elements,function(element) {
			if(element.name && element.value) {
				data[element.name] = element.value;
			}
		});
		// Check that the passwords match
		if(options.repeatPassword && data.password !== data.password2) {
			alert($tw.language.getString("Encryption/PasswordNoMatch"));
		} else {
			// Call the callback
			if(options.callback(data)) {
				// Remove the prompt if the callback returned true
				self.removePrompt(promptInfo);
			} else {
				// Clear the password if the callback returned false
				$tw.utils.each(form.elements,function(element) {
					if(element.name === "password" || element.name === "password2") {
						element.value = "";
					}
				});
			}
		}
		event.preventDefault();
		return false;
	},true);
	// Add the prompt to the list
	var promptInfo = {
		serviceName: options.serviceName,
		callback: options.callback,
		form: form,
		owner: this
	};
	this.passwordPrompts.push(promptInfo);
	// Make sure the wrapper is displayed
	this.setWrapperDisplay();
	return promptInfo;
};

$tw.utils.PasswordPrompt.prototype.removePrompt = function(promptInfo) {
	var i = this.passwordPrompts.indexOf(promptInfo);
	if(i !== -1) {
		this.passwordPrompts.splice(i,1);
		promptInfo.form.parentNode.removeChild(promptInfo.form);
		this.setWrapperDisplay();
	}
}

/*
Crypto helper object for encrypted content. It maintains the password text in a closure, and provides methods to change
the password, and to encrypt/decrypt a block of text
*/
$tw.utils.Crypto = function() {
	var sjcl = $tw.node ? (global.sjcl || require("./sjcl.js")) : window.sjcl,
		currentPassword = null,
		callSjcl = function(method,inputText,password) {
			password = password || currentPassword;
			var outputText;
			try {
				if(password) {
					outputText = sjcl[method](password,inputText);
				}
			} catch(ex) {
				console.log("Crypto error:" + ex);
				outputText = null;
			}
			return outputText;
		};
	this.setPassword = function(newPassword) {
		currentPassword = newPassword;
		this.updateCryptoStateTiddler();
	};
	this.updateCryptoStateTiddler = function() {
		if($tw.wiki) {
			var state = currentPassword ? "yes" : "no",
				tiddler = $tw.wiki.getTiddler("$:/isEncrypted");
			if(!tiddler || tiddler.fields.text !== state) {
				$tw.wiki.addTiddler(new $tw.Tiddler({title: "$:/isEncrypted", text: state}));
			}
		}
	};
	this.hasPassword = function() {
		return !!currentPassword;
	}
	this.encrypt = function(text,password) {
		return callSjcl("encrypt",text,password);
	};
	this.decrypt = function(text,password) {
		return callSjcl("decrypt",text,password);
	};
};

/////////////////////////// Module mechanism

/*
Execute the module named 'moduleName'. The name can optionally be relative to the module named 'moduleRoot'
*/
$tw.modules.execute = function(moduleName,moduleRoot) {
	var name = moduleName;
	if(moduleName.charAt(0) === ".") {
		name = $tw.utils.resolvePath(moduleName,moduleRoot)
	}
	if(!$tw.modules.titles[name]) {
		if($tw.modules.titles[name + ".js"]) {
			name = name + ".js";
		} else if($tw.modules.titles[name + "/index.js"]) {
			name = name + "/index.js";
		} else if($tw.modules.titles[moduleName]) {
			name = moduleName;
		} else if($tw.modules.titles[moduleName + ".js"]) {
			name = moduleName + ".js";
		} else if($tw.modules.titles[moduleName + "/index.js"]) {
			name = moduleName + "/index.js";
		}
	}
	var moduleInfo = $tw.modules.titles[name],
		tiddler = $tw.wiki.getTiddler(name),
		_exports = {},
		sandbox = {
			module: {exports: _exports},
			//moduleInfo: moduleInfo,
			exports: _exports,
			console: console,
			setInterval: setInterval,
			clearInterval: clearInterval,
			setTimeout: setTimeout,
			clearTimeout: clearTimeout,
			Buffer: $tw.browser ? undefined : Buffer,
			$tw: $tw,
			require: function(title) {
				return $tw.modules.execute(title, name);
			}
		};

	Object.defineProperty(sandbox.module, "id", {
		value: name,
		writable: false,
		enumerable: true,
		configurable: false
	});

	if(!$tw.browser) {
		$tw.utils.extend(sandbox,{
			process: process
		});
	} else {
		/*
		CommonJS optional require.main property:
		 In a browser we offer a fake main module which points back to the boot function
		 (Theoretically, this may allow TW to eventually load itself as a module in the browser)
		*/
		Object.defineProperty(sandbox.require, "main", {
			value: (typeof(require) !== "undefined") ? require.main : {TiddlyWiki: _boot},
			writable: false,
			enumerable: true,
			configurable: false
		});
	}
	if(!moduleInfo) {
		// We could not find the module on this path
		// Try to defer to browserify etc, or node
		var deferredModule;
		if($tw.browser) {
			if(window.require) {
				try {
					return window.require(moduleName);
				} catch(e) {}
			}
			throw "Cannot find module named '" + moduleName + "' required by module '" + moduleRoot + "', resolved to " + name;
		} else {
			// If we don't have a module with that name, let node.js try to find it
			return require(moduleName);
		}
	}
	// Execute the module if we haven't already done so
	if(!moduleInfo.exports) {
		try {
			// Check the type of the definition
			if(typeof moduleInfo.definition === "function") { // Function
				moduleInfo.exports = _exports;
				moduleInfo.definition(moduleInfo,moduleInfo.exports,sandbox.require);
			} else if(typeof moduleInfo.definition === "string") { // String
				moduleInfo.exports = _exports;
				$tw.utils.evalSandboxed(moduleInfo.definition,sandbox,tiddler.fields.title);
				if(sandbox.module.exports) {
					moduleInfo.exports = sandbox.module.exports; //more codemirror workaround
				}
			} else { // Object
				moduleInfo.exports = moduleInfo.definition;
			}
		} catch(e) {
			if (e instanceof SyntaxError) {
				var line = e.lineNumber || e.line; // Firefox || Safari
				if (typeof(line) != "undefined" && line !== null) {
					$tw.utils.error("Syntax error in boot module " + name + ":" + line + ":\n" + e.stack);
				} else if(!$tw.browser) {
					// this is the only way to get node.js to display the line at which the syntax error appeared,
					// and $tw.utils.error would exit anyway
					// cf. https://bugs.chromium.org/p/v8/issues/detail?id=2589
					throw e;
				} else {
					// Opera: line number is included in e.message
					// Chrome/IE: there's currently no way to get the line number
					$tw.utils.error("Syntax error in boot module " + name + ": " + e.message + "\n" + e.stack);
				}
			} else {
				// line number should be included in e.stack for runtime errors
				$tw.utils.error("Error executing boot module " + name + ": " + JSON.stringify(e) + "\n\n" + e.stack);
			}
		}
	}
	// Return the exports of the module
	return moduleInfo.exports;
};

/*
Apply a callback to each module of a particular type
	moduleType: type of modules to enumerate
	callback: function called as callback(title,moduleExports) for each module
*/
$tw.modules.forEachModuleOfType = function(moduleType,callback) {
	var modules = $tw.modules.types[moduleType];
	$tw.utils.each(modules,function(element,title) {
		callback(title,$tw.modules.execute(title));
	});
};

/*
Get all the modules of a particular type in a hashmap by their `name` field
*/
$tw.modules.getModulesByTypeAsHashmap = function(moduleType,nameField) {
	nameField = nameField || "name";
	var results = Object.create(null);
	$tw.modules.forEachModuleOfType(moduleType,function(title,module) {
		results[module[nameField]] = module;
	});
	return results;
};

/*
Apply the exports of the modules of a particular type to a target object
*/
$tw.modules.applyMethods = function(moduleType,targetObject) {
	if(!targetObject) {
		targetObject = Object.create(null);
	}
	$tw.modules.forEachModuleOfType(moduleType,function(title,module) {
		$tw.utils.each(module,function(element,title,object) {
			targetObject[title] = module[title];
		});
	});
	return targetObject;
};

/*
Return a class created from a modules. The module should export the properties to be added to those of the optional base class
*/
$tw.modules.createClassFromModule = function(moduleExports,baseClass) {
	var newClass = function() {};
	if(baseClass) {
		newClass.prototype = new baseClass();
		newClass.prototype.constructor = baseClass;
	}
	$tw.utils.extend(newClass.prototype,moduleExports);
	return newClass;
};

/*
Return an array of classes created from the modules of a specified type. Each module should export the properties to be added to those of the optional base class
*/
$tw.modules.createClassesFromModules = function(moduleType,subType,baseClass) {
	var classes = Object.create(null);
	$tw.modules.forEachModuleOfType(moduleType,function(title,moduleExports) {
		if(!subType || moduleExports.types[subType]) {
			classes[moduleExports.name] = $tw.modules.createClassFromModule(moduleExports,baseClass);
		}
	});
	return classes;
};

/////////////////////////// Barebones tiddler object

/*
Construct a tiddler object from a hashmap of tiddler fields. If multiple hasmaps are provided they are merged,
taking precedence to the right
*/
$tw.Tiddler = function(/* [fields,] fields */) {
	this.fields = Object.create(null);
	this.cache = Object.create(null);
	for(var c=0; c<arguments.length; c++) {
		var arg = arguments[c],
			src = (arg instanceof $tw.Tiddler) ? arg.fields : arg;
		for(var t in src) {
			if(src[t] === undefined || src[t] === null) {
				if(t in this.fields) {
					delete this.fields[t]; // If we get a field that's undefined, delete any previous field value
				}
			} else {
				// Parse the field with the associated field module (if any)
				var fieldModule = $tw.Tiddler.fieldModules[t],
					value;
				if(fieldModule && fieldModule.parse) {
					value = fieldModule.parse.call(this,src[t]);
				} else {
					value = src[t];
				}
				// Freeze the field to keep it immutable
				if(value != null && typeof value === "object") {
					Object.freeze(value);
				}
				this.fields[t] = value;
			}
		}
	}
	// Freeze the tiddler against modification
	Object.freeze(this.fields);
	Object.freeze(this);
};

$tw.Tiddler.prototype.hasField = function(field) {
	return $tw.utils.hop(this.fields,field);
};

/*
Compare two tiddlers for equality
tiddler: the tiddler to compare
excludeFields: array of field names to exclude from the comparison
*/
$tw.Tiddler.prototype.isEqual = function(tiddler,excludeFields) {
	if(!(tiddler instanceof $tw.Tiddler)) {
		return false;
	}
	excludeFields = excludeFields || [];
	var self = this,
		differences = []; // Fields that have differences
	// Add to the differences array
	function addDifference(fieldName) {
		// Check for this field being excluded
		if(excludeFields.indexOf(fieldName) === -1) {
			// Save the field as a difference
			$tw.utils.pushTop(differences,fieldName);
		}
	}
	// Returns true if the two values of this field are equal
	function isFieldValueEqual(fieldName) {
		var valueA = self.fields[fieldName],
			valueB = tiddler.fields[fieldName];
		// Check for identical string values
		if(typeof(valueA) === "string" && typeof(valueB) === "string" && valueA === valueB) {
			return true;
		}
		// Check for identical array values
		if($tw.utils.isArray(valueA) && $tw.utils.isArray(valueB) && $tw.utils.isArrayEqual(valueA,valueB)) {
			return true;
		}
		// Check for identical date values
		if($tw.utils.isDate(valueA) && $tw.utils.isDate(valueB) && valueA.getTime() === valueB.getTime()) {
			return true;
		}
		// Otherwise the fields must be different
		return false;
	}
	// Compare our fields
	for(var fieldName in this.fields) {
		if(!isFieldValueEqual(fieldName)) {
			addDifference(fieldName);
		}
	}
	// There's a difference for every field in the other tiddler that we don't have
	for(fieldName in tiddler.fields) {
		if(!(fieldName in this.fields)) {
			addDifference(fieldName);
		}
	}
	// Return whether there were any differences
	return differences.length === 0;
};

/*
Register and install the built in tiddler field modules
*/
$tw.modules.define("$:/boot/tiddlerfields/modified","tiddlerfield",{
	name: "modified",
	parse: $tw.utils.parseDate,
	stringify: $tw.utils.stringifyDate
});
$tw.modules.define("$:/boot/tiddlerfields/created","tiddlerfield",{
	name: "created",
	parse: $tw.utils.parseDate,
	stringify: $tw.utils.stringifyDate
});
$tw.modules.define("$:/boot/tiddlerfields/color","tiddlerfield",{
	name: "color",
	editTag: "input",
	editType: "color"
});
$tw.modules.define("$:/boot/tiddlerfields/tags","tiddlerfield",{
	name: "tags",
	parse: $tw.utils.parseStringArray,
	stringify: $tw.utils.stringifyList
});
$tw.modules.define("$:/boot/tiddlerfields/list","tiddlerfield",{
	name: "list",
	parse: $tw.utils.parseStringArray,
	stringify: $tw.utils.stringifyList
});

/////////////////////////// Barebones wiki store

/*
Wiki constructor. State is stored in private members that only a small number of privileged accessor methods have direct access. Methods added via the prototype have to use these accessors and cannot access the state data directly.
options include:
enableIndexers - Array of indexer names to enable, or null to use all available indexers
*/
$tw.Wiki = function(options) {
	options = options || {};
	var self = this,
		tiddlers = Object.create(null), // Hashmap of tiddlers
		tiddlerTitles = null, // Array of tiddler titles
		getTiddlerTitles = function() {
			if(!tiddlerTitles) {
				tiddlerTitles = Object.keys(tiddlers);
			}
			return tiddlerTitles;
		},
		pluginTiddlers = [], // Array of tiddlers containing registered plugins, ordered by priority
		pluginInfo = Object.create(null), // Hashmap of parsed plugin content
		shadowTiddlers = Object.create(null), // Hashmap by title of {source:, tiddler:}
		shadowTiddlerTitles = null,
		getShadowTiddlerTitles = function() {
			if(!shadowTiddlerTitles) {
				shadowTiddlerTitles = Object.keys(shadowTiddlers);
			}
			return shadowTiddlerTitles;
		},
		enableIndexers = options.enableIndexers || null,
		indexers = [],
		indexersByName = Object.create(null);

	this.addIndexer = function(indexer,name) {
		// Bail if this indexer is not enabled
		if(enableIndexers && enableIndexers.indexOf(name) === -1) {
			return;
		}
		indexers.push(indexer);
		indexersByName[name] = indexer;
		indexer.init();
	};

	this.getIndexer = function(name) {
		return indexersByName[name] || null;
	};

	// Add a tiddler to the store
	this.addTiddler = function(tiddler) {
		if(!(tiddler instanceof $tw.Tiddler)) {
			tiddler = new $tw.Tiddler(tiddler);
		}
		// Save the tiddler
		if(tiddler) {
			var title = tiddler.fields.title;
			if(title) {
// Uncomment the following line for detailed logs of all tiddler writes
// console.log("Adding",title,tiddler)
				// Record the old tiddler state
				var updateDescriptor = {
					old: {
						tiddler: this.getTiddler(title),
						shadow: this.isShadowTiddler(title),
						exists: this.tiddlerExists(title)
					}
				}
				// Save the new tiddler
				tiddlers[title] = tiddler;
				// Check we've got it's title
				if(tiddlerTitles && tiddlerTitles.indexOf(title) === -1) {
					tiddlerTitles.push(title);
				}
				// Record the new tiddler state
				updateDescriptor["new"] = {
					tiddler: tiddler,
					shadow: this.isShadowTiddler(title),
					exists: this.tiddlerExists(title)
				}
				// Update indexes
				this.clearCache(title);
				this.clearGlobalCache();
				$tw.utils.each(indexers,function(indexer) {
					indexer.update(updateDescriptor);
				});
				// Queue a change event
				this.enqueueTiddlerEvent(title);
			}
		}
	};

	// Delete a tiddler
	this.deleteTiddler = function(title) {
// Uncomment the following line for detailed logs of all tiddler deletions
// console.log("Deleting",title)
		if($tw.utils.hop(tiddlers,title)) {
			// Record the old tiddler state
			var updateDescriptor = {
				old: {
					tiddler: this.getTiddler(title),
					shadow: this.isShadowTiddler(title),
					exists: this.tiddlerExists(title)
				}
			}
			// Delete the tiddler
			delete tiddlers[title];
			// Delete it from the list of titles
			if(tiddlerTitles) {
				var index = tiddlerTitles.indexOf(title);
				if(index !== -1) {
					tiddlerTitles.splice(index,1);
				}
			}
			// Record the new tiddler state
			updateDescriptor["new"] = {
				tiddler: this.getTiddler(title),
				shadow: this.isShadowTiddler(title),
				exists: this.tiddlerExists(title)
			}
			// Update indexes
			this.clearCache(title);
			this.clearGlobalCache();
			$tw.utils.each(indexers,function(indexer) {
				indexer.update(updateDescriptor);
			});
			// Queue a change event
			this.enqueueTiddlerEvent(title,true);
		}
	};

	// Get a tiddler from the store
	this.getTiddler = function(title) {
		if(title) {
			var t = tiddlers[title];
			if(t instanceof $tw.Tiddler) {
				return t;
			} else if(title !== undefined && shadowTiddlers[title]) {
				return shadowTiddlers[title].tiddler;
			}
			return undefined;
		}
	};

	// Get an array of all tiddler titles
	this.allTitles = function() {
		return getTiddlerTitles().slice(0);
	};

	// Iterate through all tiddler titles
	this.each = function(callback) {
		var titles = getTiddlerTitles(),
			index,titlesLength,title;
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			callback(tiddlers[title],title);
		}
	};

	// Get an array of all shadow tiddler titles
	this.allShadowTitles = function() {
		return getShadowTiddlerTitles().slice(0);
	};

	// Iterate through all shadow tiddler titles
	this.eachShadow = function(callback) {
		var titles = getShadowTiddlerTitles(),
			index,titlesLength,title;
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			var shadowInfo = shadowTiddlers[title];
			callback(shadowInfo.tiddler,title);
		}
	};

	// Iterate through all tiddlers and then the shadows
	this.eachTiddlerPlusShadows = function(callback) {
		var index,titlesLength,title,
			titles = getTiddlerTitles();
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			callback(tiddlers[title],title);
		}
		titles = getShadowTiddlerTitles();
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			if(!tiddlers[title]) {
				var shadowInfo = shadowTiddlers[title];
				callback(shadowInfo.tiddler,title);
			}
		}
	};

	// Iterate through all the shadows and then the tiddlers
	this.eachShadowPlusTiddlers = function(callback) {
		var index,titlesLength,title,
			titles = getShadowTiddlerTitles();
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			if(tiddlers[title]) {
				callback(tiddlers[title],title);
			} else {
				var shadowInfo = shadowTiddlers[title];
				callback(shadowInfo.tiddler,title);
			}
		}
		titles = getTiddlerTitles();
		for(index = 0, titlesLength = titles.length; index < titlesLength; index++) {
			title = titles[index];
			if(!shadowTiddlers[title]) {
				callback(tiddlers[title],title);
			}
		}
	};

	// Test for the existence of a tiddler (excludes shadow tiddlers)
	this.tiddlerExists = function(title) {
		return !!$tw.utils.hop(tiddlers,title);
	};

	// Determines if a tiddler is a shadow tiddler, regardless of whether it has been overridden by a real tiddler
	this.isShadowTiddler = function(title) {
		return $tw.utils.hop(shadowTiddlers,title);
	};

	this.getShadowSource = function(title) {
		if($tw.utils.hop(shadowTiddlers,title)) {
			return shadowTiddlers[title].source;
		}
		return null;
	};

	// Get an array of all the currently recognised plugin types
	this.getPluginTypes = function() {
		var types = [];
		$tw.utils.each(pluginTiddlers,function(pluginTiddler) {
			var pluginType = pluginTiddler.fields["plugin-type"];
			if(pluginType && types.indexOf(pluginType) === -1) {
				types.push(pluginType);
			}
		});
		return types;
	};

	// Read plugin info for all plugins, or just an array of titles. Returns the number of plugins updated or deleted
	this.readPluginInfo = function(titles) {
		var results = {
			modifiedPlugins: [],
			deletedPlugins: []
		};
		$tw.utils.each(titles || getTiddlerTitles(),function(title) {
			var tiddler = tiddlers[title];
			if(tiddler) {
				if(tiddler.fields.type === "application/json" && tiddler.hasField("plugin-type") && tiddler.fields.text) {
					pluginInfo[tiddler.fields.title] = JSON.parse(tiddler.fields.text);
					results.modifiedPlugins.push(tiddler.fields.title);
				}
			} else {
				if(pluginInfo[title]) {
					delete pluginInfo[title];
					results.deletedPlugins.push(title);
				}
			}
		});
		return results;
	};

	// Get plugin info for a plugin
	this.getPluginInfo = function(title) {
		return pluginInfo[title];
	};

	// Register the plugin tiddlers of a particular type, or null/undefined for any type, optionally restricting registration to an array of tiddler titles. Return the array of titles affected
	this.registerPluginTiddlers = function(pluginType,titles) {
		var self = this,
			registeredTitles = [],
			checkTiddler = function(tiddler,title) {
				if(tiddler && tiddler.fields.type === "application/json" && tiddler.fields["plugin-type"] && (!pluginType || tiddler.fields["plugin-type"] === pluginType)) {
					var disablingTiddler = self.getTiddler("$:/config/Plugins/Disabled/" + title);
					if(title === "$:/core" || !disablingTiddler || (disablingTiddler.fields.text || "").trim() !== "yes") {
						self.unregisterPluginTiddlers(null,[title]); // Unregister the plugin if it's already registered
						pluginTiddlers.push(tiddler);
						registeredTitles.push(tiddler.fields.title);
					}
				}
			};
		if(titles) {
			$tw.utils.each(titles,function(title) {
				checkTiddler(self.getTiddler(title),title);
			});
		} else {
			this.each(function(tiddler,title) {
				checkTiddler(tiddler,title);
			});
		}
		return registeredTitles;
	};

	// Unregister the plugin tiddlers of a particular type, or null/undefined for any type, optionally restricting unregistering to an array of tiddler titles. Returns an array of the titles affected
	this.unregisterPluginTiddlers = function(pluginType,titles) {
		var self = this,
			unregisteredTitles = [];
		// Remove any previous registered plugins of this type
		for(var t=pluginTiddlers.length-1; t>=0; t--) {
			var tiddler = pluginTiddlers[t];
			if(tiddler.fields["plugin-type"] && (!pluginType || tiddler.fields["plugin-type"] === pluginType) && (!titles || titles.indexOf(tiddler.fields.title) !== -1)) {
				unregisteredTitles.push(tiddler.fields.title);
				pluginTiddlers.splice(t,1);
			}
		}
		return unregisteredTitles;
	};

	// Unpack the currently registered plugins, creating shadow tiddlers for their constituent tiddlers
	this.unpackPluginTiddlers = function() {
		var self = this;
		// Sort the plugin titles by the `plugin-priority` field
		pluginTiddlers.sort(function(a,b) {
			if("plugin-priority" in a.fields && "plugin-priority" in b.fields) {
				return a.fields["plugin-priority"] - b.fields["plugin-priority"];
			} else if("plugin-priority" in a.fields) {
				return -1;
			} else if("plugin-priority" in b.fields) {
				return +1;
			} else if(a.fields.title < b.fields.title) {
				return -1;
			} else if(a.fields.title === b.fields.title) {
				return 0;
			} else {
				return +1;
			}
		});
		// Now go through the plugins in ascending order and assign the shadows
		shadowTiddlers = Object.create(null);
		$tw.utils.each(pluginTiddlers,function(tiddler) {
			// Extract the constituent tiddlers
			if($tw.utils.hop(pluginInfo,tiddler.fields.title)) {
				$tw.utils.each(pluginInfo[tiddler.fields.title].tiddlers,function(constituentTiddler,constituentTitle) {
					// Save the tiddler object
					if(constituentTitle) {
						shadowTiddlers[constituentTitle] = {
							source: tiddler.fields.title,
							tiddler: new $tw.Tiddler(constituentTiddler,{title: constituentTitle})
						};
					}
				});
			}
		});
		shadowTiddlerTitles = null;
		this.clearCache(null);
		this.clearGlobalCache();
		$tw.utils.each(indexers,function(indexer) {
			indexer.rebuild();
		});
	};

	if(this.addIndexersToWiki) {
		this.addIndexersToWiki();
	}
};

// Dummy methods that will be filled in after boot
$tw.Wiki.prototype.clearCache =
$tw.Wiki.prototype.clearGlobalCache =
$tw.Wiki.prototype.enqueueTiddlerEvent = function() {};

// Add an array of tiddlers
$tw.Wiki.prototype.addTiddlers = function(tiddlers) {
	for(var t=0; t<tiddlers.length; t++) {
		this.addTiddler(tiddlers[t]);
	}
};

/*
Define all modules stored in ordinary tiddlers
*/
$tw.Wiki.prototype.defineTiddlerModules = function() {
	this.each(function(tiddler,title) {
		if(tiddler.hasField("module-type")) {
			switch (tiddler.fields.type) {
				case "application/javascript":
					// We only define modules that haven't already been defined, because in the browser modules in system tiddlers are defined in inline script
					if(!$tw.utils.hop($tw.modules.titles,tiddler.fields.title)) {
						$tw.modules.define(tiddler.fields.title,tiddler.fields["module-type"],tiddler.fields.text);
					}
					break;
				case "application/json":
					$tw.modules.define(tiddler.fields.title,tiddler.fields["module-type"],JSON.parse(tiddler.fields.text));
					break;
				case "application/x-tiddler-dictionary":
					$tw.modules.define(tiddler.fields.title,tiddler.fields["module-type"],$tw.utils.parseFields(tiddler.fields.text));
					break;
			}
		}
	});
};

/*
Register all the module tiddlers that have a module type
*/
$tw.Wiki.prototype.defineShadowModules = function() {
	var self = this;
	this.eachShadow(function(tiddler,title) {
		// Don't define the module if it is overidden by an ordinary tiddler
		if(!self.tiddlerExists(title) && tiddler.hasField("module-type")) {
			// Define the module
			$tw.modules.define(tiddler.fields.title,tiddler.fields["module-type"],tiddler.fields.text);
		}
	});
};

/*
Enable safe mode by deleting any tiddlers that override a shadow tiddler
*/
$tw.Wiki.prototype.processSafeMode = function() {
	var self = this,
		overrides = [];
	// Find the overriding tiddlers
	this.each(function(tiddler,title) {
		if(self.isShadowTiddler(title)) {
			console.log(title);
			overrides.push(title);
		}
	});
	// Assemble a report tiddler
	var titleReportTiddler = "TiddlyWiki Safe Mode",
		report = [];
	report.push("TiddlyWiki has been started in [[safe mode|https://tiddlywiki.com/static/SafeMode.html]]. All plugins are temporarily disabled. Most customisations have been disabled by renaming the following tiddlers:")
	// Delete the overrides
	overrides.forEach(function(title) {
		var tiddler = self.getTiddler(title),
			newTitle = "SAFE: " + title;
		self.deleteTiddler(title);
		self.addTiddler(new $tw.Tiddler(tiddler, {title: newTitle}));
		report.push("* [[" + title + "|" + newTitle + "]]");
	});
	report.push()
	this.addTiddler(new $tw.Tiddler({title: titleReportTiddler, text: report.join("\n\n")}));
	// Set $:/DefaultTiddlers to point to our report
	this.addTiddler(new $tw.Tiddler({title: "$:/DefaultTiddlers", text: "[[" + titleReportTiddler + "]]"}));
};

/*
Extracts tiddlers from a typed block of text, specifying default field values
*/
$tw.Wiki.prototype.deserializeTiddlers = function(type,text,srcFields,options) {
	srcFields = srcFields || Object.create(null);
	options = options || {};
	var deserializer = $tw.Wiki.tiddlerDeserializerModules[options.deserializer],
		fields = Object.create(null);
	if(!deserializer) {
		deserializer = $tw.Wiki.tiddlerDeserializerModules[type];
	}
	if(!deserializer && $tw.utils.getFileExtensionInfo(type)) {
		// If we didn't find the serializer, try converting it from an extension to a content type
		type = $tw.utils.getFileExtensionInfo(type).type;
		deserializer = $tw.Wiki.tiddlerDeserializerModules[type];
	}
	if(!deserializer && $tw.config.contentTypeInfo[type]) {
		// see if this type has a different deserializer registered with it
		type = $tw.config.contentTypeInfo[type].deserializerType;
		deserializer = $tw.Wiki.tiddlerDeserializerModules[type];
	}
	if(!deserializer) {
		// If we still don't have a deserializer, treat it as plain text
		deserializer = $tw.Wiki.tiddlerDeserializerModules["text/plain"];
	}
	for(var f in srcFields) {
		fields[f] = srcFields[f];
	}
	if(deserializer) {
		return deserializer.call(this,text,fields,type);
	} else {
		// Return a raw tiddler for unknown types
		fields.text = text;
		return [fields];
	}
};

/*
Register the built in tiddler deserializer modules
*/
var deserializeHeaderComment = function(text,fields) {
		var headerCommentRegExp = new RegExp($tw.config.jsModuleHeaderRegExpString,"mg"),
			match = headerCommentRegExp.exec(text);
		fields.text = text;
		if(match) {
			fields = $tw.utils.parseFields(match[1].split(/\r?\n\r?\n/mg)[0],fields);
		}
		return [fields];
	};
$tw.modules.define("$:/boot/tiddlerdeserializer/js","tiddlerdeserializer",{
	"application/javascript": deserializeHeaderComment
});
$tw.modules.define("$:/boot/tiddlerdeserializer/css","tiddlerdeserializer",{
	"text/css": deserializeHeaderComment
});
$tw.modules.define("$:/boot/tiddlerdeserializer/tid","tiddlerdeserializer",{
	"application/x-tiddler": function(text,fields) {
		var split = text.split(/\r?\n\r?\n/mg);
		if(split.length >= 1) {
			fields = $tw.utils.parseFields(split[0],fields);
		}
		if(split.length >= 2) {
			fields.text = split.slice(1).join("\n\n");
		}
		return [fields];
	}
});
$tw.modules.define("$:/boot/tiddlerdeserializer/tids","tiddlerdeserializer",{
	"application/x-tiddlers": function(text,fields) {
		var titles = [],
			tiddlers = [],
			match = /\r?\n\r?\n/mg.exec(text);
		if(match) {
			fields = $tw.utils.parseFields(text.substr(0,match.index),fields);
			var lines = text.substr(match.index + match[0].length).split(/\r?\n/mg);
			for(var t=0; t<lines.length; t++) {
				var line = lines[t];
				if(line.charAt(0) !== "#") {
					var colonPos= line.indexOf(":");
					if(colonPos !== -1) {
						var tiddler = $tw.utils.extend(Object.create(null),fields);
						tiddler.title = (tiddler.title || "") + line.substr(0,colonPos).trim();
						if(titles.indexOf(tiddler.title) !== -1) {
							console.log("Warning: .multids file contains multiple definitions for " + tiddler.title);
						}
						titles.push(tiddler.title);
						tiddler.text = line.substr(colonPos + 2).trim();
						tiddlers.push(tiddler);
					}
				}
			}
		}
		return tiddlers;
	}
});
$tw.modules.define("$:/boot/tiddlerdeserializer/txt","tiddlerdeserializer",{
	"text/plain": function(text,fields,type) {
		fields.text = text;
		fields.type = type || "text/plain";
		return [fields];
	}
});
$tw.modules.define("$:/boot/tiddlerdeserializer/html","tiddlerdeserializer",{
	"text/html": function(text,fields) {
		fields.text = text;
		fields.type = "text/html";
		return [fields];
	}
});
$tw.modules.define("$:/boot/tiddlerdeserializer/json","tiddlerdeserializer",{
	"application/json": function(text,fields) {
		var isTiddlerValid = function(data) {
				// Not valid if it's not an object with a title property
				if(typeof(data) !== "object" || !$tw.utils.hop(data,"title")) {
					return false;
				}
				for(var f in data) {
					if($tw.utils.hop(data,f)) {
						// Check field name doesn't contain whitespace or control characters
						if(typeof(data[f]) !== "string" || /[\x00-\x1F\s]/.test(f)) {
							return false;
						}
					}
				}
				return true;
			},
			isTiddlerArrayValid = function(data) {
				for(var t=0; t<data.length; t++) {
					if(!isTiddlerValid(data[t])) {
						return false;
					}
				}
				return true;
			},
			data = JSON.parse(text);
		if($tw.utils.isArray(data) && isTiddlerArrayValid(data)) {
			return data;
		} else if(isTiddlerValid(data)) {
			return [data];
		} else {
			// Plain JSON file
			fields.text = text;
			fields.type = "application/json";
			return [fields];
		}
	}
});

/////////////////////////// Browser definitions

if($tw.browser && !$tw.node) {

/*
Decrypt any tiddlers stored within the element with the ID "encryptedArea". The function is asynchronous to allow the user to be prompted for a password
	callback: function to be called the decryption is complete
*/
$tw.boot.decryptEncryptedTiddlers = function(callback) {
	var encryptedArea = document.getElementById("encryptedStoreArea");
	if(encryptedArea) {
		var encryptedText = encryptedArea.innerHTML,
			prompt = "Enter a password to decrypt this TiddlyWiki";
		// Prompt for the password
		if($tw.utils.hop($tw.boot,"encryptionPrompts")) {
			prompt = $tw.boot.encryptionPrompts.decrypt;
		}
		$tw.passwordPrompt.createPrompt({
			serviceName: prompt,
			noUserName: true,
			submitText: "Decrypt",
			callback: function(data) {
				// Attempt to decrypt the tiddlers
				$tw.crypto.setPassword(data.password);
				var decryptedText = $tw.crypto.decrypt(encryptedText);
				if(decryptedText) {
					var json = JSON.parse(decryptedText);
					for(var title in json) {
						$tw.preloadTiddler(json[title]);
					}
					// Call the callback
					callback();
					// Exit and remove the password prompt
					return true;
				} else {
					// We didn't decrypt everything, so continue to prompt for password
					return false;
				}
			}
		});
	} else {
		// Just invoke the callback straight away if there weren't any encrypted tiddlers
		callback();
	}
};

/*
Register a deserializer that can extract tiddlers from the DOM
*/
$tw.modules.define("$:/boot/tiddlerdeserializer/dom","tiddlerdeserializer",{
	"(DOM)": function(node) {
		var extractTextTiddlers = function(node) {
				var e = node.firstChild;
				while(e && e.nodeName.toLowerCase() !== "pre") {
					e = e.nextSibling;
				}
				var title = node.getAttribute ? node.getAttribute("title") : null;
				if(e && title) {
					var attrs = node.attributes,
						tiddler = {
							text: $tw.utils.htmlDecode(e.innerHTML)
						};
					for(var i=attrs.length-1; i >= 0; i--) {
						tiddler[attrs[i].name] = attrs[i].value;
					}
					return [tiddler];
				} else {
					return null;
				}
			},
			extractModuleTiddlers = function(node) {
				if(node.hasAttribute && node.hasAttribute("data-tiddler-title")) {
					var text = node.innerHTML,
						s = text.indexOf("{"),
						e = text.lastIndexOf("}");
					if(node.hasAttribute("data-module") && s !== -1 && e !== -1) {
						text = text.substring(s+1,e);
					}
					var fields = {text: text},
						attributes = node.attributes;
					for(var a=0; a<attributes.length; a++) {
						if(attributes[a].nodeName.substr(0,13) === "data-tiddler-") {
							fields[attributes[a].nodeName.substr(13)] = attributes[a].value;
						}
					}
					return [fields];
				} else {
					return null;
				}
			},
			t,result = [];
		if(node) {
			for(t = 0; t < node.childNodes.length; t++) {
					var childNode = node.childNodes[t],
						tiddlers = extractTextTiddlers(childNode);
					tiddlers = tiddlers || extractModuleTiddlers(childNode);
					if(tiddlers) {
						result.push.apply(result,tiddlers);
					}
			}
		}
		return result;
	}
});

$tw.loadTiddlersBrowser = function() {
	// In the browser, we load tiddlers from certain elements
	var containerIds = [
		"libraryModules",
		"modules",
		"bootKernelPrefix",
		"bootKernel",
		"styleArea",
		"storeArea",
		"systemArea"
	];
	for(var t=0; t<containerIds.length; t++) {
		$tw.wiki.addTiddlers($tw.wiki.deserializeTiddlers("(DOM)",document.getElementById(containerIds[t])));
	}
};

} else {

/////////////////////////// Server definitions

/*
Get any encrypted tiddlers
*/
$tw.boot.decryptEncryptedTiddlers = function(callback) {
	// Storing encrypted tiddlers on the server isn't supported yet
	callback();
};

} // End of if($tw.browser && !$tw.node)

/////////////////////////// Node definitions

if($tw.node) {

/*
Load the tiddlers contained in a particular file (and optionally extract fields from the accompanying .meta file) returned as {filepath:,type:,tiddlers:[],hasMetaFile:}
*/
$tw.loadTiddlersFromFile = function(filepath,fields) {
	var ext = path.extname(filepath),
		extensionInfo = $tw.utils.getFileExtensionInfo(ext),
		type = extensionInfo ? extensionInfo.type : null,
		typeInfo = type ? $tw.config.contentTypeInfo[type] : null,
		data = fs.readFileSync(filepath,typeInfo ? typeInfo.encoding : "utf8"),
		tiddlers = $tw.wiki.deserializeTiddlers(ext,data,fields),
		metadata = $tw.loadMetadataForFile(filepath);
	if(metadata) {
		if(type === "application/json") {
			tiddlers = [{text: data, type: "application/json"}];
		}
		tiddlers = [$tw.utils.extend({},tiddlers[0],metadata)];
	}
	return {filepath: filepath, type: type, tiddlers: tiddlers, hasMetaFile: !!metadata};
};

/*
Load the metadata fields in the .meta file corresponding to a particular file
*/
$tw.loadMetadataForFile = function(filepath) {
	var metafilename = filepath + ".meta";
	if(fs.existsSync(metafilename)) {
		return $tw.utils.parseFields(fs.readFileSync(metafilename,"utf8") || "");
	} else {
		return null;
	}
};

/*
A default set of files for TiddlyWiki to ignore during load.
This matches what NPM ignores, and adds "*.meta" to ignore tiddler
metadata files.
*/
$tw.boot.excludeRegExp = /^\.DS_Store$|^.*\.meta$|^\..*\.swp$|^\._.*$|^\.git$|^\.hg$|^\.lock-wscript$|^\.svn$|^\.wafpickle-.*$|^CVS$|^npm-debug\.log$/;

/*
Load all the tiddlers recursively from a directory, including honouring `tiddlywiki.files` files for drawing in external files. Returns an array of {filepath:,type:,tiddlers: [{..fields...}],hasMetaFile:}. Note that no file information is returned for externally loaded tiddlers, just the `tiddlers` property.
*/
$tw.loadTiddlersFromPath = function(filepath,excludeRegExp) {
	excludeRegExp = excludeRegExp || $tw.boot.excludeRegExp;
	var tiddlers = [];
	if(fs.existsSync(filepath)) {
		var stat = fs.statSync(filepath);
		if(stat.isDirectory()) {
			var files = fs.readdirSync(filepath);
			// Look for a tiddlywiki.files file
			if(files.indexOf("tiddlywiki.files") !== -1) {
				Array.prototype.push.apply(tiddlers,$tw.loadTiddlersFromSpecification(filepath,excludeRegExp));
			} else {
				// If not, read all the files in the directory
				$tw.utils.each(files,function(file) {
					if(!excludeRegExp.test(file) && file !== "plugin.info") {
						tiddlers.push.apply(tiddlers,$tw.loadTiddlersFromPath(filepath + path.sep + file,excludeRegExp));
					}
				});
			}
		} else if(stat.isFile()) {
			tiddlers.push($tw.loadTiddlersFromFile(filepath,{title: filepath}));
		}
	}
	return tiddlers;
};

/*
Load all the tiddlers defined by a `tiddlywiki.files` specification file
filepath: pathname of the directory containing the specification file
*/
$tw.loadTiddlersFromSpecification = function(filepath,excludeRegExp) {
	var tiddlers = [];
	// Read the specification
	var filesInfo = JSON.parse(fs.readFileSync(filepath + path.sep + "tiddlywiki.files","utf8"));
	// Helper to process a file
	var processFile = function(filename,isTiddlerFile,fields,isEditableFile) {
		var extInfo = $tw.config.fileExtensionInfo[path.extname(filename)],
			type = (extInfo || {}).type || fields.type || "text/plain",
			typeInfo = $tw.config.contentTypeInfo[type] || {},
			pathname = path.resolve(filepath,filename),
			text = fs.readFileSync(pathname,typeInfo.encoding || "utf8"),
			metadata = $tw.loadMetadataForFile(pathname) || {},
			fileTiddlers;
		if(isTiddlerFile) {
			fileTiddlers = $tw.wiki.deserializeTiddlers(path.extname(pathname),text,metadata) || [];
		} else {
			fileTiddlers =  [$tw.utils.extend({text: text},metadata)];
		}
		var combinedFields = $tw.utils.extend({},fields,metadata);
		$tw.utils.each(fileTiddlers,function(tiddler) {
			$tw.utils.each(combinedFields,function(fieldInfo,name) {
				if(typeof fieldInfo === "string" || $tw.utils.isArray(fieldInfo)) {
					tiddler[name] = fieldInfo;
				} else {
					var value = tiddler[name];
					switch(fieldInfo.source) {
						case "filename":
							value = path.basename(filename);
							break;
						case "filename-uri-decoded":
							value = decodeURIComponent(path.basename(filename));
							break;
						case "basename":
							value = path.basename(filename,path.extname(filename));
							break;
						case "basename-uri-decoded":
							value = decodeURIComponent(path.basename(filename,path.extname(filename)));
							break;
						case "extname":
							value = path.extname(filename);
							break;
						case "created":
							value = new Date(fs.statSync(pathname).birthtime);
							break;
						case "modified":
							value = new Date(fs.statSync(pathname).mtime);
							break;
					}
					if(fieldInfo.prefix) {
						value = fieldInfo.prefix + value;
					}
					if(fieldInfo.suffix) {
						value = value + fieldInfo.suffix;
					}
					tiddler[name] = value;
				}
			});
		});
		if(isEditableFile) {
			tiddlers.push({filepath: pathname, hasMetaFile: !!metadata && !isTiddlerFile, isEditableFile: true, tiddlers: fileTiddlers});
		} else {
			tiddlers.push({tiddlers: fileTiddlers});
		}
	};
	// Process the listed tiddlers
	$tw.utils.each(filesInfo.tiddlers,function(tidInfo) {
		if(tidInfo.prefix && tidInfo.suffix) {
			tidInfo.fields.text = {prefix: tidInfo.prefix,suffix: tidInfo.suffix};
		} else if(tidInfo.prefix) {
			tidInfo.fields.text = {prefix: tidInfo.prefix};
		} else if(tidInfo.suffix) {
			tidInfo.fields.text = {suffix: tidInfo.suffix};
		}
		processFile(tidInfo.file,tidInfo.isTiddlerFile,tidInfo.fields);
	});
	// Process any listed directories
	$tw.utils.each(filesInfo.directories,function(dirSpec) {
		// Read literal directories directly
		if(typeof dirSpec === "string") {
			var pathname = path.resolve(filepath,dirSpec);
			if(fs.existsSync(pathname) && fs.statSync(pathname).isDirectory()) {
				tiddlers.push.apply(tiddlers,$tw.loadTiddlersFromPath(pathname,excludeRegExp));
			}
		} else {
			// Process directory specifier
			var dirPath = path.resolve(filepath,dirSpec.path);
			if(fs.existsSync(dirPath) && fs.statSync(dirPath).isDirectory()) {
				var	files = fs.readdirSync(dirPath),
					fileRegExp = new RegExp(dirSpec.filesRegExp || "^.*$"),
					metaRegExp = /^.*\.meta$/;
				for(var t=0; t<files.length; t++) {
					var filename = files[t];
					if(filename !== "tiddlywiki.files" && !metaRegExp.test(filename) && fileRegExp.test(filename)) {
						processFile(dirPath + path.sep + filename,dirSpec.isTiddlerFile,dirSpec.fields,dirSpec.isEditableFile);
					}
				}
			} else {
				console.log("Warning: a directory in a tiddlywiki.files file does not exist.");
				console.log("dirPath: " + dirPath);
				console.log("tiddlywiki.files location: " + filepath);
			}
		}
	});
	return tiddlers;
};

/*
Load the tiddlers from a plugin folder, and package them up into a proper JSON plugin tiddler
*/
$tw.loadPluginFolder = function(filepath,excludeRegExp) {
	excludeRegExp = excludeRegExp || $tw.boot.excludeRegExp;
	var infoPath = filepath + path.sep + "plugin.info";
	if(fs.existsSync(filepath) && fs.statSync(filepath).isDirectory()) {
		// Read the plugin information
		if(!fs.existsSync(infoPath) || !fs.statSync(infoPath).isFile()) {
			console.log("Warning: missing plugin.info file in " + filepath);
			return null;
		}
		var pluginInfo = JSON.parse(fs.readFileSync(infoPath,"utf8"));
		// Read the plugin files
		var pluginFiles = $tw.loadTiddlersFromPath(filepath,excludeRegExp);
		// Save the plugin tiddlers into the plugin info
		pluginInfo.tiddlers = pluginInfo.tiddlers || Object.create(null);
		for(var f=0; f<pluginFiles.length; f++) {
			var tiddlers = pluginFiles[f].tiddlers;
			for(var t=0; t<tiddlers.length; t++) {
				var tiddler= tiddlers[t];
				if(tiddler.title) {
					pluginInfo.tiddlers[tiddler.title] = tiddler;
				}
			}
		}
		// Give the plugin the same version number as the core if it doesn't have one
		if(!("version" in pluginInfo)) {
			pluginInfo.version = $tw.packageInfo.version;
		}
		// Use "plugin" as the plugin-type if we don't have one
		if(!("plugin-type" in pluginInfo)) {
			pluginInfo["plugin-type"] = "plugin";
		}
		pluginInfo.dependents = pluginInfo.dependents || [];
		pluginInfo.type = "application/json";
		// Set plugin text
		pluginInfo.text = JSON.stringify({tiddlers: pluginInfo.tiddlers});
		delete pluginInfo.tiddlers;
		// Deserialise array fields (currently required for the dependents field)
		for(var field in pluginInfo) {
			if($tw.utils.isArray(pluginInfo[field])) {
				pluginInfo[field] = $tw.utils.stringifyList(pluginInfo[field]);
			}
		}
		return pluginInfo;
	} else {
			return null;
	}
};

/*
name: Name of the plugin to find
paths: array of file paths to search for it
Returns the path of the plugin folder
*/
$tw.findLibraryItem = function(name,paths) {
	var pathIndex = 0;
	do {
		var pluginPath = path.resolve(paths[pathIndex],"./" + name)
		if(fs.existsSync(pluginPath) && fs.statSync(pluginPath).isDirectory()) {
			return pluginPath;
		}
	} while(++pathIndex < paths.length);
	return null;
};

/*
name: Name of the plugin to load
paths: array of file paths to search for it
*/
$tw.loadPlugin = function(name,paths) {
	var pluginPath = $tw.findLibraryItem(name,paths);
	if(pluginPath) {
		var pluginFields = $tw.loadPluginFolder(pluginPath);
		if(pluginFields) {
			$tw.wiki.addTiddler(pluginFields);
			return;
		}
	}
	console.log("Warning: Cannot find plugin '" + name + "'");
};

/*
libraryPath: Path of library folder for these plugins (relative to core path)
envVar: Environment variable name for these plugins
Returns an array of search paths
*/
$tw.getLibraryItemSearchPaths = function(libraryPath,envVar) {
	var pluginPaths = [path.resolve($tw.boot.corePath,libraryPath)],
		env = process.env[envVar];
	if(env) {
		env.split(path.delimiter).map(function(item) {
			if(item) {
				pluginPaths.push(item);
			}
		});
	}
	return pluginPaths;
};

/*
plugins: Array of names of plugins (eg, "tiddlywiki/filesystemadaptor")
libraryPath: Path of library folder for these plugins (relative to core path)
envVar: Environment variable name for these plugins
*/
$tw.loadPlugins = function(plugins,libraryPath,envVar) {
	if(plugins) {
		var pluginPaths = $tw.getLibraryItemSearchPaths(libraryPath,envVar);
		for(var t=0; t<plugins.length; t++) {
			$tw.loadPlugin(plugins[t],pluginPaths);
		}
	}
};

/*
path: path of wiki directory
options:
	parentPaths: array of parent paths that we mustn't recurse into
	readOnly: true if the tiddler file paths should not be retained
*/
$tw.loadWikiTiddlers = function(wikiPath,options) {
	options = options || {};
	var parentPaths = options.parentPaths || [],
		wikiInfoPath = path.resolve(wikiPath,$tw.config.wikiInfo),
		wikiInfo,
		pluginFields;
	// Bail if we don't have a wiki info file
	if(fs.existsSync(wikiInfoPath)) {
		wikiInfo = JSON.parse(fs.readFileSync(wikiInfoPath,"utf8"));
	} else {
		return null;
	}
	// Save the path to the tiddlers folder for the filesystemadaptor
	var config = wikiInfo.config || {};
	if($tw.boot.wikiPath == wikiPath) {
		$tw.boot.wikiTiddlersPath = path.resolve($tw.boot.wikiPath,config["default-tiddler-location"] || $tw.config.wikiTiddlersSubDir);
	}
	// Load any parent wikis
	if(wikiInfo.includeWikis) {
		parentPaths = parentPaths.slice(0);
		parentPaths.push(wikiPath);
		$tw.utils.each(wikiInfo.includeWikis,function(info) {
			if(typeof info === "string") {
				info = {path: info};
			}
			var resolvedIncludedWikiPath = path.resolve(wikiPath,info.path);
			if(parentPaths.indexOf(resolvedIncludedWikiPath) === -1) {
				var subWikiInfo = $tw.loadWikiTiddlers(resolvedIncludedWikiPath,{
					parentPaths: parentPaths,
					readOnly: info["read-only"]
				});
				// Merge the build targets
				wikiInfo.build = $tw.utils.extend([],subWikiInfo.build,wikiInfo.build);
			} else {
				$tw.utils.error("Cannot recursively include wiki " + resolvedIncludedWikiPath);
			}
		});
	}
	// Load any plugins, themes and languages listed in the wiki info file
	$tw.loadPlugins(wikiInfo.plugins,$tw.config.pluginsPath,$tw.config.pluginsEnvVar);
	$tw.loadPlugins(wikiInfo.themes,$tw.config.themesPath,$tw.config.themesEnvVar);
	$tw.loadPlugins(wikiInfo.languages,$tw.config.languagesPath,$tw.config.languagesEnvVar);
	// Load the wiki files, registering them as writable
	var resolvedWikiPath = path.resolve(wikiPath,$tw.config.wikiTiddlersSubDir);
	$tw.utils.each($tw.loadTiddlersFromPath(resolvedWikiPath),function(tiddlerFile) {
		if(!options.readOnly && tiddlerFile.filepath) {
			$tw.utils.each(tiddlerFile.tiddlers,function(tiddler) {
				$tw.boot.files[tiddler.title] = {
					filepath: tiddlerFile.filepath,
					type: tiddlerFile.type,
					hasMetaFile: tiddlerFile.hasMetaFile,
					isEditableFile: config["retain-original-tiddler-path"] || tiddlerFile.isEditableFile || tiddlerFile.filepath.indexOf($tw.boot.wikiTiddlersPath) !== 0
				};
			});
		}
		$tw.wiki.addTiddlers(tiddlerFile.tiddlers);
	});
	if ($tw.boot.wikiPath == wikiPath) {
		// Save the original tiddler file locations if requested
		var output = {}, relativePath, fileInfo;
		for(var title in $tw.boot.files) {
			fileInfo = $tw.boot.files[title];
			if(fileInfo.isEditableFile) {
				relativePath = path.relative($tw.boot.wikiTiddlersPath,fileInfo.filepath);
				fileInfo.originalpath = relativePath;
				output[title] =
					path.sep === "/" ?
					relativePath :
					relativePath.split(path.sep).join("/");
			}
		}
		if(Object.keys(output).length > 0){
			$tw.wiki.addTiddler({title: "$:/config/OriginalTiddlerPaths", type: "application/json", text: JSON.stringify(output)});
		}
	}
	// Load any plugins within the wiki folder
	var wikiPluginsPath = path.resolve(wikiPath,$tw.config.wikiPluginsSubDir);
	if(fs.existsSync(wikiPluginsPath)) {
		var pluginFolders = fs.readdirSync(wikiPluginsPath);
		for(var t=0; t<pluginFolders.length; t++) {
			pluginFields = $tw.loadPluginFolder(path.resolve(wikiPluginsPath,"./" + pluginFolders[t]));
			if(pluginFields) {
				$tw.wiki.addTiddler(pluginFields);
			}
		}
	}
	// Load any themes within the wiki folder
	var wikiThemesPath = path.resolve(wikiPath,$tw.config.wikiThemesSubDir);
	if(fs.existsSync(wikiThemesPath)) {
		var themeFolders = fs.readdirSync(wikiThemesPath);
		for(var t=0; t<themeFolders.length; t++) {
			pluginFields = $tw.loadPluginFolder(path.resolve(wikiThemesPath,"./" + themeFolders[t]));
			if(pluginFields) {
				$tw.wiki.addTiddler(pluginFields);
			}
		}
	}
	// Load any languages within the wiki folder
	var wikiLanguagesPath = path.resolve(wikiPath,$tw.config.wikiLanguagesSubDir);
	if(fs.existsSync(wikiLanguagesPath)) {
		var languageFolders = fs.readdirSync(wikiLanguagesPath);
		for(var t=0; t<languageFolders.length; t++) {
			pluginFields = $tw.loadPluginFolder(path.resolve(wikiLanguagesPath,"./" + languageFolders[t]));
			if(pluginFields) {
				$tw.wiki.addTiddler(pluginFields);
			}
		}
	}
	return wikiInfo;
};

$tw.loadTiddlersNode = function() {
	// Load the boot tiddlers
	$tw.utils.each($tw.loadTiddlersFromPath($tw.boot.bootPath),function(tiddlerFile) {
		$tw.wiki.addTiddlers(tiddlerFile.tiddlers);
	});
	// Load the core tiddlers
	$tw.wiki.addTiddler($tw.loadPluginFolder($tw.boot.corePath));
	// Load any extra plugins
	$tw.utils.each($tw.boot.extraPlugins,function(name) {
		if(name.charAt(0) === "+") { // Relative path to plugin
			var pluginFields = $tw.loadPluginFolder(name.substring(1));
			if(pluginFields) {
				$tw.wiki.addTiddler(pluginFields);
			}
		} else {
			var parts = name.split("/"),
				type = parts[0];
			if(parts.length  === 3 && ["plugins","themes","languages"].indexOf(type) !== -1) {
				$tw.loadPlugins([parts[1] + "/" + parts[2]],$tw.config[type + "Path"],$tw.config[type + "EnvVar"]);
			}
		}
	});
	// Load the tiddlers from the wiki directory
	if($tw.boot.wikiPath) {
		$tw.boot.wikiInfo = $tw.loadWikiTiddlers($tw.boot.wikiPath);
	}
};

// End of if($tw.node)
}

/////////////////////////// Main startup function called once tiddlers have been decrypted

/*
Startup TiddlyWiki
*/
$tw.boot.initStartup = function(options) {
	// Get the URL hash and check for safe mode
	$tw.locationHash = "#";
	if($tw.browser && !$tw.node) {
		if(location.hash === "#:safe") {
			$tw.safeMode = true;
		} else {
			$tw.locationHash = $tw.utils.getLocationHash();
		}
	}
	// Initialise some more $tw properties
	$tw.utils.deepDefaults($tw,{
		modules: { // Information about each module
			titles: Object.create(null), // hashmap by module title of {fn:, exports:, moduleType:}
			types: {} // hashmap by module type of hashmap of exports
		},
		config: { // Configuration overridables
			pluginsPath: "../plugins/",
			themesPath: "../themes/",
			languagesPath: "../languages/",
			editionsPath: "../editions/",
			wikiInfo: "./tiddlywiki.info",
			wikiPluginsSubDir: "./plugins",
			wikiThemesSubDir: "./themes",
			wikiLanguagesSubDir: "./languages",
			wikiTiddlersSubDir: "./tiddlers",
			wikiOutputSubDir: "./output",
			jsModuleHeaderRegExpString: "^\\/\\*\\\\(?:\\r?\\n)((?:^[^\\r\\n]*(?:\\r?\\n))+?)(^\\\\\\*\\/$(?:\\r?\\n)?)",
			fileExtensionInfo: Object.create(null), // Map file extension to {type:}
			contentTypeInfo: Object.create(null), // Map type to {encoding:,extension:}
			pluginsEnvVar: "TIDDLYWIKI_PLUGIN_PATH",
			themesEnvVar: "TIDDLYWIKI_THEME_PATH",
			languagesEnvVar: "TIDDLYWIKI_LANGUAGE_PATH",
			editionsEnvVar: "TIDDLYWIKI_EDITION_PATH"
		},
		log: {}, // Log flags
		unloadTasks: []
	});
	if(!$tw.boot.tasks.readBrowserTiddlers) {
		// For writable tiddler files, a hashmap of title to {filepath:,type:,hasMetaFile:}
		$tw.boot.files = Object.create(null);
		// System paths and filenames
		$tw.boot.bootPath = options.bootPath || path.dirname(module.filename);
		$tw.boot.corePath = path.resolve($tw.boot.bootPath,"../core");
		// If there's no arguments then default to `--help`
		if($tw.boot.argv.length === 0) {
			$tw.boot.argv = ["--help"];
		}
		// Parse any extra plugin references
		$tw.boot.extraPlugins = $tw.boot.extraPlugins || [];
		while($tw.boot.argv[0] && $tw.boot.argv[0].indexOf("+") === 0) {
			$tw.boot.extraPlugins.push($tw.boot.argv[0].substring(1));
			$tw.boot.argv.splice(0,1);
		}
		// If the first command line argument doesn't start with `--` then we
		// interpret it as the path to the wiki folder, which will otherwise default
		// to the current folder
		if($tw.boot.argv[0] && $tw.boot.argv[0].indexOf("--") !== 0) {
			$tw.boot.wikiPath = $tw.boot.argv[0];
			$tw.boot.argv = $tw.boot.argv.slice(1);
		} else {
			$tw.boot.wikiPath = process.cwd();
		}
		// Read package info
		$tw.packageInfo = $tw.packageInfo || require("../package.json");
		// Check node version number
		if(!$tw.utils.checkVersions(process.version.substr(1),$tw.packageInfo.engines.node.substr(2))) {
			$tw.utils.error("TiddlyWiki5 requires node.js version " + $tw.packageInfo.engines.node);
		}
	}
	// Add file extension information
	$tw.utils.registerFileType("text/vnd.tiddlywiki","utf8",".tid");
	$tw.utils.registerFileType("application/x-tiddler","utf8",".tid");
	$tw.utils.registerFileType("application/x-tiddlers","utf8",".multids");
	$tw.utils.registerFileType("application/x-tiddler-html-div","utf8",".tiddler");
	$tw.utils.registerFileType("text/vnd.tiddlywiki2-recipe","utf8",".recipe");
	$tw.utils.registerFileType("text/plain","utf8",".txt");
	$tw.utils.registerFileType("text/css","utf8",".css");
	$tw.utils.registerFileType("text/html","utf8",[".html",".htm"]);
	$tw.utils.registerFileType("application/hta","utf16le",".hta",{deserializerType:"text/html"});
	$tw.utils.registerFileType("application/javascript","utf8",".js");
	$tw.utils.registerFileType("application/json","utf8",".json");
	$tw.utils.registerFileType("application/pdf","base64",".pdf",{flags:["image"]});
	$tw.utils.registerFileType("application/zip","base64",".zip");
	$tw.utils.registerFileType("application/x-zip-compressed","base64",".zip");
	$tw.utils.registerFileType("image/jpeg","base64",[".jpg",".jpeg"],{flags:["image"]});
	$tw.utils.registerFileType("image/jpg","base64",[".jpg",".jpeg"],{flags:["image"]});
	$tw.utils.registerFileType("image/png","base64",".png",{flags:["image"]});
	$tw.utils.registerFileType("image/gif","base64",".gif",{flags:["image"]});
	$tw.utils.registerFileType("image/webp","base64",".webp",{flags:["image"]});
	$tw.utils.registerFileType("image/heic","base64",".heic",{flags:["image"]});
	$tw.utils.registerFileType("image/heif","base64",".heif",{flags:["image"]});
	$tw.utils.registerFileType("image/svg+xml","utf8",".svg",{flags:["image"]});
	$tw.utils.registerFileType("image/vnd.microsoft.icon","base64",".ico",{flags:["image"]});
	$tw.utils.registerFileType("image/x-icon","base64",".ico",{flags:["image"]});
	$tw.utils.registerFileType("application/font-woff","base64",".woff");
	$tw.utils.registerFileType("application/x-font-ttf","base64",".woff");
	$tw.utils.registerFileType("application/font-woff2","base64",".woff2");
	$tw.utils.registerFileType("audio/ogg","base64",".ogg");
	$tw.utils.registerFileType("video/ogg","base64",[".ogm",".ogv",".ogg"]);
	$tw.utils.registerFileType("video/webm","base64",".webm");
	$tw.utils.registerFileType("video/mp4","base64",".mp4");
	$tw.utils.registerFileType("audio/mp3","base64",".mp3");
	$tw.utils.registerFileType("audio/mp4","base64",[".mp4",".m4a"]);
	$tw.utils.registerFileType("text/markdown","utf8",[".md",".markdown"],{deserializerType:"text/x-markdown"});
	$tw.utils.registerFileType("text/x-markdown","utf8",[".md",".markdown"]);
	$tw.utils.registerFileType("application/enex+xml","utf8",".enex");
	$tw.utils.registerFileType("application/vnd.openxmlformats-officedocument.wordprocessingml.document","base64",".docx");
	$tw.utils.registerFileType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","base64",".xlsx");
	$tw.utils.registerFileType("application/vnd.openxmlformats-officedocument.presentationml.presentation","base64",".pptx");
	$tw.utils.registerFileType("text/x-bibtex","utf8",".bib",{deserializerType:"application/x-bibtex"});
	$tw.utils.registerFileType("application/x-bibtex","utf8",".bib");
	$tw.utils.registerFileType("application/epub+zip","base64",".epub");
	$tw.utils.registerFileType("application/octet-stream","base64",".octet-stream");
	// Create the wiki store for the app
	$tw.wiki = new $tw.Wiki();
	// Install built in tiddler fields modules
	$tw.Tiddler.fieldModules = $tw.modules.getModulesByTypeAsHashmap("tiddlerfield");
	// Install the tiddler deserializer modules
	$tw.Wiki.tiddlerDeserializerModules = Object.create(null);
	$tw.modules.applyMethods("tiddlerdeserializer",$tw.Wiki.tiddlerDeserializerModules);
	// Call unload handlers in the browser
	if($tw.browser) {
		window.onbeforeunload = function(event) {
			event = event || {};
			var result;
			$tw.utils.each($tw.unloadTasks,function(task) {
				var r = task(event);
				if(r) {
					result = r;
				}
			});
			return result;
		}
	}
};
$tw.boot.loadStartup = function(options){

	// Load tiddlers
	if($tw.boot.tasks.readBrowserTiddlers) {
		$tw.loadTiddlersBrowser();
	} else {
		$tw.loadTiddlersNode();
	}
	// Load any preloaded tiddlers
	if($tw.preloadTiddlers) {
		$tw.wiki.addTiddlers($tw.preloadTiddlers);
	}
	// Give hooks a chance to modify the store
	$tw.hooks.invokeHook("th-boot-tiddlers-loaded");
}
$tw.boot.execStartup = function(options){
	// Unpack plugin tiddlers
	$tw.wiki.readPluginInfo();
	$tw.wiki.registerPluginTiddlers("plugin",$tw.safeMode ? ["$:/core"] : undefined);
	$tw.wiki.unpackPluginTiddlers();
	// Process "safe mode"
	if($tw.safeMode) {
		$tw.wiki.processSafeMode();
	}
	// Register typed modules from the tiddlers we've just loaded
	$tw.wiki.defineTiddlerModules();
	// And any modules within plugins
	$tw.wiki.defineShadowModules();
	// Make sure the crypto state tiddler is up to date
	if($tw.crypto) {
		$tw.crypto.updateCryptoStateTiddler();
	}
	// Gather up any startup modules
	$tw.boot.remainingStartupModules = []; // Array of startup modules
	$tw.modules.forEachModuleOfType("startup",function(title,module) {
		if(module.startup) {
			$tw.boot.remainingStartupModules.push(module);
		}
	});
	// Keep track of the startup tasks that have been executed
	$tw.boot.executedStartupModules = Object.create(null);
	$tw.boot.disabledStartupModules = $tw.boot.disabledStartupModules || [];
	// Repeatedly execute the next eligible task
	$tw.boot.executeNextStartupTask(options.callback);
}
/*
Startup TiddlyWiki
*/
$tw.boot.startup = function(options) {
	options = options || {};
	// Get the URL hash and check for safe mode
	$tw.boot.initStartup(options);
	$tw.boot.loadStartup(options);
	$tw.boot.execStartup(options);
};

/*
Add another unload task
*/
$tw.addUnloadTask = function(task) {
	if($tw.unloadTasks.indexOf(task) === -1) {
		$tw.unloadTasks.push(task);
	}
}

/*
Execute the remaining eligible startup tasks
*/
$tw.boot.executeNextStartupTask = function(callback) {
	// Find the next eligible task
	var taskIndex = 0, task,
		asyncTaskCallback = function() {
			if(task.name) {
				$tw.boot.executedStartupModules[task.name] = true;
			}
			return $tw.boot.executeNextStartupTask(callback);
		};
	while(taskIndex < $tw.boot.remainingStartupModules.length) {
		task = $tw.boot.remainingStartupModules[taskIndex];
		if($tw.boot.isStartupTaskEligible(task)) {
			// Remove this task from the list
			$tw.boot.remainingStartupModules.splice(taskIndex,1);
			// Assemble log message
			var s = ["Startup task:",task.name];
			if(task.platforms) {
				s.push("platforms:",task.platforms.join(","));
			}
			if(task.after) {
				s.push("after:",task.after.join(","));
			}
			if(task.before) {
				s.push("before:",task.before.join(","));
			}
			$tw.boot.log(s.join(" "));
			// Execute task
			if(!$tw.utils.hop(task,"synchronous") || task.synchronous) {
				task.startup();
				if(task.name) {
					$tw.boot.executedStartupModules[task.name] = true;
				}
				return $tw.boot.executeNextStartupTask(callback);
			} else {
				task.startup(asyncTaskCallback);
				return true;
			}
		}
		taskIndex++;
	}
	if(typeof callback === 'function') {
		callback();
	}
	return false;
};

/*
Returns true if we are running on one of the platforms specified in taskModule's
`platforms` array; or if `platforms` property is not defined.
*/
$tw.boot.doesTaskMatchPlatform = function(taskModule) {
	var platforms = taskModule.platforms;
	if(platforms) {
		for(var t=0; t<platforms.length; t++) {
			switch (platforms[t]) {
				case "browser":
					if ($tw.browser) {
						return true;
					}
					break;
				case "node":
					if ($tw.node) {
						return true;
					}
					break;
				default:
					$tw.utils.error("Module " + taskModule.name + ": '" + platforms[t] + "' in export.platforms invalid");
			}
		}
		return false;
	}
	return true;
};

$tw.boot.isStartupTaskEligible = function(taskModule) {
	var t;
	// Check that the platform is correct
	if(!$tw.boot.doesTaskMatchPlatform(taskModule)) {
		return false;
	}
	var name = taskModule.name,
		remaining = $tw.boot.remainingStartupModules;
	if(name) {
		// Fail if this module is disabled
		if($tw.boot.disabledStartupModules.indexOf(name) !== -1) {
			return false;
		}
		// Check that no other outstanding tasks must be executed before this one
		for(t=0; t<remaining.length; t++) {
			var task = remaining[t];
			if(task.before && task.before.indexOf(name) !== -1) {
				if($tw.boot.doesTaskMatchPlatform(task) || (task.name && $tw.boot.disabledStartupModules.indexOf(name) !== -1)) {
					return false;
				}
			}
		}
	}
	// Check that all of the tasks that we must be performed after has been done
	var after = taskModule.after;
	if(after) {
		for(t=0; t<after.length; t++) {
			if(!$tw.boot.executedStartupModules[after[t]]) {
				return false;
			}
		}
	}
	return true;
};

/*
Global Hooks mechanism which allows plugins to modify default functionality
*/
$tw.hooks = $tw.hooks || { names: {}};

/*
Add hooks to the  hashmap
*/
$tw.hooks.addHook = function(hookName,definition) {
	if($tw.utils.hop($tw.hooks.names,hookName)) {
		$tw.hooks.names[hookName].push(definition);
	}
	else {
		$tw.hooks.names[hookName] = [definition];
	}
};

/*
Invoke the hook by key
*/
$tw.hooks.invokeHook = function(hookName /*, value,... */) {
	var args = Array.prototype.slice.call(arguments,1);
	if($tw.utils.hop($tw.hooks.names,hookName)) {
		for (var i = 0; i < $tw.hooks.names[hookName].length; i++) {
			args[0] = $tw.hooks.names[hookName][i].apply(null,args);
		}
	}
	return args[0];
};

/////////////////////////// Main boot function to decrypt tiddlers and then startup

$tw.boot.boot = function(callback) {
	// Initialise crypto object
	$tw.crypto = new $tw.utils.Crypto();
	// Initialise password prompter
	if($tw.browser && !$tw.node) {
		$tw.passwordPrompt = new $tw.utils.PasswordPrompt();
	}
	// Preload any encrypted tiddlers
	$tw.boot.decryptEncryptedTiddlers(function() {
		// Startup
		$tw.boot.startup({callback: callback});
	});
};

/////////////////////////// Autoboot in the browser

if($tw.browser && !$tw.boot.suppressBoot) {
	$tw.boot.boot();
}

return $tw;

});

if(typeof(exports) !== "undefined") {
	exports.TiddlyWiki = _boot;
} else {
	_boot(window.$tw);
}
</script>
</div>
<!--~~ Raw markup for the bottom of the body section ~~-->

</body>
</html>
